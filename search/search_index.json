{"config":{"lang":["zh","en"],"separator":"[\\s\\u200b\\-_,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stemmer"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"\u9996\u9875","text":""},{"location":"#langgraph","title":"LangGraph \u4e2d\u6587\u6587\u6863","text":"<p>\u6b63\u5728\u8df3\u8f6c\u5230\u5feb\u901f\u5f00\u59cb\u6559\u7a0b...</p> <p>\u5982\u679c\u6ca1\u6709\u81ea\u52a8\u8df3\u8f6c\uff0c\u8bf7\u70b9\u51fb\uff1a\u5f00\u59cb\u5b66\u4e60 LangGraph</p> <p>\u5173\u4e8e\u672c\u6587\u6863</p> <p>\u8fd9\u662f LangGraph \u5b98\u65b9\u6587\u6863\u7684\u4e2d\u6587\u7ffb\u8bd1\u7248\u672c\u3002</p> <ul> <li>GitHub \u4ed3\u5e93\uff1alishiyucn/langgraph-doc-zh</li> <li>\u5b98\u65b9\u6587\u6863\uff1aLangGraph \u5b98\u65b9\u7f51\u7ad9</li> </ul>"},{"location":"adopters/","title":"\ud83e\udd9c\ud83d\udd78\ufe0f \u6848\u4f8b\u7814\u7a76","text":"<p>\u6b64\u5217\u8868\u6536\u96c6\u4e86\u4f7f\u7528 LangGraph \u7684\u516c\u53f8\u53ca\u5176\u6210\u529f\u6848\u4f8b,\u4fe1\u606f\u6765\u81ea\u516c\u5f00\u8d44\u6e90\u3002\u5982\u679c\u60a8\u7684\u516c\u53f8\u4f7f\u7528 LangGraph,\u6211\u4eec\u5f88\u4e50\u610f\u542c\u5230\u60a8\u7684\u6545\u4e8b\u5e76\u5c06\u5176\u6dfb\u52a0\u5230\u5217\u8868\u4e2d\u3002\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u5176\u4ed6\u516c\u53f8\u7684\u516c\u5f00\u4fe1\u606f(\u5982\u535a\u5ba2\u6587\u7ae0\u6216\u65b0\u95fb\u7a3f)\u8d21\u732e\u66f4\u65b0\u3002</p> \u516c\u53f8 \u884c\u4e1a \u7528\u4f8b \u53c2\u8003\u8d44\u6599 AirTop \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) AI \u4ee3\u7406\u7684\u6d4f\u89c8\u5668\u81ea\u52a8\u5316 \u6848\u4f8b\u7814\u7a76, 2024 AppFolio \u623f\u5730\u4ea7 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2024 Athena Intelligence \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u7814\u7a76\u4e0e\u6458\u8981 \u6848\u4f8b\u7814\u7a76, 2024 BlackRock \u91d1\u878d\u670d\u52a1 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 Interrupt \u6f14\u8bb2, 2025 Captide \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u6570\u636e\u63d0\u53d6 \u6848\u4f8b\u7814\u7a76, 2025 Cisco CX \u8f6f\u4ef6\u4e0e\u6280\u672f \u5ba2\u6237\u652f\u6301 Interrupt \u6f14\u8bb2, 2025 Cisco Outshift \u8f6f\u4ef6\u4e0e\u6280\u672f DevOps \u89c6\u9891\u6545\u4e8b, 2025; \u6848\u4f8b\u7814\u7a76, 2025; \u535a\u5ba2\u6587\u7ae0, 2025 Cisco TAC \u8f6f\u4ef6\u4e0e\u6280\u672f \u5ba2\u6237\u652f\u6301 \u89c6\u9891\u6545\u4e8b, 2025 City of Hope \u975e\u8425\u5229\u7ec4\u7ec7 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u89c6\u9891\u6545\u4e8b, 2025 C.H. Robinson \u7269\u6d41 \u81ea\u52a8\u5316 \u6848\u4f8b\u7814\u7a76, 2025 Definely \u6cd5\u5f8b \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2025 Docent Pro \u65c5\u6e38 GenAI \u5d4c\u5165\u5f0f\u4ea7\u54c1\u4f53\u9a8c \u6848\u4f8b\u7814\u7a76, 2025 Elastic \u8f6f\u4ef6\u4e0e\u6280\u672f \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u535a\u5ba2\u6587\u7ae0, 2025 Exa \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u641c\u7d22 \u6848\u4f8b\u7814\u7a76, 2025 GitLab \u8f6f\u4ef6\u4e0e\u6280\u672f \u4ee3\u7801\u751f\u6210 Duo workflow \u6587\u6863 Harmonic \u8f6f\u4ef6\u4e0e\u6280\u672f \u641c\u7d22 \u6848\u4f8b\u7814\u7a76, 2025 Inconvo \u8f6f\u4ef6\u4e0e\u6280\u672f \u4ee3\u7801\u751f\u6210 \u6848\u4f8b\u7814\u7a76, 2025 Infor \u8f6f\u4ef6\u4e0e\u6280\u672f GenAI \u5d4c\u5165\u5f0f\u4ea7\u54c1\u4f53\u9a8c; \u5ba2\u6237\u652f\u6301; \u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2025 J.P. Morgan \u91d1\u878d\u670d\u52a1 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 Interrupt \u6f14\u8bb2, 2025 Klarna \u91d1\u878d\u79d1\u6280 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2025 Komodo Health \u533b\u7597\u4fdd\u5065 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u535a\u5ba2\u6587\u7ae0 LinkedIn \u793e\u4ea4\u5a92\u4f53 \u4ee3\u7801\u751f\u6210; \u641c\u7d22\u4e0e\u53d1\u73b0 Interrupt \u6f14\u8bb2, 2025; \u535a\u5ba2\u6587\u7ae0, 2025; \u535a\u5ba2\u6587\u7ae0, 2024 Minimal \u7535\u5b50\u5546\u52a1 \u5ba2\u6237\u652f\u6301 \u6848\u4f8b\u7814\u7a76, 2025 Modern Treasury \u91d1\u878d\u79d1\u6280 GenAI \u5d4c\u5165\u5f0f\u4ea7\u54c1\u4f53\u9a8c \u89c6\u9891\u6545\u4e8b, 2025 Monday \u8f6f\u4ef6\u4e0e\u6280\u672f GenAI \u5d4c\u5165\u5f0f\u4ea7\u54c1\u4f53\u9a8c Interrupt \u6f14\u8bb2, 2025 Morningstar \u91d1\u878d\u670d\u52a1 \u7814\u7a76\u4e0e\u6458\u8981 \u89c6\u9891\u6545\u4e8b, 2025 OpenRecovery \u533b\u7597\u4fdd\u5065 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2024 Pigment \u91d1\u878d\u79d1\u6280 GenAI \u5d4c\u5165\u5f0f\u4ea7\u54c1\u4f53\u9a8c \u89c6\u9891\u6545\u4e8b, 2025 Prosper \u91d1\u878d\u79d1\u6280 \u5ba2\u6237\u652f\u6301 \u89c6\u9891\u6545\u4e8b, 2025 Qodo \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u4ee3\u7801\u751f\u6210 \u535a\u5ba2\u6587\u7ae0, 2025 Rakuten \u7535\u5b50\u5546\u52a1 / \u91d1\u878d\u79d1\u6280 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u89c6\u9891\u6545\u4e8b, 2025; \u535a\u5ba2\u6587\u7ae0, 2025 Replit \u8f6f\u4ef6\u4e0e\u6280\u672f \u4ee3\u7801\u751f\u6210 \u535a\u5ba2\u6587\u7ae0, 2024; Breakout agent \u6545\u4e8b, 2024; \u7089\u8fb9\u8c08\u8bdd\u89c6\u9891, 2024 Rexera \u623f\u5730\u4ea7 (GenAI \u539f\u751f) \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2024 Abu Dhabi Government \u653f\u5e9c \u641c\u7d22 \u6848\u4f8b\u7814\u7a76, 2025 Tradestack \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u6848\u4f8b\u7814\u7a76, 2024 Uber \u4ea4\u901a\u8fd0\u8f93 \u5f00\u53d1\u8005\u751f\u4ea7\u529b; \u4ee3\u7801\u751f\u6210 Interrupt \u6f14\u8bb2, 2025; \u6f14\u793a, 2024; \u89c6\u9891, 2024 Unify \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 Interrupt \u6f14\u8bb2, 2025; \u535a\u5ba2\u6587\u7ae0, 2024 Vizient \u533b\u7597\u4fdd\u5065 \u7279\u5b9a\u9886\u57df\u4efb\u52a1\u7684\u8f85\u52a9\u5de5\u5177 \u89c6\u9891\u6545\u4e8b, 2025; \u6848\u4f8b\u7814\u7a76, 2025 Vodafone \u7535\u4fe1 \u4ee3\u7801\u751f\u6210; \u5185\u90e8\u641c\u7d22 \u6848\u4f8b\u7814\u7a76, 2025 WebToon \u5a92\u4f53\u4e0e\u5a31\u4e50 \u6570\u636e\u63d0\u53d6 \u6848\u4f8b\u7814\u7a76, 2025 11x \u8f6f\u4ef6\u4e0e\u6280\u672f (GenAI \u539f\u751f) \u7814\u7a76\u4e0e\u63a8\u5e7f Interrupt \u6f14\u8bb2, 2025"},{"location":"llms-txt-overview/","title":"llms.txt","text":"<p>\u4ee5\u4e0b\u662f <code>llms.txt</code> \u683c\u5f0f\u7684\u6587\u6863\u6587\u4ef6\u5217\u8868,\u5177\u4f53\u5305\u62ec <code>llms.txt</code> \u548c <code>llms-full.txt</code>\u3002\u8fd9\u4e9b\u6587\u4ef6\u5141\u8bb8\u5927\u578b\u8bed\u8a00\u6a21\u578b (LLM) \u548c\u667a\u80fd\u4ee3\u7406\u8bbf\u95ee\u7f16\u7a0b\u6587\u6863\u548c API,\u5728\u96c6\u6210\u5f00\u53d1\u73af\u5883 (IDE) \u4e2d\u7279\u522b\u6709\u7528\u3002</p> \u8bed\u8a00\u7248\u672c llms.txt llms-full.txt LangGraph Python https://langchain-ai.github.io/langgraph/llms.txt https://langchain-ai.github.io/langgraph/llms-full.txt LangGraph JS https://langchain-ai.github.io/langgraphjs/llms.txt https://langchain-ai.github.io/langgraphjs/llms-full.txt LangChain Python https://python.langchain.com/llms.txt N/A LangChain JS https://js.langchain.com/llms.txt N/A <p>\u68c0\u67e5\u8f93\u51fa\u7ed3\u679c</p> <p>\u5373\u4f7f\u53ef\u4ee5\u8bbf\u95ee\u6700\u65b0\u6587\u6863,\u5f53\u524d\u6700\u5148\u8fdb\u7684\u6a21\u578b\u4e5f\u53ef\u80fd\u65e0\u6cd5\u59cb\u7ec8\u751f\u6210\u6b63\u786e\u7684\u4ee3\u7801\u3002\u5c06\u751f\u6210\u7684\u4ee3\u7801\u89c6\u4e3a\u8d77\u70b9,\u5728\u5c06\u4ee3\u7801\u53d1\u5e03\u5230\u751f\u4ea7\u73af\u5883\u4e4b\u524d\u52a1\u5fc5\u8fdb\u884c\u5ba1\u67e5\u3002</p>"},{"location":"llms-txt-overview/#llmstxt-llms-fulltxt","title":"<code>llms.txt</code> \u548c <code>llms-full.txt</code> \u7684\u533a\u522b","text":"<ul> <li> <p><code>llms.txt</code> \u662f\u4e00\u4e2a\u7d22\u5f15\u6587\u4ef6,\u5305\u542b\u5e26\u6709\u7b80\u8981\u5185\u5bb9\u63cf\u8ff0\u7684\u94fe\u63a5\u3002LLM \u6216\u667a\u80fd\u4ee3\u7406\u5fc5\u987b\u8ddf\u968f\u8fd9\u4e9b\u94fe\u63a5\u624d\u80fd\u8bbf\u95ee\u8be6\u7ec6\u4fe1\u606f\u3002</p> </li> <li> <p><code>llms-full.txt</code> \u76f4\u63a5\u5728\u5355\u4e2a\u6587\u4ef6\u4e2d\u5305\u542b\u6240\u6709\u8be6\u7ec6\u5185\u5bb9,\u65e0\u9700\u989d\u5916\u5bfc\u822a\u3002</p> </li> </ul> <p>\u4f7f\u7528 <code>llms-full.txt</code> \u65f6\u9700\u8981\u8003\u8651\u7684\u4e00\u4e2a\u5173\u952e\u56e0\u7d20\u662f\u5176\u6587\u4ef6\u5927\u5c0f\u3002\u5bf9\u4e8e\u5927\u91cf\u6587\u6863,\u8be5\u6587\u4ef6\u53ef\u80fd\u8fc7\u5927\u800c\u65e0\u6cd5\u9002\u914d LLM \u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\u3002</p>"},{"location":"llms-txt-overview/#mcp-llmstxt","title":"\u901a\u8fc7 MCP \u670d\u52a1\u5668\u4f7f\u7528 <code>llms.txt</code>","text":"<p>\u622a\u81f3 2025\u5e743\u67089\u65e5,IDE \u5c1a\u672a\u5bf9 <code>llms.txt</code> \u63d0\u4f9b\u5f3a\u5927\u7684\u539f\u751f\u652f\u6301\u3002\u4f46\u662f,\u60a8\u4ecd\u7136\u53ef\u4ee5\u901a\u8fc7 MCP \u670d\u52a1\u5668\u6709\u6548\u5730\u4f7f\u7528 <code>llms.txt</code>\u3002</p>"},{"location":"llms-txt-overview/#mcpdoc","title":"\ud83d\ude80 \u4f7f\u7528 <code>mcpdoc</code> \u670d\u52a1\u5668","text":"<p>\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a MCP \u670d\u52a1\u5668,\u4e13\u95e8\u8bbe\u8ba1\u7528\u4e8e\u4e3a LLM \u548c IDE \u63d0\u4f9b\u6587\u6863\u670d\u52a1:</p> <p>\ud83d\udc49 langchain-ai/mcpdoc GitHub \u4ed3\u5e93</p> <p>\u8be5 MCP \u670d\u52a1\u5668\u5141\u8bb8\u5c06 <code>llms.txt</code> \u96c6\u6210\u5230 Cursor\u3001Windsurf\u3001Claude \u548c Claude Code \u7b49\u5de5\u5177\u4e2d\u3002</p> <p>\ud83d\udcd8 \u4ed3\u5e93\u4e2d\u63d0\u4f9b\u4e86**\u8bbe\u7f6e\u8bf4\u660e\u548c\u4f7f\u7528\u793a\u4f8b**\u3002</p>"},{"location":"llms-txt-overview/#llms-fulltxt","title":"\u4f7f\u7528 <code>llms-full.txt</code>","text":"<p>LangGraph \u7684 <code>llms-full.txt</code> \u6587\u4ef6\u901a\u5e38\u5305\u542b\u6570\u5341\u4e07\u4e2a\u6807\u8bb0,\u8d85\u51fa\u4e86\u5927\u591a\u6570 LLM \u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\u9650\u5236\u3002\u8981\u6709\u6548\u4f7f\u7528\u6b64\u6587\u4ef6:</p> <ol> <li> <p>\u5728 IDE \u4e2d\u4f7f\u7528(\u4f8b\u5982 Cursor\u3001Windsurf):</p> <ul> <li>\u5c06 <code>llms-full.txt</code> \u6dfb\u52a0\u4e3a\u81ea\u5b9a\u4e49\u6587\u6863\u3002IDE \u5c06\u81ea\u52a8\u5206\u5757\u548c\u7d22\u5f15\u5185\u5bb9,\u5b9e\u73b0\u68c0\u7d22\u589e\u5f3a\u751f\u6210 (RAG)\u3002</li> </ul> </li> <li> <p>\u6ca1\u6709 IDE \u652f\u6301\u65f6:</p> <ul> <li>\u4f7f\u7528\u5177\u6709\u5927\u4e0a\u4e0b\u6587\u7a97\u53e3\u7684\u804a\u5929\u6a21\u578b\u3002</li> <li>\u5b9e\u65bd RAG \u7b56\u7565\u4ee5\u6709\u6548\u7ba1\u7406\u548c\u67e5\u8be2\u6587\u6863\u3002</li> </ul> </li> </ol>"},{"location":"additional-resources/","title":"\u9644\u52a0\u8d44\u6e90","text":"<p>\u672c\u8282\u5305\u542b LangGraph \u7684\u9644\u52a0\u8d44\u6e90\u3002</p> <ul> <li>\u793e\u533a\u667a\u80fd\u4ee3\u7406: \u53ef\u5728 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528\u7684\u9884\u6784\u5efa\u5e93\u96c6\u5408\u3002</li> <li>LangGraph \u5b66\u9662: \u6559\u4f60\u5982\u4f55\u4f7f\u7528 LangGraph \u7684\u8bfe\u7a0b\u96c6\u5408\u3002</li> <li>\u6848\u4f8b\u7814\u7a76: \u5c55\u793a LangGraph \u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528\u60c5\u51b5\u7684\u6848\u4f8b\u7814\u7a76\u96c6\u5408\u3002</li> <li>\u5e38\u89c1\u95ee\u9898: \u5173\u4e8e LangGraph \u7684\u5e38\u89c1\u95ee\u9898\u96c6\u5408\u3002</li> <li>llms.txt: <code>llms.txt</code> \u683c\u5f0f\u7684\u6587\u6863\u6587\u4ef6\u5217\u8868,\u5141\u8bb8 LLM \u548c\u667a\u80fd\u4ee3\u7406\u8bbf\u95ee\u6211\u4eec\u7684\u6587\u6863\u3002</li> <li>LangChain \u8bba\u575b: \u63d0\u95ee\u548c\u83b7\u5f97\u5176\u4ed6 LangGraph \u7528\u6237\u5e2e\u52a9\u7684\u5730\u65b9\u3002</li> <li>\u6545\u969c\u6392\u9664: \u5e38\u89c1\u95ee\u9898\u7684\u6545\u969c\u6392\u9664\u6307\u5357\u96c6\u5408\u3002</li> </ul>"},{"location":"agents/agents/","title":"LangGraph \u5feb\u901f\u5f00\u59cb","text":"<p>\u672c\u6307\u5357\u5c06\u5411\u4f60\u5c55\u793a\u5982\u4f55\u8bbe\u7f6e\u548c\u4f7f\u7528 LangGraph \u7684**\u9884\u6784\u5efa**\u3001**\u53ef\u590d\u7528**\u7ec4\u4ef6,\u8fd9\u4e9b\u7ec4\u4ef6\u65e8\u5728\u5e2e\u52a9\u4f60\u5feb\u901f\u53ef\u9760\u5730\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/agents/#_1","title":"\u5148\u51b3\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u672c\u6559\u7a0b\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u5177\u5907\u4ee5\u4e0b\u6761\u4ef6:</p> <ul> <li>\u4e00\u4e2a Anthropic API \u5bc6\u94a5</li> </ul>","tags":["agent"],"boost":2},{"location":"agents/agents/#1","title":"1. \u5b89\u88c5\u4f9d\u8d56","text":"<p>\u5982\u679c\u4f60\u8fd8\u6ca1\u6709\u5b89\u88c5,\u8bf7\u5b89\u88c5 LangGraph \u548c LangChain:</p> Python <pre><code>pip install -U langgraph \"langchain[anthropic]\"\n</code></pre> <p>Info</p> <p>\u5b89\u88c5 <code>langchain[anthropic]</code> \u4ee5\u4fbf\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u8c03\u7528\u6a21\u578b\u3002</p> JavaScript <pre><code>npm install @langchain/langgraph @langchain/core @langchain/anthropic\n</code></pre> <p>Info</p> <p>\u5b89\u88c5 <code>@langchain/core</code> <code>@langchain/anthropic</code> \u4ee5\u4fbf\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u8c03\u7528\u6a21\u578b\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/agents/#2","title":"2. \u521b\u5efa\u667a\u80fd\u4ee3\u7406","text":"Python <p>\u8981\u521b\u5efa\u667a\u80fd\u4ee3\u7406,\u8bf7\u4f7f\u7528 @[<code>create_react_agent</code>][]:</p> <pre><code>from langgraph.prebuilt import create_react_agent\n\ndef get_weather(city: str) -&gt; str:  # (1)!\n    \"\"\"Get weather for a given city.\"\"\"\n    return f\"It's always sunny in {city}!\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",  # (2)!\n    tools=[get_weather],  # (3)!\n    prompt=\"You are a helpful assistant\"  # (4)!\n)\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]}\n)\n</code></pre> <ol> <li>\u5b9a\u4e49\u4f9b\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7684\u5de5\u5177\u3002\u5de5\u5177\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u7eaf Python \u51fd\u6570\u3002\u6709\u5173\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u4f7f\u7528\u548c\u81ea\u5b9a\u4e49,\u8bf7\u67e5\u770b\u5de5\u5177\u9875\u9762\u3002</li> <li>\u4e3a\u667a\u80fd\u4ee3\u7406\u63d0\u4f9b\u4e00\u4e2a\u8bed\u8a00\u6a21\u578b\u3002\u8981\u4e86\u89e3\u6709\u5173\u4e3a\u667a\u80fd\u4ee3\u7406\u914d\u7f6e\u8bed\u8a00\u6a21\u578b\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u67e5\u770b\u6a21\u578b\u9875\u9762\u3002</li> <li>\u4e3a\u6a21\u578b\u63d0\u4f9b\u5de5\u5177\u5217\u8868\u3002</li> <li>\u4e3a\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7684\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u7cfb\u7edf\u63d0\u793a(\u6307\u4ee4)\u3002</li> </ol> JavaScript <p>\u8981\u521b\u5efa\u667a\u80fd\u4ee3\u7406,\u8bf7\u4f7f\u7528 <code>createReactAgent</code>:</p> <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst getWeather = tool(\n  // (1)!\n  async ({ city }) =&gt; {\n    return `It's always sunny in ${city}!`;\n  },\n  {\n    name: \"get_weather\",\n    description: \"Get weather for a given city.\",\n    schema: z.object({\n      city: z.string().describe(\"The city to get weather for\"),\n    }),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"anthropic:claude-3-5-sonnet-latest\" }), // (2)!\n  tools: [getWeather], // (3)!\n  stateModifier: \"You are a helpful assistant\", // (4)!\n});\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"what is the weather in sf\" }],\n});\n</code></pre> <ol> <li>\u5b9a\u4e49\u4f9b\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7684\u5de5\u5177\u3002\u53ef\u4ee5\u4f7f\u7528 <code>tool</code> \u51fd\u6570\u5b9a\u4e49\u5de5\u5177\u3002\u6709\u5173\u66f4\u9ad8\u7ea7\u7684\u5de5\u5177\u4f7f\u7528\u548c\u81ea\u5b9a\u4e49,\u8bf7\u67e5\u770b\u5de5\u5177\u9875\u9762\u3002</li> <li>\u4e3a\u667a\u80fd\u4ee3\u7406\u63d0\u4f9b\u4e00\u4e2a\u8bed\u8a00\u6a21\u578b\u3002\u8981\u4e86\u89e3\u6709\u5173\u4e3a\u667a\u80fd\u4ee3\u7406\u914d\u7f6e\u8bed\u8a00\u6a21\u578b\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u67e5\u770b\u6a21\u578b\u9875\u9762\u3002</li> <li>\u4e3a\u6a21\u578b\u63d0\u4f9b\u5de5\u5177\u5217\u8868\u3002</li> <li>\u4e3a\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7684\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u7cfb\u7edf\u63d0\u793a(\u6307\u4ee4)\u3002</li> </ol>","tags":["agent"],"boost":2},{"location":"agents/agents/#3-llm","title":"3. \u914d\u7f6e LLM","text":"Python <p>\u8981\u4f7f\u7528\u7279\u5b9a\u53c2\u6570(\u5982\u6e29\u5ea6)\u914d\u7f6e LLM,\u8bf7\u4f7f\u7528 init_chat_model:</p> <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.prebuilt import create_react_agent\n\n# highlight-next-line\nmodel = init_chat_model(\n    \"anthropic:claude-3-7-sonnet-latest\",\n    # highlight-next-line\n    temperature=0\n)\n\nagent = create_react_agent(\n    # highlight-next-line\n    model=model,\n    tools=[get_weather],\n)\n</code></pre> JavaScript <p>\u8981\u4f7f\u7528\u7279\u5b9a\u53c2\u6570(\u5982\u6e29\u5ea6)\u914d\u7f6e LLM,\u8bf7\u4f7f\u7528\u6a21\u578b\u5b9e\u4f8b:</p> <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\n// highlight-next-line\nconst model = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n  // highlight-next-line\n  temperature: 0,\n});\n\nconst agent = createReactAgent({\n  // highlight-next-line\n  llm: model,\n  tools: [getWeather],\n});\n</code></pre> <p>\u6709\u5173\u5982\u4f55\u914d\u7f6e LLM \u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6a21\u578b\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/agents/#4","title":"4. \u6dfb\u52a0\u81ea\u5b9a\u4e49\u63d0\u793a","text":"<p>\u63d0\u793a\u6307\u793a LLM \u5982\u4f55\u884c\u4e3a\u3002\u6dfb\u52a0\u4ee5\u4e0b\u7c7b\u578b\u7684\u63d0\u793a\u4e4b\u4e00:</p> <ul> <li>\u9759\u6001: \u5b57\u7b26\u4e32\u88ab\u89e3\u91ca\u4e3a**\u7cfb\u7edf\u6d88\u606f**\u3002</li> <li>\u52a8\u6001: \u5728**\u8fd0\u884c\u65f6**\u6839\u636e\u8f93\u5165\u6216\u914d\u7f6e\u751f\u6210\u7684\u6d88\u606f\u5217\u8868\u3002</li> </ul> \u9759\u6001\u63d0\u793a\u52a8\u6001\u63d0\u793a <p>\u5b9a\u4e49\u56fa\u5b9a\u7684\u63d0\u793a\u5b57\u7b26\u4e32\u6216\u6d88\u606f\u5217\u8868:</p> Python <pre><code>from langgraph.prebuilt import create_react_agent\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n    # \u6c38\u4e0d\u6539\u53d8\u7684\u9759\u6001\u63d0\u793a\n    # highlight-next-line\n    prompt=\"Never answer questions about the weather.\"\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]}\n)\n</code></pre> JavaScript <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"anthropic:claude-3-5-sonnet-latest\" }),\n  tools: [getWeather],\n  // \u6c38\u4e0d\u6539\u53d8\u7684\u9759\u6001\u63d0\u793a\n  // highlight-next-line\n  stateModifier: \"Never answer questions about the weather.\"\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"what is the weather in sf\" }]\n});\n</code></pre> Python <p>\u5b9a\u4e49\u4e00\u4e2a\u6839\u636e\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u548c\u914d\u7f6e\u8fd4\u56de\u6d88\u606f\u5217\u8868\u7684\u51fd\u6570:</p> <pre><code>from langchain_core.messages import AnyMessage\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\nfrom langgraph.prebuilt import create_react_agent\n\n# highlight-next-line\ndef prompt(state: AgentState, config: RunnableConfig) -&gt; list[AnyMessage]:  # (1)!\n    user_name = config[\"configurable\"].get(\"user_name\")\n    system_msg = f\"You are a helpful assistant. Address the user as {user_name}.\"\n    return [{\"role\": \"system\", \"content\": system_msg}] + state[\"messages\"]\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n    # highlight-next-line\n    prompt=prompt\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_name\": \"John Smith\"}}\n)\n</code></pre> <ol> <li> <p>\u52a8\u6001\u63d0\u793a\u5141\u8bb8\u5728\u6784\u5efa LLM \u8f93\u5165\u65f6\u5305\u542b\u975e\u6d88\u606f\u4e0a\u4e0b\u6587,\u4f8b\u5982:</p> <ul> <li>\u8fd0\u884c\u65f6\u4f20\u9012\u7684\u4fe1\u606f,\u5982 <code>user_id</code> \u6216 API \u51ed\u8bc1(\u4f7f\u7528 <code>config</code>)\u3002</li> <li>\u5728\u591a\u6b65\u63a8\u7406\u8fc7\u7a0b\u4e2d\u66f4\u65b0\u7684\u5185\u90e8\u667a\u80fd\u4ee3\u7406\u72b6\u6001(\u4f7f\u7528 <code>state</code>)\u3002</li> </ul> <p>\u52a8\u6001\u63d0\u793a\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u63a5\u53d7 <code>state</code> \u548c <code>config</code> \u5e76\u8fd4\u56de\u8981\u53d1\u9001\u7ed9 LLM \u7684\u6d88\u606f\u5217\u8868\u7684\u51fd\u6570\u3002</p> </li> </ol> JavaScript <p>\u5b9a\u4e49\u4e00\u4e2a\u6839\u636e\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u548c\u914d\u7f6e\u8fd4\u56de\u6d88\u606f\u7684\u51fd\u6570:</p> <pre><code>import { type BaseMessageLike } from \"@langchain/core/messages\";\nimport { type RunnableConfig } from \"@langchain/core/runnables\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\n// highlight-next-line\nconst dynamicPrompt = (state: { messages: BaseMessageLike[] }, config: RunnableConfig): BaseMessageLike[] =&gt; {  // (1)!\n  const userName = config.configurable?.user_name;\n  const systemMsg = `You are a helpful assistant. Address the user as ${userName}.`;\n  return [{ role: \"system\", content: systemMsg }, ...state.messages];\n};\n\nconst agent = createReactAgent({\n  llm: \"anthropic:claude-3-5-sonnet-latest\",\n  tools: [getWeather],\n  // highlight-next-line\n  stateModifier: dynamicPrompt\n});\n\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  // highlight-next-line\n  { configurable: { user_name: \"John Smith\" } }\n);\n</code></pre> <ol> <li> <p>\u52a8\u6001\u63d0\u793a\u5141\u8bb8\u5728\u6784\u5efa LLM \u8f93\u5165\u65f6\u5305\u542b\u975e\u6d88\u606f\u4e0a\u4e0b\u6587,\u4f8b\u5982:</p> <ul> <li>\u8fd0\u884c\u65f6\u4f20\u9012\u7684\u4fe1\u606f,\u5982 <code>user_id</code> \u6216 API \u51ed\u8bc1(\u4f7f\u7528 <code>config</code>)\u3002</li> <li>\u5728\u591a\u6b65\u63a8\u7406\u8fc7\u7a0b\u4e2d\u66f4\u65b0\u7684\u5185\u90e8\u667a\u80fd\u4ee3\u7406\u72b6\u6001(\u4f7f\u7528 <code>state</code>)\u3002</li> </ul> <p>\u52a8\u6001\u63d0\u793a\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u63a5\u53d7 <code>state</code> \u548c <code>config</code> \u5e76\u8fd4\u56de\u8981\u53d1\u9001\u7ed9 LLM \u7684\u6d88\u606f\u5217\u8868\u7684\u51fd\u6570\u3002</p> </li> </ol> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u4e0a\u4e0b\u6587\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/agents/#5","title":"5. \u6dfb\u52a0\u8bb0\u5fc6","text":"<p>\u8981\u5141\u8bb8\u4e0e\u667a\u80fd\u4ee3\u7406\u8fdb\u884c\u591a\u8f6e\u5bf9\u8bdd,\u4f60\u9700\u8981\u901a\u8fc7\u5728\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u63d0\u4f9b\u68c0\u67e5\u70b9\u6765\u542f\u7528\u6301\u4e45\u6027\u3002\u5728\u8fd0\u884c\u65f6,\u4f60\u9700\u8981\u63d0\u4f9b\u5305\u542b <code>thread_id</code> \u7684\u914d\u7f6e \u2014 \u5bf9\u8bdd(\u4f1a\u8bdd)\u7684\u552f\u4e00\u6807\u8bc6\u7b26:</p> Python <pre><code>from langgraph.prebuilt import create_react_agent\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n# highlight-next-line\ncheckpointer = InMemorySaver()\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n    # highlight-next-line\n    checkpointer=checkpointer  # (1)!\n)\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\n# highlight-next-line\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\nsf_response = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    config  # (2)!\n)\nny_response = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what about new york?\"}]},\n    # highlight-next-line\n    config\n)\n</code></pre> <ol> <li><code>checkpointer</code> \u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5728\u5de5\u5177\u8c03\u7528\u5faa\u73af\u7684\u6bcf\u4e00\u6b65\u5b58\u50a8\u5176\u72b6\u6001\u3002\u8fd9\u542f\u7528\u4e86\u77ed\u671f\u8bb0\u5fc6\u548c\u4eba\u5de5\u5e72\u9884\u80fd\u529b\u3002</li> <li>\u4f20\u9012\u5305\u542b <code>thread_id</code> \u7684\u914d\u7f6e,\u4ee5\u4fbf\u80fd\u591f\u5728\u672a\u6765\u7684\u667a\u80fd\u4ee3\u7406\u8c03\u7528\u4e2d\u6062\u590d\u76f8\u540c\u7684\u5bf9\u8bdd\u3002</li> </ol> JavaScript <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { MemorySaver } from \"@langchain/langgraph\";\n\n// highlight-next-line\nconst checkpointer = new MemorySaver();\n\nconst agent = createReactAgent({\n  llm: \"anthropic:claude-3-5-sonnet-latest\",\n  tools: [getWeather],\n  // highlight-next-line\n  checkpointSaver: checkpointer, // (1)!\n});\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\n// highlight-next-line\nconst config = { configurable: { thread_id: \"1\" } };\nconst sfResponse = await agent.invoke(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  // highlight-next-line\n  config // (2)!\n);\nconst nyResponse = await agent.invoke(\n  { messages: [{ role: \"user\", content: \"what about new york?\" }] },\n  // highlight-next-line\n  config\n);\n</code></pre> <ol> <li><code>checkpointSaver</code> \u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5728\u5de5\u5177\u8c03\u7528\u5faa\u73af\u7684\u6bcf\u4e00\u6b65\u5b58\u50a8\u5176\u72b6\u6001\u3002\u8fd9\u542f\u7528\u4e86\u77ed\u671f\u8bb0\u5fc6\u548c\u4eba\u5de5\u5e72\u9884\u80fd\u529b\u3002</li> <li>\u4f20\u9012\u5305\u542b <code>thread_id</code> \u7684\u914d\u7f6e,\u4ee5\u4fbf\u80fd\u591f\u5728\u672a\u6765\u7684\u667a\u80fd\u4ee3\u7406\u8c03\u7528\u4e2d\u6062\u590d\u76f8\u540c\u7684\u5bf9\u8bdd\u3002</li> </ol> Python <p>\u5f53\u4f60\u542f\u7528\u68c0\u67e5\u70b9\u65f6,\u5b83\u4f1a\u5728\u63d0\u4f9b\u7684\u68c0\u67e5\u70b9\u6570\u636e\u5e93(\u6216\u8005\u5982\u679c\u4f7f\u7528 <code>InMemorySaver</code> \u5219\u5728\u5185\u5b58\u4e2d)\u7684\u6bcf\u4e00\u6b65\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3002</p> JavaScript <p>\u5f53\u4f60\u542f\u7528\u68c0\u67e5\u70b9\u65f6,\u5b83\u4f1a\u5728\u63d0\u4f9b\u7684\u68c0\u67e5\u70b9\u6570\u636e\u5e93(\u6216\u8005\u5982\u679c\u4f7f\u7528 <code>MemorySaver</code> \u5219\u5728\u5185\u5b58\u4e2d)\u7684\u6bcf\u4e00\u6b65\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3002</p> <p>\u8bf7\u6ce8\u610f,\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d,\u5f53\u7b2c\u4e8c\u6b21\u4f7f\u7528\u76f8\u540c\u7684 <code>thread_id</code> \u8c03\u7528\u667a\u80fd\u4ee3\u7406\u65f6,\u7b2c\u4e00\u6b21\u5bf9\u8bdd\u7684\u539f\u59cb\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u4f1a\u81ea\u52a8\u5305\u542b\u5728\u5185,\u4ee5\u53ca\u65b0\u7684\u7528\u6237\u8f93\u5165\u3002</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u8bb0\u5fc6\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/agents/#6","title":"6. \u914d\u7f6e\u7ed3\u6784\u5316\u8f93\u51fa","text":"Python <p>\u8981\u751f\u6210\u7b26\u5408\u6a21\u5f0f\u7684\u7ed3\u6784\u5316\u54cd\u5e94,\u8bf7\u4f7f\u7528 <code>response_format</code> \u53c2\u6570\u3002\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u7528 <code>Pydantic</code> \u6a21\u578b\u6216 <code>TypedDict</code> \u5b9a\u4e49\u3002\u7ed3\u679c\u5c06\u901a\u8fc7 <code>structured_response</code> \u5b57\u6bb5\u8bbf\u95ee\u3002</p> <pre><code>from pydantic import BaseModel\nfrom langgraph.prebuilt import create_react_agent\n\nclass WeatherResponse(BaseModel):\n    conditions: str\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n    # highlight-next-line\n    response_format=WeatherResponse  # (1)!\n)\n\nresponse = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]}\n)\n\n# highlight-next-line\nresponse[\"structured_response\"]\n</code></pre> <ol> <li>\u5f53\u63d0\u4f9b <code>response_format</code> \u65f6,\u4f1a\u5728\u667a\u80fd\u4ee3\u7406\u5faa\u73af\u7684\u672b\u5c3e\u6dfb\u52a0\u4e00\u4e2a\u5355\u72ec\u7684\u6b65\u9aa4:\u667a\u80fd\u4ee3\u7406\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u4f1a\u4f20\u9012\u7ed9\u5177\u6709\u7ed3\u6784\u5316\u8f93\u51fa\u7684 LLM \u4ee5\u751f\u6210\u7ed3\u6784\u5316\u54cd\u5e94\u3002<pre><code>\u8981\u4e3a\u6b64 LLM \u63d0\u4f9b\u7cfb\u7edf\u63d0\u793a,\u8bf7\u4f7f\u7528\u5143\u7ec4 `(prompt, schema)`,\u4f8b\u5982 `response_format=(prompt, WeatherResponse)`\u3002\n</code></pre> </li> </ol> JavaScript <p>\u8981\u751f\u6210\u7b26\u5408\u6a21\u5f0f\u7684\u7ed3\u6784\u5316\u54cd\u5e94,\u8bf7\u4f7f\u7528 <code>responseFormat</code> \u53c2\u6570\u3002\u6a21\u5f0f\u53ef\u4ee5\u4f7f\u7528 <code>Zod</code> \u6a21\u5f0f\u5b9a\u4e49\u3002\u7ed3\u679c\u5c06\u901a\u8fc7 <code>structuredResponse</code> \u5b57\u6bb5\u8bbf\u95ee\u3002</p> <pre><code>import { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst WeatherResponse = z.object({\n  conditions: z.string(),\n});\n\nconst agent = createReactAgent({\n  llm: \"anthropic:claude-3-5-sonnet-latest\",\n  tools: [getWeather],\n  // highlight-next-line\n  responseFormat: WeatherResponse, // (1)!\n});\n\nconst response = await agent.invoke({\n  messages: [{ role: \"user\", content: \"what is the weather in sf\" }],\n});\n\n// highlight-next-line\nresponse.structuredResponse;\n</code></pre> <ol> <li>\u5f53\u63d0\u4f9b <code>responseFormat</code> \u65f6,\u4f1a\u5728\u667a\u80fd\u4ee3\u7406\u5faa\u73af\u7684\u672b\u5c3e\u6dfb\u52a0\u4e00\u4e2a\u5355\u72ec\u7684\u6b65\u9aa4:\u667a\u80fd\u4ee3\u7406\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u4f1a\u4f20\u9012\u7ed9\u5177\u6709\u7ed3\u6784\u5316\u8f93\u51fa\u7684 LLM \u4ee5\u751f\u6210\u7ed3\u6784\u5316\u54cd\u5e94\u3002<pre><code>\u8981\u4e3a\u6b64 LLM \u63d0\u4f9b\u7cfb\u7edf\u63d0\u793a,\u8bf7\u4f7f\u7528\u5bf9\u8c61 `{ prompt, schema }`,\u4f8b\u5982 `responseFormat: { prompt, schema: WeatherResponse }`\u3002\n</code></pre> </li> </ol> <p>LLM \u540e\u5904\u7406</p> <p>\u7ed3\u6784\u5316\u8f93\u51fa\u9700\u8981\u989d\u5916\u8c03\u7528 LLM \u4ee5\u6839\u636e\u6a21\u5f0f\u683c\u5f0f\u5316\u54cd\u5e94\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/agents/#_2","title":"\u4e0b\u4e00\u6b65","text":"<ul> <li>\u5728\u672c\u5730\u90e8\u7f72\u4f60\u7684\u667a\u80fd\u4ee3\u7406</li> <li>\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u7684\u4fe1\u606f</li> <li>LangGraph \u5e73\u53f0\u5feb\u901f\u5f00\u59cb</li> </ul>","tags":["agent"],"boost":2},{"location":"agents/context/","title":"\u4e0a\u4e0b\u6587","text":"<p>**\u4e0a\u4e0b\u6587\u5de5\u7a0b**\u662f\u6784\u5efa\u52a8\u6001\u7cfb\u7edf\u7684\u5b9e\u8df5,\u4ee5\u6b63\u786e\u7684\u683c\u5f0f\u63d0\u4f9b\u6b63\u786e\u7684\u4fe1\u606f\u548c\u5de5\u5177,\u4f7f AI \u5e94\u7528\u7a0b\u5e8f\u80fd\u591f\u5b8c\u6210\u4efb\u52a1\u3002\u4e0a\u4e0b\u6587\u53ef\u4ee5\u901a\u8fc7\u4e24\u4e2a\u5173\u952e\u7ef4\u5ea6\u6765\u8868\u5f81:</p> <ol> <li>\u6309**\u53ef\u53d8\u6027**:<ul> <li>\u9759\u6001\u4e0a\u4e0b\u6587: \u5728\u6267\u884c\u671f\u95f4\u4e0d\u4f1a\u6539\u53d8\u7684\u4e0d\u53ef\u53d8\u6570\u636e(\u4f8b\u5982,\u7528\u6237\u5143\u6570\u636e\u3001\u6570\u636e\u5e93\u8fde\u63a5\u3001\u5de5\u5177)</li> <li>\u52a8\u6001\u4e0a\u4e0b\u6587: \u968f\u7740\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u800c\u6f14\u53d8\u7684\u53ef\u53d8\u6570\u636e(\u4f8b\u5982,\u5bf9\u8bdd\u5386\u53f2\u3001\u4e2d\u95f4\u7ed3\u679c\u3001\u5de5\u5177\u8c03\u7528\u89c2\u5bdf)</li> </ul> </li> <li>\u6309**\u751f\u547d\u5468\u671f**:<ul> <li>\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587: \u4f5c\u7528\u57df\u9650\u5b9a\u4e8e\u5355\u6b21\u8fd0\u884c\u6216\u8c03\u7528\u7684\u6570\u636e</li> <li>\u8de8\u5bf9\u8bdd\u4e0a\u4e0b\u6587: \u8de8\u591a\u4e2a\u5bf9\u8bdd\u6216\u4f1a\u8bdd\u6301\u4e45\u5316\u7684\u6570\u636e</li> </ul> </li> </ol> <p>\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587 vs LLM \u4e0a\u4e0b\u6587</p> <p>\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u6307\u7684\u662f\u672c\u5730\u4e0a\u4e0b\u6587:\u4ee3\u7801\u8fd0\u884c\u6240\u9700\u7684\u6570\u636e\u548c\u4f9d\u8d56\u9879\u3002\u5b83**\u4e0d**\u6307:</p> <ul> <li>LLM \u4e0a\u4e0b\u6587,\u5373\u4f20\u9012\u5230 LLM \u63d0\u793a\u4e2d\u7684\u6570\u636e\u3002</li> <li>\"\u4e0a\u4e0b\u6587\u7a97\u53e3\",\u5373\u53ef\u4ee5\u4f20\u9012\u7ed9 LLM \u7684\u6700\u5927\u6807\u8bb0\u6570\u3002</li> </ul> <p>\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u53ef\u7528\u4e8e\u4f18\u5316 LLM \u4e0a\u4e0b\u6587\u3002\u4f8b\u5982,\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u4e2d\u7684\u7528\u6237\u5143\u6570\u636e\u6765\u83b7\u53d6\u7528\u6237\u504f\u597d\u5e76\u5c06\u5176\u63d0\u4f9b\u7ed9\u4e0a\u4e0b\u6587\u7a97\u53e3\u3002</p> <p>LangGraph \u63d0\u4f9b\u4e86\u4e09\u79cd\u7ba1\u7406\u4e0a\u4e0b\u6587\u7684\u65b9\u6cd5,\u7ed3\u5408\u4e86\u53ef\u53d8\u6027\u548c\u751f\u547d\u5468\u671f\u7ef4\u5ea6:</p> Python \u4e0a\u4e0b\u6587\u7c7b\u578b \u63cf\u8ff0 \u53ef\u53d8\u6027 \u751f\u547d\u5468\u671f \u8bbf\u95ee\u65b9\u6cd5 \u9759\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587 \u542f\u52a8\u65f6\u4f20\u9012\u7684\u7528\u6237\u5143\u6570\u636e\u3001\u5de5\u5177\u3001\u6570\u636e\u5e93\u8fde\u63a5 \u9759\u6001 \u5355\u6b21\u8fd0\u884c <code>invoke</code>/<code>stream</code> \u7684 <code>context</code> \u53c2\u6570 \u52a8\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587 (\u72b6\u6001) \u5728\u5355\u6b21\u8fd0\u884c\u671f\u95f4\u6f14\u53d8\u7684\u53ef\u53d8\u6570\u636e \u52a8\u6001 \u5355\u6b21\u8fd0\u884c LangGraph \u72b6\u6001\u5bf9\u8c61 \u52a8\u6001\u8de8\u5bf9\u8bdd\u4e0a\u4e0b\u6587 (\u5b58\u50a8) \u8de8\u5bf9\u8bdd\u5171\u4eab\u7684\u6301\u4e45\u6570\u636e \u52a8\u6001 \u8de8\u5bf9\u8bdd LangGraph \u5b58\u50a8"},{"location":"agents/context/#_2","title":"\u9759\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587","text":"<p>**\u9759\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587**\u8868\u793a\u4e0d\u53ef\u53d8\u6570\u636e,\u5982\u7528\u6237\u5143\u6570\u636e\u3001\u5de5\u5177\u548c\u6570\u636e\u5e93\u8fde\u63a5,\u8fd9\u4e9b\u6570\u636e\u5728\u8fd0\u884c\u5f00\u59cb\u65f6\u901a\u8fc7 <code>invoke</code>/<code>stream</code> \u7684 <code>context</code> \u53c2\u6570\u4f20\u9012\u7ed9\u5e94\u7528\u7a0b\u5e8f\u3002\u6b64\u6570\u636e\u5728\u6267\u884c\u671f\u95f4\u4e0d\u4f1a\u6539\u53d8\u3002</p> <p>\u5728\u7248\u672c 0.6.0 \u4e2d\u6dfb\u52a0: <code>context</code> \u66ff\u6362 <code>config['configurable']</code></p> <p>\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u73b0\u5728\u4f20\u9012\u7ed9 <code>invoke</code>/<code>stream</code> \u7684 <code>context</code> \u53c2\u6570, \u8fd9\u53d6\u4ee3\u4e86\u4e4b\u524d\u5c06\u5e94\u7528\u7a0b\u5e8f\u914d\u7f6e\u4f20\u9012\u7ed9 <code>config['configurable']</code> \u7684\u6a21\u5f0f\u3002</p> <pre><code>@dataclass\nclass ContextSchema:\n    user_name: str\n\ngraph.invoke( # (1)!\n    {\"messages\": [{\"role\": \"user\", \"content\": \"hi!\"}]}, # (2)!\n    # highlight-next-line\n    context={\"user_name\": \"John Smith\"} # (3)!\n)\n</code></pre> <ol> <li>\u8fd9\u662f\u667a\u80fd\u4ee3\u7406\u6216\u56fe\u7684\u8c03\u7528\u3002<code>invoke</code> \u65b9\u6cd5\u4f7f\u7528\u63d0\u4f9b\u7684\u8f93\u5165\u8fd0\u884c\u5e95\u5c42\u56fe\u3002</li> <li>\u6b64\u793a\u4f8b\u4f7f\u7528\u6d88\u606f\u4f5c\u4e3a\u8f93\u5165,\u8fd9\u5f88\u5e38\u89c1,\u4f46\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f7f\u7528\u4e0d\u540c\u7684\u8f93\u5165\u7ed3\u6784\u3002</li> <li>\u8fd9\u662f\u4f60\u4f20\u9012\u8fd0\u884c\u65f6\u6570\u636e\u7684\u5730\u65b9\u3002<code>context</code> \u53c2\u6570\u5141\u8bb8\u4f60\u63d0\u4f9b\u667a\u80fd\u4ee3\u7406\u5728\u6267\u884c\u671f\u95f4\u53ef\u4ee5\u4f7f\u7528\u7684\u5176\u4ed6\u4f9d\u8d56\u9879\u3002</li> </ol> \u667a\u80fd\u4ee3\u7406\u63d0\u793a\u5de5\u4f5c\u6d41\u8282\u70b9\u5728\u5de5\u5177\u4e2d <pre><code>from langchain_core.messages import AnyMessage\nfrom langgraph.runtime import get_runtime\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\nfrom langgraph.prebuilt import create_react_agent\n\n# highlight-next-line\ndef prompt(state: AgentState) -&gt; list[AnyMessage]:\n    runtime = get_runtime(ContextSchema)\n    system_msg = f\"You are a helpful assistant. Address the user as {runtime.context.user_name}.\"\n    return [{\"role\": \"system\", \"content\": system_msg}] + state[\"messages\"]\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n    prompt=prompt,\n    context_schema=ContextSchema\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    context={\"user_name\": \"John Smith\"}\n)\n</code></pre> <ul> <li>\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u667a\u80fd\u4ee3\u7406\u3002</li> </ul> <pre><code>from langgraph.runtime import Runtime\n\n# highlight-next-line\ndef node(state: State, runtime: Runtime[ContextSchema]):\n    user_name = runtime.context.user_name\n    ...\n</code></pre> <ul> <li>\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 Graph API\u3002</li> </ul> <pre><code>from langgraph.runtime import get_runtime\n\n@tool\n# highlight-next-line\ndef get_user_email() -&gt; str:\n    \"\"\"\u57fa\u4e8e\u7528\u6237 ID \u68c0\u7d22\u7528\u6237\u4fe1\u606f\u3002\"\"\"\n    # \u6a21\u62df\u4ece\u6570\u636e\u5e93\u83b7\u53d6\u7528\u6237\u4fe1\u606f\n    runtime = get_runtime(ContextSchema)\n    email = get_user_email_from_db(runtime.context.user_name)\n    return email\n</code></pre> <p>\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u5de5\u5177\u8c03\u7528\u6307\u5357\u3002</p> <p>Tip</p> <p><code>Runtime</code> \u5bf9\u8c61\u53ef\u7528\u4e8e\u8bbf\u95ee\u9759\u6001\u4e0a\u4e0b\u6587\u548c\u5176\u4ed6\u5b9e\u7528\u7a0b\u5e8f,\u5982\u6d3b\u52a8\u5b58\u50a8\u548c\u6d41\u5199\u5165\u5668\u3002 \u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 [Runtime][langgraph.runtime.Runtime] \u6587\u6863\u3002</p> JavaScript \u4e0a\u4e0b\u6587\u7c7b\u578b \u63cf\u8ff0 \u53ef\u53d8\u6027 \u751f\u547d\u5468\u671f \u914d\u7f6e \u5728\u8fd0\u884c\u5f00\u59cb\u65f6\u4f20\u9012\u7684\u6570\u636e \u9759\u6001 \u5355\u6b21\u8fd0\u884c \u52a8\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587 (\u72b6\u6001) \u5728\u5355\u6b21\u8fd0\u884c\u671f\u95f4\u6f14\u53d8\u7684\u53ef\u53d8\u6570\u636e \u52a8\u6001 \u5355\u6b21\u8fd0\u884c \u52a8\u6001\u8de8\u5bf9\u8bdd\u4e0a\u4e0b\u6587 (\u5b58\u50a8) \u8de8\u5bf9\u8bdd\u5171\u4eab\u7684\u6301\u4e45\u6570\u636e \u52a8\u6001 \u8de8\u5bf9\u8bdd"},{"location":"agents/context/#_3","title":"\u914d\u7f6e(\u9759\u6001\u4e0a\u4e0b\u6587)","text":"<p>\u914d\u7f6e\u7528\u4e8e\u4e0d\u53ef\u53d8\u6570\u636e,\u5982\u7528\u6237\u5143\u6570\u636e\u6216 API \u5bc6\u94a5\u3002\u5f53\u4f60\u6709\u5728\u8fd0\u884c\u4e2d\u4e0d\u4f1a\u6539\u53d8\u7684\u503c\u65f6\u4f7f\u7528\u6b64\u65b9\u6cd5\u3002</p> <p>\u4f7f\u7528\u540d\u4e3a \"configurable\" \u7684\u952e\u6307\u5b9a\u914d\u7f6e,\u8be5\u952e\u4e3a\u6b64\u76ee\u7684\u4fdd\u7559\u3002</p> <pre><code>await graph.invoke(\n  // (1)!\n  { messages: [{ role: \"user\", content: \"hi!\" }] }, // (2)!\n  // highlight-next-line\n  { configurable: { user_id: \"user_123\" } } // (3)!\n);\n</code></pre>"},{"location":"agents/context/#_4","title":"\u52a8\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587(\u72b6\u6001)","text":"<p>**\u52a8\u6001\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587**\u8868\u793a\u53ef\u53d8\u6570\u636e,\u8fd9\u4e9b\u6570\u636e\u53ef\u4ee5\u5728\u5355\u6b21\u8fd0\u884c\u671f\u95f4\u6f14\u53d8,\u5e76\u901a\u8fc7 LangGraph \u72b6\u6001\u5bf9\u8c61\u8fdb\u884c\u7ba1\u7406\u3002\u8fd9\u5305\u62ec\u5bf9\u8bdd\u5386\u53f2\u3001\u4e2d\u95f4\u7ed3\u679c\u4ee5\u53ca\u4ece\u5de5\u5177\u6216 LLM \u8f93\u51fa\u6d3e\u751f\u7684\u503c\u3002\u5728 LangGraph \u4e2d,\u72b6\u6001\u5bf9\u8c61\u5728\u8fd0\u884c\u671f\u95f4\u5145\u5f53\u77ed\u671f\u8bb0\u5fc6\u3002</p> \u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u5728\u5de5\u4f5c\u6d41\u4e2d <p>\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u5c06\u72b6\u6001\u6574\u5408\u5230\u667a\u80fd\u4ee3\u7406**\u63d0\u793a**\u4e2d\u3002</p> <p>\u667a\u80fd\u4ee3\u7406\u7684**\u5de5\u5177**\u4e5f\u53ef\u4ee5\u8bbf\u95ee\u72b6\u6001,\u5de5\u5177\u53ef\u4ee5\u6839\u636e\u9700\u8981\u8bfb\u53d6\u6216\u66f4\u65b0\u72b6\u6001\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u5de5\u5177\u8c03\u7528\u6307\u5357\u3002</p> Python <pre><code>from langchain_core.messages import AnyMessage\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\n\n# highlight-next-line\nclass CustomState(AgentState): # (1)!\n    user_name: str\n\ndef prompt(\n    # highlight-next-line\n    state: CustomState\n) -&gt; list[AnyMessage]:\n    user_name = state[\"user_name\"]\n    system_msg = f\"You are a helpful assistant. User's name is {user_name}\"\n    return [{\"role\": \"system\", \"content\": system_msg}] + state[\"messages\"]\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[...],\n    # highlight-next-line\n    state_schema=CustomState, # (2)!\n    prompt=prompt\n)\n\nagent.invoke({\n    \"messages\": \"hi!\",\n    \"user_name\": \"John Smith\"\n})\n</code></pre> <ol> <li>\u5b9a\u4e49\u4e00\u4e2a\u6269\u5c55 <code>AgentState</code> \u6216 <code>MessagesState</code> \u7684\u81ea\u5b9a\u4e49\u72b6\u6001\u6a21\u5f0f\u3002</li> <li>\u5c06\u81ea\u5b9a\u4e49\u72b6\u6001\u6a21\u5f0f\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5728\u6267\u884c\u671f\u95f4\u8bbf\u95ee\u548c\u4fee\u6539\u72b6\u6001\u3002</li> </ol> JavaScript <pre><code>import type { BaseMessage } from \"@langchain/core/messages\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst CustomState = z.object({ // (1)!\n  messages: MessagesZodState.shape.messages,\n  userName: z.string(),\n});\n\nconst prompt = (\n  // highlight-next-line\n  state: z.infer&lt;typeof CustomState&gt;\n): BaseMessage[] =&gt; {\n  const userName = state.userName;\n  const systemMsg = `You are a helpful assistant. User's name is ${userName}`;\n  return [{ role: \"system\", content: systemMsg }, ...state.messages];\n};\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [...],\n  // highlight-next-line\n  stateSchema: CustomState, // (2)!\n  stateModifier: prompt,\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"hi!\" }],\n  userName: \"John Smith\",\n});\n</code></pre> <ol> <li>\u5b9a\u4e49\u4e00\u4e2a\u6269\u5c55 <code>MessagesZodState</code> \u6216\u521b\u5efa\u65b0\u6a21\u5f0f\u7684\u81ea\u5b9a\u4e49\u72b6\u6001\u6a21\u5f0f\u3002</li> <li>\u5c06\u81ea\u5b9a\u4e49\u72b6\u6001\u6a21\u5f0f\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5728\u6267\u884c\u671f\u95f4\u8bbf\u95ee\u548c\u4fee\u6539\u72b6\u6001\u3002</li> </ol> Python <pre><code>from typing_extensions import TypedDict\nfrom langchain_core.messages import AnyMessage\nfrom langgraph.graph import StateGraph\n\n# highlight-next-line\nclass CustomState(TypedDict): # (1)!\n    messages: list[AnyMessage]\n    extra_field: int\n\n# highlight-next-line\ndef node(state: CustomState): # (2)!\n    messages = state[\"messages\"]\n    ...\n    return { # (3)!\n        # highlight-next-line\n        \"extra_field\": state[\"extra_field\"] + 1\n    }\n\nbuilder = StateGraph(State)\nbuilder.add_node(node)\nbuilder.set_entry_point(\"node\")\ngraph = builder.compile()\n</code></pre> <ol> <li>\u5b9a\u4e49\u81ea\u5b9a\u4e49\u72b6\u6001</li> <li>\u5728\u4efb\u4f55\u8282\u70b9\u6216\u5de5\u5177\u4e2d\u8bbf\u95ee\u72b6\u6001</li> <li>Graph API \u8bbe\u8ba1\u4e3a\u5c3d\u53ef\u80fd\u8f7b\u677e\u5730\u5904\u7406\u72b6\u6001\u3002\u8282\u70b9\u7684\u8fd4\u56de\u503c\u8868\u793a\u5bf9\u72b6\u6001\u7684\u8bf7\u6c42\u66f4\u65b0\u3002</li> </ol> JavaScript <pre><code>import type { BaseMessage } from \"@langchain/core/messages\";\nimport { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst CustomState = z.object({ // (1)!\n  messages: MessagesZodState.shape.messages,\n  extraField: z.number(),\n});\n\nconst builder = new StateGraph(CustomState)\n  .addNode(\"node\", async (state) =&gt; { // (2)!\n    const messages = state.messages;\n    // ...\n    return { // (3)!\n      // highlight-next-line\n      extraField: state.extraField + 1,\n    };\n  })\n  .addEdge(START, \"node\");\n\nconst graph = builder.compile();\n</code></pre> <ol> <li>\u5b9a\u4e49\u81ea\u5b9a\u4e49\u72b6\u6001</li> <li>\u5728\u4efb\u4f55\u8282\u70b9\u6216\u5de5\u5177\u4e2d\u8bbf\u95ee\u72b6\u6001</li> <li>Graph API \u8bbe\u8ba1\u4e3a\u5c3d\u53ef\u80fd\u8f7b\u677e\u5730\u5904\u7406\u72b6\u6001\u3002\u8282\u70b9\u7684\u8fd4\u56de\u503c\u8868\u793a\u5bf9\u72b6\u6001\u7684\u8bf7\u6c42\u66f4\u65b0\u3002</li> </ol> <p>\u542f\u7528\u8bb0\u5fc6</p> <p>\u6709\u5173\u5982\u4f55\u542f\u7528\u8bb0\u5fc6\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u8bb0\u5fc6\u6307\u5357\u3002\u8fd9\u662f\u4e00\u9879\u5f3a\u5927\u7684\u529f\u80fd,\u5141\u8bb8\u4f60\u5728\u591a\u6b21\u8c03\u7528\u4e2d\u6301\u4e45\u5316\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u3002\u5426\u5219,\u72b6\u6001\u4ec5\u9650\u4e8e\u5355\u6b21\u8fd0\u884c\u3002</p>"},{"location":"agents/context/#_5","title":"\u52a8\u6001\u8de8\u5bf9\u8bdd\u4e0a\u4e0b\u6587(\u5b58\u50a8)","text":"<p>**\u52a8\u6001\u8de8\u5bf9\u8bdd\u4e0a\u4e0b\u6587**\u8868\u793a\u8de8\u591a\u4e2a\u5bf9\u8bdd\u6216\u4f1a\u8bdd\u7684\u6301\u4e45\u53ef\u53d8\u6570\u636e,\u5e76\u901a\u8fc7 LangGraph \u5b58\u50a8\u8fdb\u884c\u7ba1\u7406\u3002\u8fd9\u5305\u62ec\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u3001\u504f\u597d\u548c\u5386\u53f2\u4ea4\u4e92\u3002LangGraph \u5b58\u50a8\u5728\u591a\u6b21\u8fd0\u884c\u4e2d\u5145\u5f53\u957f\u671f\u8bb0\u5fc6\u3002\u8fd9\u53ef\u7528\u4e8e\u8bfb\u53d6\u6216\u66f4\u65b0\u6301\u4e45\u4e8b\u5b9e(\u4f8b\u5982,\u7528\u6237\u914d\u7f6e\u6587\u4ef6\u3001\u504f\u597d\u3001\u5148\u524d\u7684\u4ea4\u4e92)\u3002</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u8bb0\u5fc6\u6307\u5357\u3002</p>"},{"location":"agents/evals/","title":"\u8bc4\u4f30","text":"<p>\u8981\u8bc4\u4f30\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u7684\u6027\u80fd,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>LangSmith</code> \u8bc4\u4f30\u3002\u4f60\u9700\u8981\u9996\u5148\u5b9a\u4e49\u4e00\u4e2a\u8bc4\u4f30\u5668\u51fd\u6570\u6765\u5224\u65ad\u667a\u80fd\u4ee3\u7406\u7684\u7ed3\u679c,\u4f8b\u5982\u6700\u7ec8\u8f93\u51fa\u6216\u8f68\u8ff9\u3002\u6839\u636e\u4f60\u7684\u8bc4\u4f30\u6280\u672f,\u8fd9\u53ef\u80fd\u6d89\u53ca\u6216\u4e0d\u6d89\u53ca\u53c2\u8003\u8f93\u51fa:</p> Python <pre><code>def evaluator(*, outputs: dict, reference_outputs: dict):\n    # \u5c06\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\u4e0e\u53c2\u8003\u8f93\u51fa\u8fdb\u884c\u6bd4\u8f83\n    output_messages = outputs[\"messages\"]\n    reference_messages = reference_outputs[\"messages\"]\n    score = compare_messages(output_messages, reference_messages)\n    return {\"key\": \"evaluator_score\", \"score\": score}\n</code></pre> JavaScript <pre><code>type EvaluatorParams = {\n  outputs: Record&lt;string, any&gt;;\n  referenceOutputs: Record&lt;string, any&gt;;\n};\n\nfunction evaluator({ outputs, referenceOutputs }: EvaluatorParams) {\n  // \u5c06\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\u4e0e\u53c2\u8003\u8f93\u51fa\u8fdb\u884c\u6bd4\u8f83\n  const outputMessages = outputs.messages;\n  const referenceMessages = referenceOutputs.messages;\n  const score = compareMessages(outputMessages, referenceMessages);\n  return { key: \"evaluator_score\", score: score };\n}\n</code></pre> <p>\u8981\u5f00\u59cb\u4f7f\u7528,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>AgentEvals</code> \u5305\u4e2d\u7684\u9884\u6784\u5efa\u8bc4\u4f30\u5668:</p> Python <pre><code>pip install -U agentevals\n</code></pre> JavaScript <pre><code>npm install agentevals\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/evals/#_2","title":"\u521b\u5efa\u8bc4\u4f30\u5668","text":"<p>\u8bc4\u4f30\u667a\u80fd\u4ee3\u7406\u6027\u80fd\u7684\u4e00\u79cd\u5e38\u89c1\u65b9\u6cd5\u662f\u5c06\u5176\u8f68\u8ff9(\u5b83\u8c03\u7528\u5de5\u5177\u7684\u987a\u5e8f)\u4e0e\u53c2\u8003\u8f68\u8ff9\u8fdb\u884c\u6bd4\u8f83:</p> Python <pre><code>import json\n# highlight-next-line\nfrom agentevals.trajectory.match import create_trajectory_match_evaluator\n\noutputs = [\n    {\n        \"role\": \"assistant\",\n        \"tool_calls\": [\n            {\n                \"function\": {\n                    \"name\": \"get_weather\",\n                    \"arguments\": json.dumps({\"city\": \"san francisco\"}),\n                }\n            },\n            {\n                \"function\": {\n                    \"name\": \"get_directions\",\n                    \"arguments\": json.dumps({\"destination\": \"presidio\"}),\n                }\n            }\n        ],\n    }\n]\nreference_outputs = [\n    {\n        \"role\": \"assistant\",\n        \"tool_calls\": [\n            {\n                \"function\": {\n                    \"name\": \"get_weather\",\n                    \"arguments\": json.dumps({\"city\": \"san francisco\"}),\n                }\n            },\n        ],\n    }\n]\n\n# \u521b\u5efa\u8bc4\u4f30\u5668\nevaluator = create_trajectory_match_evaluator(\n    # highlight-next-line\n    trajectory_match_mode=\"superset\",  # (1)!\n)\n\n# \u8fd0\u884c\u8bc4\u4f30\u5668\nresult = evaluator(\n    outputs=outputs, reference_outputs=reference_outputs\n)\n</code></pre> JavaScript <pre><code>import { createTrajectoryMatchEvaluator } from \"agentevals/trajectory/match\";\n\nconst outputs = [\n  {\n    role: \"assistant\",\n    tool_calls: [\n      {\n        function: {\n          name: \"get_weather\",\n          arguments: JSON.stringify({ city: \"san francisco\" }),\n        },\n      },\n      {\n        function: {\n          name: \"get_directions\",\n          arguments: JSON.stringify({ destination: \"presidio\" }),\n        },\n      },\n    ],\n  },\n];\n\nconst referenceOutputs = [\n  {\n    role: \"assistant\",\n    tool_calls: [\n      {\n        function: {\n          name: \"get_weather\",\n          arguments: JSON.stringify({ city: \"san francisco\" }),\n        },\n      },\n    ],\n  },\n];\n\n// \u521b\u5efa\u8bc4\u4f30\u5668\nconst evaluator = createTrajectoryMatchEvaluator({\n  // \u6307\u5b9a\u5982\u4f55\u6bd4\u8f83\u8f68\u8ff9\u3002`superset` \u5c06\u63a5\u53d7\u8f93\u51fa\u8f68\u8ff9\u4f5c\u4e3a\u6709\u6548,\u5982\u679c\u5b83\u662f\u53c2\u8003\u8f68\u8ff9\u7684\u8d85\u96c6\u3002\u5176\u4ed6\u9009\u9879\u5305\u62ec: strict\u3001unordered \u548c subset\n  trajectoryMatchMode: \"superset\", // (1)!\n});\n\n// \u8fd0\u884c\u8bc4\u4f30\u5668\nconst result = evaluator({\n  outputs: outputs,\n  referenceOutputs: referenceOutputs,\n});\n</code></pre> <ol> <li>\u6307\u5b9a\u5982\u4f55\u6bd4\u8f83\u8f68\u8ff9\u3002<code>superset</code> \u5c06\u63a5\u53d7\u8f93\u51fa\u8f68\u8ff9\u4f5c\u4e3a\u6709\u6548,\u5982\u679c\u5b83\u662f\u53c2\u8003\u8f68\u8ff9\u7684\u8d85\u96c6\u3002\u5176\u4ed6\u9009\u9879\u5305\u62ec: strict\u3001unordered \u548c subset</li> </ol> <p>\u4f5c\u4e3a\u4e0b\u4e00\u6b65,\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u81ea\u5b9a\u4e49\u8f68\u8ff9\u5339\u914d\u8bc4\u4f30\u5668\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/evals/#llm","title":"LLM \u4f5c\u4e3a\u8bc4\u5224\u8005","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 LLM \u4f5c\u4e3a\u8bc4\u5224\u8005\u8bc4\u4f30\u5668,\u5b83\u4f7f\u7528 LLM \u5c06\u8f68\u8ff9\u4e0e\u53c2\u8003\u8f93\u51fa\u8fdb\u884c\u6bd4\u8f83\u5e76\u8f93\u51fa\u5206\u6570:</p> Python <pre><code>import json\nfrom agentevals.trajectory.llm import (\n    # highlight-next-line\n    create_trajectory_llm_as_judge,\n    TRAJECTORY_ACCURACY_PROMPT_WITH_REFERENCE\n)\n\nevaluator = create_trajectory_llm_as_judge(\n    prompt=TRAJECTORY_ACCURACY_PROMPT_WITH_REFERENCE,\n    model=\"openai:o3-mini\"\n)\n</code></pre> JavaScript <pre><code>import {\n  createTrajectoryLlmAsJudge,\n  TRAJECTORY_ACCURACY_PROMPT_WITH_REFERENCE,\n} from \"agentevals/trajectory/llm\";\n\nconst evaluator = createTrajectoryLlmAsJudge({\n  prompt: TRAJECTORY_ACCURACY_PROMPT_WITH_REFERENCE,\n  model: \"openai:o3-mini\",\n});\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/evals/#_3","title":"\u8fd0\u884c\u8bc4\u4f30\u5668","text":"<p>\u8981\u8fd0\u884c\u8bc4\u4f30\u5668,\u4f60\u9996\u5148\u9700\u8981\u521b\u5efa\u4e00\u4e2a LangSmith \u6570\u636e\u96c6\u3002\u8981\u4f7f\u7528\u9884\u6784\u5efa\u7684 AgentEvals \u8bc4\u4f30\u5668,\u4f60\u9700\u8981\u4e00\u4e2a\u5177\u6709\u4ee5\u4e0b\u6a21\u5f0f\u7684\u6570\u636e\u96c6:</p> <ul> <li>input: <code>{\"messages\": [...]}</code> \u7528\u4e8e\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u7684\u8f93\u5165\u6d88\u606f\u3002</li> <li>output: <code>{\"messages\": [...]}</code> \u667a\u80fd\u4ee3\u7406\u8f93\u51fa\u4e2d\u9884\u671f\u7684\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u3002\u5bf9\u4e8e\u8f68\u8ff9\u8bc4\u4f30,\u4f60\u53ef\u4ee5\u9009\u62e9\u53ea\u4fdd\u7559\u52a9\u624b\u6d88\u606f\u3002</li> </ul> Python <pre><code>from langsmith import Client\nfrom langgraph.prebuilt import create_react_agent\nfrom agentevals.trajectory.match import create_trajectory_match_evaluator\n\nclient = Client()\nagent = create_react_agent(...)\nevaluator = create_trajectory_match_evaluator(...)\n\nexperiment_results = client.evaluate(\n    lambda inputs: agent.invoke(inputs),\n    # \u66ff\u6362\u4e3a\u4f60\u7684\u6570\u636e\u96c6\u540d\u79f0\n    data=\"&lt;Name of your dataset&gt;\",\n    evaluators=[evaluator]\n)\n</code></pre> JavaScript <pre><code>import { Client } from \"langsmith\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { createTrajectoryMatchEvaluator } from \"agentevals/trajectory/match\";\n\nconst client = new Client();\nconst agent = createReactAgent({...});\nconst evaluator = createTrajectoryMatchEvaluator({...});\n\nconst experimentResults = await client.evaluate(\n    (inputs) =&gt; agent.invoke(inputs),\n    // \u66ff\u6362\u4e3a\u4f60\u7684\u6570\u636e\u96c6\u540d\u79f0\n    { data: \"&lt;Name of your dataset&gt;\" },\n    { evaluators: [evaluator] }\n);\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/mcp/","title":"\u4f7f\u7528 MCP","text":"<p>\u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae (MCP) \u662f\u4e00\u4e2a\u5f00\u653e\u534f\u8bae,\u6807\u51c6\u5316\u4e86\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5411\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5de5\u5177\u548c\u4e0a\u4e0b\u6587\u3002LangGraph \u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u901a\u8fc7 <code>langchain-mcp-adapters</code> \u5e93\u4f7f\u7528 MCP \u670d\u52a1\u5668\u4e0a\u5b9a\u4e49\u7684\u5de5\u5177\u3002</p> <p></p> Python <p>\u5b89\u88c5 <code>langchain-mcp-adapters</code> \u5e93\u4ee5\u5728 LangGraph \u4e2d\u4f7f\u7528 MCP \u5de5\u5177:</p> <pre><code>pip install langchain-mcp-adapters\n</code></pre> JavaScript <p>\u5b89\u88c5 <code>@langchain/mcp-adapters</code> \u5e93\u4ee5\u5728 LangGraph \u4e2d\u4f7f\u7528 MCP \u5de5\u5177:</p> <pre><code>npm install langchain-mcp-adapters\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/mcp/#mcp_1","title":"\u4f7f\u7528 MCP \u5de5\u5177","text":"Python <p><code>langchain-mcp-adapters</code> \u5305\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u4f7f\u7528\u8de8\u4e00\u4e2a\u6216\u591a\u4e2a MCP \u670d\u52a1\u5668\u5b9a\u4e49\u7684\u5de5\u5177\u3002</p> \u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u5728\u5de5\u4f5c\u6d41\u4e2dJavaScript \u4f7f\u7528 MCP \u670d\u52a1\u5668\u4e0a\u5b9a\u4e49\u7684\u5de5\u5177\u7684\u667a\u80fd\u4ee3\u7406<pre><code># highlight-next-line\nfrom langchain_mcp_adapters.client import MultiServerMCPClient\nfrom langgraph.prebuilt import create_react_agent\n\n# highlight-next-line\nclient = MultiServerMCPClient(\n    {\n        \"math\": {\n            \"command\": \"python\",\n            # \u66ff\u6362\u4e3a\u4f60\u7684 math_server.py \u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n            \"args\": [\"/path/to/math_server.py\"],\n            \"transport\": \"stdio\",\n        },\n        \"weather\": {\n            # \u786e\u4fdd\u4f60\u5728\u7aef\u53e3 8000 \u4e0a\u542f\u52a8\u4f60\u7684\u5929\u6c14\u670d\u52a1\u5668\n            \"url\": \"http://localhost:8000/mcp\",\n            \"transport\": \"streamable_http\",\n        }\n    }\n)\n# highlight-next-line\ntools = await client.get_tools()\nagent = create_react_agent(\n    \"anthropic:claude-3-7-sonnet-latest\",\n    # highlight-next-line\n    tools\n)\nmath_response = await agent.ainvoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what's (3 + 5) x 12?\"}]}\n)\nweather_response = await agent.ainvoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in nyc?\"}]}\n)\n</code></pre> \u4f7f\u7528 ToolNode \u4e0e MCP \u5de5\u5177\u7684\u5de5\u4f5c\u6d41<pre><code>from langchain_mcp_adapters.client import MultiServerMCPClient\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START, END\nfrom langgraph.prebuilt import ToolNode\n\n# \u521d\u59cb\u5316\u6a21\u578b\nmodel = init_chat_model(\"anthropic:claude-3-5-sonnet-latest\")\n\n# \u8bbe\u7f6e MCP \u5ba2\u6237\u7aef\nclient = MultiServerMCPClient(\n    {\n        \"math\": {\n            \"command\": \"python\",\n            # \u786e\u4fdd\u66f4\u65b0\u4e3a\u4f60\u7684 math_server.py \u6587\u4ef6\u7684\u5b8c\u6574\u7edd\u5bf9\u8def\u5f84\n            \"args\": [\"./examples/math_server.py\"],\n            \"transport\": \"stdio\",\n        },\n        \"weather\": {\n            # \u786e\u4fdd\u4f60\u5728\u7aef\u53e3 8000 \u4e0a\u542f\u52a8\u4f60\u7684\u5929\u6c14\u670d\u52a1\u5668\n            \"url\": \"http://localhost:8000/mcp/\",\n            \"transport\": \"streamable_http\",\n        }\n    }\n)\ntools = await client.get_tools()\n\n# \u5c06\u5de5\u5177\u7ed1\u5b9a\u5230\u6a21\u578b\nmodel_with_tools = model.bind_tools(tools)\n\n# \u521b\u5efa ToolNode\ntool_node = ToolNode(tools)\n\ndef should_continue(state: MessagesState):\n    messages = state[\"messages\"]\n    last_message = messages[-1]\n    if last_message.tool_calls:\n        return \"tools\"\n    return END\n\n# \u5b9a\u4e49 call_model \u51fd\u6570\nasync def call_model(state: MessagesState):\n    messages = state[\"messages\"]\n    response = await model_with_tools.ainvoke(messages)\n    return {\"messages\": [response]}\n\n# \u6784\u5efa\u56fe\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(\"call_model\", call_model)\nbuilder.add_node(\"tools\", tool_node)\n\nbuilder.add_edge(START, \"call_model\")\nbuilder.add_conditional_edges(\n    \"call_model\",\n    should_continue,\n)\nbuilder.add_edge(\"tools\", \"call_model\")\n\n# \u7f16\u8bd1\u56fe\ngraph = builder.compile()\n\n# \u6d4b\u8bd5\u56fe\nmath_response = await graph.ainvoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what's (3 + 5) x 12?\"}]}\n)\nweather_response = await graph.ainvoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in nyc?\"}]}\n)\n</code></pre> <p><code>@langchain/mcp-adapters</code> \u5305\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u4f7f\u7528\u8de8\u4e00\u4e2a\u6216\u591a\u4e2a MCP \u670d\u52a1\u5668\u5b9a\u4e49\u7684\u5de5\u5177\u3002</p> \u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u5728\u5de5\u4f5c\u6d41\u4e2d \u4f7f\u7528 MCP \u670d\u52a1\u5668\u4e0a\u5b9a\u4e49\u7684\u5de5\u5177\u7684\u667a\u80fd\u4ee3\u7406<pre><code>// highlight-next-line\nimport { MultiServerMCPClient } from \"langchain-mcp-adapters/client\";\nimport { ChatAnthropic } from \"@langchain/langgraph/prebuilt\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\n// highlight-next-line\nconst client = new MultiServerMCPClient({\n  math: {\n    command: \"node\",\n    // \u66ff\u6362\u4e3a\u4f60\u7684 math_server.js \u6587\u4ef6\u7684\u7edd\u5bf9\u8def\u5f84\n    args: [\"/path/to/math_server.js\"],\n    transport: \"stdio\",\n  },\n  weather: {\n    // \u786e\u4fdd\u4f60\u5728\u7aef\u53e3 8000 \u4e0a\u542f\u52a8\u4f60\u7684\u5929\u6c14\u670d\u52a1\u5668\n    url: \"http://localhost:8000/mcp\",\n    transport: \"streamable_http\",\n  },\n});\n\n// highlight-next-line\nconst tools = await client.getTools();\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-7-sonnet-latest\" }),\n  // highlight-next-line\n  tools,\n});\n\nconst mathResponse = await agent.invoke({\n  messages: [{ role: \"user\", content: \"what's (3 + 5) x 12?\" }],\n});\n\nconst weatherResponse = await agent.invoke({\n  messages: [{ role: \"user\", content: \"what is the weather in nyc?\" }],\n});\n</code></pre> <pre><code>import { MultiServerMCPClient } from \"langchain-mcp-adapters/client\";\nimport { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { AIMessage } from \"@langchain/core/messages\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI({ model: \"gpt-4\" });\n\nconst client = new MultiServerMCPClient({\n  math: {\n    command: \"node\",\n    // \u786e\u4fdd\u66f4\u65b0\u4e3a\u4f60\u7684 math_server.js \u6587\u4ef6\u7684\u5b8c\u6574\u7edd\u5bf9\u8def\u5f84\n    args: [\"./examples/math_server.js\"],\n    transport: \"stdio\",\n  },\n  weather: {\n    // \u786e\u4fdd\u4f60\u5728\u7aef\u53e3 8000 \u4e0a\u542f\u52a8\u4f60\u7684\u5929\u6c14\u670d\u52a1\u5668\n    url: \"http://localhost:8000/mcp/\",\n    transport: \"streamable_http\",\n  },\n});\n\nconst tools = await client.getTools();\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"callModel\", async (state) =&gt; {\n    const response = await model.bindTools(tools).invoke(state.messages);\n    return { messages: [response] };\n  })\n  .addNode(\"tools\", new ToolNode(tools))\n  .addEdge(START, \"callModel\")\n  .addConditionalEdges(\"callModel\", (state) =&gt; {\n    const lastMessage = state.messages.at(-1) as AIMessage | undefined;\n    if (!lastMessage?.tool_calls?.length) {\n      return \"__end__\";\n    }\n    return \"tools\";\n  })\n  .addEdge(\"tools\", \"callModel\");\n\nconst graph = builder.compile();\n\nconst mathResponse = await graph.invoke({\n  messages: [{ role: \"user\", content: \"what's (3 + 5) x 12?\" }],\n});\n\nconst weatherResponse = await graph.invoke({\n  messages: [{ role: \"user\", content: \"what is the weather in nyc?\" }],\n});\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/mcp/#mcp_2","title":"\u81ea\u5b9a\u4e49 MCP \u670d\u52a1\u5668","text":"Python <p>\u8981\u521b\u5efa\u4f60\u81ea\u5df1\u7684 MCP \u670d\u52a1\u5668,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>mcp</code> \u5e93\u3002\u8be5\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u5b9a\u4e49\u5de5\u5177\u5e76\u5c06\u5b83\u4eec\u4f5c\u4e3a\u670d\u52a1\u5668\u8fd0\u884c\u3002</p> <p>\u5b89\u88c5 MCP \u5e93:</p> <pre><code>pip install mcp\n</code></pre> JavaScript <p>\u8981\u521b\u5efa\u4f60\u81ea\u5df1\u7684 MCP \u670d\u52a1\u5668,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>@modelcontextprotocol/sdk</code> \u5e93\u3002\u8be5\u5e93\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u6cd5\u6765\u5b9a\u4e49\u5de5\u5177\u5e76\u5c06\u5b83\u4eec\u4f5c\u4e3a\u670d\u52a1\u5668\u8fd0\u884c\u3002</p> <p>\u5b89\u88c5 MCP SDK:</p> <pre><code>npm install @modelcontextprotocol/sdk\n</code></pre> <p>\u4f7f\u7528\u4ee5\u4e0b\u53c2\u8003\u5b9e\u73b0\u6765\u6d4b\u8bd5\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u4e0e MCP \u5de5\u5177\u670d\u52a1\u5668\u3002</p> Python \u793a\u4f8b\u6570\u5b66\u670d\u52a1\u5668 (stdio \u4f20\u8f93)<pre><code>from mcp.server.fastmcp import FastMCP\n\nmcp = FastMCP(\"Math\")\n\n@mcp.tool()\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"\u52a0\u4e24\u4e2a\u6570\"\"\"\n    return a + b\n\n@mcp.tool()\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"\u4e58\u4e24\u4e2a\u6570\"\"\"\n    return a * b\n\nif __name__ == \"__main__\":\n    mcp.run(transport=\"stdio\")\n</code></pre> JavaScript \u793a\u4f8b\u6570\u5b66\u670d\u52a1\u5668 (stdio \u4f20\u8f93)<pre><code>import { Server } from \"@modelcontextprotocol/sdk/server/index.js\";\nimport { StdioServerTransport } from \"@modelcontextprotocol/sdk/server/stdio.js\";\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n} from \"@modelcontextprotocol/sdk/types.js\";\n\nconst server = new Server(\n  {\n    name: \"math-server\",\n    version: \"0.1.0\",\n  },\n  {\n    capabilities: {\n      tools: {},\n    },\n  }\n);\n\nserver.setRequestHandler(ListToolsRequestSchema, async () =&gt; {\n  return {\n    tools: [\n      {\n        name: \"add\",\n        description: \"Add two numbers\",\n        inputSchema: {\n          type: \"object\",\n          properties: {\n            a: {\n              type: \"number\",\n              description: \"First number\",\n            },\n            b: {\n              type: \"number\",\n              description: \"Second number\",\n            },\n          },\n          required: [\"a\", \"b\"],\n        },\n      },\n      {\n        name: \"multiply\",\n        description: \"Multiply two numbers\",\n        inputSchema: {\n          type: \"object\",\n          properties: {\n            a: {\n              type: \"number\",\n              description: \"First number\",\n            },\n            b: {\n              type: \"number\",\n              description: \"Second number\",\n            },\n          },\n          required: [\"a\", \"b\"],\n        },\n      },\n    ],\n  };\n});\n\nserver.setRequestHandler(CallToolRequestSchema, async (request) =&gt; {\n  switch (request.params.name) {\n    case \"add\": {\n      const { a, b } = request.params.arguments as { a: number; b: number };\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: String(a + b),\n          },\n        ],\n      };\n    }\n    case \"multiply\": {\n      const { a, b } = request.params.arguments as { a: number; b: number };\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: String(a * b),\n          },\n        ],\n      };\n    }\n    default:\n      throw new Error(`Unknown tool: ${request.params.name}`);\n  }\n});\n\nasync function main() {\n  const transport = new StdioServerTransport();\n  await server.connect(transport);\n  console.error(\"Math MCP server running on stdio\");\n}\n\nmain();\n</code></pre> Python \u793a\u4f8b\u5929\u6c14\u670d\u52a1\u5668 (Streamable HTTP \u4f20\u8f93)<pre><code>from mcp.server.fastmcp import FastMCP\n\nmcp = FastMCP(\"Weather\")\n\n@mcp.tool()\nasync def get_weather(location: str) -&gt; str:\n    \"\"\"\u83b7\u53d6\u4f4d\u7f6e\u7684\u5929\u6c14\u3002\"\"\"\n    return \"It's always sunny in New York\"\n\nif __name__ == \"__main__\":\n    mcp.run(transport=\"streamable-http\")\n</code></pre> JavaScript \u793a\u4f8b\u5929\u6c14\u670d\u52a1\u5668 (HTTP \u4f20\u8f93)<pre><code>import { Server } from \"@modelcontextprotocol/sdk/server/index.js\";\nimport { SSEServerTransport } from \"@modelcontextprotocol/sdk/server/sse.js\";\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n} from \"@modelcontextprotocol/sdk/types.js\";\nimport express from \"express\";\n\nconst app = express();\napp.use(express.json());\n\nconst server = new Server(\n  {\n    name: \"weather-server\",\n    version: \"0.1.0\",\n  },\n  {\n    capabilities: {\n      tools: {},\n    },\n  }\n);\n\nserver.setRequestHandler(ListToolsRequestSchema, async () =&gt; {\n  return {\n    tools: [\n      {\n        name: \"get_weather\",\n        description: \"Get weather for location\",\n        inputSchema: {\n          type: \"object\",\n          properties: {\n            location: {\n              type: \"string\",\n              description: \"Location to get weather for\",\n            },\n          },\n          required: [\"location\"],\n        },\n      },\n    ],\n  };\n});\n\nserver.setRequestHandler(CallToolRequestSchema, async (request) =&gt; {\n  switch (request.params.name) {\n    case \"get_weather\": {\n      const { location } = request.params.arguments as { location: string };\n      return {\n        content: [\n          {\n            type: \"text\",\n            text: `It's always sunny in ${location}`,\n          },\n        ],\n      };\n    }\n    default:\n      throw new Error(`Unknown tool: ${request.params.name}`);\n  }\n});\n\napp.post(\"/mcp\", async (req, res) =&gt; {\n  const transport = new SSEServerTransport(\"/mcp\", res);\n  await server.connect(transport);\n});\n\nconst PORT = process.env.PORT || 8000;\napp.listen(PORT, () =&gt; {\n  console.log(`Weather MCP server running on port ${PORT}`);\n});\n</code></pre> Python","tags":["agent"],"boost":2},{"location":"agents/mcp/#_1","title":"\u9644\u52a0\u8d44\u6e90","text":"<ul> <li>MCP \u6587\u6863</li> <li>MCP \u4f20\u8f93\u6587\u6863</li> <li>langchain_mcp_adapters</li> </ul> JavaScript","tags":["agent"],"boost":2},{"location":"agents/mcp/#_2","title":"\u9644\u52a0\u8d44\u6e90","text":"<ul> <li>MCP \u6587\u6863</li> <li>MCP \u4f20\u8f93\u6587\u6863</li> <li><code>@langchain/mcp-adapters</code></li> </ul>","tags":["agent"],"boost":2},{"location":"agents/models/","title":"\u6a21\u578b","text":"<p>LangGraph \u901a\u8fc7 LangChain \u5e93\u63d0\u4f9b\u5bf9 LLM (\u8bed\u8a00\u6a21\u578b) \u7684\u5185\u7f6e\u652f\u6301\u3002\u8fd9\u4f7f\u5f97\u5c06\u5404\u79cd LLM \u96c6\u6210\u5230\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u548c\u5de5\u4f5c\u6d41\u4e2d\u53d8\u5f97\u5bb9\u6613\u3002</p>"},{"location":"agents/models/#_2","title":"\u521d\u59cb\u5316\u6a21\u578b","text":"Python <p>\u4f7f\u7528 <code>init_chat_model</code> \u521d\u59cb\u5316\u6a21\u578b:</p> <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> JavaScript <p>\u4f7f\u7528\u6a21\u578b\u63d0\u4f9b\u5546\u7c7b\u521d\u59cb\u5316\u6a21\u578b:</p> OpenAIAnthropicGoogleGroqPython <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\n\nconst model = new ChatOpenAI({\n  model: \"gpt-4o\",\n  temperature: 0,\n});\n</code></pre> <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst model = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-20240620\",\n  temperature: 0,\n  maxTokens: 2048,\n});\n</code></pre> <pre><code>import { ChatGoogleGenerativeAI } from \"@langchain/google-genai\";\n\nconst model = new ChatGoogleGenerativeAI({\n  model: \"gemini-1.5-pro\",\n  temperature: 0,\n});\n</code></pre> <pre><code>import { ChatGroq } from \"@langchain/groq\";\n\nconst model = new ChatGroq({\n  model: \"llama-3.1-70b-versatile\",\n  temperature: 0,\n});\n</code></pre>"},{"location":"agents/models/#_3","title":"\u76f4\u63a5\u5b9e\u4f8b\u5316\u6a21\u578b","text":"<p>\u5982\u679c\u6a21\u578b\u63d0\u4f9b\u5546\u65e0\u6cd5\u901a\u8fc7 <code>init_chat_model</code> \u4f7f\u7528,\u4f60\u53ef\u4ee5\u76f4\u63a5\u5b9e\u4f8b\u5316\u63d0\u4f9b\u5546\u7684\u6a21\u578b\u7c7b\u3002\u8be5\u6a21\u578b\u5fc5\u987b\u5b9e\u73b0 BaseChatModel \u63a5\u53e3\u5e76\u652f\u6301\u5de5\u5177\u8c03\u7528:</p> <pre><code># Anthropic \u5df2\u88ab `init_chat_model` \u652f\u6301,\n# \u4f46\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5b9e\u4f8b\u5316\u5b83\u3002\nfrom langchain_anthropic import ChatAnthropic\n\nmodel = ChatAnthropic(\n  model=\"claude-3-7-sonnet-latest\",\n  temperature=0,\n  max_tokens=2048\n)\n</code></pre> <p>\u5de5\u5177\u8c03\u7528\u652f\u6301</p> <p>\u5982\u679c\u4f60\u6b63\u5728\u6784\u5efa\u9700\u8981\u6a21\u578b\u8c03\u7528\u5916\u90e8\u5de5\u5177\u7684\u667a\u80fd\u4ee3\u7406\u6216\u5de5\u4f5c\u6d41,\u8bf7\u786e\u4fdd\u5e95\u5c42\u8bed\u8a00\u6a21\u578b\u652f\u6301\u5de5\u5177\u8c03\u7528\u3002\u517c\u5bb9\u7684\u6a21\u578b\u53ef\u4ee5\u5728 LangChain \u96c6\u6210\u76ee\u5f55\u4e2d\u627e\u5230\u3002</p>"},{"location":"agents/models/#_4","title":"\u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528","text":"Python <p>\u4f7f\u7528 <code>create_react_agent</code> \u65f6,\u4f60\u53ef\u4ee5\u901a\u8fc7\u5176\u540d\u79f0\u5b57\u7b26\u4e32\u6307\u5b9a\u6a21\u578b,\u8fd9\u662f\u4f7f\u7528 <code>init_chat_model</code> \u521d\u59cb\u5316\u6a21\u578b\u7684\u7b80\u5199\u3002\u8fd9\u5141\u8bb8\u4f60\u4f7f\u7528\u6a21\u578b\u800c\u65e0\u9700\u76f4\u63a5\u5bfc\u5165\u6216\u5b9e\u4f8b\u5316\u5b83\u3002</p> \u6a21\u578b\u540d\u79f0\u6a21\u578b\u5b9e\u4f8bJavaScript <pre><code>from langgraph.prebuilt import create_react_agent\n\ncreate_react_agent(\n   # highlight-next-line\n   model=\"anthropic:claude-3-7-sonnet-latest\",\n   # \u5176\u4ed6\u53c2\u6570\n)\n</code></pre> <pre><code>from langchain_anthropic import ChatAnthropic\nfrom langgraph.prebuilt import create_react_agent\n\nmodel = ChatAnthropic(\n    model=\"claude-3-7-sonnet-latest\",\n    temperature=0,\n    max_tokens=2048\n)\n# \u6216\u8005\n# model = init_chat_model(\"anthropic:claude-3-7-sonnet-latest\")\n\nagent = create_react_agent(\n  # highlight-next-line\n  model=model,\n  # \u5176\u4ed6\u53c2\u6570\n)\n</code></pre> <p>\u4f7f\u7528 <code>createReactAgent</code> \u65f6,\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f20\u9012\u6a21\u578b\u5b9e\u4f8b:</p> <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst model = new ChatOpenAI({\n  model: \"gpt-4o\",\n  temperature: 0,\n});\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: tools,\n});\n</code></pre> Python"},{"location":"agents/models/#_5","title":"\u52a8\u6001\u6a21\u578b\u9009\u62e9","text":"<p>\u5c06\u53ef\u8c03\u7528\u51fd\u6570\u4f20\u9012\u7ed9 <code>create_react_agent</code> \u4ee5\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u9009\u62e9\u6a21\u578b\u3002\u8fd9\u5bf9\u4e8e\u4f60\u60f3\u8981\u6839\u636e\u7528\u6237\u8f93\u5165\u3001\u914d\u7f6e\u8bbe\u7f6e\u6216\u5176\u4ed6\u8fd0\u884c\u65f6\u6761\u4ef6\u9009\u62e9\u6a21\u578b\u7684\u573a\u666f\u5f88\u6709\u7528\u3002</p> <p>\u9009\u62e9\u5668\u51fd\u6570\u5fc5\u987b\u8fd4\u56de\u804a\u5929\u6a21\u578b\u3002\u5982\u679c\u4f60\u4f7f\u7528\u5de5\u5177,\u4f60\u5fc5\u987b\u5728\u9009\u62e9\u5668\u51fd\u6570\u5185\u5c06\u5de5\u5177\u7ed1\u5b9a\u5230\u6a21\u578b\u3002</p> <p>```python from dataclasses import dataclass from typing import Literal from langchain.chat_models import init_chat_model from langchain_core.language_models import BaseChatModel from langchain_core.tools import tool from langgraph.prebuilt import create_react_agent from langgraph.prebuilt.chat_agent_executor import AgentState from langgraph.runtime import Runtime</p> <p>@tool def weather() -&gt; str:     \"\"\"\u8fd4\u56de\u5f53\u524d\u5929\u6c14\u72b6\u51b5\u3002\"\"\"     return \"It's nice and sunny.\"</p>"},{"location":"agents/models/#_6","title":"\u5b9a\u4e49\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587","text":"<p>@dataclass class CustomContext:     provider: Literal[\"anthropic\", \"openai\"]</p>"},{"location":"agents/models/#_7","title":"\u521d\u59cb\u5316\u6a21\u578b","text":"<p>openai_model = init_chat_model(\"openai:gpt-4o\") anthropic_model = init_chat_model(\"anthropic:claude-sonnet-4-20250514\")</p>"},{"location":"agents/models/#_8","title":"\u6a21\u578b\u9009\u62e9\u7684\u9009\u62e9\u5668\u51fd\u6570","text":"<p>def select_model(state: AgentState, runtime: Runtime[CustomContext]) -&gt; BaseChatModel:     if runtime.context.provider == \"anthropic\":         model = anthropic_model     elif runtime.context.provider == \"openai\":         model = openai_model     else:         raise ValueError(f\"Unsupported provider: {runtime.context.provider}\")</p> <pre><code># \u4f7f\u7528\u52a8\u6001\u6a21\u578b\u9009\u62e9\u65f6,\u4f60\u5fc5\u987b\u660e\u786e\u7ed1\u5b9a\u5de5\u5177\nreturn model.bind_tools([weather])\n</code></pre>"},{"location":"agents/models/#_9","title":"\u521b\u5efa\u5177\u6709\u52a8\u6001\u6a21\u578b\u9009\u62e9\u7684\u667a\u80fd\u4ee3\u7406","text":"<p>agent = create_react_agent(select_model, tools=[weather])</p>"},{"location":"agents/models/#_10","title":"\u4f7f\u7528\u4e0a\u4e0b\u6587\u8c03\u7528\u4ee5\u9009\u62e9\u6a21\u578b","text":"<p>output = agent.invoke(     {         \"messages\": [             {                 \"role\": \"user\",                 \"content\": \"Which model is handling this?\",             }         ]     },     context=CustomContext(provider=\"openai\"), )</p> <p>print(output[\"messages\"][-1].text()) <pre><code>!!! version-added \"\u5728\u7248\u672c 0.6.0 \u4e2d\u6dfb\u52a0\"\n\n\n## \u9ad8\u7ea7\u6a21\u578b\u914d\u7f6e\n\n### \u7981\u7528\u6d41\u5f0f\u4f20\u8f93\n\n=== \"Python\"\n\u8981\u7981\u7528\u5355\u4e2a LLM \u6807\u8bb0\u7684\u6d41\u5f0f\u4f20\u8f93,\u8bf7\u5728\u521d\u59cb\u5316\u6a21\u578b\u65f6\u8bbe\u7f6e `disable_streaming=True`:\n\n=== \"`init_chat_model`\"\n\n    ```python\n    from langchain.chat_models import init_chat_model\n\n    model = init_chat_model(\n        \"anthropic:claude-3-7-sonnet-latest\",\n        # highlight-next-line\n        disable_streaming=True\n    )\n    ```\n\n=== \"`ChatModel`\"\n\n    ```python\n    from langchain_anthropic import ChatAnthropic\n\n    model = ChatAnthropic(\n        model=\"claude-3-7-sonnet-latest\",\n        # highlight-next-line\n        disable_streaming=True\n    )\n    ```\n\n\u6709\u5173 `disable_streaming` \u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 [API \u53c2\u8003](https://python.langchain.com/api_reference/core/language_models/langchain_core.language_models.chat_models.BaseChatModel.html#langchain_core.language_models.chat_models.BaseChatModel.disable_streaming)\n\n=== \"JavaScript\"\n\u8981\u7981\u7528\u5355\u4e2a LLM \u6807\u8bb0\u7684\u6d41\u5f0f\u4f20\u8f93,\u8bf7\u5728\u521d\u59cb\u5316\u6a21\u578b\u65f6\u8bbe\u7f6e `streaming: false`:\n\n```typescript\nimport { ChatOpenAI } from \"@langchain/openai\";\n\nconst model = new ChatOpenAI({\n  model: \"gpt-4o\",\n  streaming: false,\n});\n</code></pre></p>"},{"location":"agents/models/#_11","title":"\u6dfb\u52a0\u6a21\u578b\u5907\u7528\u65b9\u6848","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>model.with_fallbacks([...])</code> \u6dfb\u52a0\u5907\u7528\u65b9\u6848\u5230\u4e0d\u540c\u7684\u6a21\u578b\u6216\u4e0d\u540c\u7684 LLM \u63d0\u4f9b\u5546:</p> <code>init_chat_model</code><code>ChatModel</code> <pre><code>from langchain.chat_models import init_chat_model\n\nmodel_with_fallbacks = (\n    init_chat_model(\"anthropic:claude-3-5-haiku-latest\")\n    # highlight-next-line\n    .with_fallbacks([\n        init_chat_model(\"openai:gpt-4.1-mini\"),\n    ])\n)\n</code></pre> <pre><code>from langchain_anthropic import ChatAnthropic\nfrom langchain_openai import ChatOpenAI\n\nmodel_with_fallbacks = (\n    ChatAnthropic(model=\"claude-3-5-haiku-latest\")\n    # highlight-next-line\n    .with_fallbacks([\n        ChatOpenAI(model=\"gpt-4.1-mini\"),\n    ])\n)\n</code></pre> <p>\u6709\u5173\u6a21\u578b\u5907\u7528\u65b9\u6848\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u3002</p> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>model.withFallbacks([...])</code> \u6dfb\u52a0\u5907\u7528\u65b9\u6848\u5230\u4e0d\u540c\u7684\u6a21\u578b\u6216\u4e0d\u540c\u7684 LLM \u63d0\u4f9b\u5546:</p> <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst modelWithFallbacks = new ChatOpenAI({\n  model: \"gpt-4o\",\n}).withFallbacks([\n  new ChatAnthropic({\n    model: \"claude-3-5-sonnet-20240620\",\n  }),\n]);\n</code></pre> <p>\u6709\u5173\u6a21\u578b\u5907\u7528\u65b9\u6848\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u3002</p> Python"},{"location":"agents/models/#_12","title":"\u4f7f\u7528\u5185\u7f6e\u7684\u901f\u7387\u9650\u5236\u5668","text":"<p>Langchain \u5305\u542b\u4e00\u4e2a\u5185\u7f6e\u7684\u5185\u5b58\u901f\u7387\u9650\u5236\u5668\u3002\u6b64\u901f\u7387\u9650\u5236\u5668\u662f\u7ebf\u7a0b\u5b89\u5168\u7684,\u53ef\u4ee5\u88ab\u540c\u4e00\u8fdb\u7a0b\u4e2d\u7684\u591a\u4e2a\u7ebf\u7a0b\u5171\u4eab\u3002</p> <pre><code>from langchain_core.rate_limiters import InMemoryRateLimiter\nfrom langchain_anthropic import ChatAnthropic\n\nrate_limiter = InMemoryRateLimiter(\n    requests_per_second=0.1,  # &lt;-- \u8d85\u6162!\u6211\u4eec\u6bcf10\u79d2\u53ea\u80fd\u53d1\u51fa\u4e00\u6b21\u8bf7\u6c42!!\n    check_every_n_seconds=0.1,  # \u6bcf100\u6beb\u79d2\u5524\u9192\u4e00\u6b21\u4ee5\u68c0\u67e5\u662f\u5426\u5141\u8bb8\u53d1\u51fa\u8bf7\u6c42,\n    max_bucket_size=10,  # \u63a7\u5236\u6700\u5927\u7a81\u53d1\u5927\u5c0f\u3002\n)\n\nmodel = ChatAnthropic(\n   model_name=\"claude-3-opus-20240229\",\n   rate_limiter=rate_limiter\n)\n</code></pre> <p>\u6709\u5173\u5982\u4f55\u5904\u7406\u901f\u7387\u9650\u5236\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 LangChain \u6587\u6863\u3002</p>"},{"location":"agents/models/#_13","title":"\u81ea\u5e26\u6a21\u578b","text":"<p>\u5982\u679c\u4f60\u60f3\u8981\u7684 LLM \u672a\u88ab LangChain \u5b98\u65b9\u652f\u6301,\u8bf7\u8003\u8651\u4ee5\u4e0b\u9009\u9879:</p> Python <ol> <li>\u5b9e\u73b0\u81ea\u5b9a\u4e49 LangChain \u804a\u5929\u6a21\u578b: \u521b\u5efa\u7b26\u5408 LangChain \u804a\u5929\u6a21\u578b\u63a5\u53e3\u7684\u6a21\u578b\u3002\u8fd9\u4f7f\u5f97\u4e0e LangGraph \u7684\u667a\u80fd\u4ee3\u7406\u548c\u5de5\u4f5c\u6d41\u5b8c\u5168\u517c\u5bb9,\u4f46\u9700\u8981\u7406\u89e3 LangChain \u6846\u67b6\u3002</li> </ol> JavaScript <ol> <li> <p>\u5b9e\u73b0\u81ea\u5b9a\u4e49 LangChain \u804a\u5929\u6a21\u578b: \u521b\u5efa\u7b26\u5408 LangChain \u804a\u5929\u6a21\u578b\u63a5\u53e3\u7684\u6a21\u578b\u3002\u8fd9\u4f7f\u5f97\u4e0e LangGraph \u7684\u667a\u80fd\u4ee3\u7406\u548c\u5de5\u4f5c\u6d41\u5b8c\u5168\u517c\u5bb9,\u4f46\u9700\u8981\u7406\u89e3 LangChain \u6846\u67b6\u3002</p> </li> <li> <p>\u4f7f\u7528\u81ea\u5b9a\u4e49\u6d41\u5f0f\u4f20\u8f93\u8fdb\u884c\u76f4\u63a5\u8c03\u7528: \u901a\u8fc7\u4f7f\u7528 <code>StreamWriter</code> \u6dfb\u52a0\u81ea\u5b9a\u4e49\u6d41\u5f0f\u4f20\u8f93\u903b\u8f91\u76f4\u63a5\u4f7f\u7528\u4f60\u7684\u6a21\u578b\u3002    \u6709\u5173\u6307\u5bfc,\u8bf7\u53c2\u9605\u81ea\u5b9a\u4e49\u6d41\u5f0f\u4f20\u8f93\u6587\u6863\u3002\u8fd9\u79cd\u65b9\u6cd5\u9002\u7528\u4e8e\u4e0d\u9700\u8981\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u96c6\u6210\u7684\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\u3002</p> </li> </ol>"},{"location":"agents/models/#_14","title":"\u9644\u52a0\u8d44\u6e90","text":"Python <ul> <li>\u591a\u6a21\u6001\u8f93\u5165</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa</li> <li>\u6a21\u578b\u96c6\u6210\u76ee\u5f55</li> <li>\u5f3a\u5236\u6a21\u578b\u8c03\u7528\u7279\u5b9a\u5de5\u5177</li> <li>\u6240\u6709\u804a\u5929\u6a21\u578b\u64cd\u4f5c\u6307\u5357</li> <li>\u804a\u5929\u6a21\u578b\u96c6\u6210</li> </ul> JavaScript <ul> <li>\u591a\u6a21\u6001\u8f93\u5165</li> <li>\u7ed3\u6784\u5316\u8f93\u51fa</li> <li>\u6a21\u578b\u96c6\u6210\u76ee\u5f55</li> <li>\u5f3a\u5236\u6a21\u578b\u8c03\u7528\u7279\u5b9a\u5de5\u5177</li> <li>\u6240\u6709\u804a\u5929\u6a21\u578b\u64cd\u4f5c\u6307\u5357</li> <li>\u804a\u5929\u6a21\u578b\u96c6\u6210</li> </ul>"},{"location":"agents/multi-agent/","title":"\u591a\u667a\u80fd\u4ee3\u7406","text":"<p>\u5982\u679c\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u9700\u8981\u4e13\u95e8\u5904\u7406\u591a\u4e2a\u9886\u57df\u6216\u7ba1\u7406\u8bb8\u591a\u5de5\u5177,\u5b83\u53ef\u80fd\u4f1a\u9047\u5230\u56f0\u96be\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898,\u4f60\u53ef\u4ee5\u5c06\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u5206\u89e3\u6210\u66f4\u5c0f\u7684\u72ec\u7acb\u667a\u80fd\u4ee3\u7406,\u5e76\u5c06\u5b83\u4eec\u7ec4\u5408\u6210\u4e00\u4e2a\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</p> <p>\u5728\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d,\u667a\u80fd\u4ee3\u7406\u9700\u8981\u5f7c\u6b64\u4e4b\u95f4\u8fdb\u884c\u901a\u4fe1\u3002\u5b83\u4eec\u901a\u8fc7\u4ea4\u63a5\u6765\u5b9e\u73b0 \u2014 \u8fd9\u662f\u4e00\u4e2a\u539f\u8bed,\u63cf\u8ff0\u4e86\u8981\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u4ee5\u53ca\u8981\u53d1\u9001\u7ed9\u8be5\u667a\u80fd\u4ee3\u7406\u7684\u6709\u6548\u8d1f\u8f7d\u3002</p> <p>\u4e24\u79cd\u6700\u6d41\u884c\u7684\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u662f:</p> <ul> <li>\u76d1\u7763\u8005 \u2014 \u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u7531\u4e2d\u592e\u76d1\u7763\u667a\u80fd\u4ee3\u7406\u534f\u8c03\u3002\u76d1\u7763\u8005\u63a7\u5236\u6240\u6709\u901a\u4fe1\u6d41\u548c\u4efb\u52a1\u59d4\u6d3e,\u6839\u636e\u5f53\u524d\u4e0a\u4e0b\u6587\u548c\u4efb\u52a1\u9700\u6c42\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u96c6\u7fa4 \u2014 \u667a\u80fd\u4ee3\u7406\u6839\u636e\u5176\u4e13\u4e1a\u9886\u57df\u52a8\u6001\u5730\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u5f7c\u6b64\u3002\u7cfb\u7edf\u8bb0\u4f4f\u6700\u540e\u6d3b\u52a8\u7684\u667a\u80fd\u4ee3\u7406,\u786e\u4fdd\u5728\u540e\u7eed\u4ea4\u4e92\u4e2d,\u5bf9\u8bdd\u4ece\u8be5\u667a\u80fd\u4ee3\u7406\u6062\u590d\u3002</li> </ul>","tags":["agent"],"boost":2},{"location":"agents/multi-agent/#_2","title":"\u76d1\u7763\u8005","text":"Python <p>\u4f7f\u7528 <code>langgraph-supervisor</code> \u5e93\u521b\u5efa\u76d1\u7763\u8005\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf:</p> <pre><code>pip install langgraph-supervisor\n</code></pre> <pre><code>from langchain_openai import ChatOpenAI\nfrom langgraph.prebuilt import create_react_agent\n# highlight-next-line\nfrom langgraph_supervisor import create_supervisor\n\ndef book_hotel(hotel_name: str):\n    \"\"\"\u9884\u8ba2\u9152\u5e97\"\"\"\n    return f\"Successfully booked a stay at {hotel_name}.\"\n\ndef book_flight(from_airport: str, to_airport: str):\n    \"\"\"\u9884\u8ba2\u822a\u73ed\"\"\"\n    return f\"Successfully booked a flight from {from_airport} to {to_airport}.\"\n\nflight_assistant = create_react_agent(\n    model=\"openai:gpt-4o\",\n    tools=[book_flight],\n    prompt=\"You are a flight booking assistant\",\n    # highlight-next-line\n    name=\"flight_assistant\"\n)\n\nhotel_assistant = create_react_agent(\n    model=\"openai:gpt-4o\",\n    tools=[book_hotel],\n    prompt=\"You are a hotel booking assistant\",\n    # highlight-next-line\n    name=\"hotel_assistant\"\n)\n\n# highlight-next-line\nsupervisor = create_supervisor(\n    agents=[flight_assistant, hotel_assistant],\n    model=ChatOpenAI(model=\"gpt-4o\"),\n    prompt=(\n        \"You manage a hotel booking assistant and a\"\n        \"flight booking assistant. Assign work to them.\"\n    )\n).compile()\n\nfor chunk in supervisor.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"book a flight from BOS to JFK and a stay at McKittrick Hotel\"\n            }\n        ]\n    }\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> JavaScript <p>\u4f7f\u7528 <code>@langchain/langgraph-supervisor</code> \u5e93\u521b\u5efa\u76d1\u7763\u8005\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf:</p> <pre><code>npm install @langchain/langgraph-supervisor\n</code></pre> <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n// highlight-next-line\nimport { createSupervisor } from \"langgraph-supervisor\";\n\nfunction bookHotel(hotelName: string) {\n  /**\u9884\u8ba2\u9152\u5e97*/\n  return `Successfully booked a stay at ${hotelName}.`;\n}\n\nfunction bookFlight(fromAirport: string, toAirport: string) {\n  /**\u9884\u8ba2\u822a\u73ed*/\n  return `Successfully booked a flight from ${fromAirport} to ${toAirport}.`;\n}\n\nconst flightAssistant = createReactAgent({\n  llm: \"openai:gpt-4o\",\n  tools: [bookFlight],\n  stateModifier: \"You are a flight booking assistant\",\n  // highlight-next-line\n  name: \"flight_assistant\",\n});\n\nconst hotelAssistant = createReactAgent({\n  llm: \"openai:gpt-4o\",\n  tools: [bookHotel],\n  stateModifier: \"You are a hotel booking assistant\",\n  // highlight-next-line\n  name: \"hotel_assistant\",\n});\n\n// highlight-next-line\nconst supervisor = createSupervisor({\n  agents: [flightAssistant, hotelAssistant],\n  llm: new ChatOpenAI({ model: \"gpt-4o\" }),\n  systemPrompt:\n    \"You manage a hotel booking assistant and a \" +\n    \"flight booking assistant. Assign work to them.\",\n});\n\nfor await (const chunk of supervisor.stream({\n  messages: [\n    {\n      role: \"user\",\n      content: \"book a flight from BOS to JFK and a stay at McKittrick Hotel\",\n    },\n  ],\n})) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/multi-agent/#_3","title":"\u96c6\u7fa4","text":"Python <p>\u4f7f\u7528 <code>langgraph-swarm</code> \u5e93\u521b\u5efa\u96c6\u7fa4\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf:</p> <pre><code>pip install langgraph-swarm\n</code></pre> <pre><code>from langgraph.prebuilt import create_react_agent\n# highlight-next-line\nfrom langgraph_swarm import create_swarm, create_handoff_tool\n\ntransfer_to_hotel_assistant = create_handoff_tool(\n    agent_name=\"hotel_assistant\",\n    description=\"Transfer user to the hotel-booking assistant.\",\n)\ntransfer_to_flight_assistant = create_handoff_tool(\n    agent_name=\"flight_assistant\",\n    description=\"Transfer user to the flight-booking assistant.\",\n)\n\nflight_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[book_flight, transfer_to_hotel_assistant],\n    prompt=\"You are a flight booking assistant\",\n    # highlight-next-line\n    name=\"flight_assistant\"\n)\nhotel_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[book_hotel, transfer_to_flight_assistant],\n    prompt=\"You are a hotel booking assistant\",\n    # highlight-next-line\n    name=\"hotel_assistant\"\n)\n\n# highlight-next-line\nswarm = create_swarm(\n    agents=[flight_assistant, hotel_assistant],\n    default_active_agent=\"flight_assistant\"\n).compile()\n\nfor chunk in swarm.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"book a flight from BOS to JFK and a stay at McKittrick Hotel\"\n            }\n        ]\n    }\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> JavaScript <p>\u4f7f\u7528 <code>@langchain/langgraph-swarm</code> \u5e93\u521b\u5efa\u96c6\u7fa4\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf:</p> <pre><code>npm install @langchain/langgraph-swarm\n</code></pre> <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n// highlight-next-line\nimport { createSwarm, createHandoffTool } from \"@langchain/langgraph-swarm\";\n\nconst transferToHotelAssistant = createHandoffTool({\n  agentName: \"hotel_assistant\",\n  description: \"Transfer user to the hotel-booking assistant.\",\n});\n\nconst transferToFlightAssistant = createHandoffTool({\n  agentName: \"flight_assistant\",\n  description: \"Transfer user to the flight-booking assistant.\",\n});\n\nconst flightAssistant = createReactAgent({\n  llm: \"anthropic:claude-3-5-sonnet-latest\",\n  // highlight-next-line\n  tools: [bookFlight, transferToHotelAssistant],\n  stateModifier: \"You are a flight booking assistant\",\n  // highlight-next-line\n  name: \"flight_assistant\",\n});\n\nconst hotelAssistant = createReactAgent({\n  llm: \"anthropic:claude-3-5-sonnet-latest\",\n  // highlight-next-line\n  tools: [bookHotel, transferToFlightAssistant],\n  stateModifier: \"You are a hotel booking assistant\",\n  // highlight-next-line\n  name: \"hotel_assistant\",\n});\n\n// highlight-next-line\nconst swarm = createSwarm({\n  agents: [flightAssistant, hotelAssistant],\n  defaultActiveAgent: \"flight_assistant\",\n});\n\nfor await (const chunk of swarm.stream({\n  messages: [\n    {\n      role: \"user\",\n      content: \"book a flight from BOS to JFK and a stay at McKittrick Hotel\",\n    },\n  ],\n})) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/multi-agent/#_4","title":"\u4ea4\u63a5","text":"<p>\u591a\u667a\u80fd\u4ee3\u7406\u4ea4\u4e92\u4e2d\u7684\u4e00\u4e2a\u5e38\u89c1\u6a21\u5f0f\u662f**\u4ea4\u63a5**,\u5176\u4e2d\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u63a7\u5236\u6743_\u4ea4\u63a5_\u7ed9\u53e6\u4e00\u4e2a\u3002\u4ea4\u63a5\u5141\u8bb8\u4f60\u6307\u5b9a:</p> <ul> <li>\u76ee\u6807: \u8981\u5bfc\u822a\u5230\u7684\u76ee\u6807\u667a\u80fd\u4ee3\u7406</li> <li>\u6709\u6548\u8d1f\u8f7d: \u8981\u4f20\u9012\u7ed9\u8be5\u667a\u80fd\u4ee3\u7406\u7684\u4fe1\u606f</li> </ul> Python <p>\u8fd9\u7531 <code>langgraph-supervisor</code>(\u76d1\u7763\u8005\u4ea4\u63a5\u7ed9\u5355\u4e2a\u667a\u80fd\u4ee3\u7406)\u548c <code>langgraph-swarm</code>(\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4ea4\u63a5\u7ed9\u5176\u4ed6\u667a\u80fd\u4ee3\u7406)\u4f7f\u7528\u3002</p> <p>\u8981\u4f7f\u7528 <code>create_react_agent</code> \u5b9e\u73b0\u4ea4\u63a5,\u4f60\u9700\u8981:</p> <ol> <li> <p>\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u8f6c\u79fb\u5230\u4e0d\u540c\u667a\u80fd\u4ee3\u7406\u7684\u7279\u6b8a\u5de5\u5177</p> <pre><code>def transfer_to_bob():\n    \"\"\"\u8f6c\u79fb\u5230 bob\u3002\"\"\"\n    return Command(\n        # \u8981\u53bb\u7684\u667a\u80fd\u4ee3\u7406(\u8282\u70b9)\u7684\u540d\u79f0\n        # highlight-next-line\n        goto=\"bob\",\n        # \u53d1\u9001\u7ed9\u667a\u80fd\u4ee3\u7406\u7684\u6570\u636e\n        # highlight-next-line\n        update={\"messages\": [...]},\n        # \u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230\n        # \u7236\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\n        # highlight-next-line\n        graph=Command.PARENT,\n    )\n</code></pre> </li> <li> <p>\u521b\u5efa\u53ef\u4ee5\u8bbf\u95ee\u4ea4\u63a5\u5de5\u5177\u7684\u5355\u4e2a\u667a\u80fd\u4ee3\u7406:</p> <pre><code>flight_assistant = create_react_agent(\n    ..., tools=[book_flight, transfer_to_hotel_assistant]\n)\nhotel_assistant = create_react_agent(\n    ..., tools=[book_hotel, transfer_to_flight_assistant]\n)\n</code></pre> </li> <li> <p>\u5b9a\u4e49\u5305\u542b\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u4f5c\u4e3a\u8282\u70b9\u7684\u7236\u56fe:</p> <pre><code>from langgraph.graph import StateGraph, MessagesState\nmulti_agent_graph = (\n    StateGraph(MessagesState)\n    .add_node(flight_assistant)\n    .add_node(hotel_assistant)\n    ...\n)\n</code></pre> </li> </ol> JavaScript <p>\u8fd9\u7531 <code>@langchain/langgraph-supervisor</code>(\u76d1\u7763\u8005\u4ea4\u63a5\u7ed9\u5355\u4e2a\u667a\u80fd\u4ee3\u7406)\u548c <code>@langchain/langgraph-swarm</code>(\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4ea4\u63a5\u7ed9\u5176\u4ed6\u667a\u80fd\u4ee3\u7406)\u4f7f\u7528\u3002</p> <p>\u8981\u4f7f\u7528 <code>createReactAgent</code> \u5b9e\u73b0\u4ea4\u63a5,\u4f60\u9700\u8981:</p> <ol> <li> <p>\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u5c06\u63a7\u5236\u6743\u8f6c\u79fb\u5230\u4e0d\u540c\u667a\u80fd\u4ee3\u7406\u7684\u7279\u6b8a\u5de5\u5177</p> <pre><code>function transferToBob() {\n  /**\u8f6c\u79fb\u5230 bob\u3002*/\n  return new Command({\n    // \u8981\u53bb\u7684\u667a\u80fd\u4ee3\u7406(\u8282\u70b9)\u7684\u540d\u79f0\n    // highlight-next-line\n    goto: \"bob\",\n    // \u53d1\u9001\u7ed9\u667a\u80fd\u4ee3\u7406\u7684\u6570\u636e\n    // highlight-next-line\n    update: { messages: [...] },\n    // \u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230\n    // \u7236\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\n    // highlight-next-line\n    graph: Command.PARENT,\n  });\n}\n</code></pre> </li> <li> <p>\u521b\u5efa\u53ef\u4ee5\u8bbf\u95ee\u4ea4\u63a5\u5de5\u5177\u7684\u5355\u4e2a\u667a\u80fd\u4ee3\u7406:</p> <pre><code>const flightAssistant = createReactAgent({\n  ..., tools: [bookFlight, transferToHotelAssistant]\n});\nconst hotelAssistant = createReactAgent({\n  ..., tools: [bookHotel, transferToFlightAssistant]\n});\n</code></pre> </li> <li> <p>\u5b9a\u4e49\u5305\u542b\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u4f5c\u4e3a\u8282\u70b9\u7684\u7236\u56fe:</p> <pre><code>import { StateGraph, MessagesZodState } from \"@langchain/langgraph\";\nconst multiAgentGraph = new StateGraph(MessagesZodState)\n  .addNode(\"flight_assistant\", flightAssistant)\n  .addNode(\"hotel_assistant\", hotelAssistant)\n  // ...\n</code></pre> </li> </ol> <p>\u5c06\u6240\u6709\u8fd9\u4e9b\u653e\u5728\u4e00\u8d77,\u4ee5\u4e0b\u662f\u5982\u4f55\u5b9e\u73b0\u4e00\u4e2a\u5177\u6709\u4e24\u4e2a\u667a\u80fd\u4ee3\u7406\u7684\u7b80\u5355\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf \u2014 \u822a\u73ed\u9884\u8ba2\u52a9\u624b\u548c\u9152\u5e97\u9884\u8ba2\u52a9\u624b:</p> Python <pre><code>from typing import Annotated\nfrom langchain_core.tools import tool, InjectedToolCallId\nfrom langgraph.prebuilt import create_react_agent, InjectedState\nfrom langgraph.graph import StateGraph, START, MessagesState\nfrom langgraph.types import Command\n\ndef create_handoff_tool(*, agent_name: str, description: str | None = None):\n    name = f\"transfer_to_{agent_name}\"\n    description = description or f\"Transfer to {agent_name}\"\n\n    @tool(name, description=description)\n    def handoff_tool(\n        # highlight-next-line\n        state: Annotated[MessagesState, InjectedState], # (1)!\n        # highlight-next-line\n        tool_call_id: Annotated[str, InjectedToolCallId],\n    ) -&gt; Command:\n        tool_message = {\n            \"role\": \"tool\",\n            \"content\": f\"Successfully transferred to {agent_name}\",\n            \"name\": name,\n            \"tool_call_id\": tool_call_id,\n        }\n        return Command(  # (2)!\n            # highlight-next-line\n            goto=agent_name,  # (3)!\n            # highlight-next-line\n            update={\"messages\": state[\"messages\"] + [tool_message]},  # (4)!\n            # highlight-next-line\n            graph=Command.PARENT,  # (5)!\n        )\n    return handoff_tool\n\n# \u4ea4\u63a5\ntransfer_to_hotel_assistant = create_handoff_tool(\n    agent_name=\"hotel_assistant\",\n    description=\"Transfer user to the hotel-booking assistant.\",\n)\ntransfer_to_flight_assistant = create_handoff_tool(\n    agent_name=\"flight_assistant\",\n    description=\"Transfer user to the flight-booking assistant.\",\n)\n\n# \u7b80\u5355\u7684\u667a\u80fd\u4ee3\u7406\u5de5\u5177\ndef book_hotel(hotel_name: str):\n    \"\"\"\u9884\u8ba2\u9152\u5e97\"\"\"\n    return f\"Successfully booked a stay at {hotel_name}.\"\n\ndef book_flight(from_airport: str, to_airport: str):\n    \"\"\"\u9884\u8ba2\u822a\u73ed\"\"\"\n    return f\"Successfully booked a flight from {from_airport} to {to_airport}.\"\n\n# \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\nflight_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[book_flight, transfer_to_hotel_assistant],\n    prompt=\"You are a flight booking assistant\",\n    # highlight-next-line\n    name=\"flight_assistant\"\n)\nhotel_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[book_hotel, transfer_to_flight_assistant],\n    prompt=\"You are a hotel booking assistant\",\n    # highlight-next-line\n    name=\"hotel_assistant\"\n)\n\n# \u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nmulti_agent_graph = (\n    StateGraph(MessagesState)\n    .add_node(flight_assistant)\n    .add_node(hotel_assistant)\n    .add_edge(START, \"flight_assistant\")\n    .compile()\n)\n\n# \u8fd0\u884c\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nfor chunk in multi_agent_graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"book a flight from BOS to JFK and a stay at McKittrick Hotel\"\n            }\n        ]\n    }\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <ol> <li>\u8bbf\u95ee\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001</li> <li><code>Command</code> \u539f\u8bed\u5141\u8bb8\u5c06\u72b6\u6001\u66f4\u65b0\u548c\u8282\u70b9\u8f6c\u6362\u6307\u5b9a\u4e3a\u5355\u4e2a\u64cd\u4f5c,\u4f7f\u5176\u5bf9\u5b9e\u73b0\u4ea4\u63a5\u5f88\u6709\u7528\u3002</li> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4ee3\u7406\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4ee3\u7406\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec**\u6dfb\u52a0**\u5230\u7236\u7ea7\u7684**\u72b6\u6001**\u4e2d\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u770b\u5230\u7236\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4ee3\u7406\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002</li> </ol> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport {\n  StateGraph,\n  START,\n  MessagesZodState,\n  Command,\n} from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nfunction createHandoffTool({\n  agentName,\n  description,\n}: {\n  agentName: string;\n  description?: string;\n}) {\n  const name = `transfer_to_${agentName}`;\n  const toolDescription = description || `Transfer to ${agentName}`;\n\n  return tool(\n    async (_, config) =&gt; {\n      const toolMessage = {\n        role: \"tool\" as const,\n        content: `Successfully transferred to ${agentName}`,\n        name: name,\n        tool_call_id: config.toolCall?.id!,\n      };\n      return new Command({\n        // (2)!\n        // highlight-next-line\n        goto: agentName, // (3)!\n        // highlight-next-line\n        update: { messages: [toolMessage] }, // (4)!\n        // highlight-next-line\n        graph: Command.PARENT, // (5)!\n      });\n    },\n    {\n      name,\n      description: toolDescription,\n      schema: z.object({}),\n    }\n  );\n}\n\n// \u4ea4\u63a5\nconst transferToHotelAssistant = createHandoffTool({\n  agentName: \"hotel_assistant\",\n  description: \"Transfer user to the hotel-booking assistant.\",\n});\n\nconst transferToFlightAssistant = createHandoffTool({\n  agentName: \"flight_assistant\",\n  description: \"Transfer user to the flight-booking assistant.\",\n});\n\n// \u7b80\u5355\u7684\u667a\u80fd\u4ee3\u7406\u5de5\u5177\nconst bookHotel = tool(\n  async ({ hotelName }) =&gt; {\n    /**\u9884\u8ba2\u9152\u5e97*/\n    return `Successfully booked a stay at ${hotelName}.`;\n  },\n  {\n    name: \"book_hotel\",\n    description: \"Book a hotel\",\n    schema: z.object({\n      hotelName: z.string().describe(\"Name of the hotel to book\"),\n    }),\n  }\n);\n\nconst bookFlight = tool(\n  async ({ fromAirport, toAirport }) =&gt; {\n    /**\u9884\u8ba2\u822a\u73ed*/\n    return `Successfully booked a flight from ${fromAirport} to ${toAirport}.`;\n  },\n  {\n    name: \"book_flight\",\n    description: \"Book a flight\",\n    schema: z.object({\n      fromAirport: z.string().describe(\"Departure airport code\"),\n      toAirport: z.string().describe(\"Arrival airport code\"),\n    }),\n  }\n);\n\n// \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\nconst flightAssistant = createReactAgent({\n  llm: new ChatAnthropic({ model: \"anthropic:claude-3-5-sonnet-latest\" }),\n  // highlight-next-line\n  tools: [bookFlight, transferToHotelAssistant],\n  stateModifier: \"You are a flight booking assistant\",\n  // highlight-next-line\n  name: \"flight_assistant\",\n});\n\nconst hotelAssistant = createReactAgent({\n  llm: new ChatAnthropic({ model: \"anthropic:claude-3-5-sonnet-latest\" }),\n  // highlight-next-line\n  tools: [bookHotel, transferToFlightAssistant],\n  stateModifier: \"You are a hotel booking assistant\",\n  // highlight-next-line\n  name: \"hotel_assistant\",\n});\n\n// \u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nconst multiAgentGraph = new StateGraph(MessagesZodState)\n  .addNode(\"flight_assistant\", flightAssistant)\n  .addNode(\"hotel_assistant\", hotelAssistant)\n  .addEdge(START, \"flight_assistant\")\n  .compile();\n\n// \u8fd0\u884c\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nfor await (const chunk of multiAgentGraph.stream({\n  messages: [\n    {\n      role: \"user\",\n      content: \"book a flight from BOS to JFK and a stay at McKittrick Hotel\",\n    },\n  ],\n})) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre> <ol> <li>\u8bbf\u95ee\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001</li> <li><code>Command</code> \u539f\u8bed\u5141\u8bb8\u5c06\u72b6\u6001\u66f4\u65b0\u548c\u8282\u70b9\u8f6c\u6362\u6307\u5b9a\u4e3a\u5355\u4e2a\u64cd\u4f5c,\u4f7f\u5176\u5bf9\u5b9e\u73b0\u4ea4\u63a5\u5f88\u6709\u7528\u3002</li> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4ee3\u7406\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4ee3\u7406\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec**\u6dfb\u52a0**\u5230\u7236\u7ea7\u7684**\u72b6\u6001**\u4e2d\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u770b\u5230\u7236\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4ee3\u7406\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002</li> </ol> <p>Note</p> <p>\u6b64\u4ea4\u63a5\u5b9e\u73b0\u5047\u8bbe:</p> <ul> <li>\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u63a5\u6536\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d\u6240\u6709\u667a\u80fd\u4ee3\u7406\u7684\u6574\u4f53\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u4f5c\u4e3a\u5176\u8f93\u5165</li> <li>\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u5176\u5185\u90e8\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u8f93\u51fa\u5230\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u6574\u4f53\u6d88\u606f\u5386\u53f2\u8bb0\u5f55</li> </ul> Python <p>\u67e5\u770b LangGraph \u76d1\u7763\u8005\u548c\u96c6\u7fa4\u6587\u6863,\u4e86\u89e3\u5982\u4f55\u81ea\u5b9a\u4e49\u4ea4\u63a5\u3002</p> JavaScript <p>\u67e5\u770b LangGraph \u76d1\u7763\u8005\u548c\u96c6\u7fa4\u6587\u6863,\u4e86\u89e3\u5982\u4f55\u81ea\u5b9a\u4e49\u4ea4\u63a5\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/overview/","title":"\u4f7f\u7528\u9884\u6784\u5efa\u7ec4\u4ef6\u8fdb\u884c\u667a\u80fd\u4ee3\u7406\u5f00\u53d1","text":"<p>LangGraph \u63d0\u4f9b\u4e86\u4f4e\u7ea7\u539f\u8bed\u548c\u9ad8\u7ea7\u9884\u6784\u5efa\u7ec4\u4ef6,\u7528\u4e8e\u6784\u5efa\u57fa\u4e8e\u667a\u80fd\u4ee3\u7406\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u672c\u8282\u91cd\u70b9\u4ecb\u7ecd\u9884\u6784\u5efa\u7684\u5373\u7528\u578b\u7ec4\u4ef6,\u65e8\u5728\u5e2e\u52a9\u4f60\u5feb\u901f\u53ef\u9760\u5730\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u2014\u2014\u65e0\u9700\u4ece\u5934\u5b9e\u73b0\u7f16\u6392\u3001\u8bb0\u5fc6\u6216\u4eba\u5de5\u53cd\u9988\u5904\u7406\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/overview/#_2","title":"\u4ec0\u4e48\u662f\u667a\u80fd\u4ee3\u7406?","text":"<p>_\u667a\u80fd\u4ee3\u7406_\u7531\u4e09\u4e2a\u7ec4\u4ef6\u7ec4\u6210:\u5927\u578b\u8bed\u8a00\u6a21\u578b (LLM)\u3001\u5b83\u53ef\u4ee5\u4f7f\u7528\u7684\u4e00\u7ec4**\u5de5\u5177**\u4ee5\u53ca\u63d0\u4f9b\u6307\u4ee4\u7684**\u63d0\u793a**\u3002</p> <p>LLM \u5728\u5faa\u73af\u4e2d\u8fd0\u884c\u3002\u5728\u6bcf\u6b21\u8fed\u4ee3\u4e2d,\u5b83\u9009\u62e9\u8981\u8c03\u7528\u7684\u5de5\u5177,\u63d0\u4f9b\u8f93\u5165,\u63a5\u6536\u7ed3\u679c(\u89c2\u5bdf),\u5e76\u4f7f\u7528\u8be5\u89c2\u5bdf\u6765\u901a\u77e5\u4e0b\u4e00\u4e2a\u64cd\u4f5c\u3002\u5faa\u73af\u7ee7\u7eed,\u76f4\u5230\u6ee1\u8db3\u505c\u6b62\u6761\u4ef6 \u2014 \u901a\u5e38\u662f\u5f53\u667a\u80fd\u4ee3\u7406\u6536\u96c6\u4e86\u8db3\u591f\u7684\u4fe1\u606f\u6765\u54cd\u5e94\u7528\u6237\u65f6\u3002</p> <p></p> \u667a\u80fd\u4ee3\u7406\u5faa\u73af:LLM \u9009\u62e9\u5de5\u5177\u5e76\u4f7f\u7528\u5b83\u4eec\u7684\u8f93\u51fa\u6765\u5b8c\u6210\u7528\u6237\u8bf7\u6c42\u3002","tags":["agent"],"boost":2},{"location":"agents/overview/#_3","title":"\u5173\u952e\u7279\u6027","text":"<p>LangGraph \u5305\u542b\u51e0\u4e2a\u5bf9\u6784\u5efa\u5065\u58ee\u7684\u3001\u53ef\u7528\u4e8e\u751f\u4ea7\u7684\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u81f3\u5173\u91cd\u8981\u7684\u529f\u80fd:</p> <ul> <li>\u8bb0\u5fc6\u96c6\u6210: \u539f\u751f\u652f\u6301_\u77ed\u671f_(\u57fa\u4e8e\u4f1a\u8bdd)\u548c_\u957f\u671f_(\u8de8\u4f1a\u8bdd\u6301\u4e45\u5316)\u8bb0\u5fc6,\u5728\u804a\u5929\u673a\u5668\u4eba\u548c\u52a9\u624b\u4e2d\u542f\u7528\u6709\u72b6\u6001\u884c\u4e3a\u3002</li> <li>\u4eba\u5de5\u5e72\u9884\u63a7\u5236: \u6267\u884c\u53ef\u4ee5_\u65e0\u9650\u671f_\u6682\u505c\u4ee5\u7b49\u5f85\u4eba\u5de5\u53cd\u9988\u2014\u2014\u4e0d\u50cf\u57fa\u4e8e websocket \u7684\u89e3\u51b3\u65b9\u6848\u4ec5\u9650\u4e8e\u5b9e\u65f6\u4ea4\u4e92\u3002\u8fd9\u4f7f\u5f97\u5728\u5de5\u4f5c\u6d41\u7684\u4efb\u4f55\u70b9\u90fd\u53ef\u4ee5\u8fdb\u884c\u5f02\u6b65\u6279\u51c6\u3001\u66f4\u6b63\u6216\u5e72\u9884\u3002</li> <li>\u6d41\u5f0f\u4f20\u8f93\u652f\u6301: \u5b9e\u65f6\u6d41\u5f0f\u4f20\u8f93\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3001\u6a21\u578b\u6807\u8bb0\u3001\u5de5\u5177\u8f93\u51fa\u6216\u7ec4\u5408\u6d41\u3002</li> <li>\u90e8\u7f72\u5de5\u5177: \u5305\u542b\u65e0\u9700\u57fa\u7840\u8bbe\u65bd\u7684\u90e8\u7f72\u5de5\u5177\u3002LangGraph Platform \u652f\u6301\u6d4b\u8bd5\u3001\u8c03\u8bd5\u548c\u90e8\u7f72\u3002</li> <li>Studio: \u7528\u4e8e\u68c0\u67e5\u548c\u8c03\u8bd5\u5de5\u4f5c\u6d41\u7684\u53ef\u89c6\u5316 IDE\u3002</li> <li>\u652f\u6301\u591a\u79cd\u751f\u4ea7\u90e8\u7f72\u9009\u9879\u3002</li> </ul>","tags":["agent"],"boost":2},{"location":"agents/overview/#_4","title":"\u9ad8\u7ea7\u6784\u5efa\u5757","text":"<p>LangGraph \u5e26\u6709\u4e00\u7ec4\u9884\u6784\u5efa\u7ec4\u4ef6,\u5b9e\u73b0\u5e38\u89c1\u7684\u667a\u80fd\u4ee3\u7406\u884c\u4e3a\u548c\u5de5\u4f5c\u6d41\u3002\u8fd9\u4e9b\u62bd\u8c61\u5efa\u7acb\u5728 LangGraph \u6846\u67b6\u4e4b\u4e0a,\u63d0\u4f9b\u66f4\u5feb\u7684\u751f\u4ea7\u8def\u5f84,\u540c\u65f6\u4fdd\u6301\u9ad8\u7ea7\u81ea\u5b9a\u4e49\u7684\u7075\u6d3b\u6027\u3002</p> <p>\u4f7f\u7528 LangGraph \u8fdb\u884c\u667a\u80fd\u4ee3\u7406\u5f00\u53d1\u53ef\u4ee5\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u903b\u8f91\u548c\u884c\u4e3a,\u800c\u4e0d\u662f\u6784\u5efa\u548c\u7ef4\u62a4\u72b6\u6001\u3001\u8bb0\u5fc6\u548c\u4eba\u5de5\u53cd\u9988\u7684\u652f\u6301\u57fa\u7840\u8bbe\u65bd\u3002</p> Python","tags":["agent"],"boost":2},{"location":"agents/overview/#_5","title":"\u5305\u751f\u6001\u7cfb\u7edf","text":"<p>\u9ad8\u7ea7\u7ec4\u4ef6\u7ec4\u7ec7\u6210\u51e0\u4e2a\u5305,\u6bcf\u4e2a\u5305\u90fd\u6709\u7279\u5b9a\u7684\u91cd\u70b9\u3002</p> \u5305 \u63cf\u8ff0 \u5b89\u88c5 <code>langgraph-prebuilt</code> (part of <code>langgraph</code>) \u7528\u4e8e\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u7684\u9884\u6784\u5efa\u7ec4\u4ef6 <code>pip install -U langgraph langchain</code> <code>langgraph-supervisor</code> \u7528\u4e8e\u6784\u5efa\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u7684\u5de5\u5177 <code>pip install -U langgraph-supervisor</code> <code>langgraph-swarm</code> \u7528\u4e8e\u6784\u5efa\u96c6\u7fa4\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u5de5\u5177 <code>pip install -U langgraph-swarm</code> <code>langchain-mcp-adapters</code> \u7528\u4e8e\u5de5\u5177\u548c\u8d44\u6e90\u96c6\u6210\u7684MCP \u670d\u52a1\u5668\u63a5\u53e3 <code>pip install -U langchain-mcp-adapters</code> <code>langmem</code> \u667a\u80fd\u4ee3\u7406\u8bb0\u5fc6\u7ba1\u7406:\u77ed\u671f\u548c\u957f\u671f <code>pip install -U langmem</code> <code>agentevals</code> \u8bc4\u4f30\u667a\u80fd\u4ee3\u7406\u6027\u80fd\u7684\u5b9e\u7528\u7a0b\u5e8f <code>pip install -U agentevals</code>","tags":["agent"],"boost":2},{"location":"agents/overview/#_6","title":"\u53ef\u89c6\u5316\u667a\u80fd\u4ee3\u7406\u56fe","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\u6765\u53ef\u89c6\u5316\u7531 @[<code>create_react_agent</code>][] \u751f\u6210\u7684\u56fe,\u5e76\u67e5\u770b\u76f8\u5e94\u4ee3\u7801\u7684\u5927\u7eb2\u3002\u5b83\u5141\u8bb8\u4f60\u63a2\u7d22\u7531\u4ee5\u4e0b\u5185\u5bb9\u5b9a\u4e49\u7684\u667a\u80fd\u4ee3\u7406\u57fa\u7840\u8bbe\u65bd:</p> <ul> <li><code>tools</code>: \u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u7528\u6765\u6267\u884c\u4efb\u52a1\u7684\u5de5\u5177\u5217\u8868(\u51fd\u6570\u3001API \u6216\u5176\u4ed6\u53ef\u8c03\u7528\u5bf9\u8c61)\u3002</li> <li><code>pre_model_hook</code>: \u5728\u8c03\u7528\u6a21\u578b\u4e4b\u524d\u8c03\u7528\u7684\u51fd\u6570\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u538b\u7f29\u6d88\u606f\u6216\u6267\u884c\u5176\u4ed6\u9884\u5904\u7406\u4efb\u52a1\u3002</li> <li><code>post_model_hook</code>: \u5728\u8c03\u7528\u6a21\u578b\u4e4b\u540e\u8c03\u7528\u7684\u51fd\u6570\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u62a4\u680f\u3001\u4eba\u5de5\u5e72\u9884\u6d41\u7a0b\u6216\u5176\u4ed6\u540e\u5904\u7406\u4efb\u52a1\u3002</li> <li><code>response_format</code>: \u7528\u4e8e\u7ea6\u675f\u6700\u7ec8\u8f93\u51fa\u7c7b\u578b\u7684\u6570\u636e\u7ed3\u6784,\u4f8b\u5982 <code>pydantic</code> <code>BaseModel</code>\u3002</li> </ul> \u529f\u80fd <code>tools</code> <code>pre_model_hook</code> <code>post_model_hook</code> <code>response_format</code> \u56fe <p>\u4ee5\u4e0b\u4ee3\u7801\u7247\u6bb5\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 @[<code>create_react_agent</code>][] \u521b\u5efa\u4e0a\u8ff0\u667a\u80fd\u4ee3\u7406(\u53ca\u5176\u5e95\u5c42\u56fe):</p> <pre><code></code></pre> JavaScript","tags":["agent"],"boost":2},{"location":"agents/overview/#_7","title":"\u5305\u751f\u6001\u7cfb\u7edf","text":"<p>\u9ad8\u7ea7\u7ec4\u4ef6\u7ec4\u7ec7\u6210\u51e0\u4e2a\u5305,\u6bcf\u4e2a\u5305\u90fd\u6709\u7279\u5b9a\u7684\u91cd\u70b9\u3002</p> \u5305 \u63cf\u8ff0 \u5b89\u88c5 <code>langgraph</code> \u7528\u4e8e\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u7684\u9884\u6784\u5efa\u7ec4\u4ef6 <code>npm install @langchain/langgraph @langchain/core</code> <code>langgraph-supervisor</code> \u7528\u4e8e\u6784\u5efa\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u7684\u5de5\u5177 <code>npm install @langchain/langgraph-supervisor</code> <code>langgraph-swarm</code> \u7528\u4e8e\u6784\u5efa\u96c6\u7fa4\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u5de5\u5177 <code>npm install @langchain/langgraph-swarm</code> <code>langchain-mcp-adapters</code> \u7528\u4e8e\u5de5\u5177\u548c\u8d44\u6e90\u96c6\u6210\u7684MCP \u670d\u52a1\u5668\u63a5\u53e3 <code>npm install @langchain/mcp-adapters</code> <code>agentevals</code> \u8bc4\u4f30\u667a\u80fd\u4ee3\u7406\u6027\u80fd\u7684\u5b9e\u7528\u7a0b\u5e8f <code>npm install agentevals</code>","tags":["agent"],"boost":2},{"location":"agents/overview/#_8","title":"\u53ef\u89c6\u5316\u667a\u80fd\u4ee3\u7406\u56fe","text":"<p>\u4f7f\u7528\u4ee5\u4e0b\u5de5\u5177\u6765\u53ef\u89c6\u5316\u7531 @[<code>createReactAgent</code>][create_react_agent] \u751f\u6210\u7684\u56fe,\u5e76\u67e5\u770b\u76f8\u5e94\u4ee3\u7801\u7684\u5927\u7eb2\u3002\u5b83\u5141\u8bb8\u4f60\u63a2\u7d22\u7531\u4ee5\u4e0b\u5185\u5bb9\u5b9a\u4e49\u7684\u667a\u80fd\u4ee3\u7406\u57fa\u7840\u8bbe\u65bd:</p> <ul> <li><code>tools</code>: \u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u7528\u6765\u6267\u884c\u4efb\u52a1\u7684\u5de5\u5177\u5217\u8868(\u51fd\u6570\u3001API \u6216\u5176\u4ed6\u53ef\u8c03\u7528\u5bf9\u8c61)\u3002</li> <li><code>preModelHook</code>: \u5728\u8c03\u7528\u6a21\u578b\u4e4b\u524d\u8c03\u7528\u7684\u51fd\u6570\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u538b\u7f29\u6d88\u606f\u6216\u6267\u884c\u5176\u4ed6\u9884\u5904\u7406\u4efb\u52a1\u3002</li> <li><code>postModelHook</code>: \u5728\u8c03\u7528\u6a21\u578b\u4e4b\u540e\u8c03\u7528\u7684\u51fd\u6570\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u5b9e\u73b0\u62a4\u680f\u3001\u4eba\u5de5\u5e72\u9884\u6d41\u7a0b\u6216\u5176\u4ed6\u540e\u5904\u7406\u4efb\u52a1\u3002</li> <li><code>responseFormat</code>: \u7528\u4e8e\u7ea6\u675f\u6700\u7ec8\u8f93\u51fa\u7c7b\u578b\u7684\u6570\u636e\u7ed3\u6784(\u901a\u8fc7 Zod \u6a21\u5f0f)\u3002</li> </ul> \u529f\u80fd <code>tools</code> <code>preModelHook</code> <code>postModelHook</code> <code>responseFormat</code> \u56fe <p>\u4ee5\u4e0b\u4ee3\u7801\u7247\u6bb5\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 @[<code>createReactAgent</code>][create_react_agent] \u521b\u5efa\u4e0a\u8ff0\u667a\u80fd\u4ee3\u7406(\u53ca\u5176\u5e95\u5c42\u56fe):</p> <pre><code></code></pre>","tags":["agent"],"boost":2},{"location":"agents/prebuilt/","title":"\u793e\u533a\u667a\u80fd\u4ee3\u7406","text":"<p>\u5982\u679c\u4f60\u6b63\u5728\u5bfb\u627e\u5176\u4ed6\u9884\u6784\u5efa\u5e93,\u8bf7\u63a2\u7d22\u4e0b\u9762\u7684\u793e\u533a\u6784\u5efa\u9009\u9879\u3002\u8fd9\u4e9b\u5e93\u53ef\u4ee5\u4ee5\u5404\u79cd\u65b9\u5f0f\u6269\u5c55 LangGraph \u7684\u529f\u80fd\u3002</p>"},{"location":"agents/prebuilt/#_2","title":"\ud83d\udcda \u53ef\u7528\u5e93","text":"Python \u540d\u79f0 GitHub URL \u63cf\u8ff0 \u6bcf\u5468\u4e0b\u8f7d\u91cf Stars trustcall https://github.com/hinthornw/trustcall \u5efa\u7acb\u5728 LangGraph \u4e4b\u4e0a\u7684\u987d\u5f3a\u5de5\u5177\u8c03\u7528\u3002 -12345 breeze-agent https://github.com/andrestorres123/breeze-agent \u53d7 STORM \u542f\u53d1\u5e76\u5efa\u7acb\u5728 LangGraph \u4e4b\u4e0a\u7684\u7cbe\u7b80\u7814\u7a76\u7cfb\u7edf\u3002 -12345 langgraph-supervisor https://github.com/langchain-ai/langgraph-supervisor-py \u4f7f\u7528 LangGraph \u6784\u5efa\u76d1\u7763\u8005\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002 -12345 langmem https://github.com/langchain-ai/langmem \u6784\u5efa\u968f\u7740\u65f6\u95f4\u63a8\u79fb\u4ece\u4ea4\u4e92\u4e2d\u5b66\u4e60\u548c\u9002\u5e94\u7684\u667a\u80fd\u4ee3\u7406\u3002 -12345 langchain-mcp-adapters https://github.com/langchain-ai/langchain-mcp-adapters \u4f7f Anthropic \u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae (MCP) \u5de5\u5177\u4e0e LangGraph \u667a\u80fd\u4ee3\u7406\u517c\u5bb9\u3002 -12345 open-deep-research https://github.com/langchain-ai/open_deep_research \u7528\u4e8e\u8fed\u4ee3\u7f51\u7edc\u7814\u7a76\u548c\u62a5\u544a\u64b0\u5199\u7684\u5f00\u6e90\u52a9\u624b\u3002 -12345 langgraph-swarm https://github.com/langchain-ai/langgraph-swarm-py \u4f7f\u7528 LangGraph \u6784\u5efa\u96c6\u7fa4\u5f0f\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002 -12345 delve-taxonomy-generator https://github.com/andrestorres123/delve \u7528\u4e8e\u975e\u7ed3\u6784\u5316\u6570\u636e\u7684\u5206\u7c7b\u751f\u6210\u5668 -12345 nodeology https://github.com/xyin-anl/Nodeology \u4f7f\u7814\u7a76\u4eba\u5458\u80fd\u591f\u4f7f\u7528\u7b80\u5316\u7684\u754c\u9762\u8f7b\u677e\u6784\u5efa\u79d1\u5b66\u5de5\u4f5c\u6d41\u3002 -12345 langgraph-bigtool https://github.com/langchain-ai/langgraph-bigtool \u6784\u5efa\u5177\u6709\u5927\u91cf\u5de5\u5177\u7684 LangGraph \u667a\u80fd\u4ee3\u7406\u3002 -12345 ai-data-science-team https://github.com/business-science/ai-data-science-team \u7531 AI \u9a71\u52a8\u7684\u6570\u636e\u79d1\u5b66\u667a\u80fd\u4ee3\u7406\u56e2\u961f,\u5e2e\u52a9\u4f60\u4ee5 10 \u500d\u901f\u5ea6\u6267\u884c\u5e38\u89c1\u6570\u636e\u79d1\u5b66\u4efb\u52a1\u3002 -12345 langgraph-reflection https://github.com/langchain-ai/langgraph-reflection \u8fd0\u884c\u53cd\u601d\u6b65\u9aa4\u7684 LangGraph \u667a\u80fd\u4ee3\u7406\u3002 -12345 langgraph-codeact https://github.com/langchain-ai/langgraph-codeact \u751f\u6210\u548c\u6267\u884c\u4ee3\u7801\u800c\u4e0d\u662f\u5de5\u5177\u8c03\u7528\u7684 CodeAct \u667a\u80fd\u4ee3\u7406\u7684 LangGraph \u5b9e\u73b0\u3002 -12345"},{"location":"agents/prebuilt/#_3","title":"\u2728 \u8d21\u732e\u4f60\u7684\u5e93","text":"<p>\u4f60\u662f\u5426\u4f7f\u7528 LangGraph \u6784\u5efa\u4e86\u5f88\u68d2\u7684\u5f00\u6e90\u5e93?\u6211\u4eec\u5f88\u4e50\u610f\u5728 LangGraph \u5b98\u65b9\u6587\u6863\u9875\u9762\u4e0a\u5c55\u793a\u4f60\u7684\u9879\u76ee!\ud83c\udfc6</p> <p>\u8981\u5206\u4eab\u4f60\u7684\u9879\u76ee,\u53ea\u9700\u6253\u5f00\u4e00\u4e2a Pull Request,\u5728\u6211\u4eec\u7684 packages.yml \u6587\u4ef6\u4e2d\u4e3a\u4f60\u7684\u5305\u6dfb\u52a0\u4e00\u4e2a\u6761\u76ee\u3002</p> <p>\u6307\u5357</p> <ul> <li>\u4f60\u7684\u4ed3\u5e93\u5fc5\u987b\u4f5c\u4e3a\u53ef\u5b89\u88c5\u5305\u5206\u53d1\u5728 PyPI \u4e0a \ud83d\udce6</li> <li>\u4ed3\u5e93\u5e94\u8be5\u4f7f\u7528 Graph API(\u66b4\u9732 <code>StateGraph</code> \u5b9e\u4f8b)\u6216   Functional API(\u66b4\u9732 <code>entrypoint</code>)\u3002</li> <li>\u5305\u5fc5\u987b\u5305\u542b\u6587\u6863(\u4f8b\u5982 <code>README.md</code> \u6216\u6587\u6863\u7ad9\u70b9)   \u89e3\u91ca\u5982\u4f55\u4f7f\u7528\u5b83\u3002</li> </ul> <p>\u6211\u4eec\u5c06\u5ba1\u67e5\u4f60\u7684\u8d21\u732e\u5e76\u5408\u5e76\u8fdb\u6765!</p> <p>\u611f\u8c22\u8d21\u732e!\ud83d\ude80</p> JavaScript \u540d\u79f0 GitHub URL \u63cf\u8ff0 \u6bcf\u5468\u4e0b\u8f7d\u91cf Stars @langchain/mcp-adapters https://github.com/langchain-ai/langchainjs \u4f7f Anthropic \u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae (MCP) \u5de5\u5177\u4e0e LangGraph \u667a\u80fd\u4ee3\u7406\u517c\u5bb9\u3002 -12345 @langchain/langgraph-supervisor https://github.com/langchain-ai/langgraphjs/tree/main/libs/langgraph-supervisor \u4f7f\u7528 LangGraph \u6784\u5efa\u76d1\u7763\u8005\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf -12345 @langchain/langgraph-swarm https://github.com/langchain-ai/langgraphjs/tree/main/libs/langgraph-swarm \u4f7f\u7528 LangGraph \u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u96c6\u7fa4 -12345 @langchain/langgraph-cua https://github.com/langchain-ai/langgraphjs/tree/main/libs/langgraph-cua \u4f7f\u7528 LangGraph \u6784\u5efa\u8ba1\u7b97\u673a\u4f7f\u7528\u667a\u80fd\u4ee3\u7406 -12345"},{"location":"agents/prebuilt/#_4","title":"\u2728 \u8d21\u732e\u4f60\u7684\u5e93","text":"<p>\u4f60\u662f\u5426\u4f7f\u7528 LangGraph \u6784\u5efa\u4e86\u5f88\u68d2\u7684\u5f00\u6e90\u5e93?\u6211\u4eec\u5f88\u4e50\u610f\u5728 LangGraph \u5b98\u65b9\u6587\u6863\u9875\u9762\u4e0a\u5c55\u793a\u4f60\u7684\u9879\u76ee!\ud83c\udfc6</p> <p>\u8981\u5206\u4eab\u4f60\u7684\u9879\u76ee,\u53ea\u9700\u6253\u5f00\u4e00\u4e2a Pull Request,\u5728\u6211\u4eec\u7684 packages.yml \u6587\u4ef6\u4e2d\u4e3a\u4f60\u7684\u5305\u6dfb\u52a0\u4e00\u4e2a\u6761\u76ee\u3002</p> <p>\u6307\u5357</p> <ul> <li>\u4f60\u7684\u4ed3\u5e93\u5fc5\u987b\u4f5c\u4e3a\u53ef\u5b89\u88c5\u5305\u5206\u53d1\u5728 npm \u4e0a \ud83d\udce6</li> <li>\u4ed3\u5e93\u5e94\u8be5\u4f7f\u7528 Graph API(\u66b4\u9732 <code>StateGraph</code> \u5b9e\u4f8b)\u6216   Functional API(\u66b4\u9732 <code>entrypoint</code>)\u3002</li> <li>\u5305\u5fc5\u987b\u5305\u542b\u6587\u6863(\u4f8b\u5982 <code>README.md</code> \u6216\u6587\u6863\u7ad9\u70b9)   \u89e3\u91ca\u5982\u4f55\u4f7f\u7528\u5b83\u3002</li> </ul> <p>\u6211\u4eec\u5c06\u5ba1\u67e5\u4f60\u7684\u8d21\u732e\u5e76\u5408\u5e76\u8fdb\u6765!</p> <p>\u611f\u8c22\u8d21\u732e!\ud83d\ude80</p>"},{"location":"agents/run_agents/","title":"\u8fd0\u884c\u667a\u80fd\u4ee3\u7406","text":"<p>\u667a\u80fd\u4ee3\u7406\u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65\u6267\u884c,\u4f7f\u7528 <code>.invoke()</code> / <code>await .ainvoke()</code> \u83b7\u53d6\u5b8c\u6574\u54cd\u5e94,\u6216\u4f7f\u7528 <code>.stream()</code> / <code>.astream()</code> \u83b7\u53d6**\u589e\u91cf**\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002\u672c\u8282\u8bf4\u660e\u5982\u4f55\u63d0\u4f9b\u8f93\u5165\u3001\u89e3\u91ca\u8f93\u51fa\u3001\u542f\u7528\u6d41\u5f0f\u4f20\u8f93\u4ee5\u53ca\u63a7\u5236\u6267\u884c\u9650\u5236\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_2","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u5728\u4e24\u79cd\u4e3b\u8981\u6a21\u5f0f\u4e0b\u6267\u884c:</p> Python <ul> <li>**\u540c\u6b65**\u4f7f\u7528 <code>.invoke()</code> \u6216 <code>.stream()</code></li> <li>**\u5f02\u6b65**\u4f7f\u7528 <code>await .ainvoke()</code> \u6216 <code>async for</code> \u4e0e <code>.astream()</code></li> </ul> JavaScript <ul> <li>**\u540c\u6b65**\u4f7f\u7528 <code>.invoke()</code> \u6216 <code>.stream()</code></li> <li>**\u5f02\u6b65**\u4f7f\u7528 <code>await .invoke()</code> \u6216 <code>for await</code> \u4e0e <code>.stream()</code></li> </ul> Python\u540c\u6b65\u8c03\u7528\u5f02\u6b65\u8c03\u7528JavaScript <pre><code>from langgraph.prebuilt import create_react_agent\n\nagent = create_react_agent(...)\n\n# highlight-next-line\nresponse = agent.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]})\n</code></pre> <pre><code>from langgraph.prebuilt import create_react_agent\n\nagent = create_react_agent(...)\n# highlight-next-line\nresponse = await agent.ainvoke({\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]})\n</code></pre> <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst agent = createReactAgent(...);\n// highlight-next-line\nconst response = await agent.invoke({\n    \"messages\": [\n        { \"role\": \"user\", \"content\": \"what is the weather in sf\" }\n    ]\n});\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_3","title":"\u8f93\u5165\u548c\u8f93\u51fa","text":"<p>\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u8bed\u8a00\u6a21\u578b,\u8be5\u6a21\u578b\u671f\u671b\u8f93\u5165\u662f <code>messages</code> \u5217\u8868\u3002\u56e0\u6b64,\u667a\u80fd\u4ee3\u7406\u7684\u8f93\u5165\u548c\u8f93\u51fa\u5b58\u50a8\u4e3a\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u4e2d <code>messages</code> \u952e\u4e0b\u7684 <code>messages</code> \u5217\u8868\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_4","title":"\u8f93\u5165\u683c\u5f0f","text":"<p>\u667a\u80fd\u4ee3\u7406\u8f93\u5165\u5fc5\u987b\u662f\u5e26\u6709 <code>messages</code> \u952e\u7684\u5b57\u5178\u3002\u652f\u6301\u7684\u683c\u5f0f\u6709:</p> Python \u683c\u5f0f \u793a\u4f8b \u5b57\u7b26\u4e32 <code>{\"messages\": \"Hello\"}</code> \u2014 \u89e3\u91ca\u4e3a HumanMessage \u6d88\u606f\u5b57\u5178 <code>{\"messages\": {\"role\": \"user\", \"content\": \"Hello\"}}</code> \u6d88\u606f\u5217\u8868 <code>{\"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}</code> \u5e26\u81ea\u5b9a\u4e49\u72b6\u6001 <code>{\"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}], \"user_name\": \"Alice\"}</code> \u2014 \u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49 <code>state_schema</code> JavaScript \u683c\u5f0f \u793a\u4f8b \u5b57\u7b26\u4e32 <code>{\"messages\": \"Hello\"}</code> \u2014 \u89e3\u91ca\u4e3a HumanMessage \u6d88\u606f\u5b57\u5178 <code>{\"messages\": {\"role\": \"user\", \"content\": \"Hello\"}}</code> \u6d88\u606f\u5217\u8868 <code>{\"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}]}</code> \u5e26\u81ea\u5b9a\u4e49\u72b6\u6001 <code>{\"messages\": [{\"role\": \"user\", \"content\": \"Hello\"}], \"user_name\": \"Alice\"}</code> \u2014 \u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u72b6\u6001\u5b9a\u4e49 Python <p>\u6d88\u606f\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a LangChain \u7684\u5185\u90e8\u6d88\u606f\u683c\u5f0f\u3002\u4f60\u53ef\u4ee5\u5728 LangChain \u6587\u6863\u4e2d\u9605\u8bfb\u66f4\u591a\u5173\u4e8e LangChain \u6d88\u606f\u7684\u4fe1\u606f\u3002</p> JavaScript <p>\u6d88\u606f\u4f1a\u81ea\u52a8\u8f6c\u6362\u4e3a LangChain \u7684\u5185\u90e8\u6d88\u606f\u683c\u5f0f\u3002\u4f60\u53ef\u4ee5\u5728 LangChain \u6587\u6863\u4e2d\u9605\u8bfb\u66f4\u591a\u5173\u4e8e LangChain \u6d88\u606f\u7684\u4fe1\u606f\u3002</p> <p>\u4f7f\u7528\u81ea\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u72b6\u6001</p> Python <p>\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728\u8f93\u5165\u5b57\u5178\u4e2d\u63d0\u4f9b\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u6a21\u5f0f\u4e2d\u5b9a\u4e49\u7684\u5176\u4ed6\u5b57\u6bb5\u3002\u8fd9\u5141\u8bb8\u57fa\u4e8e\u8fd0\u884c\u65f6\u6570\u636e\u6216\u5148\u524d\u5de5\u5177\u8f93\u51fa\u7684\u52a8\u6001\u884c\u4e3a\u3002 \u6709\u5173\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u4e0a\u4e0b\u6587\u6307\u5357\u3002</p> JavaScript <p>\u4f60\u53ef\u4ee5\u76f4\u63a5\u5728\u72b6\u6001\u5b9a\u4e49\u4e2d\u63d0\u4f9b\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u4e2d\u5b9a\u4e49\u7684\u5176\u4ed6\u5b57\u6bb5\u3002\u8fd9\u5141\u8bb8\u57fa\u4e8e\u8fd0\u884c\u65f6\u6570\u636e\u6216\u5148\u524d\u5de5\u5177\u8f93\u51fa\u7684\u52a8\u6001\u884c\u4e3a\u3002 \u6709\u5173\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u4e0a\u4e0b\u6587\u6307\u5357\u3002</p> <p>Note</p> Python <p><code>messages</code> \u7684\u5b57\u7b26\u4e32\u8f93\u5165\u4f1a\u88ab\u8f6c\u6362\u4e3a HumanMessage\u3002\u6b64\u884c\u4e3a\u4e0e <code>create_react_agent</code> \u4e2d\u7684 <code>prompt</code> \u53c2\u6570\u4e0d\u540c,\u540e\u8005\u5728\u4f5c\u4e3a\u5b57\u7b26\u4e32\u4f20\u9012\u65f6\u88ab\u89e3\u91ca\u4e3a SystemMessage\u3002</p> JavaScript <p><code>messages</code> \u7684\u5b57\u7b26\u4e32\u8f93\u5165\u4f1a\u88ab\u8f6c\u6362\u4e3a HumanMessage\u3002\u6b64\u884c\u4e3a\u4e0e <code>createReactAgent</code> \u4e2d\u7684 <code>prompt</code> \u53c2\u6570\u4e0d\u540c,\u540e\u8005\u5728\u4f5c\u4e3a\u5b57\u7b26\u4e32\u4f20\u9012\u65f6\u88ab\u89e3\u91ca\u4e3a SystemMessage\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_5","title":"\u8f93\u51fa\u683c\u5f0f","text":"Python <p>\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\u662f\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u7684\u5b57\u5178:</p> <ul> <li><code>messages</code>: \u6267\u884c\u671f\u95f4\u4ea4\u6362\u7684\u6240\u6709\u6d88\u606f\u5217\u8868(\u7528\u6237\u8f93\u5165\u3001\u52a9\u624b\u56de\u590d\u3001\u5de5\u5177\u8c03\u7528)\u3002</li> <li>\u5982\u679c\u914d\u7f6e\u4e86\u7ed3\u6784\u5316\u8f93\u51fa,\u5219\u53ef\u9009\u5730\u5305\u542b <code>structured_response</code>\u3002</li> <li>\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49 <code>state_schema</code>,\u8f93\u51fa\u4e2d\u8fd8\u53ef\u80fd\u5b58\u5728\u4e0e\u4f60\u5b9a\u4e49\u7684\u5b57\u6bb5\u5bf9\u5e94\u7684\u5176\u4ed6\u952e\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4fdd\u5b58\u6765\u81ea\u5de5\u5177\u6267\u884c\u6216\u63d0\u793a\u903b\u8f91\u7684\u66f4\u65b0\u72b6\u6001\u503c\u3002</li> </ul> JavaScript <p>\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\u662f\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u7684\u5b57\u5178:</p> <ul> <li><code>messages</code>: \u6267\u884c\u671f\u95f4\u4ea4\u6362\u7684\u6240\u6709\u6d88\u606f\u5217\u8868(\u7528\u6237\u8f93\u5165\u3001\u52a9\u624b\u56de\u590d\u3001\u5de5\u5177\u8c03\u7528)\u3002</li> <li>\u5982\u679c\u914d\u7f6e\u4e86\u7ed3\u6784\u5316\u8f93\u51fa,\u5219\u53ef\u9009\u5730\u5305\u542b <code>structuredResponse</code>\u3002</li> <li>\u5982\u679c\u4f7f\u7528\u81ea\u5b9a\u4e49\u72b6\u6001\u5b9a\u4e49,\u8f93\u51fa\u4e2d\u8fd8\u53ef\u80fd\u5b58\u5728\u4e0e\u4f60\u5b9a\u4e49\u7684\u5b57\u6bb5\u5bf9\u5e94\u7684\u5176\u4ed6\u952e\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4fdd\u5b58\u6765\u81ea\u5de5\u5177\u6267\u884c\u6216\u63d0\u793a\u903b\u8f91\u7684\u66f4\u65b0\u72b6\u6001\u503c\u3002</li> </ul> <p>\u6709\u5173\u4f7f\u7528\u81ea\u5b9a\u4e49\u72b6\u6001\u6a21\u5f0f\u548c\u8bbf\u95ee\u4e0a\u4e0b\u6587\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u4e0a\u4e0b\u6587\u6307\u5357\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_6","title":"\u6d41\u5f0f\u8f93\u51fa","text":"<p>\u667a\u80fd\u4ee3\u7406\u652f\u6301\u6d41\u5f0f\u54cd\u5e94,\u4ee5\u5b9e\u73b0\u66f4\u5177\u54cd\u5e94\u6027\u7684\u5e94\u7528\u7a0b\u5e8f\u3002\u8fd9\u5305\u62ec:</p> <ul> <li>\u6bcf\u4e00\u6b65\u4e4b\u540e\u7684**\u8fdb\u5ea6\u66f4\u65b0**</li> <li>\u751f\u6210\u7684 LLM \u6807\u8bb0</li> <li>\u6267\u884c\u671f\u95f4\u7684**\u81ea\u5b9a\u4e49\u5de5\u5177\u6d88\u606f**</li> </ul> <p>\u6d41\u5f0f\u4f20\u8f93\u5728\u540c\u6b65\u548c\u5f02\u6b65\u6a21\u5f0f\u4e0b\u90fd\u53ef\u7528:</p> Python\u540c\u6b65\u6d41\u5f0f\u4f20\u8f93\u5f02\u6b65\u6d41\u5f0f\u4f20\u8f93JavaScript <pre><code>for chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    stream_mode=\"updates\"\n):\n    print(chunk)\n</code></pre> <pre><code>async for chunk in agent.astream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    stream_mode=\"updates\"\n):\n    print(chunk)\n</code></pre> <pre><code>for await (const chunk of agent.stream(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  { streamMode: \"updates\" }\n)) {\n  console.log(chunk);\n}\n</code></pre> <p>Tip</p> <p>\u6709\u5173\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u6d41\u5f0f\u4f20\u8f93\u6307\u5357\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_7","title":"\u6700\u5927\u8fed\u4ee3","text":"Python <p>\u8981\u63a7\u5236\u667a\u80fd\u4ee3\u7406\u6267\u884c\u5e76\u907f\u514d\u65e0\u9650\u5faa\u73af,\u8bf7\u8bbe\u7f6e\u9012\u5f52\u9650\u5236\u3002\u8fd9\u5b9a\u4e49\u4e86\u667a\u80fd\u4ee3\u7406\u5728\u5f15\u53d1 <code>GraphRecursionError</code> \u4e4b\u524d\u53ef\u4ee5\u91c7\u53d6\u7684\u6700\u5927\u6b65\u9aa4\u6570\u3002\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u914d\u7f6e <code>recursion_limit</code>,\u6216\u5728\u901a\u8fc7 <code>.with_config()</code> \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u65f6\u914d\u7f6e:</p> JavaScript <p>\u8981\u63a7\u5236\u667a\u80fd\u4ee3\u7406\u6267\u884c\u5e76\u907f\u514d\u65e0\u9650\u5faa\u73af,\u8bf7\u8bbe\u7f6e\u9012\u5f52\u9650\u5236\u3002\u8fd9\u5b9a\u4e49\u4e86\u667a\u80fd\u4ee3\u7406\u5728\u5f15\u53d1 <code>GraphRecursionError</code> \u4e4b\u524d\u53ef\u4ee5\u91c7\u53d6\u7684\u6700\u5927\u6b65\u9aa4\u6570\u3002\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u914d\u7f6e <code>recursionLimit</code>,\u6216\u5728\u901a\u8fc7 <code>.withConfig()</code> \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u65f6\u914d\u7f6e:</p> Python\u8fd0\u884c\u65f6<code>.with_config()</code>JavaScript\u8fd0\u884c\u65f6<code>.withConfig()</code>Python <pre><code>from langgraph.errors import GraphRecursionError\nfrom langgraph.prebuilt import create_react_agent\n\nmax_iterations = 3\n# highlight-next-line\nrecursion_limit = 2 * max_iterations + 1\nagent = create_react_agent(\n    model=\"anthropic:claude-3-5-haiku-latest\",\n    tools=[get_weather]\n)\n\ntry:\n    response = agent.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]},\n        # highlight-next-line\n        {\"recursion_limit\": recursion_limit},\n    )\nexcept GraphRecursionError:\n    print(\"Agent stopped due to max iterations.\")\n</code></pre> <pre><code>from langgraph.errors import GraphRecursionError\nfrom langgraph.prebuilt import create_react_agent\n\nmax_iterations = 3\n# highlight-next-line\nrecursion_limit = 2 * max_iterations + 1\nagent = create_react_agent(\n    model=\"anthropic:claude-3-5-haiku-latest\",\n    tools=[get_weather]\n)\n# highlight-next-line\nagent_with_recursion_limit = agent.with_config(recursion_limit=recursion_limit)\n\ntry:\n    response = agent_with_recursion_limit.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]},\n    )\nexcept GraphRecursionError:\n    print(\"Agent stopped due to max iterations.\")\n</code></pre> <pre><code>import { GraphRecursionError } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/langgraph/prebuilt\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst maxIterations = 3;\n// highlight-next-line\nconst recursionLimit = 2 * maxIterations + 1;\nconst agent = createReactAgent({\n    llm: new ChatAnthropic({ model: \"claude-3-5-haiku-latest\" }),\n    tools: [getWeather]\n});\n\ntry {\n    const response = await agent.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]},\n        // highlight-next-line\n        { recursionLimit }\n    );\n} catch (error) {\n    if (error instanceof GraphRecursionError) {\n        console.log(\"Agent stopped due to max iterations.\");\n    }\n}\n</code></pre> <pre><code>import { GraphRecursionError } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/langgraph/prebuilt\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst maxIterations = 3;\n// highlight-next-line\nconst recursionLimit = 2 * maxIterations + 1;\nconst agent = createReactAgent({\n    llm: new ChatAnthropic({ model: \"claude-3-5-haiku-latest\" }),\n    tools: [getWeather]\n});\n// highlight-next-line\nconst agentWithRecursionLimit = agent.withConfig({ recursionLimit });\n\ntry {\n    const response = await agentWithRecursionLimit.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]},\n    );\n} catch (error) {\n    if (error instanceof GraphRecursionError) {\n        console.log(\"Agent stopped due to max iterations.\");\n    }\n}\n</code></pre>","tags":["agent"],"boost":2},{"location":"agents/run_agents/#_8","title":"\u9644\u52a0\u8d44\u6e90","text":"<ul> <li>LangChain \u4e2d\u7684\u5f02\u6b65\u7f16\u7a0b</li> </ul>","tags":["agent"],"boost":2},{"location":"agents/ui/","title":"UI","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7 Agent Chat UI \u4f7f\u7528\u9884\u6784\u5efa\u7684\u804a\u5929 UI \u4e0e\u4efb\u4f55 LangGraph \u667a\u80fd\u4ee3\u7406\u8fdb\u884c\u4ea4\u4e92\u3002\u4f7f\u7528\u90e8\u7f72\u7248\u672c\u662f\u5f00\u59cb\u7684\u6700\u5feb\u65b9\u5f0f,\u5e76\u5141\u8bb8\u4f60\u4e0e\u672c\u5730\u548c\u5df2\u90e8\u7f72\u7684\u56fe\u8fdb\u884c\u4ea4\u4e92\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/ui/#ui_1","title":"\u5728 UI \u4e2d\u8fd0\u884c\u667a\u80fd\u4ee3\u7406","text":"<p>\u9996\u5148,\u5728\u672c\u5730\u8bbe\u7f6e LangGraph API \u670d\u52a1\u5668,\u6216\u5728 LangGraph Platform \u4e0a\u90e8\u7f72\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u3002</p> <p>\u7136\u540e,\u5bfc\u822a\u5230 Agent Chat UI,\u6216\u514b\u9686\u4ed3\u5e93\u5e76\u5728\u672c\u5730\u8fd0\u884c\u5f00\u53d1\u670d\u52a1\u5668:</p> <p>Tip</p> <p>UI \u5177\u6709\u5bf9\u6e32\u67d3\u5de5\u5177\u8c03\u7528\u548c\u5de5\u5177\u7ed3\u679c\u6d88\u606f\u7684\u5f00\u7bb1\u5373\u7528\u652f\u6301\u3002\u8981\u81ea\u5b9a\u4e49\u663e\u793a\u7684\u6d88\u606f,\u8bf7\u53c2\u9605 Agent Chat UI \u6587\u6863\u4e2d\u7684\u5728\u804a\u5929\u4e2d\u9690\u85cf\u6d88\u606f\u90e8\u5206\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/ui/#_1","title":"\u6dfb\u52a0\u4eba\u5de5\u5e72\u9884","text":"<p>Agent Chat UI \u5b8c\u5168\u652f\u6301\u4eba\u5de5\u5e72\u9884\u5de5\u4f5c\u6d41\u3002\u8981\u5c1d\u8bd5\u5b83,\u8bf7\u5c06 <code>src/agent/graph.py</code>(\u6765\u81ea\u90e8\u7f72\u6307\u5357)\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u4ee3\u7801\u66ff\u6362\u4e3a\u6b64\u667a\u80fd\u4ee3\u7406\u5b9e\u73b0:</p> <p>Important</p> <p>\u5982\u679c\u4f60\u7684 LangGraph \u667a\u80fd\u4ee3\u7406\u4f7f\u7528 @[<code>HumanInterrupt</code> \u6a21\u5f0f][HumanInterrupt]\u8fdb\u884c\u4e2d\u65ad,Agent Chat UI \u6548\u679c\u6700\u4f73\u3002\u5982\u679c\u4f60\u4e0d\u4f7f\u7528\u8be5\u6a21\u5f0f,Agent Chat UI \u5c06\u80fd\u591f\u6e32\u67d3\u4f20\u9012\u7ed9 <code>interrupt</code> \u51fd\u6570\u7684\u8f93\u5165,\u4f46\u4e0d\u4f1a\u5b8c\u5168\u652f\u6301\u6062\u590d\u4f60\u7684\u56fe\u3002</p>","tags":["agent"],"boost":2},{"location":"agents/ui/#ui_2","title":"\u751f\u6210\u5f0f UI","text":"<p>\u4f60\u4e5f\u53ef\u4ee5\u5728 Agent Chat UI \u4e2d\u4f7f\u7528\u751f\u6210\u5f0f UI\u3002</p> <p>\u751f\u6210\u5f0f UI \u5141\u8bb8\u4f60\u5b9a\u4e49 React \u7ec4\u4ef6,\u5e76\u4ece LangGraph \u670d\u52a1\u5668\u5c06\u5b83\u4eec\u63a8\u9001\u5230 UI\u3002\u6709\u5173\u6784\u5efa\u751f\u6210\u5f0f UI LangGraph \u667a\u80fd\u4ee3\u7406\u7684\u66f4\u591a\u6587\u6863,\u8bf7\u9605\u8bfb\u8fd9\u4e9b\u6587\u6863\u3002</p>","tags":["agent"],"boost":2},{"location":"cloud/","title":"LangGraph Cloud","text":"<p>LangGraph Cloud \u662f LangGraph \u7684\u6258\u7ba1\u670d\u52a1\uff0c\u63d0\u4f9b\u7b80\u5355\u3001\u53ef\u6269\u5c55\u7684\u90e8\u7f72\u65b9\u6848\u3002</p>"},{"location":"cloud/#_1","title":"\u5feb\u901f\u5f00\u59cb","text":"<ul> <li>\u5feb\u901f\u5f00\u59cb\uff1a\u5feb\u901f\u90e8\u7f72\u4f60\u7684\u7b2c\u4e00\u4e2a LangGraph \u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"cloud/#_2","title":"\u90e8\u7f72","text":"<ul> <li>\u8bbe\u7f6e\uff1a\u914d\u7f6e\u90e8\u7f72\u73af\u5883\u3002</li> <li>\u4e91\u90e8\u7f72\uff1a\u90e8\u7f72\u5230 LangGraph Cloud\u3002</li> </ul>"},{"location":"cloud/#_3","title":"\u64cd\u4f5c\u6307\u5357","text":""},{"location":"cloud/#_4","title":"\u5e76\u53d1\u5904\u7406","text":"<ul> <li>\u6982\u89c8\uff1a\u5e76\u53d1\u5904\u7406\u64cd\u4f5c\u6307\u5357\u603b\u89c8\u3002</li> <li>\u5165\u961f\u5e76\u53d1\u8bf7\u6c42\uff1a\u5c06\u5e76\u53d1\u8bf7\u6c42\u52a0\u5165\u961f\u5217\u3002</li> <li>\u62d2\u7edd\u5e76\u53d1\u8bf7\u6c42\uff1a\u62d2\u7edd\u5e76\u53d1\u8bf7\u6c42\u3002</li> <li>\u4e2d\u65ad\u5e76\u53d1\u8bf7\u6c42\uff1a\u4e2d\u65ad\u5e76\u53d1\u6267\u884c\u3002</li> <li>\u56de\u6eda\u5e76\u53d1\u8bf7\u6c42\uff1a\u56de\u6eda\u5e76\u53d1\u4fee\u6539\u3002</li> <li>\u540e\u53f0\u8fd0\u884c\uff1a\u5728\u540e\u53f0\u6267\u884c\u4efb\u52a1\u3002</li> </ul>"},{"location":"cloud/#_5","title":"\u7ebf\u7a0b\u7ba1\u7406","text":"<ul> <li>\u540c\u7ebf\u7a0b\u64cd\u4f5c\uff1a\u5728\u540c\u4e00\u7ebf\u7a0b\u4e2d\u6267\u884c\u64cd\u4f5c\u3002</li> <li>\u65e0\u72b6\u6001\u8fd0\u884c\uff1a\u65e0\u72b6\u6001\u6267\u884c\u6a21\u5f0f\u3002</li> </ul>"},{"location":"cloud/#api","title":"API \u53c2\u8003","text":"<ul> <li>API \u53c2\u8003\uff1a\u5b8c\u6574\u7684 REST API \u6587\u6863\u3002</li> </ul>"},{"location":"cloud/#sdk","title":"SDK","text":"<ul> <li>Python SDK\uff1aPython SDK \u53c2\u8003\u6587\u6863\u3002</li> <li>JS/TS SDK\uff1aJavaScript/TypeScript SDK \u53c2\u8003\u6587\u6863\u3002</li> </ul>"},{"location":"cloud/quick_start/","title":"\u90e8\u7f72\u5feb\u901f\u5165\u95e8","text":"<p>\u672c\u6307\u5357\u5411\u4f60\u5c55\u793a\u5982\u4f55\u8bbe\u7f6e\u548c\u4f7f\u7528 LangGraph Platform \u8fdb\u884c\u4e91\u90e8\u7f72\u3002</p>"},{"location":"cloud/quick_start/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u62e5\u6709\u4ee5\u4e0b\u5185\u5bb9:</p> <ul> <li>\u4e00\u4e2a GitHub \u8d26\u6237</li> <li>\u4e00\u4e2a LangSmith \u8d26\u6237 \u2013 \u514d\u8d39\u6ce8\u518c</li> </ul>"},{"location":"cloud/quick_start/#1-github","title":"1. \u5728 GitHub \u4e0a\u521b\u5efa\u4ed3\u5e93","text":"<p>\u8981\u5c06\u5e94\u7528\u7a0b\u5e8f\u90e8\u7f72\u5230 LangGraph Platform,\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u5fc5\u987b\u4f4d\u4e8e GitHub \u4ed3\u5e93\u4e2d\u3002\u652f\u6301\u516c\u5171\u548c\u79c1\u6709\u4ed3\u5e93\u3002\u5bf9\u4e8e\u672c\u5feb\u901f\u5165\u95e8,\u8bf7\u4f7f\u7528 <code>new-langgraph-project</code> \u6a21\u677f\u4f5c\u4e3a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f:</p> <ol> <li>\u8f6c\u5230 <code>new-langgraph-project</code> \u4ed3\u5e93\u6216 <code>new-langgraphjs-project</code> \u6a21\u677f\u3002</li> <li>\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 <code>Fork</code> \u6309\u94ae\u5c06\u4ed3\u5e93\u590d\u523b\u5230\u4f60\u7684 GitHub \u8d26\u6237\u3002</li> <li>\u70b9\u51fb Create fork\u3002</li> </ol>"},{"location":"cloud/quick_start/#2-langgraph-platform","title":"2. \u90e8\u7f72\u5230 LangGraph Platform","text":"<ol> <li>\u767b\u5f55\u5230 LangSmith\u3002</li> <li>\u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d,\u9009\u62e9 Deployments\u3002</li> <li>\u70b9\u51fb + New Deployment \u6309\u94ae\u3002\u5c06\u6253\u5f00\u4e00\u4e2a\u7a97\u683c,\u4f60\u53ef\u4ee5\u5728\u5176\u4e2d\u586b\u5199\u5fc5\u586b\u5b57\u6bb5\u3002</li> <li>\u5982\u679c\u4f60\u662f\u9996\u6b21\u7528\u6237\u6216\u6dfb\u52a0\u4e4b\u524d\u672a\u8fde\u63a5\u8fc7\u7684\u79c1\u6709\u4ed3\u5e93,\u8bf7\u70b9\u51fb Import from GitHub \u6309\u94ae\u5e76\u6309\u7167\u8bf4\u660e\u8fde\u63a5\u4f60\u7684 GitHub \u8d26\u6237\u3002</li> <li>\u9009\u62e9\u4f60\u7684 New LangGraph Project \u4ed3\u5e93\u3002</li> <li> <p>\u70b9\u51fb Submit \u8fdb\u884c\u90e8\u7f72\u3002</p> <p>\u8fd9\u53ef\u80fd\u9700\u8981\u5927\u7ea6 15 \u5206\u949f\u624d\u80fd\u5b8c\u6210\u3002\u4f60\u53ef\u4ee5\u5728 Deployment details \u89c6\u56fe\u4e2d\u68c0\u67e5\u72b6\u6001\u3002</p> </li> </ol>"},{"location":"cloud/quick_start/#3-langgraph-studio","title":"3. \u5728 LangGraph Studio \u4e2d\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f","text":"<p>\u5e94\u7528\u7a0b\u5e8f\u90e8\u7f72\u5b8c\u6210\u540e:</p> <ol> <li>\u9009\u62e9\u4f60\u521a\u521b\u5efa\u7684\u90e8\u7f72\u4ee5\u67e5\u770b\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u3002</li> <li> <p>\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 LangGraph Studio \u6309\u94ae\u3002</p> <p>LangGraph Studio \u5c06\u6253\u5f00\u4ee5\u663e\u793a\u4f60\u7684\u56fe\u3002</p> <p>      \u5728 LangGraph Studio \u4e2d\u8fd0\u884c\u7684\u793a\u4f8b\u56fe\u3002  </p> </li> </ol>"},{"location":"cloud/quick_start/#4-api-url","title":"4. \u83b7\u53d6\u90e8\u7f72\u7684 API URL","text":"<ol> <li>\u5728 LangGraph \u7684 Deployment details \u89c6\u56fe\u4e2d,\u70b9\u51fb API URL \u5c06\u5176\u590d\u5236\u5230\u526a\u8d34\u677f\u3002</li> <li>\u70b9\u51fb <code>URL</code> \u5c06\u5176\u590d\u5236\u5230\u526a\u8d34\u677f\u3002</li> </ol>"},{"location":"cloud/quick_start/#5-api","title":"5. \u6d4b\u8bd5 API","text":"<p>\u4f60\u73b0\u5728\u53ef\u4ee5\u6d4b\u8bd5 API:</p> Python SDK (Async)Python SDK (Sync)JavaScript SDKRest API <ol> <li> <p>\u5b89\u88c5 LangGraph Python SDK:</p> <pre><code>pip install langgraph-sdk\n</code></pre> </li> <li> <p>\u5411\u52a9\u624b\u53d1\u9001\u6d88\u606f(\u65e0\u7ebf\u7a0b\u8fd0\u884c):</p> <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=\"your-deployment-url\", api_key=\"your-langsmith-api-key\")\n\nasync for chunk in client.runs.stream(\n    None,  # Threadless run\n    \"agent\", # Name of assistant. Defined in langgraph.json.\n    input={\n        \"messages\": [{\n            \"role\": \"human\",\n            \"content\": \"What is LangGraph?\",\n        }],\n    },\n    stream_mode=\"updates\",\n):\n    print(f\"Receiving new event of type: {chunk.event}...\")\n    print(chunk.data)\n    print(\"\\n\\n\")\n</code></pre> </li> </ol> <ol> <li> <p>\u5b89\u88c5 LangGraph Python SDK:</p> <pre><code>pip install langgraph-sdk\n</code></pre> </li> <li> <p>\u5411\u52a9\u624b\u53d1\u9001\u6d88\u606f(\u65e0\u7ebf\u7a0b\u8fd0\u884c):</p> <pre><code>from langgraph_sdk import get_sync_client\n\nclient = get_sync_client(url=\"your-deployment-url\", api_key=\"your-langsmith-api-key\")\n\nfor chunk in client.runs.stream(\n    None,  # Threadless run\n    \"agent\", # Name of assistant. Defined in langgraph.json.\n    input={\n        \"messages\": [{\n            \"role\": \"human\",\n            \"content\": \"What is LangGraph?\",\n        }],\n    },\n    stream_mode=\"updates\",\n):\n    print(f\"Receiving new event of type: {chunk.event}...\")\n    print(chunk.data)\n    print(\"\\n\\n\")\n</code></pre> </li> </ol> <ol> <li> <p>\u5b89\u88c5 LangGraph JS SDK</p> <pre><code>npm install @langchain/langgraph-sdk\n</code></pre> </li> <li> <p>\u5411\u52a9\u624b\u53d1\u9001\u6d88\u606f(\u65e0\u7ebf\u7a0b\u8fd0\u884c):</p> <pre><code>const { Client } = await import(\"@langchain/langgraph-sdk\");\n\nconst client = new Client({ apiUrl: \"your-deployment-url\", apiKey: \"your-langsmith-api-key\" });\n\nconst streamResponse = client.runs.stream(\n    null, // Threadless run\n    \"agent\", // Assistant ID\n    {\n        input: {\n            \"messages\": [\n                { \"role\": \"user\", \"content\": \"What is LangGraph?\"}\n            ]\n        },\n        streamMode: \"messages\",\n    }\n);\n\nfor await (const chunk of streamResponse) {\n    console.log(`Receiving new event of type: ${chunk.event}...`);\n    console.log(JSON.stringify(chunk.data));\n    console.log(\"\\n\\n\");\n}\n</code></pre> </li> </ol> <pre><code>curl -s --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/runs/stream \\\n    --header 'Content-Type: application/json' \\\n    --header \"X-Api-Key: &lt;LANGSMITH API KEY&gt; \\\n    --data \"{\n        \\\"assistant_id\\\": \\\"agent\\\",\n        \\\"input\\\": {\n            \\\"messages\\\": [\n                {\n                    \\\"role\\\": \\\"human\\\",\n                    \\\"content\\\": \\\"What is LangGraph?\\\"\n                }\n            ]\n        },\n        \\\"stream_mode\\\": \\\"updates\\\"\n    }\"\n</code></pre>"},{"location":"cloud/quick_start/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u606d\u559c!\u4f60\u5df2\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\u4e86\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5176\u4ed6\u53ef\u4f9b\u67e5\u770b\u7684\u8d44\u6e90:</p> <ul> <li>LangGraph Platform \u6982\u8ff0</li> <li>\u90e8\u7f72\u9009\u9879</li> </ul>"},{"location":"cloud/concepts/cron_jobs/","title":"Cron jobs","text":""},{"location":"cloud/concepts/cron_jobs/#_1","title":"\u5b9a\u65f6\u4efb\u52a1","text":"<p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b,\u6309\u8ba1\u5212\u8fd0\u884c\u52a9\u624b\u662f\u5f88\u6709\u7528\u7684\u3002</p> <p>\u4f8b\u5982,\u5047\u8bbe\u4f60\u6b63\u5728\u6784\u5efa\u4e00\u4e2a\u6bcf\u5929\u8fd0\u884c\u5e76\u53d1\u9001\u5f53\u5929\u65b0\u95fb\u6458\u8981\u7535\u5b50\u90ae\u4ef6\u7684\u52a9\u624b\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b9a\u65f6\u4efb\u52a1\u6bcf\u5929\u665a\u4e0a 8:00 \u8fd0\u884c\u52a9\u624b\u3002</p> <p>LangGraph Platform \u652f\u6301\u5b9a\u65f6\u4efb\u52a1,\u5b83\u6309\u7528\u6237\u5b9a\u4e49\u7684\u8ba1\u5212\u8fd0\u884c\u3002\u7528\u6237\u6307\u5b9a\u8ba1\u5212\u3001\u52a9\u624b\u548c\u4e00\u4e9b\u8f93\u5165\u3002\u4e4b\u540e,\u5728\u6307\u5b9a\u7684\u8ba1\u5212\u4e0a,\u670d\u52a1\u5668\u5c06:</p> <ul> <li>\u4f7f\u7528\u6307\u5b9a\u7684\u52a9\u624b\u521b\u5efa\u65b0\u7ebf\u7a0b</li> <li>\u5c06\u6307\u5b9a\u7684\u8f93\u5165\u53d1\u9001\u5230\u8be5\u7ebf\u7a0b</li> </ul> <p>\u8bf7\u6ce8\u610f,\u8fd9\u6bcf\u6b21\u90fd\u4f1a\u5c06\u76f8\u540c\u7684\u8f93\u5165\u53d1\u9001\u5230\u7ebf\u7a0b\u3002\u6709\u5173\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\u7684\u4fe1\u606f,\u8bf7\u53c2\u9605\u64cd\u4f5c\u6307\u5357\u3002</p> <p>LangGraph Platform API \u63d0\u4f9b\u4e86\u591a\u4e2a\u7aef\u70b9\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u5b9a\u65f6\u4efb\u52a1\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 API \u53c2\u8003\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/","title":"\u6570\u636e\u5b58\u50a8\u548c\u9690\u79c1","text":"<p>\u672c\u6587\u6863\u63cf\u8ff0\u4e86 LangGraph CLI \u548c LangGraph Server \u4e2d\u5982\u4f55\u5904\u7406\u6570\u636e,\u5305\u62ec\u5185\u5b58\u670d\u52a1\u5668(<code>langgraph dev</code>)\u548c\u672c\u5730 Docker \u670d\u52a1\u5668(<code>langgraph up</code>)\u3002\u5b83\u8fd8\u63cf\u8ff0\u4e86\u4e0e\u6258\u7ba1\u7684 LangGraph Studio \u524d\u7aef\u4ea4\u4e92\u65f6\u8ddf\u8e2a\u7684\u6570\u636e\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#cli","title":"CLI","text":"<p>LangGraph CLI \u662f\u7528\u4e8e\u6784\u5efa\u548c\u8fd0\u884c LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u547d\u4ee4\u884c\u754c\u9762;\u8bf7\u53c2\u9605 CLI \u6307\u5357\u4ee5\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u5bf9\u5927\u591a\u6570 CLI \u547d\u4ee4\u7684\u8c03\u7528\u4f1a\u5728\u8c03\u7528\u65f6\u8bb0\u5f55\u5355\u4e2a\u5206\u6790\u4e8b\u4ef6\u3002\u8fd9\u6709\u52a9\u4e8e\u6211\u4eec\u66f4\u597d\u5730\u4f18\u5148\u6539\u8fdb CLI \u4f53\u9a8c\u3002\u6bcf\u4e2a\u9065\u6d4b\u4e8b\u4ef6\u5305\u542b\u8c03\u7528\u8fdb\u7a0b\u7684 OS\u3001OS \u7248\u672c\u3001Python \u7248\u672c\u3001CLI \u7248\u672c\u3001\u547d\u4ee4\u540d\u79f0(<code>dev</code>\u3001<code>up</code>\u3001<code>run</code> \u7b49),\u4ee5\u53ca\u8868\u793a\u662f\u5426\u5411\u547d\u4ee4\u4f20\u9012\u4e86\u6807\u5fd7\u7684\u5e03\u5c14\u503c\u3002\u4f60\u53ef\u4ee5\u5728\u6b64\u5904\u67e5\u770b\u5b8c\u6574\u7684\u5206\u6790\u903b\u8f91\u3002</p> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>LANGGRAPH_CLI_NO_ANALYTICS=1</code> \u6765\u7981\u7528\u6240\u6709 CLI \u9065\u6d4b\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#langgraph-server-docker","title":"LangGraph Server(\u5185\u5b58\u548c Docker)","text":"<p>LangGraph Server \u63d0\u4f9b\u6301\u4e45\u6267\u884c\u8fd0\u884c\u65f6,\u4f9d\u8d56\u4e8e\u5c06\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u7684\u68c0\u67e5\u70b9\u3001\u957f\u671f\u8bb0\u5fc6\u3001\u7ebf\u7a0b\u5143\u6570\u636e\u3001\u52a9\u624b\u548c\u7c7b\u4f3c\u8d44\u6e90\u6301\u4e45\u5316\u5230\u672c\u5730\u6587\u4ef6\u7cfb\u7edf\u6216\u6570\u636e\u5e93\u3002\u9664\u975e\u4f60\u6545\u610f\u81ea\u5b9a\u4e49\u4e86\u5b58\u50a8\u4f4d\u7f6e,\u5426\u5219\u6b64\u4fe1\u606f\u5c06\u5199\u5165\u672c\u5730\u78c1\u76d8(\u5bf9\u4e8e <code>langgraph dev</code>)\u6216 PostgreSQL \u6570\u636e\u5e93(\u5bf9\u4e8e <code>langgraph up</code> \u548c\u6240\u6709\u90e8\u7f72)\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#langsmith","title":"LangSmith \u8ddf\u8e2a","text":"<p>\u8fd0\u884c LangGraph \u670d\u52a1\u5668(\u65e0\u8bba\u662f\u5185\u5b58\u8fd8\u662f Docker)\u65f6,\u53ef\u4ee5\u542f\u7528 LangSmith \u8ddf\u8e2a\u4ee5\u4fc3\u8fdb\u66f4\u5feb\u7684\u8c03\u8bd5\u5e76\u63d0\u4f9b\u56fe\u72b6\u6001\u548c\u751f\u4ea7\u4e2d LLM \u63d0\u793a\u7684\u53ef\u89c2\u5bdf\u6027\u3002\u4f60\u59cb\u7ec8\u53ef\u4ee5\u901a\u8fc7\u5728\u670d\u52a1\u5668\u7684\u8fd0\u884c\u65f6\u73af\u5883\u4e2d\u8bbe\u7f6e <code>LANGSMITH_TRACING=false</code> \u6765\u7981\u7528\u8ddf\u8e2a\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#langgraph-dev","title":"\u5185\u5b58\u5f00\u53d1\u670d\u52a1\u5668(<code>langgraph dev</code>)","text":"<p><code>langgraph dev</code> \u8fd0\u884c\u4e00\u4e2a\u5185\u5b58\u5f00\u53d1\u670d\u52a1\u5668\u4f5c\u4e3a\u5355\u4e2a Python \u8fdb\u7a0b,\u4e13\u4e3a\u5feb\u901f\u5f00\u53d1\u548c\u6d4b\u8bd5\u800c\u8bbe\u8ba1\u3002\u5b83\u5c06\u6240\u6709\u68c0\u67e5\u70b9\u548c\u8bb0\u5fc6\u6570\u636e\u4fdd\u5b58\u5230\u5f53\u524d\u5de5\u4f5c\u76ee\u5f55\u4e2d <code>.langgraph_api</code> \u76ee\u5f55\u7684\u78c1\u76d8\u4e0a\u3002\u9664\u4e86 CLI \u90e8\u5206\u63cf\u8ff0\u7684\u9065\u6d4b\u6570\u636e\u5916,\u9664\u975e\u4f60\u542f\u7528\u4e86\u8ddf\u8e2a\u6216\u4f60\u7684\u56fe\u4ee3\u7801\u663e\u5f0f\u8054\u7cfb\u5916\u90e8\u670d\u52a1,\u5426\u5219\u4e0d\u4f1a\u6709\u6570\u636e\u79bb\u5f00\u673a\u5668\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#langgraph-up","title":"\u72ec\u7acb\u5bb9\u5668(<code>langgraph up</code>)","text":"<p><code>langgraph up</code> \u5c06\u4f60\u7684\u672c\u5730\u5305\u6784\u5efa\u5230 Docker \u955c\u50cf\u4e2d,\u5e76\u5c06\u670d\u52a1\u5668\u4f5c\u4e3a\u72ec\u7acb\u5bb9\u5668\u8fd0\u884c,\u7531\u4e09\u4e2a\u5bb9\u5668\u7ec4\u6210:API \u670d\u52a1\u5668\u3001PostgreSQL \u5bb9\u5668\u548c Redis \u5bb9\u5668\u3002\u6240\u6709\u6301\u4e45\u6570\u636e(\u68c0\u67e5\u70b9\u3001\u52a9\u624b\u7b49)\u90fd\u5b58\u50a8\u5728 PostgreSQL \u6570\u636e\u5e93\u4e2d\u3002Redis \u7528\u4f5c\u7528\u4e8e\u5b9e\u65f6\u6d41\u5f0f\u4f20\u8f93\u4e8b\u4ef6\u7684\u53d1\u5e03\u8ba2\u9605\u8fde\u63a5\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e\u6709\u6548\u7684 <code>LANGGRAPH_AES_KEY</code> \u73af\u5883\u53d8\u91cf\u6765\u52a0\u5bc6\u6240\u6709\u68c0\u67e5\u70b9,\u7136\u540e\u518d\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u3002\u4f60\u8fd8\u53ef\u4ee5\u5728 <code>langgraph.json</code> \u4e2d\u4e3a\u68c0\u67e5\u70b9\u548c\u8de8\u7ebf\u7a0b\u8bb0\u5fc6\u6307\u5b9a TTL,\u4ee5\u63a7\u5236\u6570\u636e\u5b58\u50a8\u7684\u65f6\u95f4\u3002\u6240\u6709\u6301\u4e45\u5316\u7684\u7ebf\u7a0b\u3001\u8bb0\u5fc6\u548c\u5176\u4ed6\u6570\u636e\u90fd\u53ef\u4ee5\u901a\u8fc7\u76f8\u5173\u7684 API \u7aef\u70b9\u5220\u9664\u3002</p> <p>\u4f1a\u8fdb\u884c\u989d\u5916\u7684 API \u8c03\u7528\u4ee5\u786e\u8ba4\u670d\u52a1\u5668\u5177\u6709\u6709\u6548\u7684\u8bb8\u53ef\u8bc1\u5e76\u8ddf\u8e2a\u6267\u884c\u7684\u8fd0\u884c\u548c\u4efb\u52a1\u6570\u91cf\u3002API \u670d\u52a1\u5668\u4f1a\u5b9a\u671f\u9a8c\u8bc1\u63d0\u4f9b\u7684\u8bb8\u53ef\u8bc1\u5bc6\u94a5(\u6216 API \u5bc6\u94a5)\u3002</p> <p>\u5982\u679c\u4f60\u5df2\u7981\u7528\u8ddf\u8e2a,\u9664\u975e\u4f60\u7684\u56fe\u4ee3\u7801\u663e\u5f0f\u8054\u7cfb\u5916\u90e8\u670d\u52a1,\u5426\u5219\u4e0d\u4f1a\u5728\u5916\u90e8\u6301\u4e45\u5316\u7528\u6237\u6570\u636e\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#studio","title":"Studio","text":"<p>LangGraph Studio \u662f\u7528\u4e8e\u4e0e LangGraph \u670d\u52a1\u5668\u4ea4\u4e92\u7684\u56fe\u5f62\u754c\u9762\u3002\u5b83\u4e0d\u4f1a\u6301\u4e45\u5316\u4efb\u4f55\u79c1\u6709\u6570\u636e(\u4f60\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u6570\u636e\u4e0d\u4f1a\u53d1\u9001\u5230 LangSmith)\u3002\u867d\u7136 Studio \u754c\u9762\u5728 smith.langchain.com \u63d0\u4f9b\u670d\u52a1,\u4f46\u5b83\u5728\u4f60\u7684\u6d4f\u89c8\u5668\u4e2d\u8fd0\u884c\u5e76\u76f4\u63a5\u8fde\u63a5\u5230\u4f60\u7684\u672c\u5730 LangGraph \u670d\u52a1\u5668,\u56e0\u6b64\u4e0d\u9700\u8981\u5c06\u6570\u636e\u53d1\u9001\u5230 LangSmith\u3002</p> <p>\u5982\u679c\u4f60\u5df2\u767b\u5f55,LangSmith \u4f1a\u6536\u96c6\u4e00\u4e9b\u4f7f\u7528\u5206\u6790\u4ee5\u5e2e\u52a9\u6539\u8fdb Studio \u7684\u7528\u6237\u4f53\u9a8c\u3002\u8fd9\u5305\u62ec:</p> <ul> <li>\u9875\u9762\u8bbf\u95ee\u548c\u5bfc\u822a\u6a21\u5f0f</li> <li>\u7528\u6237\u64cd\u4f5c(\u6309\u94ae\u70b9\u51fb)</li> <li>\u6d4f\u89c8\u5668\u7c7b\u578b\u548c\u7248\u672c</li> <li>\u5c4f\u5e55\u5206\u8fa8\u7387\u548c\u89c6\u53e3\u5927\u5c0f</li> </ul> <p>\u91cd\u8981\u7684\u662f,\u4e0d\u4f1a\u6536\u96c6\u5e94\u7528\u7a0b\u5e8f\u6570\u636e\u6216\u4ee3\u7801(\u6216\u5176\u4ed6\u654f\u611f\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f)\u3002\u6240\u6709\u8fd9\u4e9b\u90fd\u5b58\u50a8\u5728 LangGraph \u670d\u52a1\u5668\u7684\u6301\u4e45\u5c42\u4e2d\u3002\u533f\u540d\u4f7f\u7528 Studio \u65f6,\u4e0d\u9700\u8981\u521b\u5efa\u8d26\u6237,\u4e5f\u4e0d\u4f1a\u6536\u96c6\u4f7f\u7528\u5206\u6790\u3002</p>"},{"location":"cloud/concepts/data_storage_and_privacy/#_2","title":"\u5feb\u901f\u53c2\u8003","text":"<p>\u603b\u4e4b,\u4f60\u53ef\u4ee5\u901a\u8fc7\u5173\u95ed CLI \u5206\u6790\u548c\u7981\u7528\u8ddf\u8e2a\u6765\u9009\u62e9\u9000\u51fa\u670d\u52a1\u5668\u7aef\u9065\u6d4b\u3002</p> \u53d8\u91cf \u76ee\u7684 \u9ed8\u8ba4\u503c <code>LANGGRAPH_CLI_NO_ANALYTICS=1</code> \u7981\u7528 CLI \u5206\u6790 \u5df2\u542f\u7528\u5206\u6790 <code>LANGSMITH_API_KEY</code> \u542f\u7528 LangSmith \u8ddf\u8e2a \u5df2\u7981\u7528\u8ddf\u8e2a <code>LANGSMITH_TRACING=false</code> \u7981\u7528 LangSmith \u8ddf\u8e2a \u53d6\u51b3\u4e8e\u73af\u5883"},{"location":"cloud/concepts/webhooks/","title":"Webhooks","text":"<p>Webhook \u542f\u7528\u4ece\u4f60\u7684 LangGraph Platform \u5e94\u7528\u7a0b\u5e8f\u5230\u5916\u90e8\u670d\u52a1\u7684\u4e8b\u4ef6\u9a71\u52a8\u901a\u4fe1\u3002\u4f8b\u5982,\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u5bf9 LangGraph Platform \u7684 API \u8c03\u7528\u5b8c\u6210\u8fd0\u884c\u540e\u5411\u5355\u72ec\u7684\u670d\u52a1\u53d1\u9001\u66f4\u65b0\u3002</p> <p>\u8bb8\u591a LangGraph Platform \u7aef\u70b9\u63a5\u53d7 <code>webhook</code> \u53c2\u6570\u3002\u5982\u679c\u6b64\u53c2\u6570\u7531\u53ef\u4ee5\u63a5\u53d7 POST \u8bf7\u6c42\u7684\u7aef\u70b9\u6307\u5b9a,LangGraph Platform \u5c06\u5728\u8fd0\u884c\u5b8c\u6210\u65f6\u53d1\u9001\u8bf7\u6c42\u3002</p> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u76f8\u5e94\u7684\u64cd\u4f5c\u6307\u5357\u3002</p>"},{"location":"cloud/deployment/cloud/","title":"\u5982\u4f55\u90e8\u7f72\u5230 Cloud SaaS","text":"<p>\u5728\u90e8\u7f72\u4e4b\u524d,\u8bf7\u67e5\u770b Cloud SaaS \u90e8\u7f72\u9009\u9879\u7684\u6982\u5ff5\u6307\u5357\u3002</p>"},{"location":"cloud/deployment/cloud/#_1","title":"\u5148\u51b3\u6761\u4ef6","text":"<ol> <li>LangGraph Platform \u5e94\u7528\u7a0b\u5e8f\u4ece GitHub \u5b58\u50a8\u5e93\u90e8\u7f72\u3002\u914d\u7f6e LangGraph Platform \u5e94\u7528\u7a0b\u5e8f\u5e76\u5c06\u5176\u4e0a\u4f20\u5230 GitHub \u5b58\u50a8\u5e93,\u4ee5\u4fbf\u5c06\u5176\u90e8\u7f72\u5230 LangGraph Platform\u3002</li> <li>\u9a8c\u8bc1 LangGraph API \u5728\u672c\u5730\u8fd0\u884c\u3002\u5982\u679c API \u672a\u6210\u529f\u8fd0\u884c(\u5373 <code>langgraph dev</code>),\u90e8\u7f72\u5230 LangGraph Platform \u4e5f\u5c06\u5931\u8d25\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_2","title":"\u521b\u5efa\u65b0\u90e8\u7f72","text":"<p>\u4ece LangSmith UI \u5f00\u59cb...</p> <ol> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d,\u9009\u62e9 <code>LangGraph Platform</code>\u3002<code>LangGraph Platform</code> \u89c6\u56fe\u5305\u542b\u73b0\u6709 LangGraph Platform \u90e8\u7f72\u7684\u5217\u8868\u3002</li> <li>\u5728\u53f3\u4e0a\u89d2,\u9009\u62e9 <code>+ New Deployment</code> \u4ee5\u521b\u5efa\u65b0\u90e8\u7f72\u3002</li> <li>\u5728 <code>Create New Deployment</code> \u9762\u677f\u4e2d,\u586b\u5199\u5fc5\u586b\u5b57\u6bb5\u3002<ol> <li><code>Deployment details</code><ol> <li>\u9009\u62e9 <code>Import from GitHub</code> \u5e76\u6309\u7167 GitHub OAuth \u5de5\u4f5c\u6d41\u5b89\u88c5\u5e76\u6388\u6743 LangChain \u7684 <code>hosted-langserve</code> GitHub \u5e94\u7528\u7a0b\u5e8f\u8bbf\u95ee\u6240\u9009\u5b58\u50a8\u5e93\u3002\u5b89\u88c5\u5b8c\u6210\u540e,\u8fd4\u56de <code>Create New Deployment</code> \u9762\u677f,\u7136\u540e\u4ece\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9\u8981\u90e8\u7f72\u7684 GitHub \u5b58\u50a8\u5e93\u3002\u6ce8\u610f:\u5b89\u88c5 LangChain \u7684 <code>hosted-langserve</code> GitHub \u5e94\u7528\u7a0b\u5e8f\u7684 GitHub \u7528\u6237\u5fc5\u987b\u662f\u7ec4\u7ec7\u6216\u5e10\u6237\u7684\u6240\u6709\u8005\u3002</li> <li>\u4e3a\u90e8\u7f72\u6307\u5b9a\u540d\u79f0\u3002</li> <li>\u6307\u5b9a\u6240\u9700\u7684 <code>Git Branch</code>\u3002\u90e8\u7f72\u94fe\u63a5\u5230\u5206\u652f\u3002\u521b\u5efa\u65b0\u4fee\u8ba2\u7248\u672c\u65f6,\u5c06\u90e8\u7f72\u94fe\u63a5\u5206\u652f\u7684\u4ee3\u7801\u3002\u53ef\u4ee5\u7a0d\u540e\u5728\u90e8\u7f72\u8bbe\u7f6e\u4e2d\u66f4\u65b0\u5206\u652f\u3002</li> <li>\u6307\u5b9a LangGraph API \u914d\u7f6e\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84,\u5305\u62ec\u6587\u4ef6\u540d\u3002\u4f8b\u5982,\u5982\u679c\u6587\u4ef6 <code>langgraph.json</code> \u4f4d\u4e8e\u5b58\u50a8\u5e93\u7684\u6839\u76ee\u5f55\u4e2d,\u53ea\u9700\u6307\u5b9a <code>langgraph.json</code>\u3002</li> <li>\u9009\u4e2d/\u53d6\u6d88\u9009\u4e2d\u590d\u9009\u6846\u4ee5 <code>Automatically update deployment on push to branch</code>\u3002\u5982\u679c\u9009\u4e2d,\u5f53\u66f4\u6539\u63a8\u9001\u5230\u6307\u5b9a\u7684 <code>Git Branch</code> \u65f6,\u90e8\u7f72\u5c06\u81ea\u52a8\u66f4\u65b0\u3002\u53ef\u4ee5\u7a0d\u540e\u5728\u90e8\u7f72\u8bbe\u7f6e\u4e2d\u542f\u7528/\u7981\u7528\u6b64\u8bbe\u7f6e\u3002</li> </ol> </li> <li>\u9009\u62e9\u6240\u9700\u7684 <code>Deployment Type</code>\u3002<ol> <li><code>Development</code> \u90e8\u7f72\u7528\u4e8e\u975e\u751f\u4ea7\u7528\u4f8b,\u5e76\u914d\u7f6e\u4e86\u6700\u5c11\u7684\u8d44\u6e90\u3002</li> <li><code>Production</code> \u90e8\u7f72\u6bcf\u79d2\u6700\u591a\u53ef\u4ee5\u5904\u7406 500 \u4e2a\u8bf7\u6c42,\u5e76\u914d\u7f6e\u4e86\u5177\u6709\u81ea\u52a8\u5907\u4efd\u7684\u9ad8\u53ef\u7528\u6027\u5b58\u50a8\u3002</li> </ol> </li> <li>\u786e\u5b9a\u90e8\u7f72\u662f\u5426\u5e94 <code>Shareable through LangGraph Studio</code>\u3002<ol> <li>\u5982\u679c\u672a\u9009\u4e2d,\u5219\u90e8\u7f72\u53ea\u80fd\u901a\u8fc7\u5de5\u4f5c\u533a\u7684\u6709\u6548 LangSmith API \u5bc6\u94a5\u8bbf\u95ee\u3002</li> <li>\u5982\u679c\u9009\u4e2d,\u5219\u4efb\u4f55 LangSmith \u7528\u6237\u90fd\u53ef\u4ee5\u901a\u8fc7 LangGraph Studio \u8bbf\u95ee\u8be5\u90e8\u7f72\u3002\u5c06\u63d0\u4f9b\u6307\u5411\u8be5\u90e8\u7f72\u7684 LangGraph Studio \u7684\u76f4\u63a5 URL,\u4ee5\u4fbf\u4e0e\u5176\u4ed6 LangSmith \u7528\u6237\u5171\u4eab\u3002</li> </ol> </li> <li>\u6307\u5b9a <code>Environment Variables</code> \u548c\u5bc6\u94a5\u3002\u8bf7\u53c2\u9605\u73af\u5883\u53d8\u91cf\u53c2\u8003\u4ee5\u914d\u7f6e\u90e8\u7f72\u7684\u5176\u4ed6\u53d8\u91cf\u3002<ol> <li>\u654f\u611f\u503c(\u4f8b\u5982 API \u5bc6\u94a5,\u5982 <code>OPENAI_API_KEY</code>)\u5e94\u6307\u5b9a\u4e3a\u5bc6\u94a5\u3002</li> <li>\u4e5f\u53ef\u4ee5\u6307\u5b9a\u5176\u4ed6\u975e\u5bc6\u94a5\u73af\u5883\u53d8\u91cf\u3002</li> </ol> </li> <li>\u5c06\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u4e0e\u90e8\u7f72\u540c\u540d\u7684\u65b0 LangSmith <code>Tracing Project</code>\u3002</li> </ol> </li> <li>\u5728\u53f3\u4e0a\u89d2,\u9009\u62e9 <code>Submit</code>\u3002\u51e0\u79d2\u949f\u540e,\u5c06\u51fa\u73b0 <code>Deployment</code> \u89c6\u56fe,\u65b0\u90e8\u7f72\u5c06\u6392\u961f\u7b49\u5f85\u914d\u7f6e\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_3","title":"\u521b\u5efa\u65b0\u4fee\u8ba2\u7248\u672c","text":"<p>\u5728\u521b\u5efa\u65b0\u90e8\u7f72\u65f6,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4f1a\u521b\u5efa\u65b0\u4fee\u8ba2\u7248\u672c\u3002\u53ef\u4ee5\u521b\u5efa\u540e\u7eed\u4fee\u8ba2\u7248\u672c\u4ee5\u90e8\u7f72\u65b0\u7684\u4ee3\u7801\u66f4\u6539\u3002</p> <p>\u4ece LangSmith UI \u5f00\u59cb...</p> <ol> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d,\u9009\u62e9 <code>LangGraph Platform</code>\u3002<code>LangGraph Platform</code> \u89c6\u56fe\u5305\u542b\u73b0\u6709 LangGraph Platform \u90e8\u7f72\u7684\u5217\u8868\u3002</li> <li>\u9009\u62e9\u8981\u4e3a\u5176\u521b\u5efa\u65b0\u4fee\u8ba2\u7248\u672c\u7684\u73b0\u6709\u90e8\u7f72\u3002</li> <li>\u5728 <code>Deployment</code> \u89c6\u56fe\u4e2d,\u5728\u53f3\u4e0a\u89d2\u9009\u62e9 <code>+ New Revision</code>\u3002</li> <li>\u5728 <code>New Revision</code> \u6a21\u6001\u6846\u4e2d,\u586b\u5199\u5fc5\u586b\u5b57\u6bb5\u3002<ol> <li>\u6307\u5b9a LangGraph API \u914d\u7f6e\u6587\u4ef6\u7684\u5b8c\u6574\u8def\u5f84,\u5305\u62ec\u6587\u4ef6\u540d\u3002\u4f8b\u5982,\u5982\u679c\u6587\u4ef6 <code>langgraph.json</code> \u4f4d\u4e8e\u5b58\u50a8\u5e93\u7684\u6839\u76ee\u5f55\u4e2d,\u53ea\u9700\u6307\u5b9a <code>langgraph.json</code>\u3002</li> <li>\u786e\u5b9a\u90e8\u7f72\u662f\u5426\u5e94 <code>Shareable through LangGraph Studio</code>\u3002<ol> <li>\u5982\u679c\u672a\u9009\u4e2d,\u5219\u90e8\u7f72\u53ea\u80fd\u901a\u8fc7\u5de5\u4f5c\u533a\u7684\u6709\u6548 LangSmith API \u5bc6\u94a5\u8bbf\u95ee\u3002</li> <li>\u5982\u679c\u9009\u4e2d,\u5219\u4efb\u4f55 LangSmith \u7528\u6237\u90fd\u53ef\u4ee5\u901a\u8fc7 LangGraph Studio \u8bbf\u95ee\u8be5\u90e8\u7f72\u3002\u5c06\u63d0\u4f9b\u6307\u5411\u8be5\u90e8\u7f72\u7684 LangGraph Studio \u7684\u76f4\u63a5 URL,\u4ee5\u4fbf\u4e0e\u5176\u4ed6 LangSmith \u7528\u6237\u5171\u4eab\u3002</li> </ol> </li> <li>\u6307\u5b9a <code>Environment Variables</code> \u548c\u5bc6\u94a5\u3002\u73b0\u6709\u5bc6\u94a5\u548c\u73af\u5883\u53d8\u91cf\u5df2\u9884\u586b\u5145\u3002\u8bf7\u53c2\u9605\u73af\u5883\u53d8\u91cf\u53c2\u8003\u4ee5\u914d\u7f6e\u4fee\u8ba2\u7248\u672c\u7684\u5176\u4ed6\u53d8\u91cf\u3002<ol> <li>\u6dfb\u52a0\u65b0\u7684\u5bc6\u94a5\u6216\u73af\u5883\u53d8\u91cf\u3002</li> <li>\u5220\u9664\u73b0\u6709\u7684\u5bc6\u94a5\u6216\u73af\u5883\u53d8\u91cf\u3002</li> <li>\u66f4\u65b0\u73b0\u6709\u5bc6\u94a5\u6216\u73af\u5883\u53d8\u91cf\u7684\u503c\u3002</li> </ol> </li> </ol> </li> <li>\u9009\u62e9 <code>Submit</code>\u3002\u51e0\u79d2\u949f\u540e,<code>New Revision</code> \u6a21\u6001\u6846\u5c06\u5173\u95ed,\u65b0\u4fee\u8ba2\u7248\u672c\u5c06\u6392\u961f\u7b49\u5f85\u90e8\u7f72\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_4","title":"\u67e5\u770b\u6784\u5efa\u548c\u670d\u52a1\u5668\u65e5\u5fd7","text":"<p>\u6bcf\u4e2a\u4fee\u8ba2\u7248\u672c\u90fd\u63d0\u4f9b\u6784\u5efa\u548c\u670d\u52a1\u5668\u65e5\u5fd7\u3002</p> <p>\u4ece <code>LangGraph Platform</code> \u89c6\u56fe\u5f00\u59cb...</p> <ol> <li>\u4ece <code>Revisions</code> \u8868\u4e2d\u9009\u62e9\u6240\u9700\u7684\u4fee\u8ba2\u7248\u672c\u3002\u9762\u677f\u4ece\u53f3\u4fa7\u6ed1\u51fa,\u9ed8\u8ba4\u9009\u62e9 <code>Build</code> \u9009\u9879\u5361,\u663e\u793a\u4fee\u8ba2\u7248\u672c\u7684\u6784\u5efa\u65e5\u5fd7\u3002</li> <li>\u5728\u9762\u677f\u4e2d,\u9009\u62e9 <code>Server</code> \u9009\u9879\u5361\u4ee5\u67e5\u770b\u4fee\u8ba2\u7248\u672c\u7684\u670d\u52a1\u5668\u65e5\u5fd7\u3002\u670d\u52a1\u5668\u65e5\u5fd7\u4ec5\u5728\u90e8\u7f72\u4fee\u8ba2\u7248\u672c\u540e\u53ef\u7528\u3002</li> <li>\u5728 <code>Server</code> \u9009\u9879\u5361\u4e2d,\u6839\u636e\u9700\u8981\u8c03\u6574\u65e5\u671f/\u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u65e5\u671f/\u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668\u8bbe\u7f6e\u4e3a <code>Last 7 days</code>\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_5","title":"\u67e5\u770b\u90e8\u7f72\u6307\u6807","text":"<p>\u4ece LangSmith UI \u5f00\u59cb...</p> <ol> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d,\u9009\u62e9 <code>LangGraph Platform</code>\u3002<code>LangGraph Platform</code> \u89c6\u56fe\u5305\u542b\u73b0\u6709 LangGraph Platform \u90e8\u7f72\u7684\u5217\u8868\u3002</li> <li>\u9009\u62e9\u8981\u76d1\u63a7\u7684\u73b0\u6709\u90e8\u7f72\u3002</li> <li>\u9009\u62e9 <code>Monitoring</code> \u9009\u9879\u5361\u4ee5\u67e5\u770b\u90e8\u7f72\u6307\u6807\u3002\u8bf7\u53c2\u9605\u6240\u6709\u53ef\u7528\u6307\u6807\u7684\u5217\u8868\u3002</li> <li>\u5728 <code>Monitoring</code> \u9009\u9879\u5361\u4e2d,\u6839\u636e\u9700\u8981\u4f7f\u7528\u65e5\u671f/\u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u65e5\u671f/\u65f6\u95f4\u8303\u56f4\u9009\u62e9\u5668\u8bbe\u7f6e\u4e3a <code>Last 15 minutes</code>\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_6","title":"\u4e2d\u65ad\u4fee\u8ba2\u7248\u672c","text":"<p>\u4e2d\u65ad\u4fee\u8ba2\u7248\u672c\u5c06\u505c\u6b62\u90e8\u7f72\u4fee\u8ba2\u7248\u672c\u3002</p> <p>\u672a\u5b9a\u4e49\u7684\u884c\u4e3a</p> <p>\u4e2d\u65ad\u7684\u4fee\u8ba2\u7248\u672c\u5177\u6709\u672a\u5b9a\u4e49\u7684\u884c\u4e3a\u3002\u8fd9\u4ec5\u5728\u4f60\u9700\u8981\u90e8\u7f72\u65b0\u4fee\u8ba2\u7248\u672c\u5e76\u4e14\u5df2\u7ecf\u6709\u4e00\u4e2a\u4fee\u8ba2\u7248\u672c\"\u5361\u4f4f\"\u6b63\u5728\u8fdb\u884c\u65f6\u624d\u6709\u7528\u3002\u5c06\u6765,\u6b64\u529f\u80fd\u53ef\u80fd\u4f1a\u88ab\u5220\u9664\u3002</p> <p>\u4ece <code>LangGraph Platform</code> \u89c6\u56fe\u5f00\u59cb...</p> <ol> <li>\u4ece <code>Revisions</code> \u8868\u4e2d\u6240\u9700\u4fee\u8ba2\u7248\u672c\u7684\u884c\u53f3\u4fa7\u9009\u62e9\u83dc\u5355\u56fe\u6807(\u4e09\u4e2a\u70b9)\u3002</li> <li>\u4ece\u83dc\u5355\u4e2d\u9009\u62e9 <code>Interrupt</code>\u3002</li> <li>\u5c06\u51fa\u73b0\u4e00\u4e2a\u6a21\u6001\u6846\u3002\u67e5\u770b\u786e\u8ba4\u6d88\u606f\u3002\u9009\u62e9 <code>Interrupt revision</code>\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_7","title":"\u5220\u9664\u90e8\u7f72","text":"<p>\u4ece LangSmith UI \u5f00\u59cb...</p> <ol> <li>\u5728\u5de6\u4fa7\u5bfc\u822a\u9762\u677f\u4e2d,\u9009\u62e9 <code>LangGraph Platform</code>\u3002<code>LangGraph Platform</code> \u89c6\u56fe\u5305\u542b\u73b0\u6709 LangGraph Platform \u90e8\u7f72\u7684\u5217\u8868\u3002</li> <li>\u9009\u62e9\u6240\u9700\u90e8\u7f72\u7684\u884c\u53f3\u4fa7\u7684\u83dc\u5355\u56fe\u6807(\u4e09\u4e2a\u70b9)\u5e76\u9009\u62e9 <code>Delete</code>\u3002</li> <li>\u5c06\u51fa\u73b0 <code>Confirmation</code> \u6a21\u6001\u6846\u3002\u9009\u62e9 <code>Delete</code>\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#_8","title":"\u90e8\u7f72\u8bbe\u7f6e","text":"<p>\u4ece <code>LangGraph Platform</code> \u89c6\u56fe\u5f00\u59cb...</p> <ol> <li>\u5728\u53f3\u4e0a\u89d2,\u9009\u62e9\u9f7f\u8f6e\u56fe\u6807(<code>Deployment Settings</code>)\u3002</li> <li>\u5c06 <code>Git Branch</code> \u66f4\u65b0\u4e3a\u6240\u9700\u7684\u5206\u652f\u3002</li> <li>\u9009\u4e2d/\u53d6\u6d88\u9009\u4e2d\u590d\u9009\u6846\u4ee5 <code>Automatically update deployment on push to branch</code>\u3002</li> <li>\u5206\u652f\u521b\u5efa/\u5220\u9664\u548c\u6807\u7b7e\u521b\u5efa/\u5220\u9664\u4e8b\u4ef6\u4e0d\u4f1a\u89e6\u53d1\u66f4\u65b0\u3002\u53ea\u6709\u5bf9\u73b0\u6709\u5206\u652f\u7684\u63a8\u9001\u624d\u4f1a\u89e6\u53d1\u66f4\u65b0\u3002</li> <li>\u5feb\u901f\u8fde\u7eed\u63a8\u9001\u5230\u5206\u652f\u5c06\u6392\u961f\u540e\u7eed\u66f4\u65b0\u3002\u4e00\u65e6\u6784\u5efa\u5b8c\u6210,\u6700\u65b0\u63d0\u4ea4\u5c06\u5f00\u59cb\u6784\u5efa,\u5176\u4ed6\u6392\u961f\u7684\u6784\u5efa\u5c06\u88ab\u8df3\u8fc7\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#github","title":"\u6dfb\u52a0\u6216\u5220\u9664 GitHub \u5b58\u50a8\u5e93","text":"<p>\u5b89\u88c5\u5e76\u6388\u6743 LangChain \u7684 <code>hosted-langserve</code> GitHub \u5e94\u7528\u7a0b\u5e8f\u540e,\u53ef\u4ee5\u4fee\u6539\u5e94\u7528\u7a0b\u5e8f\u7684\u5b58\u50a8\u5e93\u8bbf\u95ee\u6743\u9650\u4ee5\u6dfb\u52a0\u65b0\u5b58\u50a8\u5e93\u6216\u5220\u9664\u73b0\u6709\u5b58\u50a8\u5e93\u3002\u5982\u679c\u521b\u5efa\u4e86\u65b0\u5b58\u50a8\u5e93,\u53ef\u80fd\u9700\u8981\u663e\u5f0f\u6dfb\u52a0\u5b83\u3002</p> <ol> <li>\u4ece GitHub \u4e2a\u4eba\u8d44\u6599,\u5bfc\u822a\u5230 <code>Settings</code> &gt; <code>Applications</code> &gt; <code>hosted-langserve</code> &gt; \u70b9\u51fb <code>Configure</code>\u3002</li> <li>\u5728 <code>Repository access</code> \u4e0b,\u9009\u62e9 <code>All repositories</code> \u6216 <code>Only select repositories</code>\u3002\u5982\u679c\u9009\u62e9 <code>Only select repositories</code>,\u5219\u5fc5\u987b\u663e\u5f0f\u6dfb\u52a0\u65b0\u5b58\u50a8\u5e93\u3002</li> <li>\u70b9\u51fb <code>Save</code>\u3002</li> <li>\u521b\u5efa\u65b0\u90e8\u7f72\u65f6,\u4e0b\u62c9\u83dc\u5355\u4e2d\u7684 GitHub \u5b58\u50a8\u5e93\u5217\u8868\u5c06\u66f4\u65b0\u4ee5\u53cd\u6620\u5b58\u50a8\u5e93\u8bbf\u95ee\u6743\u9650\u66f4\u6539\u3002</li> </ol>"},{"location":"cloud/deployment/cloud/#ip","title":"IP \u5730\u5740\u767d\u540d\u5355","text":"<p>\u4ece 2025 \u5e74 1 \u6708 6 \u65e5\u4e4b\u540e\u521b\u5efa\u7684 <code>LangGraph Platform</code> \u90e8\u7f72\u7684\u6240\u6709\u6d41\u91cf\u90fd\u5c06\u901a\u8fc7 NAT \u7f51\u5173\u3002 \u6b64 NAT \u7f51\u5173\u5c06\u6839\u636e\u4f60\u90e8\u7f72\u7684\u533a\u57df\u62e5\u6709\u591a\u4e2a\u9759\u6001 IP \u5730\u5740\u3002\u8bf7\u53c2\u9605\u4e0b\u8868\u4ee5\u83b7\u53d6\u8981\u52a0\u5165\u767d\u540d\u5355\u7684 IP \u5730\u5740\u5217\u8868:</p> US EU 35.197.29.146 34.90.213.236 34.145.102.123 34.13.244.114 34.169.45.153 34.32.180.189 34.82.222.17 34.34.69.108 35.227.171.135 34.32.145.240 34.169.88.30 34.90.157.44 34.19.93.202 34.141.242.180 34.19.34.50 34.32.141.108"},{"location":"cloud/deployment/custom_docker/","title":"\u5982\u4f55\u81ea\u5b9a\u4e49 Dockerfile","text":"<p>\u7528\u6237\u53ef\u4ee5\u6dfb\u52a0\u4e00\u4e2a\u9644\u52a0\u884c\u6570\u7ec4,\u5728\u4ece\u7236 LangGraph \u955c\u50cf\u5bfc\u5165\u540e\u5c06\u5176\u6dfb\u52a0\u5230 Dockerfile \u4e2d\u3002\u4e3a\u6b64,\u4f60\u53ea\u9700\u901a\u8fc7\u5c06\u8981\u8fd0\u884c\u7684\u547d\u4ee4\u4f20\u9012\u7ed9 <code>dockerfile_lines</code> \u952e\u6765\u4fee\u6539 <code>langgraph.json</code> \u6587\u4ef6\u3002\u4f8b\u5982,\u5982\u679c\u6211\u4eec\u60f3\u5728\u56fe\u4e2d\u4f7f\u7528 <code>Pillow</code>,\u4f60\u9700\u8981\u6dfb\u52a0\u4ee5\u4e0b\u4f9d\u8d56\u9879:</p> <pre><code>{\n    \"dependencies\": [\".\"],\n    \"graphs\": {\n        \"openai_agent\": \"./openai_agent.py:agent\",\n    },\n    \"env\": \"./.env\",\n    \"dockerfile_lines\": [\n        \"RUN apt-get update &amp;&amp; apt-get install -y libjpeg-dev zlib1g-dev libpng-dev\",\n        \"RUN pip install Pillow\"\n    ]\n}\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u4f7f\u7528 <code>jpeg</code> \u6216 <code>png</code> \u56fe\u50cf\u683c\u5f0f,\u8fd9\u5c06\u5b89\u88c5\u4f7f\u7528 Pillow \u6240\u9700\u7684\u7cfb\u7edf\u5305\u3002</p>"},{"location":"cloud/deployment/egress/","title":"\u8ba2\u9605\u6307\u6807\u548c\u8fd0\u8425\u5143\u6570\u636e\u7684\u51fa\u7ad9\u6d41\u91cf","text":"<p>\u91cd\u8981\u63d0\u793a:\u4ec5\u9650\u81ea\u6258\u7ba1 \u672c\u8282\u4ec5\u9002\u7528\u4e8e\u672a\u5728\u79bb\u7ebf\u6a21\u5f0f\u4e0b\u8fd0\u884c\u7684\u5ba2\u6237,\u5e76\u5047\u8bbe\u4f60\u6b63\u5728\u4f7f\u7528\u81ea\u6258\u7ba1\u7684 LangGraph Platform \u5b9e\u4f8b\u3002 \u8fd9\u4e0d\u9002\u7528\u4e8e SaaS \u6216\u6df7\u5408\u90e8\u7f72\u3002</p> <p>\u81ea\u6258\u7ba1\u7684 LangGraph Platform \u5b9e\u4f8b\u5728\u672c\u5730\u5b58\u50a8\u6240\u6709\u4fe1\u606f,\u6c38\u8fdc\u4e0d\u4f1a\u5c06\u654f\u611f\u4fe1\u606f\u53d1\u9001\u5230\u4f60\u7684\u7f51\u7edc\u4e4b\u5916\u3002\u6211\u4eec\u76ee\u524d\u4ec5\u6839\u636e\u4f60\u7684\u8ba2\u5355\u4e2d\u7684\u6743\u5229\u8ddf\u8e2a\u5e73\u53f0\u4f7f\u7528\u60c5\u51b5\u4ee5\u8fdb\u884c\u8ba1\u8d39\u3002\u4e3a\u4e86\u66f4\u597d\u5730\u8fdc\u7a0b\u652f\u6301\u6211\u4eec\u7684\u5ba2\u6237,\u6211\u4eec\u786e\u5b9e\u9700\u8981\u51fa\u7ad9\u8bbf\u95ee <code>https://beacon.langchain.com</code>\u3002</p> <p>\u672a\u6765,\u6211\u4eec\u5c06\u5f15\u5165\u652f\u6301\u8bca\u65ad\u529f\u80fd,\u4ee5\u5e2e\u52a9\u6211\u4eec\u786e\u4fdd LangGraph Platform \u5728\u4f60\u7684\u73af\u5883\u4e2d\u4ee5\u6700\u4f73\u6c34\u5e73\u8fd0\u884c\u3002</p> <p>\u8b66\u544a \u8fd9\u5c06\u9700\u8981\u4ece\u4f60\u7684\u7f51\u7edc\u51fa\u7ad9\u8bbf\u95ee <code>https://beacon.langchain.com</code>\u3002 \u5982\u679c\u4f7f\u7528 API \u5bc6\u94a5,\u4f60\u8fd8\u9700\u8981\u5141\u8bb8\u51fa\u7ad9\u8bbf\u95ee <code>https://api.smith.langchain.com</code> \u6216 <code>https://eu.api.smith.langchain.com</code> \u4ee5\u8fdb\u884c API \u5bc6\u94a5\u9a8c\u8bc1\u3002</p> <p>\u901a\u5e38,\u6211\u4eec\u53d1\u9001\u5230 Beacon \u7684\u6570\u636e\u53ef\u4ee5\u5206\u7c7b\u5982\u4e0b:</p> <ul> <li>\u8ba2\u9605\u6307\u6807</li> <li>\u8ba2\u9605\u6307\u6807\u7528\u4e8e\u786e\u5b9a LangSmith \u7684\u8bbf\u95ee\u7ea7\u522b\u548c\u5229\u7528\u7387\u3002\u8fd9\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e:<ul> <li>\u6267\u884c\u7684\u8282\u70b9\u6570</li> <li>\u6267\u884c\u7684\u8fd0\u884c\u6570</li> <li>\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u9a8c\u8bc1</li> </ul> </li> <li>\u8fd0\u8425\u5143\u6570\u636e</li> <li>\u6b64\u5143\u6570\u636e\u5c06\u5305\u542b\u5e76\u6536\u96c6\u4e0a\u8ff0\u8ba2\u9605\u6307\u6807,\u4ee5\u534f\u52a9\u8fdc\u7a0b\u652f\u6301,\u4f7f LangChain \u56e2\u961f\u80fd\u591f\u66f4\u6709\u6548\u5730\u4e3b\u52a8\u8bca\u65ad\u548c\u6392\u67e5\u6027\u80fd\u95ee\u9898\u3002</li> </ul>"},{"location":"cloud/deployment/egress/#_2","title":"\u793a\u4f8b\u6709\u6548\u8f7d\u8377","text":"<p>\u4e3a\u4e86\u6700\u5927\u9650\u5ea6\u5730\u63d0\u9ad8\u900f\u660e\u5ea6,\u6211\u4eec\u5728\u6b64\u63d0\u4f9b\u793a\u4f8b\u6709\u6548\u8f7d\u8377:</p>"},{"location":"cloud/deployment/egress/#_3","title":"\u8bb8\u53ef\u8bc1\u9a8c\u8bc1(\u5982\u679c\u4f7f\u7528\u4f01\u4e1a\u8bb8\u53ef\u8bc1)","text":"<p>\u7aef\u70b9:</p> <p><code>POST beacon.langchain.com/v1/beacon/verify</code></p> <p>\u8bf7\u6c42:</p> <pre><code>{\n  \"license\": \"&lt;YOUR_LICENSE_KEY&gt;\"\n}\n</code></pre> <p>\u54cd\u5e94:</p> <pre><code>{\n  \"token\": \"Valid JWT\" // \u77ed\u671f JWT \u4ee4\u724c,\u4ee5\u907f\u514d\u91cd\u590d\u7684\u8bb8\u53ef\u8bc1\u68c0\u67e5\n}\n</code></pre>"},{"location":"cloud/deployment/egress/#api-langsmith-api","title":"API \u5bc6\u94a5\u9a8c\u8bc1(\u5982\u679c\u4f7f\u7528 LangSmith API \u5bc6\u94a5)","text":"<p>\u7aef\u70b9: <code>POST api.smith.langchain.com/auth</code></p> <p>\u8bf7\u6c42:</p> <pre><code>\"Headers\": {\n  X-Api-Key: &lt;YOUR_API_KEY&gt;\n}\n</code></pre> <p>\u54cd\u5e94:</p> <pre><code>{\n  \"org_config\": {\n    \"org_id\": \"3a1c2b6f-4430-4b92-8a5b-79b8b567bbc1\",\n    ... // \u5176\u4ed6\u7ec4\u7ec7\u8be6\u7ec6\u4fe1\u606f\n  }\n}\n</code></pre>"},{"location":"cloud/deployment/egress/#_4","title":"\u4f7f\u7528\u60c5\u51b5\u62a5\u544a","text":"<p>\u7aef\u70b9:</p> <p><code>POST beacon.langchain.com/v1/metadata/submit</code></p> <p>\u8bf7\u6c42:</p> <pre><code>{\n  \"license\": \"&lt;YOUR_LICENSE_KEY&gt;\",\n  \"from_timestamp\": \"2025-01-06T09:00:00Z\",\n  \"to_timestamp\": \"2025-01-06T10:00:00Z\",\n  \"tags\": {\n    \"langgraph.python.version\": \"0.1.0\",\n    \"langgraph_api.version\": \"0.2.0\",\n    \"langgraph.platform.revision\": \"abc123\",\n    \"langgraph.platform.variant\": \"standard\",\n    \"langgraph.platform.host\": \"host-1\",\n    \"langgraph.platform.tenant_id\": \"3a1c2b6f-4430-4b92-8a5b-79b8b567bbc1\",\n    \"langgraph.platform.project_id\": \"c5b5f53a-4716-4326-8967-d4f7f7799735\",\n    \"langgraph.platform.plan\": \"enterprise\",\n    \"user_app.uses_indexing\": \"true\",\n    \"user_app.uses_custom_app\": \"false\",\n    \"user_app.uses_custom_auth\": \"true\",\n    \"user_app.uses_thread_ttl\": \"true\",\n    \"user_app.uses_store_ttl\": \"false\"\n  },\n  \"measures\": {\n    \"langgraph.platform.runs\": 150,\n    \"langgraph.platform.nodes\": 450\n  },\n  \"logs\": []\n}\n</code></pre> <p>\u54cd\u5e94:</p> <pre><code>\"204 No Content\"\n</code></pre>"},{"location":"cloud/deployment/egress/#_5","title":"\u6211\u4eec\u7684\u627f\u8bfa","text":"<p>LangChain \u4e0d\u4f1a\u5728\u8ba2\u9605\u6307\u6807\u6216\u8fd0\u8425\u5143\u6570\u636e\u4e2d\u5b58\u50a8\u4efb\u4f55\u654f\u611f\u4fe1\u606f\u3002\u6536\u96c6\u7684\u4efb\u4f55\u6570\u636e\u90fd\u4e0d\u4f1a\u4e0e\u7b2c\u4e09\u65b9\u5171\u4eab\u3002\u5982\u679c\u4f60\u5bf9\u53d1\u9001\u7684\u6570\u636e\u6709\u4efb\u4f55\u7591\u8651,\u8bf7\u8054\u7cfb\u4f60\u7684\u5ba2\u6237\u56e2\u961f\u3002</p>"},{"location":"cloud/deployment/graph_rebuild/","title":"\u5728\u8fd0\u884c\u65f6\u91cd\u5efa\u56fe","text":"<p>\u4f60\u53ef\u80fd\u9700\u8981\u4e3a\u65b0\u8fd0\u884c\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\u91cd\u5efa\u56fe\u3002\u4f8b\u5982,\u4f60\u53ef\u80fd\u9700\u8981\u6839\u636e\u914d\u7f6e\u4f7f\u7528\u4e0d\u540c\u7684\u56fe\u72b6\u6001\u6216\u56fe\u7ed3\u6784\u3002\u672c\u6307\u5357\u5c55\u793a\u4e86\u5982\u4f55\u6267\u884c\u6b64\u64cd\u4f5c\u3002</p> <p>\u6ce8\u610f</p> <p>\u5728\u5927\u591a\u6570\u60c5\u51b5\u4e0b,\u5e94\u8be5\u7531\u5355\u4e2a\u56fe\u5904\u7406\u57fa\u4e8e\u914d\u7f6e\u81ea\u5b9a\u4e49\u884c\u4e3a,\u5176\u4e2d\u6bcf\u4e2a\u8282\u70b9\u53ef\u4ee5\u8bfb\u53d6\u914d\u7f6e\u5e76\u6839\u636e\u5b83\u66f4\u6539\u5176\u884c\u4e3a</p>"},{"location":"cloud/deployment/graph_rebuild/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<p>\u8bf7\u52a1\u5fc5\u5148\u67e5\u770b\u672c\u64cd\u4f5c\u6307\u5357,\u4e86\u89e3\u5982\u4f55\u8bbe\u7f6e\u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u3002</p>"},{"location":"cloud/deployment/graph_rebuild/#_3","title":"\u5b9a\u4e49\u56fe","text":"<p>\u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f,\u5176\u4e2d\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u56fe,\u8be5\u56fe\u8c03\u7528 LLM \u5e76\u5c06\u54cd\u5e94\u8fd4\u56de\u7ed9\u7528\u6237\u3002\u5e94\u7528\u7a0b\u5e8f\u6587\u4ef6\u76ee\u5f55\u5982\u4e0b\u6240\u793a:</p> <pre><code>my-app/\n|-- requirements.txt\n|-- .env\n|-- openai_agent.py     # \u56fe\u7684\u4ee3\u7801\n</code></pre> <p>\u5176\u4e2d\u56fe\u5728 <code>openai_agent.py</code> \u4e2d\u5b9a\u4e49\u3002</p>"},{"location":"cloud/deployment/graph_rebuild/#_4","title":"\u65e0\u91cd\u5efa","text":"<p>\u5728\u6807\u51c6 LangGraph API \u914d\u7f6e\u4e2d,\u670d\u52a1\u5668\u4f7f\u7528\u5728 <code>openai_agent.py</code> \u9876\u5c42\u5b9a\u4e49\u7684\u5df2\u7f16\u8bd1\u56fe\u5b9e\u4f8b,\u5982\u4e0b\u6240\u793a:</p> <pre><code>from langchain_openai import ChatOpenAI\nfrom langgraph.graph import END, START, MessageGraph\n\nmodel = ChatOpenAI(temperature=0)\n\ngraph_workflow = MessageGraph()\n\ngraph_workflow.add_node(\"agent\", model)\ngraph_workflow.add_edge(\"agent\", END)\ngraph_workflow.add_edge(START, \"agent\")\n\nagent = graph_workflow.compile()\n</code></pre> <p>\u8981\u4f7f\u670d\u52a1\u5668\u77e5\u9053\u4f60\u7684\u56fe,\u4f60\u9700\u8981\u5728 LangGraph API \u914d\u7f6e(<code>langgraph.json</code>)\u4e2d\u6307\u5b9a\u5305\u542b <code>CompiledStateGraph</code> \u5b9e\u4f8b\u7684\u53d8\u91cf\u7684\u8def\u5f84,\u4f8b\u5982:</p> <pre><code>{\n    \"dependencies\": [\".\"],\n    \"graphs\": {\n        \"openai_agent\": \"./openai_agent.py:agent\",\n    },\n    \"env\": \"./.env\"\n}\n</code></pre>"},{"location":"cloud/deployment/graph_rebuild/#_5","title":"\u91cd\u5efa","text":"<p>\u8981\u4f7f\u56fe\u5728\u6bcf\u6b21\u65b0\u8fd0\u884c\u65f6\u4f7f\u7528\u81ea\u5b9a\u4e49\u914d\u7f6e\u91cd\u5efa,\u4f60\u9700\u8981\u91cd\u5199 <code>openai_agent.py</code>,\u6539\u4e3a\u63d0\u4f9b\u4e00\u4e2a\u63a5\u53d7\u914d\u7f6e\u5e76\u8fd4\u56de\u56fe(\u6216\u5df2\u7f16\u8bd1\u56fe)\u5b9e\u4f8b\u7684_\u51fd\u6570_\u3002\u5047\u8bbe\u6211\u4eec\u60f3\u4e3a\u7528\u6237 ID '1' \u8fd4\u56de\u73b0\u6709\u56fe,\u5e76\u4e3a\u5176\u4ed6\u7528\u6237\u8fd4\u56de\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u3002\u6211\u4eec\u53ef\u4ee5\u6309\u5982\u4e0b\u65b9\u5f0f\u4fee\u6539 <code>openai_agent.py</code>:</p> <pre><code>from typing import Annotated\nfrom typing_extensions import TypedDict\nfrom langchain_openai import ChatOpenAI\nfrom langgraph.graph import END, START, MessageGraph\nfrom langgraph.graph.state import StateGraph\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode\nfrom langchain_core.tools import tool\nfrom langchain_core.messages import BaseMessage\nfrom langchain_core.runnables import RunnableConfig\n\n\nclass State(TypedDict):\n    messages: Annotated[list[BaseMessage], add_messages]\n\n\nmodel = ChatOpenAI(temperature=0)\n\ndef make_default_graph():\n    \"\"\"Make a simple LLM agent\"\"\"\n    graph_workflow = StateGraph(State)\n    def call_model(state):\n        return {\"messages\": [model.invoke(state[\"messages\"])]}\n\n    graph_workflow.add_node(\"agent\", call_model)\n    graph_workflow.add_edge(\"agent\", END)\n    graph_workflow.add_edge(START, \"agent\")\n\n    agent = graph_workflow.compile()\n    return agent\n\n\ndef make_alternative_graph():\n    \"\"\"Make a tool-calling agent\"\"\"\n\n    @tool\n    def add(a: float, b: float):\n        \"\"\"Adds two numbers.\"\"\"\n        return a + b\n\n    tool_node = ToolNode([add])\n    model_with_tools = model.bind_tools([add])\n    def call_model(state):\n        return {\"messages\": [model_with_tools.invoke(state[\"messages\"])]}\n\n    def should_continue(state: State):\n        if state[\"messages\"][-1].tool_calls:\n            return \"tools\"\n        else:\n            return END\n\n    graph_workflow = StateGraph(State)\n\n    graph_workflow.add_node(\"agent\", call_model)\n    graph_workflow.add_node(\"tools\", tool_node)\n    graph_workflow.add_edge(\"tools\", \"agent\")\n    graph_workflow.add_edge(START, \"agent\")\n    graph_workflow.add_conditional_edges(\"agent\", should_continue)\n\n    agent = graph_workflow.compile()\n    return agent\n\n\n# this is the graph making function that will decide which graph to\n# build based on the provided config\ndef make_graph(config: RunnableConfig):\n    user_id = config.get(\"configurable\", {}).get(\"user_id\")\n    # route to different graph state / structure based on the user ID\n    if user_id == \"1\":\n        return make_default_graph()\n    else:\n        return make_alternative_graph()\n</code></pre> <p>\u6700\u540e,\u4f60\u9700\u8981\u5728 <code>langgraph.json</code> \u4e2d\u6307\u5b9a\u56fe\u521b\u5efa\u51fd\u6570(<code>make_graph</code>)\u7684\u8def\u5f84:</p> <pre><code>{\n    \"dependencies\": [\".\"],\n    \"graphs\": {\n        \"openai_agent\": \"./openai_agent.py:make_graph\",\n    },\n    \"env\": \"./.env\"\n}\n</code></pre> <p>\u6709\u5173 LangGraph API \u914d\u7f6e\u6587\u4ef6\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u89c1\u6b64\u5904</p>"},{"location":"cloud/deployment/self_hosted_control_plane/","title":"\u5982\u4f55\u90e8\u7f72\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762","text":"<p>\u5728\u90e8\u7f72\u4e4b\u524d,\u8bf7\u67e5\u770b\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u7684\u6982\u5ff5\u6307\u5357\u3002</p> <p>\u91cd\u8981\u63d0\u793a</p> <p>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u9700\u8981\u4f01\u4e1a\u7248\u8ba1\u5212\u3002</p>"},{"location":"cloud/deployment/self_hosted_control_plane/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ol> <li>\u4f60\u6b63\u5728\u4f7f\u7528 Kubernetes\u3002</li> <li>\u4f60\u5df2\u90e8\u7f72\u81ea\u6258\u7ba1 LangSmith\u3002</li> <li>\u4f7f\u7528 LangGraph CLI \u5728\u672c\u5730\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u4f7f\u7528 LangGraph CLI \u6784\u5efa Docker \u955c\u50cf(\u5373 <code>langgraph build</code>)\u5e76\u5c06\u5176\u63a8\u9001\u5230\u4f60\u7684 Kubernetes \u96c6\u7fa4\u6709\u6743\u8bbf\u95ee\u7684\u6ce8\u518c\u8868\u3002</li> <li> <p>\u5728\u4f60\u7684\u96c6\u7fa4\u4e0a\u5b89\u88c5 <code>KEDA</code>\u3002</p> <pre><code> helm repo add kedacore https://kedacore.github.io/charts\n helm install keda kedacore/keda --namespace keda --create-namespace\n</code></pre> <ol> <li>Ingress \u914d\u7f6e</li> <li>\u4f60\u5fc5\u987b\u4e3a\u4f60\u7684 LangSmith \u5b9e\u4f8b\u8bbe\u7f6e\u4e00\u4e2a ingress\u3002\u6240\u6709\u667a\u80fd\u4ee3\u7406\u5c06\u4f5c\u4e3a Kubernetes \u670d\u52a1\u90e8\u7f72\u5728\u6b64 ingress \u4e4b\u540e\u3002</li> <li>\u4f60\u53ef\u4ee5\u4f7f\u7528\u6b64\u6307\u5357\u4e3a\u4f60\u7684\u5b9e\u4f8b\u8bbe\u7f6e ingress\u3002</li> <li>\u4f60\u7684\u96c6\u7fa4\u4e2d\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u7528\u4e8e\u591a\u4e2a\u90e8\u7f72\u3002\u5efa\u8bae\u4f7f\u7528 <code>Cluster-Autoscaler</code> \u81ea\u52a8\u914d\u7f6e\u65b0\u8282\u70b9\u3002</li> <li> <p>\u4f60\u7684\u96c6\u7fa4\u4e0a\u6709\u6709\u6548\u7684\u52a8\u6001 PV \u914d\u7f6e\u5668\u6216\u53ef\u7528\u7684 PV\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u9a8c\u8bc1\u8fd9\u4e00\u70b9:</p> <p>kubectl get storageclass</p> </li> </ol> </li> <li> <p>\u4ece\u4f60\u7684\u7f51\u7edc\u51fa\u7ad9\u8bbf\u95ee <code>https://beacon.langchain.com</code>\u3002\u5982\u679c\u4e0d\u5728\u6c14\u9699\u6a21\u5f0f\u4e0b\u8fd0\u884c,\u5219\u9700\u8981\u6b64\u8bbf\u95ee\u6743\u9650\u4ee5\u8fdb\u884c\u8bb8\u53ef\u8bc1\u9a8c\u8bc1\u548c\u4f7f\u7528\u60c5\u51b5\u62a5\u544a\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u51fa\u7ad9\u6d41\u91cf\u6587\u6863\u3002</p> </li> </ol>"},{"location":"cloud/deployment/self_hosted_control_plane/#_3","title":"\u8bbe\u7f6e","text":"<ol> <li>\u4f5c\u4e3a\u914d\u7f6e\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b\u7684\u4e00\u90e8\u5206,\u4f60\u542f\u7528 <code>langgraphPlatform</code> \u9009\u9879\u3002\u8fd9\u5c06\u914d\u7f6e\u4e00\u4e9b\u5173\u952e\u8d44\u6e90\u3002<ol> <li><code>listener</code>: \u8fd9\u662f\u4e00\u4e2a\u670d\u52a1,\u7528\u4e8e\u76d1\u542c\u63a7\u5236\u5e73\u9762\u4ee5\u83b7\u53d6\u4f60\u7684\u90e8\u7f72\u7684\u66f4\u6539,\u5e76\u521b\u5efa/\u66f4\u65b0\u4e0b\u6e38 CRD\u3002</li> <li><code>LangGraphPlatform CRD</code>: \u7528\u4e8e LangGraph Platform \u90e8\u7f72\u7684 CRD\u3002\u8fd9\u5305\u542b\u7528\u4e8e\u7ba1\u7406 LangGraph \u5e73\u53f0\u90e8\u7f72\u5b9e\u4f8b\u7684\u89c4\u8303\u3002</li> <li><code>operator</code>: \u6b64\u64cd\u4f5c\u5458\u5904\u7406\u5bf9\u4f60\u7684 LangGraph Platform CRD \u7684\u66f4\u6539\u3002</li> <li><code>host-backend</code>: \u8fd9\u662f\u63a7\u5236\u5e73\u9762\u3002</li> </ol> </li> <li> <p>\u56fe\u8868\u5c06\u4f7f\u7528\u4e24\u4e2a\u989d\u5916\u7684\u955c\u50cf\u3002\u4f7f\u7528\u6700\u65b0\u7248\u672c\u4e2d\u6307\u5b9a\u7684\u955c\u50cf\u3002</p> <pre><code>hostBackendImage:\n  repository: \"docker.io/langchain/hosted-langserve-backend\"\n  pullPolicy: IfNotPresent\noperatorImage:\n  repository: \"docker.io/langchain/langgraph-operator\"\n  pullPolicy: IfNotPresent\n</code></pre> </li> <li> <p>\u5728\u4f60\u7684 langsmith \u914d\u7f6e\u6587\u4ef6\u4e2d(\u901a\u5e38\u4e3a <code>langsmith_config.yaml</code>),\u542f\u7528 <code>langgraphPlatform</code> \u9009\u9879\u3002\u8bf7\u6ce8\u610f,\u4f60\u8fd8\u5fc5\u987b\u8bbe\u7f6e\u6709\u6548\u7684 ingress:</p> <pre><code>config:\n  langgraphPlatform:\n    enabled: true\n    langgraphPlatformLicenseKey: \"YOUR_LANGGRAPH_PLATFORM_LICENSE_KEY\"\n</code></pre> <ol> <li>\u5728\u4f60\u7684 <code>values.yaml</code> \u6587\u4ef6\u4e2d,\u914d\u7f6e <code>hostBackendImage</code> \u548c <code>operatorImage</code> \u9009\u9879(\u5982\u679c\u9700\u8981\u955c\u50cf\u955c\u50cf)</li> </ol> </li> <li> <p>\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7\u8986\u76d6\u6b64\u5904\u7684\u57fa\u7840\u6a21\u677f\u6765\u914d\u7f6e\u667a\u80fd\u4ee3\u7406\u7684\u57fa\u7840\u6a21\u677f\u3002</p> </li> <li>\u4f60\u4ece\u63a7\u5236\u5e73\u9762 UI \u521b\u5efa\u90e8\u7f72\u3002</li> </ol>"},{"location":"cloud/deployment/self_hosted_data_plane/","title":"\u5982\u4f55\u90e8\u7f72\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762","text":"<p>\u5728\u90e8\u7f72\u4e4b\u524d,\u8bf7\u67e5\u770b\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u7684\u6982\u5ff5\u6307\u5357\u3002</p> <p>\u91cd\u8981\u63d0\u793a</p> <p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u9700\u8981\u4f01\u4e1a\u7248\u8ba1\u5212\u3002</p>"},{"location":"cloud/deployment/self_hosted_data_plane/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ol> <li>\u4f7f\u7528 LangGraph CLI \u5728\u672c\u5730\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u4f7f\u7528 LangGraph CLI \u6784\u5efa Docker \u955c\u50cf(\u5373 <code>langgraph build</code>)\u5e76\u5c06\u5176\u63a8\u9001\u5230\u4f60\u7684 Kubernetes \u96c6\u7fa4\u6216 Amazon ECS \u96c6\u7fa4\u6709\u6743\u8bbf\u95ee\u7684\u6ce8\u518c\u8868\u3002</li> </ol>"},{"location":"cloud/deployment/self_hosted_data_plane/#kubernetes","title":"Kubernetes","text":""},{"location":"cloud/deployment/self_hosted_data_plane/#_3","title":"\u5148\u51b3\u6761\u4ef6","text":"<ol> <li> <p>\u5728\u4f60\u7684\u96c6\u7fa4\u4e0a\u5b89\u88c5 <code>KEDA</code>\u3002</p> <pre><code>helm repo add kedacore https://kedacore.github.io/charts\nhelm install keda kedacore/keda --namespace keda --create-namespace\n</code></pre> </li> <li> <p>\u5728\u4f60\u7684\u96c6\u7fa4\u4e0a\u5b89\u88c5\u6709\u6548\u7684 <code>Ingress</code> \u63a7\u5236\u5668\u3002</p> </li> <li>\u4f60\u7684\u96c6\u7fa4\u4e2d\u6709\u8db3\u591f\u7684\u7a7a\u95f4\u7528\u4e8e\u591a\u4e2a\u90e8\u7f72\u3002\u5efa\u8bae\u4f7f\u7528 <code>Cluster-Autoscaler</code> \u81ea\u52a8\u914d\u7f6e\u65b0\u8282\u70b9\u3002</li> <li>\u4f60\u9700\u8981\u542f\u7528\u5bf9\u4e24\u4e2a\u63a7\u5236\u5e73\u9762 URL \u7684\u51fa\u7ad9\u8bbf\u95ee\u3002\u76d1\u542c\u5668\u4f1a\u8f6e\u8be2\u8fd9\u4e9b\u7aef\u70b9\u4ee5\u83b7\u53d6\u90e8\u7f72:<pre><code>https://api.host.langchain.com\nhttps://api.smith.langchain.com\n</code></pre> </li> </ol>"},{"location":"cloud/deployment/self_hosted_data_plane/#_4","title":"\u8bbe\u7f6e","text":"<ol> <li>\u4f60\u5411\u6211\u4eec\u63d0\u4f9b\u4f60\u7684 LangSmith \u7ec4\u7ec7 ID\u3002\u6211\u4eec\u5c06\u4e3a\u4f60\u7684\u7ec4\u7ec7\u542f\u7528\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u3002</li> <li>\u6211\u4eec\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a Helm \u56fe\u8868,\u4f60\u8fd0\u884c\u5b83\u6765\u8bbe\u7f6e\u4f60\u7684 Kubernetes \u96c6\u7fa4\u3002\u6b64\u56fe\u8868\u5305\u542b\u4e00\u4e9b\u91cd\u8981\u7ec4\u4ef6\u3002<ol> <li><code>langgraph-listener</code>: \u8fd9\u662f\u4e00\u4e2a\u670d\u52a1,\u7528\u4e8e\u76d1\u542c LangChain \u7684\u63a7\u5236\u5e73\u9762\u4ee5\u83b7\u53d6\u4f60\u7684\u90e8\u7f72\u7684\u66f4\u6539,\u5e76\u521b\u5efa/\u66f4\u65b0\u4e0b\u6e38 CRD\u3002</li> <li><code>LangGraphPlatform CRD</code>: \u7528\u4e8e LangGraph Platform \u90e8\u7f72\u7684 CRD\u3002\u8fd9\u5305\u542b\u7528\u4e8e\u7ba1\u7406 LangGraph Platform \u90e8\u7f72\u5b9e\u4f8b\u7684\u89c4\u8303\u3002</li> <li><code>langgraph-platform-operator</code>: \u6b64\u64cd\u4f5c\u5458\u5904\u7406\u5bf9\u4f60\u7684 LangGraph Platform CRD \u7684\u66f4\u6539\u3002</li> </ol> </li> <li> <p>\u914d\u7f6e\u4f60\u7684 <code>langgraph-dataplane-values.yaml</code> \u6587\u4ef6\u3002</p> <pre><code>config:\n  langsmithApiKey: \"\" # \u4f60\u7684\u5de5\u4f5c\u533a\u7684 API \u5bc6\u94a5\n  langsmithWorkspaceId: \"\" # \u5de5\u4f5c\u533a ID\n  hostBackendUrl: \"https://api.host.langchain.com\" # \u4ec5\u5728 EU \u65f6\u8986\u76d6\n  smithBackendUrl: \"https://api.smith.langchain.com\" # \u4ec5\u5728 EU \u65f6\u8986\u76d6\n</code></pre> </li> <li> <p>\u90e8\u7f72 <code>langgraph-dataplane</code> Helm \u56fe\u8868\u3002</p> <pre><code>helm repo add langchain https://langchain-ai.github.io/helm/\nhelm repo update\nhelm upgrade -i langgraph-dataplane langchain/langgraph-dataplane --values langgraph-dataplane-values.yaml\n</code></pre> </li> <li> <p>\u5982\u679c\u6210\u529f,\u4f60\u5c06\u770b\u5230\u4e24\u4e2a\u670d\u52a1\u5728\u4f60\u7684\u547d\u540d\u7a7a\u95f4\u4e2d\u542f\u52a8\u3002</p> <pre><code>NAME                                          READY   STATUS              RESTARTS   AGE\nlanggraph-dataplane-listener-7fccd788-wn2dx   0/1     Running             0          9s\nlanggraph-dataplane-redis-0                   0/1     ContainerCreating   0          9s\n</code></pre> </li> <li> <p>\u4f60\u4ece\u63a7\u5236\u5e73\u9762 UI \u521b\u5efa\u90e8\u7f72\u3002</p> </li> </ol>"},{"location":"cloud/deployment/self_hosted_data_plane/#amazon-ecs","title":"Amazon ECS","text":"<p>\u5373\u5c06\u63a8\u51fa!</p>"},{"location":"cloud/deployment/semantic_search/","title":"\u5982\u4f55\u5c06\u8bed\u4e49\u641c\u7d22\u6dfb\u52a0\u5230 LangGraph \u90e8\u7f72","text":"<p>\u672c\u6307\u5357\u4ecb\u7ecd\u5982\u4f55\u5c06\u8bed\u4e49\u641c\u7d22\u6dfb\u52a0\u5230 LangGraph \u90e8\u7f72\u7684\u8de8\u7ebf\u7a0b\u5b58\u50a8,\u4ee5\u4fbf\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u6309\u8bed\u4e49\u76f8\u4f3c\u5ea6\u641c\u7d22\u8bb0\u5fc6\u548c\u5176\u4ed6\u6587\u6863\u3002</p>"},{"location":"cloud/deployment/semantic_search/#_1","title":"\u5148\u51b3\u6761\u4ef6","text":"<ul> <li>\u4e00\u4e2a LangGraph \u90e8\u7f72(\u8bf7\u53c2\u9605\u5982\u4f55\u90e8\u7f72)</li> <li>\u4f60\u7684\u5d4c\u5165\u63d0\u4f9b\u5546\u7684 API \u5bc6\u94a5(\u5728\u672c\u4f8b\u4e2d\u4e3a OpenAI)</li> <li><code>langchain &gt;= 0.3.8</code>(\u5982\u679c\u4f60\u4f7f\u7528\u4e0b\u9762\u7684\u5b57\u7b26\u4e32\u683c\u5f0f\u6307\u5b9a)</li> </ul>"},{"location":"cloud/deployment/semantic_search/#_2","title":"\u6b65\u9aa4","text":"<ol> <li>\u66f4\u65b0\u4f60\u7684 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4ee5\u5305\u542b\u5b58\u50a8\u914d\u7f6e:</li> </ol> <pre><code>{\n    ...\n    \"store\": {\n        \"index\": {\n            \"embed\": \"openai:text-embedding-3-small\",\n            \"dims\": 1536,\n            \"fields\": [\"$\"]\n        }\n    }\n}\n</code></pre> <p>\u6b64\u914d\u7f6e:</p> <ul> <li>\u4f7f\u7528 OpenAI \u7684 text-embedding-3-small \u6a21\u578b\u751f\u6210\u5d4c\u5165</li> <li>\u5c06\u5d4c\u5165\u7ef4\u5ea6\u8bbe\u7f6e\u4e3a 1536(\u4e0e\u6a21\u578b\u7684\u8f93\u51fa\u5339\u914d)</li> <li> <p>\u7d22\u5f15\u5b58\u50a8\u6570\u636e\u4e2d\u7684\u6240\u6709\u5b57\u6bb5(<code>[\"$\"]</code> \u8868\u793a\u7d22\u5f15\u6240\u6709\u5185\u5bb9,\u6216\u6307\u5b9a\u7279\u5b9a\u5b57\u6bb5,\u5982 <code>[\"text\", \"metadata.title\"]</code>)</p> </li> <li> <p>\u8981\u4f7f\u7528\u4e0a\u9762\u7684\u5b57\u7b26\u4e32\u5d4c\u5165\u683c\u5f0f,\u8bf7\u786e\u4fdd\u4f60\u7684\u4f9d\u8d56\u9879\u5305\u542b <code>langchain &gt;= 0.3.8</code>:</p> </li> </ul> <pre><code># \u5728 pyproject.toml \u4e2d\n[project]\ndependencies = [\n    \"langchain&gt;=0.3.8\"\n]\n</code></pre> <p>\u6216\u8005\u5982\u679c\u4f7f\u7528 requirements.txt:</p> <pre><code>langchain&gt;=0.3.8\n</code></pre>"},{"location":"cloud/deployment/semantic_search/#_3","title":"\u4f7f\u7528","text":"<p>\u914d\u7f6e\u5b8c\u6210\u540e,\u4f60\u53ef\u4ee5\u5728 LangGraph \u8282\u70b9\u4e2d\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u3002\u5b58\u50a8\u9700\u8981\u4e00\u4e2a\u547d\u540d\u7a7a\u95f4\u5143\u7ec4\u6765\u7ec4\u7ec7\u8bb0\u5fc6:</p> <pre><code>def search_memory(state: State, *, store: BaseStore):\n    # \u4f7f\u7528\u8bed\u4e49\u76f8\u4f3c\u5ea6\u641c\u7d22\u5b58\u50a8\n    # \u547d\u540d\u7a7a\u95f4\u5143\u7ec4\u6709\u52a9\u4e8e\u7ec4\u7ec7\u4e0d\u540c\u7c7b\u578b\u7684\u8bb0\u5fc6\n    # \u4f8b\u5982,(\"user_facts\", \"preferences\") \u6216 (\"conversation\", \"summaries\")\n    results = store.search(\n        namespace=(\"memory\", \"facts\"),  # \u6309\u7c7b\u578b\u7ec4\u7ec7\u8bb0\u5fc6\n        query=\"your search query\",\n        limit=3  # \u8981\u8fd4\u56de\u7684\u7ed3\u679c\u6570\u91cf\n    )\n    return results\n</code></pre>"},{"location":"cloud/deployment/semantic_search/#_4","title":"\u81ea\u5b9a\u4e49\u5d4c\u5165","text":"<p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u81ea\u5b9a\u4e49\u5d4c\u5165,\u53ef\u4ee5\u4f20\u9012\u81ea\u5b9a\u4e49\u5d4c\u5165\u51fd\u6570\u7684\u8def\u5f84:</p> <pre><code>{\n    ...\n    \"store\": {\n        \"index\": {\n            \"embed\": \"path/to/embedding_function.py:embed\",\n            \"dims\": 1536,\n            \"fields\": [\"$\"]\n        }\n    }\n}\n</code></pre> <p>\u90e8\u7f72\u5c06\u5728\u6307\u5b9a\u8def\u5f84\u4e2d\u67e5\u627e\u51fd\u6570\u3002\u8be5\u51fd\u6570\u5fc5\u987b\u662f\u5f02\u6b65\u7684\u5e76\u63a5\u53d7\u5b57\u7b26\u4e32\u5217\u8868:</p> <pre><code># path/to/embedding_function.py\nfrom openai import AsyncOpenAI\n\nclient = AsyncOpenAI()\n\nasync def aembed_texts(texts: list[str]) -&gt; list[list[float]]:\n    \"\"\"\u81ea\u5b9a\u4e49\u5d4c\u5165\u51fd\u6570\u5fc5\u987b:\n    1. \u662f\u5f02\u6b65\u7684\n    2. \u63a5\u53d7\u5b57\u7b26\u4e32\u5217\u8868\n    3. \u8fd4\u56de\u6d6e\u70b9\u6570\u7ec4\u5217\u8868(\u5d4c\u5165)\n    \"\"\"\n    response = await client.embeddings.create(\n        model=\"text-embedding-3-small\",\n        input=texts\n    )\n    return [e.embedding for e in response.data]\n</code></pre>"},{"location":"cloud/deployment/semantic_search/#api","title":"\u901a\u8fc7 API \u67e5\u8be2","text":"<p>\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 LangGraph SDK \u67e5\u8be2\u5b58\u50a8\u3002\u7531\u4e8e SDK \u4f7f\u7528\u5f02\u6b65\u64cd\u4f5c:</p> <pre><code>from langgraph_sdk import get_client\n\nasync def search_store():\n    client = get_client()\n    results = await client.store.search_items(\n        (\"memory\", \"facts\"),\n        query=\"your search query\",\n        limit=3  # \u8981\u8fd4\u56de\u7684\u7ed3\u679c\u6570\u91cf\n    )\n    return results\n\n# \u5728\u5f02\u6b65\u4e0a\u4e0b\u6587\u4e2d\u4f7f\u7528\nresults = await search_store()\n</code></pre>"},{"location":"cloud/deployment/setup/","title":"\u5982\u4f55\u4f7f\u7528 requirements.txt \u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f","text":"<p>LangGraph \u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u914d\u7f6e LangGraph \u914d\u7f6e\u6587\u4ef6\u624d\u80fd\u90e8\u7f72\u5230 LangGraph Platform(\u6216\u81ea\u6258\u7ba1)\u3002\u672c\u64cd\u4f5c\u6307\u5357\u8ba8\u8bba\u4f7f\u7528 <code>requirements.txt</code> \u6307\u5b9a\u9879\u76ee\u4f9d\u8d56\u9879\u6765\u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u7684\u57fa\u672c\u6b65\u9aa4\u3002</p> <p>\u672c\u6f14\u7ec3\u57fa\u4e8e\u6b64\u5b58\u50a8\u5e93,\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u4e86\u89e3\u6709\u5173\u5982\u4f55\u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u4f7f\u7528 pyproject.toml \u8bbe\u7f6e</p> <p>\u5982\u679c\u4f60\u66f4\u559c\u6b22\u4f7f\u7528 poetry \u8fdb\u884c\u4f9d\u8d56\u7ba1\u7406,\u8bf7\u67e5\u770b\u672c\u64cd\u4f5c\u6307\u5357,\u4e86\u89e3\u5982\u4f55\u4f7f\u7528 <code>pyproject.toml</code> \u8fdb\u884c LangGraph Platform \u8bbe\u7f6e\u3002</p> <p>\u4f7f\u7528\u5355\u4f53\u4ed3\u5e93\u8bbe\u7f6e</p> <p>\u5982\u679c\u4f60\u6709\u5174\u8da3\u90e8\u7f72\u4f4d\u4e8e\u5355\u4f53\u4ed3\u5e93\u5185\u7684\u56fe,\u8bf7\u67e5\u770b\u6b64\u5b58\u50a8\u5e93\u4ee5\u83b7\u53d6\u5982\u4f55\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u793a\u4f8b\u3002</p> <p>\u6700\u7ec8\u7684\u5b58\u50a8\u5e93\u7ed3\u6784\u5c06\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 requirements.txt # \u5305\u4f9d\u8d56\u9879\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u2514\u2500\u2500 langgraph.json # LangGraph \u914d\u7f6e\u6587\u4ef6\n</code></pre> <p>\u6bcf\u4e00\u6b65\u4e4b\u540e,\u90fd\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55\u6765\u6f14\u793a\u5982\u4f55\u7ec4\u7ec7\u4ee3\u7801\u3002</p>"},{"location":"cloud/deployment/setup/#_1","title":"\u6307\u5b9a\u4f9d\u8d56\u9879","text":"<p>\u53ef\u4ee5\u5728\u4ee5\u4e0b\u6587\u4ef6\u4e4b\u4e00\u4e2d\u53ef\u9009\u5730\u6307\u5b9a\u4f9d\u8d56\u9879:<code>pyproject.toml</code>\u3001<code>setup.py</code> \u6216 <code>requirements.txt</code>\u3002\u5982\u679c\u6ca1\u6709\u521b\u5efa\u8fd9\u4e9b\u6587\u4ef6,\u5219\u53ef\u4ee5\u7a0d\u540e\u5728 LangGraph \u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\u3002</p> <p>\u4ee5\u4e0b\u4f9d\u8d56\u9879\u5c06\u5305\u542b\u5728\u955c\u50cf\u4e2d,\u4f60\u4e5f\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u5b83\u4eec,\u53ea\u8981\u4f7f\u7528\u517c\u5bb9\u7684\u7248\u672c\u8303\u56f4:</p> <pre><code>langgraph&gt;=0.3.27\nlanggraph-sdk&gt;=0.1.66\nlanggraph-checkpoint&gt;=2.0.23\nlangchain-core&gt;=0.2.38\nlangsmith&gt;=0.1.63\norjson&gt;=3.9.7,&lt;3.10.17\nhttpx&gt;=0.25.0\ntenacity&gt;=8.0.0\nuvicorn&gt;=0.26.0\nsse-starlette&gt;=2.1.0,&lt;2.2.0\nuvloop&gt;=0.18.0\nhttptools&gt;=0.5.0\njsonschema-rs&gt;=0.20.0\nstructlog&gt;=24.1.0\ncloudpickle&gt;=3.0.0\n</code></pre> <p>\u793a\u4f8b <code>requirements.txt</code> \u6587\u4ef6:</p> <pre><code>langgraph\nlangchain_anthropic\ntavily-python\nlangchain_community\nlangchain_openai\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u2514\u2500\u2500 requirements.txt # \u5305\u4f9d\u8d56\u9879\n</code></pre>"},{"location":"cloud/deployment/setup/#_2","title":"\u6307\u5b9a\u73af\u5883\u53d8\u91cf","text":"<p>\u53ef\u4ee5\u5728\u6587\u4ef6(\u4f8b\u5982 <code>.env</code>)\u4e2d\u53ef\u9009\u5730\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u3002\u8bf7\u53c2\u9605\u73af\u5883\u53d8\u91cf\u53c2\u8003\u4ee5\u914d\u7f6e\u90e8\u7f72\u7684\u5176\u4ed6\u53d8\u91cf\u3002</p> <p>\u793a\u4f8b <code>.env</code> \u6587\u4ef6:</p> <pre><code>MY_ENV_VAR_1=foo\nMY_ENV_VAR_2=bar\nOPENAI_API_KEY=key\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u2514\u2500\u2500 requirements.txt # \u5305\u4f9d\u8d56\u9879\n\u2514\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n</code></pre>"},{"location":"cloud/deployment/setup/#_3","title":"\u5b9a\u4e49\u56fe","text":"<p>\u5b9e\u73b0\u4f60\u7684\u56fe!\u56fe\u53ef\u4ee5\u5728\u5355\u4e2a\u6587\u4ef6\u6216\u591a\u4e2a\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002\u8bb0\u4e0b\u8981\u5305\u542b\u5728 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6bcf\u4e2a @[CompiledStateGraph][] \u7684\u53d8\u91cf\u540d\u79f0\u3002\u521b\u5efa LangGraph \u914d\u7f6e\u6587\u4ef6\u65f6\u5c06\u4f7f\u7528\u53d8\u91cf\u540d\u79f0\u3002</p> <p>\u793a\u4f8b <code>agent.py</code> \u6587\u4ef6,\u5c55\u793a\u5982\u4f55\u4ece\u4f60\u5b9a\u4e49\u7684\u5176\u4ed6\u6a21\u5757\u5bfc\u5165(\u6b64\u5904\u672a\u663e\u793a\u6a21\u5757\u7684\u4ee3\u7801,\u8bf7\u53c2\u9605\u6b64\u5b58\u50a8\u5e93\u4ee5\u67e5\u770b\u5176\u5b9e\u73b0):</p> <pre><code># my_agent/agent.py\nfrom typing import Literal\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph import StateGraph, END, START\nfrom my_agent.utils.nodes import call_model, should_continue, tool_node # import nodes\nfrom my_agent.utils.state import AgentState # import state\n\n# Define the runtime context\nclass GraphContext(TypedDict):\n    model_name: Literal[\"anthropic\", \"openai\"]\n\nworkflow = StateGraph(AgentState, context_schema=GraphContext)\nworkflow.add_node(\"agent\", call_model)\nworkflow.add_node(\"action\", tool_node)\nworkflow.add_edge(START, \"agent\")\nworkflow.add_conditional_edges(\n    \"agent\",\n    should_continue,\n    {\n        \"continue\": \"action\",\n        \"end\": END,\n    },\n)\nworkflow.add_edge(\"action\", \"agent\")\n\ngraph = workflow.compile()\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 requirements.txt # \u5305\u4f9d\u8d56\u9879\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u2514\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n</code></pre>"},{"location":"cloud/deployment/setup/#langgraph","title":"\u521b\u5efa LangGraph \u914d\u7f6e\u6587\u4ef6","text":"<p>\u521b\u5efa\u540d\u4e3a <code>langgraph.json</code> \u7684 LangGraph \u914d\u7f6e\u6587\u4ef6\u3002\u6709\u5173\u914d\u7f6e\u6587\u4ef6 JSON \u5bf9\u8c61\u4e2d\u6bcf\u4e2a\u952e\u7684\u8be6\u7ec6\u8bf4\u660e,\u8bf7\u53c2\u9605 LangGraph \u914d\u7f6e\u6587\u4ef6\u53c2\u8003\u3002</p> <p>\u793a\u4f8b <code>langgraph.json</code> \u6587\u4ef6:</p> <pre><code>{\n  \"dependencies\": [\"./my_agent\"],\n  \"graphs\": {\n    \"agent\": \"./my_agent/agent.py:graph\"\n  },\n  \"env\": \".env\"\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f,<code>CompiledGraph</code> \u7684\u53d8\u91cf\u540d\u79f0\u51fa\u73b0\u5728\u9876\u7ea7 <code>graphs</code> \u952e\u4e2d\u6bcf\u4e2a\u5b50\u952e\u7684\u503c\u7684\u672b\u5c3e(\u5373 <code>:&lt;variable_name&gt;</code>)\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e</p> <p>LangGraph \u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u653e\u7f6e\u5728\u4e0e\u5305\u542b\u5df2\u7f16\u8bd1\u56fe\u548c\u76f8\u5173\u4f9d\u8d56\u9879\u7684 Python \u6587\u4ef6\u5904\u4e8e\u540c\u4e00\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u76ee\u5f55\u4e2d\u3002</p> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 requirements.txt # \u5305\u4f9d\u8d56\u9879\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u2514\u2500\u2500 langgraph.json # LangGraph \u914d\u7f6e\u6587\u4ef6\n</code></pre>"},{"location":"cloud/deployment/setup/#_4","title":"\u4e0b\u4e00\u6b65","text":"<p>\u8bbe\u7f6e\u9879\u76ee\u5e76\u5c06\u5176\u653e\u7f6e\u5728 GitHub \u5b58\u50a8\u5e93\u4e2d\u540e,\u5c31\u8be5\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u4e86\u3002</p>"},{"location":"cloud/deployment/setup_javascript/","title":"\u5982\u4f55\u8bbe\u7f6e LangGraph.js \u5e94\u7528\u7a0b\u5e8f","text":"<p>LangGraph.js \u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u914d\u7f6e LangGraph \u914d\u7f6e\u6587\u4ef6\u624d\u80fd\u90e8\u7f72\u5230 LangGraph Platform(\u6216\u81ea\u6258\u7ba1)\u3002\u672c\u64cd\u4f5c\u6307\u5357\u8ba8\u8bba\u4f7f\u7528 <code>package.json</code> \u6307\u5b9a\u9879\u76ee\u4f9d\u8d56\u9879\u6765\u8bbe\u7f6e LangGraph.js \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u7684\u57fa\u672c\u6b65\u9aa4\u3002</p> <p>\u672c\u6f14\u7ec3\u57fa\u4e8e\u6b64\u5b58\u50a8\u5e93,\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u4e86\u89e3\u6709\u5173\u5982\u4f55\u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u6700\u7ec8\u7684\u5b58\u50a8\u5e93\u7ed3\u6784\u5c06\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9:</p> <pre><code>my-app/\n\u251c\u2500\u2500 src # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u53ef\u9009\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 tools.ts # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.ts # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.ts # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u2514\u2500\u2500 agent.ts # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 package.json # \u5305\u4f9d\u8d56\u9879\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u2514\u2500\u2500 langgraph.json # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n</code></pre> <p>\u6bcf\u4e00\u6b65\u4e4b\u540e,\u90fd\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55\u6765\u6f14\u793a\u5982\u4f55\u7ec4\u7ec7\u4ee3\u7801\u3002</p>"},{"location":"cloud/deployment/setup_javascript/#_1","title":"\u6307\u5b9a\u4f9d\u8d56\u9879","text":"<p>\u53ef\u4ee5\u5728 <code>package.json</code> \u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\u3002\u5982\u679c\u6ca1\u6709\u521b\u5efa\u8fd9\u4e9b\u6587\u4ef6,\u5219\u53ef\u4ee5\u7a0d\u540e\u5728 LangGraph \u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\u3002</p> <p>\u793a\u4f8b <code>package.json</code> \u6587\u4ef6:</p> <pre><code>{\n  \"name\": \"langgraphjs-studio-starter\",\n  \"packageManager\": \"yarn@1.22.22\",\n  \"dependencies\": {\n    \"@langchain/community\": \"^0.2.31\",\n    \"@langchain/core\": \"^0.2.31\",\n    \"@langchain/langgraph\": \"^0.2.0\",\n    \"@langchain/openai\": \"^0.2.8\"\n  }\n}\n</code></pre> <p>\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u65f6,\u5c06\u4f7f\u7528\u4f60\u9009\u62e9\u7684\u5305\u7ba1\u7406\u5668\u5b89\u88c5\u4f9d\u8d56\u9879,\u524d\u63d0\u662f\u5b83\u4eec\u7b26\u5408\u4e0b\u9762\u5217\u51fa\u7684\u517c\u5bb9\u7248\u672c\u8303\u56f4:</p> <pre><code>\"@langchain/core\": \"^0.3.42\",\n\"@langchain/langgraph\": \"^0.2.57\",\n\"@langchain/langgraph-checkpoint\": \"~0.0.16\",\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u2514\u2500\u2500 package.json # \u5305\u4f9d\u8d56\u9879\n</code></pre>"},{"location":"cloud/deployment/setup_javascript/#_2","title":"\u6307\u5b9a\u73af\u5883\u53d8\u91cf","text":"<p>\u53ef\u4ee5\u5728\u6587\u4ef6(\u4f8b\u5982 <code>.env</code>)\u4e2d\u53ef\u9009\u5730\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u3002\u8bf7\u53c2\u9605\u73af\u5883\u53d8\u91cf\u53c2\u8003\u4ee5\u914d\u7f6e\u90e8\u7f72\u7684\u5176\u4ed6\u53d8\u91cf\u3002</p> <p>\u793a\u4f8b <code>.env</code> \u6587\u4ef6:</p> <pre><code>MY_ENV_VAR_1=foo\nMY_ENV_VAR_2=bar\nOPENAI_API_KEY=key\nTAVILY_API_KEY=key_2\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 package.json\n\u2514\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n</code></pre>"},{"location":"cloud/deployment/setup_javascript/#_3","title":"\u5b9a\u4e49\u56fe","text":"<p>\u5b9e\u73b0\u4f60\u7684\u56fe!\u56fe\u53ef\u4ee5\u5728\u5355\u4e2a\u6587\u4ef6\u6216\u591a\u4e2a\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002\u8bb0\u4e0b\u8981\u5305\u542b\u5728 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6bcf\u4e2a\u5df2\u7f16\u8bd1\u56fe\u7684\u53d8\u91cf\u540d\u79f0\u3002\u521b\u5efa LangGraph \u914d\u7f6e\u6587\u4ef6\u65f6\u5c06\u4f7f\u7528\u53d8\u91cf\u540d\u79f0\u3002</p> <p>\u4ee5\u4e0b\u662f\u793a\u4f8b <code>agent.ts</code>:</p> <pre><code>import type { AIMessage } from \"@langchain/core/messages\";\nimport { TavilySearchResults } from \"@langchain/community/tools/tavily_search\";\nimport { ChatOpenAI } from \"@langchain/openai\";\n\nimport { MessagesAnnotation, StateGraph } from \"@langchain/langgraph\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\n\nconst tools = [new TavilySearchResults({ maxResults: 3 })];\n\n// Define the function that calls the model\nasync function callModel(state: typeof MessagesAnnotation.State) {\n  /**\n   * Call the LLM powering our agent.\n   * Feel free to customize the prompt, model, and other logic!\n   */\n  const model = new ChatOpenAI({\n    model: \"gpt-4o\",\n  }).bindTools(tools);\n\n  const response = await model.invoke([\n    {\n      role: \"system\",\n      content: `You are a helpful assistant. The current date is ${new Date().getTime()}.`,\n    },\n    ...state.messages,\n  ]);\n\n  // MessagesAnnotation supports returning a single message or array of messages\n  return { messages: response };\n}\n\n// Define the function that determines whether to continue or not\nfunction routeModelOutput(state: typeof MessagesAnnotation.State) {\n  const messages = state.messages;\n  const lastMessage: AIMessage = messages[messages.length - 1];\n  // If the LLM is invoking tools, route there.\n  if ((lastMessage?.tool_calls?.length ?? 0) &gt; 0) {\n    return \"tools\";\n  }\n  // Otherwise end the graph.\n  return \"__end__\";\n}\n\n// Define a new graph.\n// See https://langchain-ai.github.io/langgraphjs/how-tos/define-state/#getting-started for\n// more on defining custom graph states.\nconst workflow = new StateGraph(MessagesAnnotation)\n  // Define the two nodes we will cycle between\n  .addNode(\"callModel\", callModel)\n  .addNode(\"tools\", new ToolNode(tools))\n  // Set the entrypoint as `callModel`\n  // This means that this node is the first one called\n  .addEdge(\"__start__\", \"callModel\")\n  .addConditionalEdges(\n    // First, we define the edges' source node. We use `callModel`.\n    // This means these are the edges taken after the `callModel` node is called.\n    \"callModel\",\n    // Next, we pass in the function that will determine the sink node(s), which\n    // will be called after the source node is called.\n    routeModelOutput,\n    // List of the possible destinations the conditional edge can route to.\n    // Required for conditional edges to properly render the graph in Studio\n    [\"tools\", \"__end__\"]\n  )\n  // This means that after `tools` is called, `callModel` node is called next.\n  .addEdge(\"tools\", \"callModel\");\n\n// Finally, we compile it!\n// This compiles it into a graph you can invoke and deploy.\nexport const graph = workflow.compile();\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 src # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u53ef\u9009\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 tools.ts # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.ts # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.ts # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u2514\u2500\u2500 agent.ts # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 package.json # \u5305\u4f9d\u8d56\u9879\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u2514\u2500\u2500 langgraph.json # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n</code></pre>"},{"location":"cloud/deployment/setup_javascript/#langgraph-api","title":"\u521b\u5efa LangGraph API \u914d\u7f6e","text":"<p>\u521b\u5efa\u540d\u4e3a <code>langgraph.json</code> \u7684 LangGraph \u914d\u7f6e\u6587\u4ef6\u3002\u6709\u5173\u914d\u7f6e\u6587\u4ef6 JSON \u5bf9\u8c61\u4e2d\u6bcf\u4e2a\u952e\u7684\u8be6\u7ec6\u8bf4\u660e,\u8bf7\u53c2\u9605 LangGraph \u914d\u7f6e\u6587\u4ef6\u53c2\u8003\u3002</p> <p>\u793a\u4f8b <code>langgraph.json</code> \u6587\u4ef6:</p> <pre><code>{\n  \"node_version\": \"20\",\n  \"dockerfile_lines\": [],\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent.ts:graph\"\n  },\n  \"env\": \".env\"\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f,<code>CompiledGraph</code> \u7684\u53d8\u91cf\u540d\u79f0\u51fa\u73b0\u5728\u9876\u7ea7 <code>graphs</code> \u952e\u4e2d\u6bcf\u4e2a\u5b50\u952e\u7684\u503c\u7684\u672b\u5c3e(\u5373 <code>:&lt;variable_name&gt;</code>)\u3002</p> <p>\u914d\u7f6e\u4f4d\u7f6e</p> <p>LangGraph \u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u653e\u7f6e\u5728\u4e0e\u5305\u542b\u5df2\u7f16\u8bd1\u56fe\u548c\u76f8\u5173\u4f9d\u8d56\u9879\u7684 TypeScript \u6587\u4ef6\u5904\u4e8e\u540c\u4e00\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u76ee\u5f55\u4e2d\u3002</p>"},{"location":"cloud/deployment/setup_javascript/#_4","title":"\u4e0b\u4e00\u6b65","text":"<p>\u8bbe\u7f6e\u9879\u76ee\u5e76\u5c06\u5176\u653e\u7f6e\u5728 GitHub \u5b58\u50a8\u5e93\u4e2d\u540e,\u5c31\u8be5\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u4e86\u3002</p>"},{"location":"cloud/deployment/setup_pyproject/","title":"\u5982\u4f55\u4f7f\u7528 pyproject.toml \u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f","text":"<p>LangGraph \u5e94\u7528\u7a0b\u5e8f\u5fc5\u987b\u914d\u7f6e LangGraph \u914d\u7f6e\u6587\u4ef6\u624d\u80fd\u90e8\u7f72\u5230 LangGraph Platform(\u6216\u81ea\u6258\u7ba1)\u3002\u672c\u64cd\u4f5c\u6307\u5357\u8ba8\u8bba\u4f7f\u7528 <code>pyproject.toml</code> \u5b9a\u4e49\u5305\u7684\u4f9d\u8d56\u9879\u6765\u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u7684\u57fa\u672c\u6b65\u9aa4\u3002</p> <p>\u672c\u6f14\u7ec3\u57fa\u4e8e\u6b64\u5b58\u50a8\u5e93,\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u4e86\u89e3\u6709\u5173\u5982\u4f55\u8bbe\u7f6e LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u4f7f\u7528 requirements.txt \u8bbe\u7f6e</p> <p>\u5982\u679c\u4f60\u66f4\u559c\u6b22\u4f7f\u7528 <code>requirements.txt</code> \u8fdb\u884c\u4f9d\u8d56\u7ba1\u7406,\u8bf7\u67e5\u770b\u672c\u64cd\u4f5c\u6307\u5357\u3002</p> <p>\u4f7f\u7528\u5355\u4f53\u4ed3\u5e93\u8bbe\u7f6e</p> <p>\u5982\u679c\u4f60\u6709\u5174\u8da3\u90e8\u7f72\u4f4d\u4e8e\u5355\u4f53\u4ed3\u5e93\u5185\u7684\u56fe,\u8bf7\u67e5\u770b\u6b64\u5b58\u50a8\u5e93\u4ee5\u83b7\u53d6\u5982\u4f55\u6267\u884c\u6b64\u64cd\u4f5c\u7684\u793a\u4f8b\u3002</p> <p>\u6700\u7ec8\u7684\u5b58\u50a8\u5e93\u7ed3\u6784\u5c06\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 langgraph.json  # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 pyproject.toml # \u9879\u76ee\u7684\u4f9d\u8d56\u9879\n</code></pre> <p>\u6bcf\u4e00\u6b65\u4e4b\u540e,\u90fd\u4f1a\u63d0\u4f9b\u4e00\u4e2a\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55\u6765\u6f14\u793a\u5982\u4f55\u7ec4\u7ec7\u4ee3\u7801\u3002</p>"},{"location":"cloud/deployment/setup_pyproject/#_1","title":"\u6307\u5b9a\u4f9d\u8d56\u9879","text":"<p>\u53ef\u4ee5\u5728\u4ee5\u4e0b\u6587\u4ef6\u4e4b\u4e00\u4e2d\u53ef\u9009\u5730\u6307\u5b9a\u4f9d\u8d56\u9879:<code>pyproject.toml</code>\u3001<code>setup.py</code> \u6216 <code>requirements.txt</code>\u3002\u5982\u679c\u6ca1\u6709\u521b\u5efa\u8fd9\u4e9b\u6587\u4ef6,\u5219\u53ef\u4ee5\u7a0d\u540e\u5728 LangGraph \u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\u3002</p> <p>\u4ee5\u4e0b\u4f9d\u8d56\u9879\u5c06\u5305\u542b\u5728\u955c\u50cf\u4e2d,\u4f60\u4e5f\u53ef\u4ee5\u5728\u4ee3\u7801\u4e2d\u4f7f\u7528\u5b83\u4eec,\u53ea\u8981\u4f7f\u7528\u517c\u5bb9\u7684\u7248\u672c\u8303\u56f4:</p> <pre><code>langgraph&gt;=0.3.27\nlanggraph-sdk&gt;=0.1.66\nlanggraph-checkpoint&gt;=2.0.23\nlangchain-core&gt;=0.2.38\nlangsmith&gt;=0.1.63\norjson&gt;=3.9.7,&lt;3.10.17\nhttpx&gt;=0.25.0\ntenacity&gt;=8.0.0\nuvicorn&gt;=0.26.0\nsse-starlette&gt;=2.1.0,&lt;2.2.0\nuvloop&gt;=0.18.0\nhttptools&gt;=0.5.0\njsonschema-rs&gt;=0.20.0\nstructlog&gt;=24.1.0\ncloudpickle&gt;=3.0.0\n</code></pre> <p>\u793a\u4f8b <code>pyproject.toml</code> \u6587\u4ef6:</p> <pre><code>[build-system]\nrequires = [\"hatchling\"]\nbuild-backend = \"hatchling.build\"\n\n[project]\nname = \"my-agent\"\nversion = \"0.0.1\"\ndescription = \"An excellent agent build for LangGraph Platform.\"\nauthors = [\n    {name = \"Polly the parrot\", email = \"1223+polly@users.noreply.github.com\"}\n]\nlicense = {text = \"MIT\"}\nreadme = \"README.md\"\nrequires-python = \"&gt;=3.9\"\ndependencies = [\n    \"langgraph&gt;=0.2.0\",\n    \"langchain-fireworks&gt;=0.1.3\"\n]\n\n[tool.hatch.build.targets.wheel]\npackages = [\"my_agent\"]\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u2514\u2500\u2500 pyproject.toml   # \u56fe\u6240\u9700\u7684 Python \u5305\n</code></pre>"},{"location":"cloud/deployment/setup_pyproject/#_2","title":"\u6307\u5b9a\u73af\u5883\u53d8\u91cf","text":"<p>\u53ef\u4ee5\u5728\u6587\u4ef6(\u4f8b\u5982 <code>.env</code>)\u4e2d\u53ef\u9009\u5730\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u3002\u8bf7\u53c2\u9605\u73af\u5883\u53d8\u91cf\u53c2\u8003\u4ee5\u914d\u7f6e\u90e8\u7f72\u7684\u5176\u4ed6\u53d8\u91cf\u3002</p> <p>\u793a\u4f8b <code>.env</code> \u6587\u4ef6:</p> <pre><code>MY_ENV_VAR_1=foo\nMY_ENV_VAR_2=bar\nFIREWORKS_API_KEY=key\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 .env # \u5305\u542b\u73af\u5883\u53d8\u91cf\u7684\u6587\u4ef6\n\u2514\u2500\u2500 pyproject.toml\n</code></pre>"},{"location":"cloud/deployment/setup_pyproject/#_3","title":"\u5b9a\u4e49\u56fe","text":"<p>\u5b9e\u73b0\u4f60\u7684\u56fe!\u56fe\u53ef\u4ee5\u5728\u5355\u4e2a\u6587\u4ef6\u6216\u591a\u4e2a\u6587\u4ef6\u4e2d\u5b9a\u4e49\u3002\u8bb0\u4e0b\u8981\u5305\u542b\u5728 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u6bcf\u4e2a @[CompiledStateGraph][] \u7684\u53d8\u91cf\u540d\u79f0\u3002\u521b\u5efa LangGraph \u914d\u7f6e\u6587\u4ef6\u65f6\u5c06\u4f7f\u7528\u53d8\u91cf\u540d\u79f0\u3002</p> <p>\u793a\u4f8b <code>agent.py</code> \u6587\u4ef6,\u5c55\u793a\u5982\u4f55\u4ece\u4f60\u5b9a\u4e49\u7684\u5176\u4ed6\u6a21\u5757\u5bfc\u5165(\u6b64\u5904\u672a\u663e\u793a\u6a21\u5757\u7684\u4ee3\u7801,\u8bf7\u53c2\u9605\u6b64\u5b58\u50a8\u5e93\u4ee5\u67e5\u770b\u5176\u5b9e\u73b0):</p> <pre><code># my_agent/agent.py\nfrom typing import Literal\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph import StateGraph, END, START\nfrom my_agent.utils.nodes import call_model, should_continue, tool_node # import nodes\nfrom my_agent.utils.state import AgentState # import state\n\n# Define the runtime context\nclass GraphContext(TypedDict):\n    model_name: Literal[\"anthropic\", \"openai\"]\n\nworkflow = StateGraph(AgentState, context_schema=GraphContext)\nworkflow.add_node(\"agent\", call_model)\nworkflow.add_node(\"action\", tool_node)\nworkflow.add_edge(START, \"agent\")\nworkflow.add_conditional_edges(\n    \"agent\",\n    should_continue,\n    {\n        \"continue\": \"action\",\n        \"end\": END,\n    },\n)\nworkflow.add_edge(\"action\", \"agent\")\n\ngraph = workflow.compile()\n</code></pre> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env\n\u2514\u2500\u2500 pyproject.toml\n</code></pre>"},{"location":"cloud/deployment/setup_pyproject/#langgraph","title":"\u521b\u5efa LangGraph \u914d\u7f6e\u6587\u4ef6","text":"<p>\u521b\u5efa\u540d\u4e3a <code>langgraph.json</code> \u7684 LangGraph \u914d\u7f6e\u6587\u4ef6\u3002\u6709\u5173\u914d\u7f6e\u6587\u4ef6 JSON \u5bf9\u8c61\u4e2d\u6bcf\u4e2a\u952e\u7684\u8be6\u7ec6\u8bf4\u660e,\u8bf7\u53c2\u9605 LangGraph \u914d\u7f6e\u6587\u4ef6\u53c2\u8003\u3002</p> <p>\u793a\u4f8b <code>langgraph.json</code> \u6587\u4ef6:</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./my_agent/agent.py:graph\"\n  },\n  \"env\": \".env\"\n}\n</code></pre> <p>\u8bf7\u6ce8\u610f,<code>CompiledGraph</code> \u7684\u53d8\u91cf\u540d\u79f0\u51fa\u73b0\u5728\u9876\u7ea7 <code>graphs</code> \u952e\u4e2d\u6bcf\u4e2a\u5b50\u952e\u7684\u503c\u7684\u672b\u5c3e(\u5373 <code>:&lt;variable_name&gt;</code>)\u3002</p> <p>\u914d\u7f6e\u6587\u4ef6\u4f4d\u7f6e</p> <p>LangGraph \u914d\u7f6e\u6587\u4ef6\u5fc5\u987b\u653e\u7f6e\u5728\u4e0e\u5305\u542b\u5df2\u7f16\u8bd1\u56fe\u548c\u76f8\u5173\u4f9d\u8d56\u9879\u7684 Python \u6587\u4ef6\u5904\u4e8e\u540c\u4e00\u7ea7\u522b\u6216\u66f4\u9ad8\u7ea7\u522b\u7684\u76ee\u5f55\u4e2d\u3002</p> <p>\u793a\u4f8b\u6587\u4ef6\u76ee\u5f55:</p> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 langgraph.json  # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 pyproject.toml # \u9879\u76ee\u7684\u4f9d\u8d56\u9879\n</code></pre>"},{"location":"cloud/deployment/setup_pyproject/#_4","title":"\u4e0b\u4e00\u6b65","text":"<p>\u8bbe\u7f6e\u9879\u76ee\u5e76\u5c06\u5176\u653e\u7f6e\u5728 GitHub \u5b58\u50a8\u5e93\u4e2d\u540e,\u5c31\u8be5\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u4e86\u3002</p>"},{"location":"cloud/deployment/standalone_container/","title":"\u5982\u4f55\u90e8\u7f72\u72ec\u7acb\u5bb9\u5668","text":"<p>\u5728\u90e8\u7f72\u4e4b\u524d,\u8bf7\u67e5\u770b\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u9009\u9879\u7684\u6982\u5ff5\u6307\u5357\u3002</p>"},{"location":"cloud/deployment/standalone_container/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<ol> <li>\u4f7f\u7528 LangGraph CLI \u5728\u672c\u5730\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u4f7f\u7528 LangGraph CLI \u6784\u5efa Docker \u955c\u50cf(\u5373 <code>langgraph build</code>)\u3002</li> <li> <p>\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u9700\u8981\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf\u3002</p> <ol> <li> <p><code>REDIS_URI</code>: Redis \u5b9e\u4f8b\u7684\u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u3002Redis \u5c06\u7528\u4f5c\u53d1\u5e03-\u8ba2\u9605\u4ee3\u7406,\u4ee5\u542f\u7528\u4ece\u540e\u53f0\u8fd0\u884c\u6d41\u5f0f\u4f20\u8f93\u5b9e\u65f6\u8f93\u51fa\u3002<code>REDIS_URI</code> \u7684\u503c\u5fc5\u987b\u662f\u6709\u6548\u7684 Redis \u8fde\u63a5 URI\u3002</p> <p>\u5171\u4eab Redis \u5b9e\u4f8b</p> <p>\u591a\u4e2a\u81ea\u6258\u7ba1\u90e8\u7f72\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2a Redis \u5b9e\u4f8b\u3002\u4f8b\u5982,\u5bf9\u4e8e <code>Deployment A</code>,\u53ef\u4ee5\u5c06 <code>REDIS_URI</code> \u8bbe\u7f6e\u4e3a <code>redis://&lt;hostname_1&gt;:&lt;port&gt;/1</code>,\u5bf9\u4e8e <code>Deployment B</code>,\u53ef\u4ee5\u5c06 <code>REDIS_URI</code> \u8bbe\u7f6e\u4e3a <code>redis://&lt;hostname_1&gt;:&lt;port&gt;/2</code>\u3002</p> <p><code>1</code> \u548c <code>2</code> \u662f\u540c\u4e00\u5b9e\u4f8b\u4e2d\u7684\u4e0d\u540c\u6570\u636e\u5e93\u7f16\u53f7,\u4f46 <code>&lt;hostname_1&gt;</code> \u662f\u5171\u4eab\u7684\u3002\u76f8\u540c\u7684\u6570\u636e\u5e93\u7f16\u53f7\u4e0d\u80fd\u7528\u4e8e\u5355\u72ec\u7684\u90e8\u7f72\u3002</p> </li> <li> <p><code>DATABASE_URI</code>: Postgres \u8fde\u63a5\u8be6\u7ec6\u4fe1\u606f\u3002Postgres \u5c06\u7528\u4e8e\u5b58\u50a8\u52a9\u624b\u3001\u7ebf\u7a0b\u3001\u8fd0\u884c\u3001\u6301\u4e45\u5316\u7ebf\u7a0b\u72b6\u6001\u548c\u957f\u671f\u5185\u5b58,\u4ee5\u53ca\u4f7f\u7528\"\u6070\u597d\u4e00\u6b21\"\u8bed\u4e49\u7ba1\u7406\u540e\u53f0\u4efb\u52a1\u961f\u5217\u7684\u72b6\u6001\u3002<code>DATABASE_URI</code> \u7684\u503c\u5fc5\u987b\u662f\u6709\u6548\u7684 Postgres \u8fde\u63a5 URI\u3002</p> <p>\u5171\u4eab Postgres \u5b9e\u4f8b</p> <p>\u591a\u4e2a\u81ea\u6258\u7ba1\u90e8\u7f72\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2a Postgres \u5b9e\u4f8b\u3002\u4f8b\u5982,\u5bf9\u4e8e <code>Deployment A</code>,\u53ef\u4ee5\u5c06 <code>DATABASE_URI</code> \u8bbe\u7f6e\u4e3a <code>postgres://&lt;user&gt;:&lt;password&gt;@/&lt;database_name_1&gt;?host=&lt;hostname_1&gt;</code>,\u5bf9\u4e8e <code>Deployment B</code>,\u53ef\u4ee5\u5c06 <code>DATABASE_URI</code> \u8bbe\u7f6e\u4e3a <code>postgres://&lt;user&gt;:&lt;password&gt;@/&lt;database_name_2&gt;?host=&lt;hostname_1&gt;</code>\u3002</p> <p><code>&lt;database_name_1&gt;</code> \u548c <code>database_name_2</code> \u662f\u540c\u4e00\u5b9e\u4f8b\u4e2d\u7684\u4e0d\u540c\u6570\u636e\u5e93,\u4f46 <code>&lt;hostname_1&gt;</code> \u662f\u5171\u4eab\u7684\u3002\u76f8\u540c\u7684\u6570\u636e\u5e93\u4e0d\u80fd\u7528\u4e8e\u5355\u72ec\u7684\u90e8\u7f72\u3002</p> </li> <li> <p><code>LANGGRAPH_CLOUD_LICENSE_KEY</code>: (\u5982\u679c\u4f7f\u7528\u4f01\u4e1a\u7248)LangGraph Platform \u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002\u8fd9\u5c06\u5728\u670d\u52a1\u5668\u542f\u52a8\u65f6\u7528\u4e8e\u4e00\u6b21\u6027\u8eab\u4efd\u9a8c\u8bc1\u3002</p> </li> <li><code>LANGSMITH_ENDPOINT</code>: \u8981\u5c06\u8ddf\u8e2a\u53d1\u9001\u5230\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b,\u8bf7\u5c06 <code>LANGSMITH_ENDPOINT</code> \u8bbe\u7f6e\u4e3a\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b\u7684\u4e3b\u673a\u540d\u3002</li> <li>\u4ece\u4f60\u7684\u7f51\u7edc\u51fa\u7ad9\u8bbf\u95ee <code>https://beacon.langchain.com</code>\u3002\u5982\u679c\u4e0d\u5728\u6c14\u9699\u6a21\u5f0f\u4e0b\u8fd0\u884c,\u5219\u9700\u8981\u6b64\u8bbf\u95ee\u6743\u9650\u4ee5\u8fdb\u884c\u8bb8\u53ef\u8bc1\u9a8c\u8bc1\u548c\u4f7f\u7528\u60c5\u51b5\u62a5\u544a\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u51fa\u7ad9\u6d41\u91cf\u6587\u6863\u3002</li> </ol> </li> </ol>"},{"location":"cloud/deployment/standalone_container/#kubernetes-helm","title":"Kubernetes (Helm)","text":"<p>\u4f7f\u7528\u6b64 Helm \u56fe\u8868\u5c06 LangGraph Server \u90e8\u7f72\u5230 Kubernetes \u96c6\u7fa4\u3002</p>"},{"location":"cloud/deployment/standalone_container/#docker","title":"Docker","text":"<p>\u8fd0\u884c\u4ee5\u4e0b <code>docker</code> \u547d\u4ee4: <pre><code>docker run \\\n    --env-file .env \\\n    -p 8123:8000 \\\n    -e REDIS_URI=\"foo\" \\\n    -e DATABASE_URI=\"bar\" \\\n    -e LANGSMITH_API_KEY=\"baz\" \\\n    my-image\n</code></pre></p> <p>Note</p> <ul> <li>\u4f60\u9700\u8981\u5c06 <code>my-image</code> \u66ff\u6362\u4e3a\u5728\u5148\u51b3\u6761\u4ef6\u6b65\u9aa4\u4e2d\u6784\u5efa\u7684\u955c\u50cf\u540d\u79f0(\u6765\u81ea <code>langgraph build</code>),\u5e76\u4e14\u5e94\u4e3a <code>REDIS_URI</code>\u3001<code>DATABASE_URI</code> \u548c <code>LANGSMITH_API_KEY</code> \u63d0\u4f9b\u9002\u5f53\u7684\u503c\u3002</li> <li>\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u5176\u4ed6\u73af\u5883\u53d8\u91cf,\u4f60\u53ef\u4ee5\u4ee5\u7c7b\u4f3c\u7684\u65b9\u5f0f\u4f20\u9012\u5b83\u4eec\u3002</li> </ul>"},{"location":"cloud/deployment/standalone_container/#docker-compose","title":"Docker Compose","text":"<p>Docker Compose YAML \u6587\u4ef6: <pre><code>volumes:\n    langgraph-data:\n        driver: local\nservices:\n    langgraph-redis:\n        image: redis:6\n        healthcheck:\n            test: redis-cli ping\n            interval: 5s\n            timeout: 1s\n            retries: 5\n    langgraph-postgres:\n        image: postgres:16\n        ports:\n            - \"5433:5432\"\n        environment:\n            POSTGRES_DB: postgres\n            POSTGRES_USER: postgres\n            POSTGRES_PASSWORD: postgres\n        volumes:\n            - langgraph-data:/var/lib/postgresql/data\n        healthcheck:\n            test: pg_isready -U postgres\n            start_period: 10s\n            timeout: 1s\n            retries: 5\n            interval: 5s\n    langgraph-api:\n        image: ${IMAGE_NAME}\n        ports:\n            - \"8123:8000\"\n        depends_on:\n            langgraph-redis:\n                condition: service_healthy\n            langgraph-postgres:\n                condition: service_healthy\n        env_file:\n            - .env\n        environment:\n            REDIS_URI: redis://langgraph-redis:6379\n            LANGSMITH_API_KEY: ${LANGSMITH_API_KEY}\n            POSTGRES_URI: postgres://postgres:postgres@langgraph-postgres:5432/postgres?sslmode=disable\n</code></pre></p> <p>\u4f60\u53ef\u4ee5\u5728\u4e0e\u6b64 Docker Compose \u6587\u4ef6\u76f8\u540c\u7684\u6587\u4ef6\u5939\u4e2d\u8fd0\u884c\u547d\u4ee4 <code>docker compose up</code>\u3002</p> <p>\u8fd9\u5c06\u5728\u7aef\u53e3 <code>8123</code> \u4e0a\u542f\u52a8 LangGraph Server(\u5982\u679c\u4f60\u60f3\u66f4\u6539\u6b64\u7aef\u53e3,\u53ef\u4ee5\u901a\u8fc7\u66f4\u6539 <code>langgraph-api</code> \u5377\u4e2d\u7684\u7aef\u53e3\u6765\u66f4\u6539)\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\u662f\u5426\u5065\u5eb7:</p> <p><pre><code>curl --request GET --url 0.0.0.0:8123/ok\n</code></pre> \u5047\u8bbe\u4e00\u5207\u6b63\u5e38\u8fd0\u884c,\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u5982\u4e0b\u54cd\u5e94:</p> <pre><code>{\"ok\":true}\n</code></pre>"},{"location":"cloud/how-tos/add-human-in-the-loop/","title":"\u4f7f\u7528 Server API \u5b9e\u73b0\u4eba\u673a\u534f\u540c","text":"<p>\u8981\u5ba1\u67e5\u3001\u7f16\u8f91\u548c\u6279\u51c6\u667a\u80fd\u4ee3\u7406\u6216\u5de5\u4f5c\u6d41\u4e2d\u7684\u5de5\u5177\u8c03\u7528,\u8bf7\u4f7f\u7528 LangGraph \u7684\u4eba\u673a\u534f\u540c\u529f\u80fd\u3002</p>"},{"location":"cloud/how-tos/add-human-in-the-loop/#_1","title":"\u52a8\u6001\u4e2d\u65ad","text":"PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\n# highlight-next-line\nfrom langgraph_sdk.schema import Command\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\n# Run the graph until the interrupt is hit.\nresult = await client.runs.wait(\n    thread_id,\n    assistant_id,\n    input={\"some_text\": \"original text\"}   # (1)!\n)\n\nprint(result['__interrupt__']) # (2)!\n# &gt; [\n# &gt;     {\n# &gt;         'value': {'text_to_revise': 'original text'},\n# &gt;         'id': '...',\n# &gt;     }\n# &gt; ]\n\n\n# Resume the graph\nprint(await client.runs.wait(\n    thread_id,\n    assistant_id,\n    # highlight-next-line\n    command=Command(resume=\"Edited text\")   # (3)!\n))\n# &gt; {'some_text': 'Edited text'}\n</code></pre> <ol> <li>\u4f7f\u7528\u521d\u59cb\u72b6\u6001\u8c03\u7528\u56fe\u3002</li> <li>\u5f53\u56fe\u9047\u5230\u4e2d\u65ad\u65f6,\u5b83\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u8d1f\u8f7d\u548c\u5143\u6570\u636e\u7684\u4e2d\u65ad\u5bf9\u8c61\u3002</li> <li>\u4f7f\u7528 <code>Command(resume=...)</code> \u6062\u590d\u56fe,\u6ce8\u5165\u4eba\u7c7b\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// Run the graph until the interrupt is hit.\nconst result = await client.runs.wait(\n  threadID,\n  assistantID,\n  { input: { \"some_text\": \"original text\" } }   // (1)!\n);\n\nconsole.log(result['__interrupt__']); // (2)!\n// &gt; [\n// &gt;     {\n// &gt;         'value': {'text_to_revise': 'original text'},\n// &gt;         'resumable': True,\n// &gt;         'ns': ['human_node:fc722478-2f21-0578-c572-d9fc4dd07c3b'],\n// &gt;         'when': 'during'\n// &gt;     }\n// &gt; ]\n\n// Resume the graph\nconsole.log(await client.runs.wait(\n    threadID,\n    assistantID,\n    // highlight-next-line\n    { command: { resume: \"Edited text\" }}   // (3)!\n));\n// &gt; {'some_text': 'Edited text'}\n</code></pre> <ol> <li>\u4f7f\u7528\u521d\u59cb\u72b6\u6001\u8c03\u7528\u56fe\u3002</li> <li>\u5f53\u56fe\u9047\u5230\u4e2d\u65ad\u65f6,\u5b83\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u8d1f\u8f7d\u548c\u5143\u6570\u636e\u7684\u4e2d\u65ad\u5bf9\u8c61\u3002</li> <li>\u4f7f\u7528 <code>{ resume: ... }</code> \u547d\u4ee4\u5bf9\u8c61\u6062\u590d\u56fe,\u6ce8\u5165\u4eba\u7c7b\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u4e2d\u65ad:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"some_text\\\": \\\"original text\\\"}\n}\"\n</code></pre> <p>\u6062\u590d\u56fe:</p> <pre><code>curl --request POST \\\n --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n --header 'Content-Type: application/json' \\\n --data \"{\n   \\\"assistant_id\\\": \\\"agent\\\",\n   \\\"command\\\": {\n     \\\"resume\\\": \\\"Edited text\\\"\n   }\n }\"\n</code></pre> \u6269\u5c55\u793a\u4f8b:\u4f7f\u7528 <code>interrupt</code> <p>\u8fd9\u662f\u53ef\u4ee5\u5728 LangGraph API \u670d\u52a1\u5668\u4e2d\u8fd0\u884c\u7684\u793a\u4f8b\u56fe\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 LangGraph Platform \u5feb\u901f\u5165\u95e8\u3002</p> <pre><code>from typing import TypedDict\nimport uuid\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.constants import START\nfrom langgraph.graph import StateGraph\n# highlight-next-line\nfrom langgraph.types import interrupt, Command\n\nclass State(TypedDict):\n    some_text: str\n\ndef human_node(state: State):\n    # highlight-next-line\n    value = interrupt( # (1)!\n        {\n            \"text_to_revise\": state[\"some_text\"] # (2)!\n        }\n    )\n    return {\n        \"some_text\": value # (3)!\n    }\n\n\n# Build the graph\ngraph_builder = StateGraph(State)\ngraph_builder.add_node(\"human_node\", human_node)\ngraph_builder.add_edge(START, \"human_node\")\n\ngraph = graph_builder.compile()\n</code></pre> <ol> <li><code>interrupt(...)</code> \u5728 <code>human_node</code> \u6682\u505c\u6267\u884c,\u5c06\u7ed9\u5b9a\u7684\u8d1f\u8f7d\u5c55\u73b0\u7ed9\u4eba\u7c7b\u3002</li> <li>\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u90fd\u53ef\u4ee5\u4f20\u9012\u7ed9 <code>interrupt</code> \u51fd\u6570\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u5305\u542b\u8981\u4fee\u6539\u7684\u6587\u672c\u7684\u5b57\u5178\u3002</li> <li>\u4e00\u65e6\u6062\u590d,<code>interrupt(...)</code> \u7684\u8fd4\u56de\u503c\u5c31\u662f\u4eba\u7c7b\u63d0\u4f9b\u7684\u8f93\u5165,\u7528\u4e8e\u66f4\u65b0\u72b6\u6001\u3002</li> </ol> <p>\u4e00\u65e6\u4f60\u6709\u4e86\u6b63\u5728\u8fd0\u884c\u7684 LangGraph API \u670d\u52a1\u5668,\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph SDK \u4e0e\u5176\u4ea4\u4e92</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\n# highlight-next-line\nfrom langgraph_sdk.schema import Command\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\n# Run the graph until the interrupt is hit.\nresult = await client.runs.wait(\n    thread_id,\n    assistant_id,\n    input={\"some_text\": \"original text\"}   # (1)!\n)\n\nprint(result['__interrupt__']) # (2)!\n# &gt; [\n# &gt;     {\n# &gt;         'value': {'text_to_revise': 'original text'},\n# &gt;         'id': '...',\n# &gt;     }\n# &gt; ]\n\n\n# Resume the graph\nprint(await client.runs.wait(\n    thread_id,\n    assistant_id,\n    # highlight-next-line\n    command=Command(resume=\"Edited text\")   # (3)!\n))\n# &gt; {'some_text': 'Edited text'}\n</code></pre> <ol> <li>\u4f7f\u7528\u521d\u59cb\u72b6\u6001\u8c03\u7528\u56fe\u3002</li> <li>\u5f53\u56fe\u9047\u5230\u4e2d\u65ad\u65f6,\u5b83\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u8d1f\u8f7d\u548c\u5143\u6570\u636e\u7684\u4e2d\u65ad\u5bf9\u8c61\u3002</li> <li>\u4f7f\u7528 <code>Command(resume=...)</code> \u6062\u590d\u56fe,\u6ce8\u5165\u4eba\u7c7b\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// Run the graph until the interrupt is hit.\nconst result = await client.runs.wait(\n  threadID,\n  assistantID,\n  { input: { \"some_text\": \"original text\" } }   // (1)!\n);\n\nconsole.log(result['__interrupt__']); // (2)!\n// &gt; [\n// &gt;     {\n// &gt;         'value': {'text_to_revise': 'original text'},\n// &gt;         'resumable': True,\n// &gt;         'ns': ['human_node:fc722478-2f21-0578-c572-d9fc4dd07c3b'],\n// &gt;         'when': 'during'\n// &gt;     }\n// &gt; ]\n\n// Resume the graph\nconsole.log(await client.runs.wait(\n    threadID,\n    assistantID,\n    // highlight-next-line\n    { command: { resume: \"Edited text\" }}   // (3)!\n));\n// &gt; {'some_text': 'Edited text'}\n</code></pre> <ol> <li>\u4f7f\u7528\u521d\u59cb\u72b6\u6001\u8c03\u7528\u56fe\u3002</li> <li>\u5f53\u56fe\u9047\u5230\u4e2d\u65ad\u65f6,\u5b83\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u8d1f\u8f7d\u548c\u5143\u6570\u636e\u7684\u4e2d\u65ad\u5bf9\u8c61\u3002</li> <li>\u4f7f\u7528 <code>{ resume: ... }</code> \u547d\u4ee4\u5bf9\u8c61\u6062\u590d\u56fe,\u6ce8\u5165\u4eba\u7c7b\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u4e2d\u65ad:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"some_text\\\": \\\"original text\\\"}\n}\"\n</code></pre> <p>\u6062\u590d\u56fe:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"command\\\": {\n    \\\"resume\\\": \\\"Edited text\\\"\n  }\n}\"\n</code></pre>"},{"location":"cloud/how-tos/add-human-in-the-loop/#_2","title":"\u9759\u6001\u4e2d\u65ad","text":"<p>\u9759\u6001\u4e2d\u65ad(\u4e5f\u79f0\u4e3a\u9759\u6001\u65ad\u70b9)\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u6216\u4e4b\u540e\u89e6\u53d1\u3002</p> <p>Warning</p> <p>**\u4e0d**\u63a8\u8350\u5c06\u9759\u6001\u4e2d\u65ad\u7528\u4e8e\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u3002\u5b83\u4eec\u6700\u9002\u5408\u7528\u4e8e\u8c03\u8bd5\u548c\u6d4b\u8bd5\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u901a\u8fc7\u6307\u5b9a <code>interrupt_before</code> \u548c <code>interrupt_after</code> \u6765\u8bbe\u7f6e\u9759\u6001\u4e2d\u65ad:</p> <pre><code># highlight-next-line\ngraph = graph_builder.compile( # (1)!\n    # highlight-next-line\n    interrupt_before=[\"node_a\"], # (2)!\n    # highlight-next-line\n    interrupt_after=[\"node_b\", \"node_c\"], # (3)!\n)\n</code></pre> <ol> <li>\u65ad\u70b9\u5728 <code>compile</code> \u65f6\u8bbe\u7f6e\u3002</li> <li><code>interrupt_before</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u5e94\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li><code>interrupt_after</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u540e\u5e94\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> </ol> <p>\u6216\u8005,\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u8bbe\u7f6e\u9759\u6001\u4e2d\u65ad:</p> PythonJavaScriptcURL <pre><code># highlight-next-line\nawait client.runs.wait( # (1)!\n    thread_id,\n    assistant_id,\n    inputs=inputs,\n    # highlight-next-line\n    interrupt_before=[\"node_a\"], # (2)!\n    # highlight-next-line\n    interrupt_after=[\"node_b\", \"node_c\"] # (3)!\n)\n</code></pre> <ol> <li>\u4f7f\u7528 <code>interrupt_before</code> \u548c <code>interrupt_after</code> \u53c2\u6570\u8c03\u7528 <code>client.runs.wait</code>\u3002\u8fd9\u662f\u8fd0\u884c\u65f6\u914d\u7f6e,\u53ef\u4ee5\u5728\u6bcf\u6b21\u8c03\u7528\u65f6\u66f4\u6539\u3002</li> <li><code>interrupt_before</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u5e94\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li><code>interrupt_after</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u540e\u5e94\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> </ol> <pre><code>// highlight-next-line\nawait client.runs.wait( // (1)!\n    threadID,\n    assistantID,\n    {\n    input: input,\n    // highlight-next-line\n    interruptBefore: [\"node_a\"], // (2)!\n    // highlight-next-line\n    interruptAfter: [\"node_b\", \"node_c\"] // (3)!\n    }\n)\n</code></pre> <ol> <li>\u4f7f\u7528 <code>interruptBefore</code> \u548c <code>interruptAfter</code> \u53c2\u6570\u8c03\u7528 <code>client.runs.wait</code>\u3002\u8fd9\u662f\u8fd0\u884c\u65f6\u914d\u7f6e,\u53ef\u4ee5\u5728\u6bcf\u6b21\u8c03\u7528\u65f6\u66f4\u6539\u3002</li> <li><code>interruptBefore</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u5e94\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li><code>interruptAfter</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u540e\u5e94\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> </ol> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n    \\\"assistant_id\\\": \\\"agent\\\",\n    \\\"interrupt_before\\\": [\\\"node_a\\\"],\n    \\\"interrupt_after\\\": [\\\"node_b\\\", \\\"node_c\\\"],\n    \\\"input\\\": &lt;INPUT&gt;\n}\"\n</code></pre> <p>\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u4e86\u5982\u4f55\u6dfb\u52a0\u9759\u6001\u4e2d\u65ad:</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\n# Run the graph until the breakpoint\nresult = await client.runs.wait(\n    thread_id,\n    assistant_id,\n    input=inputs   # (1)!\n)\n\n# Resume the graph\nawait client.runs.wait(\n    thread_id,\n    assistant_id,\n    input=None   # (2)!\n)\n</code></pre> <ol> <li>\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u7b2c\u4e00\u4e2a\u65ad\u70b9\u3002</li> <li>\u901a\u8fc7\u4e3a\u8f93\u5165\u4f20\u9012 <code>None</code> \u6765\u6062\u590d\u56fe\u3002\u8fd9\u5c06\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u4e0b\u4e00\u4e2a\u65ad\u70b9\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// Run the graph until the breakpoint\nconst result = await client.runs.wait(\n  threadID,\n  assistantID,\n  { input: input }   // (1)!\n);\n\n// Resume the graph\nawait client.runs.wait(\n  threadID,\n  assistantID,\n  { input: null }   // (2)!\n);\n</code></pre> <ol> <li>\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u7b2c\u4e00\u4e2a\u65ad\u70b9\u3002</li> <li>\u901a\u8fc7\u4e3a\u8f93\u5165\u4f20\u9012 <code>null</code> \u6765\u6062\u590d\u56fe\u3002\u8fd9\u5c06\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u4e0b\u4e00\u4e2a\u65ad\u70b9\u3002</li> </ol> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u8fd0\u884c\u56fe\u76f4\u5230\u9047\u5230\u65ad\u70b9:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": &lt;INPUT&gt;\n}\"\n</code></pre> <p>\u6062\u590d\u56fe:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/add-human-in-the-loop/#_3","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>\u4eba\u673a\u534f\u540c\u6982\u5ff5\u6307\u5357:\u4e86\u89e3\u6709\u5173 LangGraph \u4eba\u673a\u534f\u540c\u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f\u3002</li> <li>\u5e38\u89c1\u6a21\u5f0f:\u4e86\u89e3\u5982\u4f55\u5b9e\u73b0\u8bf8\u5982\u6279\u51c6/\u62d2\u7edd\u64cd\u4f5c\u3001\u8bf7\u6c42\u7528\u6237\u8f93\u5165\u3001\u5de5\u5177\u8c03\u7528\u5ba1\u67e5\u548c\u9a8c\u8bc1\u4eba\u7c7b\u8f93\u5165\u7b49\u6a21\u5f0f\u3002</li> </ul>"},{"location":"cloud/how-tos/background_run/","title":"\u5982\u4f55\u542f\u52a8\u540e\u53f0\u8fd0\u884c","text":"<p>\u672c\u6307\u5357\u4ecb\u7ecd\u5982\u4f55\u4e3a\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u542f\u52a8\u540e\u53f0\u8fd0\u884c\u3002 \u8fd9\u5bf9\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1\u5f88\u6709\u7528\u3002</p>"},{"location":"cloud/how-tos/background_run/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148\u8ba9\u6211\u4eec\u8bbe\u7f6e\u5ba2\u6237\u7aef\u548c\u7ebf\u7a0b:</p> PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n# create thread\nthread = await client.threads.create()\nprint(thread)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n// create thread\nconst thread = await client.threads.create();\nconsole.log(thread);\n</code></pre> <pre><code>curl --request POST \\\n  --url &lt;DEPLOYMENT_URL&gt;/threads \\\n  --header 'Content-Type: application/json' \\\n  --data '{}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    'thread_id': '5cb1e8a1-34b3-4a61-a34e-71a9799bd00d',\n    'created_at': '2024-08-30T20:35:52.062934+00:00',\n    'updated_at': '2024-08-30T20:35:52.062934+00:00',\n    'metadata': {},\n    'status': 'idle',\n    'config': {},\n    'values': None\n}\n</code></pre>"},{"location":"cloud/how-tos/background_run/#_3","title":"\u68c0\u67e5\u7ebf\u7a0b\u4e0a\u7684\u8fd0\u884c","text":"<p>\u5982\u679c\u6211\u4eec\u5217\u51fa\u6b64\u7ebf\u7a0b\u4e0a\u7684\u5f53\u524d\u8fd0\u884c,\u6211\u4eec\u5c06\u770b\u5230\u5b83\u662f\u7a7a\u7684:</p> PythonJavascriptCURL <pre><code>runs = await client.runs.list(thread[\"thread_id\"])\nprint(runs)\n</code></pre> <pre><code>let runs = await client.runs.list(thread['thread_id']);\nconsole.log(runs);\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>[]\n</code></pre>"},{"location":"cloud/how-tos/background_run/#_4","title":"\u5728\u7ebf\u7a0b\u4e0a\u542f\u52a8\u8fd0\u884c","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u542f\u52a8\u4e00\u4e2a\u8fd0\u884c:</p> PythonJavascriptCURL <pre><code>input = {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]}\nrun = await client.runs.create(thread[\"thread_id\"], assistant_id, input=input)\n</code></pre> <pre><code>let input = {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]};\nlet run = await client.runs.create(thread[\"thread_id\"], assistantID, { input });\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;ASSISTANT_ID&gt;\n    }'\n</code></pre> <p>\u7b2c\u4e00\u6b21\u8f6e\u8be2\u65f6,\u6211\u4eec\u53ef\u4ee5\u770b\u5230 <code>status=pending</code>:</p> PythonJavascriptCURL <pre><code>print(await client.runs.get(thread[\"thread_id\"], run[\"run_id\"]))\n</code></pre> <pre><code>console.log(await client.runs.get(thread[\"thread_id\"], run[\"run_id\"]));\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>    {\n        \"run_id\": \"1ef6a5f8-bd86-6763-bbd6-bff042db7b1b\",\n        \"thread_id\": \"7885f0cf-94ad-4040-91d7-73f7ba007c8a\",\n        \"assistant_id\": \"fe096781-5601-53d2-b2f6-0d3403f7e9ca\",\n        \"created_at\": \"2024-09-04T01:46:47.244887+00:00\",\n        \"updated_at\": \"2024-09-04T01:46:47.244887+00:00\",\n        \"metadata\": {},\n        \"status\": \"pending\",\n        \"kwargs\": {\n            \"input\": {\n                \"messages\": [\n                    {\n                        \"role\": \"user\",\n                        \"content\": \"\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\"\n                    }\n                ]\n            },\n            \"config\": {\n                \"metadata\": {\n                    \"created_by\": \"system\"\n                },\n                \"configurable\": {\n                    \"run_id\": \"1ef6a5f8-bd86-6763-bbd6-bff042db7b1b\",\n                    \"user_id\": \"\",\n                    \"graph_id\": \"agent\",\n                    \"thread_id\": \"7885f0cf-94ad-4040-91d7-73f7ba007c8a\",\n                    \"assistant_id\": \"fe096781-5601-53d2-b2f6-0d3403f7e9ca\",\n                    \"checkpoint_id\": null\n                }\n            },\n            \"webhook\": null,\n            \"temporary\": false,\n            \"stream_mode\": [\n                \"values\"\n            ],\n            \"feedback_keys\": null,\n            \"interrupt_after\": null,\n            \"interrupt_before\": null\n        },\n        \"multitask_strategy\": \"reject\"\n    }\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u52a0\u5165\u8fd0\u884c,\u7b49\u5f85\u5176\u5b8c\u6210\u5e76\u518d\u6b21\u68c0\u67e5\u72b6\u6001:</p> PythonJavascriptCURL <pre><code>await client.runs.join(thread[\"thread_id\"], run[\"run_id\"])\nprint(await client.runs.get(thread[\"thread_id\"], run[\"run_id\"]))\n</code></pre> <pre><code>await client.runs.join(thread[\"thread_id\"], run[\"run_id\"]);\nconsole.log(await client.runs.get(thread[\"thread_id\"], run[\"run_id\"]));\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;/join &amp;&amp;\ncurl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"run_id\": \"1ef6a5f8-bd86-6763-bbd6-bff042db7b1b\",\n    \"thread_id\": \"7885f0cf-94ad-4040-91d7-73f7ba007c8a\",\n    \"assistant_id\": \"fe096781-5601-53d2-b2f6-0d3403f7e9ca\",\n    \"created_at\": \"2024-09-04T01:46:47.244887+00:00\",\n    \"updated_at\": \"2024-09-04T01:46:47.244887+00:00\",\n    \"metadata\": {},\n    \"status\": \"success\",\n    \"kwargs\": {\n        \"input\": {\n            \"messages\": [\n                {\n                    \"role\": \"user\",\n                    \"content\": \"\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\"\n                }\n            ]\n        },\n        \"config\": {\n            \"metadata\": {\n                \"created_by\": \"system\"\n            },\n            \"configurable\": {\n                \"run_id\": \"1ef6a5f8-bd86-6763-bbd6-bff042db7b1b\",\n                \"user_id\": \"\",\n                \"graph_id\": \"agent\",\n                \"thread_id\": \"7885f0cf-94ad-4040-91d7-73f7ba007c8a\",\n                \"assistant_id\": \"fe096781-5601-53d2-b2f6-0d3403f7e9ca\",\n                \"checkpoint_id\": null\n            }\n        },\n        \"webhook\": null,\n        \"temporary\": false,\n        \"stream_mode\": [\n            \"values\"\n        ],\n        \"feedback_keys\": null,\n        \"interrupt_after\": null,\n        \"interrupt_before\": null\n    },\n    \"multitask_strategy\": \"reject\"\n}\n</code></pre> <p>\u5b8c\u7f8e!\u8fd0\u884c\u6210\u529f,\u6b63\u5982\u6211\u4eec\u6240\u9884\u671f\u7684\u90a3\u6837\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6253\u5370\u6700\u7ec8\u72b6\u6001\u6765\u518d\u6b21\u786e\u8ba4\u8fd0\u884c\u6309\u9884\u671f\u5de5\u4f5c:</p> PythonJavascriptCURL <pre><code>final_result = await client.threads.get_state(thread[\"thread_id\"])\nprint(final_result)\n</code></pre> <pre><code>let finalResult = await client.threads.getState(thread[\"thread_id\"]);\nconsole.log(finalResult);\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"values\": {\n        \"messages\": [\n            {\n                \"content\": \"what's the weather in sf\",\n                \"additional_kwargs\": {},\n                \"response_metadata\": {},\n                \"type\": \"human\",\n                \"name\": null,\n                \"id\": \"beba31bf-320d-4125-9c37-cadf526ac47a\",\n                \"example\": false\n            },\n            {\n                \"content\": [\n                    {\n                        \"id\": \"toolu_01AaNPSPzqia21v7aAKwbKYm\",\n                        \"input\": {},\n                        \"name\": \"tavily_search_results_json\",\n                        \"type\": \"tool_use\",\n                        \"index\": 0,\n                        \"partial_json\": \"{\\\"query\\\": \\\"weather in san francisco\\\"}\"\n                    }\n                ],\n                \"additional_kwargs\": {},\n                \"response_metadata\": {\n                    \"stop_reason\": \"tool_use\",\n                    \"stop_sequence\": null\n                },\n                \"type\": \"ai\",\n                \"name\": null,\n                \"id\": \"run-f220faf8-1d27-4f73-ad91-6bb3f47e8639\",\n                \"example\": false,\n                \"tool_calls\": [\n                    {\n                        \"name\": \"tavily_search_results_json\",\n                        \"args\": {\n                            \"query\": \"weather in san francisco\"\n                        },\n                        \"id\": \"toolu_01AaNPSPzqia21v7aAKwbKYm\",\n                        \"type\": \"tool_call\"\n                    }\n                ],\n                \"invalid_tool_calls\": [],\n                \"usage_metadata\": {\n                    \"input_tokens\": 273,\n                    \"output_tokens\": 61,\n                    \"total_tokens\": 334\n                }\n            },\n            {\n                \"content\": \"[{\\\"url\\\": \\\"https://www.weatherapi.com/\\\", \\\"content\\\": \\\"{'location': {'name': 'San Francisco', 'region': 'California', 'country': 'United States of America', 'lat': 37.78, 'lon': -122.42, 'tz_id': 'America/Los_Angeles', 'localtime_epoch': 1725052131, 'localtime': '2024-08-30 14:08'}, 'current': {'last_updated_epoch': 1725051600, 'last_updated': '2024-08-30 14:00', 'temp_c': 21.1, 'temp_f': 70.0, 'is_day': 1, 'condition': {'text': 'Partly cloudy', 'icon': '//cdn.weatherapi.com/weather/64x64/day/116.png', 'code': 1003}, 'wind_mph': 11.9, 'wind_kph': 19.1, 'wind_degree': 290, 'wind_dir': 'WNW', 'pressure_mb': 1018.0, 'pressure_in': 30.07, 'precip_mm': 0.0, 'precip_in': 0.0, 'humidity': 59, 'cloud': 25, 'feelslike_c': 21.1, 'feelslike_f': 70.0, 'windchill_c': 18.6, 'windchill_f': 65.5, 'heatindex_c': 18.6, 'heatindex_f': 65.5, 'dewpoint_c': 12.2, 'dewpoint_f': 54.0, 'vis_km': 16.0, 'vis_miles': 9.0, 'uv': 5.0, 'gust_mph': 15.0, 'gust_kph': 24.2}}\\\"}]\",\n                \"additional_kwargs\": {},\n                \"response_metadata\": {},\n                \"type\": \"tool\",\n                \"name\": \"tavily_search_results_json\",\n                \"id\": \"686b2487-f332-4e58-9508-89b3a814cd81\",\n                \"tool_call_id\": \"toolu_01AaNPSPzqia21v7aAKwbKYm\",\n                \"artifact\": {\n                    \"query\": \"weather in san francisco\",\n                    \"follow_up_questions\": null,\n                    \"answer\": null,\n                    \"images\": [],\n                    \"results\": [\n                        {\n                            \"title\": \"Weather in San Francisco\",\n                            \"url\": \"https://www.weatherapi.com/\",\n                            \"content\": \"{'location': {'name': 'San Francisco', 'region': 'California', 'country': 'United States of America', 'lat': 37.78, 'lon': -122.42, 'tz_id': 'America/Los_Angeles', 'localtime_epoch': 1725052131, 'localtime': '2024-08-30 14:08'}, 'current': {'last_updated_epoch': 1725051600, 'last_updated': '2024-08-30 14:00', 'temp_c': 21.1, 'temp_f': 70.0, 'is_day': 1, 'condition': {'text': 'Partly cloudy', 'icon': '//cdn.weatherapi.com/weather/64x64/day/116.png', 'code': 1003}, 'wind_mph': 11.9, 'wind_kph': 19.1, 'wind_degree': 290, 'wind_dir': 'WNW', 'pressure_mb': 1018.0, 'pressure_in': 30.07, 'precip_mm': 0.0, 'precip_in': 0.0, 'humidity': 59, 'cloud': 25, 'feelslike_c': 21.1, 'feelslike_f': 70.0, 'windchill_c': 18.6, 'windchill_f': 65.5, 'heatindex_c': 18.6, 'heatindex_f': 65.5, 'dewpoint_c': 12.2, 'dewpoint_f': 54.0, 'vis_km': 16.0, 'vis_miles': 9.0, 'uv': 5.0, 'gust_mph': 15.0, 'gust_kph': 24.2}}\",\n                            \"score\": 0.976148,\n                            \"raw_content\": null\n                        }\n                    ],\n                    \"response_time\": 3.07\n                },\n                \"status\": \"success\"\n            },\n            {\n                \"content\": [\n                    {\n                        \"text\": \"\\n\\nThe search results provide the current weather conditions in San Francisco. According to the data, as of 2:00 PM on August 30, 2024, the temperature in San Francisco is 70\u00b0F (21.1\u00b0C) with partly cloudy skies. The wind is blowing from the west-northwest at around 12 mph (19 km/h). The humidity is 59% and visibility is 9 miles (16 km). Overall, it looks like a nice late summer day in San Francisco with comfortable temperatures and partly sunny conditions.\",\n                        \"type\": \"text\",\n                        \"index\": 0\n                    }\n                ],\n                \"additional_kwargs\": {},\n                \"response_metadata\": {\n                    \"stop_reason\": \"end_turn\",\n                    \"stop_sequence\": null\n                },\n                \"type\": \"ai\",\n                \"name\": null,\n                \"id\": \"run-8fecc61d-3d9f-4e16-8e8a-92f702be498a\",\n                \"example\": false,\n                \"tool_calls\": [],\n                \"invalid_tool_calls\": [],\n                \"usage_metadata\": {\n                    \"input_tokens\": 837,\n                    \"output_tokens\": 124,\n                    \"total_tokens\": 961\n                }\n            }\n        ]\n    },\n    \"next\": [],\n    \"tasks\": [],\n    \"metadata\": {\n        \"step\": 3,\n        \"run_id\": \"1ef67140-eb23-684b-8253-91d4c90bb05e\",\n        \"source\": \"loop\",\n        \"writes\": {\n            \"agent\": {\n                \"messages\": [\n                    {\n                        \"id\": \"run-8fecc61d-3d9f-4e16-8e8a-92f702be498a\",\n                        \"name\": null,\n                        \"type\": \"ai\",\n                        \"content\": [\n                            {\n                                \"text\": \"\\n\\nThe search results provide the current weather conditions in San Francisco. According to the data, as of 2:00 PM on August 30, 2024, the temperature in San Francisco is 70\u00b0F (21.1\u00b0C) with partly cloudy skies. The wind is blowing from the west-northwest at around 12 mph (19 km/h). The humidity is 59% and visibility is 9 miles (16 km). Overall, it looks like a nice late summer day in San Francisco with comfortable temperatures and partly sunny conditions.\",\n                                \"type\": \"text\",\n                                \"index\": 0\n                            }\n                        ],\n                        \"example\": false,\n                        \"tool_calls\": [],\n                        \"usage_metadata\": {\n                            \"input_tokens\": 837,\n                            \"total_tokens\": 961,\n                            \"output_tokens\": 124\n                        },\n                        \"additional_kwargs\": {},\n                        \"response_metadata\": {\n                            \"stop_reason\": \"end_turn\",\n                            \"stop_sequence\": null\n                        },\n                        \"invalid_tool_calls\": []\n                    }\n                ]\n            }\n        },\n        \"user_id\": \"\",\n        \"graph_id\": \"agent\",\n        \"thread_id\": \"5cb1e8a1-34b3-4a61-a34e-71a9799bd00d\",\n        \"created_by\": \"system\",\n        \"assistant_id\": \"fe096781-5601-53d2-b2f6-0d3403f7e9ca\"\n    },\n    \"created_at\": \"2024-08-30T21:09:00.079909+00:00\",\n    \"checkpoint_id\": \"1ef67141-3ca2-6fae-8003-fe96832e57d6\",\n    \"parent_checkpoint_id\": \"1ef67141-2129-6b37-8002-61fc3bf69cb5\"\n}\n</code></pre> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u53ea\u6253\u5370\u6700\u540e\u4e00\u6761 AIMessage \u7684\u5185\u5bb9:</p> PythonJavascriptCURL <pre><code>print(final_result['values']['messages'][-1]['content'][0]['text'])\n</code></pre> <pre><code>console.log(finalResult['values']['messages'][finalResult['values']['messages'].length-1]['content'][0]['text']);\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state | jq -r '.values.messages[-1].content.[0].text'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>The search results provide the current weather conditions in San Francisco. According to the data, as of 2:00 PM on August 30, 2024, the temperature in San Francisco is 70\u00b0F (21.1\u00b0C) with partly cloudy skies. The wind is blowing from the west-northwest at around 12 mph (19 km/h). The humidity is 59% and visibility is 9 miles (16 km). Overall, it looks like a nice late summer day in San Francisco with comfortable temperatures and partly sunny conditions.\n</code></pre>"},{"location":"cloud/how-tos/clone_traces_studio/","title":"\u8c03\u8bd5 LangSmith \u8f68\u8ff9","text":"<p>\u672c\u6307\u5357\u4ecb\u7ecd\u5982\u4f55\u5728 LangGraph Studio \u4e2d\u6253\u5f00 LangSmith \u8f68\u8ff9\u4ee5\u8fdb\u884c\u4ea4\u4e92\u5f0f\u8c03\u67e5\u548c\u8c03\u8bd5\u3002</p>"},{"location":"cloud/how-tos/clone_traces_studio/#_1","title":"\u6253\u5f00\u5df2\u90e8\u7f72\u7684\u7ebf\u7a0b","text":"<ol> <li>\u6253\u5f00 LangSmith \u8f68\u8ff9,\u9009\u62e9\u6839\u8fd0\u884c\u3002</li> <li>\u70b9\u51fb \"Run in Studio\"\u3002</li> </ol> <p>\u8fd9\u5c06\u6253\u5f00\u8fde\u63a5\u5230\u5173\u8054\u7684 LangGraph Platform \u90e8\u7f72\u7684 LangGraph Studio,\u5e76\u9009\u4e2d\u8be5\u8f68\u8ff9\u7684\u7236\u7ebf\u7a0b\u3002</p>"},{"location":"cloud/how-tos/clone_traces_studio/#_2","title":"\u4f7f\u7528\u8fdc\u7a0b\u8f68\u8ff9\u6d4b\u8bd5\u672c\u5730\u667a\u80fd\u4ee3\u7406","text":"<p>\u672c\u8282\u4ecb\u7ecd\u5982\u4f55\u9488\u5bf9 LangSmith \u7684\u8fdc\u7a0b\u8f68\u8ff9\u6d4b\u8bd5\u672c\u5730\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u4f7f\u4f60\u80fd\u591f\u4f7f\u7528\u751f\u4ea7\u8f68\u8ff9\u4f5c\u4e3a\u672c\u5730\u6d4b\u8bd5\u7684\u8f93\u5165,\u5141\u8bb8\u4f60\u5728\u5f00\u53d1\u73af\u5883\u4e2d\u8c03\u8bd5\u548c\u9a8c\u8bc1\u667a\u80fd\u4ee3\u7406\u4fee\u6539\u3002</p>"},{"location":"cloud/how-tos/clone_traces_studio/#_3","title":"\u8981\u6c42","text":"<ul> <li>\u4e00\u4e2a LangSmith \u8ddf\u8e2a\u7684\u7ebf\u7a0b</li> <li>\u4e00\u4e2a\u672c\u5730\u8fd0\u884c\u7684\u667a\u80fd\u4ee3\u7406\u3002\u8bf7\u53c2\u9605\u8fd9\u91cc\u83b7\u53d6\u8bbe\u7f6e\u8bf4\u660e\u3002</li> </ul> <p>\u672c\u5730\u667a\u80fd\u4ee3\u7406\u8981\u6c42</p> <ul> <li>langgraph&gt;=0.3.18</li> <li>langgraph-api&gt;=0.0.32</li> <li>\u5305\u542b\u8fdc\u7a0b\u8f68\u8ff9\u4e2d\u5b58\u5728\u7684\u76f8\u540c\u8282\u70b9\u96c6</li> </ul>"},{"location":"cloud/how-tos/clone_traces_studio/#_4","title":"\u514b\u9686\u7ebf\u7a0b","text":"<ol> <li>\u6253\u5f00 LangSmith \u8f68\u8ff9,\u9009\u62e9\u6839\u8fd0\u884c\u3002</li> <li>\u70b9\u51fb \"Run in Studio\" \u65c1\u8fb9\u7684\u4e0b\u62c9\u83dc\u5355\u3002</li> <li>\u8f93\u5165\u672c\u5730\u667a\u80fd\u4ee3\u7406\u7684 URL\u3002</li> <li>\u9009\u62e9 \"Clone thread locally\"\u3002</li> <li>\u5982\u679c\u5b58\u5728\u591a\u4e2a\u56fe,\u9009\u62e9\u76ee\u6807\u56fe\u3002</li> </ol> <p>\u5c06\u5728\u4f60\u7684\u672c\u5730\u667a\u80fd\u4ee3\u7406\u4e2d\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b,\u7ebf\u7a0b\u5386\u53f2\u8bb0\u5f55\u5c06\u4ece\u8fdc\u7a0b\u7ebf\u7a0b\u63a8\u65ad\u548c\u590d\u5236,\u4f60\u5c06\u88ab\u5bfc\u822a\u5230\u672c\u5730\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u7684 LangGraph Studio\u3002</p>"},{"location":"cloud/how-tos/configurable_headers/","title":"\u53ef\u914d\u7f6e\u7684\u8bf7\u6c42\u5934","text":"<p>LangGraph \u5141\u8bb8\u8fd0\u884c\u65f6\u914d\u7f6e\u52a8\u6001\u4fee\u6539\u667a\u80fd\u4ee3\u7406\u884c\u4e3a\u548c\u6743\u9650\u3002\u5f53\u4f7f\u7528 LangGraph Platform \u65f6,\u4f60\u53ef\u4ee5\u5728\u8bf7\u6c42\u4f53 (<code>config</code>) \u6216\u7279\u5b9a\u8bf7\u6c42\u5934\u4e2d\u4f20\u9012\u6b64\u914d\u7f6e\u3002\u8fd9\u4f7f\u5f97\u53ef\u4ee5\u6839\u636e\u7528\u6237\u8eab\u4efd\u6216\u5176\u4ed6\u8bf7\u6c42\u6570\u636e\u8fdb\u884c\u8c03\u6574\u3002</p> <p>\u4e3a\u4e86\u4fdd\u62a4\u9690\u79c1,\u901a\u8fc7 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u7684 <code>http.configurable_headers</code> \u90e8\u5206\u63a7\u5236\u54ea\u4e9b\u8bf7\u6c42\u5934\u4f20\u9012\u5230\u8fd0\u884c\u65f6\u914d\u7f6e\u3002</p> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u81ea\u5b9a\u4e49\u5305\u542b\u548c\u6392\u9664\u7684\u8bf7\u6c42\u5934:</p> <pre><code>{\n  \"http\": {\n    \"configurable_headers\": {\n      \"include\": [\"x-user-id\", \"x-organization-id\", \"my-prefix-*\"],\n      \"exclude\": [\"authorization\", \"x-api-key\"]\n    }\n  }\n}\n</code></pre> <p><code>include</code> \u548c <code>exclude</code> \u5217\u8868\u63a5\u53d7\u7cbe\u786e\u7684\u8bf7\u6c42\u5934\u540d\u79f0\u6216\u4f7f\u7528 <code>*</code> \u5339\u914d\u4efb\u610f\u6570\u91cf\u5b57\u7b26\u7684\u6a21\u5f0f\u3002\u4e3a\u4e86\u4f60\u7684\u5b89\u5168,\u4e0d\u652f\u6301\u5176\u4ed6\u6b63\u5219\u8868\u8fbe\u5f0f\u6a21\u5f0f\u3002</p>"},{"location":"cloud/how-tos/configurable_headers/#_2","title":"\u5728\u56fe\u4e2d\u4f7f\u7528","text":"<p>\u4f60\u53ef\u4ee5\u5728\u56fe\u4e2d\u4f7f\u7528\u4efb\u4f55\u8282\u70b9\u7684 <code>config</code> \u53c2\u6570\u8bbf\u95ee\u5305\u542b\u7684\u8bf7\u6c42\u5934\u3002</p> <pre><code>def my_node(state, config):\n  organization_id = config[\"configurable\"].get(\"x-organization-id\")\n  ...\n</code></pre> <p>\u6216\u8005\u901a\u8fc7\u4ece\u4e0a\u4e0b\u6587\u4e2d\u83b7\u53d6(\u5728\u5de5\u5177\u6216\u5176\u4ed6\u5d4c\u5957\u51fd\u6570\u4e2d\u5f88\u6709\u7528)\u3002</p> <pre><code>from langgraph.config import get_config\n\ndef search_everything(query: str):\n  organization_id = get_config()[\"configurable\"].get(\"x-organization-id\")\n  ...\n</code></pre> <p>\u4f60\u751a\u81f3\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u52a8\u6001\u7f16\u8bd1\u56fe\u3002</p> <pre><code># my_graph.py.\nimport contextlib\n\n@contextlib.asynccontextmanager\nasync def generate_agent(config):\n  organization_id = config[\"configurable\"].get(\"x-organization-id\")\n  if organization_id == \"org1\":\n    graph = ...\n    yield graph\n  else:\n    graph = ...\n    yield graph\n</code></pre> <pre><code>{\n  \"graphs\": {\"agent\": \"my_grph.py:generate_agent\"}\n}\n</code></pre>"},{"location":"cloud/how-tos/configurable_headers/#_3","title":"\u9009\u62e9\u9000\u51fa\u53ef\u914d\u7f6e\u8bf7\u6c42\u5934","text":"<p>\u5982\u679c\u4f60\u60f3\u9009\u62e9\u9000\u51fa\u53ef\u914d\u7f6e\u8bf7\u6c42\u5934,\u53ef\u4ee5\u5728 <code>exclude</code> \u5217\u8868\u4e2d\u7b80\u5355\u5730\u8bbe\u7f6e\u901a\u914d\u7b26\u6a21\u5f0f:</p> <pre><code>{\n  \"http\": {\n    \"configurable_headers\": {\n      \"exclude\": [\"*\"]\n    }\n  }\n}\n</code></pre> <p>\u8fd9\u5c06\u6392\u9664\u6240\u6709\u8bf7\u6c42\u5934,\u4e0d\u5c06\u5176\u6dfb\u52a0\u5230\u8fd0\u884c\u7684\u914d\u7f6e\u4e2d\u3002</p> <p>\u8bf7\u6ce8\u610f,\u6392\u9664\u4f18\u5148\u4e8e\u5305\u542b\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/","title":"\u7ba1\u7406\u52a9\u624b","text":"<p>\u5728\u672c\u6307\u5357\u4e2d,\u6211\u4eec\u5c06\u5c55\u793a\u5982\u4f55\u521b\u5efa\u3001\u914d\u7f6e\u548c\u7ba1\u7406\u52a9\u624b\u3002</p> <p>\u9996\u5148,\u7b80\u8981\u56de\u987e\u4e00\u4e0b\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u7684\u6982\u5ff5,\u8003\u8651\u4ee5\u4e0b\u7b80\u5355\u7684 <code>call_model</code> \u8282\u70b9\u548c\u4e0a\u4e0b\u6587\u67b6\u6784\u3002\u8bf7\u6ce8\u610f,\u6b64\u8282\u70b9\u5c1d\u8bd5\u8bfb\u53d6\u5e76\u4f7f\u7528 <code>Runtime</code> \u5bf9\u8c61\u7684 <code>context</code> \u5c5e\u6027\u5b9a\u4e49\u7684 <code>model_provider</code>\u3002</p> PythonJavascriptPython <pre><code>@dataclass\nclass ContextSchema:\n    llm_provider: str = \"anthropic\"\n\nbuilder = StateGraph(AgentState, context_schema=ContextSchema)\n\ndef call_model(state, runtime: Runtime[ContextSchema]):\n    messages = state[\"messages\"]\n    model = _get_model(runtime.context.llm_provider)\n    response = model.invoke(messages)\n    # We return a list, because this will get added to the existing list\n    return {\"messages\": [response]}\n</code></pre> <pre><code>import { Annotation } from \"@langchain/langgraph\";\n\nconst ConfigSchema = Annotation.Root({\n    model_name: Annotation&lt;string&gt;,\n    system_prompt:\n});\n\nconst builder = new StateGraph(AgentState, ConfigSchema)\n\nfunction callModel(state: State, config: RunnableConfig) {\n  const messages = state.messages;\n  const modelName = config.configurable?.model_name ?? \"anthropic\";\n  const model = _getModel(modelName);\n  const response = model.invoke(messages);\n  // We return a list, because this will get added to the existing list\n  return { messages: [response] };\n}\n</code></pre> <p>\u6709\u5173\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6b64\u5904\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/#_2","title":"\u521b\u5efa\u52a9\u624b","text":""},{"location":"cloud/how-tos/configuration_cloud/#langgraph-sdk","title":"LangGraph SDK","text":"<p>\u8981\u521b\u5efa\u52a9\u624b,\u8bf7\u4f7f\u7528 LangGraph SDK \u7684 <code>create</code> \u65b9\u6cd5\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS SDK \u53c2\u8003\u6587\u6863\u3002</p> <p>\u6b64\u793a\u4f8b\u4f7f\u7528\u4e0e\u4e0a\u9762\u76f8\u540c\u7684\u914d\u7f6e\u67b6\u6784,\u5e76\u521b\u5efa\u4e00\u4e2a <code>model_name</code> \u8bbe\u7f6e\u4e3a <code>openai</code> \u7684\u52a9\u624b\u3002</p> PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\nopenai_assistant = await client.assistants.create(\n    # \"agent\" is the name of a graph we deployed\n    \"agent\", config={\"configurable\": {\"model_name\": \"openai\"}}, name=\"Open AI Assistant\"\n)\n\nprint(openai_assistant)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\nconst openAIAssistant = await client.assistants.create({\n    graphId: 'agent',\n    name: \"Open AI Assistant\",\n    config: { \"configurable\": { \"model_name\": \"openai\" } },\n});\n\nconsole.log(openAIAssistant);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants \\\n    --header 'Content-Type: application/json' \\\n    --data '{\"graph_id\":\"agent\", \"config\":{\"configurable\":{\"model_name\":\"openai\"}}, \"name\": \"Open AI Assistant\"}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"assistant_id\": \"62e209ca-9154-432a-b9e9-2d75c7a9219b\",\n    \"graph_id\": \"agent\",\n    \"name\": \"Open AI Assistant\"\n    \"config\": {\n        \"configurable\": {\n            \"model_name\": \"openai\"\n        }\n    },\n    \"metadata\": {}\n    \"created_at\": \"2024-08-31T03:09:10.230718+00:00\",\n    \"updated_at\": \"2024-08-31T03:09:10.230718+00:00\",\n}\n</code></pre>"},{"location":"cloud/how-tos/configuration_cloud/#langgraph-platform-ui","title":"LangGraph Platform UI","text":"<p>\u4f60\u4e5f\u53ef\u4ee5\u4ece LangGraph Platform UI \u521b\u5efa\u52a9\u624b\u3002</p> <p>\u5728\u4f60\u7684\u90e8\u7f72\u4e2d,\u9009\u62e9\"Assistants\"\u9009\u9879\u5361\u3002\u8fd9\u5c06\u52a0\u8f7d\u4f60\u7684\u90e8\u7f72\u4e2d\u6240\u6709\u56fe\u7684\u6240\u6709\u52a9\u624b\u7684\u8868\u683c\u3002</p> <p>\u8981\u521b\u5efa\u65b0\u52a9\u624b,\u8bf7\u9009\u62e9\"+ New assistant\"\u6309\u94ae\u3002\u8fd9\u5c06\u6253\u5f00\u4e00\u4e2a\u8868\u5355,\u4f60\u53ef\u4ee5\u5728\u5176\u4e2d\u6307\u5b9a\u6b64\u52a9\u624b\u5bf9\u5e94\u7684\u56fe,\u4ee5\u53ca\u6839\u636e\u8be5\u56fe\u7684\u914d\u7f6e\u67b6\u6784\u63d0\u4f9b\u540d\u79f0\u3001\u63cf\u8ff0\u548c\u6240\u9700\u7684\u52a9\u624b\u914d\u7f6e\u3002</p> <p>\u8981\u786e\u8ba4,\u8bf7\u70b9\u51fb\"Create assistant\"\u3002\u8fd9\u5c06\u5e26\u4f60\u5230 LangGraph Studio,\u4f60\u53ef\u4ee5\u5728\u5176\u4e2d\u6d4b\u8bd5\u52a9\u624b\u3002\u5982\u679c\u4f60\u8fd4\u56de\u5230\u90e8\u7f72\u4e2d\u7684\"Assistants\"\u9009\u9879\u5361,\u4f60\u5c06\u5728\u8868\u683c\u4e2d\u770b\u5230\u65b0\u521b\u5efa\u7684\u52a9\u624b\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/#_3","title":"\u4f7f\u7528\u52a9\u624b","text":""},{"location":"cloud/how-tos/configuration_cloud/#langgraph-sdk_1","title":"LangGraph SDK","text":"<p>\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u4e3a\"Open AI Assistant\"\u7684\u52a9\u624b,\u5b83\u5c06 <code>model_name</code> \u5b9a\u4e49\u4e3a <code>openai</code>\u3002\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u6b64\u914d\u7f6e\u6765\u4f7f\u7528\u6b64\u52a9\u624b:</p> PythonJavascriptCURL <pre><code>thread = await client.threads.create()\ninput = {\"messages\": [{\"role\": \"user\", \"content\": \"who made you?\"}]}\nasync for event in client.runs.stream(\n    thread[\"thread_id\"],\n    # this is where we specify the assistant id to use\n    openai_assistant[\"assistant_id\"],\n    input=input,\n    stream_mode=\"updates\",\n):\n    print(f\"Receiving event of type: {event.event}\")\n    print(event.data)\n    print(\"\\n\\n\")\n</code></pre> <pre><code>const thread = await client.threads.create();\nconst input = { \"messages\": [{ \"role\": \"user\", \"content\": \"who made you?\" }] };\n\nconst streamResponse = client.runs.stream(\n  thread[\"thread_id\"],\n  // this is where we specify the assistant id to use\n  openAIAssistant[\"assistant_id\"],\n  {\n    input,\n    streamMode: \"updates\"\n  }\n);\n\nfor await (const event of streamResponse) {\n  console.log(`Receiving event of type: ${event.event}`);\n  console.log(event.data);\n  console.log(\"\\n\\n\");\n}\n</code></pre> <pre><code>thread_id=$(curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{}' | jq -r '.thread_id') &amp;&amp; \\\ncurl --request POST \\\n    --url \"&lt;DEPLOYMENT_URL&gt;/threads/${thread_id}/runs/stream\" \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;OPENAI_ASSISTANT_ID&gt;,\n        \"input\": {\n            \"messages\": [\n                {\n                    \"role\": \"user\",\n                    \"content\": \"who made you?\"\n                }\n            ]\n        },\n        \"stream_mode\": [\n            \"updates\"\n        ]\n    }' | \\\n    sed 's/\\r$//' | \\\n    awk '\n    /^event:/ {\n        if (data_content != \"\") {\n            print data_content \"\\n\"\n        }\n        sub(/^event: /, \"Receiving event of type: \", $0)\n        printf \"%s...\\n\", $0\n        data_content = \"\"\n    }\n    /^data:/ {\n        sub(/^data: /, \"\", $0)\n        data_content = $0\n    }\n    END {\n        if (data_content != \"\") {\n            print data_content \"\\n\\n\"\n        }\n    }\n'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>```\nReceiving event of type: metadata\n{'run_id': '1ef6746e-5893-67b1-978a-0f1cd4060e16'}\n\n\n\nReceiving event of type: updates\n{'agent': {'messages': [{'content': 'I was created by OpenAI, a research organization focused on developing and advancing artificial intelligence technology.', 'additional_kwargs': {}, 'response_metadata': {'finish_reason': 'stop', 'model_name': 'gpt-4o-2024-05-13', 'system_fingerprint': 'fp_157b3831f5'}, 'type': 'ai', 'name': None, 'id': 'run-e1a6b25c-8416-41f2-9981-f9cfe043f414', 'example': False, 'tool_calls': [], 'invalid_tool_calls': [], 'usage_metadata': None}]}}\n```\n</code></pre>"},{"location":"cloud/how-tos/configuration_cloud/#langgraph-platform-ui_1","title":"LangGraph Platform UI","text":"<p>\u5728\u4f60\u7684\u90e8\u7f72\u4e2d,\u9009\u62e9\"Assistants\"\u9009\u9879\u5361\u3002\u5bf9\u4e8e\u4f60\u60f3\u8981\u4f7f\u7528\u7684\u52a9\u624b,\u70b9\u51fb\"Studio\"\u6309\u94ae\u3002\u8fd9\u5c06\u6253\u5f00\u9009\u4e2d\u52a9\u624b\u7684 LangGraph Studio\u3002\u5f53\u4f60\u63d0\u4ea4\u8f93\u5165(\u65e0\u8bba\u662f\u5728 Graph \u6a21\u5f0f\u8fd8\u662f Chat \u6a21\u5f0f\u4e0b)\u65f6,\u5c06\u4f7f\u7528\u9009\u4e2d\u7684\u52a9\u624b\u53ca\u5176\u914d\u7f6e\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/#_4","title":"\u4e3a\u52a9\u624b\u521b\u5efa\u65b0\u7248\u672c","text":""},{"location":"cloud/how-tos/configuration_cloud/#langgraph-sdk_2","title":"LangGraph SDK","text":"<p>\u8981\u7f16\u8f91\u52a9\u624b,\u8bf7\u4f7f\u7528 <code>update</code> \u65b9\u6cd5\u3002\u8fd9\u5c06\u4f7f\u7528\u63d0\u4f9b\u7684\u7f16\u8f91\u5185\u5bb9\u521b\u5efa\u52a9\u624b\u7684\u65b0\u7248\u672c\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS SDK \u53c2\u8003\u6587\u6863\u3002</p> <p>\u6ce8\u610f</p> <p>\u4f60\u5fc5\u987b\u4f20\u5165\u5b8c\u6574\u7684\u914d\u7f6e(\u5982\u679c\u4f60\u4f7f\u7528\u7684\u8bdd\u8fd8\u6709\u5143\u6570\u636e)\u3002\u66f4\u65b0\u7aef\u70b9\u4f1a\u4ece\u5934\u5f00\u59cb\u521b\u5efa\u65b0\u7248\u672c,\u800c\u4e0d\u4f9d\u8d56\u4e8e\u4ee5\u524d\u7684\u7248\u672c\u3002</p> <p>\u4f8b\u5982,\u8981\u66f4\u65b0\u52a9\u624b\u7684\u7cfb\u7edf\u63d0\u793a:</p> PythonJavascriptCURL <pre><code>openai_assistant_v2 = await client.assistants.update(\n    openai_assistant[\"assistant_id\"],\n    config={\n        \"configurable\": {\n            \"model_name\": \"openai\",\n            \"system_prompt\": \"You are an unhelpful assistant!\",\n        }\n    },\n)\n</code></pre> <pre><code>const openaiAssistantV2 = await client.assistants.update(\n    openai_assistant[\"assistant_id\"],\n    {\n        config: {\n            configurable: {\n                model_name: 'openai',\n                system_prompt: 'You are an unhelpful assistant!',\n            },\n    },\n});\n</code></pre> <pre><code>curl --request PATCH \\\n--url &lt;DEPOLYMENT_URL&gt;/assistants/&lt;ASSISTANT_ID&gt; \\\n--header 'Content-Type: application/json' \\\n--data '{\n\"config\": {\"model_name\": \"openai\", \"system_prompt\": \"You are an unhelpful assistant!\"}\n}'\n</code></pre> <p>\u8fd9\u5c06\u4f7f\u7528\u66f4\u65b0\u7684\u53c2\u6570\u521b\u5efa\u52a9\u624b\u7684\u65b0\u7248\u672c,\u5e76\u5c06\u5176\u8bbe\u7f6e\u4e3a\u52a9\u624b\u7684\u6d3b\u52a8\u7248\u672c\u3002\u5982\u679c\u4f60\u73b0\u5728\u8fd0\u884c\u56fe\u5e76\u4f20\u5165\u6b64\u52a9\u624b ID,\u5b83\u5c06\u4f7f\u7528\u6b64\u6700\u65b0\u7248\u672c\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/#langgraph-platform-ui_2","title":"LangGraph Platform UI","text":"<p>\u4f60\u4e5f\u53ef\u4ee5\u4ece LangGraph Platform UI \u7f16\u8f91\u52a9\u624b\u3002</p> <p>\u5728\u4f60\u7684\u90e8\u7f72\u4e2d,\u9009\u62e9\"Assistants\"\u9009\u9879\u5361\u3002\u8fd9\u5c06\u52a0\u8f7d\u4f60\u7684\u90e8\u7f72\u4e2d\u6240\u6709\u56fe\u7684\u6240\u6709\u52a9\u624b\u7684\u8868\u683c\u3002</p> <p>\u8981\u7f16\u8f91\u73b0\u6709\u52a9\u624b,\u8bf7\u9009\u62e9\u6307\u5b9a\u52a9\u624b\u7684\"Edit\"\u6309\u94ae\u3002\u8fd9\u5c06\u6253\u5f00\u4e00\u4e2a\u8868\u5355,\u4f60\u53ef\u4ee5\u5728\u5176\u4e2d\u7f16\u8f91\u52a9\u624b\u7684\u540d\u79f0\u3001\u63cf\u8ff0\u548c\u914d\u7f6e\u3002</p> <p>\u6b64\u5916,\u5982\u679c\u4f7f\u7528 LangGraph Studio,\u4f60\u53ef\u4ee5\u901a\u8fc7\"Manage Assistants\"\u6309\u94ae\u7f16\u8f91\u52a9\u624b\u5e76\u521b\u5efa\u65b0\u7248\u672c\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/#_5","title":"\u4f7f\u7528\u4ee5\u524d\u7684\u52a9\u624b\u7248\u672c","text":""},{"location":"cloud/how-tos/configuration_cloud/#langgraph-sdk_3","title":"LangGraph SDK","text":"<p>\u4f60\u8fd8\u53ef\u4ee5\u66f4\u6539\u52a9\u624b\u7684\u6d3b\u52a8\u7248\u672c\u3002\u4e3a\u6b64,\u8bf7\u4f7f\u7528 <code>setLatest</code> \u65b9\u6cd5\u3002</p> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d,\u8981\u56de\u6eda\u5230\u52a9\u624b\u7684\u7b2c\u4e00\u4e2a\u7248\u672c:</p> PythonJavascriptCURL <pre><code>await client.assistants.set_latest(openai_assistant['assistant_id'], 1)\n</code></pre> <pre><code>await client.assistants.setLatest(openaiAssistant['assistant_id'], 1);\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/assistants/&lt;ASSISTANT_ID&gt;/latest \\\n--header 'Content-Type: application/json' \\\n--data '{\n\"version\": 1\n}'\n</code></pre> <p>\u5982\u679c\u4f60\u73b0\u5728\u8fd0\u884c\u56fe\u5e76\u4f20\u5165\u6b64\u52a9\u624b ID,\u5b83\u5c06\u4f7f\u7528\u52a9\u624b\u7684\u7b2c\u4e00\u4e2a\u7248\u672c\u3002</p>"},{"location":"cloud/how-tos/configuration_cloud/#langgraph-platform-ui_3","title":"LangGraph Platform UI","text":"<p>\u5982\u679c\u4f7f\u7528 LangGraph Studio,\u8981\u8bbe\u7f6e\u52a9\u624b\u7684\u6d3b\u52a8\u7248\u672c,\u8bf7\u70b9\u51fb\"Manage Assistants\"\u6309\u94ae\u5e76\u627e\u5230\u4f60\u60f3\u8981\u4f7f\u7528\u7684\u52a9\u624b\u3002\u9009\u62e9\u52a9\u624b\u548c\u7248\u672c,\u7136\u540e\u70b9\u51fb\"Active\"\u5207\u6362\u3002\u8fd9\u5c06\u66f4\u65b0\u52a9\u624b\u4ee5\u4f7f\u9009\u4e2d\u7684\u7248\u672c\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002</p> <p>\u5220\u9664\u52a9\u624b</p> <p>\u5220\u9664\u52a9\u624b\u5c06\u5220\u9664\u5176\u6240\u6709\u7248\u672c\u3002\u76ee\u524d\u65e0\u6cd5\u5220\u9664\u5355\u4e2a\u7248\u672c,\u4f46\u901a\u8fc7\u5c06\u52a9\u624b\u6307\u5411\u6b63\u786e\u7684\u7248\u672c,\u4f60\u53ef\u4ee5\u8df3\u8fc7\u4efb\u4f55\u4e0d\u5e0c\u671b\u4f7f\u7528\u7684\u7248\u672c\u3002</p>"},{"location":"cloud/how-tos/cron_jobs/","title":"\u4f7f\u7528\u5b9a\u65f6\u4efb\u52a1","text":"<p>\u6709\u65f6\u4f60\u4e0d\u60f3\u57fa\u4e8e\u7528\u6237\u4ea4\u4e92\u6765\u8fd0\u884c\u56fe,\u800c\u662f\u5e0c\u671b\u6309\u8ba1\u5212\u8c03\u5ea6\u56fe\u7684\u8fd0\u884c - \u4f8b\u5982,\u5982\u679c\u4f60\u5e0c\u671b\u56fe\u6bcf\u5468\u4e3a\u4f60\u7684\u56e2\u961f\u64b0\u5199\u5e76\u53d1\u9001\u5f85\u529e\u4e8b\u9879\u90ae\u4ef6\u3002LangGraph Platform \u5141\u8bb8\u4f60\u901a\u8fc7\u4f7f\u7528 <code>Crons</code> \u5ba2\u6237\u7aef\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9,\u800c\u65e0\u9700\u7f16\u5199\u81ea\u5df1\u7684\u811a\u672c\u3002\u8981\u8c03\u5ea6\u56fe\u4efb\u52a1,\u4f60\u9700\u8981\u4f20\u9012\u4e00\u4e2a cron \u8868\u8fbe\u5f0f\u6765\u544a\u77e5\u5ba2\u6237\u7aef\u4f60\u5e0c\u671b\u4f55\u65f6\u8fd0\u884c\u56fe\u3002<code>Cron</code> \u4efb\u52a1\u5728\u540e\u53f0\u8fd0\u884c,\u4e0d\u4f1a\u5e72\u6270\u56fe\u7684\u6b63\u5e38\u8c03\u7528\u3002</p>"},{"location":"cloud/how-tos/cron_jobs/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148,\u8ba9\u6211\u4eec\u8bbe\u7f6e SDK \u5ba2\u6237\u7aef\u3001\u52a9\u624b\u548c\u7ebf\u7a0b:</p> PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n# create thread\nthread = await client.threads.create()\nprint(thread)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantId = \"agent\";\n// create thread\nconst thread = await client.threads.create();\nconsole.log(thread);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants/search \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"limit\": 10,\n        \"offset\": 0\n    }' | jq -c 'map(select(.config == null or .config == {})) | .[0].graph_id' &amp;&amp; \\\ncurl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    'thread_id': '9dde5490-2b67-47c8-aa14-4bfec88af217',\n    'created_at': '2024-08-30T23:07:38.242730+00:00',\n    'updated_at': '2024-08-30T23:07:38.242730+00:00',\n    'metadata': {},\n    'status': 'idle',\n    'config': {},\n    'values': None\n}\n</code></pre>"},{"location":"cloud/how-tos/cron_jobs/#_3","title":"\u7ebf\u7a0b\u4e0a\u7684\u5b9a\u65f6\u4efb\u52a1","text":"<p>\u8981\u521b\u5efa\u4e0e\u7279\u5b9a\u7ebf\u7a0b\u5173\u8054\u7684\u5b9a\u65f6\u4efb\u52a1,\u4f60\u53ef\u4ee5\u7f16\u5199:</p> PythonJavascriptCURL <pre><code># This schedules a job to run at 15:27 (3:27PM) every day\ncron_job = await client.crons.create_for_thread(\n    thread[\"thread_id\"],\n    assistant_id,\n    schedule=\"27 15 * * *\",\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"What time is it?\"}]},\n)\n</code></pre> <pre><code>// This schedules a job to run at 15:27 (3:27PM) every day\nconst cronJob = await client.crons.create_for_thread(\n  thread[\"thread_id\"],\n  assistantId,\n  {\n    schedule: \"27 15 * * *\",\n    input: { messages: [{ role: \"user\", content: \"What time is it?\" }] }\n  }\n);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/crons \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;ASSISTANT_ID&gt;,\n    }'\n</code></pre> <p>\u8bf7\u6ce8\u610f,\u5220\u9664\u4e0d\u518d\u6709\u7528\u7684 <code>Cron</code> \u4efb\u52a1**\u975e\u5e38**\u91cd\u8981\u3002\u5426\u5219\u4f60\u53ef\u80fd\u4f1a\u4ea7\u751f\u4e0d\u9700\u8981\u7684 LLM API \u8d39\u7528!\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u5220\u9664 <code>Cron</code> \u4efb\u52a1:</p> PythonJavascriptCURL <pre><code>await client.crons.delete(cron_job[\"cron_id\"])\n</code></pre> <pre><code>await client.crons.delete(cronJob[\"cron_id\"]);\n</code></pre> <pre><code>curl --request DELETE \\\n    --url &lt;DEPLOYMENT_URL&gt;/runs/crons/&lt;CRON_ID&gt;\n</code></pre>"},{"location":"cloud/how-tos/cron_jobs/#_4","title":"\u65e0\u72b6\u6001\u5b9a\u65f6\u4efb\u52a1","text":"<p>\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4ee3\u7801\u521b\u5efa\u65e0\u72b6\u6001\u5b9a\u65f6\u4efb\u52a1:</p> PythonJavascriptCURL <pre><code># This schedules a job to run at 15:27 (3:27PM) every day\ncron_job_stateless = await client.crons.create(\n    assistant_id,\n    schedule=\"27 15 * * *\",\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"What time is it?\"}]},\n)\n</code></pre> <pre><code>// This schedules a job to run at 15:27 (3:27PM) every day\nconst cronJobStateless = await client.crons.create(\n  assistantId,\n  {\n    schedule: \"27 15 * * *\",\n    input: { messages: [{ role: \"user\", content: \"What time is it?\" }] }\n  }\n);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/runs/crons \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;ASSISTANT_ID&gt;,\n    }'\n</code></pre> <p>\u518d\u6b21\u63d0\u9192,\u4e00\u65e6\u5b8c\u6210\u4f7f\u7528,\u8bf7\u8bb0\u5f97\u5220\u9664\u4f60\u7684\u4efb\u52a1!</p> PythonJavascriptCURL <pre><code>await client.crons.delete(cron_job_stateless[\"cron_id\"])\n</code></pre> <pre><code>await client.crons.delete(cronJobStateless[\"cron_id\"]);\n</code></pre> <pre><code>curl --request DELETE \\\n    --url &lt;DEPLOYMENT_URL&gt;/runs/crons/&lt;CRON_ID&gt;\n</code></pre>"},{"location":"cloud/how-tos/datasets_studio/","title":"\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u6570\u636e\u96c6","text":"<p>\u672c\u6307\u5357\u5c55\u793a\u5982\u4f55\u4ece\u7ebf\u7a0b\u65e5\u5fd7\u4e2d\u7684\u8282\u70b9\u5c06\u793a\u4f8b\u6dfb\u52a0\u5230 LangSmith \u6570\u636e\u96c6\u3002\u8fd9\u5bf9\u4e8e\u8bc4\u4f30\u667a\u80fd\u4ee3\u7406\u7684\u5404\u4e2a\u6b65\u9aa4\u5f88\u6709\u7528\u3002</p> <ol> <li>\u9009\u62e9\u4e00\u4e2a\u7ebf\u7a0b\u3002</li> <li>\u70b9\u51fb <code>Add to Dataset</code> \u6309\u94ae\u3002</li> <li>\u9009\u62e9\u8981\u5c06\u5176\u8f93\u5165/\u8f93\u51fa\u6dfb\u52a0\u5230\u6570\u636e\u96c6\u7684\u8282\u70b9\u3002</li> <li>\u5bf9\u4e8e\u6bcf\u4e2a\u9009\u4e2d\u7684\u8282\u70b9,\u9009\u62e9\u8981\u5728\u5176\u4e2d\u521b\u5efa\u793a\u4f8b\u7684\u76ee\u6807\u6570\u636e\u96c6\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u5c06\u9009\u62e9\u7279\u5b9a\u52a9\u624b\u548c\u8282\u70b9\u7684\u6570\u636e\u96c6\u3002\u5982\u679c\u6b64\u6570\u636e\u96c6\u5c1a\u4e0d\u5b58\u5728,\u5c06\u521b\u5efa\u5b83\u3002</li> <li>\u6839\u636e\u9700\u8981\u7f16\u8f91\u793a\u4f8b\u7684\u8f93\u5165/\u8f93\u51fa,\u7136\u540e\u518d\u5c06\u5176\u6dfb\u52a0\u5230\u6570\u636e\u96c6\u3002</li> <li>\u9009\u62e9\u9875\u9762\u5e95\u90e8\u7684\"Add to dataset\"\u5c06\u6240\u6709\u9009\u4e2d\u7684\u8282\u70b9\u6dfb\u52a0\u5230\u5404\u81ea\u7684\u6570\u636e\u96c6\u4e2d\u3002</li> </ol> <p>\u6709\u5173\u5982\u4f55\u8bc4\u4f30\u4e2d\u95f4\u6b65\u9aa4\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u8bc4\u4f30\u4e2d\u95f4\u6b65\u9aa4\u3002</p>"},{"location":"cloud/how-tos/enqueue_concurrent/","title":"\u5165\u961f","text":"<p>\u672c\u6307\u5357\u5047\u5b9a\u4f60\u4e86\u89e3\u4ec0\u4e48\u662f\u53cc\u91cd\u6587\u672c(double-texting),\u4f60\u53ef\u4ee5\u5728\u53cc\u91cd\u6587\u672c\u6982\u5ff5\u6307\u5357\u4e2d\u4e86\u89e3\u76f8\u5173\u5185\u5bb9\u3002</p> <p>\u672c\u6307\u5357\u4ecb\u7ecd\u53cc\u91cd\u6587\u672c\u7684 <code>enqueue</code> \u9009\u9879,\u5b83\u5c06\u4e2d\u65ad\u6dfb\u52a0\u5230\u961f\u5217\u4e2d\u5e76\u6309\u5ba2\u6237\u7aef\u63a5\u6536\u7684\u987a\u5e8f\u6267\u884c\u5b83\u4eec\u3002\u4e0b\u9762\u662f\u4f7f\u7528 <code>enqueue</code> \u9009\u9879\u7684\u5feb\u901f\u793a\u4f8b\u3002</p>"},{"location":"cloud/how-tos/enqueue_concurrent/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148,\u6211\u4eec\u5c06\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u6253\u5370 JS \u548c CURL \u6a21\u578b\u8f93\u51fa\u7684\u5feb\u901f\u8f85\u52a9\u51fd\u6570(\u5982\u679c\u4f7f\u7528 Python,\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4):</p> JavascriptCURL <pre><code>function prettyPrint(m) {\n  const padded = \" \" + m['type'] + \" \";\n  const sepLen = Math.floor((80 - padded.length) / 2);\n  const sep = \"=\".repeat(sepLen);\n  const secondSep = sep + (padded.length % 2 ? \"=\" : \"\");\n\n  console.log(`${sep}${padded}${secondSep}`);\n  console.log(\"\\n\\n\");\n  console.log(m.content);\n}\n</code></pre> <pre><code># PLACE THIS IN A FILE CALLED pretty_print.sh\npretty_print() {\n  local type=\"$1\"\n  local content=\"$2\"\n  local padded=\" $type \"\n  local total_width=80\n  local sep_len=$(( (total_width - ${#padded}) / 2 ))\n  local sep=$(printf '=%.0s' $(eval \"echo {1..\"${sep_len}\"}\"))\n  local second_sep=$sep\n  if (( (total_width - ${#padded}) % 2 )); then\n    second_sep=\"${second_sep}=\"\n  fi\n\n  echo \"${sep}${padded}${second_sep}\"\n  echo\n  echo \"$content\"\n}\n</code></pre> <p>\u7136\u540e,\u8ba9\u6211\u4eec\u5bfc\u5165\u6240\u9700\u7684\u5305\u5e76\u5b9e\u4f8b\u5316\u5ba2\u6237\u7aef\u3001\u52a9\u624b\u548c\u7ebf\u7a0b\u3002</p> PythonJavascriptCURL <pre><code>import asyncio\n\nimport httpx\nfrom langchain_core.messages import convert_to_messages\nfrom langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\nthread = await client.threads.create()\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantId = \"agent\";\nconst thread = await client.threads.create();\n</code></pre> <pre><code>curl --request POST \\\n  --url &lt;DEPLOYMENT_URL&gt;/threads \\\n  --header 'Content-Type: application/json' \\\n  --data '{}'\n</code></pre>"},{"location":"cloud/how-tos/enqueue_concurrent/#_3","title":"\u521b\u5efa\u8fd0\u884c","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u542f\u52a8\u4e24\u4e2a\u8fd0\u884c,\u7b2c\u4e8c\u4e2a\u8fd0\u884c\u4f7f\u7528\"enqueue\"\u7684\u591a\u4efb\u52a1\u7b56\u7565\u4e2d\u65ad\u7b2c\u4e00\u4e2a\u8fd0\u884c:</p> PythonJavascriptCURL <pre><code>first_run = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf?\"}]},\n)\nsecond_run = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in nyc?\"}]},\n    multitask_strategy=\"enqueue\",\n)\n</code></pre> <pre><code>const firstRun = await client.runs.create(\n  thread[\"thread_id\"],\n  assistantId,\n  input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf?\"}]},\n)\n\nconst secondRun = await client.runs.create(\n  thread[\"thread_id\"],\n  assistantId,\n  input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in nyc?\"}]},\n  multitask_strategy=\"enqueue\",\n)\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in sf?\\\"}]},\n}\" &amp;&amp; curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in nyc?\\\"}]},\n  \\\"multitask_strategy\\\": \\\"enqueue\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/enqueue_concurrent/#_4","title":"\u67e5\u770b\u8fd0\u884c\u7ed3\u679c","text":"<p>\u9a8c\u8bc1\u7ebf\u7a0b\u5305\u542b\u6765\u81ea\u4e24\u4e2a\u8fd0\u884c\u7684\u6570\u636e:</p> PythonJavascriptCURL <pre><code># wait until the second run completes\nawait client.runs.join(thread[\"thread_id\"], second_run[\"run_id\"])\n\nstate = await client.threads.get_state(thread[\"thread_id\"])\n\nfor m in convert_to_messages(state[\"values\"][\"messages\"]):\n    m.pretty_print()\n</code></pre> <pre><code>await client.runs.join(thread[\"thread_id\"], secondRun[\"run_id\"]);\n\nconst state = await client.threads.getState(thread[\"thread_id\"]);\n\nfor (const m of state[\"values\"][\"messages\"]) {\n  prettyPrint(m);\n}\n</code></pre> <pre><code>source pretty_print.sh &amp;&amp; curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;/join &amp;&amp; \\\ncurl --request GET --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state | \\\njq -c '.values.messages[]' | while read -r element; do\n    type=$(echo \"$element\" | jq -r '.type')\n    content=$(echo \"$element\" | jq -r '.content | if type == \"array\" then tostring else . end')\n    pretty_print \"$type\" \"$content\"\ndone\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>================================ Human Message =================================\n\n\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\n================================== Ai Message ==================================\n\n[{'id': 'toolu_01Dez1sJre4oA2Y7NsKJV6VT', 'input': {'query': 'weather in san francisco'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01Dez1sJre4oA2Y7NsKJV6VT)\n Call ID: toolu_01Dez1sJre4oA2Y7NsKJV6VT\n  Args:\n    query: weather in san francisco\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://www.accuweather.com/en/us/san-francisco/94103/weather-forecast/347629\", \"content\": \"\u83b7\u53d6\u65e7\u91d1\u5c71\u52a0\u5229\u798f\u5c3c\u4e9a\u5dde\u7684\u5f53\u524d\u548c\u672a\u6765\u5929\u6c14\u72b6\u51b5\uff0c\u5305\u62ec\u6e29\u5ea6\u3001\u964d\u6c34\u3001\u98ce\u529b\u3001\u7a7a\u6c14\u8d28\u91cf\u7b49\u3002\u67e5\u770b\u6bcf\u5c0f\u65f6\u548c10\u5929\u5c55\u671b\u3001\u96f7\u8fbe\u5730\u56fe\u3001\u8b66\u62a5\u548c\u8fc7\u654f\u4fe1\u606f\u3002\"}]\n================================== Ai Message ==================================\n\n\u6839\u636e AccuWeather \u7684\u6570\u636e\uff0c\u65e7\u91d1\u5c71\u76ee\u524d\u7684\u5929\u6c14\u72b6\u51b5\u4e3a\uff1a\n\n\u6e29\u5ea6\uff1a57\u00b0F\uff0814\u00b0C\uff09\n\u72b6\u51b5\uff1a\u5927\u90e8\u5206\u6674\u6717\n\u98ce\u529b\uff1aWSW 10\u82f1\u91cc/\u5c0f\u65f6\n\u6e7f\u5ea6\uff1a72%\n\n\u672a\u6765\u51e0\u5929\u7684\u9884\u62a5\u663e\u793a\u90e8\u5206\u6674\u6717\u7684\u5929\u7a7a\uff0c\u6700\u9ad8\u6e29\u5ea6\u5728\u534e\u6c0f 50 \u5ea6\u540e\u671f\u5230 60 \u5ea6\u4e2d\u671f\uff0814-18\u00b0C\uff09\uff0c\u6700\u4f4e\u6e29\u5ea6\u5728\u534e\u6c0f 40 \u5ea6\u540e\u671f\u5230 50 \u5ea6\u524d\u671f\uff089-11\u00b0C\uff09\u3002\u8fd9\u662f\u65e7\u91d1\u5c71\u8fd9\u4e2a\u65f6\u8282\u5178\u578b\u7684\u6e29\u548c\u5e72\u71e5\u5929\u6c14\u3002\n\nAccuWeather \u9884\u62a5\u7684\u4e00\u4e9b\u5173\u952e\u7ec6\u8282\uff1a\n\n\u4eca\u5929\uff1a\u5927\u90e8\u5206\u6674\u6717\uff0c\u6700\u9ad8 62\u00b0F\uff0817\u00b0C\uff09\n\u4eca\u665a\uff1a\u90e8\u5206\u591a\u4e91\uff0c\u6700\u4f4e 49\u00b0F\uff089\u00b0C\uff09\n\u660e\u5929\uff1a\u90e8\u5206\u6674\u6717\uff0c\u6700\u9ad8 59\u00b0F\uff0815\u00b0C\uff09\n\u661f\u671f\u516d\uff1a\u5927\u90e8\u5206\u6674\u6717\uff0c\u6700\u9ad8 64\u00b0F\uff0818\u00b0C\uff09\n\u661f\u671f\u65e5\uff1a\u90e8\u5206\u6674\u6717\uff0c\u6700\u9ad8 61\u00b0F\uff0816\u00b0C\uff09\n\n\u603b\u4e4b\uff0c\u9884\u8ba1\u65e7\u91d1\u5c71\u672a\u6765\u51e0\u5929\u5c06\u662f\u5b63\u8282\u6027\u6625\u5b63\u5929\u6c14\uff0c\u9633\u5149\u548c\u4e91\u6735\u6df7\u5408\uff0c\u6e29\u5ea6\u8303\u56f4\u4ece\u591c\u95f4\u534e\u6c0f 40 \u5ea6\u540e\u671f\u5230\u767d\u5929\u534e\u6c0f 60 \u5ea6\u524d\u671f\u3002\u5178\u578b\u7684\u5e72\u71e5\u5929\u6c14\uff0c\u9884\u62a5\u4e2d\u6ca1\u6709\u96e8\u3002\n================================ Human Message =================================\n\n\u7ebd\u7ea6\u5e02\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\n================================== Ai Message ==================================\n\n[{'text': '\u4ee5\u4e0b\u662f\u7ebd\u7ea6\u5e02\u5f53\u524d\u7684\u5929\u6c14\u72b6\u51b5\u548c\u9884\u62a5\uff1a', 'type': 'text'}, {'id': 'toolu_01FFft5Sx9oS6AdVJuRWWcGp', 'input': {'query': 'weather in new york city'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01FFft5Sx9oS6AdVJuRWWcGp)\n Call ID: toolu_01FFft5Sx9oS6AdVJuRWWcGp\n  Args:\n    query: weather in new york city\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://www.weatherapi.com/\", \"content\": \"{'location': {'name': 'New York', 'region': 'New York', 'country': 'United States of America', 'lat': 40.71, 'lon': -74.01, 'tz_id': 'America/New_York', 'localtime_epoch': 1718734479, 'localtime': '2024-06-18 14:14'}, 'current': {'last_updated_epoch': 1718733600, 'last_updated': '2024-06-18 14:00', 'temp_c': 29.4, 'temp_f': 84.9, 'is_day': 1, 'condition': {'text': 'Sunny', 'icon': '//cdn.weatherapi.com/weather/64x64/day/113.png', 'code': 1000}, 'wind_mph': 2.2, 'wind_kph': 3.6, 'wind_degree': 158, 'wind_dir': 'SSE', 'pressure_mb': 1025.0, 'pressure_in': 30.26, 'precip_mm': 0.0, 'precip_in': 0.0, 'humidity': 63, 'cloud': 0, 'feelslike_c': 31.3, 'feelslike_f': 88.3, 'windchill_c': 28.3, 'windchill_f': 82.9, 'heatindex_c': 29.6, 'heatindex_f': 85.3, 'dewpoint_c': 18.4, 'dewpoint_f': 65.2, 'vis_km': 16.0, 'vis_miles': 9.0, 'uv': 7.0, 'gust_mph': 16.5, 'gust_kph': 26.5}}\"}]\n================================== Ai Message ==================================\n\n\u6839\u636e WeatherAPI \u7684\u5929\u6c14\u6570\u636e\uff1a\n\n\u7ebd\u7ea6\u5e02\u5f53\u524d\u72b6\u51b5\uff08\u622a\u81f3\u5f53\u5730\u65f6\u95f4\u4e0b\u5348 2:00\uff09\uff1a\n- \u6e29\u5ea6\uff1a85\u00b0F\uff0829\u00b0C\uff09\n- \u72b6\u51b5\uff1a\u6674\u6717\n- \u98ce\u529b\uff1a2\u82f1\u91cc/\u5c0f\u65f6\uff084\u516c\u91cc/\u5c0f\u65f6\uff09\u6765\u81eaSSE\n- \u6e7f\u5ea6\uff1a63%\n- \u4f53\u611f\u6e29\u5ea6\uff1a85\u00b0F\uff0830\u00b0C\uff09\n\n\u9884\u62a5\u663e\u793a\u672a\u6765\u51e0\u5929\u5c06\u6301\u7eed\u6674\u6717\u6e29\u6696\u7684\u5929\u6c14\uff1a\n\n\u4eca\u5929\uff1a\u6674\u6717\uff0c\u6700\u9ad8 85\u00b0F\uff0829\u00b0C\uff09\n\u4eca\u665a\uff1a\u6674\u6717\uff0c\u6700\u4f4e 68\u00b0F\uff0820\u00b0C\uff09\n\u660e\u5929\uff1a\u6674\u6717\uff0c\u6700\u9ad8 88\u00b0F\uff0831\u00b0C\uff09\n\u661f\u671f\u56db\uff1a\u5927\u90e8\u5206\u6674\u6717\uff0c\u6700\u9ad8 90\u00b0F\uff0832\u00b0C\uff09\n\u661f\u671f\u4e94\uff1a\u90e8\u5206\u591a\u4e91\uff0c\u6700\u9ad8 87\u00b0F\uff0831\u00b0C\uff09\n\n\u56e0\u6b64\uff0c\u7ebd\u7ea6\u5e02\u6b63\u5728\u7ecf\u5386\u7f8e\u4e3d\u7684\u6674\u6717\u5929\u6c14\uff0c\u6e29\u5ea6\u5b63\u8282\u6027\u6e29\u6696\uff0c\u5904\u4e8e\u534e\u6c0f 80 \u5ea6\u4e2d\u671f\u5230\u540e\u671f\uff08\u7ea6 30\u00b0C\uff09\u3002\u6e7f\u5ea6\u9002\u4e2d\uff0c\u5728 60% \u5de6\u53f3\u3002\u603b\u4f53\u800c\u8a00\uff0c\u672a\u6765\u51e0\u5929\u5728\u57ce\u5e02\u6237\u5916\u6d3b\u52a8\u7684\u7406\u60f3\u665a\u6625/\u521d\u590f\u5929\u6c14\u3002\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/","title":"\u5982\u4f55\u4f7f\u7528 LangGraph \u5b9e\u73b0\u751f\u6210\u5f0f\u7528\u6237\u754c\u9762","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>LangGraph Platform</li> <li>LangGraph Server</li> <li><code>useStream()</code> React Hook</li> </ul> <p>\u751f\u6210\u5f0f\u7528\u6237\u754c\u9762(Generative UI)\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u8d85\u8d8a\u6587\u672c\u5e76\u751f\u6210\u4e30\u5bcc\u7684\u7528\u6237\u754c\u9762\u3002\u8fd9\u4f7f\u5f97\u521b\u5efa\u66f4\u5177\u4ea4\u4e92\u6027\u548c\u4e0a\u4e0b\u6587\u611f\u77e5\u7684\u5e94\u7528\u7a0b\u5e8f\u6210\u4e3a\u53ef\u80fd,\u5176\u4e2d UI \u6839\u636e\u5bf9\u8bdd\u6d41\u7a0b\u548c AI \u54cd\u5e94\u8fdb\u884c\u8c03\u6574\u3002</p> <p></p> <p>LangGraph Platform \u652f\u6301\u5c06\u4f60\u7684 React \u7ec4\u4ef6\u4e0e\u56fe\u4ee3\u7801\u653e\u5728\u4e00\u8d77\u3002\u8fd9\u5141\u8bb8\u4f60\u4e13\u6ce8\u4e8e\u4e3a\u56fe\u6784\u5efa\u7279\u5b9a\u7684 UI \u7ec4\u4ef6,\u540c\u65f6\u8f7b\u677e\u63d2\u5165\u73b0\u6709\u7684\u804a\u5929\u754c\u9762(\u5982 Agent Chat)\u5e76\u4ec5\u5728\u5b9e\u9645\u9700\u8981\u65f6\u52a0\u8f7d\u4ee3\u7801\u3002</p>"},{"location":"cloud/how-tos/generative_ui_react/#_1","title":"\u6559\u7a0b","text":""},{"location":"cloud/how-tos/generative_ui_react/#1-ui","title":"1. \u5b9a\u4e49\u548c\u914d\u7f6e UI \u7ec4\u4ef6","text":"<p>\u9996\u5148,\u521b\u5efa\u4f60\u7684\u7b2c\u4e00\u4e2a UI \u7ec4\u4ef6\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u7ec4\u4ef6,\u4f60\u9700\u8981\u63d0\u4f9b\u4e00\u4e2a\u552f\u4e00\u6807\u8bc6\u7b26,\u8be5\u6807\u8bc6\u7b26\u5c06\u7528\u4e8e\u5728\u56fe\u4ee3\u7801\u4e2d\u5f15\u7528\u8be5\u7ec4\u4ef6\u3002</p> src/agent/ui.tsx<pre><code>const WeatherComponent = (props: { city: string }) =&gt; {\n  return &lt;div&gt;Weather for {props.city}&lt;/div&gt;;\n};\n\nexport default {\n  weather: WeatherComponent,\n};\n</code></pre> <p>\u63a5\u4e0b\u6765,\u5728 <code>langgraph.json</code> \u914d\u7f6e\u4e2d\u5b9a\u4e49\u4f60\u7684 UI \u7ec4\u4ef6:</p> Python agentJS agent langgraph.json<pre><code>{\n  \"node_version\": \"20\",\n  \"graphs\": {\n    \"agent\": \"./src/agent.py:graph\"\n  },\n  \"ui\": {\n    \"agent\": \"./src/agent/ui.tsx\"\n  }\n}\n</code></pre> langgraph.json<pre><code>{\n  \"node_version\": \"20\",\n  \"graphs\": {\n    \"agent\": \"./src/agent/index.ts:graph\"\n  },\n  \"ui\": {\n    \"agent\": \"./src/agent/ui.tsx\"\n  }\n}\n</code></pre> <p><code>ui</code> \u90e8\u5206\u6307\u5411\u5c06\u7531\u56fe\u4f7f\u7528\u7684 UI \u7ec4\u4ef6\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u4e0e\u56fe\u540d\u79f0\u76f8\u540c\u7684\u952e,\u4f46\u4f60\u53ef\u4ee5\u6309\u7167\u81ea\u5df1\u559c\u6b22\u7684\u65b9\u5f0f\u62c6\u5206\u7ec4\u4ef6,\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u81ea\u5b9a\u4e49 UI \u7ec4\u4ef6\u7684\u547d\u540d\u7a7a\u95f4\u3002</p> <p>LangGraph Platform \u5c06\u81ea\u52a8\u6253\u5305\u4f60\u7684 UI \u7ec4\u4ef6\u4ee3\u7801\u548c\u6837\u5f0f,\u5e76\u5c06\u5b83\u4eec\u4f5c\u4e3a\u5916\u90e8\u8d44\u6e90\u63d0\u4f9b,\u8fd9\u4e9b\u8d44\u6e90\u53ef\u4ee5\u7531 <code>LoadExternalComponent</code> \u7ec4\u4ef6\u52a0\u8f7d\u3002\u67d0\u4e9b\u4f9d\u8d56\u9879(\u5982 <code>react</code> \u548c <code>react-dom</code>)\u5c06\u81ea\u52a8\u4ece\u6346\u7ed1\u5305\u4e2d\u6392\u9664\u3002</p> <p>\u5f00\u7bb1\u5373\u7528\u5730\u652f\u6301 CSS \u548c Tailwind 4.x,\u56e0\u6b64\u4f60\u53ef\u4ee5\u5728 UI \u7ec4\u4ef6\u4e2d\u81ea\u7531\u4f7f\u7528 Tailwind \u7c7b\u4ee5\u53ca <code>shadcn/ui</code>\u3002</p> <code>src/agent/ui.tsx</code><code>src/agent/styles.css</code> <pre><code>import \"./styles.css\";\n\nconst WeatherComponent = (props: { city: string }) =&gt; {\n  return &lt;div className=\"bg-red-500\"&gt;Weather for {props.city}&lt;/div&gt;;\n};\n\nexport default {\n  weather: WeatherComponent,\n};\n</code></pre> <pre><code>@import \"tailwindcss\";\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#2-ui","title":"2. \u5728\u56fe\u4e2d\u53d1\u9001 UI \u7ec4\u4ef6","text":"PythonJS src/agent.py<pre><code>import uuid\nfrom typing import Annotated, Sequence, TypedDict\n\nfrom langchain_core.messages import AIMessage, BaseMessage\nfrom langchain_openai import ChatOpenAI\nfrom langgraph.graph import StateGraph\nfrom langgraph.graph.message import add_messages\nfrom langgraph.graph.ui import AnyUIMessage, ui_message_reducer, push_ui_message\n\n\nclass AgentState(TypedDict):  # noqa: D101\n    messages: Annotated[Sequence[BaseMessage], add_messages]\n    ui: Annotated[Sequence[AnyUIMessage], ui_message_reducer]\n\n\nasync def weather(state: AgentState):\n    class WeatherOutput(TypedDict):\n        city: str\n\n    weather: WeatherOutput = (\n        await ChatOpenAI(model=\"gpt-4o-mini\")\n        .with_structured_output(WeatherOutput)\n        .with_config({\"tags\": [\"nostream\"]})\n        .ainvoke(state[\"messages\"])\n    )\n\n    message = AIMessage(\n        id=str(uuid.uuid4()),\n        content=f\"Here's the weather for {weather['city']}\",\n    )\n\n    # Emit UI elements associated with the message\n    push_ui_message(\"weather\", weather, message=message)\n    return {\"messages\": [message]}\n\n\nworkflow = StateGraph(AgentState)\nworkflow.add_node(weather)\nworkflow.add_edge(\"__start__\", \"weather\")\ngraph = workflow.compile()\n</code></pre> <p>\u4f7f\u7528 <code>typedUi</code> \u5de5\u5177\u4ece\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u53d1\u51fa UI \u5143\u7d20:</p> src/agent/index.ts<pre><code>import {\n  typedUi,\n  uiMessageReducer,\n} from \"@langchain/langgraph-sdk/react-ui/server\";\n\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { z } from \"zod\";\n\nimport type ComponentMap from \"./ui.js\";\n\nimport {\n  Annotation,\n  MessagesAnnotation,\n  StateGraph,\n  type LangGraphRunnableConfig,\n} from \"@langchain/langgraph\";\n\nconst AgentState = Annotation.Root({\n  ...MessagesAnnotation.spec,\n  ui: Annotation({ reducer: uiMessageReducer, default: () =&gt; [] }),\n});\n\nexport const graph = new StateGraph(AgentState)\n  .addNode(\"weather\", async (state, config) =&gt; {\n    // Provide the type of the component map to ensure\n    // type safety of `ui.push()` calls as well as\n    // pushing the messages to the `ui` and sending a custom event as well.\n    const ui = typedUi&lt;typeof ComponentMap&gt;(config);\n\n    const weather = await new ChatOpenAI({ model: \"gpt-4o-mini\" })\n      .withStructuredOutput(z.object({ city: z.string() }))\n      .withConfig({ tags: [\"nostream\"] })\n      .invoke(state.messages);\n\n    const response = {\n      id: uuidv4(),\n      type: \"ai\",\n      content: `Here's the weather for ${weather.city}`,\n    };\n\n    // Emit UI elements associated with the AI message\n    ui.push({ name: \"weather\", props: weather }, { message: response });\n\n    return { messages: [response] };\n  })\n  .addEdge(\"__start__\", \"weather\")\n  .compile();\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#3-react-ui","title":"3. \u5728 React \u5e94\u7528\u7a0b\u5e8f\u4e2d\u5904\u7406 UI \u5143\u7d20","text":"<p>\u5728\u5ba2\u6237\u7aef,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>useStream()</code> \u548c <code>LoadExternalComponent</code> \u6765\u663e\u793a UI \u5143\u7d20\u3002</p> src/app/page.tsx<pre><code>\"use client\";\n\nimport { useStream } from \"@langchain/langgraph-sdk/react\";\nimport { LoadExternalComponent } from \"@langchain/langgraph-sdk/react-ui\";\n\nexport default function Page() {\n  const { thread, values } = useStream({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n  });\n\n  return (\n    &lt;div&gt;\n      {thread.messages.map((message) =&gt; (\n        &lt;div key={message.id}&gt;\n          {message.content}\n          {values.ui\n            ?.filter((ui) =&gt; ui.metadata?.message_id === message.id)\n            .map((ui) =&gt; (\n              &lt;LoadExternalComponent key={ui.id} stream={thread} message={ui} /&gt;\n            ))}\n        &lt;/div&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>\u5728\u5e55\u540e,<code>LoadExternalComponent</code> \u5c06\u4ece LangGraph Platform \u83b7\u53d6 UI \u7ec4\u4ef6\u7684 JS \u548c CSS,\u5e76\u5728 shadow DOM \u4e2d\u6e32\u67d3\u5b83\u4eec,\u4ece\u800c\u786e\u4fdd\u6837\u5f0f\u4e0e\u5e94\u7528\u7a0b\u5e8f\u7684\u5176\u4f59\u90e8\u5206\u9694\u79bb\u3002</p>"},{"location":"cloud/how-tos/generative_ui_react/#_2","title":"\u64cd\u4f5c\u6307\u5357","text":""},{"location":"cloud/how-tos/generative_ui_react/#_3","title":"\u5728\u5ba2\u6237\u7aef\u63d0\u4f9b\u81ea\u5b9a\u4e49\u7ec4\u4ef6","text":"<p>\u5982\u679c\u4f60\u5df2\u7ecf\u5728\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\u4e2d\u52a0\u8f7d\u4e86\u7ec4\u4ef6,\u5219\u53ef\u4ee5\u63d0\u4f9b\u6b64\u7c7b\u7ec4\u4ef6\u7684\u6620\u5c04,\u4ee5\u4fbf\u76f4\u63a5\u6e32\u67d3,\u800c\u65e0\u9700\u4ece LangGraph Platform \u83b7\u53d6 UI \u4ee3\u7801\u3002</p> <pre><code>const clientComponents = {\n  weather: WeatherComponent,\n};\n\n&lt;LoadExternalComponent\n  stream={thread}\n  message={ui}\n  components={clientComponents}\n/&gt;;\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#ui","title":"\u5728\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u663e\u793a\u52a0\u8f7d UI","text":"<p>\u4f60\u53ef\u4ee5\u63d0\u4f9b\u5728\u7ec4\u4ef6\u52a0\u8f7d\u65f6\u8981\u6e32\u67d3\u7684\u540e\u5907 UI\u3002</p> <pre><code>&lt;LoadExternalComponent\n  stream={thread}\n  message={ui}\n  fallback={&lt;div&gt;Loading...&lt;/div&gt;}\n/&gt;\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#ui_1","title":"\u81ea\u5b9a\u4e49 UI \u7ec4\u4ef6\u7684\u547d\u540d\u7a7a\u95f4","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b,<code>LoadExternalComponent</code> \u5c06\u4f7f\u7528 <code>useStream()</code> hook \u4e2d\u7684 <code>assistantId</code> \u6765\u83b7\u53d6 UI \u7ec4\u4ef6\u7684\u4ee3\u7801\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5411 <code>LoadExternalComponent</code> \u7ec4\u4ef6\u63d0\u4f9b <code>namespace</code> \u5c5e\u6027\u6765\u81ea\u5b9a\u4e49\u6b64\u8bbe\u7f6e\u3002</p> <code>src/app/page.tsx</code><code>langgraph.json</code> <pre><code>&lt;LoadExternalComponent\n  stream={thread}\n  message={ui}\n  namespace=\"custom-namespace\"\n/&gt;\n</code></pre> <pre><code>{\n  \"ui\": {\n    \"custom-namespace\": \"./src/agent/ui.tsx\"\n  }\n}\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#ui_2","title":"\u4ece UI \u7ec4\u4ef6\u8bbf\u95ee\u548c\u4ea4\u4e92\u7ebf\u7a0b\u72b6\u6001","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>useStreamContext</code> hook \u5728 UI \u7ec4\u4ef6\u5185\u90e8\u8bbf\u95ee\u7ebf\u7a0b\u72b6\u6001\u3002</p> <pre><code>import { useStreamContext } from \"@langchain/langgraph-sdk/react-ui\";\n\nconst WeatherComponent = (props: { city: string }) =&gt; {\n  const { thread, submit } = useStreamContext();\n  return (\n    &lt;&gt;\n      &lt;div&gt;Weather for {props.city}&lt;/div&gt;\n\n      &lt;button\n        onClick={() =&gt; {\n          const newMessage = {\n            type: \"human\",\n            content: `What's the weather in ${props.city}?`,\n          };\n\n          submit({ messages: [newMessage] });\n        }}\n      &gt;\n        Retry\n      &lt;/button&gt;\n    &lt;/&gt;\n  );\n};\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#_4","title":"\u5411\u5ba2\u6237\u7aef\u7ec4\u4ef6\u4f20\u9012\u989d\u5916\u7684\u4e0a\u4e0b\u6587","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5411 <code>LoadExternalComponent</code> \u7ec4\u4ef6\u63d0\u4f9b <code>meta</code> \u5c5e\u6027\u6765\u5411\u5ba2\u6237\u7aef\u7ec4\u4ef6\u4f20\u9012\u989d\u5916\u7684\u4e0a\u4e0b\u6587\u3002</p> <pre><code>&lt;LoadExternalComponent stream={thread} message={ui} meta={{ userId: \"123\" }} /&gt;\n</code></pre> <p>\u7136\u540e,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>useStreamContext</code> hook \u5728 UI \u7ec4\u4ef6\u4e2d\u8bbf\u95ee <code>meta</code> \u5c5e\u6027\u3002</p> <pre><code>import { useStreamContext } from \"@langchain/langgraph-sdk/react-ui\";\n\nconst WeatherComponent = (props: { city: string }) =&gt; {\n  const { meta } = useStreamContext&lt;\n    { city: string },\n    { MetaType: { userId?: string } }\n  &gt;();\n\n  return (\n    &lt;div&gt;\n      Weather for {props.city} (user: {meta?.userId})\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#ui_3","title":"\u4ece\u670d\u52a1\u5668\u6d41\u5f0f\u4f20\u8f93 UI \u6d88\u606f","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>useStream()</code> hook \u7684 <code>onCustomEvent</code> \u56de\u8c03\u5728\u8282\u70b9\u6267\u884c\u5b8c\u6210\u4e4b\u524d\u6d41\u5f0f\u4f20\u8f93 UI \u6d88\u606f\u3002\u5f53\u5728 LLM \u751f\u6210\u54cd\u5e94\u65f6\u66f4\u65b0 UI \u7ec4\u4ef6\u65f6,\u8fd9\u7279\u522b\u6709\u7528\u3002</p> <pre><code>import { uiMessageReducer } from \"@langchain/langgraph-sdk/react-ui\";\n\nconst { thread, submit } = useStream({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  onCustomEvent: (event, options) =&gt; {\n    options.mutate((prev) =&gt; {\n      const ui = uiMessageReducer(prev.ui ?? [], event);\n      return { ...prev, ui };\n    });\n  },\n});\n</code></pre> <p>\u7136\u540e,\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u4e0e\u8981\u66f4\u65b0\u7684 UI \u6d88\u606f\u76f8\u540c\u7684 ID \u8c03\u7528 <code>ui.push()</code> / <code>push_ui_message()</code> \u6765\u5411 UI \u7ec4\u4ef6\u63a8\u9001\u66f4\u65b0\u3002</p> PythonJS<code>ui.tsx</code> <pre><code>from typing import Annotated, Sequence, TypedDict\n\nfrom langchain_anthropic import ChatAnthropic\nfrom langchain_core.messages import AIMessage, AIMessageChunk, BaseMessage\nfrom langgraph.graph import StateGraph\nfrom langgraph.graph.message import add_messages\nfrom langgraph.graph.ui import AnyUIMessage, push_ui_message, ui_message_reducer\n\n\nclass AgentState(TypedDict):  # noqa: D101\n    messages: Annotated[Sequence[BaseMessage], add_messages]\n    ui: Annotated[Sequence[AnyUIMessage], ui_message_reducer]\n\n\nclass CreateTextDocument(TypedDict):\n    \"\"\"Prepare a document heading for the user.\"\"\"\n\n    title: str\n\n\nasync def writer_node(state: AgentState):\n    model = ChatAnthropic(model=\"claude-3-5-sonnet-latest\")\n    message: AIMessage = await model.bind_tools(\n        tools=[CreateTextDocument],\n        tool_choice={\"type\": \"tool\", \"name\": \"CreateTextDocument\"},\n    ).ainvoke(state[\"messages\"])\n\n    tool_call = next(\n        (x[\"args\"] for x in message.tool_calls if x[\"name\"] == \"CreateTextDocument\"),\n        None,\n    )\n\n    if tool_call:\n        ui_message = push_ui_message(\"writer\", tool_call, message=message)\n        ui_message_id = ui_message[\"id\"]\n\n        # We're already streaming the LLM response to the client through UI messages\n        # so we don't need to stream it again to the `messages` stream mode.\n        content_stream = model.with_config({\"tags\": [\"nostream\"]}).astream(\n            f\"Create a document with the title: {tool_call['title']}\"\n        )\n\n        content: AIMessageChunk | None = None\n        async for chunk in content_stream:\n            content = content + chunk if content else chunk\n\n            push_ui_message(\n                \"writer\",\n                {\"content\": content.text()},\n                id=ui_message_id,\n                message=message,\n                # Use `merge=rue` to merge props with the existing UI message\n                merge=True,\n            )\n\n    return {\"messages\": [message]}\n</code></pre> <pre><code>import {\n  Annotation,\n  MessagesAnnotation,\n  type LangGraphRunnableConfig,\n} from \"@langchain/langgraph\";\nimport { z } from \"zod\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport {\n  typedUi,\n  uiMessageReducer,\n} from \"@langchain/langgraph-sdk/react-ui/server\";\nimport type { AIMessageChunk } from \"@langchain/core/messages\";\n\nimport type ComponentMap from \"./ui\";\n\nconst AgentState = Annotation.Root({\n  ...MessagesAnnotation.spec,\n  ui: Annotation({ reducer: uiMessageReducer, default: () =&gt; [] }),\n});\n\nasync function writerNode(\n  state: typeof AgentState.State,\n  config: LangGraphRunnableConfig\n): Promise&lt;typeof AgentState.Update&gt; {\n  const ui = typedUi&lt;typeof ComponentMap&gt;(config);\n\n  const model = new ChatAnthropic({ model: \"claude-3-5-sonnet-latest\" });\n  const message = await model\n    .bindTools(\n      [\n        {\n          name: \"create_text_document\",\n          description: \"Prepare a document heading for the user.\",\n          schema: z.object({ title: z.string() }),\n        },\n      ],\n      { tool_choice: { type: \"tool\", name: \"create_text_document\" } }\n    )\n    .invoke(state.messages);\n\n  type ToolCall = { name: \"create_text_document\"; args: { title: string } };\n  const toolCall = message.tool_calls?.find(\n    (tool): tool is ToolCall =&gt; tool.name === \"create_text_document\"\n  );\n\n  if (toolCall) {\n    const { id, name } = ui.push(\n      { name: \"writer\", props: { title: toolCall.args.title } },\n      { message }\n    );\n\n    const contentStream = await model\n      // We're already streaming the LLM response to the client through UI messages\n      // so we don't need to stream it again to the `messages` stream mode.\n      .withConfig({ tags: [\"nostream\"] })\n      .stream(`Create a short poem with the topic: ${message.text}`);\n\n    let content: AIMessageChunk | undefined;\n    for await (const chunk of contentStream) {\n      content = content?.concat(chunk) ?? chunk;\n\n      ui.push(\n        { id, name, props: { content: content?.text } },\n        // Use `merge: true` to merge props with the existing UI message\n        { message, merge: true }\n      );\n    }\n  }\n\n  return { messages: [message] };\n}\n</code></pre> <pre><code>function WriterComponent(props: { title: string; content?: string }) {\n  return (\n    &lt;article&gt;\n      &lt;h2&gt;{props.title}&lt;/h2&gt;\n      &lt;p style={{ whiteSpace: \"pre-wrap\" }}&gt;{props.content}&lt;/p&gt;\n    &lt;/article&gt;\n  );\n}\n\nexport default {\n  weather: WriterComponent,\n};\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#ui_4","title":"\u4ece\u72b6\u6001\u4e2d\u5220\u9664 UI \u6d88\u606f","text":"<p>\u4e0e\u901a\u8fc7\u9644\u52a0 RemoveMessage \u4ece\u72b6\u6001\u4e2d\u5220\u9664\u6d88\u606f\u7684\u65b9\u5f0f\u7c7b\u4f3c,\u4f60\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 UI \u6d88\u606f\u7684 ID \u8c03\u7528 <code>remove_ui_message</code> / <code>ui.delete</code> \u6765\u4ece\u72b6\u6001\u4e2d\u5220\u9664 UI \u6d88\u606f\u3002</p> PythonJS <pre><code>from langgraph.graph.ui import push_ui_message, delete_ui_message\n\n# push message\nmessage = push_ui_message(\"weather\", {\"city\": \"London\"})\n\n# remove said message\ndelete_ui_message(message[\"id\"])\n</code></pre> <pre><code>// push message\nconst message = ui.push({ name: \"weather\", props: { city: \"London\" } });\n\n// remove said message\nui.delete(message.id);\n</code></pre>"},{"location":"cloud/how-tos/generative_ui_react/#_5","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>JS/TS SDK \u53c2\u8003</li> </ul>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/","title":"\u4f7f\u7528 Server API \u5b9e\u73b0\u65f6\u95f4\u65c5\u884c","text":"<p>LangGraph \u63d0\u4f9b\u65f6\u95f4\u65c5\u884c\u529f\u80fd,\u53ef\u4ee5\u4ece\u5148\u524d\u7684\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c,\u8981\u4e48\u91cd\u653e\u76f8\u540c\u7684\u72b6\u6001,\u8981\u4e48\u4fee\u6539\u5b83\u4ee5\u63a2\u7d22\u66ff\u4ee3\u65b9\u6848\u3002\u5728\u6240\u6709\u60c5\u51b5\u4e0b,\u6062\u590d\u8fc7\u53bb\u7684\u6267\u884c\u90fd\u4f1a\u5728\u5386\u53f2\u8bb0\u5f55\u4e2d\u4ea7\u751f\u65b0\u7684\u5206\u652f\u3002</p> <p>\u8981\u4f7f\u7528 LangGraph Server API(\u901a\u8fc7 LangGraph SDK)\u8fdb\u884c\u65f6\u95f4\u65c5\u884c:</p> <ol> <li>\u8fd0\u884c\u56fe,\u4f7f\u7528 LangGraph SDK \u7684 @[<code>client.runs.wait</code>][] \u6216 @[<code>client.runs.stream</code>][] API \u63d0\u4f9b\u521d\u59cb\u8f93\u5165\u3002</li> <li>\u8bc6\u522b\u73b0\u6709\u7ebf\u7a0b\u4e2d\u7684\u68c0\u67e5\u70b9:\u4f7f\u7528 @[<code>client.threads.get_history</code>][] \u65b9\u6cd5\u68c0\u7d22\u7279\u5b9a <code>thread_id</code> \u7684\u6267\u884c\u5386\u53f2\u8bb0\u5f55\u5e76\u627e\u5230\u6240\u9700\u7684 <code>checkpoint_id</code>\u3002    \u6216\u8005,\u5728\u4f60\u5e0c\u671b\u6267\u884c\u6682\u505c\u7684\u8282\u70b9\u4e4b\u524d\u8bbe\u7f6e\u65ad\u70b9\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u627e\u5230\u8bb0\u5f55\u5230\u8be5\u65ad\u70b9\u4e3a\u6b62\u7684\u6700\u65b0\u68c0\u67e5\u70b9\u3002</li> <li>(\u53ef\u9009)\u4fee\u6539\u56fe\u72b6\u6001:\u4f7f\u7528 @[<code>client.threads.update_state</code>][] \u65b9\u6cd5\u5728\u68c0\u67e5\u70b9\u4fee\u6539\u56fe\u7684\u72b6\u6001,\u5e76\u4ece\u66ff\u4ee3\u72b6\u6001\u6062\u590d\u6267\u884c\u3002</li> <li>\u4ece\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c:\u4f7f\u7528 @[<code>client.runs.wait</code>][] \u6216 @[<code>client.runs.stream</code>][] API,\u8f93\u5165\u4e3a <code>None</code>,\u5e76\u63d0\u4f9b\u9002\u5f53\u7684 <code>thread_id</code> \u548c <code>checkpoint_id</code>\u3002</li> </ol>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/#_1","title":"\u5728\u5de5\u4f5c\u6d41\u4e2d\u4f7f\u7528\u65f6\u95f4\u65c5\u884c","text":"\u793a\u4f8b\u56fe <pre><code>from typing_extensions import TypedDict, NotRequired\nfrom langgraph.graph import StateGraph, START, END\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.checkpoint.memory import InMemorySaver\n\nclass State(TypedDict):\n    topic: NotRequired[str]\n    joke: NotRequired[str]\n\nllm = init_chat_model(\n    \"anthropic:claude-3-7-sonnet-latest\",\n    temperature=0,\n)\n\ndef generate_topic(state: State):\n    \"\"\"LLM call to generate a topic for the joke\"\"\"\n    msg = llm.invoke(\"Give me a funny topic for a joke\")\n    return {\"topic\": msg.content}\n\ndef write_joke(state: State):\n    \"\"\"LLM call to write a joke based on the topic\"\"\"\n    msg = llm.invoke(f\"Write a short joke about {state['topic']}\")\n    return {\"joke\": msg.content}\n\n# Build workflow\nbuilder = StateGraph(State)\n\n# Add nodes\nbuilder.add_node(\"generate_topic\", generate_topic)\nbuilder.add_node(\"write_joke\", write_joke)\n\n# Add edges to connect nodes\nbuilder.add_edge(START, \"generate_topic\")\nbuilder.add_edge(\"generate_topic\", \"write_joke\")\n\n# Compile\ngraph = builder.compile()\n</code></pre>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/#1","title":"1. \u8fd0\u884c\u56fe","text":"PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\n# Run the graph\nresult = await client.runs.wait(\n    thread_id,\n    assistant_id,\n    input={}\n)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// Run the graph\nconst result = await client.runs.wait(\n  threadID,\n  assistantID,\n  { input: {}}\n);\n</code></pre> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u8fd0\u884c\u56fe:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {}\n}\"\n</code></pre>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/#2","title":"2. \u8bc6\u522b\u68c0\u67e5\u70b9","text":"PythonJavaScriptcURL <pre><code># The states are returned in reverse chronological order.\nstates = await client.threads.get_history(thread_id)\nselected_state = states[1]\nprint(selected_state)\n</code></pre> <pre><code>// The states are returned in reverse chronological order.\nconst states = await client.threads.getHistory(threadID);\nconst selectedState = states[1];\nconsole.log(selectedState);\n</code></pre> <pre><code>curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/history \\\n--header 'Content-Type: application/json'\n</code></pre>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/#3","title":"3. \u66f4\u65b0\u72b6\u6001(\u53ef\u9009)","text":"<p><code>update_state</code> \u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9\u3002\u65b0\u68c0\u67e5\u70b9\u5c06\u4e0e\u540c\u4e00\u7ebf\u7a0b\u5173\u8054,\u4f46\u5177\u6709\u65b0\u7684\u68c0\u67e5\u70b9 ID\u3002</p> PythonJavaScriptcURL <pre><code>new_config = await client.threads.update_state(\n    thread_id,\n    {\"topic\": \"chickens\"},\n    # highlight-next-line\n    checkpoint_id=selected_state[\"checkpoint_id\"]\n)\nprint(new_config)\n</code></pre> <pre><code>const newConfig = await client.threads.updateState(\n  threadID,\n  {\n    values: { \"topic\": \"chickens\" },\n    checkpointId: selectedState[\"checkpoint_id\"]\n  }\n);\nconsole.log(newConfig);\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"checkpoint_id\\\": &lt;CHECKPOINT_ID&gt;,\n  \\\"values\\\": {\\\"topic\\\": \\\"chickens\\\"}\n}\"\n</code></pre>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/#4","title":"4. \u4ece\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c","text":"PythonJavaScriptcURL <pre><code>await client.runs.wait(\n    thread_id,\n    assistant_id,\n    # highlight-next-line\n    input=None,\n    # highlight-next-line\n    checkpoint_id=new_config[\"checkpoint_id\"]\n)\n</code></pre> <pre><code>await client.runs.wait(\n  threadID,\n  assistantID,\n  {\n    // highlight-next-line\n    input: null,\n    // highlight-next-line\n    checkpointId: newConfig[\"checkpoint_id\"]\n  }\n);\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/wait \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"checkpoint_id\\\": &lt;CHECKPOINT_ID&gt;\n}\"\n</code></pre>"},{"location":"cloud/how-tos/human_in_the_loop_time_travel/#_2","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>LangGraph \u65f6\u95f4\u65c5\u884c\u6307\u5357:\u4e86\u89e3\u6709\u5173\u5728 LangGraph \u4e2d\u4f7f\u7528\u65f6\u95f4\u65c5\u884c\u7684\u66f4\u591a\u4fe1\u606f\u3002</li> </ul>"},{"location":"cloud/how-tos/interrupt_concurrent/","title":"\u5982\u4f55\u4f7f\u7528\u4e2d\u65ad\u9009\u9879","text":"<p>\u672c\u6307\u5357\u5047\u5b9a\u4f60\u4e86\u89e3\u4ec0\u4e48\u662f\u53cc\u91cd\u6587\u672c,\u4f60\u53ef\u4ee5\u5728\u53cc\u91cd\u6587\u672c\u6982\u5ff5\u6307\u5357\u4e2d\u4e86\u89e3\u76f8\u5173\u5185\u5bb9\u3002</p> <p>\u672c\u6307\u5357\u4ecb\u7ecd\u53cc\u91cd\u6587\u672c\u7684 <code>interrupt</code> \u9009\u9879,\u5b83\u4f1a\u4e2d\u65ad\u56fe\u7684\u5148\u524d\u8fd0\u884c\u5e76\u4f7f\u7528\u53cc\u91cd\u6587\u672c\u542f\u52a8\u65b0\u8fd0\u884c\u3002\u6b64\u9009\u9879\u4e0d\u4f1a\u5220\u9664\u7b2c\u4e00\u6b21\u8fd0\u884c,\u800c\u662f\u5c06\u5176\u4fdd\u7559\u5728\u6570\u636e\u5e93\u4e2d,\u4f46\u5c06\u5176\u72b6\u6001\u8bbe\u7f6e\u4e3a <code>interrupted</code>\u3002\u4e0b\u9762\u662f\u4f7f\u7528 <code>interrupt</code> \u9009\u9879\u7684\u5feb\u901f\u793a\u4f8b\u3002</p>"},{"location":"cloud/how-tos/interrupt_concurrent/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148,\u6211\u4eec\u5c06\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u6253\u5370 JS \u548c CURL \u6a21\u578b\u8f93\u51fa\u7684\u5feb\u901f\u8f85\u52a9\u51fd\u6570(\u5982\u679c\u4f7f\u7528 Python,\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4):</p> JavascriptCURL <pre><code>function prettyPrint(m) {\n  const padded = \" \" + m['type'] + \" \";\n  const sepLen = Math.floor((80 - padded.length) / 2);\n  const sep = \"=\".repeat(sepLen);\n  const secondSep = sep + (padded.length % 2 ? \"=\" : \"\");\n\n  console.log(`${sep}${padded}${secondSep}`);\n  console.log(\"\\n\\n\");\n  console.log(m.content);\n}\n</code></pre> <pre><code># PLACE THIS IN A FILE CALLED pretty_print.sh\npretty_print() {\n  local type=\"$1\"\n  local content=\"$2\"\n  local padded=\" $type \"\n  local total_width=80\n  local sep_len=$(( (total_width - ${#padded}) / 2 ))\n  local sep=$(printf '=%.0s' $(eval \"echo {1..\"${sep_len}\"}\"))\n  local second_sep=$sep\n  if (( (total_width - ${#padded}) % 2 )); then\n    second_sep=\"${second_sep}=\"\n  fi\n\n  echo \"${sep}${padded}${second_sep}\"\n  echo\n  echo \"$content\"\n}\n</code></pre> <p>\u73b0\u5728,\u8ba9\u6211\u4eec\u5bfc\u5165\u6240\u9700\u7684\u5305\u5e76\u5b9e\u4f8b\u5316\u5ba2\u6237\u7aef\u3001\u52a9\u624b\u548c\u7ebf\u7a0b\u3002</p> PythonJavascriptCURL <pre><code>import asyncio\n\nfrom langchain_core.messages import convert_to_messages\nfrom langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\nthread = await client.threads.create()\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantId = \"agent\";\nconst thread = await client.threads.create();\n</code></pre> <pre><code>curl --request POST \\\n  --url &lt;DEPLOYMENT_URL&gt;/threads \\\n  --header 'Content-Type: application/json' \\\n  --data '{}'\n</code></pre>"},{"location":"cloud/how-tos/interrupt_concurrent/#_3","title":"\u521b\u5efa\u8fd0\u884c","text":"<p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u542f\u52a8\u4e24\u4e2a\u8fd0\u884c\u5e76\u52a0\u5165\u7b2c\u4e8c\u4e2a\u8fd0\u884c,\u76f4\u5230\u5b83\u5b8c\u6210:</p> PythonJavascriptCURL <pre><code># the first run will be interrupted\ninterrupted_run = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf?\"}]},\n)\n# sleep a bit to get partial outputs from the first run\nawait asyncio.sleep(2)\nrun = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in nyc?\"}]},\n    multitask_strategy=\"interrupt\",\n)\n# wait until the second run completes\nawait client.runs.join(thread[\"thread_id\"], run[\"run_id\"])\n</code></pre> <pre><code>// the first run will be interrupted\nlet interruptedRun = await client.runs.create(\n  thread[\"thread_id\"],\n  assistantId,\n  { input: { messages: [{ role: \"human\", content: \"what's the weather in sf?\" }] } }\n);\n// sleep a bit to get partial outputs from the first run\nawait new Promise(resolve =&gt; setTimeout(resolve, 2000));\n\nlet run = await client.runs.create(\n  thread[\"thread_id\"],\n  assistantId,\n  {\n    input: { messages: [{ role: \"human\", content: \"what's the weather in nyc?\" }] },\n    multitaskStrategy: \"interrupt\"\n  }\n);\n\n// wait until the second run completes\nawait client.runs.join(thread[\"thread_id\"], run[\"run_id\"]);\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in sf?\\\"}]},\n}\" &amp;&amp; sleep 2 &amp;&amp; curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in nyc?\\\"}]},\n  \\\"multitask_strategy\\\": \\\"interrupt\\\"\n}\" &amp;&amp; curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;/join\n</code></pre>"},{"location":"cloud/how-tos/interrupt_concurrent/#_4","title":"\u67e5\u770b\u8fd0\u884c\u7ed3\u679c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7ebf\u7a0b\u5305\u542b\u6765\u81ea\u7b2c\u4e00\u6b21\u8fd0\u884c\u7684\u90e8\u5206\u6570\u636e + \u6765\u81ea\u7b2c\u4e8c\u6b21\u8fd0\u884c\u7684\u6570\u636e</p> PythonJavascriptCURL <pre><code>state = await client.threads.get_state(thread[\"thread_id\"])\n\nfor m in convert_to_messages(state[\"values\"][\"messages\"]):\n    m.pretty_print()\n</code></pre> <pre><code>const state = await client.threads.getState(thread[\"thread_id\"]);\n\nfor (const m of state['values']['messages']) {\n  prettyPrint(m);\n}\n</code></pre> <pre><code>source pretty_print.sh &amp;&amp; curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state | \\\njq -c '.values.messages[]' | while read -r element; do\n    type=$(echo \"$element\" | jq -r '.type')\n    content=$(echo \"$element\" | jq -r '.content | if type == \"array\" then tostring else . end')\n    pretty_print \"$type\" \"$content\"\ndone\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>================================ Human Message =================================\n\n\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\n================================== Ai Message ==================================\n\n[{'id': 'toolu_01MjNtVJwEcpujRGrf3x6Pih', 'input': {'query': 'weather in san francisco'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01MjNtVJwEcpujRGrf3x6Pih)\n Call ID: toolu_01MjNtVJwEcpujRGrf3x6Pih\n  Args:\n    query: weather in san francisco\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://www.wunderground.com/hourly/us/ca/san-francisco/KCASANFR2002/date/2024-6-18\", \"content\": \"High 64F. Winds W at 10 to 20 mph. A few clouds from time to time. Low 49F. Winds W at 10 to 20 mph. Temp. San Francisco Weather Forecasts. Weather Underground provides local &amp; long-range weather ...\"}]\n================================ Human Message =================================\n\n\u7ebd\u7ea6\u5e02\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\n================================== Ai Message ==================================\n\n[{'id': 'toolu_01KtE1m1ifPLQAx4fQLyZL9Q', 'input': {'query': 'weather in new york city'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01KtE1m1ifPLQAx4fQLyZL9Q)\n Call ID: toolu_01KtE1m1ifPLQAx4fQLyZL9Q\n  Args:\n    query: weather in new york city\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://www.accuweather.com/en/us/new-york/10021/june-weather/349727\", \"content\": \"\u83b7\u53d6\u7ebd\u7ea6\u5dde\u7ebd\u7ea6\u5e02\u7684\u6bcf\u6708\u5929\u6c14\u9884\u62a5\uff0c\u5305\u62ec\u6bcf\u65e5\u9ad8\u6e29/\u4f4e\u6e29\u3001\u5386\u53f2\u5e73\u5747\u503c\uff0c\u5e2e\u52a9\u4f60\u63d0\u524d\u89c4\u5212\u3002\"}]\n================================== Ai Message ==================================\n\n\u641c\u7d22\u7ed3\u679c\u63d0\u4f9b\u4e86\u7ebd\u7ea6\u5e02\u7684\u5929\u6c14\u9884\u62a5\u548c\u4fe1\u606f\u3002\u6839\u636e AccuWeather \u7684\u9996\u8981\u7ed3\u679c\uff0c\u4ee5\u4e0b\u662f\u5173\u4e8e\u7ebd\u7ea6\u5e02\u5929\u6c14\u7684\u4e00\u4e9b\u5173\u952e\u7ec6\u8282\uff1a\n\n- \u8fd9\u662f\u7ebd\u7ea6\u5e02 6 \u6708\u7684\u6bcf\u6708\u5929\u6c14\u9884\u62a5\u3002\n- \u5b83\u5305\u62ec\u6bcf\u65e5\u9ad8\u6e29\u548c\u4f4e\u6e29\uff0c\u5e2e\u52a9\u63d0\u524d\u89c4\u5212\u3002\n- \u8fd8\u63d0\u4f9b\u4e86\u7ebd\u7ea6\u5e02 6 \u6708\u7684\u5386\u53f2\u5e73\u5747\u503c\u4f5c\u4e3a\u53c2\u8003\u70b9\u3002\n- \u901a\u8fc7\u8bbf\u95ee AccuWeather \u9875\u9762\u53ef\u4ee5\u627e\u5230\u66f4\u8be6\u7ec6\u7684\u6bcf\u65e5\u6216\u6bcf\u5c0f\u65f6\u9884\u62a5\uff0c\u5305\u62ec\u964d\u6c34\u51e0\u7387\u3001\u6e7f\u5ea6\u3001\u98ce\u529b\u7b49\u3002\n\n\u603b\u4e4b\uff0c\u641c\u7d22\u63d0\u4f9b\u4e86\u7ebd\u7ea6\u5e02\u4e0b\u4e2a\u6708\u9884\u671f\u5929\u6c14\u72b6\u51b5\u7684\u4fbf\u6377\u6982\u89c8\uff0c\u8ba9\u4f60\u4e86\u89e3\u5982\u679c\u5728\u90a3\u91cc\u65c5\u884c\u6216\u5236\u5b9a\u8ba1\u5212\u9700\u8981\u51c6\u5907\u4ec0\u4e48\u3002\u5982\u679c\u4f60\u9700\u8981\u4efb\u4f55\u5176\u4ed6\u7ec6\u8282\uff0c\u8bf7\u544a\u8bc9\u6211\uff01\n</code></pre> <p>\u9a8c\u8bc1\u539f\u59cb\u7684\u88ab\u4e2d\u65ad\u7684\u8fd0\u884c\u5df2\u88ab\u4e2d\u65ad</p> PythonJavascript <pre><code>print((await client.runs.get(thread[\"thread_id\"], interrupted_run[\"run_id\"]))[\"status\"])\n</code></pre> <pre><code>console.log((await client.runs.get(thread['thread_id'], interruptedRun[\"run_id\"]))[\"status\"])\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>```\n'interrupted'\n```\n</code></pre>"},{"location":"cloud/how-tos/invoke_studio/","title":"\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>\u8fd0\u884c\u667a\u80fd\u4ee3\u7406</li> </ul> <p>\u672c\u6307\u5357\u5c55\u793a\u5982\u4f55\u5411\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u63d0\u4ea4\u8fd0\u884c\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_2","title":"\u56fe\u6a21\u5f0f","text":""},{"location":"cloud/how-tos/invoke_studio/#_3","title":"\u6307\u5b9a\u8f93\u5165","text":"<p>\u9996\u5148\u5728\u9875\u9762\u5de6\u4fa7\u56fe\u754c\u9762\u4e0b\u65b9\u7684\"Input\"\u90e8\u5206\u5b9a\u4e49\u56fe\u7684\u8f93\u5165\u3002</p> <p>Studio \u5c06\u5c1d\u8bd5\u6839\u636e\u56fe\u5b9a\u4e49\u7684\u72b6\u6001\u67b6\u6784\u4e3a\u4f60\u7684\u8f93\u5165\u6e32\u67d3\u4e00\u4e2a\u8868\u5355\u3002\u8981\u7981\u7528\u6b64\u529f\u80fd,\u8bf7\u70b9\u51fb\"View Raw\"\u6309\u94ae,\u8fd9\u5c06\u4e3a\u4f60\u63d0\u4f9b\u4e00\u4e2a JSON \u7f16\u8f91\u5668\u3002</p> <p>\u70b9\u51fb\"Input\"\u90e8\u5206\u9876\u90e8\u7684\u4e0a/\u4e0b\u7bad\u5934\u53ef\u4ee5\u5207\u6362\u5e76\u4f7f\u7528\u4ee5\u524d\u63d0\u4ea4\u7684\u8f93\u5165\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_4","title":"\u8fd0\u884c\u8bbe\u7f6e","text":""},{"location":"cloud/how-tos/invoke_studio/#_5","title":"\u52a9\u624b","text":"<p>\u8981\u6307\u5b9a\u7528\u4e8e\u8fd0\u884c\u7684\u52a9\u624b,\u8bf7\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\u8bbe\u7f6e\u6309\u94ae\u3002\u5982\u679c\u5f53\u524d\u9009\u62e9\u4e86\u52a9\u624b,\u8be5\u6309\u94ae\u8fd8\u5c06\u5217\u51fa\u52a9\u624b\u540d\u79f0\u3002\u5982\u679c\u672a\u9009\u62e9\u52a9\u624b,\u5b83\u5c06\u663e\u793a\"Manage Assistants\"\u3002</p> <p>\u9009\u62e9\u8981\u8fd0\u884c\u7684\u52a9\u624b\u5e76\u70b9\u51fb\u6a21\u6001\u6846\u9876\u90e8\u7684\"Active\"\u5207\u6362\u4ee5\u6fc0\u6d3b\u5b83\u3002\u8bf7\u53c2\u9605\u6b64\u5904\u4e86\u89e3\u6709\u5173\u7ba1\u7406\u52a9\u624b\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_6","title":"\u6d41\u5f0f\u4f20\u8f93","text":"<p>\u70b9\u51fb\"Submit\"\u65c1\u8fb9\u7684\u4e0b\u62c9\u83dc\u5355,\u7136\u540e\u70b9\u51fb\u5207\u6362\u4ee5\u542f\u7528/\u7981\u7528\u6d41\u5f0f\u4f20\u8f93\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_7","title":"\u65ad\u70b9","text":"<p>\u8981\u4f7f\u7528\u65ad\u70b9\u8fd0\u884c\u56fe,\u8bf7\u70b9\u51fb\"Interrupt\"\u6309\u94ae\u3002\u9009\u62e9\u4e00\u4e2a\u8282\u70b9\u4ee5\u53ca\u662f\u5426\u5728\u8be5\u8282\u70b9\u6267\u884c\u4e4b\u524d\u548c/\u6216\u4e4b\u540e\u6682\u505c\u3002\u70b9\u51fb\u7ebf\u7a0b\u65e5\u5fd7\u4e2d\u7684\"Continue\"\u4ee5\u6062\u590d\u6267\u884c\u3002</p> <p>\u6709\u5173\u65ad\u70b9\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6b64\u5904\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_8","title":"\u63d0\u4ea4\u8fd0\u884c","text":"<p>\u8981\u4f7f\u7528\u6307\u5b9a\u7684\u8f93\u5165\u548c\u8fd0\u884c\u8bbe\u7f6e\u63d0\u4ea4\u8fd0\u884c,\u8bf7\u70b9\u51fb\"Submit\"\u6309\u94ae\u3002\u8fd9\u5c06\u5411\u73b0\u6709\u9009\u5b9a\u7684\u7ebf\u7a0b\u6dfb\u52a0\u4e00\u4e2a\u8fd0\u884c\u3002\u5982\u679c\u5f53\u524d\u672a\u9009\u62e9\u7ebf\u7a0b,\u5c06\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b\u3002</p> <p>\u8981\u53d6\u6d88\u6b63\u5728\u8fdb\u884c\u7684\u8fd0\u884c,\u8bf7\u70b9\u51fb\"Cancel\"\u6309\u94ae\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_9","title":"\u804a\u5929\u6a21\u5f0f","text":"<p>\u5728\u5bf9\u8bdd\u9762\u677f\u5e95\u90e8\u6307\u5b9a\u804a\u5929\u5e94\u7528\u7a0b\u5e8f\u7684\u8f93\u5165\u3002\u70b9\u51fb\"Send message\"\u6309\u94ae\u5c06\u8f93\u5165\u4f5c\u4e3a\u4eba\u7c7b\u6d88\u606f\u63d0\u4ea4,\u5e76\u5c06\u54cd\u5e94\u6d41\u5f0f\u4f20\u56de\u3002</p> <p>\u8981\u53d6\u6d88\u6b63\u5728\u8fdb\u884c\u7684\u8fd0\u884c,\u8bf7\u70b9\u51fb\"Cancel\"\u6309\u94ae\u3002\u70b9\u51fb\"Show tool calls\"\u5207\u6362\u4ee5\u9690\u85cf/\u663e\u793a\u5bf9\u8bdd\u4e2d\u7684\u5de5\u5177\u8c03\u7528\u3002</p>"},{"location":"cloud/how-tos/invoke_studio/#_10","title":"\u4e86\u89e3\u66f4\u591a","text":"<p>\u8981\u4ece\u73b0\u6709\u7ebf\u7a0b\u4e2d\u7684\u7279\u5b9a\u68c0\u67e5\u70b9\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f,\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u3002</p>"},{"location":"cloud/how-tos/iterate_graph_studio/","title":"\u8fed\u4ee3\u63d0\u793a","text":""},{"location":"cloud/how-tos/iterate_graph_studio/#_2","title":"\u6982\u8ff0","text":"<p>LangGraph Studio \u652f\u6301\u4e24\u79cd\u4fee\u6539\u56fe\u4e2d\u63d0\u793a\u7684\u65b9\u6cd5:\u76f4\u63a5\u8282\u70b9\u7f16\u8f91\u548c LangSmith Playground \u754c\u9762\u3002</p>"},{"location":"cloud/how-tos/iterate_graph_studio/#_3","title":"\u76f4\u63a5\u8282\u70b9\u7f16\u8f91","text":"<p>Studio \u5141\u8bb8\u4f60\u76f4\u63a5\u4ece\u56fe\u754c\u9762\u7f16\u8f91\u5404\u4e2a\u8282\u70b9\u5185\u90e8\u4f7f\u7528\u7684\u63d0\u793a\u3002</p> <p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>\u52a9\u624b\u6982\u8ff0</li> </ul>"},{"location":"cloud/how-tos/iterate_graph_studio/#_4","title":"\u56fe\u914d\u7f6e","text":"<p>\u5b9a\u4e49\u4f60\u7684\u914d\u7f6e\u4ee5\u4f7f\u7528 <code>langgraph_nodes</code> \u548c <code>langgraph_type</code> \u952e\u6307\u5b9a\u63d0\u793a\u5b57\u6bb5\u53ca\u5176\u5173\u8054\u7684\u8282\u70b9\u3002</p>"},{"location":"cloud/how-tos/iterate_graph_studio/#_5","title":"\u914d\u7f6e\u53c2\u8003","text":""},{"location":"cloud/how-tos/iterate_graph_studio/#langgraph_nodes","title":"<code>langgraph_nodes</code>","text":"<ul> <li>\u63cf\u8ff0:\u6307\u5b9a\u914d\u7f6e\u5b57\u6bb5\u4e0e\u56fe\u7684\u54ea\u4e9b\u8282\u70b9\u76f8\u5173\u8054\u3002</li> <li>\u503c\u7c7b\u578b:\u5b57\u7b26\u4e32\u6570\u7ec4,\u5176\u4e2d\u6bcf\u4e2a\u5b57\u7b26\u4e32\u662f\u56fe\u4e2d\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u4f7f\u7528\u4e0a\u4e0b\u6587:\u5305\u542b\u5728 Pydantic \u6a21\u578b\u7684 <code>json_schema_extra</code> \u5b57\u5178\u6216 dataclasses \u7684 <code>metadata[\"json_schema_extra\"]</code> \u5b57\u5178\u4e2d\u3002</li> <li>\u793a\u4f8b:   <pre><code>system_prompt: str = Field(\n    default=\"You are a helpful AI assistant.\",\n    json_schema_extra={\"langgraph_nodes\": [\"call_model\", \"other_node\"]},\n)\n</code></pre></li> </ul>"},{"location":"cloud/how-tos/iterate_graph_studio/#langgraph_type","title":"<code>langgraph_type</code>","text":"<ul> <li>\u63cf\u8ff0:\u6307\u5b9a\u914d\u7f6e\u5b57\u6bb5\u7684\u7c7b\u578b,\u8fd9\u51b3\u5b9a\u4e86\u5b83\u5728 UI \u4e2d\u7684\u5904\u7406\u65b9\u5f0f\u3002</li> <li>\u503c\u7c7b\u578b:\u5b57\u7b26\u4e32</li> <li>\u652f\u6301\u7684\u503c:</li> <li><code>\"prompt\"</code>:\u8868\u793a\u8be5\u5b57\u6bb5\u5305\u542b\u5e94\u5728 UI \u4e2d\u7279\u6b8a\u5904\u7406\u7684\u63d0\u793a\u6587\u672c\u3002</li> <li>\u4f7f\u7528\u4e0a\u4e0b\u6587:\u5305\u542b\u5728 Pydantic \u6a21\u578b\u7684 <code>json_schema_extra</code> \u5b57\u5178\u6216 dataclasses \u7684 <code>metadata[\"json_schema_extra\"]</code> \u5b57\u5178\u4e2d\u3002</li> <li>\u793a\u4f8b:   <pre><code>system_prompt: str = Field(\n    default=\"You are a helpful AI assistant.\",\n    json_schema_extra={\n        \"langgraph_nodes\": [\"call_model\"],\n        \"langgraph_type\": \"prompt\",\n    },\n)\n</code></pre></li> </ul>"},{"location":"cloud/how-tos/iterate_graph_studio/#_6","title":"\u914d\u7f6e\u793a\u4f8b","text":"<pre><code>## \u4f7f\u7528 Pydantic\nfrom pydantic import BaseModel, Field\nfrom typing import Annotated, Literal\n\nclass Configuration(BaseModel):\n    \"\"\"The configuration for the agent.\"\"\"\n\n    system_prompt: str = Field(\n        default=\"You are a helpful AI assistant.\",\n        description=\"The system prompt to use for the agent's interactions. \"\n        \"This prompt sets the context and behavior for the agent.\",\n        json_schema_extra={\n            \"langgraph_nodes\": [\"call_model\"],\n            \"langgraph_type\": \"prompt\",\n        },\n    )\n\n    model: Annotated[\n        Literal[\n            \"anthropic/claude-3-7-sonnet-latest\",\n            \"anthropic/claude-3-5-haiku-latest\",\n            \"openai/o1\",\n            \"openai/gpt-4o-mini\",\n            \"openai/o1-mini\",\n            \"openai/o3-mini\",\n        ],\n        {\"__template_metadata__\": {\"kind\": \"llm\"}},\n    ] = Field(\n        default=\"openai/gpt-4o-mini\",\n        description=\"The name of the language model to use for the agent's main interactions. \"\n        \"Should be in the form: provider/model-name.\",\n        json_schema_extra={\"langgraph_nodes\": [\"call_model\"]},\n    )\n\n## \u4f7f\u7528 Dataclasses\nfrom dataclasses import dataclass, field\n\n@dataclass(kw_only=True)\nclass Configuration:\n    \"\"\"The configuration for the agent.\"\"\"\n\n    system_prompt: str = field(\n        default=\"You are a helpful AI assistant.\",\n        metadata={\n            \"description\": \"The system prompt to use for the agent's interactions. \"\n            \"This prompt sets the context and behavior for the agent.\",\n            \"json_schema_extra\": {\"langgraph_nodes\": [\"call_model\"]},\n        },\n    )\n\n    model: Annotated[str, {\"__template_metadata__\": {\"kind\": \"llm\"}}] = field(\n        default=\"anthropic/claude-3-5-sonnet-20240620\",\n        metadata={\n            \"description\": \"The name of the language model to use for the agent's main interactions. \"\n            \"Should be in the form: provider/model-name.\",\n            \"json_schema_extra\": {\"langgraph_nodes\": [\"call_model\"]},\n        },\n    )\n</code></pre>"},{"location":"cloud/how-tos/iterate_graph_studio/#ui","title":"\u5728 UI \u4e2d\u7f16\u8f91\u63d0\u793a","text":"<ol> <li>\u627e\u5230\u5177\u6709\u5173\u8054\u914d\u7f6e\u5b57\u6bb5\u7684\u8282\u70b9\u4e0a\u7684\u9f7f\u8f6e\u56fe\u6807</li> <li>\u70b9\u51fb\u4ee5\u6253\u5f00\u914d\u7f6e\u6a21\u6001\u6846</li> <li>\u7f16\u8f91\u503c</li> <li>\u4fdd\u5b58\u4ee5\u66f4\u65b0\u5f53\u524d\u52a9\u624b\u7248\u672c\u6216\u521b\u5efa\u65b0\u7248\u672c</li> </ol>"},{"location":"cloud/how-tos/iterate_graph_studio/#langsmith-playground","title":"LangSmith Playground","text":"<p>LangSmith Playground \u754c\u9762\u5141\u8bb8\u6d4b\u8bd5\u5355\u4e2a LLM \u8c03\u7528,\u800c\u65e0\u9700\u8fd0\u884c\u5b8c\u6574\u7684\u56fe:</p> <ol> <li>\u9009\u62e9\u4e00\u4e2a\u7ebf\u7a0b</li> <li>\u70b9\u51fb\u8282\u70b9\u4e0a\u7684\"View LLM Runs\"\u3002\u8fd9\u5c06\u5217\u51fa\u5728\u8282\u70b9\u5185\u8fdb\u884c\u7684\u6240\u6709 LLM \u8c03\u7528(\u5982\u679c\u6709)\u3002</li> <li>\u9009\u62e9\u4e00\u4e2a LLM \u8fd0\u884c\u4ee5\u5728 Playground \u4e2d\u6253\u5f00</li> <li>\u4fee\u6539\u63d0\u793a\u5e76\u6d4b\u8bd5\u4e0d\u540c\u7684\u6a21\u578b\u548c\u5de5\u5177\u8bbe\u7f6e</li> <li>\u5c06\u66f4\u65b0\u7684\u63d0\u793a\u590d\u5236\u56de\u4f60\u7684\u56fe</li> </ol> <p>\u5bf9\u4e8e\u9ad8\u7ea7 Playground \u529f\u80fd,\u8bf7\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u5c55\u5f00\u6309\u94ae\u3002</p>"},{"location":"cloud/how-tos/reject_concurrent/","title":"\u62d2\u7edd","text":"<p>\u672c\u6307\u5357\u5047\u5b9a\u4f60\u4e86\u89e3\u4ec0\u4e48\u662f\u53cc\u91cd\u6587\u672c,\u4f60\u53ef\u4ee5\u5728\u53cc\u91cd\u6587\u672c\u6982\u5ff5\u6307\u5357\u4e2d\u4e86\u89e3\u76f8\u5173\u5185\u5bb9\u3002</p> <p>\u672c\u6307\u5357\u4ecb\u7ecd\u53cc\u91cd\u6587\u672c\u7684 <code>reject</code> \u9009\u9879,\u5b83\u901a\u8fc7\u629b\u51fa\u9519\u8bef\u62d2\u7edd\u56fe\u7684\u65b0\u8fd0\u884c,\u5e76\u7ee7\u7eed\u539f\u59cb\u8fd0\u884c\u76f4\u5230\u5b8c\u6210\u3002\u4e0b\u9762\u662f\u4f7f\u7528 <code>reject</code> \u9009\u9879\u7684\u5feb\u901f\u793a\u4f8b\u3002</p>"},{"location":"cloud/how-tos/reject_concurrent/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148,\u6211\u4eec\u5c06\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u6253\u5370 JS \u548c CURL \u6a21\u578b\u8f93\u51fa\u7684\u5feb\u901f\u8f85\u52a9\u51fd\u6570(\u5982\u679c\u4f7f\u7528 Python,\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4):</p> JavascriptCURL <pre><code>function prettyPrint(m) {\n  const padded = \" \" + m['type'] + \" \";\n  const sepLen = Math.floor((80 - padded.length) / 2);\n  const sep = \"=\".repeat(sepLen);\n  const secondSep = sep + (padded.length % 2 ? \"=\" : \"\");\n\n  console.log(`${sep}${padded}${secondSep}`);\n  console.log(\"\\n\\n\");\n  console.log(m.content);\n}\n</code></pre> <pre><code># PLACE THIS IN A FILE CALLED pretty_print.sh\npretty_print() {\n  local type=\"$1\"\n  local content=\"$2\"\n  local padded=\" $type \"\n  local total_width=80\n  local sep_len=$(( (total_width - ${#padded}) / 2 ))\n  local sep=$(printf '=%.0s' $(eval \"echo {1..\"${sep_len}\"}\"))\n  local second_sep=$sep\n  if (( (total_width - ${#padded}) % 2 )); then\n    second_sep=\"${second_sep}=\"\n  fi\n\n  echo \"${sep}${padded}${second_sep}\"\n  echo\n  echo \"$content\"\n}\n</code></pre> <p>\u73b0\u5728,\u8ba9\u6211\u4eec\u5bfc\u5165\u6240\u9700\u7684\u5305\u5e76\u5b9e\u4f8b\u5316\u5ba2\u6237\u7aef\u3001\u52a9\u624b\u548c\u7ebf\u7a0b\u3002</p> PythonJavascriptCURL <pre><code>import httpx\nfrom langchain_core.messages import convert_to_messages\nfrom langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\nthread = await client.threads.create()\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantId = \"agent\";\nconst thread = await client.threads.create();\n</code></pre> <pre><code>curl --request POST \\\n  --url &lt;DEPLOYMENT_URL&gt;/threads \\\n  --header 'Content-Type: application/json' \\\n  --data '{}'\n</code></pre>"},{"location":"cloud/how-tos/reject_concurrent/#_3","title":"\u521b\u5efa\u8fd0\u884c","text":"<p>\u73b0\u5728\u6211\u4eec\u53ef\u4ee5\u8fd0\u884c\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u5c1d\u8bd5\u4f7f\u7528\"reject\"\u9009\u9879\u8fd0\u884c\u7b2c\u4e8c\u4e2a,\u7531\u4e8e\u6211\u4eec\u5df2\u7ecf\u542f\u52a8\u4e86\u4e00\u4e2a\u8fd0\u884c,\u8fd9\u5e94\u8be5\u4f1a\u5931\u8d25:</p> PythonJavascriptCURL <pre><code>run = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf?\"}]},\n)\ntry:\n    await client.runs.create(\n        thread[\"thread_id\"],\n        assistant_id,\n        input={\n            \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in nyc?\"}]\n        },\n        multitask_strategy=\"reject\",\n    )\nexcept httpx.HTTPStatusError as e:\n    print(\"Failed to start concurrent run\", e)\n</code></pre> <pre><code>const run = await client.runs.create(\n  thread[\"thread_id\"],\n  assistantId,\n  input={\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf?\"}]},\n);\n\ntry {\n  await client.runs.create(\n    thread[\"thread_id\"],\n    assistantId,\n    {\n      input: {\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in nyc?\"}]},\n      multitask_strategy:\"reject\"\n    },\n  );\n} catch (e) {\n  console.error(\"Failed to start concurrent run\", e);\n}\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in sf?\\\"}]},\n}\" &amp;&amp; curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in nyc?\\\"}]},\n  \\\"multitask_strategy\\\": \\\"reject\\\"\n}\" || { echo \"Failed to start concurrent run\"; echo \"Error: $?\" &gt;&amp;2; }\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>Failed to start concurrent run Client error '409 Conflict' for url 'http://localhost:8123/threads/f9e7088b-8028-4e5c-88d2-9cc9a2870e50/runs'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409\n</code></pre>"},{"location":"cloud/how-tos/reject_concurrent/#_4","title":"\u67e5\u770b\u8fd0\u884c\u7ed3\u679c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u9a8c\u8bc1\u539f\u59cb\u7ebf\u7a0b\u5df2\u5b8c\u6210\u6267\u884c:</p> PythonJavascriptCURL <pre><code># wait until the original run completes\nawait client.runs.join(thread[\"thread_id\"], run[\"run_id\"])\n\nstate = await client.threads.get_state(thread[\"thread_id\"])\n\nfor m in convert_to_messages(state[\"values\"][\"messages\"]):\n    m.pretty_print()\n</code></pre> <pre><code>await client.runs.join(thread[\"thread_id\"], run[\"run_id\"]);\n\nconst state = await client.threads.getState(thread[\"thread_id\"]);\n\nfor (const m of state[\"values\"][\"messages\"]) {\n  prettyPrint(m);\n}\n</code></pre> <pre><code>source pretty_print.sh &amp;&amp; curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;/join &amp;&amp; \\\ncurl --request GET --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state | \\\njq -c '.values.messages[]' | while read -r element; do\n    type=$(echo \"$element\" | jq -r '.type')\n    content=$(echo \"$element\" | jq -r '.content | if type == \"array\" then tostring else . end')\n    pretty_print \"$type\" \"$content\"\ndone\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>================================ Human Message =================================\n\n\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\n================================== Ai Message ==================================\n\n[{'id': 'toolu_01CyewEifV2Kmi7EFKHbMDr1', 'input': {'query': 'weather in san francisco'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01CyewEifV2Kmi7EFKHbMDr1)\n Call ID: toolu_01CyewEifV2Kmi7EFKHbMDr1\n  Args:\n    query: weather in san francisco\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://www.accuweather.com/en/us/san-francisco/94103/june-weather/347629\", \"content\": \"\u83b7\u53d6\u65e7\u91d1\u5c71\u52a0\u5229\u798f\u5c3c\u4e9a\u5dde\u7684\u6bcf\u6708\u5929\u6c14\u9884\u62a5\uff0c\u5305\u62ec\u6bcf\u65e5\u9ad8\u6e29/\u4f4e\u6e29\u3001\u5386\u53f2\u5e73\u5747\u503c\uff0c\u5e2e\u52a9\u4f60\u63d0\u524d\u89c4\u5212\u3002\"}]\n================================== Ai Message ==================================\n\n\u6839\u636e Tavily \u7684\u641c\u7d22\u7ed3\u679c\uff0c\u65e7\u91d1\u5c71\u76ee\u524d\u7684\u5929\u6c14\u4e3a\uff1a\n\n\u65e7\u91d1\u5c71 6 \u6708\u7684\u5e73\u5747\u9ad8\u6e29\u7ea6\u4e3a 65\u00b0F\uff0818\u00b0C\uff09\uff0c\u5e73\u5747\u4f4e\u6e29\u7ea6\u4e3a 54\u00b0F\uff0812\u00b0C\uff09\u3002\u7531\u4e8e\u590f\u5b63\u7ecf\u5e38\u7b3c\u7f69\u57ce\u5e02\u7684\u6d77\u6d0b\u96fe\u5c42\uff0c6 \u6708\u5f80\u5f80\u662f\u65e7\u91d1\u5c71\u8f83\u51c9\u723d\u548c\u591a\u96fe\u7684\u6708\u4efd\u4e4b\u4e00\u3002\n\n\u5173\u4e8e\u65e7\u91d1\u5c71\u5178\u578b 6 \u6708\u5929\u6c14\u7684\u4e00\u4e9b\u5173\u952e\u70b9\uff1a\n\n- \u6e29\u548c\u7684\u6e29\u5ea6\uff0c\u6700\u9ad8\u6e29\u5ea6\u5728\u534e\u6c0f 60 \u5ea6\uff0c\u6700\u4f4e\u6e29\u5ea6\u5728\u534e\u6c0f 50 \u5ea6\n- \u591a\u96fe\u7684\u65e9\u6668\u901a\u5e38\u4f1a\u6d88\u6563\u4e3a\u6674\u6717\u7684\u4e0b\u5348\n- \u51e0\u4e4e\u6ca1\u6709\u964d\u96e8\uff0c\u56e0\u4e3a 6 \u6708\u5904\u4e8e\u65f1\u5b63\n- \u5fae\u98ce\u6761\u4ef6\uff0c\u592a\u5e73\u6d0b\u5439\u6765\u7684\u98ce\n- \u5efa\u8bae\u7a7f\u591a\u5c42\u8863\u670d\u4ee5\u5e94\u5bf9\u53d8\u5316\u7684\u5929\u6c14\u6761\u4ef6\n\n\u603b\u4e4b\uff0c\u4f60\u53ef\u4ee5\u9884\u671f\u65e7\u91d1\u5c71\u8fd9\u4e2a\u65f6\u8282\u4f1a\u6709\u6e29\u548c\u3001\u591a\u96fe\u7684\u65e9\u6668\uff0c\u4e4b\u540e\u662f\u6674\u6717\u4f46\u51c9\u723d\u7684\u4e0b\u5348\u3002\u4e0e\u52a0\u5229\u798f\u5c3c\u4e9a\u5176\u4ed6\u5730\u533a\u76f8\u6bd4\uff0c\u6d77\u6d0b\u5c42\u4f7f 6 \u6708\u7684\u6e29\u5ea6\u4fdd\u6301\u6e29\u548c\u3002\n</code></pre>"},{"location":"cloud/how-tos/rollback_concurrent/","title":"\u5982\u4f55\u4f7f\u7528\u56de\u6eda\u9009\u9879","text":"<p>\u672c\u6307\u5357\u5047\u5b9a\u4f60\u4e86\u89e3\u4ec0\u4e48\u662f\u53cc\u91cd\u6587\u672c,\u4f60\u53ef\u4ee5\u5728\u53cc\u91cd\u6587\u672c\u6982\u5ff5\u6307\u5357\u4e2d\u4e86\u89e3\u76f8\u5173\u5185\u5bb9\u3002</p> <p>\u672c\u6307\u5357\u4ecb\u7ecd\u53cc\u91cd\u6587\u672c\u7684 <code>rollback</code> \u9009\u9879,\u5b83\u4f1a\u4e2d\u65ad\u56fe\u7684\u5148\u524d\u8fd0\u884c\u5e76\u4f7f\u7528\u53cc\u91cd\u6587\u672c\u542f\u52a8\u65b0\u8fd0\u884c\u3002\u6b64\u9009\u9879\u4e0e <code>interrupt</code> \u9009\u9879\u975e\u5e38\u76f8\u4f3c,\u4f46\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u7b2c\u4e00\u6b21\u8fd0\u884c\u4f1a\u4ece\u6570\u636e\u5e93\u4e2d\u5b8c\u5168\u5220\u9664,\u65e0\u6cd5\u91cd\u65b0\u542f\u52a8\u3002\u4e0b\u9762\u662f\u4f7f\u7528 <code>rollback</code> \u9009\u9879\u7684\u5feb\u901f\u793a\u4f8b\u3002</p>"},{"location":"cloud/how-tos/rollback_concurrent/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148,\u6211\u4eec\u5c06\u5b9a\u4e49\u4e00\u4e2a\u7528\u4e8e\u6253\u5370 JS \u548c CURL \u6a21\u578b\u8f93\u51fa\u7684\u5feb\u901f\u8f85\u52a9\u51fd\u6570(\u5982\u679c\u4f7f\u7528 Python,\u53ef\u4ee5\u8df3\u8fc7\u6b64\u6b65\u9aa4):</p> JavascriptCURL <pre><code>function prettyPrint(m) {\n  const padded = \" \" + m['type'] + \" \";\n  const sepLen = Math.floor((80 - padded.length) / 2);\n  const sep = \"=\".repeat(sepLen);\n  const secondSep = sep + (padded.length % 2 ? \"=\" : \"\");\n\n  console.log(`${sep}${padded}${secondSep}`);\n  console.log(\"\\n\\n\");\n  console.log(m.content);\n}\n</code></pre> <pre><code># PLACE THIS IN A FILE CALLED pretty_print.sh\npretty_print() {\n  local type=\"$1\"\n  local content=\"$2\"\n  local padded=\" $type \"\n  local total_width=80\n  local sep_len=$(( (total_width - ${#padded}) / 2 ))\n  local sep=$(printf '=%.0s' $(eval \"echo {1..\"${sep_len}\"}\"))\n  local second_sep=$sep\n  if (( (total_width - ${#padded}) % 2 )); then\n    second_sep=\"${second_sep}=\"\n  fi\n\n  echo \"${sep}${padded}${second_sep}\"\n  echo\n  echo \"$content\"\n}\n</code></pre> <p>\u73b0\u5728,\u8ba9\u6211\u4eec\u5bfc\u5165\u6240\u9700\u7684\u5305\u5e76\u5b9e\u4f8b\u5316\u5ba2\u6237\u7aef\u3001\u52a9\u624b\u548c\u7ebf\u7a0b\u3002</p> PythonJavascriptCURL <pre><code>import asyncio\n\nimport httpx\nfrom langchain_core.messages import convert_to_messages\nfrom langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\nthread = await client.threads.create()\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantId = \"agent\";\nconst thread = await client.threads.create();\n</code></pre> <pre><code>curl --request POST \\\n  --url &lt;DEPLOYMENT_URL&gt;/threads \\\n  --header 'Content-Type: application/json' \\\n  --data '{}'\n</code></pre>"},{"location":"cloud/how-tos/rollback_concurrent/#_3","title":"\u521b\u5efa\u8fd0\u884c","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u8fd0\u884c\u4e00\u4e2a\u7ebf\u7a0b,\u5e76\u5c06 multitask \u53c2\u6570\u8bbe\u7f6e\u4e3a\"rollback\":</p> PythonJavascriptCURL <pre><code># the first run will be rolled back\nrolled_back_run = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\"}]},\n)\nrun = await client.runs.create(\n    thread[\"thread_id\"],\n    assistant_id,\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"\u7ebd\u7ea6\u5e02\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\"}]},\n    multitask_strategy=\"rollback\",\n)\n# wait until the second run completes\nawait client.runs.join(thread[\"thread_id\"], run[\"run_id\"])\n</code></pre> <pre><code>// the first run will be interrupted\nlet rolledBackRun = await client.runs.create(\n  thread[\"thread_id\"],\n  assistantId,\n  { input: { messages: [{ role: \"human\", content: \"\u65e7\u91d1\u5c71\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\" }] } }\n);\n\nlet run = await client.runs.create(\n  thread[\"thread_id\"],\n  assistant_id,\n  {\n    input: { messages: [{ role: \"human\", content: \"\u7ebd\u7ea6\u5e02\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\" }] },\n    multitaskStrategy: \"rollback\"\n  }\n);\n\n// wait until the second run completes\nawait client.runs.join(thread[\"thread_id\"], run[\"run_id\"]);\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in sf?\\\"}]},\n}\" &amp;&amp; curl --request POST \\\n--url &lt;DEPLOY&lt;ENT_URL&gt;&gt;/threads/&lt;THREAD_ID&gt;/runs \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"what\\'s the weather in nyc?\\\"}]},\n  \\\"multitask_strategy\\\": \\\"rollback\\\"\n}\" &amp;&amp; curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;/join\n</code></pre>"},{"location":"cloud/how-tos/rollback_concurrent/#_4","title":"\u67e5\u770b\u8fd0\u884c\u7ed3\u679c","text":"<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u7ebf\u7a0b\u4ec5\u5305\u542b\u6765\u81ea\u7b2c\u4e8c\u6b21\u8fd0\u884c\u7684\u6570\u636e</p> PythonJavascriptCURL <pre><code>state = await client.threads.get_state(thread[\"thread_id\"])\n\nfor m in convert_to_messages(state[\"values\"][\"messages\"]):\n    m.pretty_print()\n</code></pre> <pre><code>const state = await client.threads.getState(thread[\"thread_id\"]);\n\nfor (const m of state['values']['messages']) {\n  prettyPrint(m);\n}\n</code></pre> <pre><code>source pretty_print.sh &amp;&amp; curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state | \\\njq -c '.values.messages[]' | while read -r element; do\n    type=$(echo \"$element\" | jq -r '.type')\n    content=$(echo \"$element\" | jq -r '.content | if type == \"array\" then tostring else . end')\n    pretty_print \"$type\" \"$content\"\ndone\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>================================ Human Message =================================\n\n\u7ebd\u7ea6\u5e02\u7684\u5929\u6c14\u600e\u4e48\u6837\uff1f\n================================== Ai Message ==================================\n\n[{'id': 'toolu_01JzPqefao1gxwajHQ3Yh3JD', 'input': {'query': 'weather in nyc'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01JzPqefao1gxwajHQ3Yh3JD)\n Call ID: toolu_01JzPqefao1gxwajHQ3Yh3JD\n  Args:\n    query: weather in nyc\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://www.weatherapi.com/\", \"content\": \"{'location': {'name': 'New York', 'region': 'New York', 'country': 'United States of America', 'lat': 40.71, 'lon': -74.01, 'tz_id': 'America/New_York', 'localtime_epoch': 1718734479, 'localtime': '2024-06-18 14:14'}, 'current': {'last_updated_epoch': 1718733600, 'last_updated': '2024-06-18 14:00', 'temp_c': 29.4, 'temp_f': 84.9, 'is_day': 1, 'condition': {'text': 'Sunny', 'icon': '//cdn.weatherapi.com/weather/64x64/day/113.png', 'code': 1000}, 'wind_mph': 2.2, 'wind_kph': 3.6, 'wind_degree': 158, 'wind_dir': 'SSE', 'pressure_mb': 1025.0, 'pressure_in': 30.26, 'precip_mm': 0.0, 'precip_in': 0.0, 'humidity': 63, 'cloud': 0, 'feelslike_c': 31.3, 'feelslike_f': 88.3, 'windchill_c': 28.3, 'windchill_f': 82.9, 'heatindex_c': 29.6, 'heatindex_f': 85.3, 'dewpoint_c': 18.4, 'dewpoint_f': 65.2, 'vis_km': 16.0, 'vis_miles': 9.0, 'uv': 7.0, 'gust_mph': 16.5, 'gust_kph': 26.5}}\"}]\n================================== Ai Message ==================================\n\nThe weather API results show that the current weather in New York City is sunny with a temperature of around 85\u00b0F (29\u00b0C). The wind is light at around 2-3 mph from the south-southeast. Overall it looks like a nice sunny summer day in NYC.\n</code></pre> <p>\u9a8c\u8bc1\u539f\u59cb\u7684\u88ab\u56de\u6eda\u8fd0\u884c\u5df2\u88ab\u5220\u9664</p> PythonJavascript <pre><code>try:\n    await client.runs.get(thread[\"thread_id\"], rolled_back_run[\"run_id\"])\nexcept httpx.HTTPStatusError as _:\n    print(\"Original run was correctly deleted\")\n</code></pre> <pre><code>try {\n  await client.runs.get(thread[\"thread_id\"], rolledBackRun[\"run_id\"]);\n} catch (e) {\n  console.log(\"Original run was correctly deleted\");\n}\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>Original run was correctly deleted\n</code></pre>"},{"location":"cloud/how-tos/same-thread/","title":"\u5982\u4f55\u5728\u540c\u4e00\u7ebf\u7a0b\u4e0a\u8fd0\u884c\u591a\u4e2a\u667a\u80fd\u4ee3\u7406","text":"<p>\u5728 LangGraph Platform \u4e2d,\u7ebf\u7a0b\u4e0d\u4f1a\u663e\u5f0f\u5730\u4e0e\u7279\u5b9a\u667a\u80fd\u4ee3\u7406\u5173\u8054\u3002 \u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u5728\u540c\u4e00\u7ebf\u7a0b\u4e0a\u8fd0\u884c\u591a\u4e2a\u667a\u80fd\u4ee3\u7406,\u8fd9\u5141\u8bb8\u4e0d\u540c\u7684\u667a\u80fd\u4ee3\u7406\u4ece\u521d\u59cb\u667a\u80fd\u4ee3\u7406\u7684\u8fdb\u5ea6\u7ee7\u7eed\u3002</p> <p>\u5728\u6b64\u793a\u4f8b\u4e2d,\u6211\u4eec\u5c06\u521b\u5efa\u4e24\u4e2a\u667a\u80fd\u4ee3\u7406,\u7136\u540e\u5728\u540c\u4e00\u7ebf\u7a0b\u4e0a\u8c03\u7528\u5b83\u4eec\u3002 \u4f60\u5c06\u770b\u5230\u7b2c\u4e8c\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u4f7f\u7528\u7b2c\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5728\u7ebf\u7a0b\u4e2d\u751f\u6210\u7684\u68c0\u67e5\u70b9\u4e2d\u7684\u4fe1\u606f\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u8fdb\u884c\u54cd\u5e94\u3002</p>"},{"location":"cloud/how-tos/same-thread/#_2","title":"\u8bbe\u7f6e","text":"PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\nopenai_assistant = await client.assistants.create(\n    graph_id=\"agent\", config={\"configurable\": {\"model_name\": \"openai\"}}\n)\n\n# There should always be a default assistant with no configuration\nassistants = await client.assistants.search()\ndefault_assistant = [a for a in assistants if not a[\"config\"]][0]\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\nconst openAIAssistant = await client.assistants.create(\n  { graphId: \"agent\", config: {\"configurable\": {\"model_name\": \"openai\"}}}\n);\n\nconst assistants = await client.assistants.search();\nconst defaultAssistant = assistants.find(a =&gt; !a.config);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"graph_id\": \"agent\",\n        \"config\": { \"configurable\": { \"model_name\": \"openai\" } }\n    }' &amp;&amp; \\\ncurl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants/search \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"limit\": 10,\n        \"offset\": 0\n    }' | jq -c 'map(select(.config == null or .config == {})) | .[0]'\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u8fd9\u4e9b\u667a\u80fd\u4ee3\u7406\u662f\u4e0d\u540c\u7684:</p> PythonJavascriptCURL <pre><code>print(openai_assistant)\n</code></pre> <pre><code>console.log(openAIAssistant);\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants/&lt;OPENAI_ASSISTANT_ID&gt;\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"assistant_id\": \"db87f39d-b2b1-4da8-ac65-cf81beb3c766\",\n    \"graph_id\": \"agent\",\n    \"created_at\": \"2024-08-30T21:18:51.850581+00:00\",\n    \"updated_at\": \"2024-08-30T21:18:51.850581+00:00\",\n    \"config\": {\n        \"configurable\": {\n            \"model_name\": \"openai\"\n        }\n    },\n    \"metadata\": {}\n}\n</code></pre> PythonJavascriptCURL <pre><code>print(default_assistant)\n</code></pre> <pre><code>console.log(defaultAssistant);\n</code></pre> <pre><code>curl --request GET \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants/&lt;DEFAULT_ASSISTANT_ID&gt;\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"assistant_id\": \"fe096781-5601-53d2-b2f6-0d3403f7e9ca\",\n    \"graph_id\": \"agent\",\n    \"created_at\": \"2024-08-08T22:45:24.562906+00:00\",\n    \"updated_at\": \"2024-08-08T22:45:24.562906+00:00\",\n    \"config\": {},\n    \"metadata\": {\n        \"created_by\": \"system\"\n    }\n}\n</code></pre>"},{"location":"cloud/how-tos/same-thread/#_3","title":"\u5728\u7ebf\u7a0b\u4e0a\u8fd0\u884c\u52a9\u624b","text":""},{"location":"cloud/how-tos/same-thread/#openai","title":"\u8fd0\u884c OpenAI \u52a9\u624b","text":"<p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u9996\u5148\u5728\u7ebf\u7a0b\u4e0a\u8fd0\u884c OpenAI \u52a9\u624b\u3002</p> PythonJavascriptCURL <pre><code>thread = await client.threads.create()\ninput = {\"messages\": [{\"role\": \"user\", \"content\": \"who made you?\"}]}\nasync for event in client.runs.stream(\n    thread[\"thread_id\"],\n    openai_assistant[\"assistant_id\"],\n    input=input,\n    stream_mode=\"updates\",\n):\n    print(f\"Receiving event of type: {event.event}\")\n    print(event.data)\n    print(\"\\n\\n\")\n</code></pre> <pre><code>const thread = await client.threads.create();\nlet input =  {\"messages\": [{\"role\": \"user\", \"content\": \"who made you?\"}]}\n\nconst streamResponse = client.runs.stream(\n  thread[\"thread_id\"],\n  openAIAssistant[\"assistant_id\"],\n  {\n    input,\n    streamMode: \"updates\"\n  }\n);\nfor await (const event of streamResponse) {\n  console.log(`Receiving event of type: ${event.event}`);\n  console.log(event.data);\n  console.log(\"\\n\\n\");\n}\n</code></pre> <pre><code>thread_id=$(curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{}' | jq -r '.thread_id') &amp;&amp; \\\ncurl --request POST \\\n    --url \"&lt;DEPLOYMENT_URL&gt;/threads/${thread_id}/runs/stream\" \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;OPENAI_ASSISTANT_ID&gt;,\n        \"input\": {\n            \"messages\": [\n                {\n                    \"role\": \"user\",\n                    \"content\": \"who made you?\"\n                }\n            ]\n        },\n        \"stream_mode\": [\n            \"updates\"\n        ]\n    }' | \\\n    sed 's/\\r$//' | \\\n    awk '\n    /^event:/ {\n        if (data_content != \"\") {\n            print data_content \"\\n\"\n        }\n        sub(/^event: /, \"Receiving event of type: \", $0)\n        printf \"%s...\\n\", $0\n        data_content = \"\"\n    }\n    /^data:/ {\n        sub(/^data: /, \"\", $0)\n        data_content = $0\n    }\n    END {\n        if (data_content != \"\") {\n            print data_content \"\\n\\n\"\n        }\n    }\n'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>Receiving event of type: metadata\n{'run_id': '1ef671c5-fb83-6e70-b698-44dba2d9213e'}\n\n\nReceiving event of type: updates\n{'agent': {'messages': [{'content': '\u6211\u662f\u7531 OpenAI \u521b\u5efa\u7684\uff0c\u8fd9\u662f\u4e00\u4e2a\u4e13\u6ce8\u4e8e\u5f00\u53d1\u548c\u63a8\u8fdb\u4eba\u5de5\u667a\u80fd\u6280\u672f\u7684\u7814\u7a76\u7ec4\u7ec7\u3002', 'additional_kwargs': {}, 'response_metadata': {'finish_reason': 'stop', 'model_name': 'gpt-4o-2024-05-13', 'system_fingerprint': 'fp_157b3831f5'}, 'type': 'ai', 'name': None, 'id': 'run-f5735b86-b80d-4c71-8dc3-4782b5a9c7c8', 'example': False, 'tool_calls': [], 'invalid_tool_calls': [], 'usage_metadata': None}]}}\n</code></pre>"},{"location":"cloud/how-tos/same-thread/#_4","title":"\u8fd0\u884c\u9ed8\u8ba4\u52a9\u624b","text":"<p>\u73b0\u5728,\u6211\u4eec\u53ef\u4ee5\u5728\u9ed8\u8ba4\u52a9\u624b\u4e0a\u8fd0\u884c\u5b83,\u5e76\u770b\u5230\u7b2c\u4e8c\u4e2a\u52a9\u624b\u77e5\u9053\u521d\u59cb\u95ee\u9898,\u5e76\u53ef\u4ee5\u56de\u7b54\"and you?\"\u8fd9\u4e2a\u95ee\u9898:</p> PythonJavascriptCURL <pre><code>input = {\"messages\": [{\"role\": \"user\", \"content\": \"and you?\"}]}\nasync for event in client.runs.stream(\n    thread[\"thread_id\"],\n    default_assistant[\"assistant_id\"],\n    input=input,\n    stream_mode=\"updates\",\n):\n    print(f\"Receiving event of type: {event.event}\")\n    print(event.data)\n    print(\"\\n\\n\")\n</code></pre> <pre><code>let input =  {\"messages\": [{\"role\": \"user\", \"content\": \"and you?\"}]}\n\nconst streamResponse = client.runs.stream(\n  thread[\"thread_id\"],\n  defaultAssistant[\"assistant_id\"],\n  {\n    input,\n    streamMode: \"updates\"\n  }\n);\nfor await (const event of streamResponse) {\n  console.log(`Receiving event of type: ${event.event}`);\n  console.log(event.data);\n  console.log(\"\\n\\n\");\n}\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;DEFAULT_ASSISTANT_ID&gt;,\n        \"input\": {\n            \"messages\": [\n                {\n                    \"role\": \"user\",\n                    \"content\": \"and you?\"\n                }\n            ]\n        },\n        \"stream_mode\": [\n            \"updates\"\n        ]\n    }' | \\\n    sed 's/\\r$//' | \\\n    awk '\n    /^event:/ {\n        if (data_content != \"\") {\n            print data_content \"\\n\"\n        }\n        sub(/^event: /, \"Receiving event of type: \", $0)\n        printf \"%s...\\n\", $0\n        data_content = \"\"\n    }\n    /^data:/ {\n        sub(/^data: /, \"\", $0)\n        data_content = $0\n    }\n    END {\n        if (data_content != \"\") {\n            print data_content \"\\n\\n\"\n        }\n    }\n'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>Receiving event of type: metadata\n{'run_id': '1ef6722d-80b3-6fbb-9324-253796b1cd13'}\n\n\nReceiving event of type: updates\n{'agent': {'messages': [{'content': [{'text': '\u6211\u662f\u7531 Anthropic \u521b\u5efa\u7684\u4eba\u5de5\u667a\u80fd\uff0c\u800c\u4e0d\u662f OpenAI\u3002\u6211\u4e0d\u5e94\u8be5\u8bf4 OpenAI \u521b\u5efa\u4e86\u6211\uff0c\u56e0\u4e3a\u90a3\u662f\u4e0d\u6b63\u786e\u7684\u3002Anthropic \u662f\u4f7f\u7528\u5148\u8fdb\u7684\u8bed\u8a00\u6a21\u578b\u548c AI \u6280\u672f\u5f00\u53d1\u548c\u8bad\u7ec3\u6211\u7684\u516c\u53f8\u3002\u6211\u5c06\u6765\u4f1a\u66f4\u52a0\u5c0f\u5fc3\u5730\u63d0\u4f9b\u6709\u5173\u6211\u7684\u6765\u6e90\u7684\u51c6\u786e\u4fe1\u606f\u3002', 'type': 'text', 'index': 0}], 'additional_kwargs': {}, 'response_metadata': {'stop_reason': 'end_turn', 'stop_sequence': None}, 'type': 'ai', 'name': None, 'id': 'run-ebaacf62-9dd9-4165-9535-db432e4793ec', 'example': False, 'tool_calls': [], 'invalid_tool_calls': [], 'usage_metadata': {'input_tokens': 302, 'output_tokens': 72, 'total_tokens': 374}}]}}\n</code></pre>"},{"location":"cloud/how-tos/stateless_runs/","title":"\u65e0\u72b6\u6001\u8fd0\u884c","text":"<p>\u5927\u591a\u6570\u60c5\u51b5\u4e0b,\u5728\u8fd0\u884c\u56fe\u65f6\u4f60\u4f1a\u5411\u5ba2\u6237\u7aef\u63d0\u4f9b <code>thread_id</code>,\u4ee5\u4fbf\u901a\u8fc7 LangGraph Platform \u4e2d\u5b9e\u73b0\u7684\u6301\u4e45\u72b6\u6001\u6765\u8ddf\u8e2a\u5148\u524d\u7684\u8fd0\u884c\u3002\u4f46\u662f,\u5982\u679c\u4f60\u4e0d\u9700\u8981\u6301\u4e45\u5316\u8fd0\u884c,\u5c31\u4e0d\u9700\u8981\u4f7f\u7528\u5185\u7f6e\u7684\u6301\u4e45\u72b6\u6001,\u53ef\u4ee5\u521b\u5efa\u65e0\u72b6\u6001\u8fd0\u884c\u3002</p>"},{"location":"cloud/how-tos/stateless_runs/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148,\u8ba9\u6211\u4eec\u8bbe\u7f6e\u5ba2\u6237\u7aef:</p> PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n# create thread\nthread = await client.threads.create()\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n// Using the graph deployed with the name \"agent\"\nconst assistantId = \"agent\";\n// create thread\nconst thread = await client.threads.create();\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants/search \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"limit\": 10,\n        \"offset\": 0\n    }' | jq -c 'map(select(.config == null or .config == {})) | .[0].graph_id' &amp;&amp; \\\ncurl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{}'\n</code></pre>"},{"location":"cloud/how-tos/stateless_runs/#_3","title":"\u65e0\u72b6\u6001\u6d41\u5f0f\u4f20\u8f93","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4ee5\u51e0\u4e4e\u4e0e\u4ece\u5177\u6709\u72b6\u6001\u5c5e\u6027\u7684\u8fd0\u884c\u6d41\u5f0f\u4f20\u8f93\u76f8\u540c\u7684\u65b9\u5f0f\u6d41\u5f0f\u4f20\u8f93\u65e0\u72b6\u6001\u8fd0\u884c\u7684\u7ed3\u679c,\u4f46\u4e0d\u662f\u5411 <code>thread_id</code> \u53c2\u6570\u4f20\u9012\u503c,\u800c\u662f\u4f20\u9012 <code>None</code>:</p> PythonJavascriptCURL <pre><code>input = {\n    \"messages\": [\n        {\"role\": \"user\", \"content\": \"\u4f60\u597d\uff01\u6211\u7684\u540d\u5b57\u662f Bagatur\uff0c\u6211\u4eca\u5e74 26 \u5c81\u3002\"}\n    ]\n}\n\nasync for chunk in client.runs.stream(\n    # Don't pass in a thread_id and the stream will be stateless\n    None,\n    assistant_id,\n    input=input,\n    stream_mode=\"updates\",\n):\n    if chunk.data and \"run_id\" not in chunk.data:\n        print(chunk.data)\n</code></pre> <pre><code>let input = {\n  messages: [\n    { role: \"user\", content: \"\u4f60\u597d\uff01\u6211\u7684\u540d\u5b57\u662f Bagatur\uff0c\u6211\u4eca\u5e74 26 \u5c81\u3002\" }\n  ]\n};\n\nconst streamResponse = client.runs.stream(\n  // Don't pass in a thread_id and the stream will be stateless\n  null,\n  assistantId,\n  {\n    input,\n    streamMode: \"updates\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  if (chunk.data &amp;&amp; !(\"run_id\" in chunk.data)) {\n    console.log(chunk.data);\n  }\n}\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/runs/stream \\\n    --header 'Content-Type: application/json' \\\n    --data \"{\n        \\\"assistant_id\\\": \\\"agent\\\",\n        \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"Hello! My name is Bagatur and I am 26 years old.\\\"}]},\n        \\\"stream_mode\\\": [\n            \\\"updates\\\"\n        ]\n    }\" | jq -c 'select(.data and (.data | has(\"run_id\") | not)) | .data'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{'agent': {'messages': [{'content': \"\u4f60\u597d Bagatur\uff01\u5f88\u9ad8\u5174\u89c1\u5230\u4f60\u3002\u611f\u8c22\u4f60\u4ecb\u7ecd\u81ea\u5df1\u5e76\u5206\u4eab\u4f60\u7684\u5e74\u9f84\u3002\u6709\u4ec0\u4e48\u7279\u522b\u60f3\u4e86\u89e3\u6216\u8ba8\u8bba\u7684\u5417\uff1f\u6211\u5728\u8fd9\u91cc\u5e2e\u52a9\u4f60\u89e3\u51b3\u4efb\u4f55\u95ee\u9898\u6216\u4f60\u611f\u5174\u8da3\u7684\u8bdd\u9898\u3002\", 'additional_kwargs': {}, 'response_metadata': {}, 'type': 'ai', 'name': None, 'id': 'run-489ec573-1645-4ce2-a3b8-91b391d50a71', 'example': False, 'tool_calls': [], 'invalid_tool_calls': [], 'usage_metadata': None}]}}\n</code></pre>"},{"location":"cloud/how-tos/stateless_runs/#_4","title":"\u7b49\u5f85\u65e0\u72b6\u6001\u7ed3\u679c","text":"<p>\u9664\u4e86\u6d41\u5f0f\u4f20\u8f93,\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 <code>.wait</code> \u51fd\u6570\u7b49\u5f85\u65e0\u72b6\u6001\u7ed3\u679c,\u5982\u4e0b\u6240\u793a:</p> PythonJavascriptCURL <pre><code>stateless_run_result = await client.runs.wait(\n    None,\n    assistant_id,\n    input=input,\n)\nprint(stateless_run_result)\n</code></pre> <pre><code>let statelessRunResult = await client.runs.wait(\n  null,\n  assistantId,\n  { input: input }\n);\nconsole.log(statelessRunResult);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/runs/wait \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;ASSISTANT_IDD&gt;,\n    }'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    'messages': [\n        {\n            'content': 'Hello! My name is Bagatur and I am 26 years old.',\n            'additional_kwargs': {},\n            'response_metadata': {},\n            'type': 'human',\n            'name': None,\n            'id': '5e088543-62c2-43de-9d95-6086ad7f8b48',\n            'example': False}\n        ,\n        {\n            'content': \"\u4f60\u597d Bagatur\uff01\u5f88\u9ad8\u5174\u89c1\u5230\u4f60\u3002\u611f\u8c22\u4f60\u4ecb\u7ecd\u81ea\u5df1\u5e76\u5206\u4eab\u4f60\u7684\u5e74\u9f84\u3002\u6709\u4ec0\u4e48\u7279\u522b\u60f3\u4e86\u89e3\u6216\u8ba8\u8bba\u7684\u5417\uff1f\u6211\u5728\u8fd9\u91cc\u5e2e\u52a9\u4f60\u89e3\u51b3\u4efb\u4f55\u95ee\u9898\u6216\u4f60\u60f3\u8981\u63a2\u7d22\u7684\u8bdd\u9898\u3002\",\n            'additional_kwargs': {},\n            'response_metadata': {},\n            'type': 'ai',\n            'name': None,\n            'id': 'run-d6361e8d-4d4c-45bd-ba47-39520257f773',\n            'example': False,\n            'tool_calls': [],\n            'invalid_tool_calls': [],\n            'usage_metadata': None\n        }\n    ]\n}\n</code></pre>"},{"location":"cloud/how-tos/streaming/","title":"\u6d41\u5f0f\u4f20\u8f93 API","text":"<p>LangGraph SDK \u5141\u8bb8\u4f60\u4ece LangGraph API \u670d\u52a1\u5668\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002</p> <p>Note</p> <p>LangGraph SDK \u548c LangGraph Server \u662f LangGraph Platform \u7684\u4e00\u90e8\u5206\u3002</p>"},{"location":"cloud/how-tos/streaming/#_1","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u57fa\u672c\u7528\u6cd5\u793a\u4f8b:</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;, api_key=&lt;API_KEY&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\n# create a streaming run\n# highlight-next-line\nasync for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input=inputs,\n    stream_mode=\"updates\"\n):\n    print(chunk.data)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt;, apiKey: &lt;API_KEY&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// create a streaming run\n// highlight-next-line\nconst streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input,\n    streamMode: \"updates\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u521b\u5efa\u6d41\u5f0f\u8fd0\u884c:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--header 'x-api-key: &lt;API_KEY&gt;'\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": &lt;inputs&gt;,\n  \\\"stream_mode\\\": \\\"updates\\\"\n}\"\n</code></pre> \u6269\u5c55\u793a\u4f8b:\u6d41\u5f0f\u4f20\u8f93\u66f4\u65b0 <p>\u8fd9\u662f\u53ef\u4ee5\u5728 LangGraph API \u670d\u52a1\u5668\u4e2d\u8fd0\u884c\u7684\u793a\u4f8b\u56fe\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 LangGraph Platform \u5feb\u901f\u5165\u95e8\u3002</p> <pre><code># graph.py\nfrom typing import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    topic: str\n    joke: str\n\ndef refine_topic(state: State):\n    return {\"topic\": state[\"topic\"] + \" and cats\"}\n\ndef generate_joke(state: State):\n    return {\"joke\": f\"This is a joke about {state['topic']}\"}\n\ngraph = (\n    StateGraph(State)\n    .add_node(refine_topic)\n    .add_node(generate_joke)\n    .add_edge(START, \"refine_topic\")\n    .add_edge(\"refine_topic\", \"generate_joke\")\n    .add_edge(\"generate_joke\", END)\n    .compile()\n)\n</code></pre> <p>\u4e00\u65e6\u4f60\u6709\u4e86\u6b63\u5728\u8fd0\u884c\u7684 LangGraph API \u670d\u52a1\u5668,\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph SDK \u4e0e\u5176\u4ea4\u4e92</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\n# create a streaming run\n# highlight-next-line\nasync for chunk in client.runs.stream(  # (1)!\n    thread_id,\n    assistant_id,\n    input={\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"updates\"  # (2)!\n):\n    print(chunk.data)\n</code></pre> <ol> <li><code>client.runs.stream()</code> \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u4ea7\u751f\u6d41\u5f0f\u8f93\u51fa\u7684\u8fed\u4ee3\u5668\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"updates\"</code> \u4ee5\u4ec5\u5728\u6bcf\u4e2a\u8282\u70b9\u540e\u6d41\u5f0f\u4f20\u8f93\u56fe\u72b6\u6001\u7684\u66f4\u65b0\u3002\u5176\u4ed6\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u4e5f\u53ef\u7528\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u652f\u6301\u7684\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// create a streaming run\n// highlight-next-line\nconst streamResponse = client.runs.stream(  // (1)!\n  threadID,\n  assistantID,\n  {\n    input: { topic: \"ice cream\" },\n    // highlight-next-line\n    streamMode: \"updates\"  // (2)!\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <ol> <li><code>client.runs.stream()</code> \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u4ea7\u751f\u6d41\u5f0f\u8f93\u51fa\u7684\u8fed\u4ee3\u5668\u3002</li> <li>\u8bbe\u7f6e <code>streamMode: \"updates\"</code> \u4ee5\u4ec5\u5728\u6bcf\u4e2a\u8282\u70b9\u540e\u6d41\u5f0f\u4f20\u8f93\u56fe\u72b6\u6001\u7684\u66f4\u65b0\u3002\u5176\u4ed6\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u4e5f\u53ef\u7528\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u652f\u6301\u7684\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u3002</li> </ol> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u521b\u5efa\u6d41\u5f0f\u8fd0\u884c:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"topic\\\": \\\"ice cream\\\"},\n  \\\"stream_mode\\\": \\\"updates\\\"\n}\"\n</code></pre> <pre><code>{'run_id': '1f02c2b3-3cef-68de-b720-eec2a4a8e920', 'attempt': 1}\n{'refine_topic': {'topic': 'ice cream and cats'}}\n{'generate_joke': {'joke': 'This is a joke about ice cream and cats'}}\n</code></pre>"},{"location":"cloud/how-tos/streaming/#_2","title":"\u652f\u6301\u7684\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f","text":"\u6a21\u5f0f \u63cf\u8ff0 LangGraph \u5e93\u65b9\u6cd5 <code>values</code> \u5728\u6bcf\u4e2a\u8d85\u6b65\u9aa4\u540e\u6d41\u5f0f\u4f20\u8f93\u5b8c\u6574\u7684\u56fe\u72b6\u6001\u3002 <code>.stream()</code> / <code>.astream()</code> \u4e0e <code>stream_mode=\"values\"</code> <code>updates</code> \u5728\u56fe\u7684\u6bcf\u4e2a\u6b65\u9aa4\u540e\u6d41\u5f0f\u4f20\u8f93\u72b6\u6001\u7684\u66f4\u65b0\u3002\u5982\u679c\u5728\u540c\u4e00\u6b65\u9aa4\u4e2d\u8fdb\u884c\u591a\u6b21\u66f4\u65b0(\u4f8b\u5982,\u8fd0\u884c\u591a\u4e2a\u8282\u70b9),\u5219\u8fd9\u4e9b\u66f4\u65b0\u5c06\u5355\u72ec\u6d41\u5f0f\u4f20\u8f93\u3002 <code>.stream()</code> / <code>.astream()</code> \u4e0e <code>stream_mode=\"updates\"</code> <code>messages-tuple</code> \u4ece\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u6d41\u5f0f\u4f20\u8f93 LLM \u6807\u8bb0\u548c\u5143\u6570\u636e(\u5bf9\u804a\u5929\u5e94\u7528\u7a0b\u5e8f\u6709\u7528)\u3002 <code>.stream()</code> / <code>.astream()</code> \u4e0e <code>stream_mode=\"messages\"</code> <code>debug</code> \u5728\u56fe\u6267\u884c\u671f\u95f4\u6d41\u5f0f\u4f20\u8f93\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u3002 <code>.stream()</code> / <code>.astream()</code> \u4e0e <code>stream_mode=\"debug\"</code> <code>custom</code> \u4ece\u56fe\u5185\u90e8\u6d41\u5f0f\u4f20\u8f93\u81ea\u5b9a\u4e49\u6570\u636e <code>.stream()</code> / <code>.astream()</code> \u4e0e <code>stream_mode=\"custom\"</code> <code>events</code> \u6d41\u5f0f\u4f20\u8f93\u6240\u6709\u4e8b\u4ef6(\u5305\u62ec\u56fe\u7684\u72b6\u6001);\u4e3b\u8981\u5728\u8fc1\u79fb\u5927\u578b LCEL \u5e94\u7528\u7a0b\u5e8f\u65f6\u6709\u7528\u3002 <code>.astream_events()</code>"},{"location":"cloud/how-tos/streaming/#_3","title":"\u6d41\u5f0f\u4f20\u8f93\u591a\u79cd\u6a21\u5f0f","text":"<p>\u4f60\u53ef\u4ee5\u5c06\u5217\u8868\u4f5c\u4e3a <code>stream_mode</code> \u53c2\u6570\u4f20\u9012,\u4ee5\u540c\u65f6\u6d41\u5f0f\u4f20\u8f93\u591a\u79cd\u6a21\u5f0f\u3002</p> <p>\u6d41\u5f0f\u8f93\u51fa\u5c06\u662f <code>(mode, chunk)</code> \u7684\u5143\u7ec4,\u5176\u4e2d <code>mode</code> \u662f\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u7684\u540d\u79f0,<code>chunk</code> \u662f\u8be5\u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93\u7684\u6570\u636e\u3002</p> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input=inputs,\n    stream_mode=[\"updates\", \"custom\"]\n):\n    print(chunk)\n</code></pre> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input,\n    streamMode: [\"updates\", \"custom\"]\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk);\n}\n</code></pre> <pre><code>curl --request POST \\\n --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n --header 'Content-Type: application/json' \\\n --data \"{\n   \\\"assistant_id\\\": \\\"agent\\\",\n   \\\"input\\\": &lt;inputs&gt;,\n   \\\"stream_mode\\\": [\n     \\\"updates\\\"\n     \\\"custom\\\"\n   ]\n }\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#_4","title":"\u6d41\u5f0f\u4f20\u8f93\u56fe\u72b6\u6001","text":"<p>\u4f7f\u7528\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f <code>updates</code> \u548c <code>values</code> \u6765\u6d41\u5f0f\u4f20\u8f93\u56fe\u6267\u884c\u65f6\u7684\u72b6\u6001\u3002</p> <ul> <li><code>updates</code> \u6d41\u5f0f\u4f20\u8f93\u56fe\u7684\u6bcf\u4e2a\u6b65\u9aa4\u540e\u72b6\u6001\u7684**\u66f4\u65b0**\u3002</li> <li><code>values</code> \u6d41\u5f0f\u4f20\u8f93\u56fe\u7684\u6bcf\u4e2a\u6b65\u9aa4\u540e\u72b6\u6001\u7684**\u5b8c\u6574\u503c**\u3002</li> </ul> \u793a\u4f8b\u56fe <pre><code>from typing import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n  topic: str\n  joke: str\n\ndef refine_topic(state: State):\n    return {\"topic\": state[\"topic\"] + \" and cats\"}\n\ndef generate_joke(state: State):\n    return {\"joke\": f\"This is a joke about {state['topic']}\"}\n\ngraph = (\n  StateGraph(State)\n  .add_node(refine_topic)\n  .add_node(generate_joke)\n  .add_edge(START, \"refine_topic\")\n  .add_edge(\"refine_topic\", \"generate_joke\")\n  .add_edge(\"generate_joke\", END)\n  .compile()\n)\n</code></pre> <p>\u6709\u72b6\u6001\u8fd0\u884c</p> <p>\u4ee5\u4e0b\u793a\u4f8b\u5047\u8bbe\u4f60\u5e0c\u671b**\u6301\u4e45\u5316\u6d41\u5f0f\u8fd0\u884c\u7684\u8f93\u51fa**\u5230\u68c0\u67e5\u70b9\u5668\u6570\u636e\u5e93\u4e2d,\u5e76\u4e14\u5df2\u521b\u5efa\u4e86\u4e00\u4e2a\u7ebf\u7a0b\u3002\u8981\u521b\u5efa\u7ebf\u7a0b:</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"]\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u5982\u679c\u4f60\u4e0d\u9700\u8981\u6301\u4e45\u5316\u8fd0\u884c\u7684\u8f93\u51fa,\u53ef\u4ee5\u5728\u6d41\u5f0f\u4f20\u8f93\u65f6\u4f20\u9012 <code>None</code> \u800c\u4e0d\u662f <code>thread_id</code>\u3002</p> updatesvalues <p>\u4f7f\u7528\u6b64\u9009\u9879\u4ec5\u6d41\u5f0f\u4f20\u8f93\u8282\u70b9\u5728\u6bcf\u4e2a\u6b65\u9aa4\u540e\u8fd4\u56de\u7684**\u72b6\u6001\u66f4\u65b0**\u3002\u6d41\u5f0f\u8f93\u51fa\u5305\u62ec\u8282\u70b9\u7684\u540d\u79f0\u4ee5\u53ca\u66f4\u65b0\u3002</p> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"updates\"\n):\n    print(chunk.data)\n</code></pre> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { topic: \"ice cream\" },\n    // highlight-next-line\n    streamMode: \"updates\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"topic\\\": \\\"ice cream\\\"},\n  \\\"stream_mode\\\": \\\"updates\\\"\n}\"\n</code></pre> <p>\u4f7f\u7528\u6b64\u9009\u9879\u5728\u6bcf\u4e2a\u6b65\u9aa4\u540e\u6d41\u5f0f\u4f20\u8f93\u56fe\u7684**\u5b8c\u6574\u72b6\u6001**\u3002</p> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"values\"\n):\n    print(chunk.data)\n</code></pre> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { topic: \"ice cream\" },\n    // highlight-next-line\n    streamMode: \"values\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"topic\\\": \\\"ice cream\\\"},\n  \\\"stream_mode\\\": \\\"values\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#_5","title":"\u5b50\u56fe","text":"<p>\u8981\u5728\u6d41\u5f0f\u8f93\u51fa\u4e2d\u5305\u542b\u6765\u81ea\u5b50\u56fe\u7684\u8f93\u51fa,\u53ef\u4ee5\u5728\u7236\u56fe\u7684 <code>.stream()</code> \u65b9\u6cd5\u4e2d\u8bbe\u7f6e <code>subgraphs=True</code>\u3002\u8fd9\u5c06\u6d41\u5f0f\u4f20\u8f93\u6765\u81ea\u7236\u56fe\u548c\u4efb\u4f55\u5b50\u56fe\u7684\u8f93\u51fa\u3002</p> <pre><code>for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"foo\": \"foo\"},\n    # highlight-next-line\n    stream_subgraphs=True, # (1)!\n    stream_mode=\"updates\",\n):\n    print(chunk)\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>stream_subgraphs=True</code> \u4ee5\u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b:\u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93 <p>\u8fd9\u662f\u53ef\u4ee5\u5728 LangGraph API \u670d\u52a1\u5668\u4e2d\u8fd0\u884c\u7684\u793a\u4f8b\u56fe\u3002 \u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 LangGraph Platform \u5feb\u901f\u5165\u95e8\u3002</p> <pre><code># graph.py\nfrom langgraph.graph import START, StateGraph\nfrom typing import TypedDict\n\n# Define subgraph\nclass SubgraphState(TypedDict):\n    foo: str  # note that this key is shared with the parent graph state\n    bar: str\n\ndef subgraph_node_1(state: SubgraphState):\n    return {\"bar\": \"bar\"}\n\ndef subgraph_node_2(state: SubgraphState):\n    return {\"foo\": state[\"foo\"] + state[\"bar\"]}\n\nsubgraph_builder = StateGraph(SubgraphState)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_node(subgraph_node_2)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph_builder.add_edge(\"subgraph_node_1\", \"subgraph_node_2\")\nsubgraph = subgraph_builder.compile()\n\n# Define parent graph\nclass ParentState(TypedDict):\n    foo: str\n\ndef node_1(state: ParentState):\n    return {\"foo\": \"hi! \" + state[\"foo\"]}\n\nbuilder = StateGraph(ParentState)\nbuilder.add_node(\"node_1\", node_1)\nbuilder.add_node(\"node_2\", subgraph)\nbuilder.add_edge(START, \"node_1\")\nbuilder.add_edge(\"node_1\", \"node_2\")\ngraph = builder.compile()\n</code></pre> <p>\u4e00\u65e6\u4f60\u6709\u4e86\u6b63\u5728\u8fd0\u884c\u7684 LangGraph API \u670d\u52a1\u5668,\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph SDK \u4e0e\u5176\u4ea4\u4e92</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\n\n# Using the graph deployed with the name \"agent\"\nassistant_id = \"agent\"\n\n# create a thread\nthread = await client.threads.create()\nthread_id = thread[\"thread_id\"]\n\nasync for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"foo\": \"foo\"},\n    # highlight-next-line\n    stream_subgraphs=True, # (1)!\n    stream_mode=\"updates\",\n):\n    print(chunk)\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>stream_subgraphs=True</code> \u4ee5\u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\n\n// Using the graph deployed with the name \"agent\"\nconst assistantID = \"agent\";\n\n// create a thread\nconst thread = await client.threads.create();\nconst threadID = thread[\"thread_id\"];\n\n// create a streaming run\nconst streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { foo: \"foo\" },\n    // highlight-next-line\n    streamSubgraphs: true,  // (1)!\n    streamMode: \"updates\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>streamSubgraphs: true</code> \u4ee5\u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002</li> </ol> <p>\u521b\u5efa\u7ebf\u7a0b:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads \\\n--header 'Content-Type: application/json' \\\n--data '{}'\n</code></pre> <p>\u521b\u5efa\u6d41\u5f0f\u8fd0\u884c:</p> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"foo\\\": \\\"foo\\\"},\n  \\\"stream_subgraphs\\\": true,\n  \\\"stream_mode\\\": [\n    \\\"updates\\\"\n  ]\n}\"\n</code></pre> <p>\u6ce8\u610f,\u6211\u4eec\u4e0d\u4ec5\u63a5\u6536\u8282\u70b9\u66f4\u65b0,\u8fd8\u63a5\u6536\u544a\u8bc9\u6211\u4eec\u4ece\u54ea\u4e2a\u56fe(\u6216\u5b50\u56fe)\u6d41\u5f0f\u4f20\u8f93\u7684\u547d\u540d\u7a7a\u95f4\u3002</p>"},{"location":"cloud/how-tos/streaming/#debug","title":"\u8c03\u8bd5","text":"<p>\u4f7f\u7528 <code>debug</code> \u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u5728\u56fe\u6267\u884c\u671f\u95f4\u6d41\u5f0f\u4f20\u8f93\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\u3002\u6d41\u5f0f\u8f93\u51fa\u5305\u62ec\u8282\u70b9\u7684\u540d\u79f0\u4ee5\u53ca\u5b8c\u6574\u72b6\u6001\u3002</p> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"debug\"\n):\n    print(chunk.data)\n</code></pre> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { topic: \"ice cream\" },\n    // highlight-next-line\n    streamMode: \"debug\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"topic\\\": \\\"ice cream\\\"},\n  \\\"stream_mode\\\": \\\"debug\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#messages","title":"LLM \u6807\u8bb0","text":"<p>\u4f7f\u7528 <code>messages-tuple</code> \u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u4ece\u56fe\u7684\u4efb\u4f55\u90e8\u5206(\u5305\u62ec\u8282\u70b9\u3001\u5de5\u5177\u3001\u5b50\u56fe\u6216\u4efb\u52a1)\u9010\u4e2a\u6807\u8bb0\u5730\u6d41\u5f0f\u4f20\u8f93\u5927\u578b\u8bed\u8a00\u6a21\u578b(LLM)\u8f93\u51fa\u3002</p> <p><code>messages-tuple</code> \u6a21\u5f0f\u7684\u6d41\u5f0f\u8f93\u51fa\u662f\u4e00\u4e2a\u5143\u7ec4 <code>(message_chunk, metadata)</code>,\u5176\u4e2d:</p> <ul> <li><code>message_chunk</code>:\u6765\u81ea LLM \u7684\u6807\u8bb0\u6216\u6d88\u606f\u6bb5\u3002</li> <li><code>metadata</code>:\u5305\u542b\u6709\u5173\u56fe\u8282\u70b9\u548c LLM \u8c03\u7528\u8be6\u7ec6\u4fe1\u606f\u7684\u5b57\u5178\u3002</li> </ul> \u793a\u4f8b\u56fe <pre><code>from dataclasses import dataclass\n\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, START\n\n@dataclass\nclass MyState:\n    topic: str\n    joke: str = \"\"\n\nllm = init_chat_model(model=\"openai:gpt-4o-mini\")\n\ndef call_model(state: MyState):\n    \"\"\"Call the LLM to generate a joke about a topic\"\"\"\n    # highlight-next-line\n    llm_response = llm.invoke( # (1)!\n        [\n            {\"role\": \"user\", \"content\": f\"Generate a joke about {state.topic}\"}\n        ]\n    )\n    return {\"joke\": llm_response.content}\n\ngraph = (\n    StateGraph(MyState)\n    .add_node(call_model)\n    .add_edge(START, \"call_model\")\n    .compile()\n)\n</code></pre> <ol> <li>\u8bf7\u6ce8\u610f,\u5373\u4f7f\u4f7f\u7528 <code>.invoke</code> \u800c\u4e0d\u662f <code>.stream</code> \u8fd0\u884c LLM,\u4e5f\u4f1a\u53d1\u51fa\u6d88\u606f\u4e8b\u4ef6\u3002</li> </ol> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"messages-tuple\",\n):\n    if chunk.event != \"messages\":\n        continue\n\n    message_chunk, metadata = chunk.data  # (1)!\n    if message_chunk[\"content\"]:\n        print(message_chunk[\"content\"], end=\"|\", flush=True)\n</code></pre> <ol> <li>\"messages-tuple\" \u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u8fd4\u56de\u5143\u7ec4 <code>(message_chunk, metadata)</code> \u7684\u8fed\u4ee3\u5668,\u5176\u4e2d <code>message_chunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684\u6807\u8bb0,<code>metadata</code> \u662f\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u548c\u5176\u4ed6\u4fe1\u606f\u7684\u5b57\u5178\u3002</li> </ol> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { topic: \"ice cream\" },\n    // highlight-next-line\n    streamMode: \"messages-tuple\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  if (chunk.event !== \"messages\") {\n    continue;\n  }\n  console.log(chunk.data[0][\"content\"]);  // (1)!\n}\n</code></pre> <ol> <li>\"messages-tuple\" \u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u8fd4\u56de\u5143\u7ec4 <code>(message_chunk, metadata)</code> \u7684\u8fed\u4ee3\u5668,\u5176\u4e2d <code>message_chunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684\u6807\u8bb0,<code>metadata</code> \u662f\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u548c\u5176\u4ed6\u4fe1\u606f\u7684\u5b57\u5178\u3002</li> </ol> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"topic\\\": \\\"ice cream\\\"},\n  \\\"stream_mode\\\": \\\"messages-tuple\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#llm","title":"\u8fc7\u6ee4 LLM \u6807\u8bb0","text":"<ul> <li>\u8981\u6309 LLM \u8c03\u7528\u8fc7\u6ee4\u6d41\u5f0f\u6807\u8bb0,\u4f60\u53ef\u4ee5\u5c06 <code>tags</code> \u4e0e LLM \u8c03\u7528\u5173\u8054\u3002</li> <li>\u8981\u4ec5\u4ece\u7279\u5b9a\u8282\u70b9\u6d41\u5f0f\u4f20\u8f93\u6807\u8bb0,\u8bf7\u4f7f\u7528 <code>stream_mode=\"messages\"</code> \u5e76\u901a\u8fc7\u6d41\u5f0f\u5143\u6570\u636e\u4e2d\u7684 <code>langgraph_node</code> \u5b57\u6bb5\u8fc7\u6ee4\u8f93\u51fa\u3002</li> </ul>"},{"location":"cloud/how-tos/streaming/#_6","title":"\u6d41\u5f0f\u4f20\u8f93\u81ea\u5b9a\u4e49\u6570\u636e","text":"<p>\u8981\u53d1\u9001**\u81ea\u5b9a\u4e49\u7528\u6237\u5b9a\u4e49\u7684\u6570\u636e**:</p> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"query\": \"example\"},\n    # highlight-next-line\n    stream_mode=\"custom\"\n):\n    print(chunk.data)\n</code></pre> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { query: \"example\" },\n    // highlight-next-line\n    streamMode: \"custom\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"query\\\": \\\"example\\\"},\n  \\\"stream_mode\\\": \\\"custom\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#_7","title":"\u6d41\u5f0f\u4f20\u8f93\u4e8b\u4ef6","text":"<p>\u8981\u6d41\u5f0f\u4f20\u8f93\u6240\u6709\u4e8b\u4ef6,\u5305\u62ec\u56fe\u7684\u72b6\u6001:</p> PythonJavaScriptcURL <pre><code>async for chunk in client.runs.stream(\n    thread_id,\n    assistant_id,\n    input={\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"events\"\n):\n    print(chunk.data)\n</code></pre> <pre><code>const streamResponse = client.runs.stream(\n  threadID,\n  assistantID,\n  {\n    input: { topic: \"ice cream\" },\n    // highlight-next-line\n    streamMode: \"events\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": {\\\"topic\\\": \\\"ice cream\\\"},\n  \\\"stream_mode\\\": \\\"events\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#_8","title":"\u65e0\u72b6\u6001\u8fd0\u884c","text":"<p>\u5982\u679c\u4f60\u4e0d\u60f3**\u6301\u4e45\u5316\u6d41\u5f0f\u8fd0\u884c\u7684\u8f93\u51fa**\u5230\u68c0\u67e5\u70b9\u5668\u6570\u636e\u5e93\u4e2d,\u53ef\u4ee5\u5728\u4e0d\u521b\u5efa\u7ebf\u7a0b\u7684\u60c5\u51b5\u4e0b\u521b\u5efa\u65e0\u72b6\u6001\u8fd0\u884c:</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;, api_key=&lt;API_KEY&gt;)\n\nasync for chunk in client.runs.stream(\n    # highlight-next-line\n    None,  # (1)!\n    assistant_id,\n    input=inputs,\n    stream_mode=\"updates\"\n):\n    print(chunk.data)\n</code></pre> <ol> <li>\u6211\u4eec\u4f20\u9012 <code>None</code> \u800c\u4e0d\u662f <code>thread_id</code> UUID\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt;, apiKey: &lt;API_KEY&gt; });\n\n// create a streaming run\n// highlight-next-line\nconst streamResponse = client.runs.stream(\n  // highlight-next-line\n  null,  // (1)!\n  assistantID,\n  {\n    input,\n    streamMode: \"updates\"\n  }\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk.data);\n}\n</code></pre> <ol> <li>\u6211\u4eec\u4f20\u9012 <code>None</code> \u800c\u4e0d\u662f <code>thread_id</code> UUID\u3002</li> </ol> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/runs/stream \\\n--header 'Content-Type: application/json' \\\n--header 'x-api-key: &lt;API_KEY&gt;'\n--data \"{\n  \\\"assistant_id\\\": \\\"agent\\\",\n  \\\"input\\\": &lt;inputs&gt;,\n  \\\"stream_mode\\\": \\\"updates\\\"\n}\"\n</code></pre>"},{"location":"cloud/how-tos/streaming/#_9","title":"\u52a0\u5165\u5e76\u6d41\u5f0f\u4f20\u8f93","text":"<p>LangGraph Platform \u5141\u8bb8\u4f60\u52a0\u5165\u6d3b\u52a8\u7684\u540e\u53f0\u8fd0\u884c\u5e76\u4ece\u4e2d\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002\u4e3a\u6b64,\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph SDK \u7684 <code>client.runs.join_stream</code> \u65b9\u6cd5:</p> PythonJavaScriptcURL <pre><code>from langgraph_sdk import get_client\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;, api_key=&lt;API_KEY&gt;)\n\n# highlight-next-line\nasync for chunk in client.runs.join_stream(\n    thread_id,\n    # highlight-next-line\n    run_id,  # (1)!\n):\n    print(chunk)\n</code></pre> <ol> <li>\u8fd9\u662f\u4f60\u60f3\u8981\u52a0\u5165\u7684\u73b0\u6709\u8fd0\u884c\u7684 <code>run_id</code>\u3002</li> </ol> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt;, apiKey: &lt;API_KEY&gt; });\n\n// highlight-next-line\nconst streamResponse = client.runs.joinStream(\n  threadID,\n  // highlight-next-line\n  runId  // (1)!\n);\nfor await (const chunk of streamResponse) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u8fd9\u662f\u4f60\u60f3\u8981\u52a0\u5165\u7684\u73b0\u6709\u8fd0\u884c\u7684 <code>run_id</code>\u3002</li> </ol> <pre><code>curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/&lt;RUN_ID&gt;/stream \\\n--header 'Content-Type: application/json' \\\n--header 'x-api-key: &lt;API_KEY&gt;'\n</code></pre> <p>\u8f93\u51fa\u672a\u7f13\u51b2</p> <p>\u5f53\u4f60\u4f7f\u7528 <code>.join_stream</code> \u65f6,\u8f93\u51fa\u4e0d\u4f1a\u88ab\u7f13\u51b2,\u56e0\u6b64\u5728\u52a0\u5165\u4e4b\u524d\u4ea7\u751f\u7684\u4efb\u4f55\u8f93\u51fa\u90fd\u4e0d\u4f1a\u88ab\u63a5\u6536\u3002</p>"},{"location":"cloud/how-tos/streaming/#api_1","title":"API \u53c2\u8003","text":"<p>\u6709\u5173 API \u4f7f\u7528\u548c\u5b9e\u73b0,\u8bf7\u53c2\u9605 API \u53c2\u8003\u3002</p>"},{"location":"cloud/how-tos/threads_studio/","title":"\u7ba1\u7406\u7ebf\u7a0b","text":"<p>Studio \u5141\u8bb8\u4f60\u4ece\u670d\u52a1\u5668\u67e5\u770b\u7ebf\u7a0b\u5e76\u7f16\u8f91\u5176\u72b6\u6001\u3002</p>"},{"location":"cloud/how-tos/threads_studio/#_2","title":"\u67e5\u770b\u7ebf\u7a0b","text":""},{"location":"cloud/how-tos/threads_studio/#_3","title":"\u56fe\u6a21\u5f0f","text":"<ol> <li>\u5728\u53f3\u4fa7\u7a97\u683c\u7684\u9876\u90e8,\u9009\u62e9\u4e0b\u62c9\u83dc\u5355\u4ee5\u67e5\u770b\u73b0\u6709\u7ebf\u7a0b\u3002</li> <li>\u9009\u62e9\u6240\u9700\u7684\u7ebf\u7a0b,\u7ebf\u7a0b\u5386\u53f2\u8bb0\u5f55\u5c06\u586b\u5145\u5230\u9875\u9762\u7684\u53f3\u4fa7\u3002</li> <li>\u8981\u521b\u5efa\u65b0\u7ebf\u7a0b,\u70b9\u51fb <code>+ New Thread</code> \u5e76\u63d0\u4ea4\u8fd0\u884c\u3002</li> </ol> <p>\u8981\u5728\u7ebf\u7a0b\u4e2d\u67e5\u770b\u66f4\u8be6\u7ec6\u7684\u4fe1\u606f,\u5c06\u9875\u9762\u9876\u90e8\u7684\u6ed1\u5757\u5411\u53f3\u62d6\u52a8\u3002\u8981\u67e5\u770b\u66f4\u5c11\u7684\u4fe1\u606f,\u5c06\u6ed1\u5757\u5411\u5de6\u62d6\u52a8\u3002\u6b64\u5916,\u53ef\u4ee5\u6298\u53e0\u6216\u5c55\u5f00\u5404\u4e2a\u8f6e\u6b21\u3001\u8282\u70b9\u548c\u72b6\u6001\u7684\u952e\u3002</p> <p>\u5728 <code>Pretty</code> \u548c <code>JSON</code> \u6a21\u5f0f\u4e4b\u95f4\u5207\u6362\u4ee5\u83b7\u5f97\u4e0d\u540c\u7684\u6e32\u67d3\u683c\u5f0f\u3002</p>"},{"location":"cloud/how-tos/threads_studio/#_4","title":"\u804a\u5929\u6a21\u5f0f","text":"<ol> <li>\u5728\u9875\u9762\u7684\u53f3\u4fa7\u7a97\u683c\u4e2d\u67e5\u770b\u6240\u6709\u7ebf\u7a0b\u3002</li> <li>\u9009\u62e9\u6240\u9700\u7684\u7ebf\u7a0b,\u7ebf\u7a0b\u5386\u53f2\u8bb0\u5f55\u5c06\u586b\u5145\u5230\u4e2d\u5fc3\u9762\u677f\u3002</li> <li>\u8981\u521b\u5efa\u65b0\u7ebf\u7a0b,\u70b9\u51fb\u52a0\u53f7\u6309\u94ae\u5e76\u63d0\u4ea4\u8fd0\u884c\u3002</li> </ol>"},{"location":"cloud/how-tos/threads_studio/#_5","title":"\u7f16\u8f91\u7ebf\u7a0b\u5386\u53f2\u8bb0\u5f55","text":""},{"location":"cloud/how-tos/threads_studio/#_6","title":"\u56fe\u6a21\u5f0f","text":"<p>\u8981\u7f16\u8f91\u7ebf\u7a0b\u7684\u72b6\u6001,\u5728\u6240\u9700\u8282\u70b9\u65c1\u8fb9\u9009\u62e9\"edit node state\"\u3002\u6839\u636e\u9700\u8981\u7f16\u8f91\u8282\u70b9\u7684\u8f93\u51fa,\u7136\u540e\u70b9\u51fb\"fork\"\u786e\u8ba4\u3002\u8fd9\u5c06\u4ece\u6240\u9009\u8282\u70b9\u7684\u68c0\u67e5\u70b9\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u53c9\u8fd0\u884c\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u4ece\u7ed9\u5b9a\u7684\u68c0\u67e5\u70b9\u91cd\u65b0\u8fd0\u884c\u7ebf\u7a0b\u800c\u4e0d\u7f16\u8f91\u72b6\u6001,\u8bf7\u70b9\u51fb\"Re-run from here\"\u3002\u8fd9\u5c06\u518d\u6b21\u4ece\u6240\u9009\u68c0\u67e5\u70b9\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5206\u53c9\u8fd0\u884c\u3002\u8fd9\u5bf9\u4e8e\u4f7f\u7528\u4e0d\u7279\u5b9a\u4e8e\u72b6\u6001\u7684\u66f4\u6539(\u4f8b\u5982\u6240\u9009\u52a9\u624b)\u91cd\u65b0\u8fd0\u884c\u5f88\u6709\u7528\u3002</p>"},{"location":"cloud/how-tos/threads_studio/#_7","title":"\u804a\u5929\u6a21\u5f0f","text":"<p>\u8981\u7f16\u8f91\u7ebf\u7a0b\u4e2d\u7684\u4eba\u7c7b\u6d88\u606f,\u70b9\u51fb\u4eba\u7c7b\u6d88\u606f\u4e0b\u65b9\u7684\u7f16\u8f91\u6309\u94ae\u3002\u6839\u636e\u9700\u8981\u7f16\u8f91\u6d88\u606f\u5e76\u63d0\u4ea4\u3002\u8fd9\u5c06\u521b\u5efa\u5bf9\u8bdd\u5386\u53f2\u8bb0\u5f55\u7684\u65b0\u5206\u652f\u3002\u8981\u91cd\u65b0\u751f\u6210 AI \u6d88\u606f,\u70b9\u51fb AI \u6d88\u606f\u4e0b\u65b9\u7684\u91cd\u8bd5\u56fe\u6807\u3002</p>"},{"location":"cloud/how-tos/threads_studio/#_8","title":"\u4e86\u89e3\u66f4\u591a","text":"<p>\u6709\u5173\u65f6\u95f4\u65c5\u884c\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6b64\u5904\u3002</p>"},{"location":"cloud/how-tos/use_stream_react/","title":"\u5982\u4f55\u5c06 LangGraph \u96c6\u6210\u5230\u4f60\u7684 React \u5e94\u7528\u7a0b\u5e8f\u4e2d","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>LangGraph Platform</li> <li>LangGraph Server</li> </ul> <p><code>useStream()</code> React hook \u63d0\u4f9b\u4e86\u4e00\u79cd\u5c06 LangGraph \u96c6\u6210\u5230 React \u5e94\u7528\u7a0b\u5e8f\u7684\u65e0\u7f1d\u65b9\u5f0f\u3002\u5b83\u5904\u7406\u6d41\u5f0f\u4f20\u8f93\u3001\u72b6\u6001\u7ba1\u7406\u548c\u5206\u652f\u903b\u8f91\u7684\u6240\u6709\u590d\u6742\u6027,\u8ba9\u4f60\u4e13\u6ce8\u4e8e\u6784\u5efa\u51fa\u8272\u7684\u804a\u5929\u4f53\u9a8c\u3002</p> <p>\u4e3b\u8981\u529f\u80fd:</p> <ul> <li>\u6d88\u606f\u6d41\u5f0f\u4f20\u8f93:\u5904\u7406\u6d88\u606f\u5757\u6d41\u4ee5\u5f62\u6210\u5b8c\u6574\u6d88\u606f</li> <li>\u81ea\u52a8\u7ba1\u7406\u6d88\u606f\u3001\u4e2d\u65ad\u3001\u52a0\u8f7d\u72b6\u6001\u548c\u9519\u8bef\u7684\u72b6\u6001</li> <li>\u5bf9\u8bdd\u5206\u652f:\u4ece\u804a\u5929\u5386\u53f2\u4e2d\u7684\u4efb\u4f55\u70b9\u521b\u5efa\u5907\u7528\u5bf9\u8bdd\u8def\u5f84</li> <li>UI \u65e0\u5173\u8bbe\u8ba1:\u4f7f\u7528\u4f60\u81ea\u5df1\u7684\u7ec4\u4ef6\u548c\u6837\u5f0f</li> </ul> <p>\u8ba9\u6211\u4eec\u63a2\u8ba8\u5982\u4f55\u5728 React \u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528 <code>useStream()</code>\u3002</p> <p><code>useStream()</code> \u4e3a\u521b\u5efa\u5b9a\u5236\u804a\u5929\u4f53\u9a8c\u63d0\u4f9b\u4e86\u575a\u5b9e\u7684\u57fa\u7840\u3002\u5bf9\u4e8e\u9884\u6784\u5efa\u7684\u804a\u5929\u7ec4\u4ef6\u548c\u754c\u9762,\u6211\u4eec\u8fd8\u5efa\u8bae\u67e5\u770b CopilotKit \u548c assistant-ui\u3002</p>"},{"location":"cloud/how-tos/use_stream_react/#_1","title":"\u5b89\u88c5","text":"<pre><code>npm install @langchain/langgraph-sdk @langchain/core\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_2","title":"\u793a\u4f8b","text":"<pre><code>\"use client\";\n\nimport { useStream } from \"@langchain/langgraph-sdk/react\";\nimport type { Message } from \"@langchain/langgraph-sdk\";\n\nexport default function App() {\n  const thread = useStream&lt;{ messages: Message[] }&gt;({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n    messagesKey: \"messages\",\n  });\n\n  return (\n    &lt;div&gt;\n      &lt;div&gt;\n        {thread.messages.map((message) =&gt; (\n          &lt;div key={message.id}&gt;{message.content as string}&lt;/div&gt;\n        ))}\n      &lt;/div&gt;\n\n      &lt;form\n        onSubmit={(e) =&gt; {\n          e.preventDefault();\n\n          const form = e.target as HTMLFormElement;\n          const message = new FormData(form).get(\"message\") as string;\n\n          form.reset();\n          thread.submit({ messages: [{ type: \"human\", content: message }] });\n        }}\n      &gt;\n        &lt;input type=\"text\" name=\"message\" /&gt;\n\n        {thread.isLoading ? (\n          &lt;button key=\"stop\" type=\"button\" onClick={() =&gt; thread.stop()}&gt;\n            Stop\n          &lt;/button&gt;\n        ) : (\n          &lt;button keytype=\"submit\"&gt;Send&lt;/button&gt;\n        )}\n      &lt;/form&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#ui","title":"\u81ea\u5b9a\u4e49\u4f60\u7684 UI","text":"<p><code>useStream()</code> hook \u5728\u5e55\u540e\u5904\u7406\u6240\u6709\u590d\u6742\u7684\u72b6\u6001\u7ba1\u7406,\u4e3a\u4f60\u63d0\u4f9b\u7b80\u5355\u7684\u754c\u9762\u6765\u6784\u5efa UI\u3002\u4ee5\u4e0b\u662f\u4f60\u5f00\u7bb1\u5373\u7528\u83b7\u5f97\u7684\u529f\u80fd:</p> <ul> <li>\u7ebf\u7a0b\u72b6\u6001\u7ba1\u7406</li> <li>\u52a0\u8f7d\u548c\u9519\u8bef\u72b6\u6001</li> <li>\u4e2d\u65ad</li> <li>\u6d88\u606f\u5904\u7406\u548c\u66f4\u65b0</li> <li>\u5206\u652f\u652f\u6301</li> </ul> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u6709\u6548\u4f7f\u7528\u8fd9\u4e9b\u529f\u80fd\u7684\u4e00\u4e9b\u793a\u4f8b:</p>"},{"location":"cloud/how-tos/use_stream_react/#_3","title":"\u52a0\u8f7d\u72b6\u6001","text":"<p><code>isLoading</code> \u5c5e\u6027\u544a\u8bc9\u4f60\u6d41\u4f55\u65f6\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001,\u4f7f\u4f60\u80fd\u591f:</p> <ul> <li>\u663e\u793a\u52a0\u8f7d\u6307\u793a\u5668</li> <li>\u5728\u5904\u7406\u671f\u95f4\u7981\u7528\u8f93\u5165\u5b57\u6bb5</li> <li>\u663e\u793a\u53d6\u6d88\u6309\u94ae</li> </ul> <pre><code>export default function App() {\n  const { isLoading, stop } = useStream&lt;{ messages: Message[] }&gt;({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n    messagesKey: \"messages\",\n  });\n\n  return (\n    &lt;form&gt;\n      {isLoading &amp;&amp; (\n        &lt;button key=\"stop\" type=\"button\" onClick={() =&gt; stop()}&gt;\n          Stop\n        &lt;/button&gt;\n      )}\n    &lt;/form&gt;\n  );\n}\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_4","title":"\u9875\u9762\u5237\u65b0\u540e\u6062\u590d\u6d41","text":"<p><code>useStream()</code> hook \u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>reconnectOnMount: true</code> \u5728\u6302\u8f7d\u65f6\u81ea\u52a8\u6062\u590d\u6b63\u5728\u8fdb\u884c\u7684\u8fd0\u884c\u3002\u8fd9\u5bf9\u4e8e\u5728\u9875\u9762\u5237\u65b0\u540e\u7ee7\u7eed\u6d41\u5f88\u6709\u7528,\u786e\u4fdd\u5728\u505c\u673a\u671f\u95f4\u751f\u6210\u7684\u6d88\u606f\u548c\u4e8b\u4ef6\u4e0d\u4f1a\u4e22\u5931\u3002</p> <pre><code>const thread = useStream&lt;{ messages: Message[] }&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  reconnectOnMount: true,\n});\n</code></pre> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u521b\u5efa\u7684\u8fd0\u884c\u7684 ID \u5b58\u50a8\u5728 <code>window.sessionStorage</code> \u4e2d,\u53ef\u4ee5\u901a\u8fc7\u5728 <code>reconnectOnMount</code> \u4e2d\u4f20\u9012\u81ea\u5b9a\u4e49\u5b58\u50a8\u6765\u4ea4\u6362\u3002\u8be5\u5b58\u50a8\u7528\u4e8e\u6301\u4e45\u5316\u7ebf\u7a0b\u7684\u4f20\u8f93\u4e2d\u8fd0\u884c ID(\u5728 <code>lg:stream:${threadId}</code> \u952e\u4e0b)\u3002</p> <pre><code>const thread = useStream&lt;{ messages: Message[] }&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  reconnectOnMount: () =&gt; window.localStorage,\n});\n</code></pre> <p>\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u8fd0\u884c\u56de\u8c03\u6765\u6301\u4e45\u5316\u8fd0\u884c\u5143\u6570\u636e\u548c\u4f7f\u7528 <code>joinStream</code> \u51fd\u6570\u6765\u6062\u590d\u6d41\u6765\u624b\u52a8\u7ba1\u7406\u6062\u590d\u8fc7\u7a0b\u3002\u786e\u4fdd\u5728\u521b\u5efa\u8fd0\u884c\u65f6\u4f20\u9012 <code>streamResumable: true</code>;\u5426\u5219\u67d0\u4e9b\u4e8b\u4ef6\u53ef\u80fd\u4f1a\u4e22\u5931\u3002</p> <pre><code>import type { Message } from \"@langchain/langgraph-sdk\";\nimport { useStream } from \"@langchain/langgraph-sdk/react\";\nimport { useCallback, useState, useEffect, useRef } from \"react\";\n\nexport default function App() {\n  const [threadId, onThreadId] = useSearchParam(\"threadId\");\n\n  const thread = useStream&lt;{ messages: Message[] }&gt;({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n\n    threadId,\n    onThreadId,\n\n    onCreated: (run) =&gt; {\n      window.sessionStorage.setItem(`resume:${run.thread_id}`, run.run_id);\n    },\n    onFinish: (_, run) =&gt; {\n      window.sessionStorage.removeItem(`resume:${run?.thread_id}`);\n    },\n  });\n\n  // Ensure that we only join the stream once per thread.\n  const joinedThreadId = useRef&lt;string | null&gt;(null);\n  useEffect(() =&gt; {\n    if (!threadId) return;\n\n    const resume = window.sessionStorage.getItem(`resume:${threadId}`);\n    if (resume &amp;&amp; joinedThreadId.current !== threadId) {\n      thread.joinStream(resume);\n      joinedThreadId.current = threadId;\n    }\n  }, [threadId]);\n\n  return (\n    &lt;form\n      onSubmit={(e) =&gt; {\n        e.preventDefault();\n        const form = e.target as HTMLFormElement;\n        const message = new FormData(form).get(\"message\") as string;\n        thread.submit(\n          { messages: [{ type: \"human\", content: message }] },\n          { streamResumable: true }\n        );\n      }}\n    &gt;\n      &lt;div&gt;\n        {thread.messages.map((message) =&gt; (\n          &lt;div key={message.id}&gt;{message.content as string}&lt;/div&gt;\n        ))}\n      &lt;/div&gt;\n      &lt;input type=\"text\" name=\"message\" /&gt;\n      &lt;button type=\"submit\"&gt;Send&lt;/button&gt;\n    &lt;/form&gt;\n  );\n}\n\n// Utility method to retrieve and persist data in URL as search param\nfunction useSearchParam(key: string) {\n  const [value, setValue] = useState&lt;string | null&gt;(() =&gt; {\n    const params = new URLSearchParams(window.location.search);\n    return params.get(key) ?? null;\n  });\n\n  const update = useCallback(\n    (value: string | null) =&gt; {\n      setValue(value);\n\n      const url = new URL(window.location.href);\n      if (value == null) {\n        url.searchParams.delete(key);\n      } else {\n        url.searchParams.set(key, value);\n      }\n\n      window.history.pushState({}, \"\", url.toString());\n    },\n    [key]\n  );\n\n  return [value, update] as const;\n}\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_5","title":"\u7ebf\u7a0b\u7ba1\u7406","text":"<p>\u4f7f\u7528\u5185\u7f6e\u7684\u7ebf\u7a0b\u7ba1\u7406\u8ddf\u8e2a\u5bf9\u8bdd\u3002\u4f60\u53ef\u4ee5\u8bbf\u95ee\u5f53\u524d\u7ebf\u7a0b ID \u5e76\u5728\u521b\u5efa\u65b0\u7ebf\u7a0b\u65f6\u6536\u5230\u901a\u77e5:</p> <pre><code>const [threadId, setThreadId] = useState&lt;string | null&gt;(null);\n\nconst thread = useStream&lt;{ messages: Message[] }&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n\n  threadId: threadId,\n  onThreadId: setThreadId,\n});\n</code></pre> <p>\u6211\u4eec\u5efa\u8bae\u5c06 <code>threadId</code> \u5b58\u50a8\u5728 URL \u7684\u67e5\u8be2\u53c2\u6570\u4e2d,\u4ee5\u4fbf\u7528\u6237\u5728\u9875\u9762\u5237\u65b0\u540e\u6062\u590d\u5bf9\u8bdd\u3002</p>"},{"location":"cloud/how-tos/use_stream_react/#_6","title":"\u6d88\u606f\u5904\u7406","text":"<p><code>useStream()</code> hook \u5c06\u8ddf\u8e2a\u4ece\u670d\u52a1\u5668\u63a5\u6536\u7684\u6d88\u606f\u5757,\u5e76\u5c06\u5b83\u4eec\u8fde\u63a5\u5728\u4e00\u8d77\u5f62\u6210\u5b8c\u6574\u7684\u6d88\u606f\u3002\u53ef\u4ee5\u901a\u8fc7 <code>messages</code> \u5c5e\u6027\u68c0\u7d22\u5b8c\u6210\u7684\u6d88\u606f\u5757\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b,<code>messagesKey</code> \u8bbe\u7f6e\u4e3a <code>messages</code>,\u5b83\u5c06\u65b0\u6d88\u606f\u5757\u9644\u52a0\u5230 <code>values[\"messages\"]</code>\u3002\u5982\u679c\u4f60\u5c06\u6d88\u606f\u5b58\u50a8\u5728\u4e0d\u540c\u7684\u952e\u4e2d,\u53ef\u4ee5\u66f4\u6539 <code>messagesKey</code> \u7684\u503c\u3002</p> <pre><code>import type { Message } from \"@langchain/langgraph-sdk\";\nimport { useStream } from \"@langchain/langgraph-sdk/react\";\n\nexport default function HomePage() {\n  const thread = useStream&lt;{ messages: Message[] }&gt;({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n    messagesKey: \"messages\",\n  });\n\n  return (\n    &lt;div&gt;\n      {thread.messages.map((message) =&gt; (\n        &lt;div key={message.id}&gt;{message.content as string}&lt;/div&gt;\n      ))}\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>\u5728\u5e95\u5c42,<code>useStream()</code> hook \u5c06\u4f7f\u7528 <code>streamMode: \"messages-tuple\"</code> \u4ece\u56fe\u8282\u70b9\u5185\u7684\u4efb\u4f55 LangChain \u804a\u5929\u6a21\u578b\u8c03\u7528\u63a5\u6536\u6d88\u606f\u6d41(\u5373\u5355\u4e2a LLM \u4ee4\u724c)\u3002\u5728\u6d41\u5f0f\u4f20\u8f93\u6307\u5357\u4e2d\u4e86\u89e3\u6709\u5173\u6d88\u606f\u6d41\u5f0f\u4f20\u8f93\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>"},{"location":"cloud/how-tos/use_stream_react/#_7","title":"\u4e2d\u65ad","text":"<p><code>useStream()</code> hook \u516c\u5f00 <code>interrupt</code> \u5c5e\u6027,\u8be5\u5c5e\u6027\u5c06\u586b\u5145\u7ebf\u7a0b\u7684\u6700\u540e\u4e00\u6b21\u4e2d\u65ad\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e2d\u65ad\u6765:</p> <ul> <li>\u5728\u6267\u884c\u8282\u70b9\u4e4b\u524d\u5448\u73b0\u786e\u8ba4 UI</li> <li>\u7b49\u5f85\u4eba\u5de5\u8f93\u5165,\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5411\u7528\u6237\u8be2\u95ee\u6f84\u6e05\u95ee\u9898</li> </ul> <p>\u5728\u5982\u4f55\u5904\u7406\u4e2d\u65ad\u6307\u5357\u4e2d\u4e86\u89e3\u6709\u5173\u4e2d\u65ad\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <pre><code>const thread = useStream&lt;{ messages: Message[] }, { InterruptType: string }&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  messagesKey: \"messages\",\n});\n\nif (thread.interrupt) {\n  return (\n    &lt;div&gt;\n      Interrupted! {thread.interrupt.value}\n      &lt;button\n        type=\"button\"\n        onClick={() =&gt; {\n          // `resume` can be any value that the agent accepts\n          thread.submit(undefined, { command: { resume: true } });\n        }}\n      &gt;\n        Resume\n      &lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_8","title":"\u5206\u652f","text":"<p>\u5bf9\u4e8e\u6bcf\u6761\u6d88\u606f,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>getMessagesMetadata()</code> \u83b7\u53d6\u9996\u6b21\u770b\u5230\u6d88\u606f\u7684\u7b2c\u4e00\u4e2a\u68c0\u67e5\u70b9\u3002\u7136\u540e,\u4f60\u53ef\u4ee5\u4ece\u9996\u6b21\u770b\u5230\u68c0\u67e5\u70b9\u4e4b\u524d\u7684\u68c0\u67e5\u70b9\u521b\u5efa\u65b0\u8fd0\u884c,\u4ee5\u5728\u7ebf\u7a0b\u4e2d\u521b\u5efa\u65b0\u5206\u652f\u3002</p> <p>\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u521b\u5efa\u5206\u652f:</p> <ol> <li>\u7f16\u8f91\u5148\u524d\u7684\u7528\u6237\u6d88\u606f\u3002</li> <li>\u8bf7\u6c42\u91cd\u65b0\u751f\u6210\u5148\u524d\u7684\u52a9\u624b\u6d88\u606f\u3002</li> </ol> <pre><code>\"use client\";\n\nimport type { Message } from \"@langchain/langgraph-sdk\";\nimport { useStream } from \"@langchain/langgraph-sdk/react\";\nimport { useState } from \"react\";\n\nfunction BranchSwitcher({\n  branch,\n  branchOptions,\n  onSelect,\n}: {\n  branch: string | undefined;\n  branchOptions: string[] | undefined;\n  onSelect: (branch: string) =&gt; void;\n}) {\n  if (!branchOptions || !branch) return null;\n  const index = branchOptions.indexOf(branch);\n\n  return (\n    &lt;div className=\"flex items-center gap-2\"&gt;\n      &lt;button\n        type=\"button\"\n        onClick={() =&gt; {\n          const prevBranch = branchOptions[index - 1];\n          if (!prevBranch) return;\n          onSelect(prevBranch);\n        }}\n      &gt;\n        Prev\n      &lt;/button&gt;\n      &lt;span&gt;\n        {index + 1} / {branchOptions.length}\n      &lt;/span&gt;\n      &lt;button\n        type=\"button\"\n        onClick={() =&gt; {\n          const nextBranch = branchOptions[index + 1];\n          if (!nextBranch) return;\n          onSelect(nextBranch);\n        }}\n      &gt;\n        Next\n      &lt;/button&gt;\n    &lt;/div&gt;\n  );\n}\n\nfunction EditMessage({\n  message,\n  onEdit,\n}: {\n  message: Message;\n  onEdit: (message: Message) =&gt; void;\n}) {\n  const [editing, setEditing] = useState(false);\n\n  if (!editing) {\n    return (\n      &lt;button type=\"button\" onClick={() =&gt; setEditing(true)}&gt;\n        Edit\n      &lt;/button&gt;\n    );\n  }\n\n  return (\n    &lt;form\n      onSubmit={(e) =&gt; {\n        e.preventDefault();\n        const form = e.target as HTMLFormElement;\n        const content = new FormData(form).get(\"content\") as string;\n\n        form.reset();\n        onEdit({ type: \"human\", content });\n        setEditing(false);\n      }}\n    &gt;\n      &lt;input name=\"content\" defaultValue={message.content as string} /&gt;\n      &lt;button type=\"submit\"&gt;Save&lt;/button&gt;\n    &lt;/form&gt;\n  );\n}\n\nexport default function App() {\n  const thread = useStream({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n    messagesKey: \"messages\",\n  });\n\n  return (\n    &lt;div&gt;\n      &lt;div&gt;\n        {thread.messages.map((message) =&gt; {\n          const meta = thread.getMessagesMetadata(message);\n          const parentCheckpoint = meta?.firstSeenState?.parent_checkpoint;\n\n          return (\n            &lt;div key={message.id}&gt;\n              &lt;div&gt;{message.content as string}&lt;/div&gt;\n\n              {message.type === \"human\" &amp;&amp; (\n                &lt;EditMessage\n                  message={message}\n                  onEdit={(message) =&gt;\n                    thread.submit(\n                      { messages: [message] },\n                      { checkpoint: parentCheckpoint }\n                    )\n                  }\n                /&gt;\n              )}\n\n              {message.type === \"ai\" &amp;&amp; (\n                &lt;button\n                  type=\"button\"\n                  onClick={() =&gt;\n                    thread.submit(undefined, { checkpoint: parentCheckpoint })\n                  }\n                &gt;\n                  &lt;span&gt;Regenerate&lt;/span&gt;\n                &lt;/button&gt;\n              )}\n\n              &lt;BranchSwitcher\n                branch={meta?.branch}\n                branchOptions={meta?.branchOptions}\n                onSelect={(branch) =&gt; thread.setBranch(branch)}\n              /&gt;\n            &lt;/div&gt;\n          );\n        })}\n      &lt;/div&gt;\n\n      &lt;form\n        onSubmit={(e) =&gt; {\n          e.preventDefault();\n\n          const form = e.target as HTMLFormElement;\n          const message = new FormData(form).get(\"message\") as string;\n\n          form.reset();\n          thread.submit({ messages: [message] });\n        }}\n      &gt;\n        &lt;input type=\"text\" name=\"message\" /&gt;\n\n        {thread.isLoading ? (\n          &lt;button key=\"stop\" type=\"button\" onClick={() =&gt; thread.stop()}&gt;\n            Stop\n          &lt;/button&gt;\n        ) : (\n          &lt;button key=\"submit\" type=\"submit\"&gt;\n            Send\n          &lt;/button&gt;\n        )}\n      &lt;/form&gt;\n    &lt;/div&gt;\n  );\n}\n</code></pre> <p>\u5bf9\u4e8e\u9ad8\u7ea7\u7528\u4f8b,\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>experimental_branchTree</code> \u5c5e\u6027\u83b7\u53d6\u7ebf\u7a0b\u7684\u6811\u8868\u793a,\u8be5\u5c5e\u6027\u53ef\u7528\u4e8e\u4e3a\u57fa\u4e8e\u975e\u6d88\u606f\u7684\u56fe\u6e32\u67d3\u5206\u652f\u63a7\u4ef6\u3002</p>"},{"location":"cloud/how-tos/use_stream_react/#_9","title":"\u4e50\u89c2\u66f4\u65b0","text":"<p>\u4f60\u53ef\u4ee5\u5728\u5411\u667a\u80fd\u4ee3\u7406\u6267\u884c\u7f51\u7edc\u8bf7\u6c42\u4e4b\u524d\u4e50\u89c2\u5730\u66f4\u65b0\u5ba2\u6237\u7aef\u72b6\u6001,\u4ece\u800c\u5141\u8bb8\u4f60\u5411\u7528\u6237\u63d0\u4f9b\u5373\u65f6\u53cd\u9988,\u4f8b\u5982\u5728\u667a\u80fd\u4ee3\u7406\u770b\u5230\u8bf7\u6c42\u4e4b\u524d\u7acb\u5373\u663e\u793a\u7528\u6237\u6d88\u606f\u3002</p> <pre><code>const stream = useStream({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  messagesKey: \"messages\",\n});\n\nconst handleSubmit = (text: string) =&gt; {\n  const newMessage = { type: \"human\" as const, content: text };\n\n  stream.submit(\n    { messages: [newMessage] },\n    {\n      optimisticValues(prev) {\n        const prevMessages = prev.messages ?? [];\n        const newMessages = [...prevMessages, newMessage];\n        return { ...prev, messages: newMessages };\n      },\n    }\n  );\n};\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_10","title":"\u7f13\u5b58\u7ebf\u7a0b\u663e\u793a","text":"<p>\u4f7f\u7528 <code>initialValues</code> \u9009\u9879\u5728\u4ece\u670d\u52a1\u5668\u52a0\u8f7d\u5386\u53f2\u8bb0\u5f55\u65f6\u7acb\u5373\u663e\u793a\u7f13\u5b58\u7684\u7ebf\u7a0b\u6570\u636e\u3002\u8fd9\u901a\u8fc7\u5728\u5bfc\u822a\u5230\u73b0\u6709\u7ebf\u7a0b\u65f6\u7acb\u5373\u663e\u793a\u7f13\u5b58\u7684\u6570\u636e\u6765\u6539\u5584\u7528\u6237\u4f53\u9a8c\u3002</p> <pre><code>import { useStream } from \"@langchain/langgraph-sdk/react\";\n\nconst CachedThreadExample = ({ threadId, cachedThreadData }) =&gt; {\n  const stream = useStream({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n    threadId,\n    // Show cached data immediately while history loads\n    initialValues: cachedThreadData?.values,\n    messagesKey: \"messages\",\n  });\n\n  return (\n    &lt;div&gt;\n      {stream.messages.map((message) =&gt; (\n        &lt;div key={message.id}&gt;{message.content as string}&lt;/div&gt;\n      ))}\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_11","title":"\u4e50\u89c2\u7ebf\u7a0b\u521b\u5efa","text":"<p>\u5728 <code>submit</code> \u51fd\u6570\u4e2d\u4f7f\u7528 <code>threadId</code> \u9009\u9879\u6765\u542f\u7528\u4e50\u89c2 UI \u6a21\u5f0f,\u4f60\u9700\u8981\u5728\u5b9e\u9645\u521b\u5efa\u7ebf\u7a0b\u4e4b\u524d\u77e5\u9053\u7ebf\u7a0b ID\u3002</p> <pre><code>import { useState } from \"react\";\nimport { useStream } from \"@langchain/langgraph-sdk/react\";\n\nconst OptimisticThreadExample = () =&gt; {\n  const [threadId, setThreadId] = useState&lt;string | null&gt;(null);\n  const [optimisticThreadId] = useState(() =&gt; crypto.randomUUID());\n\n  const stream = useStream({\n    apiUrl: \"http://localhost:2024\",\n    assistantId: \"agent\",\n    threadId,\n    onThreadId: setThreadId, // (3) Updated after thread has been created.\n    messagesKey: \"messages\",\n  });\n\n  const handleSubmit = (text: string) =&gt; {\n    // (1) Perform a soft navigation to /threads/${optimisticThreadId}\n    // without waiting for thread creation.\n    window.history.pushState({}, \"\", `/threads/${optimisticThreadId}`);\n\n    // (2) Submit message to create thread with the predetermined ID.\n    stream.submit(\n      { messages: [{ type: \"human\", content: text }] },\n      { threadId: optimisticThreadId }\n    );\n  };\n\n  return (\n    &lt;div&gt;\n      &lt;p&gt;Thread ID: {threadId ?? optimisticThreadId}&lt;/p&gt;\n      {/* Rest of component */}\n    &lt;/div&gt;\n  );\n};\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#typescript","title":"TypeScript","text":"<p><code>useStream()</code> hook \u5bf9\u4f7f\u7528 TypeScript \u7f16\u5199\u7684\u5e94\u7528\u7a0b\u5e8f\u53cb\u597d,\u4f60\u53ef\u4ee5\u4e3a\u72b6\u6001\u6307\u5b9a\u7c7b\u578b\u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u7c7b\u578b\u5b89\u5168\u6027\u548c IDE \u652f\u6301\u3002</p> <pre><code>// Define your types\ntype State = {\n  messages: Message[];\n  context?: Record&lt;string, unknown&gt;;\n};\n\n// Use them with the hook\nconst thread = useStream&lt;State&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  messagesKey: \"messages\",\n});\n</code></pre> <p>\u4f60\u8fd8\u53ef\u4ee5\u9009\u62e9\u4e3a\u4e0d\u540c\u7684\u573a\u666f\u6307\u5b9a\u7c7b\u578b,\u4f8b\u5982:</p> <ul> <li><code>ConfigurableType</code>: <code>config.configurable</code> \u5c5e\u6027\u7684\u7c7b\u578b(\u9ed8\u8ba4\u503c:<code>Record&lt;string, unknown&gt;</code>)</li> <li><code>InterruptType</code>: \u4e2d\u65ad\u503c\u7684\u7c7b\u578b - \u5373 <code>interrupt(...)</code> \u51fd\u6570\u7684\u5185\u5bb9(\u9ed8\u8ba4\u503c:<code>unknown</code>)</li> <li><code>CustomEventType</code>: \u81ea\u5b9a\u4e49\u4e8b\u4ef6\u7684\u7c7b\u578b(\u9ed8\u8ba4\u503c:<code>unknown</code>)</li> <li><code>UpdateType</code>: \u63d0\u4ea4\u51fd\u6570\u7684\u7c7b\u578b(\u9ed8\u8ba4\u503c:<code>Partial&lt;State&gt;</code>)</li> </ul> <pre><code>const thread = useStream&lt;\n  State,\n  {\n    UpdateType: {\n      messages: Message[] | Message;\n      context?: Record&lt;string, unknown&gt;;\n    };\n    InterruptType: string;\n    CustomEventType: {\n      type: \"progress\" | \"debug\";\n      payload: unknown;\n    };\n    ConfigurableType: {\n      model: string;\n    };\n  }\n&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  messagesKey: \"messages\",\n});\n</code></pre> <p>\u5982\u679c\u4f60\u4f7f\u7528 LangGraph.js,\u8fd8\u53ef\u4ee5\u91cd\u7528\u56fe\u7684\u6ce8\u91ca\u7c7b\u578b\u3002\u4f46\u662f,\u8bf7\u786e\u4fdd\u4ec5\u5bfc\u5165\u6ce8\u91ca\u67b6\u6784\u7684\u7c7b\u578b,\u4ee5\u907f\u514d\u5bfc\u5165\u6574\u4e2a LangGraph.js \u8fd0\u884c\u65f6(\u5373\u901a\u8fc7 <code>import type { ... }</code> \u6307\u4ee4)\u3002</p> <pre><code>import {\n  Annotation,\n  MessagesAnnotation,\n  type StateType,\n  type UpdateType,\n} from \"@langchain/langgraph/web\";\n\nconst AgentState = Annotation.Root({\n  ...MessagesAnnotation.spec,\n  context: Annotation&lt;string&gt;(),\n});\n\nconst thread = useStream&lt;\n  StateType&lt;typeof AgentState.spec&gt;,\n  { UpdateType: UpdateType&lt;typeof AgentState.spec&gt; }\n&gt;({\n  apiUrl: \"http://localhost:2024\",\n  assistantId: \"agent\",\n  messagesKey: \"messages\",\n});\n</code></pre>"},{"location":"cloud/how-tos/use_stream_react/#_12","title":"\u4e8b\u4ef6\u5904\u7406","text":"<p><code>useStream()</code> hook \u63d0\u4f9b\u4e86\u51e0\u4e2a\u56de\u8c03\u9009\u9879\u6765\u5e2e\u52a9\u4f60\u54cd\u5e94\u4e0d\u540c\u7684\u4e8b\u4ef6:</p> <ul> <li><code>onError</code>: \u5728\u53d1\u751f\u9519\u8bef\u65f6\u8c03\u7528\u3002</li> <li><code>onFinish</code>: \u5728\u6d41\u5b8c\u6210\u65f6\u8c03\u7528\u3002</li> <li><code>onUpdateEvent</code>: \u5728\u63a5\u6536\u5230\u66f4\u65b0\u4e8b\u4ef6\u65f6\u8c03\u7528\u3002</li> <li><code>onCustomEvent</code>: \u5728\u63a5\u6536\u5230\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u65f6\u8c03\u7528\u3002\u8bf7\u53c2\u9605\u6d41\u5f0f\u4f20\u8f93\u6307\u5357\u4ee5\u4e86\u89e3\u5982\u4f55\u6d41\u5f0f\u4f20\u8f93\u81ea\u5b9a\u4e49\u4e8b\u4ef6\u3002</li> <li><code>onMetadataEvent</code>: \u5728\u63a5\u6536\u5230\u5143\u6570\u636e\u4e8b\u4ef6\u65f6\u8c03\u7528,\u5176\u4e2d\u5305\u542b\u8fd0\u884c ID \u548c\u7ebf\u7a0b ID\u3002</li> </ul>"},{"location":"cloud/how-tos/use_stream_react/#_13","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>JS/TS SDK \u53c2\u8003</li> </ul>"},{"location":"cloud/how-tos/use_threads/","title":"\u4f7f\u7528\u7ebf\u7a0b","text":"<p>\u5728\u672c\u6307\u5357\u4e2d,\u6211\u4eec\u5c06\u5c55\u793a\u5982\u4f55\u521b\u5efa\u3001\u67e5\u770b\u548c\u68c0\u67e5\u7ebf\u7a0b\u3002</p>"},{"location":"cloud/how-tos/use_threads/#_2","title":"\u521b\u5efa\u7ebf\u7a0b","text":"<p>\u8981\u8fd0\u884c\u56fe\u5e76\u6301\u4e45\u5316\u72b6\u6001,\u4f60\u5fc5\u987b\u9996\u5148\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u3002</p>"},{"location":"cloud/how-tos/use_threads/#_3","title":"\u7a7a\u7ebf\u7a0b","text":"<p>\u8981\u521b\u5efa\u65b0\u7ebf\u7a0b,\u8bf7\u4f7f\u7528 LangGraph SDK \u7684 <code>create</code> \u65b9\u6cd5\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS SDK \u53c2\u8003\u6587\u6863\u3002</p> PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\nthread = await client.threads.create()\n\nprint(thread)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\nconst thread = await client.threads.create();\n\nconsole.log(thread);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n  \"thread_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n  \"created_at\": \"2025-05-12T14:04:08.268Z\",\n  \"updated_at\": \"2025-05-12T14:04:08.268Z\",\n  \"metadata\": {},\n  \"status\": \"idle\",\n  \"values\": {}\n}\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_4","title":"\u590d\u5236\u7ebf\u7a0b","text":"<p>\u6216\u8005,\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u5df2\u6709\u4e00\u4e2a\u7ebf\u7a0b,\u5e76\u4e14\u5e0c\u671b\u590d\u5236\u5176\u72b6\u6001,\u53ef\u4ee5\u4f7f\u7528 <code>copy</code> \u65b9\u6cd5\u3002\u8fd9\u5c06\u521b\u5efa\u4e00\u4e2a\u72ec\u7acb\u7684\u7ebf\u7a0b,\u5176\u5386\u53f2\u8bb0\u5f55\u5728\u64cd\u4f5c\u65f6\u4e0e\u539f\u59cb\u7ebf\u7a0b\u76f8\u540c\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS SDK \u53c2\u8003\u6587\u6863\u3002</p> PythonJavascriptCURL <pre><code>copied_thread = await client.threads.copy(&lt;THREAD_ID&gt;)\n</code></pre> <pre><code>const copiedThread = await client.threads.copy(&lt;THREAD_ID&gt;);\n</code></pre> <pre><code>curl --request POST --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/copy \\\n--header 'Content-Type: application/json'\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_5","title":"\u9884\u586b\u5145\u72b6\u6001","text":"<p>\u6700\u540e,\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728 <code>create</code> \u65b9\u6cd5\u4e2d\u63d0\u4f9b <code>supersteps</code> \u5217\u8868\u6765\u521b\u5efa\u5177\u6709\u4efb\u610f\u9884\u5b9a\u4e49\u72b6\u6001\u7684\u7ebf\u7a0b\u3002<code>supersteps</code> \u63cf\u8ff0\u4e86\u4e00\u7cfb\u5217\u72b6\u6001\u66f4\u65b0\u3002\u4f8b\u5982:</p> PythonJavascriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\nthread = await client.threads.create(\n  graph_id=\"agent\",\n  supersteps=[\n    {\n      updates: [\n        {\n          values: {},\n          as_node: '__input__',\n        },\n      ],\n    },\n    {\n      updates: [\n        {\n          values: {\n            messages: [\n              {\n                type: 'human',\n                content: 'hello',\n              },\n            ],\n          },\n          as_node: '__start__',\n        },\n      ],\n    },\n    {\n      updates: [\n        {\n          values: {\n            messages: [\n              {\n                content: 'Hello! How can I assist you today?',\n                type: 'ai',\n              },\n            ],\n          },\n          as_node: 'call_model',\n        },\n      ],\n    },\n  ])\n\nprint(thread)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\nconst thread = await client.threads.create({\n    graphId: 'agent',\n    supersteps: [\n    {\n      updates: [\n        {\n          values: {},\n          asNode: '__input__',\n        },\n      ],\n    },\n    {\n      updates: [\n        {\n          values: {\n            messages: [\n              {\n                type: 'human',\n                content: 'hello',\n              },\n            ],\n          },\n          asNode: '__start__',\n        },\n      ],\n    },\n    {\n      updates: [\n        {\n          values: {\n            messages: [\n              {\n                content: 'Hello! How can I assist you today?',\n                type: 'ai',\n              },\n            ],\n          },\n          asNode: 'call_model',\n        },\n      ],\n    },\n  ],\n});\n\nconsole.log(thread);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{\"metadata\":{\"graph_id\":\"agent\"},\"supersteps\":[{\"updates\":[{\"values\":{},\"as_node\":\"__input__\"}]},{\"updates\":[{\"values\":{\"messages\":[{\"type\":\"human\",\"content\":\"hello\"}]},\"as_node\":\"__start__\"}]},{\"updates\":[{\"values\":{\"messages\":[{\"content\":\"Hello\\u0021 How can I assist you today?\",\"type\":\"ai\"}]},\"as_node\":\"call_model\"}]}]}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n    \"created_at\": \"2025-05-12T15:37:08.935038+00:00\",\n    \"updated_at\": \"2025-05-12T15:37:08.935046+00:00\",\n    \"metadata\": {\"graph_id\": \"agent\"},\n    \"status\": \"idle\",\n    \"config\": {},\n    \"values\": {\n        \"messages\": [\n            {\n                \"content\": \"hello\",\n                \"additional_kwargs\": {},\n                \"response_metadata\": {},\n                \"type\": \"human\",\n                \"name\": null,\n                \"id\": \"8701f3be-959c-4b7c-852f-c2160699b4ab\",\n                \"example\": false\n            },\n            {\n                \"content\": \"Hello! How can I assist you today?\",\n                \"additional_kwargs\": {},\n                \"response_metadata\": {},\n                \"type\": \"ai\",\n                \"name\": null,\n                \"id\": \"4d8ea561-7ca1-409a-99f7-6b67af3e1aa3\",\n                \"example\": false,\n                \"tool_calls\": [],\n                \"invalid_tool_calls\": [],\n                \"usage_metadata\": null\n            }\n        ]\n    }\n}\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_6","title":"\u5217\u51fa\u7ebf\u7a0b","text":""},{"location":"cloud/how-tos/use_threads/#langgraph-sdk","title":"LangGraph SDK","text":"<p>\u8981\u5217\u51fa\u7ebf\u7a0b,\u8bf7\u4f7f\u7528 LangGraph SDK \u7684 <code>search</code> \u65b9\u6cd5\u3002\u8fd9\u5c06\u5217\u51fa\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4e0e\u63d0\u4f9b\u7684\u8fc7\u6ee4\u5668\u5339\u914d\u7684\u7ebf\u7a0b\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS SDK \u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"cloud/how-tos/use_threads/#_7","title":"\u6309\u7ebf\u7a0b\u72b6\u6001\u8fc7\u6ee4","text":"<p>\u4f7f\u7528 <code>status</code> \u5b57\u6bb5\u6839\u636e\u72b6\u6001\u8fc7\u6ee4\u7ebf\u7a0b\u3002\u652f\u6301\u7684\u503c\u4e3a <code>idle</code>\u3001<code>busy</code>\u3001<code>interrupted</code> \u548c <code>error</code>\u3002\u6709\u5173\u6bcf\u4e2a\u72b6\u6001\u7684\u4fe1\u606f,\u8bf7\u53c2\u9605\u8fd9\u91cc\u3002\u4f8b\u5982,\u8981\u67e5\u770b <code>idle</code> \u7ebf\u7a0b:</p> PythonJavascriptCURL <pre><code>print(await client.threads.search(status=\"idle\",limit=1))\n</code></pre> <pre><code>console.log(await client.threads.search({ status: \"idle\", limit: 1 }));\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/search \\\n--header 'Content-Type: application/json' \\\n--data '{\"status\": \"idle\", \"limit\": 1}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>[\n  {\n    'thread_id': 'cacf79bb-4248-4d01-aabc-938dbd60ed2c',\n    'created_at': '2024-08-14T17:36:38.921660+00:00',\n    'updated_at': '2024-08-14T17:36:38.921660+00:00',\n    'metadata': {'graph_id': 'agent'},\n    'status': 'idle',\n    'config': {'configurable': {}}\n  }\n]\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_8","title":"\u6309\u5143\u6570\u636e\u8fc7\u6ee4","text":"<p><code>search</code> \u65b9\u6cd5\u5141\u8bb8\u4f60\u6309\u5143\u6570\u636e\u8fc7\u6ee4:</p> PythonJavascriptCURL <pre><code>print((await client.threads.search(metadata={\"graph_id\":\"agent\"},limit=1)))\n</code></pre> <pre><code>console.log((await client.threads.search({ metadata: { \"graph_id\": \"agent\" }, limit: 1 })));\n</code></pre> <pre><code>curl --request POST \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/search \\\n--header 'Content-Type: application/json' \\\n--data '{\"metadata\": {\"graph_id\":\"agent\"}, \"limit\": 1}'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>[\n  {\n    'thread_id': 'cacf79bb-4248-4d01-aabc-938dbd60ed2c',\n    'created_at': '2024-08-14T17:36:38.921660+00:00',\n    'updated_at': '2024-08-14T17:36:38.921660+00:00',\n    'metadata': {'graph_id': 'agent'},\n    'status': 'idle',\n    'config': {'configurable': {}}\n  }\n]\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_9","title":"\u6392\u5e8f","text":"<p>SDK \u8fd8\u652f\u6301\u4f7f\u7528 <code>sort_by</code> \u548c <code>sort_order</code> \u53c2\u6570\u6309 <code>thread_id</code>\u3001<code>status</code>\u3001<code>created_at</code> \u548c <code>updated_at</code> \u5bf9\u7ebf\u7a0b\u8fdb\u884c\u6392\u5e8f\u3002</p>"},{"location":"cloud/how-tos/use_threads/#langgraph-platform-ui","title":"LangGraph Platform UI","text":"<p>\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7 LangGraph Platform UI \u67e5\u770b\u90e8\u7f72\u4e2d\u7684\u7ebf\u7a0b\u3002</p> <p>\u5728\u4f60\u7684\u90e8\u7f72\u4e2d,\u9009\u62e9\"Threads\"\u9009\u9879\u5361\u3002\u8fd9\u5c06\u52a0\u8f7d\u90e8\u7f72\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u8868\u3002</p> <p>\u8981\u6309\u7ebf\u7a0b\u72b6\u6001\u8fc7\u6ee4,\u8bf7\u5728\u9876\u90e8\u680f\u4e2d\u9009\u62e9\u72b6\u6001\u3002\u8981\u6309\u652f\u6301\u7684\u5c5e\u6027\u6392\u5e8f,\u8bf7\u70b9\u51fb\u6240\u9700\u5217\u7684\u7bad\u5934\u56fe\u6807\u3002</p>"},{"location":"cloud/how-tos/use_threads/#_10","title":"\u68c0\u67e5\u7ebf\u7a0b","text":""},{"location":"cloud/how-tos/use_threads/#langgraph-sdk_1","title":"LangGraph SDK","text":""},{"location":"cloud/how-tos/use_threads/#_11","title":"\u83b7\u53d6\u7ebf\u7a0b","text":"<p>\u8981\u67e5\u770b\u7ed9\u5b9a <code>thread_id</code> \u7684\u7279\u5b9a\u7ebf\u7a0b,\u8bf7\u4f7f\u7528 <code>get</code> \u65b9\u6cd5:</p> PythonJavascriptCURL <pre><code>print((await client.threads.get(&lt;THREAD_ID&gt;)))\n</code></pre> <pre><code>console.log((await client.threads.get(&lt;THREAD_ID&gt;)));\n</code></pre> <pre><code>curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt; \\\n--header 'Content-Type: application/json'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n  'thread_id': 'cacf79bb-4248-4d01-aabc-938dbd60ed2c',\n  'created_at': '2024-08-14T17:36:38.921660+00:00',\n  'updated_at': '2024-08-14T17:36:38.921660+00:00',\n  'metadata': {'graph_id': 'agent'},\n  'status': 'idle',\n  'config': {'configurable': {}}\n}\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_12","title":"\u68c0\u67e5\u7ebf\u7a0b\u72b6\u6001","text":"<p>\u8981\u67e5\u770b\u7ed9\u5b9a\u7ebf\u7a0b\u7684\u5f53\u524d\u72b6\u6001,\u8bf7\u4f7f\u7528 <code>get_state</code> \u65b9\u6cd5:</p> PythonJavascriptCURL <pre><code>print((await client.threads.get_state(&lt;THREAD_ID&gt;)))\n</code></pre> <pre><code>console.log((await client.threads.getState(&lt;THREAD_ID&gt;)));\n</code></pre> <pre><code>curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state \\\n--header 'Content-Type: application/json'\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>{\n    \"values\": {\n        \"messages\": [\n            {\n                \"content\": \"hello\",\n                \"additional_kwargs\": {},\n                \"response_metadata\": {},\n                \"type\": \"human\",\n                \"name\": null,\n                \"id\": \"8701f3be-959c-4b7c-852f-c2160699b4ab\",\n                \"example\": false\n            },\n            {\n                \"content\": \"Hello! How can I assist you today?\",\n                \"additional_kwargs\": {},\n                \"response_metadata\": {},\n                \"type\": \"ai\",\n                \"name\": null,\n                \"id\": \"4d8ea561-7ca1-409a-99f7-6b67af3e1aa3\",\n                \"example\": false,\n                \"tool_calls\": [],\n                \"invalid_tool_calls\": [],\n                \"usage_metadata\": null\n            }\n        ]\n    },\n    \"next\": [],\n    \"tasks\": [],\n    \"metadata\": {\n        \"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n        \"checkpoint_id\": \"1f02f46f-7308-616c-8000-1b158a9a6955\",\n        \"graph_id\": \"agent_with_quite_a_long_name\",\n        \"source\": \"update\",\n        \"step\": 1,\n        \"writes\": {\n            \"call_model\": {\n                \"messages\": [\n                    {\n                        \"content\": \"Hello! How can I assist you today?\",\n                        \"type\": \"ai\"\n                    }\n                ]\n            }\n        },\n        \"parents\": {}\n    },\n    \"created_at\": \"2025-05-12T15:37:09.008055+00:00\",\n    \"checkpoint\": {\n        \"checkpoint_id\": \"1f02f46f-733f-6b58-8001-ea90dcabb1bd\",\n        \"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n        \"checkpoint_ns\": \"\"\n    },\n    \"parent_checkpoint\": {\n        \"checkpoint_id\": \"1f02f46f-7308-616c-8000-1b158a9a6955\",\n        \"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n        \"checkpoint_ns\": \"\"\n    },\n    \"checkpoint_id\": \"1f02f46f-733f-6b58-8001-ea90dcabb1bd\",\n    \"parent_checkpoint_id\": \"1f02f46f-7308-616c-8000-1b158a9a6955\"\n}\n</code></pre> <p>\u6216\u8005,\u8981\u67e5\u770b\u7ed9\u5b9a\u68c0\u67e5\u70b9\u7684\u7ebf\u7a0b\u72b6\u6001,\u53ea\u9700\u4f20\u5165\u68c0\u67e5\u70b9 ID(\u6216\u6574\u4e2a\u68c0\u67e5\u70b9\u5bf9\u8c61):</p> PythonJavascriptCURL <pre><code>thread_state = await client.threads.get_state(\n  thread_id=&lt;THREAD_ID&gt;\n  checkpoint_id=&lt;CHECKPOINT_ID&gt;\n)\n</code></pre> <pre><code>const threadState = await client.threads.getState(&lt;THREAD_ID&gt;, &lt;CHECKPOINT_ID&gt;);\n</code></pre> <pre><code>curl --request GET \\\n--url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/state/&lt;CHECKPOINT_ID&gt; \\\n--header 'Content-Type: application/json'\n</code></pre>"},{"location":"cloud/how-tos/use_threads/#_13","title":"\u68c0\u67e5\u5b8c\u6574\u7ebf\u7a0b\u5386\u53f2","text":"<p>\u8981\u67e5\u770b\u7ebf\u7a0b\u7684\u5386\u53f2\u8bb0\u5f55,\u8bf7\u4f7f\u7528 <code>get_history</code> \u65b9\u6cd5\u3002\u8fd9\u5c06\u8fd4\u56de\u7ebf\u7a0b\u7ecf\u5386\u7684\u6bcf\u4e2a\u72b6\u6001\u7684\u5217\u8868\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS \u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"cloud/how-tos/use_threads/#langgraph-platform-ui_1","title":"LangGraph Platform UI","text":"<p>\u4f60\u8fd8\u53ef\u4ee5\u901a\u8fc7 LangGraph Platform UI \u67e5\u770b\u90e8\u7f72\u4e2d\u7684\u7ebf\u7a0b\u3002</p> <p>\u5728\u4f60\u7684\u90e8\u7f72\u4e2d,\u9009\u62e9\"Threads\"\u9009\u9879\u5361\u3002\u8fd9\u5c06\u52a0\u8f7d\u90e8\u7f72\u4e2d\u6240\u6709\u7ebf\u7a0b\u7684\u8868\u3002</p> <p>\u9009\u62e9\u4e00\u4e2a\u7ebf\u7a0b\u4ee5\u68c0\u67e5\u5176\u5f53\u524d\u72b6\u6001\u3002\u8981\u67e5\u770b\u5176\u5b8c\u6574\u5386\u53f2\u8bb0\u5f55\u5e76\u8fdb\u884c\u8fdb\u4e00\u6b65\u8c03\u8bd5,\u8bf7\u5728 LangGraph Studio \u4e2d\u6253\u5f00\u7ebf\u7a0b\u3002</p>"},{"location":"cloud/how-tos/webhooks/","title":"\u4f7f\u7528 webhooks","text":"<p>\u5728\u4f7f\u7528 LangGraph Platform \u65f6,\u4f60\u53ef\u80fd\u5e0c\u671b\u4f7f\u7528 webhooks \u5728 API \u8c03\u7528\u5b8c\u6210\u540e\u63a5\u6536\u66f4\u65b0\u3002Webhooks \u5bf9\u4e8e\u5728\u8fd0\u884c\u5b8c\u6210\u5904\u7406\u540e\u89e6\u53d1\u670d\u52a1\u4e2d\u7684\u64cd\u4f5c\u5f88\u6709\u7528\u3002\u8981\u5b9e\u73b0\u8fd9\u4e00\u70b9,\u4f60\u9700\u8981\u516c\u5f00\u4e00\u4e2a\u53ef\u4ee5\u63a5\u53d7 <code>POST</code> \u8bf7\u6c42\u7684\u7aef\u70b9,\u5e76\u5728 API \u8bf7\u6c42\u4e2d\u5c06\u6b64\u7aef\u70b9\u4f5c\u4e3a <code>webhook</code> \u53c2\u6570\u4f20\u9012\u3002</p> <p>\u76ee\u524d,SDK \u4e0d\u63d0\u4f9b\u5b9a\u4e49 webhook \u7aef\u70b9\u7684\u5185\u7f6e\u652f\u6301,\u4f46\u4f60\u53ef\u4ee5\u4f7f\u7528 API \u8bf7\u6c42\u624b\u52a8\u6307\u5b9a\u5b83\u4eec\u3002</p>"},{"location":"cloud/how-tos/webhooks/#_1","title":"\u652f\u6301\u7684\u7aef\u70b9","text":"<p>\u4ee5\u4e0b API \u7aef\u70b9\u63a5\u53d7 <code>webhook</code> \u53c2\u6570:</p> \u64cd\u4f5c HTTP \u65b9\u6cd5 \u7aef\u70b9 \u521b\u5efa\u8fd0\u884c <code>POST</code> <code>/thread/{thread_id}/runs</code> \u521b\u5efa\u7ebf\u7a0b\u5b9a\u65f6\u4efb\u52a1 <code>POST</code> <code>/thread/{thread_id}/runs/crons</code> \u6d41\u5f0f\u8fd0\u884c <code>POST</code> <code>/thread/{thread_id}/runs/stream</code> \u7b49\u5f85\u8fd0\u884c <code>POST</code> <code>/thread/{thread_id}/runs/wait</code> \u521b\u5efa\u5b9a\u65f6\u4efb\u52a1 <code>POST</code> <code>/runs/crons</code> \u65e0\u72b6\u6001\u6d41\u5f0f\u8fd0\u884c <code>POST</code> <code>/runs/stream</code> \u65e0\u72b6\u6001\u7b49\u5f85\u8fd0\u884c <code>POST</code> <code>/runs/wait</code> <p>\u5728\u672c\u6307\u5357\u4e2d,\u6211\u4eec\u5c06\u5c55\u793a\u5982\u4f55\u5728\u6d41\u5f0f\u8fd0\u884c\u540e\u89e6\u53d1 webhook\u3002</p>"},{"location":"cloud/how-tos/webhooks/#_2","title":"\u8bbe\u7f6e\u4f60\u7684\u52a9\u624b\u548c\u7ebf\u7a0b","text":"<p>\u5728\u8fdb\u884c API \u8c03\u7528\u4e4b\u524d,\u8bf7\u8bbe\u7f6e\u4f60\u7684\u52a9\u624b\u548c\u7ebf\u7a0b\u3002</p> PythonJavaScriptCURL <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=&lt;DEPLOYMENT_URL&gt;)\nassistant_id = \"agent\"\nthread = await client.threads.create()\nprint(thread)\n</code></pre> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst client = new Client({ apiUrl: &lt;DEPLOYMENT_URL&gt; });\nconst assistantID = \"agent\";\nconst thread = await client.threads.create();\nconsole.log(thread);\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/assistants/search \\\n    --header 'Content-Type: application/json' \\\n    --data '{ \"limit\": 10, \"offset\": 0 }' | jq -c 'map(select(.config == null or .config == {})) | .[0]' &amp;&amp; \\\ncurl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads \\\n    --header 'Content-Type: application/json' \\\n    --data '{}'\n</code></pre> <p>\u793a\u4f8b\u54cd\u5e94:</p> <pre><code>{\n    \"thread_id\": \"9dde5490-2b67-47c8-aa14-4bfec88af217\",\n    \"created_at\": \"2024-08-30T23:07:38.242730+00:00\",\n    \"updated_at\": \"2024-08-30T23:07:38.242730+00:00\",\n    \"metadata\": {},\n    \"status\": \"idle\",\n    \"config\": {},\n    \"values\": null\n}\n</code></pre>"},{"location":"cloud/how-tos/webhooks/#webhook","title":"\u5728\u56fe\u8fd0\u884c\u4e2d\u4f7f\u7528 webhook","text":"<p>\u8981\u4f7f\u7528 webhook,\u8bf7\u5728 API \u8bf7\u6c42\u4e2d\u6307\u5b9a <code>webhook</code> \u53c2\u6570\u3002\u5f53\u8fd0\u884c\u5b8c\u6210\u65f6,LangGraph Platform \u4f1a\u5411\u6307\u5b9a\u7684 webhook URL \u53d1\u9001 <code>POST</code> \u8bf7\u6c42\u3002</p> <p>\u4f8b\u5982,\u5982\u679c\u4f60\u7684\u670d\u52a1\u5668\u5728 <code>https://my-server.app/my-webhook-endpoint</code> \u76d1\u542c webhook \u4e8b\u4ef6,\u8bf7\u5728\u8bf7\u6c42\u4e2d\u5305\u542b\u6b64\u4fe1\u606f:</p> PythonJavaScriptCURL <pre><code>input = { \"messages\": [{ \"role\": \"user\", \"content\": \"Hello!\" }] }\n\nasync for chunk in client.runs.stream(\n    thread_id=thread[\"thread_id\"],\n    assistant_id=assistant_id,\n    input=input,\n    stream_mode=\"events\",\n    webhook=\"https://my-server.app/my-webhook-endpoint\"\n):\n    pass\n</code></pre> <pre><code>const input = { messages: [{ role: \"human\", content: \"Hello!\" }] };\n\nconst streamResponse = client.runs.stream(\n  thread[\"thread_id\"],\n  assistantID,\n  {\n    input: input,\n    webhook: \"https://my-server.app/my-webhook-endpoint\"\n  }\n);\n\nfor await (const chunk of streamResponse) {\n  // Handle stream output\n}\n</code></pre> <pre><code>curl --request POST \\\n    --url &lt;DEPLOYMENT_URL&gt;/threads/&lt;THREAD_ID&gt;/runs/stream \\\n    --header 'Content-Type: application/json' \\\n    --data '{\n        \"assistant_id\": &lt;ASSISTANT_ID&gt;,\n        \"input\": {\"messages\": [{\"role\": \"user\", \"content\": \"Hello!\"}]},\n        \"webhook\": \"https://my-server.app/my-webhook-endpoint\"\n    }'\n</code></pre>"},{"location":"cloud/how-tos/webhooks/#webhook_1","title":"Webhook \u8d1f\u8f7d","text":"<p>LangGraph Platform \u4ee5\u8fd0\u884c\u7684\u683c\u5f0f\u53d1\u9001 webhook \u901a\u77e5\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 API \u53c2\u8003\u3002\u8bf7\u6c42\u8d1f\u8f7d\u5728 <code>kwargs</code> \u5b57\u6bb5\u4e2d\u5305\u542b\u8fd0\u884c\u8f93\u5165\u3001\u914d\u7f6e\u548c\u5176\u4ed6\u5143\u6570\u636e\u3002</p>"},{"location":"cloud/how-tos/webhooks/#webhooks_1","title":"\u5b89\u5168\u7684 webhooks","text":"<p>\u4e3a\u786e\u4fdd\u53ea\u6709\u6388\u6743\u8bf7\u6c42\u5230\u8fbe\u4f60\u7684 webhook \u7aef\u70b9,\u8bf7\u8003\u8651\u5c06\u5b89\u5168\u4ee4\u724c\u6dfb\u52a0\u4e3a\u67e5\u8be2\u53c2\u6570:</p> <pre><code>https://my-server.app/my-webhook-endpoint?token=YOUR_SECRET_TOKEN\n</code></pre> <p>\u4f60\u7684\u670d\u52a1\u5668\u5e94\u5728\u5904\u7406\u8bf7\u6c42\u4e4b\u524d\u63d0\u53d6\u5e76\u9a8c\u8bc1\u6b64\u4ee4\u724c\u3002</p>"},{"location":"cloud/how-tos/webhooks/#webhooks_2","title":"\u7981\u7528 webhooks","text":"<p>\u4ece <code>langgraph-api&gt;=0.2.78</code> \u5f00\u59cb,\u5f00\u53d1\u4eba\u5458\u53ef\u4ee5\u5728 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u7981\u7528 webhooks:</p> <pre><code>{\n  \"http\": {\n    \"disable_webhooks\": true\n  }\n}\n</code></pre> <p>\u6b64\u529f\u80fd\u4e3b\u8981\u7528\u4e8e\u81ea\u6258\u7ba1\u90e8\u7f72,\u5e73\u53f0\u7ba1\u7406\u5458\u6216\u5f00\u53d1\u4eba\u5458\u53ef\u80fd\u66f4\u559c\u6b22\u7981\u7528 webhooks \u4ee5\u7b80\u5316\u5176\u5b89\u5168\u6001\u52bf\u2014\u2014\u7279\u522b\u662f\u5982\u679c\u4ed6\u4eec\u4e0d\u914d\u7f6e\u9632\u706b\u5899\u89c4\u5219\u6216\u5176\u4ed6\u7f51\u7edc\u63a7\u5236\u3002\u7981\u7528 webhooks \u6709\u52a9\u4e8e\u9632\u6b62\u4e0d\u53d7\u4fe1\u4efb\u7684\u6709\u6548\u8d1f\u8f7d\u53d1\u9001\u5230\u5185\u90e8\u7aef\u70b9\u3002</p> <p>\u6709\u5173\u5b8c\u6574\u7684\u914d\u7f6e\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u914d\u7f6e\u6587\u4ef6\u53c2\u8003\u3002</p>"},{"location":"cloud/how-tos/webhooks/#webhooks_3","title":"\u6d4b\u8bd5 webhooks","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u5728\u7ebf\u670d\u52a1\u6d4b\u8bd5\u4f60\u7684 webhook:</p> <ul> <li>Beeceptor \u2013 \u5feb\u901f\u521b\u5efa\u6d4b\u8bd5\u7aef\u70b9\u5e76\u68c0\u67e5\u4f20\u5165\u7684 webhook \u8d1f\u8f7d\u3002</li> <li>Webhook.site \u2013 \u5b9e\u65f6\u67e5\u770b\u3001\u8c03\u8bd5\u548c\u8bb0\u5f55\u4f20\u5165\u7684 webhook \u8bf7\u6c42\u3002</li> </ul> <p>\u8fd9\u4e9b\u5de5\u5177\u53ef\u5e2e\u52a9\u4f60\u9a8c\u8bc1 LangGraph Platform \u662f\u5426\u6b63\u786e\u89e6\u53d1\u5e76\u5411\u4f60\u7684\u670d\u52a1\u53d1\u9001 webhooks\u3002</p>"},{"location":"cloud/how-tos/studio/manage_assistants/","title":"\u7ba1\u7406\u52a9\u624b","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>\u52a9\u624b\u6982\u8ff0</li> </ul> <p>LangGraph Studio \u5141\u8bb8\u4f60\u67e5\u770b\u3001\u7f16\u8f91\u548c\u66f4\u65b0\u52a9\u624b,\u5e76\u5141\u8bb8\u4f60\u4f7f\u7528\u8fd9\u4e9b\u52a9\u624b\u914d\u7f6e\u8fd0\u884c\u56fe\u3002</p>"},{"location":"cloud/how-tos/studio/manage_assistants/#_2","title":"\u56fe\u6a21\u5f0f","text":"<p>\u8981\u67e5\u770b\u52a9\u624b,\u8bf7\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\"Manage Assistants\"\u6309\u94ae\u3002</p> <p>\u8fd9\u5c06\u6253\u5f00\u4e00\u4e2a\u6a21\u6001\u6846,\u4f9b\u4f60\u67e5\u770b\u6240\u9009\u56fe\u7684\u6240\u6709\u52a9\u624b\u3002\u6307\u5b9a\u8981\u6807\u8bb0\u4e3a\"Active\"\u7684\u52a9\u624b\u53ca\u5176\u7248\u672c,\u63d0\u4ea4\u8fd0\u884c\u65f6\u5c06\u4f7f\u7528\u6b64\u52a9\u624b\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\"Default configuration\"\u9009\u9879\u5c06\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u3002\u6b64\u9009\u9879\u53cd\u6620\u56fe\u4e2d\u5b9a\u4e49\u7684\u9ed8\u8ba4\u914d\u7f6e\u3002\u5bf9\u6b64\u914d\u7f6e\u6240\u505a\u7684\u7f16\u8f91\u5c06\u7528\u4e8e\u66f4\u65b0\u8fd0\u884c\u65f6\u914d\u7f6e,\u4f46\u4e0d\u4f1a\u66f4\u65b0\u6216\u521b\u5efa\u65b0\u52a9\u624b,\u9664\u975e\u4f60\u70b9\u51fb\"Create new assistant\"\u3002</p>"},{"location":"cloud/how-tos/studio/manage_assistants/#_3","title":"\u804a\u5929\u6a21\u5f0f","text":"<p>\u804a\u5929\u6a21\u5f0f\u4f7f\u4f60\u80fd\u591f\u901a\u8fc7\u9875\u9762\u9876\u90e8\u7684\u4e0b\u62c9\u9009\u62e9\u5668\u5728\u56fe\u4e2d\u7684\u4e0d\u540c\u52a9\u624b\u4e4b\u95f4\u5207\u6362\u3002\u8981\u521b\u5efa\u3001\u7f16\u8f91\u6216\u5220\u9664\u52a9\u624b,\u8bf7\u4f7f\u7528\u56fe\u6a21\u5f0f\u3002</p>"},{"location":"cloud/how-tos/studio/quick_start/","title":"Quick start","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>LangGraph Studio \u6982\u8ff0</li> </ul> <p>LangGraph Studio \u652f\u6301\u8fde\u63a5\u5230\u4e24\u79cd\u7c7b\u578b\u7684\u56fe:</p> <ul> <li>\u90e8\u7f72\u5728 LangGraph Platform \u4e0a\u7684\u56fe</li> <li>\u901a\u8fc7 LangGraph Server \u5728\u672c\u5730\u8fd0\u884c\u7684\u56fe\u3002</li> </ul> <p>LangGraph Studio \u4ece LangSmith UI \u7684 LangGraph Platform Deployments \u9009\u9879\u5361\u4e2d\u8bbf\u95ee\u3002</p>"},{"location":"cloud/how-tos/studio/quick_start/#_1","title":"\u5df2\u90e8\u7f72\u7684\u5e94\u7528\u7a0b\u5e8f","text":"<p>\u5bf9\u4e8e\u90e8\u7f72\u5728 LangGraph Platform \u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f,\u4f60\u53ef\u4ee5\u8bbf\u95ee Studio \u4f5c\u4e3a\u8be5\u90e8\u7f72\u7684\u4e00\u90e8\u5206\u3002\u4e3a\u6b64,\u8bf7\u5728 LangSmith UI \u4e2d\u5bfc\u822a\u5230 LangGraph Platform \u4e2d\u7684\u90e8\u7f72,\u7136\u540e\u70b9\u51fb\"LangGraph Studio\"\u6309\u94ae\u3002</p> <p>\u8fd9\u5c06\u52a0\u8f7d\u8fde\u63a5\u5230\u5b9e\u65f6\u90e8\u7f72\u7684 Studio UI,\u5141\u8bb8\u4f60\u521b\u5efa\u3001\u8bfb\u53d6\u548c\u66f4\u65b0\u8be5\u90e8\u7f72\u4e2d\u7684\u7ebf\u7a0b\u3001\u52a9\u624b\u548c\u5185\u5b58\u3002</p>"},{"location":"cloud/how-tos/studio/quick_start/#_2","title":"\u672c\u5730\u5f00\u53d1\u670d\u52a1\u5668","text":"<p>\u8981\u4f7f\u7528 LangGraph Studio \u6d4b\u8bd5\u672c\u5730\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f,\u8bf7\u786e\u4fdd\u6309\u7167\u672c\u6307\u5357\u8bbe\u7f6e\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>LangSmith \u8ddf\u8e2a</p> <p>\u5bf9\u4e8e\u672c\u5730\u5f00\u53d1,\u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u5c06\u6570\u636e\u8ddf\u8e2a\u5230 LangSmith,\u8bf7\u5728\u5e94\u7528\u7a0b\u5e8f\u7684 <code>.env</code> \u6587\u4ef6\u4e2d\u8bbe\u7f6e <code>LANGSMITH_TRACING=false</code>\u3002\u7981\u7528\u8ddf\u8e2a\u540e,\u6570\u636e\u4e0d\u4f1a\u79bb\u5f00\u672c\u5730\u670d\u52a1\u5668\u3002</p> <p>\u63a5\u4e0b\u6765,\u5b89\u88c5 LangGraph CLI:</p> <pre><code>pip install -U \"langgraph-cli[inmem]\"\n</code></pre> <p>\u7136\u540e\u8fd0\u884c:</p> <pre><code>langgraph dev\n</code></pre> <p>\u6d4f\u89c8\u5668\u517c\u5bb9\u6027</p> <p>Safari \u4f1a\u963b\u6b62\u5230 Studio \u7684 <code>localhost</code> \u8fde\u63a5\u3002\u8981\u89e3\u51b3\u6b64\u95ee\u9898,\u8bf7\u4f7f\u7528 <code>--tunnel</code> \u8fd0\u884c\u4e0a\u8ff0\u547d\u4ee4,\u4ee5\u901a\u8fc7\u5b89\u5168\u96a7\u9053\u8bbf\u95ee Studio\u3002</p> <p>\u8fd9\u5c06\u5728\u672c\u5730\u542f\u52a8 LangGraph Server,\u5728\u5185\u5b58\u4e2d\u8fd0\u884c\u3002\u670d\u52a1\u5668\u5c06\u5728\u76d1\u89c6\u6a21\u5f0f\u4e0b\u8fd0\u884c,\u76d1\u542c\u4ee3\u7801\u66f4\u6539\u5e76\u81ea\u52a8\u91cd\u542f\u3002\u9605\u8bfb\u6b64\u53c2\u8003\u6587\u6863\u4ee5\u4e86\u89e3\u542f\u52a8 API \u670d\u52a1\u5668\u7684\u6240\u6709\u9009\u9879\u3002</p> <p>\u5982\u679c\u6210\u529f,\u4f60\u5c06\u770b\u5230\u4ee5\u4e0b\u65e5\u5fd7:</p> <p>Ready!</p> <ul> <li> <p>API: http://localhost:2024</p> </li> <li> <p>Docs: http://localhost:2024/docs</p> </li> <li> <p>LangGraph Studio Web UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024</p> </li> </ul> <p>\u8fd0\u884c\u540e,\u4f60\u5c06\u81ea\u52a8\u88ab\u5f15\u5bfc\u5230 LangGraph Studio\u3002</p> <p>\u5bf9\u4e8e\u5df2\u7ecf\u8fd0\u884c\u7684\u670d\u52a1\u5668,\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8bbf\u95ee Studio:</p> <ol> <li>\u76f4\u63a5\u5bfc\u822a\u5230\u4ee5\u4e0b URL:<code>https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024</code>\u3002</li> <li>\u5728 LangSmith \u4e2d,\u5bfc\u822a\u5230 LangGraph Platform Deployments \u9009\u9879\u5361,\u70b9\u51fb\"LangGraph Studio\"\u6309\u94ae,\u8f93\u5165 <code>http://127.0.0.1:2024</code> \u5e76\u70b9\u51fb\"Connect\"\u3002</li> </ol> <p>\u5982\u679c\u5728\u4e0d\u540c\u7684\u4e3b\u673a\u6216\u7aef\u53e3\u4e0a\u8fd0\u884c\u670d\u52a1\u5668,\u53ea\u9700\u66f4\u65b0 <code>baseUrl</code> \u4ee5\u5339\u914d\u3002</p>"},{"location":"cloud/how-tos/studio/quick_start/#_3","title":"(\u53ef\u9009)\u9644\u52a0\u8c03\u8bd5\u5668","text":"<p>\u5bf9\u4e8e\u5e26\u65ad\u70b9\u548c\u53d8\u91cf\u68c0\u67e5\u7684\u5206\u6b65\u8c03\u8bd5:</p> <pre><code># Install debugpy package\npip install debugpy\n\n# Start server with debugging enabled\nlanggraph dev --debug-port 5678\n</code></pre> <p>\u7136\u540e\u9644\u52a0\u4f60\u9996\u9009\u7684\u8c03\u8bd5\u5668:</p> VS CodePyCharm <p>\u5c06\u6b64\u914d\u7f6e\u6dfb\u52a0\u5230 <code>launch.json</code>:</p> <pre><code>{\n    \"name\": \"Attach to LangGraph\",\n    \"type\": \"debugpy\",\n    \"request\": \"attach\",\n    \"connect\": {\n      \"host\": \"0.0.0.0\",\n      \"port\": 5678\n    }\n}\n</code></pre> <ol> <li>\u8f6c\u5230 Run \u2192 Edit Configurations</li> <li>\u70b9\u51fb + \u5e76\u9009\u62e9 \"Python Debug Server\"</li> <li>\u8bbe\u7f6e IDE host name: <code>localhost</code></li> <li>\u8bbe\u7f6e port: <code>5678</code> (\u6216\u4f60\u5728\u4e0a\u4e00\u6b65\u4e2d\u9009\u62e9\u7684\u7aef\u53e3\u53f7)</li> <li>\u70b9\u51fb \"OK\" \u5e76\u5f00\u59cb\u8c03\u8bd5</li> </ol>"},{"location":"cloud/how-tos/studio/quick_start/#_4","title":"\u6545\u969c\u6392\u9664","text":"<p>\u6709\u5173\u5165\u95e8\u95ee\u9898,\u8bf7\u53c2\u9605\u6b64\u6545\u969c\u6392\u9664\u6307\u5357\u3002</p>"},{"location":"cloud/how-tos/studio/quick_start/#_5","title":"\u4e0b\u4e00\u6b65","text":"<p>\u6709\u5173\u5982\u4f55\u4f7f\u7528 Studio \u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u4ee5\u4e0b\u6307\u5357:</p> <ul> <li>\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f</li> <li>\u7ba1\u7406\u52a9\u624b</li> <li>\u7ba1\u7406\u7ebf\u7a0b</li> <li>\u8fed\u4ee3\u63d0\u793a</li> <li>\u8c03\u8bd5 LangSmith \u8f68\u8ff9</li> <li>\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u6570\u636e\u96c6</li> </ul>"},{"location":"cloud/how-tos/studio/run_evals/","title":"\u5728\u6570\u636e\u96c6\u4e0a\u8fd0\u884c\u5b9e\u9a8c","text":"<p>LangGraph Studio \u652f\u6301\u8bc4\u4f30,\u5141\u8bb8\u4f60\u5728\u9884\u5b9a\u4e49\u7684 LangSmith \u6570\u636e\u96c6\u4e0a\u8fd0\u884c\u52a9\u624b\u3002\u8fd9\u4f7f\u4f60\u80fd\u591f\u4e86\u89e3\u5e94\u7528\u7a0b\u5e8f\u5728\u5404\u79cd\u8f93\u5165\u4e0a\u7684\u6027\u80fd,\u5c06\u7ed3\u679c\u4e0e\u53c2\u8003\u8f93\u51fa\u8fdb\u884c\u6bd4\u8f83,\u5e76\u4f7f\u7528\u8bc4\u4f30\u5668\u5bf9\u7ed3\u679c\u8fdb\u884c\u8bc4\u5206\u3002</p> <p>\u672c\u6307\u5357\u5411\u4f60\u5c55\u793a\u5982\u4f55\u4ece Studio \u7aef\u5230\u7aef\u8fd0\u884c\u5b9e\u9a8c\u3002</p>"},{"location":"cloud/how-tos/studio/run_evals/#_2","title":"\u5148\u51b3\u6761\u4ef6","text":"<p>\u5728\u8fd0\u884c\u5b9e\u9a8c\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u5177\u5907\u4ee5\u4e0b\u6761\u4ef6:</p> <ol> <li> <p>LangSmith \u6570\u636e\u96c6:\u4f60\u7684\u6570\u636e\u96c6\u5e94\u5305\u542b\u8981\u6d4b\u8bd5\u7684\u8f93\u5165,\u4ee5\u53ca\u53ef\u9009\u7684\u7528\u4e8e\u6bd4\u8f83\u7684\u53c2\u8003\u8f93\u51fa\u3002</p> <ul> <li>\u8f93\u5165\u7684\u67b6\u6784\u5fc5\u987b\u4e0e\u52a9\u624b\u6240\u9700\u7684\u8f93\u5165\u67b6\u6784\u5339\u914d\u3002\u6709\u5173\u67b6\u6784\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6b64\u5904\u3002</li> <li>\u6709\u5173\u521b\u5efa\u6570\u636e\u96c6\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u5982\u4f55\u7ba1\u7406\u6570\u636e\u96c6\u3002</li> </ul> </li> <li> <p>(\u53ef\u9009)\u8bc4\u4f30\u5668:\u4f60\u53ef\u4ee5\u5728 LangSmith \u4e2d\u5c06\u8bc4\u4f30\u5668(\u4f8b\u5982,LLM-as-a-Judge\u3001\u542f\u53d1\u5f0f\u6216\u81ea\u5b9a\u4e49\u51fd\u6570)\u9644\u52a0\u5230\u6570\u636e\u96c6\u3002\u8fd9\u4e9b\u5c06\u5728\u56fe\u5904\u7406\u5b8c\u6240\u6709\u8f93\u5165\u540e\u81ea\u52a8\u8fd0\u884c\u3002</p> <ul> <li>\u8981\u4e86\u89e3\u66f4\u591a\u4fe1\u606f,\u8bf7\u9605\u8bfb\u8bc4\u4f30\u6982\u5ff5\u3002</li> </ul> </li> <li> <p>\u6b63\u5728\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f:\u5b9e\u9a8c\u53ef\u4ee5\u9488\u5bf9\u4ee5\u4e0b\u5185\u5bb9\u8fd0\u884c:</p> <ul> <li>\u90e8\u7f72\u5728 LangGraph Platform \u4e0a\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u901a\u8fc7 langgraph-cli \u542f\u52a8\u7684\u672c\u5730\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul> </li> </ol>"},{"location":"cloud/how-tos/studio/run_evals/#_3","title":"\u5206\u6b65\u6307\u5357","text":""},{"location":"cloud/how-tos/studio/run_evals/#1","title":"1. \u542f\u52a8\u5b9e\u9a8c","text":"<p>\u70b9\u51fb Studio \u9875\u9762\u53f3\u4e0a\u89d2\u7684 Run experiment \u6309\u94ae\u3002</p>"},{"location":"cloud/how-tos/studio/run_evals/#2","title":"2. \u9009\u62e9\u6570\u636e\u96c6","text":"<p>\u5728\u51fa\u73b0\u7684\u6a21\u6001\u6846\u4e2d,\u9009\u62e9\u7528\u4e8e\u5b9e\u9a8c\u7684\u6570\u636e\u96c6(\u6216\u7279\u5b9a\u6570\u636e\u96c6\u5206\u5272),\u7136\u540e\u70b9\u51fb Start\u3002</p>"},{"location":"cloud/how-tos/studio/run_evals/#3","title":"3. \u76d1\u63a7\u8fdb\u5ea6","text":"<p>\u6570\u636e\u96c6\u4e2d\u7684\u6240\u6709\u8f93\u5165\u73b0\u5728\u5c06\u9488\u5bf9\u6d3b\u52a8\u52a9\u624b\u8fd0\u884c\u3002\u901a\u8fc7\u53f3\u4e0a\u89d2\u7684\u5fbd\u7ae0\u76d1\u63a7\u5b9e\u9a8c\u7684\u8fdb\u5ea6\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u5b9e\u9a8c\u5728\u540e\u53f0\u8fd0\u884c\u65f6\u7ee7\u7eed\u5728 Studio \u4e2d\u5de5\u4f5c\u3002\u968f\u65f6\u70b9\u51fb\u7bad\u5934\u56fe\u6807\u6309\u94ae\u5bfc\u822a\u5230 LangSmith \u5e76\u67e5\u770b\u8be6\u7ec6\u7684\u5b9e\u9a8c\u7ed3\u679c\u3002</p>"},{"location":"cloud/how-tos/studio/run_evals/#_4","title":"\u6545\u969c\u6392\u9664","text":""},{"location":"cloud/how-tos/studio/run_evals/#run-experiment","title":"\"Run experiment\"\u6309\u94ae\u88ab\u7981\u7528","text":"<p>\u5982\u679c\"Run experiment\"\u6309\u94ae\u88ab\u7981\u7528,\u8bf7\u68c0\u67e5\u4ee5\u4e0b\u5185\u5bb9:</p> <ul> <li>\u5df2\u90e8\u7f72\u7684\u5e94\u7528\u7a0b\u5e8f:\u5982\u679c\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u90e8\u7f72\u5728 LangGraph Platform \u4e0a,\u4f60\u53ef\u80fd\u9700\u8981\u521b\u5efa\u65b0\u4fee\u8ba2\u7248\u672c\u4ee5\u542f\u7528\u6b64\u529f\u80fd\u3002</li> <li>\u672c\u5730\u5f00\u53d1\u670d\u52a1\u5668:\u5982\u679c\u4f60\u5728\u672c\u5730\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f,\u8bf7\u786e\u4fdd\u5df2\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u7684 <code>langgraph-cli</code> (<code>pip install -U langgraph-cli</code>)\u3002\u6b64\u5916,\u901a\u8fc7\u5728\u9879\u76ee\u7684 <code>.env</code> \u6587\u4ef6\u4e2d\u8bbe\u7f6e <code>LANGSMITH_API_KEY</code> \u6765\u786e\u4fdd\u5df2\u542f\u7528\u8ddf\u8e2a\u3002</li> </ul>"},{"location":"cloud/how-tos/studio/run_evals/#_5","title":"\u8bc4\u4f30\u5668\u7ed3\u679c\u7f3a\u5931","text":"<p>\u5f53\u4f60\u8fd0\u884c\u5b9e\u9a8c\u65f6,\u4efb\u4f55\u9644\u52a0\u7684\u8bc4\u4f30\u5668\u90fd\u4f1a\u6392\u961f\u6267\u884c\u3002\u5982\u679c\u4f60\u6ca1\u6709\u7acb\u5373\u770b\u5230\u7ed3\u679c,\u8fd9\u53ef\u80fd\u610f\u5473\u7740\u5b83\u4eec\u4ecd\u5728\u7b49\u5f85\u4e2d\u3002</p>"},{"location":"cloud/reference/cli/","title":"LangGraph CLI","text":"<p>LangGraph \u547d\u4ee4\u884c\u754c\u9762\u5305\u542b\u5728 Docker \u4e2d\u672c\u5730\u6784\u5efa\u548c\u8fd0\u884c LangGraph Platform API \u670d\u52a1\u5668\u7684\u547d\u4ee4\u3002\u5bf9\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5,\u4f60\u53ef\u4ee5\u4f7f\u7528 CLI \u90e8\u7f72\u672c\u5730 API \u670d\u52a1\u5668\u3002</p>"},{"location":"cloud/reference/cli/#_1","title":"\u5b89\u88c5","text":"<ol> <li>\u786e\u4fdd\u5df2\u5b89\u88c5 Docker(\u4f8b\u5982 <code>docker --version</code>)\u3002</li> <li> <p>\u5b89\u88c5 CLI \u5305:</p> PythonJS <pre><code>pip install langgraph-cli\n</code></pre> <pre><code>npx @langchain/langgraph-cli\n\n# \u5168\u5c40\u5b89\u88c5,\u5c06\u53ef\u7528\u4f5c `langgraphjs`\nnpm install -g @langchain/langgraph-cli\n</code></pre> </li> <li> <p>\u8fd0\u884c\u547d\u4ee4 <code>langgraph --help</code> \u6216 <code>npx @langchain/langgraph-cli --help</code> \u4ee5\u786e\u8ba4 CLI \u6b63\u5e38\u5de5\u4f5c\u3002</p> </li> </ol> <p></p>"},{"location":"cloud/reference/cli/#configuration-file","title":"\u914d\u7f6e\u6587\u4ef6","text":"<p>LangGraph CLI \u9700\u8981\u4e00\u4e2a\u9075\u5faa\u6b64\u67b6\u6784\u7684 JSON \u914d\u7f6e\u6587\u4ef6\u3002\u5b83\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027:</p> <p>\u6ce8\u610f</p> <p>         LangGraph CLI \u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6 langgraph.json\u3002     </p> PythonJS \u952e \u63cf\u8ff0 <code>dependencies</code> \u5fc5\u9700\u3002LangGraph Platform API \u670d\u52a1\u5668\u7684\u4f9d\u8d56\u9879\u6570\u7ec4\u3002\u4f9d\u8d56\u9879\u53ef\u4ee5\u662f\u4ee5\u4e0b\u4e4b\u4e00: <ul><li>\u5355\u4e2a\u53e5\u70b9(<code>\".\"</code>)\uff0c\u5c06\u67e5\u627e\u672c\u5730 Python \u5305\u3002</li><li><code>pyproject.toml</code>\u3001<code>setup.py</code> \u6216 <code>requirements.txt</code> \u6240\u5728\u7684\u76ee\u5f55\u8def\u5f84\u3002\u4f8b\u5982,\u5982\u679c <code>requirements.txt</code> \u4f4d\u4e8e\u9879\u76ee\u76ee\u5f55\u7684\u6839\u76ee\u5f55\u4e2d,\u8bf7\u6307\u5b9a <code>\"./\"</code>\u3002\u5982\u679c\u5b83\u4f4d\u4e8e\u540d\u4e3a <code>local_package</code> \u7684\u5b50\u76ee\u5f55\u4e2d,\u8bf7\u6307\u5b9a <code>\"./local_package\"</code>\u3002\u4e0d\u8981\u6307\u5b9a\u5b57\u7b26\u4e32 <code>\"requirements.txt\"</code> \u672c\u8eab\u3002</li><li>Python \u5305\u540d\u79f0\u3002</li></ul> <code>graphs</code> \u5fc5\u9700\u3002\u4ece\u56fe ID \u5230\u5b9a\u4e49\u5df2\u7f16\u8bd1\u56fe\u6216\u751f\u6210\u56fe\u7684\u51fd\u6570\u7684\u8def\u5f84\u7684\u6620\u5c04\u3002\u793a\u4f8b: <ul><li><code>./your_package/your_file.py:variable</code>,\u5176\u4e2d <code>variable</code> \u662f <code>langgraph.graph.state.CompiledStateGraph</code> \u7684\u5b9e\u4f8b</li><li><code>./your_package/your_file.py:make_graph</code>,\u5176\u4e2d <code>make_graph</code> \u662f\u4e00\u4e2a\u63a5\u53d7\u914d\u7f6e\u5b57\u5178(<code>langchain_core.runnables.RunnableConfig</code>)\u5e76\u8fd4\u56de <code>langgraph.graph.state.StateGraph</code> \u6216 <code>langgraph.graph.state.CompiledStateGraph</code> \u5b9e\u4f8b\u7684\u51fd\u6570\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u5982\u4f55\u5728\u8fd0\u884c\u65f6\u91cd\u5efa\u56fe\u3002</li></ul> <code>auth</code> (\u5728 v0.0.11 \u4e2d\u6dfb\u52a0) \u5305\u542b\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u7a0b\u5e8f\u8def\u5f84\u7684\u8eab\u4efd\u9a8c\u8bc1\u914d\u7f6e\u3002\u793a\u4f8b:<code>./your_package/auth.py:auth</code>,\u5176\u4e2d <code>auth</code> \u662f <code>langgraph_sdk.Auth</code> \u7684\u5b9e\u4f8b\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u8eab\u4efd\u9a8c\u8bc1\u6307\u5357\u3002 <code>base_image</code> \u53ef\u9009\u3002\u7528\u4e8e LangGraph API \u670d\u52a1\u5668\u7684\u57fa\u7840\u955c\u50cf\u3002\u9ed8\u8ba4\u4e3a <code>langchain/langgraph-api</code> \u6216 <code>langchain/langgraphjs-api</code>\u3002\u4f7f\u7528\u6b64\u9009\u9879\u5c06\u6784\u5efa\u56fa\u5b9a\u5230 langgraph API \u7684\u7279\u5b9a\u7248\u672c,\u4f8b\u5982 <code>\"langchain/langgraph-server:0.2\"</code>\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 https://hub.docker.com/r/langchain/langgraph-server/tags\u3002(\u5728 <code>langgraph-cli==0.2.8</code> \u4e2d\u6dfb\u52a0) <code>image_distro</code> \u53ef\u9009\u3002\u57fa\u7840\u955c\u50cf\u7684 Linux \u53d1\u884c\u7248\u3002\u5fc5\u987b\u662f <code>\"debian\"</code> \u6216 <code>\"wolfi\"</code>\u3002\u5982\u679c\u7701\u7565,\u9ed8\u8ba4\u4e3a <code>\"debian\"</code>\u3002\u5728 <code>langgraph-cli&gt;=0.2.11</code> \u4e2d\u53ef\u7528\u3002 <code>env</code> <code>.env</code> \u6587\u4ef6\u7684\u8def\u5f84\u6216\u4ece\u73af\u5883\u53d8\u91cf\u5230\u5176\u503c\u7684\u6620\u5c04\u3002 <code>store</code> \u7528\u4e8e\u5411 BaseStore \u6dfb\u52a0\u8bed\u4e49\u641c\u7d22\u548c/\u6216\u751f\u5b58\u65f6\u95f4(TTL)\u7684\u914d\u7f6e\u3002\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5: <ul><li><code>index</code>(\u53ef\u9009):\u8bed\u4e49\u641c\u7d22\u7d22\u5f15\u914d\u7f6e,\u5305\u542b\u5b57\u6bb5 <code>embed</code>\u3001<code>dims</code> \u548c\u53ef\u9009\u7684 <code>fields</code>\u3002</li><li><code>ttl</code>(\u53ef\u9009):\u9879\u76ee\u8fc7\u671f\u914d\u7f6e\u3002\u5305\u542b\u53ef\u9009\u5b57\u6bb5\u7684\u5bf9\u8c61:<code>refresh_on_read</code>(\u5e03\u5c14\u503c,\u9ed8\u8ba4\u4e3a <code>true</code>)\u3001<code>default_ttl</code>(\u6d6e\u70b9\u6570,\u751f\u547d\u5468\u671f\u4ee5**\u5206\u949f**\u4e3a\u5355\u4f4d,\u9ed8\u8ba4\u4e3a\u4e0d\u8fc7\u671f)\u548c <code>sweep_interval_minutes</code>(\u6574\u6570,\u68c0\u67e5\u8fc7\u671f\u9879\u76ee\u7684\u9891\u7387,\u9ed8\u8ba4\u4e3a\u4e0d\u626b\u63cf)\u3002</li></ul> <code>ui</code> \u53ef\u9009\u3002\u667a\u80fd\u4ee3\u7406\u53d1\u51fa\u7684 UI \u7ec4\u4ef6\u7684\u547d\u540d\u5b9a\u4e49,\u6bcf\u4e2a\u90fd\u6307\u5411\u4e00\u4e2a JS/TS \u6587\u4ef6\u3002(\u5728 <code>langgraph-cli==0.1.84</code> \u4e2d\u6dfb\u52a0) <code>python_version</code> <code>3.11</code>\u3001<code>3.12</code> \u6216 <code>3.13</code>\u3002\u9ed8\u8ba4\u4e3a <code>3.11</code>\u3002 <code>node_version</code> \u6307\u5b9a <code>node_version: 20</code> \u4ee5\u4f7f\u7528 LangGraph.js\u3002 <code>pip_config_file</code> <code>pip</code> \u914d\u7f6e\u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>pip_installer</code> (\u5728 v0.3 \u4e2d\u6dfb\u52a0) \u53ef\u9009\u3002Python \u5305\u5b89\u88c5\u7a0b\u5e8f\u9009\u62e9\u5668\u3002\u53ef\u4ee5\u8bbe\u7f6e\u4e3a <code>\"auto\"</code>\u3001<code>\"pip\"</code> \u6216 <code>\"uv\"</code>\u3002\u4ece\u7248\u672c\u00a00.3 \u5f00\u59cb,\u9ed8\u8ba4\u7b56\u7565\u662f\u8fd0\u884c <code>uv pip</code>,\u5b83\u901a\u5e38\u63d0\u4f9b\u66f4\u5feb\u7684\u6784\u5efa,\u540c\u65f6\u4ecd\u7136\u662f\u4e00\u4e2a\u66ff\u4ee3\u54c1\u3002\u5728\u4e0d\u5e38\u89c1\u7684\u60c5\u51b5\u4e0b,\u5982\u679c <code>uv</code> \u65e0\u6cd5\u5904\u7406\u4f60\u7684\u4f9d\u8d56\u5173\u7cfb\u56fe\u6216 <code>pyproject.toml</code> \u7684\u7ed3\u6784,\u8bf7\u5728\u6b64\u5904\u6307\u5b9a <code>\"pip\"</code> \u4ee5\u6062\u590d\u5230\u65e9\u671f\u884c\u4e3a\u3002 <code>keep_pkg_tools</code> (\u5728 v0.3.4 \u4e2d\u6dfb\u52a0) \u53ef\u9009\u3002\u63a7\u5236\u662f\u5426\u5728\u6700\u7ec8\u955c\u50cf\u4e2d\u4fdd\u7559 Python \u6253\u5305\u5de5\u5177(<code>pip</code>\u3001<code>setuptools</code>\u3001<code>wheel</code>)\u3002\u63a5\u53d7\u7684\u503c: <ul><li><code>true</code> : \u4fdd\u7559\u6240\u6709\u4e09\u4e2a\u5de5\u5177(\u8df3\u8fc7\u5378\u8f7d)\u3002</li><li><code>false</code> / \u7701\u7565 : \u5378\u8f7d\u6240\u6709\u4e09\u4e2a\u5de5\u5177(\u9ed8\u8ba4\u884c\u4e3a)\u3002</li><li><code>list[str]</code> : \u8981\u4fdd\u7559\u7684\u5de5\u5177\u540d\u79f0\u3002\u6bcf\u4e2a\u503c\u5fc5\u987b\u662f \"pip\"\u3001\"setuptools\"\u3001\"wheel\" \u4e4b\u4e00\u3002</li></ul>\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b,\u6240\u6709\u4e09\u4e2a\u5de5\u5177\u90fd\u88ab\u5378\u8f7d\u3002 <code>dockerfile_lines</code> \u5728\u4ece\u7236\u955c\u50cf\u5bfc\u5165\u540e\u8981\u6dfb\u52a0\u5230 Dockerfile \u7684\u5176\u4ed6\u884c\u7684\u6570\u7ec4\u3002 <code>checkpointer</code> \u68c0\u67e5\u70b9\u5668\u7684\u914d\u7f6e\u3002\u5305\u542b\u4e00\u4e2a <code>ttl</code> \u5b57\u6bb5,\u8be5\u5b57\u6bb5\u662f\u4e00\u4e2a\u5305\u542b\u4ee5\u4e0b\u952e\u7684\u5bf9\u8c61: <ul><li><code>strategy</code>: \u5982\u4f55\u5904\u7406\u8fc7\u671f\u7684\u68c0\u67e5\u70b9(\u4f8b\u5982 <code>\"delete\"</code>)\u3002</li><li><code>sweep_interval_minutes</code>: \u68c0\u67e5\u8fc7\u671f\u68c0\u67e5\u70b9\u7684\u9891\u7387(\u6574\u6570)\u3002</li><li><code>default_ttl</code>: \u68c0\u67e5\u70b9\u7684\u9ed8\u8ba4\u751f\u5b58\u65f6\u95f4(\u4ee5**\u5206\u949f**\u4e3a\u5355\u4f4d)(\u6574\u6570)\u3002\u5b9a\u4e49\u5728\u5e94\u7528\u6307\u5b9a\u7b56\u7565\u4e4b\u524d\u4fdd\u7559\u68c0\u67e5\u70b9\u7684\u65f6\u95f4\u3002</li></ul> <code>http</code> HTTP \u670d\u52a1\u5668\u914d\u7f6e,\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5: <ul><li><code>app</code>: \u81ea\u5b9a\u4e49 Starlette/FastAPI \u5e94\u7528\u7a0b\u5e8f\u7684\u8def\u5f84(\u4f8b\u5982 <code>\"./src/agent/webapp.py:app\"</code>)\u3002\u8bf7\u53c2\u9605\u81ea\u5b9a\u4e49\u8def\u7531\u6307\u5357\u3002</li><li><code>cors</code>: CORS \u914d\u7f6e,\u5305\u542b <code>allow_origins</code>\u3001<code>allow_methods</code>\u3001<code>allow_headers</code> \u7b49\u5b57\u6bb5\u3002</li><li><code>configurable_headers</code>: \u5b9a\u4e49\u8981\u6392\u9664\u6216\u5305\u542b\u54ea\u4e9b\u8bf7\u6c42\u6807\u5934\u4f5c\u4e3a\u8fd0\u884c\u7684\u53ef\u914d\u7f6e\u503c\u3002</li><li><code>disable_assistants</code>: \u7981\u7528 <code>/assistants</code> \u8def\u7531</li><li><code>disable_mcp</code>: \u7981\u7528 <code>/mcp</code> \u8def\u7531</li><li><code>disable_meta</code>: \u7981\u7528 <code>/ok</code>\u3001<code>/info</code>\u3001<code>/metrics</code> \u548c <code>/docs</code> \u8def\u7531</li><li><code>disable_runs</code>: \u7981\u7528 <code>/runs</code> \u8def\u7531</li><li><code>disable_store</code>: \u7981\u7528 <code>/store</code> \u8def\u7531</li><li><code>disable_threads</code>: \u7981\u7528 <code>/threads</code> \u8def\u7531</li><li><code>disable_ui</code>: \u7981\u7528 <code>/ui</code> \u8def\u7531</li><li><code>disable_webhooks</code>: \u5728\u6240\u6709\u8def\u7531\u4e2d\u7981\u7528\u8fd0\u884c\u5b8c\u6210\u65f6\u7684 webhooks \u8c03\u7528</li><li><code>mount_prefix</code>: \u6302\u8f7d\u8def\u7531\u7684\u524d\u7f00(\u4f8b\u5982 \"/my-deployment/api\")</li></ul> \u952e \u63cf\u8ff0 <code>graphs</code> \u5fc5\u9700\u3002\u4ece\u56fe ID \u5230\u5b9a\u4e49\u5df2\u7f16\u8bd1\u56fe\u6216\u751f\u6210\u56fe\u7684\u51fd\u6570\u7684\u8def\u5f84\u7684\u6620\u5c04\u3002\u793a\u4f8b: <ul><li><code>./src/graph.ts:variable</code>,\u5176\u4e2d <code>variable</code> \u662f <code>CompiledStateGraph</code> \u7684\u5b9e\u4f8b</li><li><code>./src/graph.ts:makeGraph</code>,\u5176\u4e2d <code>makeGraph</code> \u662f\u4e00\u4e2a\u63a5\u53d7\u914d\u7f6e\u5b57\u5178(<code>LangGraphRunnableConfig</code>)\u5e76\u8fd4\u56de <code>StateGraph</code> \u6216 <code>CompiledStateGraph</code> \u5b9e\u4f8b\u7684\u51fd\u6570\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u5982\u4f55\u5728\u8fd0\u884c\u65f6\u91cd\u5efa\u56fe\u3002</li></ul> <code>env</code> <code>.env</code> \u6587\u4ef6\u7684\u8def\u5f84\u6216\u4ece\u73af\u5883\u53d8\u91cf\u5230\u5176\u503c\u7684\u6620\u5c04\u3002 <code>store</code> \u7528\u4e8e\u5411 BaseStore \u6dfb\u52a0\u8bed\u4e49\u641c\u7d22\u548c/\u6216\u751f\u5b58\u65f6\u95f4(TTL)\u7684\u914d\u7f6e\u3002\u5305\u542b\u4ee5\u4e0b\u5b57\u6bb5: <ul><li><code>index</code>(\u53ef\u9009):\u8bed\u4e49\u641c\u7d22\u7d22\u5f15\u914d\u7f6e,\u5305\u542b\u5b57\u6bb5 <code>embed</code>\u3001<code>dims</code> \u548c\u53ef\u9009\u7684 <code>fields</code>\u3002</li><li><code>ttl</code>(\u53ef\u9009):\u9879\u76ee\u8fc7\u671f\u914d\u7f6e\u3002\u5305\u542b\u53ef\u9009\u5b57\u6bb5\u7684\u5bf9\u8c61:<code>refresh_on_read</code>(\u5e03\u5c14\u503c,\u9ed8\u8ba4\u4e3a <code>true</code>)\u3001<code>default_ttl</code>(\u6d6e\u70b9\u6570,\u751f\u547d\u5468\u671f\u4ee5**\u5206\u949f**\u4e3a\u5355\u4f4d,\u9ed8\u8ba4\u4e3a\u4e0d\u8fc7\u671f)\u548c <code>sweep_interval_minutes</code>(\u6574\u6570,\u68c0\u67e5\u8fc7\u671f\u9879\u76ee\u7684\u9891\u7387,\u9ed8\u8ba4\u4e3a\u4e0d\u626b\u63cf)\u3002</li></ul> <code>node_version</code> \u6307\u5b9a <code>node_version: 20</code> \u4ee5\u4f7f\u7528 LangGraph.js\u3002 <code>dockerfile_lines</code> \u5728\u4ece\u7236\u955c\u50cf\u5bfc\u5165\u540e\u8981\u6dfb\u52a0\u5230 Dockerfile \u7684\u5176\u4ed6\u884c\u7684\u6570\u7ec4\u3002 <code>checkpointer</code> \u68c0\u67e5\u70b9\u5668\u7684\u914d\u7f6e\u3002\u5305\u542b\u4e00\u4e2a <code>ttl</code> \u5b57\u6bb5,\u8be5\u5b57\u6bb5\u662f\u4e00\u4e2a\u5305\u542b\u4ee5\u4e0b\u952e\u7684\u5bf9\u8c61: <ul><li><code>strategy</code>: \u5982\u4f55\u5904\u7406\u8fc7\u671f\u7684\u68c0\u67e5\u70b9(\u4f8b\u5982 <code>\"delete\"</code>)\u3002</li><li><code>sweep_interval_minutes</code>: \u68c0\u67e5\u8fc7\u671f\u68c0\u67e5\u70b9\u7684\u9891\u7387(\u6574\u6570)\u3002</li><li><code>default_ttl</code>: \u68c0\u67e5\u70b9\u7684\u9ed8\u8ba4\u751f\u5b58\u65f6\u95f4(\u4ee5**\u5206\u949f**\u4e3a\u5355\u4f4d)(\u6574\u6570)\u3002\u5b9a\u4e49\u5728\u5e94\u7528\u6307\u5b9a\u7b56\u7565\u4e4b\u524d\u4fdd\u7559\u68c0\u67e5\u70b9\u7684\u65f6\u95f4\u3002</li></ul>"},{"location":"cloud/reference/cli/#_2","title":"\u793a\u4f8b","text":"PythonJS"},{"location":"cloud/reference/cli/#_3","title":"\u57fa\u672c\u914d\u7f6e","text":"<pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"chat\": \"./chat/graph.py:graph\"\n  }\n}\n</code></pre>"},{"location":"cloud/reference/cli/#wolfi","title":"\u4f7f\u7528 Wolfi \u57fa\u7840\u955c\u50cf","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>image_distro</code> \u5b57\u6bb5\u6307\u5b9a\u57fa\u7840\u955c\u50cf\u7684 Linux \u53d1\u884c\u7248\u3002\u6709\u6548\u9009\u9879\u4e3a <code>debian</code> \u6216 <code>wolfi</code>\u3002Wolfi \u662f\u63a8\u8350\u9009\u9879,\u56e0\u4e3a\u5b83\u63d0\u4f9b\u4e86\u66f4\u5c0f\u3001\u66f4\u5b89\u5168\u7684\u955c\u50cf\u3002\u8fd9\u5728 <code>langgraph-cli&gt;=0.2.11</code> \u4e2d\u53ef\u7528\u3002</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"chat\": \"./chat/graph.py:graph\"\n  },\n  \"image_distro\": \"wolfi\"\n}\n</code></pre>"},{"location":"cloud/reference/cli/#_4","title":"\u5411\u5b58\u50a8\u6dfb\u52a0\u8bed\u4e49\u641c\u7d22","text":"<p>\u6240\u6709\u90e8\u7f72\u90fd\u9644\u5e26\u4e00\u4e2a\u652f\u6301\u6570\u636e\u5e93\u7684 BaseStore\u3002\u5411 <code>langgraph.json</code> \u6dfb\u52a0 \"index\" \u914d\u7f6e\u5c06\u5728\u90e8\u7f72\u7684 BaseStore \u4e2d\u542f\u7528\u8bed\u4e49\u641c\u7d22\u3002</p> <p><code>index.fields</code> \u914d\u7f6e\u51b3\u5b9a\u5d4c\u5165\u6587\u6863\u7684\u54ea\u4e9b\u90e8\u5206:</p> <ul> <li>\u5982\u679c\u7701\u7565\u6216\u8bbe\u7f6e\u4e3a <code>[\"$\"]</code>,\u5c06\u5d4c\u5165\u6574\u4e2a\u6587\u6863</li> <li>\u8981\u5d4c\u5165\u7279\u5b9a\u5b57\u6bb5,\u8bf7\u4f7f\u7528 JSON \u8def\u5f84\u8868\u793a\u6cd5:<code>[\"metadata.title\", \"content.text\"]</code></li> <li>\u7f3a\u5c11\u6307\u5b9a\u5b57\u6bb5\u7684\u6587\u6863\u4ecd\u5c06\u88ab\u5b58\u50a8,\u4f46\u4e0d\u4f1a\u4e3a\u8fd9\u4e9b\u5b57\u6bb5\u751f\u6210\u5d4c\u5165</li> <li>\u4f60\u4ecd\u7136\u53ef\u4ee5\u5728 <code>put</code> \u65f6\u4f7f\u7528 <code>index</code> \u53c2\u6570\u8986\u76d6\u8981\u5d4c\u5165\u7279\u5b9a\u9879\u76ee\u7684\u5b57\u6bb5</li> </ul> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"memory_agent\": \"./agent/graph.py:graph\"\n  },\n  \"store\": {\n    \"index\": {\n      \"embed\": \"openai:text-embedding-3-small\",\n      \"dims\": 1536,\n      \"fields\": [\"$\"]\n    }\n  }\n}\n</code></pre> <p>\u5e38\u89c1\u6a21\u578b\u7ef4\u5ea6</p> <ul> <li><code>openai:text-embedding-3-large</code>: 3072</li> <li><code>openai:text-embedding-3-small</code>: 1536</li> <li><code>openai:text-embedding-ada-002</code>: 1536</li> <li><code>cohere:embed-english-v3.0</code>: 1024</li> <li><code>cohere:embed-english-light-v3.0</code>: 384</li> <li><code>cohere:embed-multilingual-v3.0</code>: 1024</li> <li><code>cohere:embed-multilingual-light-v3.0</code>: 384</li> </ul>"},{"location":"cloud/reference/cli/#_5","title":"\u4f7f\u7528\u81ea\u5b9a\u4e49\u5d4c\u5165\u51fd\u6570\u8fdb\u884c\u8bed\u4e49\u641c\u7d22","text":"<p>\u5982\u679c\u8981\u4f7f\u7528\u81ea\u5b9a\u4e49\u5d4c\u5165\u51fd\u6570\u8fdb\u884c\u8bed\u4e49\u641c\u7d22,\u53ef\u4ee5\u4f20\u9012\u81ea\u5b9a\u4e49\u5d4c\u5165\u51fd\u6570\u7684\u8def\u5f84:</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"memory_agent\": \"./agent/graph.py:graph\"\n  },\n  \"store\": {\n    \"index\": {\n      \"embed\": \"./embeddings.py:embed_texts\",\n      \"dims\": 768,\n      \"fields\": [\"text\", \"summary\"]\n    }\n  }\n}\n</code></pre> <p>\u5b58\u50a8\u914d\u7f6e\u4e2d\u7684 <code>embed</code> \u5b57\u6bb5\u53ef\u4ee5\u5f15\u7528\u4e00\u4e2a\u81ea\u5b9a\u4e49\u51fd\u6570,\u8be5\u51fd\u6570\u63a5\u53d7\u5b57\u7b26\u4e32\u5217\u8868\u5e76\u8fd4\u56de\u5d4c\u5165\u5217\u8868\u3002\u793a\u4f8b\u5b9e\u73b0:</p> <pre><code># embeddings.py\ndef embed_texts(texts: list[str]) -&gt; list[list[float]]:\n    \"\"\"\u7528\u4e8e\u8bed\u4e49\u641c\u7d22\u7684\u81ea\u5b9a\u4e49\u5d4c\u5165\u51fd\u6570\u3002\"\"\"\n    # \u4f7f\u7528\u4f60\u9996\u9009\u7684\u5d4c\u5165\u6a21\u578b\u5b9e\u73b0\n    return [[0.1, 0.2, ...] for _ in texts]  # dims \u7ef4\u5411\u91cf\n</code></pre>"},{"location":"cloud/reference/cli/#_6","title":"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1","text":"<pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"chat\": \"./chat/graph.py:graph\"\n  },\n  \"auth\": {\n    \"path\": \"./auth.py:auth\",\n    \"openapi\": {\n      \"securitySchemes\": {\n        \"apiKeyAuth\": {\n          \"type\": \"apiKey\",\n          \"in\": \"header\",\n          \"name\": \"X-API-Key\"\n        }\n      },\n      \"security\": [{ \"apiKeyAuth\": [] }]\n    },\n    \"disable_studio_auth\": false\n  }\n}\n</code></pre> <p>\u6709\u5173\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u8eab\u4efd\u9a8c\u8bc1\u6982\u5ff5\u6307\u5357,\u4ee5\u53ca\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u6307\u5357\u4ee5\u83b7\u53d6\u8fc7\u7a0b\u7684\u5b9e\u9645\u6f14\u7ec3\u3002</p>"},{"location":"cloud/reference/cli/#ttl","title":"\u914d\u7f6e\u5b58\u50a8\u9879\u76ee\u751f\u5b58\u65f6\u95f4(TTL)","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>store.ttl</code> \u952e\u4e3a BaseStore \u4e2d\u7684\u9879\u76ee/\u8bb0\u5fc6\u914d\u7f6e\u9ed8\u8ba4\u6570\u636e\u8fc7\u671f\u3002\u8fd9\u51b3\u5b9a\u4e86\u9879\u76ee\u5728\u6700\u540e\u4e00\u6b21\u8bbf\u95ee\u540e\u4fdd\u7559\u591a\u957f\u65f6\u95f4(\u6839\u636e <code>refresh_on_read</code>,\u8bfb\u53d6\u53ef\u80fd\u4f1a\u5237\u65b0\u8ba1\u65f6\u5668)\u3002\u8bf7\u6ce8\u610f,\u8fd9\u4e9b\u9ed8\u8ba4\u503c\u53ef\u4ee5\u901a\u8fc7\u4fee\u6539 <code>get</code>\u3001<code>search</code> \u7b49\u4e2d\u7684\u76f8\u5e94\u53c2\u6570\u5728\u6bcf\u6b21\u8c03\u7528\u7684\u57fa\u7840\u4e0a\u88ab\u8986\u76d6\u3002</p> <p><code>ttl</code> \u914d\u7f6e\u662f\u4e00\u4e2a\u5305\u542b\u53ef\u9009\u5b57\u6bb5\u7684\u5bf9\u8c61:</p> <ul> <li><code>refresh_on_read</code>: \u5982\u679c\u4e3a <code>true</code>(\u9ed8\u8ba4\u503c),\u901a\u8fc7 <code>get</code> \u6216 <code>search</code> \u8bbf\u95ee\u9879\u76ee\u4f1a\u91cd\u7f6e\u5176\u8fc7\u671f\u8ba1\u65f6\u5668\u3002\u8bbe\u7f6e\u4e3a <code>false</code> \u4ec5\u5728\u5199\u5165(<code>put</code>)\u65f6\u5237\u65b0 TTL\u3002</li> <li><code>default_ttl</code>: \u9879\u76ee\u7684\u9ed8\u8ba4\u751f\u547d\u5468\u671f(\u4ee5**\u5206\u949f**\u4e3a\u5355\u4f4d)\u3002\u5982\u679c\u672a\u8bbe\u7f6e,\u9879\u76ee\u9ed8\u8ba4\u4e0d\u4f1a\u8fc7\u671f\u3002</li> <li><code>sweep_interval_minutes</code>: \u7cfb\u7edf\u5e94\u8fd0\u884c\u540e\u53f0\u8fdb\u7a0b\u4ee5\u5220\u9664\u8fc7\u671f\u9879\u76ee\u7684\u9891\u7387(\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d)\u3002\u5982\u679c\u672a\u8bbe\u7f6e,\u5219\u4e0d\u4f1a\u81ea\u52a8\u8fdb\u884c\u626b\u63cf\u3002</li> </ul> <p>\u4ee5\u4e0b\u662f\u542f\u7528 7 \u5929 TTL(10080 \u5206\u949f)\u3001\u5728\u8bfb\u53d6\u65f6\u5237\u65b0\u5e76\u6bcf\u5c0f\u65f6\u626b\u63cf\u4e00\u6b21\u7684\u793a\u4f8b:</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"memory_agent\": \"./agent/graph.py:graph\"\n  },\n  \"store\": {\n    \"ttl\": {\n      \"refresh_on_read\": true,\n      \"sweep_interval_minutes\": 60,\n      \"default_ttl\": 10080\n    }\n  }\n}\n</code></pre>"},{"location":"cloud/reference/cli/#ttl_1","title":"\u914d\u7f6e\u68c0\u67e5\u70b9\u751f\u5b58\u65f6\u95f4(TTL)","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>checkpointer</code> \u952e\u914d\u7f6e\u68c0\u67e5\u70b9\u7684\u751f\u5b58\u65f6\u95f4(TTL)\u3002\u8fd9\u51b3\u5b9a\u4e86\u5728\u6839\u636e\u6307\u5b9a\u7b56\u7565(\u4f8b\u5982\u5220\u9664)\u81ea\u52a8\u5904\u7406\u68c0\u67e5\u70b9\u6570\u636e\u4e4b\u524d\u4fdd\u7559\u591a\u957f\u65f6\u95f4\u3002<code>ttl</code> \u914d\u7f6e\u662f\u4e00\u4e2a\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9\u7684\u5bf9\u8c61:</p> <ul> <li><code>strategy</code>: \u5bf9\u8fc7\u671f\u68c0\u67e5\u70b9\u91c7\u53d6\u7684\u64cd\u4f5c(\u5f53\u524d <code>\"delete\"</code> \u662f\u552f\u4e00\u63a5\u53d7\u7684\u9009\u9879)\u3002</li> <li><code>sweep_interval_minutes</code>: \u7cfb\u7edf\u68c0\u67e5\u8fc7\u671f\u68c0\u67e5\u70b9\u7684\u9891\u7387(\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d)\u3002</li> <li><code>default_ttl</code>: \u68c0\u67e5\u70b9\u7684\u9ed8\u8ba4\u751f\u547d\u5468\u671f(\u4ee5**\u5206\u949f**\u4e3a\u5355\u4f4d)\u3002</li> </ul> <p>\u4ee5\u4e0b\u662f\u8bbe\u7f6e\u9ed8\u8ba4 TTL \u4e3a 30 \u5929(43200 \u5206\u949f)\u7684\u793a\u4f8b:</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"chat\": \"./chat/graph.py:graph\"\n  },\n  \"checkpointer\": {\n    \"ttl\": {\n      \"strategy\": \"delete\",\n      \"sweep_interval_minutes\": 10,\n      \"default_ttl\": 43200\n    }\n  }\n}\n</code></pre> <p>\u5728\u6b64\u793a\u4f8b\u4e2d,\u8d85\u8fc7 30 \u5929\u7684\u68c0\u67e5\u70b9\u5c06\u88ab\u5220\u9664,\u68c0\u67e5\u6bcf 10 \u5206\u949f\u8fd0\u884c\u4e00\u6b21\u3002</p>"},{"location":"cloud/reference/cli/#_7","title":"\u57fa\u672c\u914d\u7f6e","text":"<pre><code>{\n  \"graphs\": {\n    \"chat\": \"./src/graph.ts:graph\"\n  }\n}\n</code></pre>"},{"location":"cloud/reference/cli/#_8","title":"\u547d\u4ee4","text":"<p>\u7528\u6cd5</p> PythonJS <p>LangGraph CLI \u7684\u57fa\u672c\u547d\u4ee4\u662f <code>langgraph</code>\u3002</p> <pre><code>langgraph [OPTIONS] COMMAND [ARGS]\n</code></pre> <p>LangGraph.js CLI \u7684\u57fa\u672c\u547d\u4ee4\u662f <code>langgraphjs</code>\u3002</p> <pre><code>npx @langchain/langgraph-cli [OPTIONS] COMMAND [ARGS]\n</code></pre> <p>\u6211\u4eec\u5efa\u8bae\u4f7f\u7528 <code>npx</code> \u59cb\u7ec8\u4f7f\u7528 CLI \u7684\u6700\u65b0\u7248\u672c\u3002</p>"},{"location":"cloud/reference/cli/#dev","title":"<code>dev</code>","text":"PythonJS <p>\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fd0\u884c LangGraph API \u670d\u52a1\u5668,\u5177\u6709\u70ed\u91cd\u8f7d\u548c\u8c03\u8bd5\u529f\u80fd\u3002\u6b64\u8f7b\u91cf\u7ea7\u670d\u52a1\u5668\u4e0d\u9700\u8981 Docker \u5b89\u88c5,\u9002\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002\u72b6\u6001\u6301\u4e45\u5316\u5230\u672c\u5730\u76ee\u5f55\u3002</p> <p>Note</p> <p>\u76ee\u524d,CLI \u4ec5\u652f\u6301 Python &gt;= 3.11\u3002</p> <p>\u5b89\u88c5</p> <p>\u6b64\u547d\u4ee4\u9700\u8981\u5b89\u88c5 \"inmem\" \u989d\u5916\u4f9d\u8d56:</p> <pre><code>pip install -U \"langgraph-cli[inmem]\"\n</code></pre> <p>\u7528\u6cd5</p> <pre><code>langgraph dev [OPTIONS]\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 <code>--host TEXT</code> <code>127.0.0.1</code> \u7ed1\u5b9a\u670d\u52a1\u5668\u7684\u4e3b\u673a <code>--port INTEGER</code> <code>2024</code> \u7ed1\u5b9a\u670d\u52a1\u5668\u7684\u7aef\u53e3 <code>--no-reload</code> \u7981\u7528\u81ea\u52a8\u91cd\u8f7d <code>--n-jobs-per-worker INTEGER</code> \u6bcf\u4e2a\u5de5\u4f5c\u5668\u7684\u4f5c\u4e1a\u6570\u3002\u9ed8\u8ba4\u4e3a 10 <code>--debug-port INTEGER</code> \u8c03\u8bd5\u5668\u76d1\u542c\u7684\u7aef\u53e3 <code>--wait-for-client</code> <code>False</code> \u5728\u542f\u52a8\u670d\u52a1\u5668\u4e4b\u524d\u7b49\u5f85\u8c03\u8bd5\u5668\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8c03\u8bd5\u7aef\u53e3 <code>--no-browser</code> \u670d\u52a1\u5668\u542f\u52a8\u65f6\u8df3\u8fc7\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668 <code>--studio-url TEXT</code> \u8981\u8fde\u63a5\u7684 LangGraph Studio \u5b9e\u4f8b\u7684 URL\u3002\u9ed8\u8ba4\u4e3a https://smith.langchain.com <code>--allow-blocking</code> <code>False</code> \u4e0d\u5bf9\u4ee3\u7801\u4e2d\u7684\u540c\u6b65 I/O \u963b\u585e\u64cd\u4f5c\u5f15\u53d1\u9519\u8bef(\u5728 <code>0.2.6</code> \u4e2d\u6dfb\u52a0) <code>--tunnel</code> <code>False</code> \u901a\u8fc7\u516c\u5171\u96a7\u9053(Cloudflare)\u516c\u5f00\u672c\u5730\u670d\u52a1\u5668\u4ee5\u8fdb\u884c\u8fdc\u7a0b\u524d\u7aef\u8bbf\u95ee\u3002\u8fd9\u907f\u514d\u4e86 Safari \u7b49\u6d4f\u89c8\u5668\u6216\u7f51\u7edc\u963b\u6b62 localhost \u8fde\u63a5\u7684\u95ee\u9898 <code>--help</code> \u663e\u793a\u547d\u4ee4\u6587\u6863 <p>\u5728\u5f00\u53d1\u6a21\u5f0f\u4e0b\u8fd0\u884c LangGraph API \u670d\u52a1\u5668,\u5177\u6709\u70ed\u91cd\u8f7d\u529f\u80fd\u3002\u6b64\u8f7b\u91cf\u7ea7\u670d\u52a1\u5668\u4e0d\u9700\u8981 Docker \u5b89\u88c5,\u9002\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002\u72b6\u6001\u6301\u4e45\u5316\u5230\u672c\u5730\u76ee\u5f55\u3002</p> <p>\u7528\u6cd5</p> <pre><code>npx @langchain/langgraph-cli dev [OPTIONS]\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84 <code>--host TEXT</code> <code>127.0.0.1</code> \u7ed1\u5b9a\u670d\u52a1\u5668\u7684\u4e3b\u673a <code>--port INTEGER</code> <code>2024</code> \u7ed1\u5b9a\u670d\u52a1\u5668\u7684\u7aef\u53e3 <code>--no-reload</code> \u7981\u7528\u81ea\u52a8\u91cd\u8f7d <code>--n-jobs-per-worker INTEGER</code> \u6bcf\u4e2a\u5de5\u4f5c\u5668\u7684\u4f5c\u4e1a\u6570\u3002\u9ed8\u8ba4\u4e3a 10 <code>--debug-port INTEGER</code> \u8c03\u8bd5\u5668\u76d1\u542c\u7684\u7aef\u53e3 <code>--wait-for-client</code> <code>False</code> \u5728\u542f\u52a8\u670d\u52a1\u5668\u4e4b\u524d\u7b49\u5f85\u8c03\u8bd5\u5668\u5ba2\u6237\u7aef\u8fde\u63a5\u5230\u8c03\u8bd5\u7aef\u53e3 <code>--no-browser</code> \u670d\u52a1\u5668\u542f\u52a8\u65f6\u8df3\u8fc7\u81ea\u52a8\u6253\u5f00\u6d4f\u89c8\u5668 <code>--studio-url TEXT</code> \u8981\u8fde\u63a5\u7684 LangGraph Studio \u5b9e\u4f8b\u7684 URL\u3002\u9ed8\u8ba4\u4e3a https://smith.langchain.com <code>--allow-blocking</code> <code>False</code> \u4e0d\u5bf9\u4ee3\u7801\u4e2d\u7684\u540c\u6b65 I/O \u963b\u585e\u64cd\u4f5c\u5f15\u53d1\u9519\u8bef <code>--tunnel</code> <code>False</code> \u901a\u8fc7\u516c\u5171\u96a7\u9053(Cloudflare)\u516c\u5f00\u672c\u5730\u670d\u52a1\u5668\u4ee5\u8fdb\u884c\u8fdc\u7a0b\u524d\u7aef\u8bbf\u95ee\u3002\u8fd9\u907f\u514d\u4e86\u6d4f\u89c8\u5668\u6216\u7f51\u7edc\u963b\u6b62 localhost \u8fde\u63a5\u7684\u95ee\u9898 <code>--help</code> \u663e\u793a\u547d\u4ee4\u6587\u6863"},{"location":"cloud/reference/cli/#build","title":"<code>build</code>","text":"PythonJS <p>\u6784\u5efa LangGraph Platform API \u670d\u52a1\u5668 Docker \u955c\u50cf\u3002</p> <p>\u7528\u6cd5</p> <pre><code>langgraph build [OPTIONS]\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>--platform TEXT</code> \u8981\u4e3a\u5176\u6784\u5efa Docker \u955c\u50cf\u7684\u76ee\u6807\u5e73\u53f0\u3002\u793a\u4f8b:<code>langgraph build --platform linux/amd64,linux/arm64</code> <code>-t, --tag TEXT</code> \u5fc5\u9700\u3002Docker \u955c\u50cf\u7684\u6807\u7b7e\u3002\u793a\u4f8b:<code>langgraph build -t my-image</code> <code>--pull / --no-pull</code> <code>--pull</code> \u4f7f\u7528\u6700\u65b0\u7684\u8fdc\u7a0b Docker \u955c\u50cf\u8fdb\u884c\u6784\u5efa\u3002\u4f7f\u7528 <code>--no-pull</code> \u4ee5\u4f7f\u7528\u672c\u5730\u6784\u5efa\u7684\u955c\u50cf\u8fd0\u884c LangGraph Platform API \u670d\u52a1\u5668\u3002 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 <code>--help</code> \u663e\u793a\u547d\u4ee4\u6587\u6863\u3002 <p>\u6784\u5efa LangGraph Platform API \u670d\u52a1\u5668 Docker \u955c\u50cf\u3002</p> <p>\u7528\u6cd5</p> <pre><code>npx @langchain/langgraph-cli build [OPTIONS]\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>--platform TEXT</code> \u8981\u4e3a\u5176\u6784\u5efa Docker \u955c\u50cf\u7684\u76ee\u6807\u5e73\u53f0\u3002\u793a\u4f8b:<code>langgraph build --platform linux/amd64,linux/arm64</code> <code>-t, --tag TEXT</code> \u5fc5\u9700\u3002Docker \u955c\u50cf\u7684\u6807\u7b7e\u3002\u793a\u4f8b:<code>langgraph build -t my-image</code> <code>--no-pull</code> \u4f7f\u7528\u672c\u5730\u6784\u5efa\u7684\u955c\u50cf\u3002\u9ed8\u8ba4\u4e3a <code>false</code> \u4ee5\u4f7f\u7528\u6700\u65b0\u7684\u8fdc\u7a0b Docker \u955c\u50cf\u8fdb\u884c\u6784\u5efa\u3002 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 <code>--help</code> \u663e\u793a\u547d\u4ee4\u6587\u6863\u3002"},{"location":"cloud/reference/cli/#up","title":"<code>up</code>","text":"PythonJS <p>\u542f\u52a8 LangGraph API \u670d\u52a1\u5668\u3002\u5bf9\u4e8e\u672c\u5730\u6d4b\u8bd5,\u9700\u8981\u5177\u6709 LangGraph Platform \u8bbf\u95ee\u6743\u9650\u7684 LangSmith API \u5bc6\u94a5\u3002\u751f\u4ea7\u4f7f\u7528\u9700\u8981\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002</p> <p>\u7528\u6cd5</p> <pre><code>langgraph up [OPTIONS]\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>--wait</code> \u5728\u8fd4\u56de\u4e4b\u524d\u7b49\u5f85\u670d\u52a1\u542f\u52a8\u3002\u9690\u542b --detach <code>--base-image TEXT</code> <code>langchain/langgraph-api</code> \u7528\u4e8e LangGraph API \u670d\u52a1\u5668\u7684\u57fa\u7840\u955c\u50cf\u3002\u4f7f\u7528\u7248\u672c\u6807\u7b7e\u56fa\u5b9a\u5230\u7279\u5b9a\u7248\u672c\u3002 <code>--image TEXT</code> \u7528\u4e8e langgraph-api \u670d\u52a1\u7684 Docker \u955c\u50cf\u3002\u5982\u679c\u6307\u5b9a,\u5c06\u8df3\u8fc7\u6784\u5efa\u5e76\u76f4\u63a5\u4f7f\u7528\u6b64\u955c\u50cf\u3002 <code>--postgres-uri TEXT</code> \u672c\u5730\u6570\u636e\u5e93 \u7528\u4e8e\u6570\u636e\u5e93\u7684 Postgres URI\u3002 <code>--watch</code> \u5728\u6587\u4ef6\u66f4\u6539\u65f6\u91cd\u542f <code>--debugger-base-url TEXT</code> <code>http://127.0.0.1:[PORT]</code> \u8c03\u8bd5\u5668\u7528\u4e8e\u8bbf\u95ee LangGraph API \u7684 URL\u3002 <code>--debugger-port INTEGER</code> \u5728\u672c\u5730\u62c9\u53d6\u8c03\u8bd5\u5668\u955c\u50cf\u5e76\u5728\u6307\u5b9a\u7aef\u53e3\u4e0a\u63d0\u4f9b UI <code>--verbose</code> \u663e\u793a\u670d\u52a1\u5668\u65e5\u5fd7\u7684\u66f4\u591a\u8f93\u51fa\u3002 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 <code>-d, --docker-compose FILE</code> \u5305\u542b\u8981\u542f\u52a8\u7684\u5176\u4ed6\u670d\u52a1\u7684 docker-compose.yml \u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>-p, --port INTEGER</code> <code>8123</code> \u8981\u516c\u5f00\u7684\u7aef\u53e3\u3002\u793a\u4f8b:<code>langgraph up --port 8000</code> <code>--pull / --no-pull</code> <code>pull</code> \u62c9\u53d6\u6700\u65b0\u955c\u50cf\u3002\u4f7f\u7528 <code>--no-pull</code> \u4ee5\u4f7f\u7528\u672c\u5730\u6784\u5efa\u7684\u955c\u50cf\u8fd0\u884c\u670d\u52a1\u5668\u3002\u793a\u4f8b:<code>langgraph up --no-pull</code> <code>--recreate / --no-recreate</code> <code>no-recreate</code> \u5373\u4f7f\u914d\u7f6e\u548c\u955c\u50cf\u672a\u66f4\u6539,\u4e5f\u91cd\u65b0\u521b\u5efa\u5bb9\u5668 <code>--help</code> \u663e\u793a\u547d\u4ee4\u6587\u6863\u3002 <p>\u542f\u52a8 LangGraph API \u670d\u52a1\u5668\u3002\u5bf9\u4e8e\u672c\u5730\u6d4b\u8bd5,\u9700\u8981\u5177\u6709 LangGraph Platform \u8bbf\u95ee\u6743\u9650\u7684 LangSmith API \u5bc6\u94a5\u3002\u751f\u4ea7\u4f7f\u7528\u9700\u8981\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002</p> <p>\u7528\u6cd5</p> <pre><code>npx @langchain/langgraph-cli up [OPTIONS]\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>--wait</code> \u5728\u8fd4\u56de\u4e4b\u524d\u7b49\u5f85\u670d\u52a1\u542f\u52a8\u3002\u9690\u542b --detach <code>--base-image TEXT</code> <code>langchain/langgraph-api</code> \u7528\u4e8e LangGraph API \u670d\u52a1\u5668\u7684\u57fa\u7840\u955c\u50cf\u3002\u4f7f\u7528\u7248\u672c\u6807\u7b7e\u56fa\u5b9a\u5230\u7279\u5b9a\u7248\u672c\u3002 <code>--image TEXT</code> \u7528\u4e8e langgraph-api \u670d\u52a1\u7684 Docker \u955c\u50cf\u3002\u5982\u679c\u6307\u5b9a,\u5c06\u8df3\u8fc7\u6784\u5efa\u5e76\u76f4\u63a5\u4f7f\u7528\u6b64\u955c\u50cf\u3002 <code>--postgres-uri TEXT</code> \u672c\u5730\u6570\u636e\u5e93 \u7528\u4e8e\u6570\u636e\u5e93\u7684 Postgres URI\u3002 <code>--watch</code> \u5728\u6587\u4ef6\u66f4\u6539\u65f6\u91cd\u542f <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 <code>-d, --docker-compose FILE</code> \u5305\u542b\u8981\u542f\u52a8\u7684\u5176\u4ed6\u670d\u52a1\u7684 docker-compose.yml \u6587\u4ef6\u7684\u8def\u5f84\u3002 <code>-p, --port INTEGER</code> <code>8123</code> \u8981\u516c\u5f00\u7684\u7aef\u53e3\u3002\u793a\u4f8b:<code>langgraph up --port 8000</code> <code>--no-pull</code> \u4f7f\u7528\u672c\u5730\u6784\u5efa\u7684\u955c\u50cf\u3002\u9ed8\u8ba4\u4e3a <code>false</code> \u4ee5\u4f7f\u7528\u6700\u65b0\u7684\u8fdc\u7a0b Docker \u955c\u50cf\u8fdb\u884c\u6784\u5efa\u3002 <code>--recreate</code> \u5373\u4f7f\u914d\u7f6e\u548c\u955c\u50cf\u672a\u66f4\u6539,\u4e5f\u91cd\u65b0\u521b\u5efa\u5bb9\u5668 <code>--help</code> \u663e\u793a\u547d\u4ee4\u6587\u6863\u3002"},{"location":"cloud/reference/cli/#dockerfile","title":"<code>dockerfile</code>","text":"PythonJS <p>\u751f\u6210\u7528\u4e8e\u6784\u5efa LangGraph Platform API \u670d\u52a1\u5668 Docker \u955c\u50cf\u7684 Dockerfile\u3002</p> <p>\u7528\u6cd5</p> <pre><code>langgraph dockerfile [OPTIONS] SAVE_PATH\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 <code>--help</code> \u663e\u793a\u6b64\u6d88\u606f\u5e76\u9000\u51fa\u3002 <p>\u793a\u4f8b:</p> <pre><code>langgraph dockerfile -c langgraph.json Dockerfile\n</code></pre> <p>\u8fd9\u5c06\u751f\u6210\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\u7684 Dockerfile:</p> <pre><code>FROM langchain/langgraph-api:3.11\n\nADD ./pipconf.txt /pipconfig.txt\n\nRUN PIP_CONFIG_FILE=/pipconfig.txt PYTHONDONTWRITEBYTECODE=1 pip install --no-cache-dir -c /api/constraints.txt langchain_community langchain_anthropic langchain_openai wikipedia scikit-learn\n\nADD ./graphs /deps/outer-graphs/src\nRUN set -ex &amp;&amp; \\\n    for line in '[project]' \\\n                'name = \"graphs\"' \\\n                'version = \"0.1\"' \\\n                '[tool.setuptools.package-data]' \\\n                '\"*\" = [\"**/*\"]'; do \\\n        echo \"$line\" &gt;&gt; /deps/outer-graphs/pyproject.toml; \\\n    done\n\nRUN PIP_CONFIG_FILE=/pipconfig.txt PYTHONDONTWRITEBYTECODE=1 pip install --no-cache-dir -c /api/constraints.txt -e /deps/*\n\nENV LANGSERVE_GRAPHS='{\"agent\": \"/deps/outer-graphs/src/agent.py:graph\", \"storm\": \"/deps/outer-graphs/src/storm.py:graph\"}'\n</code></pre> \u66f4\u65b0\u4f60\u7684 langgraph.json \u6587\u4ef6 <p><code>langgraph dockerfile</code> \u547d\u4ee4\u5c06 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u7684\u6240\u6709\u914d\u7f6e\u8f6c\u6362\u4e3a Dockerfile \u547d\u4ee4\u3002\u4f7f\u7528\u6b64\u547d\u4ee4\u65f6,\u6bcf\u5f53\u66f4\u65b0 <code>langgraph.json</code> \u6587\u4ef6\u65f6,\u90fd\u5fc5\u987b\u91cd\u65b0\u8fd0\u884c\u5b83\u3002\u5426\u5219,\u4f60\u7684\u66f4\u6539\u5c06\u4e0d\u4f1a\u53cd\u6620\u5728\u6784\u5efa\u6216\u8fd0\u884c dockerfile \u65f6\u3002</p> <p>\u751f\u6210\u7528\u4e8e\u6784\u5efa LangGraph Platform API \u670d\u52a1\u5668 Docker \u955c\u50cf\u7684 Dockerfile\u3002</p> <p>\u7528\u6cd5</p> <pre><code>npx @langchain/langgraph-cli dockerfile [OPTIONS] SAVE_PATH\n</code></pre> <p>\u9009\u9879</p> \u9009\u9879 \u9ed8\u8ba4\u503c \u63cf\u8ff0 <code>-c, --config FILE</code> <code>langgraph.json</code> \u58f0\u660e\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u7684\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\u3002 <code>--help</code> \u663e\u793a\u6b64\u6d88\u606f\u5e76\u9000\u51fa\u3002 <p>\u793a\u4f8b:</p> <pre><code>npx @langchain/langgraph-cli dockerfile -c langgraph.json Dockerfile\n</code></pre> <p>\u8fd9\u5c06\u751f\u6210\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\u4ee5\u4e0b\u5185\u5bb9\u7684 Dockerfile:</p> <pre><code>FROM langchain/langgraphjs-api:20\n\nADD . /deps/agent\n\nRUN cd /deps/agent &amp;&amp; yarn install\n\nENV LANGSERVE_GRAPHS='{\"agent\":\"./src/react_agent/graph.ts:graph\"}'\n\nWORKDIR /deps/agent\n\nRUN (test ! -f /api/langgraph_api/js/build.mts &amp;&amp; echo \"Prebuild script not found, skipping\") || tsx /api/langgraph_api/js/build.mts\n</code></pre> \u66f4\u65b0\u4f60\u7684 langgraph.json \u6587\u4ef6 <p><code>npx @langchain/langgraph-cli dockerfile</code> \u547d\u4ee4\u5c06 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u7684\u6240\u6709\u914d\u7f6e\u8f6c\u6362\u4e3a Dockerfile \u547d\u4ee4\u3002\u4f7f\u7528\u6b64\u547d\u4ee4\u65f6,\u6bcf\u5f53\u66f4\u65b0 <code>langgraph.json</code> \u6587\u4ef6\u65f6,\u90fd\u5fc5\u987b\u91cd\u65b0\u8fd0\u884c\u5b83\u3002\u5426\u5219,\u4f60\u7684\u66f4\u6539\u5c06\u4e0d\u4f1a\u53cd\u6620\u5728\u6784\u5efa\u6216\u8fd0\u884c dockerfile \u65f6\u3002</p>"},{"location":"cloud/reference/env_var/","title":"\u73af\u5883\u53d8\u91cf","text":"<p>LangGraph Server \u652f\u6301\u7528\u4e8e\u914d\u7f6e\u90e8\u7f72\u7684\u7279\u5b9a\u73af\u5883\u53d8\u91cf\u3002</p>"},{"location":"cloud/reference/env_var/#bg_job_isolated_loops","title":"<code>BG_JOB_ISOLATED_LOOPS</code>","text":"<p>\u5c06 <code>BG_JOB_ISOLATED_LOOPS</code> \u8bbe\u7f6e\u4e3a <code>True</code>,\u4ee5\u5728\u72ec\u7acb\u4e8e\u670d\u52a1 API \u4e8b\u4ef6\u5faa\u73af\u7684\u9694\u79bb\u4e8b\u4ef6\u5faa\u73af\u4e2d\u6267\u884c\u540e\u53f0\u8fd0\u884c\u3002</p> <p>\u5982\u679c\u56fe/\u8282\u70b9\u7684\u5b9e\u73b0\u5305\u542b\u540c\u6b65\u4ee3\u7801,\u5219\u5e94\u5c06\u6b64\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u4e3a <code>True</code>\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u540c\u6b65\u4ee3\u7801\u5c06\u963b\u585e\u670d\u52a1 API \u4e8b\u4ef6\u5faa\u73af,\u8fd9\u53ef\u80fd\u4f1a\u5bfc\u81f4 API \u4e0d\u53ef\u7528\u3002API \u4e0d\u53ef\u7528\u7684\u75c7\u72b6\u662f\u7531\u4e8e\u5065\u5eb7\u68c0\u67e5\u5931\u8d25\u800c\u5bfc\u81f4\u7684\u6301\u7eed\u5e94\u7528\u7a0b\u5e8f\u91cd\u542f\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>False</code>\u3002</p>"},{"location":"cloud/reference/env_var/#bg_job_shutdown_grace_period_secs","title":"<code>BG_JOB_SHUTDOWN_GRACE_PERIOD_SECS</code>","text":"<p>\u6307\u5b9a\u670d\u52a1\u5668\u5728\u961f\u5217\u6536\u5230\u5173\u95ed\u4fe1\u53f7\u540e\u7b49\u5f85\u540e\u53f0\u4f5c\u4e1a\u5b8c\u6210\u7684\u65f6\u95f4(\u4ee5\u79d2\u4e3a\u5355\u4f4d)\u3002\u5728\u6b64\u671f\u95f4\u4e4b\u540e,\u670d\u52a1\u5668\u5c06\u5f3a\u5236\u7ec8\u6b62\u3002\u9ed8\u8ba4\u4e3a <code>180</code> \u79d2\u3002\u8bbe\u7f6e\u6b64\u9879\u4ee5\u786e\u4fdd\u4f5c\u4e1a\u5728\u5173\u95ed\u671f\u95f4\u6709\u8db3\u591f\u7684\u65f6\u95f4\u5e72\u51c0\u5730\u5b8c\u6210\u3002\u5728 <code>langgraph-api==0.2.16</code> \u4e2d\u6dfb\u52a0\u3002</p>"},{"location":"cloud/reference/env_var/#bg_job_timeout_secs","title":"<code>BG_JOB_TIMEOUT_SECS</code>","text":"<p>\u53ef\u4ee5\u589e\u52a0\u540e\u53f0\u8fd0\u884c\u7684\u8d85\u65f6\u65f6\u95f4\u3002\u4f46\u662f,\u4e91 SaaS \u90e8\u7f72\u7684\u57fa\u7840\u8bbe\u65bd\u5bf9 API \u8bf7\u6c42\u5f3a\u5236\u6267\u884c 1 \u5c0f\u65f6\u8d85\u65f6\u9650\u5236\u3002\u8fd9\u610f\u5473\u7740\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5\u5c06\u5728 1 \u5c0f\u65f6\u540e\u8d85\u65f6\u3002\u8fd9\u662f\u4e0d\u53ef\u914d\u7f6e\u7684\u3002</p> <p>\u540e\u53f0\u8fd0\u884c\u53ef\u4ee5\u6267\u884c\u8d85\u8fc7 1 \u5c0f\u65f6,\u4f46\u5982\u679c\u8fd0\u884c\u65f6\u95f4\u8d85\u8fc7 1 \u5c0f\u65f6,\u5ba2\u6237\u7aef\u5fc5\u987b\u91cd\u65b0\u8fde\u63a5\u5230\u670d\u52a1\u5668(\u4f8b\u5982,\u901a\u8fc7 <code>POST /threads/{thread_id}/runs/{run_id}/stream</code> \u52a0\u5165\u6d41)\u4ee5\u4ece\u8fd0\u884c\u4e2d\u68c0\u7d22\u8f93\u51fa\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>3600</code>\u3002</p>"},{"location":"cloud/reference/env_var/#dd_api_key","title":"<code>DD_API_KEY</code>","text":"<p>\u6307\u5b9a <code>DD_API_KEY</code>(\u4f60\u7684 Datadog API \u5bc6\u94a5)\u4ee5\u81ea\u52a8\u4e3a\u90e8\u7f72\u542f\u7528 Datadog \u8ddf\u8e2a\u3002\u6307\u5b9a\u5176\u4ed6 <code>DD_*</code> \u73af\u5883\u53d8\u91cf\u4ee5\u914d\u7f6e\u8ddf\u8e2a\u4eea\u5668\u3002</p> <p>\u5982\u679c\u6307\u5b9a\u4e86 <code>DD_API_KEY</code>,\u5e94\u7528\u7a0b\u5e8f\u8fdb\u7a0b\u5c06\u5305\u88c5\u5728 <code>ddtrace-run</code> \u547d\u4ee4\u4e2d\u3002\u901a\u5e38\u9700\u8981\u5176\u4ed6 <code>DD_*</code> \u73af\u5883\u53d8\u91cf(\u4f8b\u5982 <code>DD_SITE</code>\u3001<code>DD_ENV</code>\u3001<code>DD_SERVICE</code>\u3001<code>DD_TRACE_ENABLED</code>)\u6765\u6b63\u786e\u914d\u7f6e\u8ddf\u8e2a\u4eea\u5668\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 <code>DD_*</code> \u73af\u5883\u53d8\u91cf\u3002</p> <p>Note</p> <p>\u542f\u7528 <code>DD_API_KEY</code>(\u4ece\u800c\u542f\u7528 <code>ddtrace-run</code>)\u53ef\u80fd\u4f1a\u8986\u76d6\u6216\u5e72\u6270\u4f60\u53ef\u80fd\u5df2\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4e2d\u68c0\u6d4b\u7684\u5176\u4ed6\u81ea\u52a8\u68c0\u6d4b\u89e3\u51b3\u65b9\u6848(\u4f8b\u5982 OpenTelemetry)\u3002</p>"},{"location":"cloud/reference/env_var/#langchain_tracing_sampling_rate","title":"<code>LANGCHAIN_TRACING_SAMPLING_RATE</code>","text":"<p>\u53d1\u9001\u5230 LangSmith \u7684\u8ddf\u8e2a\u7684\u91c7\u6837\u7387\u3002\u6709\u6548\u503c:<code>0</code> \u548c <code>1</code> \u4e4b\u95f4\u7684\u4efb\u4f55\u6d6e\u70b9\u6570\u3002</p> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 LangSmith \u6587\u6863\u3002</p>"},{"location":"cloud/reference/env_var/#langgraph_auth_type","title":"<code>LANGGRAPH_AUTH_TYPE</code>","text":"<p>LangGraph Server \u90e8\u7f72\u7684\u8eab\u4efd\u9a8c\u8bc1\u7c7b\u578b\u3002\u6709\u6548\u503c:<code>langsmith</code>\u3001<code>noop</code>\u3002</p> <p>\u5bf9\u4e8e\u90e8\u7f72\u5230 LangGraph Platform,\u6b64\u73af\u5883\u53d8\u91cf\u4f1a\u81ea\u52a8\u8bbe\u7f6e\u3002\u5bf9\u4e8e\u672c\u5730\u5f00\u53d1\u6216\u5728\u5916\u90e8\u5904\u7406\u8eab\u4efd\u9a8c\u8bc1\u7684\u90e8\u7f72(\u4f8b\u5982\u81ea\u6258\u7ba1),\u8bf7\u5c06\u6b64\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e\u4e3a <code>noop</code>\u3002</p>"},{"location":"cloud/reference/env_var/#langgraph_postgres_pool_max_size","title":"<code>LANGGRAPH_POSTGRES_POOL_MAX_SIZE</code>","text":"<p>\u4ece langgraph-api \u7248\u672c <code>0.2.12</code> \u5f00\u59cb,\u53ef\u4ee5\u4f7f\u7528 <code>LANGGRAPH_POSTGRES_POOL_MAX_SIZE</code> \u73af\u5883\u53d8\u91cf\u63a7\u5236 Postgres \u8fde\u63a5\u6c60\u7684\u6700\u5927\u5927\u5c0f(\u6bcf\u4e2a\u526f\u672c)\u3002\u901a\u8fc7\u8bbe\u7f6e\u6b64\u53d8\u91cf,\u4f60\u53ef\u4ee5\u786e\u5b9a\u670d\u52a1\u5668\u5c06\u4e0e Postgres \u6570\u636e\u5e93\u5efa\u7acb\u7684\u540c\u65f6\u8fde\u63a5\u6570\u7684\u4e0a\u9650\u3002</p> <p>\u4f8b\u5982,\u5982\u679c\u90e8\u7f72\u6269\u5c55\u5230 10 \u4e2a\u526f\u672c,\u5e76\u4e14 <code>LANGGRAPH_POSTGRES_POOL_MAX_SIZE</code> \u914d\u7f6e\u4e3a <code>150</code>,\u5219\u6700\u591a\u53ef\u4ee5\u5efa\u7acb <code>1500</code> \u4e2a\u5230 Postgres \u7684\u8fde\u63a5\u3002\u8fd9\u5bf9\u4e8e\u6570\u636e\u5e93\u8d44\u6e90\u6709\u9650(\u6216\u66f4\u591a\u53ef\u7528)\u6216\u4f60\u9700\u8981\u51fa\u4e8e\u6027\u80fd\u6216\u6269\u5c55\u539f\u56e0\u8c03\u6574\u8fde\u63a5\u884c\u4e3a\u7684\u90e8\u7f72\u7279\u522b\u6709\u7528\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>150</code> \u4e2a\u8fde\u63a5\u3002</p>"},{"location":"cloud/reference/env_var/#langsmith_runs_endpoints","title":"<code>LANGSMITH_RUNS_ENDPOINTS</code>","text":"<p>\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1 LangSmith \u7684\u90e8\u7f72\u3002</p> <p>\u8bbe\u7f6e\u6b64\u73af\u5883\u53d8\u91cf\u4ee5\u4f7f\u90e8\u7f72\u5c06\u8ddf\u8e2a\u53d1\u9001\u5230\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b\u3002<code>LANGSMITH_RUNS_ENDPOINTS</code> \u7684\u503c\u662f JSON \u5b57\u7b26\u4e32:<code>{\"&lt;SELF_HOSTED_LANGSMITH_HOSTNAME&gt;\":\"&lt;LANGSMITH_API_KEY&gt;\"}</code>\u3002</p> <p><code>SELF_HOSTED_LANGSMITH_HOSTNAME</code> \u662f\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b\u7684\u4e3b\u673a\u540d\u3002\u5b83\u5fc5\u987b\u53ef\u4f9b\u90e8\u7f72\u8bbf\u95ee\u3002<code>LANGSMITH_API_KEY</code> \u662f\u4ece\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b\u751f\u6210\u7684 LangSmith API\u3002</p>"},{"location":"cloud/reference/env_var/#langsmith_tracing","title":"<code>LANGSMITH_TRACING</code>","text":"<p>\u5c06 <code>LANGSMITH_TRACING</code> \u8bbe\u7f6e\u4e3a <code>false</code> \u4ee5\u7981\u7528\u5230 LangSmith \u7684\u8ddf\u8e2a\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>true</code>\u3002</p>"},{"location":"cloud/reference/env_var/#log_color","title":"<code>LOG_COLOR</code>","text":"<p>\u8fd9\u4e3b\u8981\u4e0e\u901a\u8fc7 <code>langgraph dev</code> \u547d\u4ee4\u4f7f\u7528\u5f00\u53d1\u670d\u52a1\u5668\u7684\u4e0a\u4e0b\u6587\u76f8\u5173\u3002\u5c06 <code>LOG_COLOR</code> \u8bbe\u7f6e\u4e3a <code>true</code>,\u4ee5\u5728\u4f7f\u7528\u9ed8\u8ba4\u63a7\u5236\u53f0\u6e32\u67d3\u5668\u65f6\u542f\u7528 ANSI \u989c\u8272\u63a7\u5236\u53f0\u8f93\u51fa\u3002\u901a\u8fc7\u5c06\u6b64\u53d8\u91cf\u8bbe\u7f6e\u4e3a <code>false</code> \u6765\u7981\u7528\u989c\u8272\u8f93\u51fa\u4f1a\u4ea7\u751f\u5355\u8272\u65e5\u5fd7\u3002\u9ed8\u8ba4\u4e3a <code>true</code>\u3002</p>"},{"location":"cloud/reference/env_var/#log_level","title":"<code>LOG_LEVEL</code>","text":"<p>\u914d\u7f6e\u65e5\u5fd7\u7ea7\u522b\u3002\u9ed8\u8ba4\u4e3a <code>INFO</code>\u3002</p>"},{"location":"cloud/reference/env_var/#log_json","title":"<code>LOG_JSON</code>","text":"<p>\u5c06 <code>LOG_JSON</code> \u8bbe\u7f6e\u4e3a <code>true</code>,\u4ee5\u4f7f\u7528\u914d\u7f6e\u7684 <code>JSONRenderer</code> \u5c06\u6240\u6709\u65e5\u5fd7\u6d88\u606f\u5448\u73b0\u4e3a JSON \u5bf9\u8c61\u3002\u8fd9\u4f1a\u751f\u6210\u7ed3\u6784\u5316\u65e5\u5fd7,\u53ef\u4ee5\u8f7b\u677e\u5730\u7531\u65e5\u5fd7\u7ba1\u7406\u7cfb\u7edf\u89e3\u6790\u6216\u6444\u53d6\u3002\u9ed8\u8ba4\u4e3a <code>false</code>\u3002</p>"},{"location":"cloud/reference/env_var/#mount_prefix","title":"<code>MOUNT_PREFIX</code>","text":"<p>\u4ec5\u5728\u81ea\u6258\u7ba1\u90e8\u7f72\u4e2d\u5141\u8bb8</p> <p><code>MOUNT_PREFIX</code> \u73af\u5883\u53d8\u91cf\u4ec5\u5728\u81ea\u6258\u7ba1\u90e8\u7f72\u6a21\u578b\u4e2d\u5141\u8bb8,LangGraph Platform SaaS \u5c06\u4e0d\u5141\u8bb8\u6b64\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u8bbe\u7f6e <code>MOUNT_PREFIX</code> \u4ee5\u5728\u7279\u5b9a\u8def\u5f84\u524d\u7f00\u4e0b\u63d0\u4f9b LangGraph Server \u670d\u52a1\u3002\u8fd9\u5bf9\u4e8e\u670d\u52a1\u5668\u4f4d\u4e8e\u9700\u8981\u7279\u5b9a\u8def\u5f84\u524d\u7f00\u7684\u53cd\u5411\u4ee3\u7406\u6216\u8d1f\u8f7d\u5747\u8861\u5668\u540e\u9762\u7684\u90e8\u7f72\u5f88\u6709\u7528\u3002</p> <p>\u4f8b\u5982,\u5982\u679c\u8981\u5728 <code>https://example.com/langgraph</code> \u4e0b\u63d0\u4f9b\u670d\u52a1,\u8bf7\u5c06 <code>MOUNT_PREFIX</code> \u8bbe\u7f6e\u4e3a <code>/langgraph</code>\u3002</p>"},{"location":"cloud/reference/env_var/#n_jobs_per_worker","title":"<code>N_JOBS_PER_WORKER</code>","text":"<p>LangGraph Server \u4efb\u52a1\u961f\u5217\u7684\u6bcf\u4e2a\u5de5\u4f5c\u5668\u7684\u4f5c\u4e1a\u6570\u3002\u9ed8\u8ba4\u4e3a <code>10</code>\u3002</p>"},{"location":"cloud/reference/env_var/#postgres_uri_custom","title":"<code>POSTGRES_URI_CUSTOM</code>","text":"<p>\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762</p> <p>\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u3002</p> <p>\u6307\u5b9a <code>POSTGRES_URI_CUSTOM</code> \u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\u3002<code>POSTGRES_URI_CUSTOM</code> \u7684\u503c\u5fc5\u987b\u662f\u6709\u6548\u7684 Postgres \u8fde\u63a5 URI\u3002</p> <p>Postgres:</p> <ul> <li>\u7248\u672c 15.8 \u6216\u66f4\u9ad8\u7248\u672c\u3002</li> <li>\u5fc5\u987b\u5b58\u5728\u521d\u59cb\u6570\u636e\u5e93,\u5e76\u4e14\u8fde\u63a5 URI \u5fc5\u987b\u5f15\u7528\u8be5\u6570\u636e\u5e93\u3002</li> </ul> <p>\u63a7\u5236\u5e73\u9762\u529f\u80fd:</p> <ul> <li>\u5982\u679c\u6307\u5b9a\u4e86 <code>POSTGRES_URI_CUSTOM</code>,LangGraph \u63a7\u5236\u5e73\u9762\u5c06\u4e0d\u4f1a\u4e3a\u670d\u52a1\u5668\u914d\u7f6e\u6570\u636e\u5e93\u3002</li> <li>\u5982\u679c\u5220\u9664\u4e86 <code>POSTGRES_URI_CUSTOM</code>,LangGraph \u63a7\u5236\u5e73\u9762\u5c06\u4e0d\u4f1a\u4e3a\u670d\u52a1\u5668\u914d\u7f6e\u6570\u636e\u5e93,\u4e5f\u4e0d\u4f1a\u5220\u9664\u5916\u90e8\u7ba1\u7406\u7684 Postgres \u5b9e\u4f8b\u3002</li> <li>\u5982\u679c\u5220\u9664\u4e86 <code>POSTGRES_URI_CUSTOM</code>,\u4fee\u8ba2\u7248\u7684\u90e8\u7f72\u5c06\u4e0d\u4f1a\u6210\u529f\u3002\u4e00\u65e6\u6307\u5b9a\u4e86 <code>POSTGRES_URI_CUSTOM</code>,\u5fc5\u987b\u59cb\u7ec8\u5728\u90e8\u7f72\u7684\u6574\u4e2a\u751f\u547d\u5468\u671f\u4e2d\u8bbe\u7f6e\u5b83\u3002</li> <li>\u5982\u679c\u5220\u9664\u90e8\u7f72,LangGraph \u63a7\u5236\u5e73\u9762\u5c06\u4e0d\u4f1a\u5220\u9664\u5916\u90e8\u7ba1\u7406\u7684 Postgres \u5b9e\u4f8b\u3002</li> <li>\u53ef\u4ee5\u66f4\u65b0 <code>POSTGRES_URI_CUSTOM</code> \u7684\u503c\u3002\u4f8b\u5982,\u53ef\u4ee5\u66f4\u65b0 URI \u4e2d\u7684\u5bc6\u7801\u3002</li> </ul> <p>\u6570\u636e\u5e93\u8fde\u63a5:</p> <ul> <li>\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\u5fc5\u987b\u53ef\u4f9b LangGraph Server \u8bbf\u95ee\u3002\u7528\u6237\u8d1f\u8d23\u786e\u4fdd\u8fde\u63a5\u6027\u3002</li> </ul>"},{"location":"cloud/reference/env_var/#redis_cluster","title":"<code>REDIS_CLUSTER</code>","text":"<p>\u4ec5\u5728\u81ea\u6258\u7ba1\u90e8\u7f72\u4e2d\u5141\u8bb8</p> <p>Redis \u96c6\u7fa4\u6a21\u5f0f\u4ec5\u5728\u81ea\u6258\u7ba1\u90e8\u7f72\u6a21\u578b\u4e2d\u53ef\u7528,LangGraph Platform SaaS \u5c06\u9ed8\u8ba4\u4e3a\u4f60\u914d\u7f6e redis \u5b9e\u4f8b\u3002</p> <p>\u5c06 <code>REDIS_CLUSTER</code> \u8bbe\u7f6e\u4e3a <code>True</code> \u4ee5\u542f\u7528 Redis \u96c6\u7fa4\u6a21\u5f0f\u3002\u542f\u7528\u540e,\u7cfb\u7edf\u5c06\u4f7f\u7528\u96c6\u7fa4\u6a21\u5f0f\u8fde\u63a5\u5230 Redis\u3002\u8fd9\u5728\u8fde\u63a5\u5230 Redis \u96c6\u7fa4\u90e8\u7f72\u65f6\u5f88\u6709\u7528\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>False</code>\u3002</p>"},{"location":"cloud/reference/env_var/#redis_key_prefix","title":"<code>REDIS_KEY_PREFIX</code>","text":"<p>\u5728 API Server \u7248\u672c 0.1.9+ \u4e2d\u53ef\u7528</p> <p>\u6b64\u73af\u5883\u53d8\u91cf\u5728 API Server \u7248\u672c 0.1.9 \u53ca\u66f4\u9ad8\u7248\u672c\u4e2d\u53d7\u652f\u6301\u3002</p> <p>\u6307\u5b9a Redis \u952e\u7684\u524d\u7f00\u3002\u8fd9\u5141\u8bb8\u591a\u4e2a LangGraph Server \u5b9e\u4f8b\u901a\u8fc7\u4f7f\u7528\u4e0d\u540c\u7684\u952e\u524d\u7f00\u6765\u5171\u4eab\u540c\u4e00\u4e2a Redis \u5b9e\u4f8b\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>''</code>\u3002</p>"},{"location":"cloud/reference/env_var/#redis_uri_custom","title":"<code>REDIS_URI_CUSTOM</code>","text":"<p>\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762</p> <p>\u81ea\u5b9a\u4e49 Redis \u5b9e\u4f8b\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u3002</p> <p>\u6307\u5b9a <code>REDIS_URI_CUSTOM</code> \u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 Redis \u5b9e\u4f8b\u3002<code>REDIS_URI_CUSTOM</code> \u7684\u503c\u5fc5\u987b\u662f\u6709\u6548\u7684 Redis \u8fde\u63a5 URI\u3002</p>"},{"location":"cloud/reference/env_var/#resumable_stream_ttl_seconds","title":"<code>RESUMABLE_STREAM_TTL_SECONDS</code>","text":"<p>Redis \u4e2d\u53ef\u6062\u590d\u6d41\u6570\u636e\u7684\u751f\u5b58\u65f6\u95f4(\u4ee5\u79d2\u4e3a\u5355\u4f4d)\u3002</p> <p>\u5f53\u521b\u5efa\u8fd0\u884c\u5e76\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u65f6,\u53ef\u4ee5\u5c06\u6d41\u914d\u7f6e\u4e3a\u53ef\u6062\u590d(\u4f8b\u5982 <code>stream_resumable=True</code>)\u3002\u5982\u679c\u6d41\u662f\u53ef\u6062\u590d\u7684,\u6d41\u7684\u8f93\u51fa\u5c06\u4e34\u65f6\u5b58\u50a8\u5728 Redis \u4e2d\u3002\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>RESUMABLE_STREAM_TTL_SECONDS</code> \u6765\u914d\u7f6e\u6b64\u6570\u636e\u7684 TTL\u3002</p> <p>\u6709\u5173\u5982\u4f55\u5b9e\u73b0\u53ef\u6062\u590d\u6d41\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 Python \u548c JS/TS SDK\u3002</p> <p>\u9ed8\u8ba4\u4e3a <code>120</code> \u79d2\u3002</p>"},{"location":"cloud/reference/langgraph_server_changelog/","title":"LangGraph Server \u66f4\u65b0\u65e5\u5fd7","text":"<p>\u6ce8\u610f: \u6b64\u66f4\u65b0\u65e5\u5fd7\u4e0d\u518d\u4e3b\u52a8\u7ef4\u62a4\u3002\u6709\u5173\u6700\u65b0\u7684 LangGraph Server \u66f4\u65b0\u65e5\u5fd7,\u8bf7\u8bbf\u95ee\u6211\u4eec\u7684\u65b0\u6587\u6863\u7ad9\u70b9: LangGraph Server \u66f4\u65b0\u65e5\u5fd7</p> <p>LangGraph Server \u662f\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u57fa\u4e8e\u667a\u80fd\u4ee3\u7406\u7684\u5e94\u7528\u7a0b\u5e8f\u7684 API \u5e73\u53f0\u3002\u5b83\u63d0\u4f9b\u5185\u7f6e\u6301\u4e45\u5316\u3001\u4efb\u52a1\u961f\u5217,\u5e76\u652f\u6301\u5927\u89c4\u6a21\u90e8\u7f72\u3001\u914d\u7f6e\u548c\u8fd0\u884c\u52a9\u624b(\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41)\u3002\u6b64\u66f4\u65b0\u65e5\u5fd7\u8bb0\u5f55\u4e86 LangGraph Server \u7248\u672c\u7684\u6240\u6709\u91cd\u8981\u66f4\u65b0\u3001\u529f\u80fd\u548c\u4fee\u590d\u3002</p>"},{"location":"cloud/reference/langgraph_server_changelog/#v02111-2025-07-29","title":"v0.2.111 (2025-07-29)","text":"<ul> <li>\u5728\u8fde\u63a5\u65f6\u7acb\u5373\u542f\u52a8\u5fc3\u8df3,\u4ee5\u9632\u6b62\u957f\u65f6\u95f4\u542f\u52a8\u671f\u95f4\u7684 JS \u56fe\u6d41\u5f0f\u4f20\u8f93\u9519\u8bef\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02110-2025-07-29","title":"v0.2.110 (2025-07-29)","text":"<ul> <li>\u4e3a\u9664\u6d41\u4e4b\u5916\u7684\u6240\u6709\u64cd\u4f5c\u6dfb\u52a0\u4e2d\u65ad\u4f5c\u4e3a\u9ed8\u8ba4\u503c,\u4ee5\u4fdd\u6301\u4e00\u81f4\u7684\u884c\u4e3a\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02109-2025-07-28","title":"v0.2.109 (2025-07-28)","text":"<ul> <li>\u4fee\u590d\u4e86\u672a\u8bbe\u7f6e <code>config_type</code> \u65f6\u914d\u7f6e\u67b6\u6784\u7f3a\u5931\u7684\u95ee\u9898\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02108-2025-07-28","title":"v0.2.108 (2025-07-28)","text":"<ul> <li>\u6dfb\u52a0\u4e86\u5bf9 langgraph v0.6 \u7684\u517c\u5bb9\u6027,\u5305\u62ec\u65b0\u7684\u4e0a\u4e0b\u6587 API \u652f\u6301\u548c\u8fc1\u79fb,\u4ee5\u589e\u5f3a\u52a9\u624b\u64cd\u4f5c\u4e2d\u7684\u4e0a\u4e0b\u6587\u5904\u7406\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02107-2025-07-27","title":"v0.2.107 (2025-07-27)","text":"<ul> <li>\u5b9e\u73b0\u4e86\u8eab\u4efd\u9a8c\u8bc1\u8fc7\u7a0b\u7684\u7f13\u5b58\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u5408\u5e76\u8ba1\u6570\u548c\u9009\u62e9\u67e5\u8be2\u4ee5\u63d0\u9ad8\u6570\u636e\u5e93\u67e5\u8be2\u6548\u7387\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02106-2025-07-27","title":"v0.2.106 (2025-07-27)","text":"<ul> <li>\u8bb0\u5f55\u8fd0\u884c\u662f\u5426\u4f7f\u7528\u53ef\u6062\u590d\u6d41\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02105-2025-07-27","title":"v0.2.105 (2025-07-27)","text":"<ul> <li>\u6dfb\u52a0\u4e86 <code>/heapdump</code> \u7aef\u70b9\u4ee5\u6355\u83b7\u548c\u4fdd\u5b58 JS \u8fdb\u7a0b\u5806\u6570\u636e\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02103-2025-07-25","title":"v0.2.103 (2025-07-25)","text":"<ul> <li>\u66f4\u6b63\u4e86\u5143\u6570\u636e\u7aef\u70b9\u4ee5\u786e\u4fdd\u51c6\u786e\u7684\u6570\u636e\u68c0\u7d22\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02102-2025-07-24","title":"v0.2.102 (2025-07-24)","text":"<ul> <li>\u5728 wait \u65b9\u6cd5\u4e2d\u6355\u83b7\u4e2d\u65ad\u4e8b\u4ef6\u4ee5\u4fdd\u7559\u65e7\u7248\u884c\u4e3a,\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u6d41\u5f0f\u4f20\u8f93\u66f4\u65b0\u3002</li> <li>\u5728 JavaScript \u73af\u5883\u4e2d\u6dfb\u52a0\u4e86\u5bf9 SDK structlog \u7684\u652f\u6301,\u589e\u5f3a\u4e86\u65e5\u5fd7\u8bb0\u5f55\u529f\u80fd\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v02101-2025-07-24","title":"v0.2.101 (2025-07-24)","text":"<ul> <li>\u5bf9\u81ea\u6258\u7ba1\u73af\u5883\u4f7f\u7528\u6b63\u786e\u7684\u5143\u6570\u636e\u7aef\u70b9,\u89e3\u51b3\u4e86\u8bbf\u95ee\u95ee\u9898\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0299-2025-07-22","title":"v0.2.99 (2025-07-22)","text":"<ul> <li>\u901a\u8fc7\u6dfb\u52a0\u5185\u5b58\u7f13\u5b58\u5e76\u66f4\u6709\u6548\u5730\u5904\u7406 Redis \u8fde\u63a5\u9519\u8bef\u6765\u6539\u8fdb\u8bb8\u53ef\u8bc1\u9a8c\u8bc1\u3002</li> <li>\u81ea\u52a8\u4ece\u5185\u5b58\u4e2d\u5220\u9664\u4ece <code>langgraph.json</code> \u4e2d\u5220\u9664\u7684\u667a\u80fd\u4ee3\u7406,\u4ee5\u9632\u6b62\u6301\u4e45\u5316\u95ee\u9898\u3002</li> <li>\u786e\u4fdd\u751f\u6210\u7684 UI \u7684 UI \u547d\u540d\u7a7a\u95f4\u662f\u6709\u6548\u7684 JavaScript \u5c5e\u6027\u540d\u79f0,\u4ee5\u9632\u6b62\u9519\u8bef\u3002</li> <li>\u63d0\u9ad8\u4e86 422 \u9519\u8bef\u4ee5\u6539\u8fdb\u8bf7\u6c42\u9a8c\u8bc1\u53cd\u9988\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0298-2025-07-19","title":"v0.2.98 (2025-07-19)","text":"<ul> <li>\u6dfb\u52a0\u4e86 langgraph \u8282\u70b9\u4e0a\u4e0b\u6587\u4ee5\u6539\u8fdb\u65e5\u5fd7\u8fc7\u6ee4\u548c\u8ddf\u8e2a\u53ef\u89c1\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0297-2025-07-19","title":"v0.2.97 (2025-07-19)","text":"<ul> <li>\u4fee\u590d\u4e86\u5728\u9694\u79bb\u540e\u53f0\u5faa\u73af\u4e0a\u53d1\u751f\u7684 ckpt \u6444\u53d6\u5de5\u4f5c\u5668\u7684\u8c03\u5ea6\u95ee\u9898\u3002</li> <li>\u786e\u4fdd\u961f\u5217\u5de5\u4f5c\u5668\u4ec5\u5728\u6240\u6709\u8fc1\u79fb\u5b8c\u6210\u540e\u542f\u52a8\u3002</li> <li>\u4e3a\u7ebf\u7a0b\u72b6\u6001\u95ee\u9898\u6dfb\u52a0\u4e86\u66f4\u8be6\u7ec6\u7684\u9519\u8bef\u6d88\u606f,\u5e76\u5728\u72b6\u6001\u66f4\u65b0\u5931\u8d25\u65f6\u6539\u8fdb\u4e86\u54cd\u5e94\u5904\u7406\u3002</li> <li>\u5728\u68c0\u7d22\u7ebf\u7a0b\u72b6\u6001\u65f6\u516c\u5f00\u4e2d\u65ad ID,\u4ee5\u589e\u5f3a API \u54cd\u5e94\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0296-2025-07-17","title":"v0.2.96 (2025-07-17)","text":"<ul> <li>\u4e3a\u53ef\u914d\u7f6e\u7684\u6807\u5934\u6a21\u5f0f\u6dfb\u52a0\u4e86\u56de\u9000\u673a\u5236,\u4ee5\u66f4\u6709\u6548\u5730\u5904\u7406\u6392\u9664/\u5305\u542b\u8bbe\u7f6e\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0295-2025-07-17","title":"v0.2.95 (2025-07-17)","text":"<ul> <li>\u907f\u514d\u5728 future \u5df2\u5b8c\u6210\u65f6\u8bbe\u7f6e\u5b83,\u4ee5\u9632\u6b62\u5197\u4f59\u64cd\u4f5c\u3002</li> <li>\u901a\u8fc7\u5c06 <code>typing.TypedDict</code> \u5207\u6362\u5230 <code>typing_extensions.TypedDict</code> \u6765\u89e3\u51b3 CI \u4e2d\u7684\u517c\u5bb9\u6027\u9519\u8bef,\u9002\u7528\u4e8e Python 3.12 \u4ee5\u4e0b\u7248\u672c\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0294-2025-07-16","title":"v0.2.94 (2025-07-16)","text":"<ul> <li>\u901a\u8fc7\u4e3a langgraph 0.5 \u53ca\u66f4\u9ad8\u7248\u672c\u7701\u7565\u5f85\u5904\u7406\u7684\u53d1\u9001\u6765\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u6539\u8fdb\u4e86\u670d\u52a1\u5668\u542f\u52a8\u65e5\u5fd7,\u4ee5\u5728\u8bbe\u7f6e DD_API_KEY \u73af\u5883\u53d8\u91cf\u65f6\u63d0\u4f9b\u66f4\u6e05\u6670\u7684\u8b66\u544a\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0293-2025-07-16","title":"v0.2.93 (2025-07-16)","text":"<ul> <li>\u5220\u9664\u4e86\u8fd0\u884c\u5143\u6570\u636e\u7684 GIN \u7d22\u5f15\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0292-2025-07-16","title":"v0.2.92 (2025-07-16)","text":"<ul> <li>\u542f\u7528\u4e86 blob \u548c\u68c0\u67e5\u70b9\u7684\u590d\u5236\u529f\u80fd,\u63d0\u9ad8\u4e86\u6570\u636e\u7ba1\u7406\u7075\u6d3b\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0291-2025-07-16","title":"v0.2.91 (2025-07-16)","text":"<ul> <li>\u901a\u8fc7\u5185\u8054\u5c0f\u503c(null\u3001numeric\u3001str \u7b49)\u51cf\u5c11\u5bf9 <code>checkpoint_blobs</code> \u8868\u7684\u5199\u5165\u3002\u8fd9\u610f\u5473\u7740\u6211\u4eec\u4e0d\u9700\u8981\u4e3a\u672a\u66f4\u65b0\u7684\u901a\u9053\u5b58\u50a8\u989d\u5916\u7684\u503c\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0290-2025-07-16","title":"v0.2.90 (2025-07-16)","text":"<ul> <li>\u901a\u8fc7\u8282\u70b9\u672c\u5730\u540e\u53f0\u961f\u5217\u6539\u8fdb\u68c0\u67e5\u70b9\u5199\u5165\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0289-2025-07-15","title":"v0.2.89 (2025-07-15)","text":"<ul> <li>\u901a\u8fc7\u5220\u9664\u5916\u952e\u5e76\u66f4\u65b0\u8bb0\u5f55\u5668,\u5c06\u68c0\u67e5\u70b9\u5199\u5165\u4e0e\u7ebf\u7a0b/\u8fd0\u884c\u72b6\u6001\u89e3\u8026,\u4ee5\u9632\u6b62\u8d85\u65f6\u76f8\u5173\u7684\u6545\u969c\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0288-2025-07-14","title":"v0.2.88 (2025-07-14)","text":"<ul> <li>\u5220\u9664\u4e86 <code>run</code> \u8868\u4e2d <code>thread</code> \u7684\u5916\u952e\u7ea6\u675f,\u4ee5\u7b80\u5316\u6570\u636e\u5e93\u67b6\u6784\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0287-2025-07-14","title":"v0.2.87 (2025-07-14)","text":"<ul> <li>\u4e3a Redis \u5de5\u4f5c\u5668\u4fe1\u53f7\u6dfb\u52a0\u4e86\u66f4\u8be6\u7ec6\u7684\u65e5\u5fd7\u4ee5\u6539\u8fdb\u8c03\u8bd5\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0286-2025-07-11","title":"v0.2.86 (2025-07-11)","text":"<ul> <li>\u5728 <code>/mcp</code> \u7aef\u70b9\u4e2d\u9075\u5b88\u5de5\u5177\u63cf\u8ff0,\u4ee5\u7b26\u5408\u9884\u671f\u529f\u80fd\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0285-2025-07-10","title":"v0.2.85 (2025-07-10)","text":"<ul> <li>\u4e3a <code>runs/wait</code> \u6dfb\u52a0\u4e86\u5bf9 <code>on_disconnect</code> \u5b57\u6bb5\u7684\u652f\u6301,\u5e76\u5305\u542b\u65ad\u5f00\u8fde\u63a5\u65e5\u5fd7\u4ee5\u4fbf\u66f4\u597d\u5730\u8c03\u8bd5\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0284-2025-07-09","title":"v0.2.84 (2025-07-09)","text":"<ul> <li>\u5220\u9664\u4e86\u4e0d\u5fc5\u8981\u7684\u72b6\u6001\u66f4\u65b0\u4ee5\u7b80\u5316\u7ebf\u7a0b\u5904\u7406,\u5e76\u5c06\u7248\u672c\u66f4\u65b0\u4e3a 0.2.84\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0283-2025-07-09","title":"v0.2.83 (2025-07-09)","text":"<ul> <li>\u5c06\u53ef\u6062\u590d\u6d41\u7684\u9ed8\u8ba4\u751f\u5b58\u65f6\u95f4\u51cf\u5c11\u5230 2 \u5206\u949f\u3002</li> <li>\u589e\u5f3a\u4e86\u6570\u636e\u63d0\u4ea4\u903b\u8f91,\u6839\u636e\u8bb8\u53ef\u8bc1\u914d\u7f6e\u5411 Beacon \u548c LangSmith \u5b9e\u4f8b\u53d1\u9001\u6570\u636e\u3002</li> <li>\u5728\u914d\u7f6e\u7aef\u70b9\u65f6,\u542f\u7528\u5411 Langsmith \u5b9e\u4f8b\u63d0\u4ea4\u81ea\u6258\u7ba1\u6570\u636e\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0282-2025-07-03","title":"v0.2.82 (2025-07-03)","text":"<ul> <li>\u901a\u8fc7\u4f7f\u7528 join \u5b9e\u73b0\u9501\u6765\u89e3\u51b3\u540e\u53f0\u8fd0\u884c\u4e2d\u7684\u7ade\u6001\u6761\u4ef6,\u786e\u4fdd\u8de8 CTE \u7684\u53ef\u9760\u6267\u884c\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0281-2025-07-03","title":"v0.2.81 (2025-07-03)","text":"<ul> <li>\u901a\u8fc7\u51cf\u5c11\u521d\u59cb\u7b49\u5f85\u65f6\u95f4\u6765\u4f18\u5316\u8fd0\u884c\u6d41,\u4ee5\u63d0\u9ad8\u65e7\u8fd0\u884c\u6216\u4e0d\u5b58\u5728\u8fd0\u884c\u7684\u54cd\u5e94\u901f\u5ea6\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0280-2025-07-03","title":"v0.2.80 (2025-07-03)","text":"<ul> <li>\u66f4\u6b63\u4e86 <code>logger.ainfo()</code> API \u8c03\u7528\u4e2d\u7684\u53c2\u6570\u4f20\u9012\u4ee5\u89e3\u51b3 TypeError\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0279-2025-07-02","title":"v0.2.79 (2025-07-02)","text":"<ul> <li>\u901a\u8fc7\u66f4\u6b63 JSON \u5e8f\u5217\u5316\u4ee5\u6b63\u786e\u5904\u7406\u5c3e\u90e8\u659c\u6760,\u4fee\u590d\u4e86\u8fdc\u7a0b\u56fe\u68c0\u67e5\u70b9\u4e2d\u7684 JsonDecodeError\u3002</li> <li>\u5f15\u5165\u4e86\u914d\u7f6e\u6807\u5fd7\u4ee5\u5728\u6240\u6709\u8def\u7531\u4e2d\u5168\u5c40\u7981\u7528 webhook\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0278-2025-07-02","title":"v0.2.78 (2025-07-02)","text":"<ul> <li>\u4e3a webhook \u8c03\u7528\u6dfb\u52a0\u4e86\u8d85\u65f6\u91cd\u8bd5\u4ee5\u63d0\u9ad8\u53ef\u9760\u6027\u3002</li> <li>\u6dfb\u52a0\u4e86 HTTP \u8bf7\u6c42\u6307\u6807,\u5305\u62ec\u8bf7\u6c42\u8ba1\u6570\u548c\u5ef6\u8fdf\u76f4\u65b9\u56fe,\u4ee5\u589e\u5f3a\u76d1\u63a7\u529f\u80fd\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0277-2025-07-02","title":"v0.2.77 (2025-07-02)","text":"<ul> <li>\u6dfb\u52a0\u4e86 HTTP \u6307\u6807\u4ee5\u6539\u8fdb\u6027\u80fd\u76d1\u63a7\u3002</li> <li>\u66f4\u6539\u4e86 Redis \u7f13\u5b58\u5206\u9694\u7b26\u4ee5\u51cf\u5c11\u4e0e\u5b50\u56fe\u6d88\u606f\u540d\u79f0\u7684\u51b2\u7a81\u5e76\u66f4\u65b0\u4e86\u7f13\u5b58\u884c\u4e3a\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0276-2025-07-01","title":"v0.2.76 (2025-07-01)","text":"<ul> <li>\u66f4\u65b0\u4e86 Redis \u7f13\u5b58\u5206\u9694\u7b26\u4ee5\u9632\u6b62\u4e0e\u5b50\u56fe\u6d88\u606f\u51b2\u7a81\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0274-2025-06-30","title":"v0.2.74 (2025-06-30)","text":"<ul> <li>\u5728\u9694\u79bb\u5faa\u73af\u4e2d\u8c03\u5ea6 webhook,\u4ee5\u786e\u4fdd\u7ebf\u7a0b\u5b89\u5168\u64cd\u4f5c\u5e76\u9632\u6b62 PYTHONASYNCIODEBUG=1 \u7684\u9519\u8bef\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0273-2025-06-27","title":"v0.2.73 (2025-06-27)","text":"<ul> <li>\u4fee\u590d\u4e86\u65e0\u9650\u5e27\u5faa\u73af\u95ee\u9898,\u5e76\u7531\u4e8e structlog \u7684\u610f\u5916\u884c\u4e3a\u800c\u5220\u9664\u4e86 dict_parser\u3002</li> <li>\u5728\u8fd0\u884c\u53d6\u6d88\u671f\u95f4\u53d1\u751f\u6b7b\u9501\u65f6\u629b\u51fa 409 \u9519\u8bef,\u4ee5\u4f18\u96c5\u5730\u5904\u7406\u9501\u51b2\u7a81\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0272-2025-06-27","title":"v0.2.72 (2025-06-27)","text":"<ul> <li>\u786e\u4fdd\u4e0e\u672a\u6765 langgraph \u7248\u672c\u7684\u517c\u5bb9\u6027\u3002</li> <li>\u5b9e\u73b0\u4e86 409 \u54cd\u5e94\u72b6\u6001\u4ee5\u5904\u7406\u53d6\u6d88\u671f\u95f4\u7684\u6b7b\u9501\u95ee\u9898\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0271-2025-06-26","title":"v0.2.71 (2025-06-26)","text":"<ul> <li>\u6539\u8fdb\u4e86\u65e5\u5fd7\u8bb0\u5f55,\u4ee5\u66f4\u6e05\u6670\u5730\u8be6\u7ec6\u8bf4\u660e\u65e5\u5fd7\u7c7b\u578b\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0270-2025-06-26","title":"v0.2.70 (2025-06-26)","text":"<ul> <li>\u6539\u8fdb\u4e86\u9519\u8bef\u5904\u7406,\u4ee5\u66f4\u597d\u5730\u533a\u5206\u548c\u8bb0\u5f55\u7531\u7528\u6237\u5f15\u8d77\u7684 TimeoutError \u4e0e\u5185\u90e8\u8fd0\u884c\u8d85\u65f6\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0269-2025-06-26","title":"v0.2.69 (2025-06-26)","text":"<ul> <li>\u4e3a crons API \u6dfb\u52a0\u4e86\u6392\u5e8f\u548c\u5206\u9875,\u5e76\u66f4\u65b0\u4e86\u67b6\u6784\u5b9a\u4e49\u4ee5\u63d0\u9ad8\u51c6\u786e\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0266-2025-06-26","title":"v0.2.66 (2025-06-26)","text":"<ul> <li>\u4fee\u590d\u4e86\u4f7f\u7528 <code>on_not_exist=\"create\"</code> \u521b\u5efa\u5177\u6709\u76f8\u540c thread_id \u7684\u591a\u4e2a\u8fd0\u884c\u65f6\u7684 404 \u9519\u8bef\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0265-2025-06-25","title":"v0.2.65 (2025-06-25)","text":"<ul> <li>\u786e\u4fdd\u4ec5\u5728\u5fc5\u8981\u65f6\u8fd4\u56de <code>assistant_versions</code> \u4e2d\u7684\u5b57\u6bb5\u3002</li> <li>\u786e\u4fdd\u5185\u5b58\u4e2d\u548c PostgreSQL \u7528\u6237\u7684\u6570\u636e\u7c7b\u578b\u4e00\u81f4,\u6539\u8fdb\u5185\u90e8\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0264-2025-06-24","title":"v0.2.64 (2025-06-24)","text":"<ul> <li>\u4e3a\u7248\u672c\u6761\u76ee\u6dfb\u52a0\u4e86\u63cf\u8ff0\u4ee5\u63d0\u9ad8\u6e05\u6670\u5ea6\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0262-2025-06-23","title":"v0.2.62 (2025-06-23)","text":"<ul> <li>\u6539\u8fdb\u4e86 JS Studio \u4e2d\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u5904\u7406\u3002</li> <li>\u4e3a\u6307\u6807\u7aef\u70b9\u6dfb\u52a0\u4e86 Prometheus \u683c\u5f0f\u7684\u8fd0\u884c\u7edf\u8ba1\u4fe1\u606f,\u4ee5\u4fbf\u66f4\u597d\u5730\u76d1\u63a7\u3002</li> <li>\u4e3a\u6307\u6807\u7aef\u70b9\u6dfb\u52a0\u4e86 Prometheus \u683c\u5f0f\u7684\u8fd0\u884c\u7edf\u8ba1\u4fe1\u606f\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0261-2025-06-20","title":"v0.2.61 (2025-06-20)","text":"<ul> <li>\u4e3a Redis \u8fde\u63a5\u8bbe\u7f6e\u6700\u5927\u7a7a\u95f2\u65f6\u95f4,\u4ee5\u9632\u6b62\u4e0d\u5fc5\u8981\u7684\u5f00\u653e\u8fde\u63a5\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0260-2025-06-20","title":"v0.2.60 (2025-06-20)","text":"<ul> <li>\u589e\u5f3a\u4e86\u9519\u8bef\u65e5\u5fd7\u8bb0\u5f55,\u4ee5\u5305\u542b\u5b57\u5178\u64cd\u4f5c\u7684\u56de\u6eaf\u8be6\u7ec6\u4fe1\u606f\u3002</li> <li>\u6dfb\u52a0\u4e86 <code>/metrics</code> \u7aef\u70b9\u4ee5\u516c\u5f00\u961f\u5217\u5de5\u4f5c\u5668\u6307\u6807\u4ee5\u8fdb\u884c\u76d1\u63a7\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0257-2025-06-18","title":"v0.2.57 (2025-06-18)","text":"<ul> <li>\u4ece\u53ef\u91cd\u8bd5\u5f02\u5e38\u4e2d\u5220\u9664\u4e86 CancelledError,\u4ee5\u5141\u8bb8\u672c\u5730\u4e2d\u65ad,\u540c\u65f6\u4fdd\u6301\u5de5\u4f5c\u5668\u7684\u53ef\u91cd\u8bd5\u6027\u3002</li> <li>\u5f15\u5165\u4e86\u4e2d\u95f4\u4ef6,\u4ee5\u5728\u63a5\u6536\u5230 SIGINT \u65f6\u5728\u5b8c\u6210\u4f20\u8f93\u4e2d\u7684\u8bf7\u6c42\u540e\u4f18\u96c5\u5730\u5173\u95ed\u670d\u52a1\u5668\u3002</li> <li>\u51cf\u5c11\u4e86\u68c0\u67e5\u70b9\u4e2d\u5b58\u50a8\u7684\u5143\u6570\u636e,\u4ec5\u5305\u542b\u5fc5\u8981\u7684\u4fe1\u606f\u3002</li> <li>\u6539\u8fdb\u4e86 join \u8fd0\u884c\u4e2d\u7684\u9519\u8bef\u5904\u7406,\u4ee5\u5728\u5b58\u5728\u65f6\u8fd4\u56de\u9519\u8bef\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0256-2025-06-17","title":"v0.2.56 (2025-06-17)","text":"<ul> <li>\u901a\u8fc7\u6dfb\u52a0 SIGTERM \u4fe1\u53f7\u5904\u7406\u7a0b\u5e8f\u6765\u63d0\u9ad8\u5e94\u7528\u7a0b\u5e8f\u7a33\u5b9a\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0255-2025-06-17","title":"v0.2.55 (2025-06-17)","text":"<ul> <li>\u6539\u8fdb\u4e86\u961f\u5217\u5165\u53e3\u70b9\u4e2d\u53d6\u6d88\u7684\u5904\u7406\u3002</li> <li>\u6539\u8fdb\u4e86\u961f\u5217\u5165\u53e3\u70b9\u4e2d\u53d6\u6d88\u7684\u5904\u7406\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0254-2025-06-16","title":"v0.2.54 (2025-06-16)","text":"<ul> <li>\u589e\u5f3a\u4e86\u8bb8\u53ef\u8bc1\u9a8c\u8bc1\u671f\u95f4 LuaLock \u8d85\u65f6\u7684\u9519\u8bef\u6d88\u606f\u3002</li> <li>\u901a\u8fc7\u8981\u6c42\u663e\u5f0f ::text \u5f3a\u5236\u8f6c\u6362\u4fee\u590d\u4e86\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u7684 $contains \u8fc7\u6ee4\u5668,\u5e76\u76f8\u5e94\u5730\u66f4\u65b0\u4e86\u6d4b\u8bd5\u3002</li> <li>\u786e\u4fdd\u9879\u76ee\u548c\u79df\u6237 ID \u683c\u5f0f\u5316\u4e3a UUID \u4ee5\u4fdd\u6301\u4e00\u81f4\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0253-2025-06-13","title":"v0.2.53 (2025-06-13)","text":"<ul> <li>\u89e3\u51b3\u4e86\u65f6\u5e8f\u95ee\u9898,\u4ee5\u786e\u4fdd\u961f\u5217\u4ec5\u5728\u56fe\u6ce8\u518c\u540e\u542f\u52a8\u3002</li> <li>\u901a\u8fc7\u5728\u5355\u4e2a\u67e5\u8be2\u4e2d\u8bbe\u7f6e\u7ebf\u7a0b\u548c\u8fd0\u884c\u72b6\u6001\u6765\u63d0\u9ad8\u6027\u80fd,\u5e76\u5728\u68c0\u67e5\u70b9\u5199\u5165\u671f\u95f4\u589e\u5f3a\u9519\u8bef\u5904\u7406\u3002</li> <li>\u5c06\u9ed8\u8ba4\u540e\u53f0\u5bbd\u9650\u671f\u51cf\u5c11\u5230 3 \u5206\u949f\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0252-2025-06-12","title":"v0.2.52 (2025-06-12)","text":"<ul> <li>\u73b0\u5728\u5728\u7701\u7565\u65f6\u8bb0\u5f55\u9884\u671f\u7684\u56fe\u4ee5\u63d0\u9ad8\u53ef\u8ffd\u6eaf\u6027\u3002</li> <li>\u4e3a\u53ef\u6062\u590d\u6d41\u5b9e\u73b0\u4e86\u751f\u5b58\u65f6\u95f4(TTL)\u529f\u80fd\u3002</li> <li>\u901a\u8fc7\u6dfb\u52a0\u552f\u4e00\u7d22\u5f15\u548c\u4f18\u5316\u884c\u9501\u5b9a\u6765\u63d0\u9ad8\u67e5\u8be2\u6548\u7387\u548c\u4e00\u81f4\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0251-2025-06-12","title":"v0.2.51 (2025-06-12)","text":"<ul> <li>\u901a\u8fc7\u5c06\u4efb\u52a1\u6807\u8bb0\u4e3a\u51c6\u5907\u91cd\u8bd5\u6765\u5904\u7406 <code>CancelledError</code>,\u6539\u8fdb\u4e86\u5de5\u4f5c\u8fdb\u7a0b\u4e2d\u7684\u9519\u8bef\u7ba1\u7406\u3002</li> <li>\u4e3a\u5143\u6570\u636e\u548c\u65e5\u5fd7\u6dfb\u52a0\u4e86 LG API \u7248\u672c\u548c\u8bf7\u6c42 ID,\u4ee5\u4fbf\u66f4\u597d\u5730\u8ddf\u8e2a\u3002</li> <li>\u4e3a\u5143\u6570\u636e\u548c\u65e5\u5fd7\u6dfb\u52a0\u4e86 LG API \u7248\u672c\u548c\u8bf7\u6c42 ID \u4ee5\u63d0\u9ad8\u53ef\u8ffd\u6eaf\u6027\u3002</li> <li>\u901a\u8fc7\u5e76\u53d1\u521b\u5efa\u7d22\u5f15\u6765\u63d0\u9ad8\u6570\u636e\u5e93\u6027\u80fd\u3002</li> <li>\u786e\u4fdd\u4ec5\u5728\u8bbe\u7f6e Redis \u8fd0\u884c\u6807\u8bb0\u540e\u624d\u63d0\u4ea4 postgres \u5199\u5165,\u4ee5\u9632\u6b62\u7ade\u6001\u6761\u4ef6\u3002</li> <li>\u901a\u8fc7\u5728 thread_id/running \u4e0a\u6dfb\u52a0\u552f\u4e00\u7d22\u5f15\u3001\u4f18\u5316\u884c\u9501\u4ee5\u53ca\u786e\u4fdd\u786e\u5b9a\u6027\u8fd0\u884c\u9009\u62e9\u6765\u589e\u5f3a\u67e5\u8be2\u6548\u7387\u548c\u53ef\u9760\u6027\u3002</li> <li>\u901a\u8fc7\u786e\u4fdd\u4ec5\u5728\u8bbe\u7f6e Redis \u8fd0\u884c\u6807\u8bb0\u540e\u624d\u8fdb\u884c Postgres \u66f4\u65b0\u6765\u89e3\u51b3\u7ade\u6001\u6761\u4ef6\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0246-2025-06-07","title":"v0.2.46 (2025-06-07)","text":"<ul> <li>\u5728 Threads \u72b6\u6001 <code>update()</code> \u548c <code>bulk()</code> \u547d\u4ee4\u4e2d,\u4e3a\u6bcf\u4e2a\u64cd\u4f5c\u5f15\u5165\u65b0\u8fde\u63a5,\u540c\u65f6\u4fdd\u7559\u4e8b\u52a1\u7279\u6027\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0245-2025-06-05","title":"v0.2.45 (2025-06-05)","text":"<ul> <li>\u901a\u8fc7\u7ed3\u5408\u8ddf\u8e2a\u4e0a\u4e0b\u6587\u6765\u589e\u5f3a\u6d41\u5f0f\u4f20\u8f93\u529f\u80fd\u3002</li> <li>\u4ece Crons.search \u51fd\u6570\u4e2d\u5220\u9664\u4e86\u4e0d\u5fc5\u8981\u7684\u67e5\u8be2\u3002</li> <li>\u89e3\u51b3\u4e86\u4e3a\u591a\u4e2a cron \u4f5c\u4e1a\u8c03\u5ea6\u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u7684\u8fde\u63a5\u91cd\u7528\u95ee\u9898\u3002</li> <li>\u5220\u9664\u4e86 Crons.search \u51fd\u6570\u4e2d\u7684\u4e0d\u5fc5\u8981\u67e5\u8be2\u4ee5\u63d0\u9ad8\u6548\u7387\u3002</li> <li>\u901a\u8fc7\u6539\u8fdb\u8fde\u63a5\u91cd\u7528\u89e3\u51b3\u4e86\u8c03\u5ea6\u4e0b\u4e00\u6b21 cron \u8fd0\u884c\u7684\u95ee\u9898\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0244-2025-06-04","title":"v0.2.44 (2025-06-04)","text":"<ul> <li>\u589e\u5f3a\u4e86\u5de5\u4f5c\u5668\u903b\u8f91,\u4ee5\u5728\u8fbe\u5230 Redis \u6d88\u606f\u9650\u5236\u65f6\u9000\u51fa\u7ba1\u9053\u3002</li> <li>\u4e3a Redis \u6d88\u606f\u5927\u5c0f\u5f15\u5165\u4e86\u4e0a\u9650,\u9009\u9879\u53ef\u8df3\u8fc7\u5927\u4e8e 128 MB \u7684\u6d88\u606f\u4ee5\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u786e\u4fdd\u7ba1\u9053\u59cb\u7ec8\u6b63\u786e\u5173\u95ed,\u4ee5\u9632\u6b62\u8d44\u6e90\u6cc4\u6f0f\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0243-2025-06-04","title":"v0.2.43 (2025-06-04)","text":"<ul> <li>\u901a\u8fc7\u5728\u5143\u6570\u636e\u8c03\u7528\u4e2d\u7701\u7565\u65e5\u5fd7\u5e76\u786e\u4fdd\u503c\u6d41\u5f0f\u4f20\u8f93\u4e2d\u7684\u8f93\u51fa\u67b6\u6784\u5408\u89c4\u6027\u6765\u63d0\u9ad8\u6027\u80fd\u3002</li> <li>\u786e\u4fdd\u4f7f\u7528\u540e\u6b63\u786e\u5173\u95ed\u8fde\u63a5\u3002</li> <li>\u5bf9\u9f50\u8f93\u51fa\u683c\u5f0f\u4ee5\u4e25\u683c\u9075\u5b88\u6307\u5b9a\u7684\u67b6\u6784\u3002</li> <li>\u505c\u6b62\u5728\u5143\u6570\u636e\u8bf7\u6c42\u4e2d\u53d1\u9001\u5185\u90e8\u65e5\u5fd7\u4ee5\u63d0\u9ad8\u9690\u79c1\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0242-2025-06-04","title":"v0.2.42 (2025-06-04)","text":"<ul> <li>\u6dfb\u52a0\u4e86\u65f6\u95f4\u6233\u4ee5\u8ddf\u8e2a\u8bf7\u6c42\u8fd0\u884c\u7684\u5f00\u59cb\u548c\u7ed3\u675f\u3002</li> <li>\u5c06\u8ddf\u8e2a\u5668\u4fe1\u606f\u6dfb\u52a0\u5230\u914d\u7f6e\u8bbe\u7f6e\u4e2d\u3002</li> <li>\u6dfb\u52a0\u4e86\u5bf9\u8ddf\u8e2a\u4e0a\u4e0b\u6587\u6d41\u5f0f\u4f20\u8f93\u7684\u652f\u6301\u3002</li> </ul>"},{"location":"cloud/reference/langgraph_server_changelog/#v0241-2025-06-03","title":"v0.2.41 (2025-06-03)","text":"<ul> <li>\u6dfb\u52a0\u4e86\u9501\u5b9a\u673a\u5236\u4ee5\u9632\u6b62\u7ba1\u9053\u6267\u884c\u4e2d\u7684\u9519\u8bef\u3002</li> </ul>"},{"location":"cloud/reference/api/api_ref/","title":"LangGraph Server API \u53c2\u8003","text":"<p>LangGraph Server API \u53c2\u8003\u5728\u6bcf\u4e2a\u90e8\u7f72\u7684 <code>/docs</code> \u7aef\u70b9\u5904\u53ef\u7528(\u4f8b\u5982 <code>http://localhost:8124/docs</code>)\u3002</p> <p>\u70b9\u51fb\u6b64\u5904\u67e5\u770b API \u53c2\u8003\u3002</p>"},{"location":"cloud/reference/api/api_ref/#_1","title":"\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u5bf9\u4e8e\u90e8\u7f72\u5230 LangGraph Platform \u7684\u90e8\u7f72,\u9700\u8981\u8eab\u4efd\u9a8c\u8bc1\u3002\u5728\u6bcf\u4e2a\u5bf9 LangGraph Server \u7684\u8bf7\u6c42\u4e2d\u4f20\u9012 <code>X-Api-Key</code> \u6807\u5934\u3002\u6807\u5934\u7684\u503c\u5e94\u8bbe\u7f6e\u4e3a\u90e8\u7f72 LangGraph Server \u7684\u7ec4\u7ec7\u7684\u6709\u6548 LangSmith API \u5bc6\u94a5\u3002</p> <p>\u793a\u4f8b <code>curl</code> \u547d\u4ee4: <pre><code>curl --request POST \\\n  --url http://localhost:8124/assistants/search \\\n  --header 'Content-Type: application/json' \\\n  --header 'X-Api-Key: LANGSMITH_API_KEY' \\\n  --data '{\n  \"metadata\": {},\n  \"limit\": 10,\n  \"offset\": 0\n}'\n</code></pre></p>"},{"location":"cloud/reference/api/api_ref_control_plane/","title":"LangGraph \u63a7\u5236\u5e73\u9762 API \u53c2\u8003","text":"<p>LangGraph \u63a7\u5236\u5e73\u9762 API \u7528\u4e8e\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u521b\u5efa\u548c\u7ba1\u7406 LangGraph Server \u90e8\u7f72\u3002\u4f8b\u5982,\u53ef\u4ee5\u7f16\u6392 API \u4ee5\u521b\u5efa\u81ea\u5b9a\u4e49 CI/CD \u5de5\u4f5c\u6d41\u3002</p> <p>\u70b9\u51fb\u6b64\u5904\u67e5\u770b API \u53c2\u8003\u3002</p>"},{"location":"cloud/reference/api/api_ref_control_plane/#_1","title":"\u4e3b\u673a","text":"<p>Cloud SaaS \u6570\u636e\u533a\u57df\u7684 LangGraph \u63a7\u5236\u5e73\u9762\u4e3b\u673a:</p> US EU <code>https://api.host.langchain.com</code> <code>https://eu.api.host.langchain.com</code> <p>\u6ce8\u610f:LangGraph Platform \u7684\u81ea\u6258\u7ba1\u90e8\u7f72\u5c06\u5177\u6709\u7528\u4e8e LangGraph \u63a7\u5236\u5e73\u9762\u7684\u81ea\u5b9a\u4e49\u4e3b\u673a\u3002</p>"},{"location":"cloud/reference/api/api_ref_control_plane/#_2","title":"\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u8981\u4f7f\u7528 LangGraph \u63a7\u5236\u5e73\u9762 API \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1,\u8bf7\u5c06 <code>X-Api-Key</code> \u6807\u5934\u8bbe\u7f6e\u4e3a\u6709\u6548\u7684 LangSmith API \u5bc6\u94a5\u3002</p> <p>\u793a\u4f8b <code>curl</code> \u547d\u4ee4: <pre><code>curl --request GET \\\n  --url http://localhost:8124/v2/deployments \\\n  --header 'X-Api-Key: LANGSMITH_API_KEY'\n</code></pre></p>"},{"location":"cloud/reference/api/api_ref_control_plane/#_3","title":"\u7248\u672c\u63a7\u5236","text":"<p>\u6bcf\u4e2a\u7aef\u70b9\u8def\u5f84\u90fd\u4ee5\u7248\u672c\u4e3a\u524d\u7f00(\u4f8b\u5982 <code>v1</code>\u3001<code>v2</code>)\u3002</p>"},{"location":"cloud/reference/api/api_ref_control_plane/#_4","title":"\u5feb\u901f\u5165\u95e8","text":"<ol> <li>\u8c03\u7528 <code>POST /v2/deployments</code> \u521b\u5efa\u65b0\u90e8\u7f72\u3002\u54cd\u5e94\u6b63\u6587\u5305\u542b\u90e8\u7f72 ID(<code>id</code>)\u548c\u6700\u65b0(\u4e5f\u662f\u7b2c\u4e00\u4e2a)\u4fee\u8ba2\u7248\u672c\u7684 ID(<code>latest_revision_id</code>)\u3002</li> <li>\u8c03\u7528 <code>GET /v2/deployments/{deployment_id}</code> \u68c0\u7d22\u90e8\u7f72\u3002\u5c06 URL \u4e2d\u7684 <code>deployment_id</code> \u8bbe\u7f6e\u4e3a\u90e8\u7f72 ID(<code>id</code>)\u7684\u503c\u3002</li> <li>\u901a\u8fc7\u8c03\u7528 <code>GET /v2/deployments/{deployment_id}/revisions/{latest_revision_id}</code> \u8f6e\u8be2\u4fee\u8ba2\u7248\u672c <code>status</code>,\u76f4\u5230 <code>status</code> \u4e3a <code>DEPLOYED</code>\u3002</li> <li>\u8c03\u7528 <code>PATCH /v2/deployments/{deployment_id}</code> \u66f4\u65b0\u90e8\u7f72\u3002</li> </ol>"},{"location":"cloud/reference/api/api_ref_control_plane/#_5","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u4ee5\u4e0b\u662f\u793a\u4f8b Python \u4ee3\u7801,\u6f14\u793a\u5982\u4f55\u7f16\u6392 LangGraph \u63a7\u5236\u5e73\u9762 API \u6765\u521b\u5efa\u90e8\u7f72\u3001\u66f4\u65b0\u90e8\u7f72\u548c\u5220\u9664\u90e8\u7f72\u3002 <pre><code>import os\nimport time\n\nimport requests\nfrom dotenv import load_dotenv\n\n\nload_dotenv()\n\n# required environment variables\nCONTROL_PLANE_HOST = os.getenv(\"CONTROL_PLANE_HOST\")\nLANGSMITH_API_KEY = os.getenv(\"LANGSMITH_API_KEY\")\nINTEGRATION_ID = os.getenv(\"INTEGRATION_ID\")\nMAX_WAIT_TIME = 1800  # 30 mins\n\n\ndef get_headers() -&gt; dict:\n    \"\"\"Return common headers for requests to LangGraph Control Plane API.\"\"\"\n    return {\n        \"X-Api-Key\": LANGSMITH_API_KEY,\n    }\n\n\ndef create_deployment() -&gt; str:\n    \"\"\"Create deployment. Return deployment ID.\"\"\"\n    headers = get_headers()\n    headers[\"Content-Type\"] = \"application/json\"\n\n    deployment_name = \"my_deployment\"\n\n    request_body = {\n        \"name\": deployment_name,\n        \"source\": \"github\",\n        \"source_config\": {\n            \"integration_id\": INTEGRATION_ID,\n            \"repo_url\": \"https://github.com/langchain-ai/langgraph-example\",\n            \"deployment_type\": \"dev\",\n            \"build_on_push\": False,\n            \"custom_url\": None,\n            \"resource_spec\": None,\n        },\n        \"source_revision_config\": {\n            \"repo_ref\": \"main\",\n            \"langgraph_config_path\": \"langgraph.json\",\n            \"image_uri\": None,\n        },\n        \"secrets\": [\n            {\n                \"name\": \"OPENAI_API_KEY\",\n                \"value\": \"test_openai_api_key\",\n            },\n            {\n                \"name\": \"ANTHROPIC_API_KEY\",\n                \"value\": \"test_anthropic_api_key\",\n            },\n            {\n                \"name\": \"TAVILY_API_KEY\",\n                \"value\": \"test_tavily_api_key\",\n            },\n        ],\n    }\n\n    response = requests.post(\n        url=f\"{CONTROL_PLANE_HOST}/v2/deployments\",\n        headers=headers,\n        json=request_body,\n    )\n\n    if response.status_code != 201:\n        raise Exception(f\"Failed to create deployment: {response.text}\")\n\n    deployment_id = response.json()[\"id\"]\n    print(f\"Created deployment {deployment_name} ({deployment_id})\")\n    return deployment_id\n\n\ndef get_deployment(deployment_id: str) -&gt; dict:\n    \"\"\"Get deployment.\"\"\"\n    response = requests.get(\n        url=f\"{CONTROL_PLANE_HOST}/v2/deployments/{deployment_id}\",\n        headers=get_headers(),\n    )\n\n    if response.status_code != 200:\n        raise Exception(f\"Failed to get deployment ID {deployment_id}: {response.text}\")\n\n    return response.json()\n\n\ndef list_revisions(deployment_id: str) -&gt; list[dict]:\n    \"\"\"List revisions.\n\n    Return list is sorted by created_at in descending order (latest first).\n    \"\"\"\n    response = requests.get(\n        url=f\"{CONTROL_PLANE_HOST}/v2/deployments/{deployment_id}/revisions\",\n        headers=get_headers(),\n    )\n\n    if response.status_code != 200:\n        raise Exception(\n            f\"Failed to list revisions for deployment ID {deployment_id}: {response.text}\"\n        )\n\n    return response.json()\n\n\ndef get_revision(\n    deployment_id: str,\n    revision_id: str,\n) -&gt; dict:\n    \"\"\"Get revision.\"\"\"\n    response = requests.get(\n        url=f\"{CONTROL_PLANE_HOST}/v2/deployments/{deployment_id}/revisions/{revision_id}\",\n        headers=get_headers(),\n    )\n\n    if response.status_code != 200:\n        raise Exception(f\"Failed to get revision ID {revision_id}: {response.text}\")\n\n    return response.json()\n\n\ndef patch_deployment(deployment_id: str) -&gt; None:\n    \"\"\"Patch deployment.\"\"\"\n    headers = get_headers()\n    headers[\"Content-Type\"] = \"application/json\"\n\n    response = requests.patch(\n        url=f\"{CONTROL_PLANE_HOST}/v2/deployments/{deployment_id}\",\n        headers=headers,\n        json={\n            \"source_config\": {\n                \"build_on_push\": True,\n            },\n            \"source_revision_config\": {\n                \"repo_ref\": \"main\",\n                \"langgraph_config_path\": \"langgraph.json\",\n            },\n        },\n    )\n\n    if response.status_code != 200:\n        raise Exception(f\"Failed to patch deployment: {response.text}\")\n\n    print(f\"Patched deployment ID {deployment_id}\")\n\n\ndef wait_for_deployment(deployment_id: str, revision_id: str) -&gt; None:\n    \"\"\"Wait for revision status to be DEPLOYED.\"\"\"\n    start_time = time.time()\n    revision, status = None, None\n    while time.time() - start_time &lt; MAX_WAIT_TIME:\n        revision = get_revision(deployment_id, revision_id)\n        status = revision[\"status\"]\n        if status == \"DEPLOYED\":\n            break\n        elif \"FAILED\" in status:\n            raise Exception(f\"Revision ID {revision_id} failed: {revision}\")\n\n        print(f\"Waiting for revision ID {revision_id} to be DEPLOYED...\")\n        time.sleep(60)\n\n    if status != \"DEPLOYED\":\n        raise Exception(\n            f\"Timeout waiting for revision ID {revision_id} to be DEPLOYED: {revision}\"\n        )\n\n\ndef delete_deployment(deployment_id: str) -&gt; None:\n    \"\"\"Delete deployment.\"\"\"\n    response = requests.delete(\n        url=f\"{CONTROL_PLANE_HOST}/v2/deployments/{deployment_id}\",\n        headers=get_headers(),\n    )\n\n    if response.status_code != 204:\n        raise Exception(\n            f\"Failed to delete deployment ID {deployment_id}: {response.text}\"\n        )\n\n    print(f\"Deployment ID {deployment_id} deleted\")\n\n\nif __name__ == \"__main__\":\n    # create deployment and get the latest revision\n    deployment_id = create_deployment()\n    revisions = list_revisions(deployment_id)\n    latest_revision = revisions[\"resources\"][0]\n    latest_revision_id = latest_revision[\"id\"]\n\n    # wait for latest revision to be DEPLOYED\n    wait_for_deployment(deployment_id, latest_revision_id)\n\n    # patch the deployment and get the latest revision\n    patch_deployment(deployment_id)\n    revisions = list_revisions(deployment_id)\n    latest_revision = revisions[\"resources\"][0]\n    latest_revision_id = latest_revision[\"id\"]\n\n    # wait for latest revision to be DEPLOYED\n    wait_for_deployment(deployment_id, latest_revision_id)\n\n    # delete the deployment\n    delete_deployment(deployment_id)\n</code></pre></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/","title":"JS/TS SDK","text":"<p>@langchain/langgraph-sdk</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#langchainlanggraph-sdk","title":"@langchain/langgraph-sdk","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#classes","title":"Classes","text":"<ul> <li>AssistantsClient</li> <li>Client</li> <li>CronsClient</li> <li>RunsClient</li> <li>StoreClient</li> <li>ThreadsClient</li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interfaces","title":"Interfaces","text":"<ul> <li>ClientConfig</li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#functions","title":"Functions","text":"<ul> <li>getApiKey</li> </ul> <p>@langchain/langgraph-sdk</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#langchainlanggraph-sdkauth","title":"@langchain/langgraph-sdk/auth","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#classes_1","title":"Classes","text":"<ul> <li>Auth</li> <li>HTTPException</li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interfaces_1","title":"Interfaces","text":"<ul> <li>AuthEventValueMap</li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-aliases","title":"Type Aliases","text":"<ul> <li>AuthFilters</li> </ul> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / Auth</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-authtextra-tauthreturn-tuser","title":"Class: Auth\\&lt;TExtra, TAuthReturn, TUser&gt;","text":"<p>Defined in: src/auth/index.ts:11</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters","title":"Type Parameters","text":"<p>\u2022 TExtra = {}</p> <p>\u2022 TAuthReturn extends <code>BaseAuthReturn</code> = <code>BaseAuthReturn</code></p> <p>\u2022 TUser extends <code>BaseUser</code> = <code>ToUserLike</code>\\&lt;<code>TAuthReturn</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-auth","title":"new Auth()","text":"<p>new Auth\\&lt;<code>TExtra</code>, <code>TAuthReturn</code>, <code>TUser</code>&gt;(): <code>Auth</code>\\&lt;<code>TExtra</code>, <code>TAuthReturn</code>, <code>TUser</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns","title":"Returns","text":"<p><code>Auth</code>\\&lt;<code>TExtra</code>, <code>TAuthReturn</code>, <code>TUser</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#authenticate","title":"authenticate()","text":"<p>authenticate\\&lt;<code>T</code>&gt;(<code>cb</code>): <code>Auth</code>\\&lt;<code>TExtra</code>, <code>T</code>&gt;</p> <p>Defined in: src/auth/index.ts:25</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_1","title":"Type Parameters","text":"<p>\u2022 T extends <code>BaseAuthReturn</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cb","title":"cb","text":"<p><code>AuthenticateCallback</code>\\&lt;<code>T</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_1","title":"Returns","text":"<p><code>Auth</code>\\&lt;<code>TExtra</code>, <code>T</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#on","title":"on()","text":"<p>on\\&lt;<code>T</code>&gt;(<code>event</code>, <code>callback</code>): <code>this</code></p> <p>Defined in: src/auth/index.ts:32</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_2","title":"Type Parameters","text":"<p>\u2022 T extends <code>CallbackEvent</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_1","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#event","title":"event","text":"<p><code>T</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#callback","title":"callback","text":"<p><code>OnCallback</code>\\&lt;<code>T</code>, <code>TUser</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_2","title":"Returns","text":"<p><code>this</code></p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / HTTPException</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-httpexception","title":"Class: HTTPException","text":"<p>Defined in: src/auth/error.ts:66</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#extends","title":"Extends","text":"<ul> <li><code>Error</code></li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_1","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-httpexception","title":"new HTTPException()","text":"<p>new HTTPException(<code>status</code>, <code>options</code>?): <code>HTTPException</code></p> <p>Defined in: src/auth/error.ts:70</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_2","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#status","title":"status","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cause","title":"# cause?","text":"<p><code>unknown</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#headers","title":"# headers?","text":"<p><code>HeadersInit</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#message","title":"# message?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_3","title":"Returns","text":"<p><code>HTTPException</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#overrides","title":"Overrides","text":"<p><code>Error.constructor</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#properties","title":"Properties","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cause_1","title":"cause?","text":"<p><code>optional</code> cause: <code>unknown</code></p> <p>Defined in: node_modules/typescript/lib/lib.es2022.error.d.ts:24</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from","title":"Inherited from","text":"<p><code>Error.cause</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#headers_1","title":"headers","text":"<p>headers: <code>HeadersInit</code></p> <p>Defined in: src/auth/error.ts:68</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#message_1","title":"message","text":"<p>message: <code>string</code></p> <p>Defined in: node_modules/typescript/lib/lib.es5.d.ts:1077</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_1","title":"Inherited from","text":"<p><code>Error.message</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#name","title":"name","text":"<p>name: <code>string</code></p> <p>Defined in: node_modules/typescript/lib/lib.es5.d.ts:1076</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_2","title":"Inherited from","text":"<p><code>Error.name</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#stack","title":"stack?","text":"<p><code>optional</code> stack: <code>string</code></p> <p>Defined in: node_modules/typescript/lib/lib.es5.d.ts:1078</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_3","title":"Inherited from","text":"<p><code>Error.stack</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#status_1","title":"status","text":"<p>status: <code>number</code></p> <p>Defined in: src/auth/error.ts:67</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#preparestacktrace","title":"prepareStackTrace()?","text":"<p><code>static</code> <code>optional</code> prepareStackTrace: (<code>err</code>, <code>stackTraces</code>) =&gt; <code>any</code></p> <p>Defined in: node_modules/@types/node/globals.d.ts:28</p> <p>Optional override for formatting stack traces</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_3","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#err","title":"err","text":"<p><code>Error</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#stacktraces","title":"stackTraces","text":"<p><code>CallSite</code>[]</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_4","title":"Returns","text":"<p><code>any</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#see","title":"See","text":"<p>https://v8.dev/docs/stack-trace-api#customizing-stack-traces</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_4","title":"Inherited from","text":"<p><code>Error.prepareStackTrace</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#stacktracelimit","title":"stackTraceLimit","text":"<p><code>static</code> stackTraceLimit: <code>number</code></p> <p>Defined in: node_modules/@types/node/globals.d.ts:30</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_5","title":"Inherited from","text":"<p><code>Error.stackTraceLimit</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods_1","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#capturestacktrace","title":"captureStackTrace()","text":"<p><code>static</code> captureStackTrace(<code>targetObject</code>, <code>constructorOpt</code>?): <code>void</code></p> <p>Defined in: node_modules/@types/node/globals.d.ts:21</p> <p>Create .stack property on a target object</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_4","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#targetobject","title":"targetObject","text":"<p><code>object</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructoropt","title":"constructorOpt?","text":"<p><code>Function</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_5","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_6","title":"Inherited from","text":"<p><code>Error.captureStackTrace</code></p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / AuthEventValueMap</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interface-autheventvaluemap","title":"Interface: AuthEventValueMap","text":"<p>Defined in: src/auth/types.ts:218</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#properties_1","title":"Properties","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantscreate","title":"assistants:create","text":"<p>assistants:create: <code>object</code></p> <p>Defined in: src/auth/types.ts:226</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistant_id","title":"assistant_id?","text":"<p><code>optional</code> assistant_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config","title":"config?","text":"<p><code>optional</code> config: <code>Maybe</code>\\&lt;<code>AssistantConfig</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graph_id","title":"graph_id","text":"<p>graph_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#if_exists","title":"if_exists?","text":"<p><code>optional</code> if_exists: <code>Maybe</code>\\&lt;<code>\"raise\"</code> | <code>\"do_nothing\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#name_1","title":"name?","text":"<p><code>optional</code> name: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantsdelete","title":"assistants:delete","text":"<p>assistants:delete: <code>object</code></p> <p>Defined in: src/auth/types.ts:229</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistant_id_1","title":"assistant_id","text":"<p>assistant_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantsread","title":"assistants:read","text":"<p>assistants:read: <code>object</code></p> <p>Defined in: src/auth/types.ts:227</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistant_id_2","title":"assistant_id","text":"<p>assistant_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_1","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantssearch","title":"assistants:search","text":"<p>assistants:search: <code>object</code></p> <p>Defined in: src/auth/types.ts:230</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graph_id_1","title":"graph_id?","text":"<p><code>optional</code> graph_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit","title":"limit?","text":"<p><code>optional</code> limit: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_2","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset","title":"offset?","text":"<p><code>optional</code> offset: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantsupdate","title":"assistants:update","text":"<p>assistants:update: <code>object</code></p> <p>Defined in: src/auth/types.ts:228</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistant_id_3","title":"assistant_id","text":"<p>assistant_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_1","title":"config?","text":"<p><code>optional</code> config: <code>Maybe</code>\\&lt;<code>AssistantConfig</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graph_id_2","title":"graph_id?","text":"<p><code>optional</code> graph_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_3","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#name_2","title":"name?","text":"<p><code>optional</code> name: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#version","title":"version?","text":"<p><code>optional</code> version: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cronscreate","title":"crons:create","text":"<p>crons:create: <code>object</code></p> <p>Defined in: src/auth/types.ts:232</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cron_id","title":"cron_id?","text":"<p><code>optional</code> cron_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#end_time","title":"end_time?","text":"<p><code>optional</code> end_time: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload","title":"payload?","text":"<p><code>optional</code> payload: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#schedule","title":"schedule","text":"<p>schedule: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#user_id","title":"user_id?","text":"<p><code>optional</code> user_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cronsdelete","title":"crons:delete","text":"<p>crons:delete: <code>object</code></p> <p>Defined in: src/auth/types.ts:235</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cron_id_1","title":"cron_id","text":"<p>cron_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cronsread","title":"crons:read","text":"<p>crons:read: <code>object</code></p> <p>Defined in: src/auth/types.ts:233</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cron_id_2","title":"cron_id","text":"<p>cron_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cronssearch","title":"crons:search","text":"<p>crons:search: <code>object</code></p> <p>Defined in: src/auth/types.ts:236</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistant_id_4","title":"assistant_id?","text":"<p><code>optional</code> assistant_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_1","title":"limit?","text":"<p><code>optional</code> limit: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_1","title":"offset?","text":"<p><code>optional</code> offset: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_1","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cronsupdate","title":"crons:update","text":"<p>crons:update: <code>object</code></p> <p>Defined in: src/auth/types.ts:234</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cron_id_3","title":"cron_id","text":"<p>cron_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_1","title":"payload?","text":"<p><code>optional</code> payload: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#schedule_1","title":"schedule?","text":"<p><code>optional</code> schedule: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#storedelete","title":"store:delete","text":"<p>store:delete: <code>object</code></p> <p>Defined in: src/auth/types.ts:242</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#key","title":"key","text":"<p>key: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace","title":"namespace?","text":"<p><code>optional</code> namespace: <code>Maybe</code>\\&lt;<code>string</code>[]&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#storeget","title":"store:get","text":"<p>store:get: <code>object</code></p> <p>Defined in: src/auth/types.ts:239</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#key_1","title":"key","text":"<p>key: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_1","title":"namespace","text":"<p>namespace: <code>Maybe</code>\\&lt;<code>string</code>[]&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#storelist_namespaces","title":"store:list_namespaces","text":"<p>store:list_namespaces: <code>object</code></p> <p>Defined in: src/auth/types.ts:241</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_2","title":"limit?","text":"<p><code>optional</code> limit: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#max_depth","title":"max_depth?","text":"<p><code>optional</code> max_depth: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_2","title":"namespace?","text":"<p><code>optional</code> namespace: <code>Maybe</code>\\&lt;<code>string</code>[]&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_2","title":"offset?","text":"<p><code>optional</code> offset: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#suffix","title":"suffix?","text":"<p><code>optional</code> suffix: <code>Maybe</code>\\&lt;<code>string</code>[]&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#storeput","title":"store:put","text":"<p>store:put: <code>object</code></p> <p>Defined in: src/auth/types.ts:238</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#key_2","title":"key","text":"<p>key: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_3","title":"namespace","text":"<p>namespace: <code>string</code>[]</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#value","title":"value","text":"<p>value: <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#storesearch","title":"store:search","text":"<p>store:search: <code>object</code></p> <p>Defined in: src/auth/types.ts:240</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#filter","title":"filter?","text":"<p><code>optional</code> filter: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_3","title":"limit?","text":"<p><code>optional</code> limit: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_4","title":"namespace?","text":"<p><code>optional</code> namespace: <code>Maybe</code>\\&lt;<code>string</code>[]&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_3","title":"offset?","text":"<p><code>optional</code> offset: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#query","title":"query?","text":"<p><code>optional</code> query: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadscreate","title":"threads:create","text":"<p>threads:create: <code>object</code></p> <p>Defined in: src/auth/types.ts:219</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#if_exists_1","title":"if_exists?","text":"<p><code>optional</code> if_exists: <code>Maybe</code>\\&lt;<code>\"raise\"</code> | <code>\"do_nothing\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_4","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_2","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadscreate_run","title":"threads:create_run","text":"<p>threads:create_run: <code>object</code></p> <p>Defined in: src/auth/types.ts:224</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#after_seconds","title":"after_seconds?","text":"<p><code>optional</code> after_seconds: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistant_id_5","title":"assistant_id","text":"<p>assistant_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#if_not_exists","title":"if_not_exists?","text":"<p><code>optional</code> if_not_exists: <code>Maybe</code>\\&lt;<code>\"reject\"</code> | <code>\"create\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#kwargs","title":"kwargs","text":"<p>kwargs: <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_5","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#multitask_strategy","title":"multitask_strategy?","text":"<p><code>optional</code> multitask_strategy: <code>Maybe</code>\\&lt;<code>\"reject\"</code> | <code>\"interrupt\"</code> | <code>\"rollback\"</code> | <code>\"enqueue\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#prevent_insert_if_inflight","title":"prevent_insert_if_inflight?","text":"<p><code>optional</code> prevent_insert_if_inflight: <code>Maybe</code>\\&lt;<code>boolean</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#run_id","title":"run_id","text":"<p>run_id: <code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#status_2","title":"status","text":"<p>status: <code>Maybe</code>\\&lt;<code>\"pending\"</code> | <code>\"running\"</code> | <code>\"error\"</code> | <code>\"success\"</code> | <code>\"timeout\"</code> | <code>\"interrupted\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_3","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadsdelete","title":"threads:delete","text":"<p>threads:delete: <code>object</code></p> <p>Defined in: src/auth/types.ts:222</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#run_id_1","title":"run_id?","text":"<p><code>optional</code> run_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_4","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadsread","title":"threads:read","text":"<p>threads:read: <code>object</code></p> <p>Defined in: src/auth/types.ts:220</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_5","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadssearch","title":"threads:search","text":"<p>threads:search: <code>object</code></p> <p>Defined in: src/auth/types.ts:223</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_4","title":"limit?","text":"<p><code>optional</code> limit: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_6","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_4","title":"offset?","text":"<p><code>optional</code> offset: <code>Maybe</code>\\&lt;<code>number</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#status_3","title":"status?","text":"<p><code>optional</code> status: <code>Maybe</code>\\&lt;<code>\"error\"</code> | <code>\"interrupted\"</code> | <code>\"idle\"</code> | <code>\"busy\"</code> | <code>string</code> &amp; <code>object</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_6","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#values","title":"values?","text":"<p><code>optional</code> values: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadsupdate","title":"threads:update","text":"<p>threads:update: <code>object</code></p> <p>Defined in: src/auth/types.ts:221</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#action","title":"action?","text":"<p><code>optional</code> action: <code>Maybe</code>\\&lt;<code>\"interrupt\"</code> | <code>\"rollback\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_7","title":"metadata?","text":"<p><code>optional</code> metadata: <code>Maybe</code>\\&lt;<code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_7","title":"thread_id?","text":"<p><code>optional</code> thread_id: <code>Maybe</code>\\&lt;<code>string</code>&gt;</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / AuthFilters</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-alias-authfilterstkey","title":"Type Alias: AuthFilters\\&lt;TKey&gt;","text":"<p>AuthFilters\\&lt;<code>TKey</code>&gt;: { [key in TKey]: string | { [op in \"\\(contains\" \\| \"\\)eq\"]?: string } }</p> <p>Defined in: src/auth/types.ts:367</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_3","title":"Type Parameters","text":"<p>\u2022 TKey extends <code>string</code> | <code>number</code> | <code>symbol</code></p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / AssistantsClient</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-assistantsclient","title":"Class: AssistantsClient","text":"<p>Defined in: client.ts:294</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#extends_1","title":"Extends","text":"<ul> <li><code>BaseClient</code></li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_2","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-assistantsclient","title":"new AssistantsClient()","text":"<p>new AssistantsClient(<code>config</code>?): <code>AssistantsClient</code></p> <p>Defined in: client.ts:88</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_5","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_2","title":"config?","text":"<p><code>ClientConfig</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_6","title":"Returns","text":"<p><code>AssistantsClient</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_7","title":"Inherited from","text":"<p><code>BaseClient.constructor</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods_2","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#create","title":"create()","text":"<p>create(<code>payload</code>): <code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>Defined in: client.ts:359</p> <p>Create a new assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_6","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_2","title":"payload","text":"<p>Payload for creating an assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid","title":"# assistantId?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_3","title":"# config?","text":"<p><code>Config</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#description","title":"# description?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graphid","title":"# graphId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#ifexists","title":"# ifExists?","text":"<p><code>OnConflictBehavior</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_8","title":"# metadata?","text":"<p><code>Metadata</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#name_3","title":"# name?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_7","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>The created assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#delete","title":"delete()","text":"<p>delete(<code>assistantId</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:415</p> <p>Delete an assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_7","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_1","title":"assistantId","text":"<p><code>string</code></p> <p>ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_8","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#get","title":"get()","text":"<p>get(<code>assistantId</code>): <code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>Defined in: client.ts:301</p> <p>Get an assistant by ID.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_8","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_2","title":"assistantId","text":"<p><code>string</code></p> <p>The ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_9","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>Assistant</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getgraph","title":"getGraph()","text":"<p>getGraph(<code>assistantId</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>AssistantGraph</code>&gt;</p> <p>Defined in: client.ts:311</p> <p>Get the JSON representation of the graph assigned to a runnable</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_9","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_3","title":"assistantId","text":"<p><code>string</code></p> <p>The ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_1","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#xray","title":"# xray?","text":"<p><code>number</code> | <code>boolean</code></p> <p>\u662f\u5426\u5728\u5e8f\u5217\u5316\u56fe\u8868\u793a\u4e2d\u5305\u542b\u5b50\u56fe\u3002\u5982\u679c\u63d0\u4f9b\u4e86\u6574\u6570\u503c\uff0c\u5219\u4ec5\u5305\u542b\u6df1\u5ea6\u5c0f\u4e8e\u6216\u7b49\u4e8e\u8be5\u503c\u7684\u5b50\u56fe\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_10","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>AssistantGraph</code>&gt;</p> <p>Serialized graph</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getschemas","title":"getSchemas()","text":"<p>getSchemas(<code>assistantId</code>): <code>Promise</code>\\&lt;<code>GraphSchema</code>&gt;</p> <p>Defined in: client.ts:325</p> <p>Get the state and config schema of the graph assigned to a runnable</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_10","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_4","title":"assistantId","text":"<p><code>string</code></p> <p>The ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_11","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>GraphSchema</code>&gt;</p> <p>Graph schema</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getsubgraphs","title":"getSubgraphs()","text":"<p>getSubgraphs(<code>assistantId</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>Subgraphs</code>&gt;</p> <p>Defined in: client.ts:336</p> <p>Get the schemas of an assistant by ID.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_11","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_5","title":"assistantId","text":"<p><code>string</code></p> <p>\u8981\u83b7\u53d6\u5176\u67b6\u6784\u7684\u52a9\u624b\u7684 ID\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_2","title":"options?","text":"<p>\u83b7\u53d6\u5b50\u56fe\u7684\u9644\u52a0\u9009\u9879\uff0c\u4f8b\u5982\u547d\u540d\u7a7a\u95f4\u6216\u9012\u5f52\u63d0\u53d6\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_5","title":"# namespace?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#recurse","title":"# recurse?","text":"<p><code>boolean</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_12","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Subgraphs</code>&gt;</p> <p>The subgraphs of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getversions","title":"getVersions()","text":"<p>getVersions(<code>assistantId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>AssistantVersion</code>[]&gt;</p> <p>Defined in: client.ts:453</p> <p>List all versions of an assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_12","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_6","title":"assistantId","text":"<p><code>string</code></p> <p>ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_3","title":"payload?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_5","title":"# limit?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_9","title":"# metadata?","text":"<p><code>Metadata</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_5","title":"# offset?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_13","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>AssistantVersion</code>[]&gt;</p> <p>List of assistant versions.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#search","title":"search()","text":"<p>search(<code>query</code>?): <code>Promise</code>\\&lt;<code>Assistant</code>[]&gt;</p> <p>Defined in: client.ts:426</p> <p>List assistants.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_13","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#query_1","title":"query?","text":"<p>Query options.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graphid_1","title":"# graphId?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_6","title":"# limit?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_10","title":"# metadata?","text":"<p><code>Metadata</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_6","title":"# offset?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#sortby","title":"# sortBy?","text":"<p><code>AssistantSortBy</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#sortorder","title":"# sortOrder?","text":"<p><code>SortOrder</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_14","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Assistant</code>[]&gt;</p> <p>List of assistants.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#setlatest","title":"setLatest()","text":"<p>setLatest(<code>assistantId</code>, <code>version</code>): <code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>Defined in: client.ts:481</p> <p>Change the version of an assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_14","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_7","title":"assistantId","text":"<p><code>string</code></p> <p>ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#version_1","title":"version","text":"<p><code>number</code></p> <p>The version to change to.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_15","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>The updated assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#update","title":"update()","text":"<p>update(<code>assistantId</code>, <code>payload</code>): <code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>Defined in: client.ts:388</p> <p>Update an assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_15","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_8","title":"assistantId","text":"<p><code>string</code></p> <p>ID of the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_4","title":"payload","text":"<p>Payload for updating the assistant.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_4","title":"# config?","text":"<p><code>Config</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#description_1","title":"# description?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graphid_2","title":"# graphId?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_11","title":"# metadata?","text":"<p><code>Metadata</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#name_4","title":"# name?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_16","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Assistant</code>&gt;</p> <p>The updated assistant.</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / Client</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-clienttstatetype-tupdatetype-tcustomeventtype","title":"Class: Client\\&lt;TStateType, TUpdateType, TCustomEventType&gt;","text":"<p>Defined in: client.ts:1448</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_4","title":"Type Parameters","text":"<p>\u2022 TStateType = <code>DefaultValues</code></p> <p>\u2022 TUpdateType = <code>TStateType</code></p> <p>\u2022 TCustomEventType = <code>unknown</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_3","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-client","title":"new Client()","text":"<p>new Client\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;(<code>config</code>?): <code>Client</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p> <p>Defined in: client.ts:1484</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_16","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_5","title":"config?","text":"<p><code>ClientConfig</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_17","title":"Returns","text":"<p><code>Client</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#properties_2","title":"Properties","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#ui","title":"~ui","text":"<p>~ui: <code>UiClient</code></p> <p>Defined in: client.ts:1482</p> <p><code>Internal</code></p> <p>The client for interacting with the UI.  Used by LoadExternalComponent and the API might change in the future.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistants","title":"assistants","text":"<p>assistants: <code>AssistantsClient</code></p> <p>Defined in: client.ts:1456</p> <p>The client for interacting with assistants.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#crons","title":"crons","text":"<p>crons: <code>CronsClient</code></p> <p>Defined in: client.ts:1471</p> <p>The client for interacting with cron runs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#runs","title":"runs","text":"<p>runs: <code>RunsClient</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p> <p>Defined in: client.ts:1466</p> <p>The client for interacting with runs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#store","title":"store","text":"<p>store: <code>StoreClient</code></p> <p>Defined in: client.ts:1476</p> <p>The client for interacting with the KV store.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threads","title":"threads","text":"<p>threads: <code>ThreadsClient</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>&gt;</p> <p>Defined in: client.ts:1461</p> <p>The client for interacting with threads.</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / CronsClient</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-cronsclient","title":"Class: CronsClient","text":"<p>Defined in: client.ts:197</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#extends_2","title":"Extends","text":"<ul> <li><code>BaseClient</code></li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_4","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-cronsclient","title":"new CronsClient()","text":"<p>new CronsClient(<code>config</code>?): <code>CronsClient</code></p> <p>Defined in: client.ts:88</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_17","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_6","title":"config?","text":"<p><code>ClientConfig</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_18","title":"Returns","text":"<p><code>CronsClient</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_8","title":"Inherited from","text":"<p><code>BaseClient.constructor</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods_3","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#create_1","title":"create()","text":"<p>create(<code>assistantId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>CronCreateResponse</code>&gt;</p> <p>Defined in: client.ts:238</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_18","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_9","title":"assistantId","text":"<p><code>string</code></p> <p>Assistant ID to use for this cron job.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_5","title":"payload?","text":"<p><code>CronsCreatePayload</code></p> <p>Payload for creating a cron job.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_19","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>CronCreateResponse</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#createforthread","title":"createForThread()","text":"<p>createForThread(<code>threadId</code>, <code>assistantId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>CronCreateForThreadResponse</code>&gt;</p> <p>Defined in: client.ts:205</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_19","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_10","title":"assistantId","text":"<p><code>string</code></p> <p>Assistant ID to use for this cron job.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_6","title":"payload?","text":"<p><code>CronsCreatePayload</code></p> <p>Payload for creating a cron job.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_20","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>CronCreateForThreadResponse</code>&gt;</p> <p>The created background run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#delete_1","title":"delete()","text":"<p>delete(<code>cronId</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:265</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_20","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cronid","title":"cronId","text":"<p><code>string</code></p> <p>Cron ID of Cron job to delete.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_21","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#search_1","title":"search()","text":"<p>search(<code>query</code>?): <code>Promise</code>\\&lt;<code>Cron</code>[]&gt;</p> <p>Defined in: client.ts:276</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_21","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#query_2","title":"query?","text":"<p>Query options.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_11","title":"# assistantId?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_7","title":"# limit?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_7","title":"# offset?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_1","title":"# threadId?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_22","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Cron</code>[]&gt;</p> <p>List of crons.</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / RunsClient</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-runsclienttstatetype-tupdatetype-tcustomeventtype","title":"Class: RunsClient\\&lt;TStateType, TUpdateType, TCustomEventType&gt;","text":"<p>Defined in: client.ts:776</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#extends_3","title":"Extends","text":"<ul> <li><code>BaseClient</code></li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_5","title":"Type Parameters","text":"<p>\u2022 TStateType = <code>DefaultValues</code></p> <p>\u2022 TUpdateType = <code>TStateType</code></p> <p>\u2022 TCustomEventType = <code>unknown</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_5","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-runsclient","title":"new RunsClient()","text":"<p>new RunsClient\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;(<code>config</code>?): <code>RunsClient</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p> <p>Defined in: client.ts:88</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_22","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_7","title":"config?","text":"<p><code>ClientConfig</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_23","title":"Returns","text":"<p><code>RunsClient</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_9","title":"Inherited from","text":"<p><code>BaseClient.constructor</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods_4","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#cancel","title":"cancel()","text":"<p>cancel(<code>threadId</code>, <code>runId</code>, <code>wait</code>, <code>action</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:1063</p> <p>Cancel a run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_23","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_2","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#runid","title":"runId","text":"<p><code>string</code></p> <p>The ID of the run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#wait","title":"wait","text":"<p><code>boolean</code> = <code>false</code></p> <p>Whether to block when canceling</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#action_1","title":"action","text":"<p><code>CancelAction</code> = <code>\"interrupt\"</code></p> <p>\u53d6\u6d88\u8fd0\u884c\u65f6\u8981\u91c7\u53d6\u7684\u64cd\u4f5c\u3002\u53ef\u80fd\u7684\u503c\u4e3a <code>interrupt</code> \u6216 <code>rollback</code>\u3002\u9ed8\u8ba4\u503c\u4e3a <code>interrupt</code>\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_24","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#create_2","title":"create()","text":"<p>create(<code>threadId</code>, <code>assistantId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>Run</code>&gt;</p> <p>Defined in: client.ts:885</p> <p>Create a run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_24","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_3","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_12","title":"assistantId","text":"<p><code>string</code></p> <p>Assistant ID to use for this run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_7","title":"payload?","text":"<p><code>RunsCreatePayload</code></p> <p>Payload for creating a run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_25","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Run</code>&gt;</p> <p>The created run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#createbatch","title":"createBatch()","text":"<p>createBatch(<code>payloads</code>): <code>Promise</code>\\&lt;<code>Run</code>[]&gt;</p> <p>Defined in: client.ts:921</p> <p>Create a batch of stateless background runs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_25","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payloads","title":"payloads","text":"<p><code>RunsCreatePayload</code> &amp; <code>object</code>[]</p> <p>An array of payloads for creating runs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_26","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Run</code>[]&gt;</p> <p>An array of created runs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#delete_2","title":"delete()","text":"<p>delete(<code>threadId</code>, <code>runId</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:1157</p> <p>Delete a run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_26","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_4","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#runid_1","title":"runId","text":"<p><code>string</code></p> <p>The ID of the run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_27","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#get_1","title":"get()","text":"<p>get(<code>threadId</code>, <code>runId</code>): <code>Promise</code>\\&lt;<code>Run</code>&gt;</p> <p>Defined in: client.ts:1050</p> <p>Get a run by ID.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_27","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_5","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#runid_2","title":"runId","text":"<p><code>string</code></p> <p>The ID of the run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_28","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Run</code>&gt;</p> <p>The run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#join","title":"join()","text":"<p>join(<code>threadId</code>, <code>runId</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:1085</p> <p>Block until a run is done.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_28","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_6","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#runid_3","title":"runId","text":"<p><code>string</code></p> <p>The ID of the run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_3","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#signal","title":"# signal?","text":"<p><code>AbortSignal</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_29","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#joinstream","title":"joinStream()","text":"<p>joinStream(<code>threadId</code>, <code>runId</code>, <code>options</code>?): <code>AsyncGenerator</code>\\&lt;{ <code>data</code>: <code>any</code>; <code>event</code>: <code>StreamEvent</code>; }&gt;</p> <p>Defined in: client.ts:1111</p> <p>\u5b9e\u65f6\u6d41\u5f0f\u4f20\u8f93\u8fd0\u884c\u7684\u8f93\u51fa\uff0c\u76f4\u5230\u8fd0\u884c\u5b8c\u6210\u3002 \u8f93\u51fa\u4e0d\u88ab\u7f13\u51b2\uff0c\u56e0\u6b64\u5728\u6b64\u8c03\u7528\u4e4b\u524d\u4ea7\u751f\u7684\u4efb\u4f55\u8f93\u51fa\u90fd\u4e0d\u4f1a \u5728\u6b64\u5904\u63a5\u6536\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_29","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_7","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#runid_4","title":"runId","text":"<p><code>string</code></p> <p>The ID of the run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_4","title":"options?","text":"<p>\u63a7\u5236\u6d41\u884c\u4e3a\u7684\u9644\u52a0\u9009\u9879\uff1a   - signal: \u53ef\u7528\u4e8e\u53d6\u6d88\u6d41\u8bf7\u6c42\u7684 AbortSignal   - cancelOnDisconnect: \u5f53\u4e3a true \u65f6\uff0c\u5982\u679c\u5ba2\u6237\u7aef\u65ad\u5f00\u4e0e\u6d41\u7684\u8fde\u63a5\uff0c\u5219\u81ea\u52a8\u53d6\u6d88\u8fd0\u884c   - streamMode: \u63a7\u5236\u4ece\u6d41\u63a5\u6536\u54ea\u4e9b\u7c7b\u578b\u7684\u4e8b\u4ef6\uff08\u53ef\u4ee5\u662f\u5355\u4e2a\u6a21\u5f0f\u6216\u6a21\u5f0f\u6570\u7ec4\uff09        \u5fc5\u987b\u662f\u521b\u5efa\u8fd0\u884c\u65f6\u4f20\u9012\u7684\u6d41\u6a21\u5f0f\u7684\u5b50\u96c6\u3002\u540e\u53f0\u8fd0\u884c\u9ed8\u8ba4\u542f\u7528\u6240\u6709        \u6d41\u6a21\u5f0f\u7684\u5e76\u96c6\u3002</p> <p><code>AbortSignal</code> | { <code>cancelOnDisconnect</code>: <code>boolean</code>; <code>signal</code>: <code>AbortSignal</code>; <code>streamMode</code>: <code>StreamMode</code> | <code>StreamMode</code>[]; }</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_30","title":"Returns","text":"<p><code>AsyncGenerator</code>\\&lt;{ <code>data</code>: <code>any</code>; <code>event</code>: <code>StreamEvent</code>; }&gt;</p> <p>An async generator yielding stream parts.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#list","title":"list()","text":"<p>list(<code>threadId</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>Run</code>[]&gt;</p> <p>Defined in: client.ts:1013</p> <p>List all runs for a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_30","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_8","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_5","title":"options?","text":"<p>Filtering and pagination options.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_8","title":"# limit?","text":"<p><code>number</code></p> <p>Maximum number of runs to return. Defaults to 10</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_8","title":"# offset?","text":"<p><code>number</code></p> <p>Offset to start from. Defaults to 0.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#status_4","title":"# status?","text":"<p><code>RunStatus</code></p> <p>Status of the run to filter by.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_31","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Run</code>[]&gt;</p> <p>List of runs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#stream","title":"stream()","text":"<p>Create a run and stream the results.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#param","title":"Param","text":"<p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#param_1","title":"Param","text":"<p>Assistant ID to use for this run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#param_2","title":"Param","text":"<p>Payload for creating a run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#call-signature","title":"Call Signature","text":"<p>stream\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>&gt;(<code>threadId</code>, <code>assistantId</code>, <code>payload</code>?): <code>TypedAsyncGenerator</code>\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>, <code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p> <p>Defined in: client.ts:781</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_6","title":"Type Parameters","text":"<p>\u2022 TStreamMode extends <code>StreamMode</code> | <code>StreamMode</code>[] = <code>StreamMode</code></p> <p>\u2022 TSubgraphs extends <code>boolean</code> = <code>false</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_31","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_9","title":"# threadId","text":"<p><code>null</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_13","title":"# assistantId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_8","title":"# payload?","text":"<p><code>Omit</code>\\&lt;<code>RunsStreamPayload</code>\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>&gt;, <code>\"multitaskStrategy\"</code> | <code>\"onCompletion\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_32","title":"Returns","text":"<p><code>TypedAsyncGenerator</code>\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>, <code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#call-signature_1","title":"Call Signature","text":"<p>stream\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>&gt;(<code>threadId</code>, <code>assistantId</code>, <code>payload</code>?): <code>TypedAsyncGenerator</code>\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>, <code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p> <p>Defined in: client.ts:799</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_7","title":"Type Parameters","text":"<p>\u2022 TStreamMode extends <code>StreamMode</code> | <code>StreamMode</code>[] = <code>StreamMode</code></p> <p>\u2022 TSubgraphs extends <code>boolean</code> = <code>false</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_32","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_10","title":"# threadId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_14","title":"# assistantId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_9","title":"# payload?","text":"<p><code>RunsStreamPayload</code>\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_33","title":"Returns","text":"<p><code>TypedAsyncGenerator</code>\\&lt;<code>TStreamMode</code>, <code>TSubgraphs</code>, <code>TStateType</code>, <code>TUpdateType</code>, <code>TCustomEventType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#wait_1","title":"wait()","text":"<p>Create a run and wait for it to complete.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#param_3","title":"Param","text":"<p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#param_4","title":"Param","text":"<p>Assistant ID to use for this run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#param_5","title":"Param","text":"<p>Payload for creating a run.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#call-signature_2","title":"Call Signature","text":"<p>wait(<code>threadId</code>, <code>assistantId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>DefaultValues</code>&gt;</p> <p>Defined in: client.ts:938</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_33","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_11","title":"# threadId","text":"<p><code>null</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_15","title":"# assistantId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_10","title":"# payload?","text":"<p><code>Omit</code>\\&lt;<code>RunsWaitPayload</code>, <code>\"multitaskStrategy\"</code> | <code>\"onCompletion\"</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_34","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>DefaultValues</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#call-signature_3","title":"Call Signature","text":"<p>wait(<code>threadId</code>, <code>assistantId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>DefaultValues</code>&gt;</p> <p>Defined in: client.ts:944</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_34","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_12","title":"# threadId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_16","title":"# assistantId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_11","title":"# payload?","text":"<p><code>RunsWaitPayload</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_35","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>DefaultValues</code>&gt;</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / StoreClient</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-storeclient","title":"Class: StoreClient","text":"<p>Defined in: client.ts:1175</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#extends_4","title":"Extends","text":"<ul> <li><code>BaseClient</code></li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_6","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-storeclient","title":"new StoreClient()","text":"<p>new StoreClient(<code>config</code>?): <code>StoreClient</code></p> <p>Defined in: client.ts:88</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_35","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_8","title":"config?","text":"<p><code>ClientConfig</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_36","title":"Returns","text":"<p><code>StoreClient</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_10","title":"Inherited from","text":"<p><code>BaseClient.constructor</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods_5","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#deleteitem","title":"deleteItem()","text":"<p>deleteItem(<code>namespace</code>, <code>key</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:1296</p> <p>Delete an item.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_36","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_6","title":"namespace","text":"<p><code>string</code>[]</p> <p>A list of strings representing the namespace path.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#key_3","title":"key","text":"<p><code>string</code></p> <p>The unique identifier for the item.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_37","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Promise"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getitem","title":"getItem()","text":"<p>getItem(<code>namespace</code>, <code>key</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>null</code> | <code>Item</code>&gt;</p> <p>Defined in: client.ts:1252</p> <p>Retrieve a single item.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_37","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_7","title":"namespace","text":"<p><code>string</code>[]</p> <p>A list of strings representing the namespace path.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#key_4","title":"key","text":"<p><code>string</code></p> <p>The unique identifier for the item.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_6","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#refreshttl","title":"# refreshTtl?","text":"<p><code>null</code> | <code>boolean</code></p> <p>\u662f\u5426\u5728\u6b64\u8bfb\u53d6\u64cd\u4f5c\u4e0a\u5237\u65b0 TTL\u3002\u5982\u679c\u4e3a null\uff0c\u5219\u4f7f\u7528\u5b58\u50a8\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_38","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>null</code> | <code>Item</code>&gt;</p> <p>Promise"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#example","title":"Example","text":"<pre><code>const item = await client.store.getItem(\n  [\"documents\", \"user123\"],\n  \"item456\",\n  { refreshTtl: true }\n);\nconsole.log(item);\n// {\n//   namespace: [\"documents\", \"user123\"],\n//   key: \"item456\",\n//   value: { title: \"My Document\", content: \"Hello World\" },\n//   createdAt: \"2024-07-30T12:00:00Z\",\n//   updatedAt: \"2024-07-30T12:00:00Z\"\n// }\n</code></pre>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#listnamespaces","title":"listNamespaces()","text":"<p>listNamespaces(<code>options</code>?): <code>Promise</code>\\&lt;<code>ListNamespaceResponse</code>&gt;</p> <p>Defined in: client.ts:1392</p> <p>List namespaces with optional match conditions.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_38","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_7","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_9","title":"# limit?","text":"<p><code>number</code></p> <p>Maximum number of namespaces to return (default is 100).</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#maxdepth","title":"# maxDepth?","text":"<p><code>number</code></p> <p>Optional integer specifying the maximum depth of namespaces to return.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_9","title":"# offset?","text":"<p><code>number</code></p> <p>Number of namespaces to skip before returning results (default is 0).</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#prefix","title":"# prefix?","text":"<p><code>string</code>[]</p> <p>Optional list of strings representing the prefix to filter namespaces.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#suffix_1","title":"# suffix?","text":"<p><code>string</code>[]</p> <p>Optional list of strings representing the suffix to filter namespaces.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_39","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>ListNamespaceResponse</code>&gt;</p> <p>Promise"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#putitem","title":"putItem()","text":"<p>putItem(<code>namespace</code>, <code>key</code>, <code>value</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:1196</p> <p>Store or update an item.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_39","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespace_8","title":"namespace","text":"<p><code>string</code>[]</p> <p>A list of strings representing the namespace path.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#key_5","title":"key","text":"<p><code>string</code></p> <p>The unique identifier for the item within the namespace.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#value_1","title":"value","text":"<p><code>Record</code>\\&lt;<code>string</code>, <code>any</code>&gt;</p> <p>\u5305\u542b\u9879\u76ee\u6570\u636e\u7684\u5b57\u5178\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_8","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#index","title":"# index?","text":"<p><code>null</code> | <code>false</code> | <code>string</code>[]</p> <p>\u63a7\u5236\u641c\u7d22\u7d22\u5f15 - null\uff08\u4f7f\u7528\u9ed8\u8ba4\u503c\uff09\u3001false\uff08\u7981\u7528\uff09\u6216\u8981\u7d22\u5f15\u7684\u5b57\u6bb5\u8def\u5f84\u5217\u8868\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#ttl","title":"# ttl?","text":"<p><code>null</code> | <code>number</code></p> <p>\u9879\u76ee\u7684\u53ef\u9009\u751f\u5b58\u65f6\u95f4\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\uff0c\u6216\u4e3a null \u8868\u793a\u65e0\u8fc7\u671f\u65f6\u95f4\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_40","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Promise"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#example_1","title":"Example","text":"<pre><code>await client.store.putItem(\n  [\"documents\", \"user123\"],\n  \"item456\",\n  { title: \"My Document\", content: \"Hello World\" },\n  { ttl: 60 } // expires in 60 minutes\n);\n</code></pre>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#searchitems","title":"searchItems()","text":"<p>searchItems(<code>namespacePrefix</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>SearchItemsResponse</code>&gt;</p> <p>Defined in: client.ts:1347</p> <p>Search for items within a namespace prefix.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_40","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#namespaceprefix","title":"namespacePrefix","text":"<p><code>string</code>[]</p> <p>List of strings representing the namespace prefix.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_9","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#filter_1","title":"# filter?","text":"<p><code>Record</code>\\&lt;<code>string</code>, <code>any</code>&gt;</p> <p>Optional dictionary of key-value pairs to filter results.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_10","title":"# limit?","text":"<p><code>number</code></p> <p>Maximum number of items to return (default is 10).</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_10","title":"# offset?","text":"<p><code>number</code></p> <p>Number of items to skip before returning results (default is 0).</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#query_3","title":"# query?","text":"<p><code>string</code></p> <p>Optional search query.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#refreshttl_1","title":"# refreshTtl?","text":"<p><code>null</code> | <code>boolean</code></p> <p>\u662f\u5426\u5728\u6b64\u641c\u7d22\u8fd4\u56de\u7684\u9879\u76ee\u4e0a\u5237\u65b0 TTL\u3002\u5982\u679c\u4e3a null\uff0c\u5219\u4f7f\u7528\u5b58\u50a8\u7684\u9ed8\u8ba4\u884c\u4e3a\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_41","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>SearchItemsResponse</code>&gt;</p> <p>Promise"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#example_2","title":"Example","text":"<pre><code>const results = await client.store.searchItems(\n  [\"documents\"],\n  {\n    filter: { author: \"John Doe\" },\n    limit: 5,\n    refreshTtl: true\n  }\n);\nconsole.log(results);\n// {\n//   items: [\n//     {\n//       namespace: [\"documents\", \"user123\"],\n//       key: \"item789\",\n//       value: { title: \"Another Document\", author: \"John Doe\" },\n//       createdAt: \"2024-07-30T12:00:00Z\",\n//       updatedAt: \"2024-07-30T12:00:00Z\"\n//     },\n//     // ... additional items ...\n//   ]\n// }\n</code></pre> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / ThreadsClient</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#class-threadsclienttstatetype-tupdatetype","title":"Class: ThreadsClient\\&lt;TStateType, TUpdateType&gt;","text":"<p>Defined in: client.ts:489</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#extends_5","title":"Extends","text":"<ul> <li><code>BaseClient</code></li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_8","title":"Type Parameters","text":"<p>\u2022 TStateType = <code>DefaultValues</code></p> <p>\u2022 TUpdateType = <code>TStateType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#constructors_7","title":"Constructors","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#new-threadsclient","title":"new ThreadsClient()","text":"<p>new ThreadsClient\\&lt;<code>TStateType</code>, <code>TUpdateType</code>&gt;(<code>config</code>?): <code>ThreadsClient</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>&gt;</p> <p>Defined in: client.ts:88</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_41","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#config_9","title":"config?","text":"<p><code>ClientConfig</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_42","title":"Returns","text":"<p><code>ThreadsClient</code>\\&lt;<code>TStateType</code>, <code>TUpdateType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#inherited-from_11","title":"Inherited from","text":"<p><code>BaseClient.constructor</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#methods_6","title":"Methods","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#copy","title":"copy()","text":"<p>copy(<code>threadId</code>): <code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>TStateType</code>&gt;&gt;</p> <p>Defined in: client.ts:566</p> <p>Copy an existing thread</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_42","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_13","title":"threadId","text":"<p><code>string</code></p> <p>ID of the thread to be copied</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_43","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>TStateType</code>&gt;&gt;</p> <p>Newly copied thread</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#create_3","title":"create()","text":"<p>create(<code>payload</code>?): <code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>TStateType</code>&gt;&gt;</p> <p>Defined in: client.ts:511</p> <p>Create a new thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_43","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_12","title":"payload?","text":"<p>Payload for creating a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#graphid_3","title":"# graphId?","text":"<p><code>string</code></p> <p>Graph ID to associate with the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#ifexists_1","title":"# ifExists?","text":"<p><code>OnConflictBehavior</code></p> <p>How to handle duplicate creation.</p> <p>Default</p> <pre><code>\"raise\"\n</code></pre>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_12","title":"# metadata?","text":"<p><code>Metadata</code></p> <p>Metadata for the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#supersteps","title":"# supersteps?","text":"<p><code>object</code>[]</p> <p>Apply a list of supersteps when creating a thread, each containing a sequence of updates.</p> <p>Used for copying a thread between deployments.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_14","title":"# threadId?","text":"<p><code>string</code></p> <p>\u8981\u521b\u5efa\u7684\u7ebf\u7a0b\u7684 ID\u3002</p> <p>\u5982\u679c\u672a\u63d0\u4f9b\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u968f\u673a UUID\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_44","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>TStateType</code>&gt;&gt;</p> <p>The created thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#delete_3","title":"delete()","text":"<p>delete(<code>threadId</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:599</p> <p>Delete a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_44","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_15","title":"threadId","text":"<p><code>string</code></p> <p>ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_45","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#get_2","title":"get()","text":"<p>get\\&lt;<code>ValuesType</code>&gt;(<code>threadId</code>): <code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>ValuesType</code>&gt;&gt;</p> <p>Defined in: client.ts:499</p> <p>Get a thread by ID.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_9","title":"Type Parameters","text":"<p>\u2022 ValuesType = <code>TStateType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_45","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_16","title":"threadId","text":"<p><code>string</code></p> <p>ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_46","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>ValuesType</code>&gt;&gt;</p> <p>The thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#gethistory","title":"getHistory()","text":"<p>getHistory\\&lt;<code>ValuesType</code>&gt;(<code>threadId</code>, <code>options</code>?): <code>Promise</code>\\&lt;<code>ThreadState</code>\\&lt;<code>ValuesType</code>&gt;[]&gt;</p> <p>Defined in: client.ts:752</p> <p>Get all past states for a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_10","title":"Type Parameters","text":"<p>\u2022 ValuesType = <code>TStateType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_46","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_17","title":"threadId","text":"<p><code>string</code></p> <p>ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_10","title":"options?","text":"<p>Additional options.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#before","title":"# before?","text":"<p><code>Config</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#checkpoint","title":"# checkpoint?","text":"<p><code>Partial</code>\\&lt;<code>Omit</code>\\&lt;<code>Checkpoint</code>, <code>\"thread_id\"</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_11","title":"# limit?","text":"<p><code>number</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_13","title":"# metadata?","text":"<p><code>Metadata</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_47","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>ThreadState</code>\\&lt;<code>ValuesType</code>&gt;[]&gt;</p> <p>List of thread states.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getstate","title":"getState()","text":"<p>getState\\&lt;<code>ValuesType</code>&gt;(<code>threadId</code>, <code>checkpoint</code>?, <code>options</code>?): <code>Promise</code>\\&lt;<code>ThreadState</code>\\&lt;<code>ValuesType</code>&gt;&gt;</p> <p>Defined in: client.ts:659</p> <p>Get state for a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_11","title":"Type Parameters","text":"<p>\u2022 ValuesType = <code>TStateType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_47","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_18","title":"threadId","text":"<p><code>string</code></p> <p>ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#checkpoint_1","title":"checkpoint?","text":"<p><code>string</code> | <code>Checkpoint</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_11","title":"options?","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#subgraphs","title":"# subgraphs?","text":"<p><code>boolean</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_48","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>ThreadState</code>\\&lt;<code>ValuesType</code>&gt;&gt;</p> <p>Thread state.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#patchstate","title":"patchState()","text":"<p>patchState(<code>threadIdOrConfig</code>, <code>metadata</code>): <code>Promise</code>\\&lt;<code>void</code>&gt;</p> <p>Defined in: client.ts:722</p> <p>Patch the metadata of a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_48","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadidorconfig","title":"threadIdOrConfig","text":"<p>Thread ID or config to patch the state of.</p> <p><code>string</code> | <code>Config</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_14","title":"metadata","text":"<p><code>Metadata</code></p> <p>Metadata to patch the state with.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_49","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>void</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#search_2","title":"search()","text":"<p>search\\&lt;<code>ValuesType</code>&gt;(<code>query</code>?): <code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>ValuesType</code>&gt;[]&gt;</p> <p>Defined in: client.ts:611</p> <p>List threads</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_12","title":"Type Parameters","text":"<p>\u2022 ValuesType = <code>TStateType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_49","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#query_4","title":"query?","text":"<p>Query options</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#limit_12","title":"# limit?","text":"<p><code>number</code></p> <p>Maximum number of threads to return. Defaults to 10</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_15","title":"# metadata?","text":"<p><code>Metadata</code></p> <p>Metadata to filter threads by.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#offset_11","title":"# offset?","text":"<p><code>number</code></p> <p>Offset to start from.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#sortby_1","title":"# sortBy?","text":"<p><code>ThreadSortBy</code></p> <p>Sort by.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#sortorder_1","title":"# sortOrder?","text":"<p><code>SortOrder</code></p> <p>\u6392\u5e8f\u987a\u5e8f\u3002 \u5fc5\u987b\u662f 'asc' \u6216 'desc' \u4e4b\u4e00\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#status_5","title":"# status?","text":"<p><code>ThreadStatus</code></p> <p>\u8981\u8fc7\u6ee4\u7684\u7ebf\u7a0b\u72b6\u6001\u3002 \u5fc5\u987b\u662f 'idle'\u3001'busy'\u3001'interrupted' \u6216 'error' \u4e4b\u4e00\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_50","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>ValuesType</code>&gt;[]&gt;</p> <p>List of threads</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#update_1","title":"update()","text":"<p>update(<code>threadId</code>, <code>payload</code>?): <code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>DefaultValues</code>&gt;&gt;</p> <p>Defined in: client.ts:579</p> <p>Update a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_50","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_19","title":"threadId","text":"<p><code>string</code></p> <p>ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#payload_13","title":"payload?","text":"<p>Payload for updating the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_16","title":"# metadata?","text":"<p><code>Metadata</code></p> <p>Metadata for the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_51","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Thread</code>\\&lt;<code>DefaultValues</code>&gt;&gt;</p> <p>The updated thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#updatestate","title":"updateState()","text":"<p>updateState\\&lt;<code>ValuesType</code>&gt;(<code>threadId</code>, <code>options</code>): <code>Promise</code>\\&lt;<code>Pick</code>\\&lt;<code>Config</code>, <code>\"configurable\"</code>&gt;&gt;</p> <p>Defined in: client.ts:693</p> <p>Add state to a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_13","title":"Type Parameters","text":"<p>\u2022 ValuesType = <code>TUpdateType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_51","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_20","title":"threadId","text":"<p><code>string</code></p> <p>The ID of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_12","title":"options","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#asnode","title":"# asNode?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#checkpoint_2","title":"# checkpoint?","text":"<p><code>Checkpoint</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#checkpointid","title":"# checkpointId?","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#values_1","title":"# values","text":"<p><code>ValuesType</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_52","title":"Returns","text":"<p><code>Promise</code>\\&lt;<code>Pick</code>\\&lt;<code>Config</code>, <code>\"configurable\"</code>&gt;&gt;</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / getApiKey</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#function-getapikey","title":"Function: getApiKey()","text":"<p>getApiKey(<code>apiKey</code>?): <code>undefined</code> | <code>string</code></p> <p>Defined in: client.ts:53</p> <p>Get the API key from the environment. Precedence:   1. explicit argument   2. LANGGRAPH_API_KEY   3. LANGSMITH_API_KEY   4. LANGCHAIN_API_KEY</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_52","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#apikey","title":"apiKey?","text":"<p><code>string</code></p> <p>Optional API key provided as an argument</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_53","title":"Returns","text":"<p><code>undefined</code> | <code>string</code></p> <p>\u5982\u679c\u627e\u5230\u5219\u8fd4\u56de API \u5bc6\u94a5\uff0c\u5426\u5219\u8fd4\u56de undefined</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / ClientConfig</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interface-clientconfig","title":"Interface: ClientConfig","text":"<p>Defined in: client.ts:71</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#properties_3","title":"Properties","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#apikey_1","title":"apiKey?","text":"<p><code>optional</code> apiKey: <code>string</code></p> <p>Defined in: client.ts:73</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#apiurl","title":"apiUrl?","text":"<p><code>optional</code> apiUrl: <code>string</code></p> <p>Defined in: client.ts:72</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#calleroptions","title":"callerOptions?","text":"<p><code>optional</code> callerOptions: <code>AsyncCallerParams</code></p> <p>Defined in: client.ts:74</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#defaultheaders","title":"defaultHeaders?","text":"<p><code>optional</code> defaultHeaders: <code>Record</code>\\&lt;<code>string</code>, <code>undefined</code> | <code>null</code> | <code>string</code>&gt;</p> <p>Defined in: client.ts:76</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#timeoutms","title":"timeoutMs?","text":"<p><code>optional</code> timeoutMs: <code>number</code></p> <p>Defined in: client.ts:75</p> <p></p> <p>@langchain/langgraph-sdk</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#langchainlanggraph-sdkreact","title":"@langchain/langgraph-sdk/react","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interfaces_2","title":"Interfaces","text":"<ul> <li>UseStream</li> <li>UseStreamOptions</li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-aliases_1","title":"Type Aliases","text":"<ul> <li>MessageMetadata</li> </ul>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#functions_1","title":"Functions","text":"<ul> <li>useStream</li> </ul> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / useStream</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#function-usestream","title":"Function: useStream()","text":"<p>useStream\\&lt;<code>StateType</code>, <code>Bag</code>&gt;(<code>options</code>): <code>UseStream</code>\\&lt;<code>StateType</code>, <code>Bag</code>&gt;</p> <p>Defined in: react/stream.tsx:618</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_14","title":"Type Parameters","text":"<p>\u2022 StateType extends <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt; = <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p> <p>\u2022 Bag extends <code>object</code> = <code>BagTemplate</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_53","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_13","title":"options","text":"<p><code>UseStreamOptions</code>\\&lt;<code>StateType</code>, <code>Bag</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_54","title":"Returns","text":"<p><code>UseStream</code>\\&lt;<code>StateType</code>, <code>Bag</code>&gt;</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / UseStream</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interface-usestreamstatetype-bag","title":"Interface: UseStream\\&lt;StateType, Bag&gt;","text":"<p>Defined in: react/stream.tsx:507</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_15","title":"Type Parameters","text":"<p>\u2022 StateType extends <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt; = <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p> <p>\u2022 Bag extends <code>BagTemplate</code> = <code>BagTemplate</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#properties_4","title":"Properties","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_17","title":"assistantId","text":"<p>assistantId: <code>string</code></p> <p>Defined in: react/stream.tsx:592</p> <p>The ID of the assistant to use.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#branch","title":"branch","text":"<p>branch: <code>string</code></p> <p>Defined in: react/stream.tsx:542</p> <p>The current branch of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#client","title":"client","text":"<p>client: <code>Client</code></p> <p>Defined in: react/stream.tsx:587</p> <p>LangGraph SDK client used to send request and receive responses.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#error","title":"error","text":"<p>error: <code>unknown</code></p> <p>Defined in: react/stream.tsx:519</p> <p>Last seen error from the thread or during streaming.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#experimental_branchtree","title":"experimental_branchTree","text":"<p>experimental_branchTree: <code>Sequence</code>\\&lt;<code>StateType</code>&gt;</p> <p>Defined in: react/stream.tsx:558</p> <p><code>Experimental</code></p> <p>Tree of all branches for the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#getmessagesmetadata","title":"getMessagesMetadata()","text":"<p>getMessagesMetadata: (<code>message</code>, <code>index</code>?) =&gt; <code>undefined</code> | <code>MessageMetadata</code>\\&lt;<code>StateType</code>&gt;</p> <p>Defined in: react/stream.tsx:579</p> <p>\u83b7\u53d6\u6d88\u606f\u7684\u5143\u6570\u636e\uff0c\u4f8b\u5982\u9996\u6b21\u5728\u5176\u4e2d\u770b\u5230\u8be5\u6d88\u606f\u7684\u7ebf\u7a0b\u72b6\u6001 \u548c\u5206\u652f\u4fe1\u606f\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_54","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#message_2","title":"message","text":"<p><code>Message</code></p> <p>The message to get the metadata for.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#index_1","title":"index?","text":"<p><code>number</code></p> <p>The index of the message in the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_55","title":"Returns","text":"<p><code>undefined</code> | <code>MessageMetadata</code>\\&lt;<code>StateType</code>&gt;</p> <p>The metadata for the message.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#history","title":"history","text":"<p>history: <code>ThreadState</code>\\&lt;<code>StateType</code>&gt;[]</p> <p>Defined in: react/stream.tsx:552</p> <p>Flattened history of thread states of a thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interrupt","title":"interrupt","text":"<p>interrupt: <code>undefined</code> | <code>Interrupt</code>\\&lt;<code>GetInterruptType</code>\\&lt;<code>Bag</code>&gt;&gt;</p> <p>Defined in: react/stream.tsx:563</p> <p>Get the interrupt value for the stream if interrupted.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#isloading","title":"isLoading","text":"<p>isLoading: <code>boolean</code></p> <p>Defined in: react/stream.tsx:524</p> <p>Whether the stream is currently running.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#messages","title":"messages","text":"<p>messages: <code>Message</code>[]</p> <p>Defined in: react/stream.tsx:569</p> <p>Messages inferred from the thread. Will automatically update with incoming message chunks.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#setbranch","title":"setBranch()","text":"<p>setBranch: (<code>branch</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:547</p> <p>Set the branch of the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_55","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#branch_1","title":"branch","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_56","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#stop","title":"stop()","text":"<p>stop: () =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:529</p> <p>Stops the stream.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_57","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#submit","title":"submit()","text":"<p>submit: (<code>values</code>, <code>options</code>?) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:534</p> <p>Create and stream a run to the thread.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_56","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#values_2","title":"values","text":"<p><code>undefined</code> | <code>null</code> | <code>GetUpdateType</code>\\&lt;<code>Bag</code>, <code>StateType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_14","title":"options?","text":"<p><code>SubmitOptions</code>\\&lt;<code>StateType</code>, <code>GetConfigurableType</code>\\&lt;<code>Bag</code>&gt;&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_58","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#values_3","title":"values","text":"<p>values: <code>StateType</code></p> <p>Defined in: react/stream.tsx:514</p> <p>The current values of the thread.</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / UseStreamOptions</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#interface-usestreamoptionsstatetype-bag","title":"Interface: UseStreamOptions\\&lt;StateType, Bag&gt;","text":"<p>Defined in: react/stream.tsx:408</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_16","title":"Type Parameters","text":"<p>\u2022 StateType extends <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt; = <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p> <p>\u2022 Bag extends <code>BagTemplate</code> = <code>BagTemplate</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#properties_5","title":"Properties","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#apikey_2","title":"apiKey?","text":"<p><code>optional</code> apiKey: <code>string</code></p> <p>Defined in: react/stream.tsx:430</p> <p>The API key to use.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#apiurl_1","title":"apiUrl?","text":"<p><code>optional</code> apiUrl: <code>string</code></p> <p>Defined in: react/stream.tsx:425</p> <p>The URL of the API to use.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#assistantid_18","title":"assistantId","text":"<p>assistantId: <code>string</code></p> <p>Defined in: react/stream.tsx:415</p> <p>The ID of the assistant to use.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#calleroptions_1","title":"callerOptions?","text":"<p><code>optional</code> callerOptions: <code>AsyncCallerParams</code></p> <p>Defined in: react/stream.tsx:435</p> <p>Custom call options, such as custom fetch implementation.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#client_1","title":"client?","text":"<p><code>optional</code> client: <code>Client</code>\\&lt;<code>DefaultValues</code>, <code>DefaultValues</code>, <code>unknown</code>&gt;</p> <p>Defined in: react/stream.tsx:420</p> <p>Client used to send requests.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#defaultheaders_1","title":"defaultHeaders?","text":"<p><code>optional</code> defaultHeaders: <code>Record</code>\\&lt;<code>string</code>, <code>undefined</code> | <code>null</code> | <code>string</code>&gt;</p> <p>Defined in: react/stream.tsx:440</p> <p>Default headers to send with requests.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#messageskey","title":"messagesKey?","text":"<p><code>optional</code> messagesKey: <code>string</code></p> <p>Defined in: react/stream.tsx:448</p> <p>Specify the key within the state that contains messages. Defaults to \"messages\".</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#default","title":"Default","text":"<pre><code>\"messages\"\n</code></pre>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#oncustomevent","title":"onCustomEvent()?","text":"<p><code>optional</code> onCustomEvent: (<code>data</code>, <code>options</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:470</p> <p>Callback that is called when a custom event is received.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_57","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#data","title":"data","text":"<p><code>GetCustomEventType</code>\\&lt;<code>Bag</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#options_15","title":"options","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#mutate","title":"# mutate","text":"<p>(<code>update</code>) =&gt; <code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_59","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#ondebugevent","title":"onDebugEvent()?","text":"<p><code>optional</code> onDebugEvent: (<code>data</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:494</p> <p><code>Internal</code></p> <p>Callback that is called when a debug event is received.  This API is experimental and subject to change.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_58","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#data_1","title":"data","text":"<p><code>unknown</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_60","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#onerror","title":"onError()?","text":"<p><code>optional</code> onError: (<code>error</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:453</p> <p>Callback that is called when an error occurs.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_59","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#error_1","title":"error","text":"<p><code>unknown</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_61","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#onfinish","title":"onFinish()?","text":"<p><code>optional</code> onFinish: (<code>state</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:458</p> <p>Callback that is called when the stream is finished.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_60","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#state","title":"state","text":"<p><code>ThreadState</code>\\&lt;<code>StateType</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_62","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#onlangchainevent","title":"onLangChainEvent()?","text":"<p><code>optional</code> onLangChainEvent: (<code>data</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:488</p> <p>Callback that is called when a LangChain event is received.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_61","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#data_2","title":"data","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#data_3","title":"# data","text":"<p><code>unknown</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#event_1","title":"# event","text":"<p><code>string</code> &amp; <code>object</code> | <code>\"on_tool_start\"</code> | <code>\"on_tool_stream\"</code> | <code>\"on_tool_end\"</code> | <code>\"on_chat_model_start\"</code> | <code>\"on_chat_model_stream\"</code> | <code>\"on_chat_model_end\"</code> | <code>\"on_llm_start\"</code> | <code>\"on_llm_stream\"</code> | <code>\"on_llm_end\"</code> | <code>\"on_chain_start\"</code> | <code>\"on_chain_stream\"</code> | <code>\"on_chain_end\"</code> | <code>\"on_retriever_start\"</code> | <code>\"on_retriever_stream\"</code> | <code>\"on_retriever_end\"</code> | <code>\"on_prompt_start\"</code> | <code>\"on_prompt_stream\"</code> | <code>\"on_prompt_end\"</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#metadata_17","title":"# metadata","text":"<p><code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#name_5","title":"# name","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parent_ids","title":"# parent_ids","text":"<p><code>string</code>[]</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#run_id_2","title":"# run_id","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#tags","title":"# tags","text":"<p><code>string</code>[]</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_63","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#see_1","title":"See","text":"<p>https://langchain-ai.github.io/langgraph/cloud/how-tos/stream_events/#stream-graph-in-events-mode for more details.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#onmetadataevent","title":"onMetadataEvent()?","text":"<p><code>optional</code> onMetadataEvent: (<code>data</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:482</p> <p>Callback that is called when a metadata event is received.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_62","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#data_4","title":"data","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#run_id_3","title":"# run_id","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#thread_id_8","title":"# thread_id","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_64","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#onthreadid","title":"onThreadId()?","text":"<p><code>optional</code> onThreadId: (<code>threadId</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:504</p> <p>\u5f53\u7ebf\u7a0b ID \u66f4\u65b0\u65f6\u8c03\u7528\u7684\u56de\u8c03\uff08\u5373\u521b\u5efa\u65b0\u7ebf\u7a0b\u65f6\uff09\u3002</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_63","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_21","title":"threadId","text":"<p><code>string</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_65","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#onupdateevent","title":"onUpdateEvent()?","text":"<p><code>optional</code> onUpdateEvent: (<code>data</code>) =&gt; <code>void</code></p> <p>Defined in: react/stream.tsx:463</p> <p>Callback that is called when an update event is received.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#parameters_64","title":"Parameters","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#data_5","title":"data","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#returns_66","title":"Returns","text":"<p><code>void</code></p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#threadid_22","title":"threadId?","text":"<p><code>optional</code> threadId: <code>null</code> | <code>string</code></p> <p>Defined in: react/stream.tsx:499</p> <p>The ID of the thread to fetch history and current values from.</p> <p></p> <p>@langchain/langgraph-sdk</p> <p>@langchain/langgraph-sdk / MessageMetadata</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-alias-messagemetadatastatetype","title":"Type Alias: MessageMetadata\\&lt;StateType&gt;","text":"<p>MessageMetadata\\&lt;<code>StateType</code>&gt;: <code>object</code></p> <p>Defined in: react/stream.tsx:169</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-parameters_17","title":"Type Parameters","text":"<p>\u2022 StateType extends <code>Record</code>\\&lt;<code>string</code>, <code>unknown</code>&gt;</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#type-declaration","title":"Type declaration","text":""},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#branch_2","title":"branch","text":"<p>branch: <code>string</code> | <code>undefined</code></p> <p>The branch of the message.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#branchoptions","title":"branchOptions","text":"<p>branchOptions: <code>string</code>[] | <code>undefined</code></p> <p>The list of branches this message is part of. This is useful for displaying branching controls.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#firstseenstate","title":"firstSeenState","text":"<p>firstSeenState: <code>ThreadState</code>\\&lt;<code>StateType</code>&gt; | <code>undefined</code></p> <p>The first thread state the message was seen in.</p>"},{"location":"cloud/reference/sdk/js_ts_sdk_ref/#messageid","title":"messageId","text":"<p>messageId: <code>string</code></p> <p>The ID of the message used.</p>"},{"location":"cloud/reference/sdk/python_sdk_ref/","title":"Python SDK Reference","text":"<p>::: langgraph_sdk.client     handler: python</p> <p>::: langgraph_sdk.schema     handler: python</p> <p>::: langgraph_sdk.auth     handler: python</p> <p>::: langgraph_sdk.auth.types     handler: python</p> <p>::: langgraph_sdk.auth.exceptions     handler: python</p>"},{"location":"concepts/","title":"\u6838\u5fc3\u6982\u5ff5","text":"<p>\u672c\u8282\u4ecb\u7ecd LangGraph \u7684\u6838\u5fc3\u6982\u5ff5\u548c\u67b6\u6784\u8bbe\u8ba1\u3002</p>"},{"location":"concepts/#_2","title":"\u6982\u8ff0","text":"<ul> <li>\u9ad8\u5c42\u6b21\u6982\u5ff5\uff1aLangGraph \u7684\u9ad8\u5c42\u6b21\u67b6\u6784\u548c\u8bbe\u8ba1\u7406\u5ff5\u3002</li> <li>\u4f4e\u5c42\u6b21\u6982\u5ff5\uff1a\u6df1\u5165\u4e86\u89e3\u56fe API \u548c\u5e95\u5c42\u5b9e\u73b0\u3002</li> <li>\u4e3a\u4ec0\u4e48\u9009\u62e9 LangGraph\uff1aLangGraph \u7684\u8bbe\u8ba1\u52a8\u673a\u548c\u4f18\u52bf\u3002</li> </ul>"},{"location":"concepts/#langgraph","title":"LangGraph \u5e73\u53f0","text":"<ul> <li>LangGraph \u5e73\u53f0\uff1a\u5e73\u53f0\u67b6\u6784\u548c\u7ec4\u4ef6\u3002</li> <li>\u90e8\u7f72\u9009\u9879\uff1a\u5404\u79cd\u90e8\u7f72\u65b9\u5f0f\u548c\u73af\u5883\u3002</li> <li>\u5e94\u7528\u7a0b\u5e8f\u7ed3\u6784\uff1a\u5e94\u7528\u7a0b\u5e8f\u7684\u7ec4\u7ec7\u7ed3\u6784\u3002</li> <li>\u6a21\u677f\u5e94\u7528\u7a0b\u5e8f\uff1a\u4f7f\u7528\u6a21\u677f\u5feb\u901f\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"concepts/#_3","title":"\u6838\u5fc3\u529f\u80fd","text":"<ul> <li>\u6301\u4e45\u5316\uff1a\u72b6\u6001\u6301\u4e45\u5316\u548c\u68c0\u67e5\u70b9\u7ba1\u7406\u3002</li> <li>\u6301\u4e45\u6267\u884c\uff1a\u786e\u4fdd\u56fe\u6267\u884c\u7684\u53ef\u9760\u6027\u3002</li> <li>\u6d41\u5f0f\u5904\u7406\uff1a\u5b9e\u65f6\u6d41\u5f0f\u8f93\u51fa\u3002</li> <li>\u4eba\u673a\u534f\u540c\uff1a\u4eba\u5de5\u5ba1\u6838\u548c\u5e72\u9884\u3002</li> <li>\u65f6\u95f4\u65c5\u884c\uff1a\u56de\u6eaf\u548c\u91cd\u653e\u6267\u884c\u5386\u53f2\u3002</li> <li>\u8bb0\u5fc6\uff1a\u957f\u671f\u548c\u77ed\u671f\u8bb0\u5fc6\u7ba1\u7406\u3002</li> </ul>"},{"location":"concepts/#_4","title":"\u9ad8\u7ea7\u529f\u80fd","text":"<ul> <li>\u5b50\u56fe\uff1a\u6a21\u5757\u5316\u56fe\u7ed3\u6784\u3002</li> <li>\u591a\u667a\u80fd\u4f53\uff1a\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</li> <li>\u5de5\u5177\uff1a\u5de5\u5177\u96c6\u6210\u548c\u4f7f\u7528\u3002</li> <li>\u667a\u80fd\u4ee3\u7406\u6982\u5ff5\uff1a\u667a\u80fd\u4ee3\u7406\u7684\u6838\u5fc3\u6982\u5ff5\u3002</li> </ul>"},{"location":"concepts/#_5","title":"\u6280\u672f\u7ec6\u8282","text":"<ul> <li>Pregel \u8fd0\u884c\u65f6\uff1aLangGraph \u7684\u6267\u884c\u5f15\u64ce\u3002</li> <li>\u51fd\u6570\u5f0f API\uff1a\u51fd\u6570\u5f0f\u7f16\u7a0b\u8303\u5f0f\u3002</li> <li>\u8ffd\u8e2a\uff1a\u6267\u884c\u8ffd\u8e2a\u548c\u8c03\u8bd5\u3002</li> <li>\u8ba4\u8bc1\u4e0e\u6388\u6743\uff1a\u5b89\u5168\u548c\u8bbf\u95ee\u63a7\u5236\u3002</li> <li>MCP\uff1aModel Context Protocol \u96c6\u6210\u3002</li> <li>Server MCP\uff1aMCP \u670d\u52a1\u5668\u7aef\u5b9e\u73b0\u3002</li> </ul>"},{"location":"concepts/#_6","title":"\u5e73\u53f0\u7ec4\u4ef6","text":"<ul> <li>LangGraph CLI\uff1a\u547d\u4ee4\u884c\u5de5\u5177\u3002</li> <li>LangGraph \u7ec4\u4ef6\uff1a\u5e73\u53f0\u7ec4\u4ef6\u6982\u89c8\u3002</li> <li>LangGraph Cloud\uff1a\u4e91\u670d\u52a1\u3002</li> <li>LangGraph Server\uff1a\u670d\u52a1\u5668\u90e8\u7f72\u3002</li> <li>LangGraph Studio\uff1a\u53ef\u89c6\u5316\u5f00\u53d1\u5de5\u5177\u3002</li> <li>SDK\uff1a\u8f6f\u4ef6\u5f00\u53d1\u5de5\u5177\u5305\u3002</li> </ul>"},{"location":"concepts/#_7","title":"\u90e8\u7f72\u67b6\u6784","text":"<ul> <li>\u63a7\u5236\u5e73\u9762\uff1a\u63a7\u5236\u5e73\u9762\u67b6\u6784\u3002</li> <li>\u6570\u636e\u5e73\u9762\uff1a\u6570\u636e\u5e73\u9762\u67b6\u6784\u3002</li> <li>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\uff1a\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u3002</li> <li>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\uff1a\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u3002</li> <li>\u72ec\u7acb\u5bb9\u5668\uff1a\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u3002</li> </ul>"},{"location":"concepts/#_8","title":"\u5176\u4ed6","text":"<ul> <li>\u53ef\u6269\u5c55\u6027\u4e0e\u5f39\u6027\uff1a\u6027\u80fd\u548c\u53ef\u9760\u6027\u3002</li> <li>\u53cc\u91cd\u53d1\u9001\uff1a\u5904\u7406\u5e76\u53d1\u8bf7\u6c42\u3002</li> <li>\u52a9\u624b\uff1a\u52a9\u624b\u529f\u80fd\u3002</li> <li>\u8ba1\u5212\uff1a\u672a\u6765\u89c4\u5212\u3002</li> <li>\u5e38\u89c1\u95ee\u9898\uff1a\u5e38\u89c1\u95ee\u9898\u89e3\u7b54\u3002</li> </ul>"},{"location":"concepts/agentic_concepts/","title":"\u667a\u80fd\u4ee3\u7406\u67b6\u6784","text":"<p>\u8bb8\u591a LLM \u5e94\u7528\u7a0b\u5e8f\u5728 LLM \u8c03\u7528\u4e4b\u524d\u548c/\u6216\u4e4b\u540e\u5b9e\u73b0\u7279\u5b9a\u7684\u63a7\u5236\u6d41\u6b65\u9aa4\u3002\u4f8b\u5982\uff0cRAG \u6267\u884c\u4e0e\u7528\u6237\u95ee\u9898\u76f8\u5173\u7684\u6587\u6863\u68c0\u7d22\uff0c\u5e76\u5c06\u8fd9\u4e9b\u6587\u6863\u4f20\u9012\u7ed9 LLM\uff0c\u4ee5\u4fbf\u5728\u63d0\u4f9b\u7684\u6587\u6863\u4e0a\u4e0b\u6587\u4e2d\u57fa\u7840\u5316\u6a21\u578b\u7684\u54cd\u5e94\u3002</p> <p>\u6211\u4eec\u6709\u65f6\u5e0c\u671b LLM \u7cfb\u7edf\u80fd\u591f\u9009\u62e9\u81ea\u5df1\u7684\u63a7\u5236\u6d41\u6765\u89e3\u51b3\u66f4\u590d\u6742\u7684\u95ee\u9898\uff0c\u800c\u4e0d\u662f\u786c\u7f16\u7801\u56fa\u5b9a\u7684\u63a7\u5236\u6d41\uff01\u8fd9\u662f\u667a\u80fd\u4ee3\u7406\u7684\u4e00\u4e2a\u5b9a\u4e49\uff1a\u667a\u80fd\u4ee3\u7406\u662f\u4f7f\u7528 LLM \u6765\u51b3\u5b9a\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u6d41\u7684\u7cfb\u7edf\u3002 LLM \u53ef\u4ee5\u901a\u8fc7\u591a\u79cd\u65b9\u5f0f\u63a7\u5236\u5e94\u7528\u7a0b\u5e8f\uff1a</p> <ul> <li>LLM \u53ef\u4ee5\u5728\u4e24\u4e2a\u6f5c\u5728\u8def\u5f84\u4e4b\u95f4\u8def\u7531</li> <li>LLM \u53ef\u4ee5\u51b3\u5b9a\u8c03\u7528\u591a\u4e2a\u5de5\u5177\u4e2d\u7684\u54ea\u4e00\u4e2a</li> <li>LLM \u53ef\u4ee5\u51b3\u5b9a\u751f\u6210\u7684\u7b54\u6848\u662f\u5426\u8db3\u591f\u6216\u9700\u8981\u66f4\u591a\u5de5\u4f5c</li> </ul> <p>\u56e0\u6b64\uff0c\u6709\u8bb8\u591a\u4e0d\u540c\u7c7b\u578b\u7684\u667a\u80fd\u4ee3\u7406\u67b6\u6784\uff0c\u5b83\u4eec\u8d4b\u4e88 LLM \u4e0d\u540c\u7ea7\u522b\u7684\u63a7\u5236\u3002</p> <p></p>","boost":2},{"location":"concepts/agentic_concepts/#_2","title":"\u8def\u7531\u5668","text":"<p>\u8def\u7531\u5668\u5141\u8bb8 LLM \u4ece\u6307\u5b9a\u7684\u9009\u9879\u96c6\u4e2d\u9009\u62e9\u5355\u4e2a\u6b65\u9aa4\u3002\u8fd9\u662f\u4e00\u79cd\u667a\u80fd\u4ee3\u7406\u67b6\u6784\uff0c\u8868\u73b0\u51fa\u76f8\u5bf9\u6709\u9650\u7684\u63a7\u5236\u7ea7\u522b\uff0c\u56e0\u4e3a LLM \u901a\u5e38\u4e13\u6ce8\u4e8e\u505a\u51fa\u5355\u4e00\u51b3\u7b56\uff0c\u5e76\u4ece\u6709\u9650\u7684\u9884\u5b9a\u4e49\u9009\u9879\u96c6\u4e2d\u4ea7\u751f\u7279\u5b9a\u8f93\u51fa\u3002\u8def\u7531\u5668\u901a\u5e38\u91c7\u7528\u51e0\u4e2a\u4e0d\u540c\u7684\u6982\u5ff5\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_3","title":"\u7ed3\u6784\u5316\u8f93\u51fa","text":"<p>LLM \u7684\u7ed3\u6784\u5316\u8f93\u51fa\u901a\u8fc7\u63d0\u4f9b LLM \u5e94\u5728\u5176\u54cd\u5e94\u4e2d\u9075\u5faa\u7684\u7279\u5b9a\u683c\u5f0f\u6216\u67b6\u6784\u6765\u5de5\u4f5c\u3002\u8fd9\u7c7b\u4f3c\u4e8e\u5de5\u5177\u8c03\u7528\uff0c\u4f46\u66f4\u901a\u7528\u3002\u867d\u7136\u5de5\u5177\u8c03\u7528\u901a\u5e38\u6d89\u53ca\u9009\u62e9\u548c\u4f7f\u7528\u9884\u5b9a\u4e49\u7684\u51fd\u6570\uff0c\u4f46\u7ed3\u6784\u5316\u8f93\u51fa\u53ef\u7528\u4e8e\u4efb\u4f55\u7c7b\u578b\u7684\u683c\u5f0f\u5316\u54cd\u5e94\u3002\u5b9e\u73b0\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u5e38\u89c1\u65b9\u6cd5\u5305\u62ec\uff1a</p> <ol> <li>\u63d0\u793a\u5de5\u7a0b\uff1a\u901a\u8fc7\u7cfb\u7edf\u63d0\u793a\u6307\u793a LLM \u4ee5\u7279\u5b9a\u683c\u5f0f\u54cd\u5e94\u3002</li> <li>\u8f93\u51fa\u89e3\u6790\u5668\uff1a\u4f7f\u7528\u540e\u5904\u7406\u4ece LLM \u54cd\u5e94\u4e2d\u63d0\u53d6\u7ed3\u6784\u5316\u6570\u636e\u3002</li> <li>\u5de5\u5177\u8c03\u7528\uff1a\u5229\u7528\u67d0\u4e9b LLM \u7684\u5185\u7f6e\u5de5\u5177\u8c03\u7528\u80fd\u529b\u6765\u751f\u6210\u7ed3\u6784\u5316\u8f93\u51fa\u3002</li> </ol> <p>\u7ed3\u6784\u5316\u8f93\u51fa\u5bf9\u4e8e\u8def\u7531\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u4eec\u786e\u4fdd LLM \u7684\u51b3\u7b56\u53ef\u4ee5\u88ab\u7cfb\u7edf\u53ef\u9760\u5730\u89e3\u91ca\u548c\u6267\u884c\u3002\u5728\u6b64\u64cd\u4f5c\u6307\u5357\u4e2d\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u7ed3\u6784\u5316\u8f93\u51fa\u7684\u4fe1\u606f\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_4","title":"\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406","text":"<p>\u867d\u7136\u8def\u7531\u5668\u5141\u8bb8 LLM \u505a\u51fa\u5355\u4e00\u51b3\u7b56\uff0c\u4f46\u66f4\u590d\u6742\u7684\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u4ee5\u4e24\u79cd\u5173\u952e\u65b9\u5f0f\u6269\u5c55\u4e86 LLM \u7684\u63a7\u5236\uff1a</p> <ol> <li>\u591a\u6b65\u51b3\u7b56\uff1aLLM \u53ef\u4ee5\u8fde\u7eed\u505a\u51fa\u4e00\u7cfb\u5217\u51b3\u7b56\uff0c\u800c\u4e0d\u662f\u53ea\u505a\u4e00\u4e2a\u3002</li> <li>\u5de5\u5177\u8bbf\u95ee\uff1aLLM \u53ef\u4ee5\u9009\u62e9\u5e76\u4f7f\u7528\u5404\u79cd\u5de5\u5177\u6765\u5b8c\u6210\u4efb\u52a1\u3002</li> </ol> <p>ReAct \u662f\u4e00\u79cd\u6d41\u884c\u7684\u901a\u7528\u667a\u80fd\u4ee3\u7406\u67b6\u6784\uff0c\u7ed3\u5408\u4e86\u8fd9\u4e9b\u6269\u5c55\uff0c\u96c6\u6210\u4e86\u4e09\u4e2a\u6838\u5fc3\u6982\u5ff5\u3002</p> <ol> <li>\u5de5\u5177\u8c03\u7528\uff1a\u5141\u8bb8 LLM \u6839\u636e\u9700\u8981\u9009\u62e9\u548c\u4f7f\u7528\u5404\u79cd\u5de5\u5177\u3002</li> <li>\u8bb0\u5fc6\uff1a\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u4fdd\u7559\u548c\u4f7f\u7528\u5148\u524d\u6b65\u9aa4\u7684\u4fe1\u606f\u3002</li> <li>\u89c4\u5212\uff1a\u8d4b\u4e88 LLM \u521b\u5efa\u548c\u9075\u5faa\u591a\u6b65\u8ba1\u5212\u4ee5\u5b9e\u73b0\u76ee\u6807\u7684\u80fd\u529b\u3002</li> </ol> <p>\u8fd9\u79cd\u67b6\u6784\u5141\u8bb8\u66f4\u590d\u6742\u548c\u7075\u6d3b\u7684\u667a\u80fd\u4ee3\u7406\u884c\u4e3a\uff0c\u8d85\u8d8a\u7b80\u5355\u7684\u8def\u7531\uff0c\u5b9e\u73b0\u5177\u6709\u591a\u4e2a\u6b65\u9aa4\u7684\u52a8\u6001\u95ee\u9898\u89e3\u51b3\u3002\u4e0e\u539f\u59cb\u8bba\u6587\u4e0d\u540c\uff0c\u4eca\u5929\u7684\u667a\u80fd\u4ee3\u7406\u4f9d\u8d56\u4e8e LLM \u7684\u5de5\u5177\u8c03\u7528\u80fd\u529b\uff0c\u5e76\u5728\u6d88\u606f\u5217\u8868\u4e0a\u8fd0\u884c\u3002</p> <p>\u5728 LangGraph \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684\u667a\u80fd\u4ee3\u7406\u6765\u5f00\u59cb\u4f7f\u7528\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_5","title":"\u5de5\u5177\u8c03\u7528","text":"<p>\u6bcf\u5f53\u4f60\u5e0c\u671b\u667a\u80fd\u4ee3\u7406\u4e0e\u5916\u90e8\u7cfb\u7edf\u4ea4\u4e92\u65f6\uff0c\u5de5\u5177\u90fd\u5f88\u6709\u7528\u3002\u5916\u90e8\u7cfb\u7edf(\u4f8b\u5982 API)\u901a\u5e38\u9700\u8981\u7279\u5b9a\u7684\u8f93\u5165\u67b6\u6784\u6216\u6709\u6548\u8f7d\u8377\uff0c\u800c\u4e0d\u662f\u81ea\u7136\u8bed\u8a00\u3002\u5f53\u6211\u4eec\u5c06 API \u7ed1\u5b9a\u4e3a\u5de5\u5177\u65f6\uff0c\u6211\u4eec\u8ba9\u6a21\u578b\u4e86\u89e3\u6240\u9700\u7684\u8f93\u5165\u67b6\u6784\u3002\u6a21\u578b\u5c06\u6839\u636e\u7528\u6237\u7684\u81ea\u7136\u8bed\u8a00\u8f93\u5165\u9009\u62e9\u8c03\u7528\u5de5\u5177\uff0c\u5e76\u8fd4\u56de\u7b26\u5408\u5de5\u5177\u6240\u9700\u67b6\u6784\u7684\u8f93\u51fa\u3002</p> <p>\u8bb8\u591a LLM \u63d0\u4f9b\u5546\u652f\u6301\u5de5\u5177\u8c03\u7528\uff0cLangChain \u4e2d\u7684\u5de5\u5177\u8c03\u7528\u63a5\u53e3\u5f88\u7b80\u5355\uff1a\u4f60\u53ea\u9700\u5c06\u4efb\u4f55 Python <code>function</code> \u4f20\u9012\u5230 <code>ChatModel.bind_tools(function)</code> \u4e2d\u5373\u53ef\u3002</p> <p></p>","boost":2},{"location":"concepts/agentic_concepts/#_6","title":"\u8bb0\u5fc6","text":"<p>\u8bb0\u5fc6\u5bf9\u4e8e\u667a\u80fd\u4ee3\u7406\u81f3\u5173\u91cd\u8981\uff0c\u4f7f\u5b83\u4eec\u80fd\u591f\u5728\u95ee\u9898\u89e3\u51b3\u7684\u591a\u4e2a\u6b65\u9aa4\u4e2d\u4fdd\u7559\u548c\u5229\u7528\u4fe1\u606f\u3002\u5b83\u5728\u4e0d\u540c\u89c4\u6a21\u4e0a\u8fd0\u4f5c\uff1a</p> <ol> <li>\u77ed\u671f\u8bb0\u5fc6\uff1a\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u8bbf\u95ee\u5728\u5e8f\u5217\u7684\u65e9\u671f\u6b65\u9aa4\u4e2d\u83b7\u53d6\u7684\u4fe1\u606f\u3002</li> <li>\u957f\u671f\u8bb0\u5fc6\uff1a\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u56de\u5fc6\u8d77\u5148\u524d\u4ea4\u4e92\u4e2d\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\u5bf9\u8bdd\u4e2d\u7684\u8fc7\u53bb\u6d88\u606f\u3002</li> </ol> <p>LangGraph \u63d0\u4f9b\u5bf9\u8bb0\u5fc6\u5b9e\u73b0\u7684\u5b8c\u5168\u63a7\u5236\uff1a</p> <ul> <li><code>State</code>\uff1a\u7528\u6237\u5b9a\u4e49\u7684\u67b6\u6784\uff0c\u6307\u5b9a\u8981\u4fdd\u7559\u7684\u8bb0\u5fc6\u7684\u786e\u5207\u7ed3\u6784\u3002</li> <li><code>Checkpointer</code>\uff1a\u5728\u4f1a\u8bdd\u4e2d\u7684\u4e0d\u540c\u4ea4\u4e92\u4e2d\u5728\u6bcf\u4e2a\u6b65\u9aa4\u5b58\u50a8\u72b6\u6001\u7684\u673a\u5236\u3002</li> <li><code>Store</code>\uff1a\u8de8\u4f1a\u8bdd\u5b58\u50a8\u7528\u6237\u7279\u5b9a\u6216\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u6570\u636e\u7684\u673a\u5236\u3002</li> </ul> <p>\u8fd9\u79cd\u7075\u6d3b\u7684\u65b9\u6cd5\u5141\u8bb8\u4f60\u6839\u636e\u7279\u5b9a\u7684\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u9700\u6c42\u5b9a\u5236\u8bb0\u5fc6\u7cfb\u7edf\u3002\u6709\u6548\u7684\u8bb0\u5fc6\u7ba1\u7406\u589e\u5f3a\u4e86\u667a\u80fd\u4ee3\u7406\u7ef4\u62a4\u4e0a\u4e0b\u6587\u3001\u4ece\u8fc7\u53bb\u7ecf\u9a8c\u4e2d\u5b66\u4e60\u4ee5\u53ca\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u505a\u51fa\u66f4\u660e\u667a\u51b3\u7b56\u7684\u80fd\u529b\u3002\u6709\u5173\u6dfb\u52a0\u548c\u7ba1\u7406\u8bb0\u5fc6\u7684\u5b9e\u7528\u6307\u5357\uff0c\u8bf7\u53c2\u9605\u8bb0\u5fc6\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_7","title":"\u89c4\u5212","text":"<p>\u5728\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u4e2d\uff0cLLM \u5728 while \u5faa\u73af\u4e2d\u91cd\u590d\u8c03\u7528\u3002\u5728\u6bcf\u4e2a\u6b65\u9aa4\uff0c\u667a\u80fd\u4ee3\u7406\u51b3\u5b9a\u8c03\u7528\u54ea\u4e9b\u5de5\u5177\uff0c\u4ee5\u53ca\u8fd9\u4e9b\u5de5\u5177\u7684\u8f93\u5165\u5e94\u8be5\u662f\u4ec0\u4e48\u3002\u7136\u540e\u6267\u884c\u8fd9\u4e9b\u5de5\u5177\uff0c\u5e76\u5c06\u8f93\u51fa\u4f5c\u4e3a\u89c2\u5bdf\u7ed3\u679c\u53cd\u9988\u7ed9 LLM\u3002\u5f53\u667a\u80fd\u4ee3\u7406\u51b3\u5b9a\u5b83\u6709\u8db3\u591f\u7684\u4fe1\u606f\u6765\u89e3\u51b3\u7528\u6237\u8bf7\u6c42\u5e76\u4e14\u4e0d\u503c\u5f97\u518d\u8c03\u7528\u4efb\u4f55\u5de5\u5177\u65f6\uff0cwhile \u5faa\u73af\u7ec8\u6b62\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_8","title":"\u81ea\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u67b6\u6784","text":"<p>\u867d\u7136\u8def\u7531\u5668\u548c\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406(\u5982 ReAct)\u5f88\u5e38\u89c1\uff0c\u4f46\u81ea\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u901a\u5e38\u4f1a\u4e3a\u7279\u5b9a\u4efb\u52a1\u5e26\u6765\u66f4\u597d\u7684\u6027\u80fd\u3002LangGraph \u63d0\u4f9b\u4e86\u51e0\u4e2a\u5f3a\u5927\u7684\u529f\u80fd\u6765\u6784\u5efa\u5b9a\u5236\u7684\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\uff1a</p>","boost":2},{"location":"concepts/agentic_concepts/#_9","title":"\u4eba\u673a\u534f\u540c","text":"<p>\u4eba\u7c7b\u53c2\u4e0e\u53ef\u4ee5\u663e\u8457\u589e\u5f3a\u667a\u80fd\u4ee3\u7406\u7684\u53ef\u9760\u6027\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u654f\u611f\u4efb\u52a1\u3002\u8fd9\u53ef\u80fd\u6d89\u53ca\uff1a</p> <ul> <li>\u6279\u51c6\u7279\u5b9a\u64cd\u4f5c</li> <li>\u63d0\u4f9b\u53cd\u9988\u4ee5\u66f4\u65b0\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001</li> <li>\u5728\u590d\u6742\u51b3\u7b56\u8fc7\u7a0b\u4e2d\u63d0\u4f9b\u6307\u5bfc</li> </ul> <p>\u5f53\u5b8c\u5168\u81ea\u52a8\u5316\u4e0d\u53ef\u884c\u6216\u4e0d\u53ef\u53d6\u65f6\uff0c\u4eba\u673a\u534f\u540c\u6a21\u5f0f\u81f3\u5173\u91cd\u8981\u3002\u5728\u6211\u4eec\u7684\u4eba\u673a\u534f\u540c\u6307\u5357\u4e2d\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_10","title":"\u5e76\u884c\u5316","text":"<p>\u5e76\u884c\u5904\u7406\u5bf9\u4e8e\u9ad8\u6548\u7684\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u548c\u590d\u6742\u4efb\u52a1\u81f3\u5173\u91cd\u8981\u3002LangGraph \u901a\u8fc7\u5176 Send API \u652f\u6301\u5e76\u884c\u5316\uff0c\u5b9e\u73b0\uff1a</p> <ul> <li>\u591a\u4e2a\u72b6\u6001\u7684\u5e76\u53d1\u5904\u7406</li> <li>\u5b9e\u73b0\u7c7b\u4f3c map-reduce \u7684\u64cd\u4f5c</li> <li>\u9ad8\u6548\u5904\u7406\u72ec\u7acb\u5b50\u4efb\u52a1</li> </ul> <p>\u6709\u5173\u5b9e\u9645\u5b9e\u73b0\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684 map-reduce \u6559\u7a0b</p>","boost":2},{"location":"concepts/agentic_concepts/#_11","title":"\u5b50\u56fe","text":"<p>\u5b50\u56fe\u5bf9\u4e8e\u7ba1\u7406\u590d\u6742\u7684\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u81f3\u5173\u91cd\u8981\uff0c\u7279\u522b\u662f\u5728\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d\u3002\u5b83\u4eec\u5141\u8bb8\uff1a</p> <ul> <li>\u4e3a\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u9694\u79bb\u72b6\u6001\u7ba1\u7406</li> <li>\u667a\u80fd\u4ee3\u7406\u56e2\u961f\u7684\u5206\u5c42\u7ec4\u7ec7</li> <li>\u667a\u80fd\u4ee3\u7406\u4e0e\u4e3b\u7cfb\u7edf\u4e4b\u95f4\u7684\u53ef\u63a7\u901a\u4fe1</li> </ul> <p>\u5b50\u56fe\u901a\u8fc7\u72b6\u6001\u67b6\u6784\u4e2d\u7684\u91cd\u53e0\u952e\u4e0e\u7236\u56fe\u901a\u4fe1\u3002\u8fd9\u5b9e\u73b0\u4e86\u7075\u6d3b\u7684\u6a21\u5757\u5316\u667a\u80fd\u4ee3\u7406\u8bbe\u8ba1\u3002\u6709\u5173\u5b9e\u73b0\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u5b50\u56fe\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/agentic_concepts/#_12","title":"\u53cd\u601d","text":"<p>\u53cd\u601d\u673a\u5236\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u663e\u8457\u63d0\u9ad8\u667a\u80fd\u4ee3\u7406\u7684\u53ef\u9760\u6027\uff1a</p> <ol> <li>\u8bc4\u4f30\u4efb\u52a1\u5b8c\u6210\u548c\u6b63\u786e\u6027</li> <li>\u63d0\u4f9b\u53cd\u9988\u4ee5\u8fdb\u884c\u8fed\u4ee3\u6539\u8fdb</li> <li>\u542f\u7528\u81ea\u6211\u7ea0\u6b63\u548c\u5b66\u4e60</li> </ol> <p>\u867d\u7136\u901a\u5e38\u57fa\u4e8e LLM\uff0c\u4f46\u53cd\u601d\u4e5f\u53ef\u4ee5\u4f7f\u7528\u786e\u5b9a\u6027\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c\u5728\u7f16\u7801\u4efb\u52a1\u4e2d\uff0c\u7f16\u8bd1\u9519\u8bef\u53ef\u4ee5\u7528\u4f5c\u53cd\u9988\u3002\u8fd9\u79cd\u65b9\u6cd5\u5728\u6b64\u89c6\u9891\u4e2d\u4f7f\u7528 LangGraph \u8fdb\u884c\u81ea\u6211\u7ea0\u6b63\u4ee3\u7801\u751f\u6210\u4e2d\u5f97\u5230\u4e86\u6f14\u793a\u3002</p> <p>\u901a\u8fc7\u5229\u7528\u8fd9\u4e9b\u529f\u80fd\uff0cLangGraph \u80fd\u591f\u521b\u5efa\u590d\u6742\u7684\u3001\u7279\u5b9a\u4e8e\u4efb\u52a1\u7684\u667a\u80fd\u4ee3\u7406\u67b6\u6784\uff0c\u53ef\u4ee5\u5904\u7406\u590d\u6742\u7684\u5de5\u4f5c\u6d41\u3001\u6709\u6548\u534f\u4f5c\u5e76\u6301\u7eed\u63d0\u9ad8\u5176\u6027\u80fd\u3002</p>","boost":2},{"location":"concepts/application_structure/","title":"\u5e94\u7528\u7a0b\u5e8f\u7ed3\u6784","text":"","boost":2},{"location":"concepts/application_structure/#_2","title":"\u6982\u8ff0","text":"<p>LangGraph \u5e94\u7528\u7a0b\u5e8f\u7531\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u3001\u4e00\u4e2a\u914d\u7f6e\u6587\u4ef6 (<code>langgraph.json</code>)\u3001\u4e00\u4e2a\u6307\u5b9a\u4f9d\u8d56\u9879\u7684\u6587\u4ef6\u4ee5\u53ca\u4e00\u4e2a\u6307\u5b9a\u73af\u5883\u53d8\u91cf\u7684\u53ef\u9009 <code>.env</code> \u6587\u4ef6\u7ec4\u6210\u3002</p> <p>\u672c\u6307\u5357\u5c55\u793a\u4e86\u5e94\u7528\u7a0b\u5e8f\u7684\u5178\u578b\u7ed3\u6784\uff0c\u5e76\u5c55\u793a\u4e86\u5982\u4f55\u6307\u5b9a\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4fe1\u606f\u3002</p>","boost":2},{"location":"concepts/application_structure/#_3","title":"\u5173\u952e\u6982\u5ff5","text":"<p>\u8981\u4f7f\u7528 LangGraph Platform \u8fdb\u884c\u90e8\u7f72\uff0c\u5e94\u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <ol> <li>\u4e00\u4e2a LangGraph \u914d\u7f6e\u6587\u4ef6 (<code>langgraph.json</code>)\uff0c\u7528\u4e8e\u6307\u5b9a\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528\u7684\u4f9d\u8d56\u9879\u3001\u56fe\u548c\u73af\u5883\u53d8\u91cf\u3002</li> <li>\u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91\u7684\u56fe\u3002</li> <li>\u4e00\u4e2a\u6307\u5b9a\u8fd0\u884c\u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u4f9d\u8d56\u9879\u7684\u6587\u4ef6\u3002</li> <li>\u5e94\u7528\u7a0b\u5e8f\u8fd0\u884c\u6240\u9700\u7684\u73af\u5883\u53d8\u91cf\u3002</li> </ol>","boost":2},{"location":"concepts/application_structure/#_4","title":"\u6587\u4ef6\u7ed3\u6784","text":"<p>\u4ee5\u4e0b\u662f\u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u5f55\u7ed3\u6784\u793a\u4f8b\uff1a</p> PythonPython (requirements.txt)Python (pyproject.toml)JavaScript <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 requirements.txt # \u5305\u4f9d\u8d56\u9879\n\u2514\u2500\u2500 langgraph.json # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n</code></pre> <pre><code>my-app/\n\u251c\u2500\u2500 my_agent # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 tools.py # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.py # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.py # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 agent.py # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u251c\u2500\u2500 langgraph.json  # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n\u2514\u2500\u2500 pyproject.toml # \u9879\u76ee\u7684\u4f9d\u8d56\u9879\n</code></pre> <pre><code>my-app/\n\u251c\u2500\u2500 src # \u6240\u6709\u9879\u76ee\u4ee3\u7801\u90fd\u5728\u8fd9\u91cc\n\u2502   \u251c\u2500\u2500 utils # \u56fe\u7684\u53ef\u9009\u5b9e\u7528\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 tools.ts # \u56fe\u7684\u5de5\u5177\n\u2502   \u2502   \u251c\u2500\u2500 nodes.ts # \u56fe\u7684\u8282\u70b9\u51fd\u6570\n\u2502   \u2502   \u2514\u2500\u2500 state.ts # \u56fe\u7684\u72b6\u6001\u5b9a\u4e49\n\u2502   \u2514\u2500\u2500 agent.ts # \u6784\u5efa\u56fe\u7684\u4ee3\u7801\n\u251c\u2500\u2500 package.json # \u5305\u4f9d\u8d56\u9879\n\u251c\u2500\u2500 .env # \u73af\u5883\u53d8\u91cf\n\u2514\u2500\u2500 langgraph.json # LangGraph \u7684\u914d\u7f6e\u6587\u4ef6\n</code></pre> <p>Note</p> <p>LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u76ee\u5f55\u7ed3\u6784\u53ef\u80fd\u56e0\u7f16\u7a0b\u8bed\u8a00\u548c\u4f7f\u7528\u7684\u5305\u7ba1\u7406\u5668\u800c\u5f02\u3002</p>","boost":2},{"location":"concepts/application_structure/#configuration-file-concepts","title":"\u914d\u7f6e\u6587\u4ef6","text":"<p><code>langgraph.json</code> \u6587\u4ef6\u662f\u4e00\u4e2a JSON \u6587\u4ef6\uff0c\u7528\u4e8e\u6307\u5b9a\u90e8\u7f72 LangGraph \u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4f9d\u8d56\u9879\u3001\u56fe\u3001\u73af\u5883\u53d8\u91cf\u548c\u5176\u4ed6\u8bbe\u7f6e\u3002</p> <p>\u6709\u5173 JSON \u6587\u4ef6\u4e2d\u6240\u6709\u652f\u6301\u7684\u952e\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 LangGraph \u914d\u7f6e\u6587\u4ef6\u53c2\u8003\u3002</p> <p>Tip</p> <p>LangGraph CLI \u9ed8\u8ba4\u4f7f\u7528\u5f53\u524d\u76ee\u5f55\u4e2d\u7684\u914d\u7f6e\u6587\u4ef6 <code>langgraph.json</code>\u3002</p>","boost":2},{"location":"concepts/application_structure/#_5","title":"\u793a\u4f8b","text":"Python <ul> <li>\u4f9d\u8d56\u9879\u6d89\u53ca\u81ea\u5b9a\u4e49\u672c\u5730\u5305\u548c <code>langchain_openai</code> \u5305\u3002</li> <li>\u5c06\u4ece\u6587\u4ef6 <code>./your_package/your_file.py</code> \u52a0\u8f7d\u5177\u6709\u53d8\u91cf <code>variable</code> \u7684\u5355\u4e2a\u56fe\u3002</li> <li>\u73af\u5883\u53d8\u91cf\u4ece <code>.env</code> \u6587\u4ef6\u52a0\u8f7d\u3002</li> </ul> <pre><code>{\n  \"dependencies\": [\"langchain_openai\", \"./your_package\"],\n  \"graphs\": {\n    \"my_agent\": \"./your_package/your_file.py:agent\"\n  },\n  \"env\": \"./.env\"\n}\n</code></pre> JavaScript <ul> <li>\u4f9d\u8d56\u9879\u5c06\u4ece\u672c\u5730\u76ee\u5f55\u4e2d\u7684\u4f9d\u8d56\u9879\u6587\u4ef6\uff08\u4f8b\u5982 <code>package.json</code>\uff09\u52a0\u8f7d\u3002</li> <li>\u5c06\u4ece\u6587\u4ef6 <code>./your_package/your_file.js</code> \u52a0\u8f7d\u5177\u6709\u51fd\u6570 <code>agent</code> \u7684\u5355\u4e2a\u56fe\u3002</li> <li>\u73af\u5883\u53d8\u91cf <code>OPENAI_API_KEY</code> \u5728\u5185\u8054\u8bbe\u7f6e\u3002</li> </ul> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"my_agent\": \"./your_package/your_file.js:agent\"\n  },\n  \"env\": {\n    \"OPENAI_API_KEY\": \"secret-key\"\n  }\n}\n</code></pre>","boost":2},{"location":"concepts/application_structure/#_6","title":"\u4f9d\u8d56\u9879","text":"Python <p>LangGraph \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f9d\u8d56\u4e8e\u5176\u4ed6 Python \u5305\u3002</p> JavaScript <p>LangGraph \u5e94\u7528\u7a0b\u5e8f\u53ef\u80fd\u4f9d\u8d56\u4e8e\u5176\u4ed6 TypeScript/JavaScript \u5e93\u3002</p> <p>\u4f60\u901a\u5e38\u9700\u8981\u6307\u5b9a\u4ee5\u4e0b\u4fe1\u606f\u624d\u80fd\u6b63\u786e\u8bbe\u7f6e\u4f9d\u8d56\u9879\uff1a</p> Python <ol> <li>\u76ee\u5f55\u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\u7684\u6587\u4ef6\uff08\u4f8b\u5982 <code>requirements.txt</code>\u3001<code>pyproject.toml</code> \u6216 <code>package.json</code>\uff09\u3002</li> </ol> JavaScript <ol> <li> <p>\u76ee\u5f55\u4e2d\u6307\u5b9a\u4f9d\u8d56\u9879\u7684\u6587\u4ef6\uff08\u4f8b\u5982 <code>package.json</code>\uff09\u3002</p> </li> <li> <p>LangGraph \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 <code>dependencies</code> \u952e\uff0c\u7528\u4e8e\u6307\u5b9a\u8fd0\u884c LangGraph \u5e94\u7528\u7a0b\u5e8f\u6240\u9700\u7684\u4f9d\u8d56\u9879\u3002</p> </li> <li>\u53ef\u4ee5\u4f7f\u7528 LangGraph \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 <code>dockerfile_lines</code> \u952e\u6307\u5b9a\u4efb\u4f55\u5176\u4ed6\u4e8c\u8fdb\u5236\u6587\u4ef6\u6216\u7cfb\u7edf\u5e93\u3002</li> </ol>","boost":2},{"location":"concepts/application_structure/#_7","title":"\u56fe","text":"<p>\u4f7f\u7528 LangGraph \u914d\u7f6e\u6587\u4ef6\u4e2d\u7684 <code>graphs</code> \u952e\u6765\u6307\u5b9a\u5df2\u90e8\u7f72\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u5c06\u53ef\u7528\u7684\u56fe\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u914d\u7f6e\u6587\u4ef6\u4e2d\u6307\u5b9a\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u3002\u6bcf\u4e2a\u56fe\u7531\u4e00\u4e2a\u540d\u79f0\uff08\u5e94\u8be5\u662f\u552f\u4e00\u7684\uff09\u548c\u4ee5\u4e0b\u4efb\u4e00\u9879\u7684\u8def\u5f84\u6807\u8bc6\uff1a(1) \u5df2\u7f16\u8bd1\u7684\u56fe\u6216 (2) \u5b9a\u4e49\u4e86\u521b\u5efa\u56fe\u7684\u51fd\u6570\u3002</p>","boost":2},{"location":"concepts/application_structure/#_8","title":"\u73af\u5883\u53d8\u91cf","text":"<p>\u5982\u679c\u4f60\u5728\u672c\u5730\u4f7f\u7528\u5df2\u90e8\u7f72\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\uff0c\u4f60\u53ef\u4ee5\u5728 LangGraph \u914d\u7f6e\u6587\u4ef6\u7684 <code>env</code> \u952e\u4e2d\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u5bf9\u4e8e\u751f\u4ea7\u90e8\u7f72\uff0c\u4f60\u901a\u5e38\u5e0c\u671b\u5728\u90e8\u7f72\u73af\u5883\u4e2d\u914d\u7f6e\u73af\u5883\u53d8\u91cf\u3002</p>","boost":2},{"location":"concepts/assistants/","title":"\u52a9\u624b","text":"<p>**\u52a9\u624b**\u5141\u8bb8\u4f60\u5c06\u914d\u7f6e\uff08\u5982\u63d0\u793a\u3001LLM \u9009\u62e9\u3001\u5de5\u5177\uff09\u4e0e\u56fe\u7684\u6838\u5fc3\u903b\u8f91\u5206\u5f00\u7ba1\u7406\uff0c\u4ece\u800c\u5b9e\u73b0\u5feb\u901f\u66f4\u6539\u800c\u4e0d\u6539\u53d8\u56fe\u67b6\u6784\u3002\u8fd9\u662f\u4e00\u79cd\u521b\u5efa\u540c\u4e00\u56fe\u67b6\u6784\u7684\u591a\u4e2a\u4e13\u4e1a\u7248\u672c\u7684\u65b9\u6cd5\uff0c\u6bcf\u4e2a\u7248\u672c\u90fd\u901a\u8fc7\u4e0a\u4e0b\u6587/\u914d\u7f6e\u53d8\u5316\u800c\u4e0d\u662f\u7ed3\u6784\u66f4\u6539\u9488\u5bf9\u4e0d\u540c\u7528\u4f8b\u8fdb\u884c\u4f18\u5316\u3002</p> <p>\u4f8b\u5982\uff0c\u60f3\u8c61\u4e00\u4e2a\u57fa\u4e8e\u901a\u7528\u56fe\u67b6\u6784\u6784\u5efa\u7684\u901a\u7528\u5199\u4f5c\u667a\u80fd\u4ee3\u7406\u3002\u867d\u7136\u7ed3\u6784\u4fdd\u6301\u4e0d\u53d8\uff0c\u4f46\u4e0d\u540c\u7684\u5199\u4f5c\u98ce\u683c\u2014\u2014\u4f8b\u5982\u535a\u5ba2\u6587\u7ae0\u548c\u63a8\u6587\u2014\u2014\u9700\u8981\u5b9a\u5236\u914d\u7f6e\u4ee5\u4f18\u5316\u6027\u80fd\u3002\u4e3a\u4e86\u652f\u6301\u8fd9\u4e9b\u53d8\u5316\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u52a9\u624b\uff08\u4f8b\u5982\uff0c\u4e00\u4e2a\u7528\u4e8e\u535a\u5ba2\uff0c\u53e6\u4e00\u4e2a\u7528\u4e8e\u63a8\u6587\uff09\uff0c\u5b83\u4eec\u5171\u4eab\u5e95\u5c42\u56fe\uff0c\u4f46\u5728\u6a21\u578b\u9009\u62e9\u548c\u7cfb\u7edf\u63d0\u793a\u65b9\u9762\u6709\u6240\u4e0d\u540c\u3002</p> <p></p> <p>LangGraph Cloud API \u63d0\u4f9b\u4e86\u591a\u4e2a\u7aef\u70b9\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u52a9\u624b\u53ca\u5176\u7248\u672c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 API \u53c2\u8003\u3002</p> <p>Info</p> <p>\u52a9\u624b\u662f LangGraph Platform \u7684\u6982\u5ff5\u3002\u5b83\u4eec\u5728\u5f00\u6e90 LangGraph \u5e93\u4e2d\u4e0d\u53ef\u7528\u3002</p>"},{"location":"concepts/assistants/#_2","title":"\u914d\u7f6e","text":"Python <p>\u52a9\u624b\u5efa\u7acb\u5728 LangGraph \u5f00\u6e90\u7684\u914d\u7f6e\u548c\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u6982\u5ff5\u4e4b\u4e0a\u3002</p> <p>\u867d\u7136\u8fd9\u4e9b\u529f\u80fd\u5728\u5f00\u6e90 LangGraph \u5e93\u4e2d\u53ef\u7528\uff0c\u4f46\u52a9\u624b\u4ec5\u5728 LangGraph Platform \u4e2d\u5b58\u5728\u3002\u8fd9\u662f\u56e0\u4e3a\u52a9\u624b\u4e0e\u4f60\u90e8\u7f72\u7684\u56fe\u7d27\u5bc6\u8026\u5408\u3002\u90e8\u7f72\u540e\uff0cLangGraph Server \u5c06\u4f7f\u7528\u56fe\u7684\u9ed8\u8ba4\u4e0a\u4e0b\u6587\u548c\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u56fe\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u52a9\u624b\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u52a9\u624b\u53ea\u662f\u5177\u6709\u7279\u5b9a\u914d\u7f6e\u7684\u56fe\u7684_\u5b9e\u4f8b_\u3002\u56e0\u6b64\uff0c\u591a\u4e2a\u52a9\u624b\u53ef\u4ee5\u5f15\u7528\u540c\u4e00\u4e2a\u56fe\uff0c\u4f46\u53ef\u4ee5\u5305\u542b\u4e0d\u540c\u7684\u914d\u7f6e\uff08\u4f8b\u5982\u63d0\u793a\u3001\u6a21\u578b\u3001\u5de5\u5177\uff09\u3002LangGraph Server API \u63d0\u4f9b\u4e86\u591a\u4e2a\u7aef\u70b9\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u52a9\u624b\u3002\u6709\u5173\u5982\u4f55\u521b\u5efa\u52a9\u624b\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 API \u53c2\u8003\u548c\u6b64\u64cd\u4f5c\u6307\u5357\u3002</p>"},{"location":"concepts/assistants/#_3","title":"\u7248\u672c\u63a7\u5236","text":"<p>\u52a9\u624b\u652f\u6301\u7248\u672c\u63a7\u5236\u4ee5\u8ddf\u8e2a\u968f\u65f6\u95f4\u7684\u53d8\u5316\u3002 \u521b\u5efa\u52a9\u624b\u540e\uff0c\u5bf9\u8be5\u52a9\u624b\u7684\u540e\u7eed\u7f16\u8f91\u5c06\u521b\u5efa\u65b0\u7248\u672c\u3002\u6709\u5173\u5982\u4f55\u7ba1\u7406\u52a9\u624b\u7248\u672c\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u64cd\u4f5c\u6307\u5357\u3002</p>"},{"location":"concepts/assistants/#_4","title":"\u6267\u884c","text":"<p>**\u8fd0\u884c**\u662f\u52a9\u624b\u7684\u8c03\u7528\u3002\u6bcf\u6b21\u8fd0\u884c\u53ef\u80fd\u6709\u5176\u81ea\u5df1\u7684\u8f93\u5165\u3001\u914d\u7f6e\u3001\u4e0a\u4e0b\u6587\u548c\u5143\u6570\u636e\uff0c\u8fd9\u53ef\u80fd\u4f1a\u5f71\u54cd\u5e95\u5c42\u56fe\u7684\u6267\u884c\u548c\u8f93\u51fa\u3002\u8fd0\u884c\u53ef\u4ee5\u9009\u62e9\u5728\u7ebf\u7a0b\u4e0a\u6267\u884c\u3002</p> <p>LangGraph Platform API \u63d0\u4f9b\u4e86\u591a\u4e2a\u7aef\u70b9\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u8fd0\u884c\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 API \u53c2\u8003\u3002</p>"},{"location":"concepts/auth/","title":"\u8eab\u4efd\u9a8c\u8bc1\u548c\u8bbf\u95ee\u63a7\u5236","text":"<p>LangGraph Platform \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7075\u6d3b\u7684\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u7cfb\u7edf\uff0c\u53ef\u4ee5\u4e0e\u5927\u591a\u6570\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6848\u96c6\u6210\u3002</p>","boost":2},{"location":"concepts/auth/#_2","title":"\u6838\u5fc3\u6982\u5ff5","text":"","boost":2},{"location":"concepts/auth/#_3","title":"\u8eab\u4efd\u9a8c\u8bc1\u4e0e\u6388\u6743","text":"<p>\u867d\u7136\u8fd9\u4e9b\u672f\u8bed\u7ecf\u5e38\u4e92\u6362\u4f7f\u7528\uff0c\u4f46\u5b83\u4eec\u4ee3\u8868\u4e0d\u540c\u7684\u5b89\u5168\u6982\u5ff5\uff1a</p> <ul> <li>\u8eab\u4efd\u9a8c\u8bc1\uff08\"AuthN\"\uff09\u9a8c\u8bc1_\u4f60\u662f\u8c01_\u3002\u8fd9\u4f5c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u7684\u4e2d\u95f4\u4ef6\u8fd0\u884c\u3002</li> <li>\u6388\u6743\uff08\"AuthZ\"\uff09\u786e\u5b9a_\u4f60\u53ef\u4ee5\u505a\u4ec0\u4e48_\u3002\u8fd9\u5728\u6bcf\u4e2a\u8d44\u6e90\u7684\u57fa\u7840\u4e0a\u9a8c\u8bc1\u7528\u6237\u7684\u6743\u9650\u548c\u89d2\u8272\u3002</li> </ul> Python <p>\u5728 LangGraph Platform \u4e2d\uff0c\u8eab\u4efd\u9a8c\u8bc1\u7531\u4f60\u7684 <code>@auth.authenticate</code> \u5904\u7406\u5668\u5904\u7406\uff0c\u6388\u6743\u7531\u4f60\u7684 <code>@auth.on</code> \u5904\u7406\u5668\u5904\u7406\u3002</p> JavaScript <p>\u5728 LangGraph Platform \u4e2d\uff0c\u8eab\u4efd\u9a8c\u8bc1\u7531\u4f60\u7684 <code>@auth.authenticate</code> \u5904\u7406\u5668\u5904\u7406\uff0c\u6388\u6743\u7531\u4f60\u7684 <code>@auth.on</code> \u5904\u7406\u5668\u5904\u7406\u3002</p>","boost":2},{"location":"concepts/auth/#_4","title":"\u9ed8\u8ba4\u5b89\u5168\u6a21\u578b","text":"<p>LangGraph Platform \u63d0\u4f9b\u4e0d\u540c\u7684\u5b89\u5168\u9ed8\u8ba4\u503c\uff1a</p>","boost":2},{"location":"concepts/auth/#langgraph-platform","title":"LangGraph Platform","text":"<ul> <li>\u9ed8\u8ba4\u4f7f\u7528 LangSmith API \u5bc6\u94a5</li> <li>\u8981\u6c42\u5728 <code>x-api-key</code> \u6807\u5934\u4e2d\u63d0\u4f9b\u6709\u6548\u7684 API \u5bc6\u94a5</li> <li>\u53ef\u4ee5\u4f7f\u7528\u4f60\u7684\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u5668\u8fdb\u884c\u81ea\u5b9a\u4e49</li> </ul> <p>\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1</p> <p>LangGraph Platform \u7684\u6240\u6709\u8ba1\u5212\u90fd**\u652f\u6301**\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u3002</p>","boost":2},{"location":"concepts/auth/#_5","title":"\u81ea\u6258\u7ba1","text":"<ul> <li>\u65e0\u9ed8\u8ba4\u8eab\u4efd\u9a8c\u8bc1</li> <li>\u5b8c\u5168\u7075\u6d3b\u5730\u5b9e\u73b0\u4f60\u7684\u5b89\u5168\u6a21\u578b</li> <li>\u4f60\u63a7\u5236\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u7684\u6240\u6709\u65b9\u9762</li> </ul>","boost":2},{"location":"concepts/auth/#_6","title":"\u7cfb\u7edf\u67b6\u6784","text":"<p>\u5178\u578b\u7684\u8eab\u4efd\u9a8c\u8bc1\u8bbe\u7f6e\u6d89\u53ca\u4e09\u4e2a\u4e3b\u8981\u7ec4\u4ef6\uff1a</p> <ol> <li> <p>\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\uff08\u8eab\u4efd\u63d0\u4f9b\u8005/IdP\uff09</p> </li> <li> <p>\u7ba1\u7406\u7528\u6237\u8eab\u4efd\u548c\u51ed\u636e\u7684\u4e13\u7528\u670d\u52a1</p> </li> <li>\u5904\u7406\u7528\u6237\u6ce8\u518c\u3001\u767b\u5f55\u3001\u5bc6\u7801\u91cd\u7f6e\u7b49</li> <li>\u5728\u6210\u529f\u8eab\u4efd\u9a8c\u8bc1\u540e\u9881\u53d1\u4ee4\u724c\uff08JWT\u3001\u4f1a\u8bdd\u4ee4\u724c\u7b49\uff09</li> <li> <p>\u793a\u4f8b\uff1aAuth0\u3001Supabase Auth\u3001Okta \u6216\u4f60\u81ea\u5df1\u7684\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1\u5668</p> </li> <li> <p>LangGraph \u540e\u7aef\uff08\u8d44\u6e90\u670d\u52a1\u5668\uff09</p> </li> <li> <p>\u5305\u542b\u4e1a\u52a1\u903b\u8f91\u548c\u53d7\u4fdd\u62a4\u8d44\u6e90\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f</p> </li> <li>\u4e0e\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u9a8c\u8bc1\u4ee4\u724c</li> <li>\u57fa\u4e8e\u7528\u6237\u8eab\u4efd\u548c\u6743\u9650\u6267\u884c\u8bbf\u95ee\u63a7\u5236</li> <li> <p>\u4e0d\u76f4\u63a5\u5b58\u50a8\u7528\u6237\u51ed\u636e</p> </li> <li> <p>\u5ba2\u6237\u7aef\u5e94\u7528\u7a0b\u5e8f\uff08\u524d\u7aef\uff09</p> </li> <li> <p>Web \u5e94\u7528\u3001\u79fb\u52a8\u5e94\u7528\u6216 API \u5ba2\u6237\u7aef</p> </li> <li>\u6536\u96c6\u65f6\u95f4\u654f\u611f\u7684\u7528\u6237\u51ed\u636e\u5e76\u53d1\u9001\u5230\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005</li> <li>\u4ece\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005\u63a5\u6536\u4ee4\u724c</li> <li>\u5728\u5bf9 LangGraph \u540e\u7aef\u7684\u8bf7\u6c42\u4e2d\u5305\u542b\u8fd9\u4e9b\u4ee4\u724c</li> </ol> <p>\u4ee5\u4e0b\u662f\u8fd9\u4e9b\u7ec4\u4ef6\u901a\u5e38\u5982\u4f55\u4ea4\u4e92\uff1a</p> <pre><code>sequenceDiagram\n    participant Client as Client App\n    participant Auth as Auth Provider\n    participant LG as LangGraph Backend\n\n    Client-&gt;&gt;Auth: 1. Login (username/password)\n    Auth--&gt;&gt;Client: 2. Return token\n    Client-&gt;&gt;LG: 3. Request with token\n    Note over LG: 4. Validate token (@auth.authenticate)\n    LG--&gt;&gt;Auth:  5. Fetch user info\n    Auth--&gt;&gt;LG: 6. Confirm validity\n    Note over LG: 7. Apply access control (@auth.on.*)\n    LG--&gt;&gt;Client: 8. Return resources</code></pre> Python <p>\u4f60\u5728 LangGraph \u4e2d\u7684 <code>@auth.authenticate</code> \u5904\u7406\u5668\u5904\u7406\u6b65\u9aa4 4-6\uff0c\u800c\u4f60\u7684 <code>@auth.on</code> \u5904\u7406\u5668\u5b9e\u73b0\u6b65\u9aa4 7\u3002</p> JavaScript <p>\u4f60\u5728 LangGraph \u4e2d\u7684 <code>auth.authenticate</code> \u5904\u7406\u5668\u5904\u7406\u6b65\u9aa4 4-6\uff0c\u800c\u4f60\u7684 <code>auth.on</code> \u5904\u7406\u5668\u5b9e\u73b0\u6b65\u9aa4 7\u3002</p>","boost":2},{"location":"concepts/auth/#_7","title":"\u8eab\u4efd\u9a8c\u8bc1","text":"Python <p>LangGraph \u4e2d\u7684\u8eab\u4efd\u9a8c\u8bc1\u4f5c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u7684\u4e2d\u95f4\u4ef6\u8fd0\u884c\u3002\u4f60\u7684 <code>@auth.authenticate</code> \u5904\u7406\u5668\u63a5\u6536\u8bf7\u6c42\u4fe1\u606f\u5e76\u5e94\u8be5\uff1a</p> <ol> <li>\u9a8c\u8bc1\u51ed\u636e</li> <li>\u5982\u679c\u6709\u6548\uff0c\u8fd4\u56de\u5305\u542b\u7528\u6237\u8eab\u4efd\u548c\u7528\u6237\u4fe1\u606f\u7684\u7528\u6237\u4fe1\u606f</li> <li>\u5982\u679c\u65e0\u6548\uff0c\u5f15\u53d1 HTTPException \u6216 AssertionError</li> </ol> <pre><code>from langgraph_sdk import Auth\n\nauth = Auth()\n\n@auth.authenticate\nasync def authenticate(headers: dict) -&gt; Auth.types.MinimalUserDict:\n    # Validate credentials (e.g., API key, JWT token)\n    api_key = headers.get(\"x-api-key\")\n    if not api_key or not is_valid_key(api_key):\n        raise Auth.exceptions.HTTPException(\n            status_code=401,\n            detail=\"Invalid API key\"\n        )\n\n    # Return user info - only identity and is_authenticated are required\n    # Add any additional fields you need for authorization\n    return {\n        \"identity\": \"user-123\",        # Required: unique user identifier\n        \"is_authenticated\": True,      # Optional: assumed True by default\n        \"permissions\": [\"read\", \"write\"] # Optional: for permission-based auth\n        # You can add more custom fields if you want to implement other auth patterns\n        \"role\": \"admin\",\n        \"org_id\": \"org-456\"\n\n    }\n</code></pre> <p>\u8fd4\u56de\u7684\u7528\u6237\u4fe1\u606f\u53ef\u7528\u4e8e\uff1a</p> <ul> <li>\u901a\u8fc7 <code>ctx.user</code> \u63d0\u4f9b\u7ed9\u4f60\u7684\u6388\u6743\u5904\u7406\u5668</li> <li>\u901a\u8fc7 <code>config[\"configuration\"][\"langgraph_auth_user\"]</code> \u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528</li> </ul> JavaScript <p>LangGraph \u4e2d\u7684\u8eab\u4efd\u9a8c\u8bc1\u4f5c\u4e3a\u6bcf\u4e2a\u8bf7\u6c42\u7684\u4e2d\u95f4\u4ef6\u8fd0\u884c\u3002\u4f60\u7684 <code>authenticate</code> \u5904\u7406\u5668\u63a5\u6536\u8bf7\u6c42\u4fe1\u606f\u5e76\u5e94\u8be5\uff1a</p> <ol> <li>\u9a8c\u8bc1\u51ed\u636e</li> <li>\u5982\u679c\u6709\u6548\uff0c\u8fd4\u56de\u5305\u542b\u7528\u6237\u8eab\u4efd\u548c\u7528\u6237\u4fe1\u606f\u7684\u7528\u6237\u4fe1\u606f</li> <li>\u5982\u679c\u65e0\u6548\uff0c\u5f15\u53d1 HTTPException</li> </ol> <pre><code>import { Auth, HTTPException } from \"@langchain/langgraph-sdk\";\n\nexport const auth = new Auth();\n\nauth.authenticate(async (request) =&gt; {\n  // Validate credentials (e.g., API key, JWT token)\n  const apiKey = request.headers.get(\"x-api-key\");\n  if (!apiKey || !isValidKey(apiKey)) {\n    throw new HTTPException(401, \"Invalid API key\");\n  }\n\n  // Return user info - only identity and isAuthenticated are required\n  // Add any additional fields you need for authorization\n  return {\n    identity: \"user-123\", // Required: unique user identifier\n    isAuthenticated: true, // Optional: assumed true by default\n    permissions: [\"read\", \"write\"], // Optional: for permission-based auth\n    // You can add more custom fields if you want to implement other auth patterns\n    role: \"admin\",\n    orgId: \"org-456\",\n  };\n});\n</code></pre> <p>\u8fd4\u56de\u7684\u7528\u6237\u4fe1\u606f\u53ef\u7528\u4e8e\uff1a</p> <ul> <li>\u901a\u8fc7\u56de\u8c03\u5904\u7406\u5668\u4e2d\u7684 <code>user</code> \u5c5e\u6027\u63d0\u4f9b\u7ed9\u4f60\u7684\u6388\u6743\u5904\u7406\u5668</li> <li>\u901a\u8fc7 <code>config.configurable.langgraph_auth_user</code> \u5728\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4f7f\u7528</li> </ul> \u652f\u6301\u7684\u53c2\u6570 Python <p><code>@auth.authenticate</code> \u5904\u7406\u5668\u53ef\u4ee5\u6309\u540d\u79f0\u63a5\u53d7\u4ee5\u4e0b\u4efb\u4f55\u53c2\u6570\uff1a</p> <ul> <li>request (Request): \u539f\u59cb ASGI \u8bf7\u6c42\u5bf9\u8c61</li> <li>body (dict): \u89e3\u6790\u540e\u7684\u8bf7\u6c42\u4f53</li> <li>path (str): \u8bf7\u6c42\u8def\u5f84\uff0c\u4f8b\u5982 \"/threads/abcd-1234-abcd-1234/runs/abcd-1234-abcd-1234/stream\"</li> <li>method (str): HTTP \u65b9\u6cd5\uff0c\u4f8b\u5982 \"GET\"</li> <li>path_params (dict[str, str]): URL \u8def\u5f84\u53c2\u6570\uff0c\u4f8b\u5982 {\"thread_id\": \"abcd-1234-abcd-1234\", \"run_id\": \"abcd-1234-abcd-1234\"}</li> <li>query_params (dict[str, str]): URL \u67e5\u8be2\u53c2\u6570\uff0c\u4f8b\u5982 {\"stream\": \"true\"}</li> <li>headers (dict[bytes, bytes]): \u8bf7\u6c42\u6807\u5934</li> <li>authorization (str | None): Authorization \u6807\u5934\u503c\uff08\u4f8b\u5982 \"Bearer \"\uff09 JavaScript <p><code>authenticate</code> \u5904\u7406\u5668\u53ef\u4ee5\u63a5\u53d7\u4ee5\u4e0b\u4efb\u4f55\u53c2\u6570\uff1a</p> <ul> <li>request (Request): \u539f\u59cb\u8bf7\u6c42\u5bf9\u8c61</li> <li>body (object): \u89e3\u6790\u540e\u7684\u8bf7\u6c42\u4f53</li> <li>path (string): \u8bf7\u6c42\u8def\u5f84\uff0c\u4f8b\u5982 \"/threads/abcd-1234-abcd-1234/runs/abcd-1234-abcd-1234/stream\"</li> <li>method (string): HTTP \u65b9\u6cd5\uff0c\u4f8b\u5982 \"GET\"</li> <li>pathParams (Record): URL \u8def\u5f84\u53c2\u6570\uff0c\u4f8b\u5982 {\"threadId\": \"abcd-1234-abcd-1234\", \"runId\": \"abcd-1234-abcd-1234\"} <li>queryParams (Record): URL \u67e5\u8be2\u53c2\u6570\uff0c\u4f8b\u5982 {\"stream\": \"true\"} <li>headers (Record): \u8bf7\u6c42\u6807\u5934 <li>authorization (string | null): Authorization \u6807\u5934\u503c\uff08\u4f8b\u5982 \"Bearer \"\uff09 <p>\u5728\u6211\u4eec\u7684\u8bb8\u591a\u6559\u7a0b\u4e2d\uff0c\u4e3a\u4e86\u7b80\u6d01\u8d77\u89c1\uff0c\u6211\u4eec\u53ea\u663e\u793a \"authorization\" \u53c2\u6570\uff0c\u4f46\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u9009\u62e9\u63a5\u53d7\u66f4\u591a\u4fe1\u606f\u4ee5\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6848\u3002</p>","boost":2},{"location":"concepts/auth/#_8","title":"\u667a\u80fd\u4ee3\u7406\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u5141\u8bb8\u59d4\u6258\u8bbf\u95ee\u3002\u4f60\u5728 <code>@auth.authenticate</code> \u4e2d\u8fd4\u56de\u7684\u503c\u4f1a\u6dfb\u52a0\u5230\u8fd0\u884c\u4e0a\u4e0b\u6587\u4e2d\uff0c\u4e3a\u667a\u80fd\u4ee3\u7406\u63d0\u4f9b\u7528\u6237\u8303\u56f4\u7684\u51ed\u636e\uff0c\u8ba9\u5b83\u4eec\u53ef\u4ee5\u4ee3\u8868\u7528\u6237\u8bbf\u95ee\u8d44\u6e90\u3002</p> <pre><code>sequenceDiagram\n  %% Actors\n  participant ClientApp as Client\n  participant AuthProv  as Auth Provider\n  participant LangGraph as LangGraph Backend\n  participant SecretStore as Secret Store\n  participant ExternalService as External Service\n\n  %% Platform login / AuthN\n  ClientApp  -&gt;&gt; AuthProv: 1. Login (username / password)\n  AuthProv   --&gt;&gt; ClientApp: 2. Return token\n  ClientApp  -&gt;&gt; LangGraph: 3. Request with token\n\n  Note over LangGraph: 4. Validate token (@auth.authenticate)\n  LangGraph  --&gt;&gt; AuthProv: 5. Fetch user info\n  AuthProv   --&gt;&gt; LangGraph: 6. Confirm validity\n\n  %% Fetch user tokens from secret store\n  LangGraph  -&gt;&gt; SecretStore: 6a. Fetch user tokens\n  SecretStore --&gt;&gt; LangGraph: 6b. Return tokens\n\n  Note over LangGraph: 7. Apply access control (@auth.on.*)\n\n  %% External Service round-trip\n  LangGraph  -&gt;&gt; ExternalService: 8. Call external service (with header)\n  Note over ExternalService: 9. External service validates header and executes action\n  ExternalService  --&gt;&gt; LangGraph: 10. Service response\n\n  %% Return to caller\n  LangGraph  --&gt;&gt; ClientApp: 11. Return resources</code></pre> <p>\u5728\u8eab\u4efd\u9a8c\u8bc1\u4e4b\u540e\uff0c\u5e73\u53f0\u4f1a\u521b\u5efa\u4e00\u4e2a\u7279\u6b8a\u7684\u914d\u7f6e\u5bf9\u8c61\uff0c\u8be5\u5bf9\u8c61\u901a\u8fc7\u53ef\u914d\u7f6e\u4e0a\u4e0b\u6587\u4f20\u9012\u7ed9\u4f60\u7684\u56fe\u548c\u6240\u6709\u8282\u70b9\u3002 \u6b64\u5bf9\u8c61\u5305\u542b\u6709\u5173\u5f53\u524d\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u4f60\u4ece <code>@auth.authenticate</code> \u5904\u7406\u5668\u8fd4\u56de\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u5b57\u6bb5\u3002</p> <p>\u8981\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u4ee3\u8868\u7528\u6237\u884c\u4e8b\uff0c\u8bf7\u4f7f\u7528\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u4e2d\u95f4\u4ef6\u3002\u8fd9\u5c06\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u4e0e\u5916\u90e8\u7cfb\u7edf\uff08\u5982 MCP \u670d\u52a1\u5668\u3001\u5916\u90e8\u6570\u636e\u5e93\uff0c\u751a\u81f3\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\uff09\u8fdb\u884c\u4ea4\u4e92\uff0c\u4ee3\u8868\u7528\u6237\u3002</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4f7f\u7528\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/auth/#mcp","title":"\u4f7f\u7528 MCP \u8fdb\u884c\u667a\u80fd\u4ee3\u7406\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u6709\u5173\u5982\u4f55\u5bf9 MCP \u670d\u52a1\u5668\u8fdb\u884c\u667a\u80fd\u4ee3\u7406\u8eab\u4efd\u9a8c\u8bc1\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 MCP \u6982\u5ff5\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/auth/#_9","title":"\u6388\u6743","text":"<p>\u5728\u8eab\u4efd\u9a8c\u8bc1\u4e4b\u540e\uff0cLangGraph \u8c03\u7528\u4f60\u7684\u6388\u6743\u5904\u7406\u5668\u6765\u63a7\u5236\u5bf9\u7279\u5b9a\u8d44\u6e90\uff08\u4f8b\u5982\u7ebf\u7a0b\u3001\u52a9\u624b\u3001\u5b9a\u65f6\u4efb\u52a1\uff09\u7684\u8bbf\u95ee\u3002\u8fd9\u4e9b\u5904\u7406\u5668\u53ef\u4ee5\uff1a</p> <ol> <li>\u901a\u8fc7\u4fee\u6539\u5143\u6570\u636e\u6765\u6dfb\u52a0\u5728\u8d44\u6e90\u521b\u5efa\u671f\u95f4\u4fdd\u5b58\u7684\u5143\u6570\u636e\u3002\u6709\u5173\u6bcf\u4e2a\u64cd\u4f5c\u7684\u503c\u53ef\u4ee5\u91c7\u7528\u7684\u7c7b\u578b\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u652f\u6301\u7684\u64cd\u4f5c\u8868\u3002</li> <li>\u5728\u641c\u7d22/\u5217\u8868\u6216\u8bfb\u53d6\u64cd\u4f5c\u671f\u95f4\u901a\u8fc7\u8fd4\u56de\u8fc7\u6ee4\u5668\u6765\u6309\u5143\u6570\u636e\u8fc7\u6ee4\u8d44\u6e90\u3002</li> <li>\u5982\u679c\u8bbf\u95ee\u88ab\u62d2\u7edd\uff0c\u5219\u5f15\u53d1 HTTP \u5f02\u5e38\u3002</li> </ol> <p>\u5982\u679c\u4f60\u53ea\u60f3\u5b9e\u73b0\u7b80\u5355\u7684\u7528\u6237\u8303\u56f4\u8bbf\u95ee\u63a7\u5236\uff0c\u53ef\u4ee5\u4e3a\u6240\u6709\u8d44\u6e90\u548c\u64cd\u4f5c\u4f7f\u7528\u5355\u4e2a\u6388\u6743\u5904\u7406\u5668\u3002\u5982\u679c\u4f60\u60f3\u6839\u636e\u8d44\u6e90\u548c\u64cd\u4f5c\u8fdb\u884c\u4e0d\u540c\u7684\u63a7\u5236\uff0c\u53ef\u4ee5\u4f7f\u7528\u8d44\u6e90\u7279\u5b9a\u5904\u7406\u5668\u3002\u6709\u5173\u652f\u6301\u8bbf\u95ee\u63a7\u5236\u7684\u8d44\u6e90\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u652f\u6301\u7684\u8d44\u6e90\u90e8\u5206\u3002</p> Python <p>\u4f60\u7684 <code>@auth.on</code> \u5904\u7406\u5668\u901a\u8fc7\u76f4\u63a5\u4fee\u6539 <code>value[\"metadata\"]</code> \u5b57\u5178\u5e76\u8fd4\u56de\u8fc7\u6ee4\u5668\u5b57\u5178\u6765\u63a7\u5236\u8bbf\u95ee\u3002</p> <pre><code>@auth.on\nasync def add_owner(\n    ctx: Auth.types.AuthContext,\n    value: dict  # The payload being sent to this access method\n) -&gt; dict:  # Returns a filter dict that restricts access to resources\n    \"\"\"Authorize all access to threads, runs, crons, and assistants.\n\n    This handler does two things:\n        - Adds a value to resource metadata (to persist with the resource so it can be filtered later)\n        - Returns a filter (to restrict access to existing resources)\n\n    Args:\n        ctx: Authentication context containing user info, permissions, the path, and\n        value: The request payload sent to the endpoint. For creation\n              operations, this contains the resource parameters. For read\n              operations, this contains the resource being accessed.\n\n    Returns:\n        A filter dictionary that LangGraph uses to restrict access to resources.\n        See [Filter Operations](#filter-operations) for supported operators.\n    \"\"\"\n    # Create filter to restrict access to just this user's resources\n    filters = {\"owner\": ctx.user.identity}\n\n    # Get or create the metadata dictionary in the payload\n    # This is where we store persistent info about the resource\n    metadata = value.setdefault(\"metadata\", {})\n\n    # Add owner to metadata - if this is a create or update operation,\n    # this information will be saved with the resource\n    # So we can filter by it later in read operations\n    metadata.update(filters)\n\n    # Return filters to restrict access\n    # These filters are applied to ALL operations (create, read, update, search, etc.)\n    # to ensure users can only access their own resources\n    return filters\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u76f4\u63a5\u4fee\u6539 <code>value.metadata</code> \u5bf9\u8c61\u5e76\u5728\u6ce8\u518c <code>on()</code> \u5904\u7406\u5668\u65f6\u8fd4\u56de\u8fc7\u6ee4\u5668\u5bf9\u8c61\u6765\u7cbe\u7ec6\u63a7\u5236\u8bbf\u95ee\u3002</p> <pre><code>import { Auth, HTTPException } from \"@langchain/langgraph-sdk/auth\";\n\nexport const auth = new Auth()\n  .authenticate(async (request: Request) =&gt; ({\n    identity: \"user-123\",\n    permissions: [],\n  }))\n  .on(\"*\", ({ value, user }) =&gt; {\n    // Create filter to restrict access to just this user's resources\n    const filters = { owner: user.identity };\n\n    // If the operation supports metadata, add the user identity\n    // as metadata to the resource.\n    if (\"metadata\" in value) {\n      value.metadata ??= {};\n      value.metadata.owner = user.identity;\n    }\n\n    // Return filters to restrict access\n    // These filters are applied to ALL operations (create, read, update, search, etc.)\n    // to ensure users can only access their own resources\n    return filters;\n  });\n</code></pre>","boost":2},{"location":"concepts/auth/#resource-specific-handlers","title":"\u8d44\u6e90\u7279\u5b9a\u5904\u7406\u5668","text":"<p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u8d44\u6e90\u548c\u64cd\u4f5c\u540d\u79f0\u4e0e\u6388\u6743\u88c5\u9970\u5668\u94fe\u63a5\u5728\u4e00\u8d77\u6765\u4e3a\u7279\u5b9a\u8d44\u6e90\u548c\u64cd\u4f5c\u6ce8\u518c\u5904\u7406\u5668\u3002 \u5f53\u53d1\u51fa\u8bf7\u6c42\u65f6\uff0c\u5c06\u8c03\u7528\u4e0e\u8be5\u8d44\u6e90\u548c\u64cd\u4f5c\u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u5904\u7406\u5668\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u4e3a\u7279\u5b9a\u8d44\u6e90\u548c\u64cd\u4f5c\u6ce8\u518c\u5904\u7406\u5668\u7684\u793a\u4f8b\u3002\u5bf9\u4e8e\u4ee5\u4e0b\u8bbe\u7f6e\uff1a</p> <ol> <li>\u7ecf\u8fc7\u8eab\u4efd\u9a8c\u8bc1\u7684\u7528\u6237\u80fd\u591f\u521b\u5efa\u7ebf\u7a0b\u3001\u8bfb\u53d6\u7ebf\u7a0b\u4ee5\u53ca\u5728\u7ebf\u7a0b\u4e0a\u521b\u5efa\u8fd0\u884c</li> <li>\u53ea\u6709\u5177\u6709 \"assistants:create\" \u6743\u9650\u7684\u7528\u6237\u624d\u80fd\u521b\u5efa\u65b0\u52a9\u624b</li> <li>\u6240\u6709\u5176\u4ed6\u7aef\u70b9\uff08\u4f8b\u5982\u5220\u9664\u52a9\u624b\u3001\u5b9a\u65f6\u4efb\u52a1\u3001\u5b58\u50a8\uff09\u5bf9\u6240\u6709\u7528\u6237\u7981\u7528\u3002</li> </ol> <p>\u652f\u6301\u7684\u5904\u7406\u5668</p> <p>\u6709\u5173\u652f\u6301\u7684\u8d44\u6e90\u548c\u64cd\u4f5c\u7684\u5b8c\u6574\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u652f\u6301\u7684\u8d44\u6e90\u90e8\u5206\u3002</p> Python <pre><code># Generic / global handler catches calls that aren't handled by more specific handlers\n@auth.on\nasync def reject_unhandled_requests(ctx: Auth.types.AuthContext, value: Any) -&gt; False:\n    print(f\"Request to {ctx.path} by {ctx.user.identity}\")\n    raise Auth.exceptions.HTTPException(\n        status_code=403,\n        detail=\"Forbidden\"\n    )\n\n# Matches the \"thread\" resource and all actions - create, read, update, delete, search\n# Since this is **more specific** than the generic @auth.on handler, it will take precedence\n# over the generic handler for all actions on the \"threads\" resource\n@auth.on.threads\nasync def on_thread_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.threads.create.value\n):\n    if \"write\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"User lacks the required permissions.\"\n        )\n    # Setting metadata on the thread being created\n    # will ensure that the resource contains an \"owner\" field\n    # Then any time a user tries to access this thread or runs within the thread,\n    # we can filter by owner\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    return {\"owner\": ctx.user.identity}\n\n# Thread creation. This will match only on thread create actions\n# Since this is **more specific** than both the generic @auth.on handler and the @auth.on.threads handler,\n# it will take precedence for any \"create\" actions on the \"threads\" resources\n@auth.on.threads.create\nasync def on_thread_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.threads.create.value\n):\n    # Setting metadata on the thread being created\n    # will ensure that the resource contains an \"owner\" field\n    # Then any time a user tries to access this thread or runs within the thread,\n    # we can filter by owner\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    return {\"owner\": ctx.user.identity}\n\n# Reading a thread. Since this is also more specific than the generic @auth.on handler, and the @auth.on.threads handler,\n# it will take precedence for any \"read\" actions on the \"threads\" resource\n@auth.on.threads.read\nasync def on_thread_read(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.threads.read.value\n):\n    # Since we are reading (and not creating) a thread,\n    # we don't need to set metadata. We just need to\n    # return a filter to ensure users can only see their own threads\n    return {\"owner\": ctx.user.identity}\n\n# Run creation, streaming, updates, etc.\n# This takes precedenceover the generic @auth.on handler and the @auth.on.threads handler\n@auth.on.threads.create_run\nasync def on_run_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.threads.create_run.value\n):\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    # Inherit thread's access control\n    return {\"owner\": ctx.user.identity}\n\n# Assistant creation\n@auth.on.assistants.create\nasync def on_assistant_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.assistants.create.value\n):\n    if \"assistants:create\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"User lacks the required permissions.\"\n        )\n</code></pre> JavaScript <pre><code>import { Auth, HTTPException } from \"@langchain/langgraph-sdk/auth\";\n\nexport const auth = new Auth()\n  .authenticate(async (request: Request) =&gt; ({\n    identity: \"user-123\",\n    permissions: [\"threads:write\", \"threads:read\"],\n  }))\n  .on(\"*\", ({ event, user }) =&gt; {\n    console.log(`Request for ${event} by ${user.identity}`);\n    throw new HTTPException(403, { message: \"Forbidden\" });\n  })\n\n  // Matches the \"threads\" resource and all actions - create, read, update, delete, search\n  // Since this is **more specific** than the generic `on(\"*\")` handler, it will take precedence over the generic handler for all actions on the \"threads\" resource\n  .on(\"threads\", ({ permissions, value, user }) =&gt; {\n    if (!permissions.includes(\"write\")) {\n      throw new HTTPException(403, {\n        message: \"User lacks the required permissions.\",\n      });\n    }\n\n    // Not all events do include `metadata` property in `value`.\n    // So we need to add this type guard.\n    if (\"metadata\" in value) {\n      value.metadata ??= {};\n      value.metadata.owner = user.identity;\n    }\n\n    return { owner: user.identity };\n  })\n\n  // Thread creation. This will match only on thread create actions.\n  // Since this is **more specific** than both the generic `on(\"*\")` handler and the `on(\"threads\")` handler, it will take precedence for any \"create\" actions on the \"threads\" resources\n  .on(\"threads:create\", ({ value, user, permissions }) =&gt; {\n    if (!permissions.includes(\"write\")) {\n      throw new HTTPException(403, {\n        message: \"User lacks the required permissions.\",\n      });\n    }\n\n    // Setting metadata on the thread being created will ensure that the resource contains an \"owner\" field\n    // Then any time a user tries to access this thread or runs within the thread,\n    // we can filter by owner\n    value.metadata ??= {};\n    value.metadata.owner = user.identity;\n\n    return { owner: user.identity };\n  })\n\n  // Reading a thread. Since this is also more specific than the generic `on(\"*\")` handler, and the `on(\"threads\")` handler,\n  .on(\"threads:read\", ({ user }) =&gt; {\n    // Since we are reading (and not creating) a thread,\n    // we don't need to set metadata. We just need to\n    // return a filter to ensure users can only see their own threads.\n    return { owner: user.identity };\n  })\n\n  // Run creation, streaming, updates, etc.\n  // This takes precedence over the generic `on(\"*\")` handler and the `on(\"threads\")` handler\n  .on(\"threads:create_run\", ({ value, user }) =&gt; {\n    value.metadata ??= {};\n    value.metadata.owner = user.identity;\n\n    return { owner: user.identity };\n  })\n\n  // Assistant creation. This will match only on assistant create actions.\n  // Since this is **more specific** than both the generic `on(\"*\")` handler and the `on(\"assistants\")` handler, it will take precedence for any \"create\" actions on the \"assistants\" resources\n  .on(\"assistants:create\", ({ value, user, permissions }) =&gt; {\n    if (!permissions.includes(\"assistants:create\")) {\n      throw new HTTPException(403, {\n        message: \"User lacks the required permissions.\",\n      });\n    }\n\n    // Setting metadata on the assistant being created will ensure that the resource contains an \"owner\" field.\n    // Then any time a user tries to access this assistant, we can filter by owner\n    value.metadata ??= {};\n    value.metadata.owner = user.identity;\n\n    return { owner: user.identity };\n  });\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u6df7\u5408\u4e86\u5168\u5c40\u548c\u8d44\u6e90\u7279\u5b9a\u7684\u5904\u7406\u5668\u3002\u7531\u4e8e\u6bcf\u4e2a\u8bf7\u6c42\u7531\u6700\u5177\u4f53\u7684\u5904\u7406\u5668\u5904\u7406\uff0c\u56e0\u6b64\u521b\u5efa <code>thread</code> \u7684\u8bf7\u6c42\u5c06\u5339\u914d <code>on_thread_create</code> \u5904\u7406\u5668\uff0c\u4f46\u4e0d\u4f1a\u5339\u914d <code>reject_unhandled_requests</code> \u5904\u7406\u5668\u3002\u4f46\u662f\uff0c<code>\u66f4\u65b0</code>\u7ebf\u7a0b\u7684\u8bf7\u6c42\u5c06\u7531\u5168\u5c40\u5904\u7406\u5668\u5904\u7406\uff0c\u56e0\u4e3a\u6211\u4eec\u6ca1\u6709\u7528\u4e8e\u8be5\u8d44\u6e90\u548c\u64cd\u4f5c\u7684\u66f4\u5177\u4f53\u7684\u5904\u7406\u5668\u3002</p>","boost":2},{"location":"concepts/auth/#filter-operations","title":"\u8fc7\u6ee4\u5668\u64cd\u4f5c","text":"Python <p>\u6388\u6743\u5904\u7406\u5668\u53ef\u4ee5\u8fd4\u56de\u4e0d\u540c\u7c7b\u578b\u7684\u503c\uff1a</p> <ul> <li><code>None</code> \u548c <code>True</code> \u8868\u793a\"\u6388\u6743\u8bbf\u95ee\u6240\u6709\u5e95\u5c42\u8d44\u6e90\"</li> <li><code>False</code> \u8868\u793a\"\u62d2\u7edd\u8bbf\u95ee\u6240\u6709\u5e95\u5c42\u8d44\u6e90\uff08\u5f15\u53d1 403 \u5f02\u5e38\uff09\"</li> <li>\u5143\u6570\u636e\u8fc7\u6ee4\u5668\u5b57\u5178\u5c06\u9650\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee</li> </ul> <p>\u8fc7\u6ee4\u5668\u5b57\u5178\u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5176\u952e\u4e0e\u8d44\u6e90\u5143\u6570\u636e\u5339\u914d\u3002\u5b83\u652f\u6301\u4e09\u4e2a\u8fd0\u7b97\u7b26\uff1a</p> <ul> <li>\u9ed8\u8ba4\u503c\u662f\u7cbe\u786e\u5339\u914d\u7684\u7b80\u5199\uff0c\u6216\u4e0b\u9762\u7684 \"$eq\"\u3002\u4f8b\u5982\uff0c<code>{\"owner\": user_id}</code> \u5c06\u4ec5\u5305\u62ec\u5305\u542b <code>{\"owner\": user_id}</code> \u7684\u5143\u6570\u636e\u7684\u8d44\u6e90</li> <li><code>$eq</code>\uff1a\u7cbe\u786e\u5339\u914d\uff08\u4f8b\u5982 <code>{\"owner\": {\"$eq\": user_id}}</code>\uff09- \u8fd9\u7b49\u6548\u4e8e\u4e0a\u9762\u7684\u7b80\u5199 <code>{\"owner\": user_id}</code></li> <li><code>$contains</code>\uff1a\u5217\u8868\u6210\u5458\u8d44\u683c\uff08\u4f8b\u5982 <code>{\"allowed_users\": {\"$contains\": user_id}}</code>\uff09\u6b64\u5904\u7684\u503c\u5fc5\u987b\u662f\u5217\u8868\u7684\u5143\u7d20\u3002\u5b58\u50a8\u8d44\u6e90\u4e2d\u7684\u5143\u6570\u636e\u5fc5\u987b\u662f\u5217\u8868/\u5bb9\u5668\u7c7b\u578b\u3002</li> </ul> <p>\u5177\u6709\u591a\u4e2a\u952e\u7684\u5b57\u5178\u4f7f\u7528\u903b\u8f91 <code>AND</code> \u8fc7\u6ee4\u5668\u5904\u7406\u3002\u4f8b\u5982\uff0c<code>{\"owner\": org_id, \"allowed_users\": {\"$contains\": user_id}}</code> \u5c06\u4ec5\u5339\u914d\u5176 \"owner\" \u4e3a <code>org_id</code> \u4e14\u5176 \"allowed_users\" \u5217\u8868\u5305\u542b <code>user_id</code> \u7684\u5143\u6570\u636e\u7684\u8d44\u6e90\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u5904\u7684\u53c2\u8003\u3002</p> JavaScript <p>\u6388\u6743\u5904\u7406\u5668\u53ef\u4ee5\u8fd4\u56de\u4e0d\u540c\u7c7b\u578b\u7684\u503c\uff1a</p> <ul> <li><code>null</code> \u548c <code>true</code> \u8868\u793a\"\u6388\u6743\u8bbf\u95ee\u6240\u6709\u5e95\u5c42\u8d44\u6e90\"</li> <li><code>false</code> \u8868\u793a\"\u62d2\u7edd\u8bbf\u95ee\u6240\u6709\u5e95\u5c42\u8d44\u6e90\uff08\u5f15\u53d1 403 \u5f02\u5e38\uff09\"</li> <li>\u5143\u6570\u636e\u8fc7\u6ee4\u5668\u5bf9\u8c61\u5c06\u9650\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee</li> </ul> <p>\u8fc7\u6ee4\u5668\u5bf9\u8c61\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5176\u952e\u4e0e\u8d44\u6e90\u5143\u6570\u636e\u5339\u914d\u3002\u5b83\u652f\u6301\u4e09\u4e2a\u8fd0\u7b97\u7b26\uff1a</p> <ul> <li>\u9ed8\u8ba4\u503c\u662f\u7cbe\u786e\u5339\u914d\u7684\u7b80\u5199\uff0c\u6216\u4e0b\u9762\u7684 \"$eq\"\u3002\u4f8b\u5982\uff0c<code>{ owner: userId}</code> \u5c06\u4ec5\u5305\u62ec\u5305\u542b <code>{ owner: userId }</code> \u7684\u5143\u6570\u636e\u7684\u8d44\u6e90</li> <li><code>$eq</code>\uff1a\u7cbe\u786e\u5339\u914d\uff08\u4f8b\u5982 <code>{ owner: { $eq: userId } }</code>\uff09- \u8fd9\u7b49\u6548\u4e8e\u4e0a\u9762\u7684\u7b80\u5199 <code>{ owner: userId }</code></li> <li><code>$contains</code>\uff1a\u5217\u8868\u6210\u5458\u8d44\u683c\uff08\u4f8b\u5982 <code>{ allowedUsers: { $contains: userId} }</code>\uff09\u6b64\u5904\u7684\u503c\u5fc5\u987b\u662f\u5217\u8868\u7684\u5143\u7d20\u3002\u5b58\u50a8\u8d44\u6e90\u4e2d\u7684\u5143\u6570\u636e\u5fc5\u987b\u662f\u5217\u8868/\u5bb9\u5668\u7c7b\u578b\u3002</li> </ul> <p>\u5177\u6709\u591a\u4e2a\u952e\u7684\u5bf9\u8c61\u4f7f\u7528\u903b\u8f91 <code>AND</code> \u8fc7\u6ee4\u5668\u5904\u7406\u3002\u4f8b\u5982\uff0c<code>{ owner: orgId, allowedUsers: { $contains: userId} }</code> \u5c06\u4ec5\u5339\u914d\u5176 \"owner\" \u4e3a <code>orgId</code> \u4e14\u5176 \"allowedUsers\" \u5217\u8868\u5305\u542b <code>userId</code> \u7684\u5143\u6570\u636e\u7684\u8d44\u6e90\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u5904\u7684\u53c2\u8003\u3002</p>","boost":2},{"location":"concepts/auth/#_10","title":"\u5e38\u89c1\u8bbf\u95ee\u6a21\u5f0f","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5178\u578b\u7684\u6388\u6743\u6a21\u5f0f\uff1a</p>","boost":2},{"location":"concepts/auth/#_11","title":"\u5355\u6240\u6709\u8005\u8d44\u6e90","text":"<p>\u8fd9\u79cd\u5e38\u89c1\u6a21\u5f0f\u8ba9\u4f60\u5c06\u6240\u6709\u7ebf\u7a0b\u3001\u52a9\u624b\u3001\u5b9a\u65f6\u4efb\u52a1\u548c\u8fd0\u884c\u8303\u56f4\u9650\u5b9a\u5230\u5355\u4e2a\u7528\u6237\u3002\u5b83\u5bf9\u4e8e\u5e38\u89c1\u7684\u5355\u7528\u6237\u7528\u4f8b\uff08\u5982\u5e38\u89c4\u804a\u5929\u673a\u5668\u4eba\u5f0f\u5e94\u7528\u7a0b\u5e8f\uff09\u5f88\u6709\u7528\u3002</p> Python <pre><code>@auth.on\nasync def owner_only(ctx: Auth.types.AuthContext, value: dict):\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    return {\"owner\": ctx.user.identity}\n</code></pre> JavaScript <pre><code>export const auth = new Auth()\n  .authenticate(async (request: Request) =&gt; ({\n    identity: \"user-123\",\n    permissions: [\"threads:write\", \"threads:read\"],\n  }))\n  .on(\"*\", ({ value, user }) =&gt; {\n    if (\"metadata\" in value) {\n      value.metadata ??= {};\n      value.metadata.owner = user.identity;\n    }\n    return { owner: user.identity };\n  });\n</code></pre>","boost":2},{"location":"concepts/auth/#_12","title":"\u57fa\u4e8e\u6743\u9650\u7684\u8bbf\u95ee","text":"<p>\u6b64\u6a21\u5f0f\u8ba9\u4f60\u6839\u636e**\u6743\u9650**\u63a7\u5236\u8bbf\u95ee\u3002\u5982\u679c\u4f60\u5e0c\u671b\u67d0\u4e9b\u89d2\u8272\u5bf9\u8d44\u6e90\u5177\u6709\u66f4\u5e7f\u6cdb\u6216\u66f4\u53d7\u9650\u5236\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u8fd9\u5f88\u6709\u7528\u3002</p> Python <pre><code># In your auth handler:\n@auth.authenticate\nasync def authenticate(headers: dict) -&gt; Auth.types.MinimalUserDict:\n    ...\n    return {\n        \"identity\": \"user-123\",\n        \"is_authenticated\": True,\n        \"permissions\": [\"threads:write\", \"threads:read\"]  # Define permissions in auth\n    }\n\ndef _default(ctx: Auth.types.AuthContext, value: dict):\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    return {\"owner\": ctx.user.identity}\n\n@auth.on.threads.create\nasync def create_thread(ctx: Auth.types.AuthContext, value: dict):\n    if \"threads:write\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"Unauthorized\"\n        )\n    return _default(ctx, value)\n\n\n@auth.on.threads.read\nasync def rbac_create(ctx: Auth.types.AuthContext, value: dict):\n    if \"threads:read\" not in ctx.permissions and \"threads:write\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"Unauthorized\"\n        )\n    return _default(ctx, value)\n</code></pre> JavaScript <pre><code>import { Auth, HTTPException } from \"@langchain/langgraph-sdk/auth\";\n\nexport const auth = new Auth()\n  .authenticate(async (request: Request) =&gt; ({\n    identity: \"user-123\",\n    // Define permissions in auth\n    permissions: [\"threads:write\", \"threads:read\"],\n  }))\n  .on(\"threads:create\", ({ value, user, permissions }) =&gt; {\n    if (!permissions.includes(\"threads:write\")) {\n      throw new HTTPException(403, { message: \"Unauthorized\" });\n    }\n\n    if (\"metadata\" in value) {\n      value.metadata ??= {};\n      value.metadata.owner = user.identity;\n    }\n    return { owner: user.identity };\n  })\n  .on(\"threads:read\", ({ user, permissions }) =&gt; {\n    if (\n      !permissions.includes(\"threads:read\") &amp;&amp;\n      !permissions.includes(\"threads:write\")\n    ) {\n      throw new HTTPException(403, { message: \"Unauthorized\" });\n    }\n\n    return { owner: user.identity };\n  });\n</code></pre>","boost":2},{"location":"concepts/auth/#_13","title":"\u652f\u6301\u7684\u8d44\u6e90","text":"<p>LangGraph \u63d0\u4f9b\u4e09\u4e2a\u7ea7\u522b\u7684\u6388\u6743\u5904\u7406\u5668\uff0c\u4ece\u6700\u901a\u7528\u5230\u6700\u5177\u4f53\uff1a</p> Python <ol> <li>\u5168\u5c40\u5904\u7406\u5668\uff08<code>@auth.on</code>\uff09\uff1a\u5339\u914d\u6240\u6709\u8d44\u6e90\u548c\u64cd\u4f5c</li> <li>\u8d44\u6e90\u5904\u7406\u5668\uff08\u4f8b\u5982 <code>@auth.on.threads</code>\u3001<code>@auth.on.assistants</code>\u3001<code>@auth.on.crons</code>\uff09\uff1a\u5339\u914d\u7279\u5b9a\u8d44\u6e90\u7684\u6240\u6709\u64cd\u4f5c</li> <li>\u64cd\u4f5c\u5904\u7406\u5668\uff08\u4f8b\u5982 <code>@auth.on.threads.create</code>\u3001<code>@auth.on.threads.read</code>\uff09\uff1a\u5339\u914d\u7279\u5b9a\u8d44\u6e90\u4e0a\u7684\u7279\u5b9a\u64cd\u4f5c</li> </ol> <p>\u5c06\u4f7f\u7528\u6700\u5177\u4f53\u7684\u5339\u914d\u5904\u7406\u5668\u3002\u4f8b\u5982\uff0c<code>@auth.on.threads.create</code> \u5728\u7ebf\u7a0b\u521b\u5efa\u65f6\u4f18\u5148\u4e8e <code>@auth.on.threads</code>\u3002 \u5982\u679c\u6ce8\u518c\u4e86\u66f4\u5177\u4f53\u7684\u5904\u7406\u5668\uff0c\u5219\u4e0d\u4f1a\u4e3a\u8be5\u8d44\u6e90\u548c\u64cd\u4f5c\u8c03\u7528\u66f4\u901a\u7528\u7684\u5904\u7406\u5668\u3002</p> JavaScript <ol> <li>\u5168\u5c40\u5904\u7406\u5668\uff08<code>on(\"*\")</code>\uff09\uff1a\u5339\u914d\u6240\u6709\u8d44\u6e90\u548c\u64cd\u4f5c</li> <li>\u8d44\u6e90\u5904\u7406\u5668\uff08\u4f8b\u5982 <code>on(\"threads\")</code>\u3001<code>on(\"assistants\")</code>\u3001<code>on(\"crons\")</code>\uff09\uff1a\u5339\u914d\u7279\u5b9a\u8d44\u6e90\u7684\u6240\u6709\u64cd\u4f5c</li> <li>\u64cd\u4f5c\u5904\u7406\u5668\uff08\u4f8b\u5982 <code>on(\"threads:create\")</code>\u3001<code>on(\"threads:read\")</code>\uff09\uff1a\u5339\u914d\u7279\u5b9a\u8d44\u6e90\u4e0a\u7684\u7279\u5b9a\u64cd\u4f5c</li> </ol> <p>\u5c06\u4f7f\u7528\u6700\u5177\u4f53\u7684\u5339\u914d\u5904\u7406\u5668\u3002\u4f8b\u5982\uff0c<code>on(\"threads:create\")</code> \u5728\u7ebf\u7a0b\u521b\u5efa\u65f6\u4f18\u5148\u4e8e <code>on(\"threads\")</code>\u3002 \u5982\u679c\u6ce8\u518c\u4e86\u66f4\u5177\u4f53\u7684\u5904\u7406\u5668\uff0c\u5219\u4e0d\u4f1a\u4e3a\u8be5\u8d44\u6e90\u548c\u64cd\u4f5c\u8c03\u7528\u66f4\u901a\u7528\u7684\u5904\u7406\u5668\u3002</p> Python \u7c7b\u578b\u5b89\u5168 <p>\u6bcf\u4e2a\u5904\u7406\u5668\u90fd\u6709\u53ef\u7528\u4e8e\u5176 <code>value</code> \u53c2\u6570\u7684\u7c7b\u578b\u63d0\u793a\u3002\u4f8b\u5982\uff1a</p> <pre><code>```python\n@auth.on.threads.create\nasync def on_thread_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.on.threads.create.value  # Specific type for thread creation\n):\n    ...\n\n@auth.on.threads\nasync def on_threads(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.on.threads.value  # Union type of all thread actions\n):\n    ...\n\n@auth.on\nasync def on_all(\n    ctx: Auth.types.AuthContext,\n    value: dict  # Union type of all possible actions\n):\n    ...\n```\n\n\u66f4\u5177\u4f53\u7684\u5904\u7406\u5668\u63d0\u4f9b\u66f4\u597d\u7684\u7c7b\u578b\u63d0\u793a\uff0c\u56e0\u4e3a\u5b83\u4eec\u5904\u7406\u66f4\u5c11\u7684\u64cd\u4f5c\u7c7b\u578b\u3002\n</code></pre>","boost":2},{"location":"concepts/auth/#supported-actions","title":"\u652f\u6301\u7684\u64cd\u4f5c\u548c\u7c7b\u578b","text":"<p>\u4ee5\u4e0b\u662f\u6240\u6709\u652f\u6301\u7684\u64cd\u4f5c\u5904\u7406\u5668\uff1a</p> Python \u8d44\u6e90 \u5904\u7406\u5668 \u63cf\u8ff0 \u503c\u7c7b\u578b Threads <code>@auth.on.threads.create</code> \u7ebf\u7a0b\u521b\u5efa <code>ThreadsCreate</code> <code>@auth.on.threads.read</code> \u7ebf\u7a0b\u68c0\u7d22 <code>ThreadsRead</code> <code>@auth.on.threads.update</code> \u7ebf\u7a0b\u66f4\u65b0 <code>ThreadsUpdate</code> <code>@auth.on.threads.delete</code> \u7ebf\u7a0b\u5220\u9664 <code>ThreadsDelete</code> <code>@auth.on.threads.search</code> \u5217\u51fa\u7ebf\u7a0b <code>ThreadsSearch</code> <code>@auth.on.threads.create_run</code> \u521b\u5efa\u6216\u66f4\u65b0\u8fd0\u884c <code>RunsCreate</code> Assistants <code>@auth.on.assistants.create</code> \u52a9\u624b\u521b\u5efa <code>AssistantsCreate</code> <code>@auth.on.assistants.read</code> \u52a9\u624b\u68c0\u7d22 <code>AssistantsRead</code> <code>@auth.on.assistants.update</code> \u52a9\u624b\u66f4\u65b0 <code>AssistantsUpdate</code> <code>@auth.on.assistants.delete</code> \u52a9\u624b\u5220\u9664 <code>AssistantsDelete</code> <code>@auth.on.assistants.search</code> \u5217\u51fa\u52a9\u624b <code>AssistantsSearch</code> Crons <code>@auth.on.crons.create</code> \u5b9a\u65f6\u4efb\u52a1\u521b\u5efa <code>CronsCreate</code> <code>@auth.on.crons.read</code> \u5b9a\u65f6\u4efb\u52a1\u68c0\u7d22 <code>CronsRead</code> <code>@auth.on.crons.update</code> \u5b9a\u65f6\u4efb\u52a1\u66f4\u65b0 <code>CronsUpdate</code> <code>@auth.on.crons.delete</code> \u5b9a\u65f6\u4efb\u52a1\u5220\u9664 <code>CronsDelete</code> <code>@auth.on.crons.search</code> \u5217\u51fa\u5b9a\u65f6\u4efb\u52a1 <code>CronsSearch</code> JavaScript \u8d44\u6e90 \u4e8b\u4ef6 \u63cf\u8ff0 \u503c\u7c7b\u578b Threads <code>threads:create</code> \u7ebf\u7a0b\u521b\u5efa <code>ThreadsCreate</code> <code>threads:read</code> \u7ebf\u7a0b\u68c0\u7d22 <code>ThreadsRead</code> <code>threads:update</code> \u7ebf\u7a0b\u66f4\u65b0 <code>ThreadsUpdate</code> <code>threads:delete</code> \u7ebf\u7a0b\u5220\u9664 <code>ThreadsDelete</code> <code>threads:search</code> \u5217\u51fa\u7ebf\u7a0b <code>ThreadsSearch</code> <code>threads:create_run</code> \u521b\u5efa\u6216\u66f4\u65b0\u8fd0\u884c <code>RunsCreate</code> Assistants <code>assistants:create</code> \u52a9\u624b\u521b\u5efa <code>AssistantsCreate</code> <code>assistants:read</code> \u52a9\u624b\u68c0\u7d22 <code>AssistantsRead</code> <code>assistants:update</code> \u52a9\u624b\u66f4\u65b0 <code>AssistantsUpdate</code> <code>assistants:delete</code> \u52a9\u624b\u5220\u9664 <code>AssistantsDelete</code> <code>assistants:search</code> \u5217\u51fa\u52a9\u624b <code>AssistantsSearch</code> Crons <code>crons:create</code> \u5b9a\u65f6\u4efb\u52a1\u521b\u5efa <code>CronsCreate</code> <code>crons:read</code> \u5b9a\u65f6\u4efb\u52a1\u68c0\u7d22 <code>CronsRead</code> <code>crons:update</code> \u5b9a\u65f6\u4efb\u52a1\u66f4\u65b0 <code>CronsUpdate</code> <code>crons:delete</code> \u5b9a\u65f6\u4efb\u52a1\u5220\u9664 <code>CronsDelete</code> <code>crons:search</code> \u5217\u51fa\u5b9a\u65f6\u4efb\u52a1 <code>CronsSearch</code> \u5173\u4e8e\u8fd0\u884c <p>\u8fd0\u884c\u7684\u8bbf\u95ee\u63a7\u5236\u8303\u56f4\u9650\u5b9a\u4e3a\u5176\u7236\u7ebf\u7a0b\u3002\u8fd9\u610f\u5473\u7740\u6743\u9650\u901a\u5e38\u4ece\u7ebf\u7a0b\u7ee7\u627f\uff0c\u53cd\u6620\u4e86\u6570\u636e\u6a21\u578b\u7684\u5bf9\u8bdd\u6027\u8d28\u3002\u9664\u521b\u5efa\u5916\u7684\u6240\u6709\u8fd0\u884c\u64cd\u4f5c\uff08\u8bfb\u53d6\u3001\u5217\u51fa\uff09\u90fd\u7531\u7ebf\u7a0b\u7684\u5904\u7406\u5668\u63a7\u5236\u3002</p> Python <p>\u6709\u4e00\u4e2a\u7279\u5b9a\u7684 <code>create_run</code> \u5904\u7406\u5668\u7528\u4e8e\u521b\u5efa\u65b0\u8fd0\u884c\uff0c\u56e0\u4e3a\u5b83\u6709\u66f4\u591a\u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u5728\u5904\u7406\u5668\u4e2d\u67e5\u770b\u3002</p> JavaScript <p>\u6709\u4e00\u4e2a\u7279\u5b9a\u7684 <code>threads:create_run</code> \u5904\u7406\u5668\u7528\u4e8e\u521b\u5efa\u65b0\u8fd0\u884c\uff0c\u56e0\u4e3a\u5b83\u6709\u66f4\u591a\u53c2\u6570\uff0c\u4f60\u53ef\u4ee5\u5728\u5904\u7406\u5668\u4e2d\u67e5\u770b\u3002</p>","boost":2},{"location":"concepts/auth/#_14","title":"\u4e0b\u4e00\u6b65","text":"<p>\u6709\u5173\u5b9e\u73b0\u8be6\u7ec6\u4fe1\u606f\uff1a</p> <ul> <li>\u67e5\u770b\u6709\u5173\u8bbe\u7f6e\u8eab\u4efd\u9a8c\u8bc1\u7684\u5165\u95e8\u6559\u7a0b</li> <li>\u67e5\u770b\u6709\u5173\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u5668\u7684\u64cd\u4f5c\u6307\u5357</li> </ul>","boost":2},{"location":"concepts/deployment_options/","title":"\u90e8\u7f72\u9009\u9879","text":"","boost":2},{"location":"concepts/deployment_options/#_2","title":"\u514d\u8d39\u90e8\u7f72","text":"<p>\u672c\u5730\uff1a\u7528\u4e8e\u672c\u5730\u6d4b\u8bd5\u548c\u5f00\u53d1\u7684\u90e8\u7f72\u3002</p>","boost":2},{"location":"concepts/deployment_options/#_3","title":"\u751f\u4ea7\u90e8\u7f72","text":"<p>\u4f7f\u7528 LangGraph Platform \u8fdb\u884c\u90e8\u7f72\u6709 4 \u4e2a\u4e3b\u8981\u9009\u9879\uff1a</p> <ol> <li> <p>Cloud SaaS</p> </li> <li> <p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762</p> </li> <li> <p>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762</p> </li> <li> <p>\u72ec\u7acb\u5bb9\u5668</p> </li> </ol> <p>\u5feb\u901f\u6bd4\u8f83\uff1a</p> Cloud SaaS \u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762 \u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762 \u72ec\u7acb\u5bb9\u5668 \u63a7\u5236\u5e73\u9762 UI/API \u662f \u662f \u662f \u5426 CI/CD \u7531\u5e73\u53f0\u5185\u90e8\u7ba1\u7406 \u7531\u4f60\u5916\u90e8\u7ba1\u7406 \u7531\u4f60\u5916\u90e8\u7ba1\u7406 \u7531\u4f60\u5916\u90e8\u7ba1\u7406 \u6570\u636e/\u8ba1\u7b97\u9a7b\u7559 LangChain \u7684\u4e91 \u4f60\u7684\u4e91 \u4f60\u7684\u4e91 \u4f60\u7684\u4e91 LangSmith \u517c\u5bb9\u6027 \u8ddf\u8e2a\u5230 LangSmith SaaS \u8ddf\u8e2a\u5230 LangSmith SaaS \u8ddf\u8e2a\u5230\u81ea\u6258\u7ba1 LangSmith \u53ef\u9009\u8ddf\u8e2a \u5b9a\u4ef7 Plus \u4f01\u4e1a\u7248 \u4f01\u4e1a\u7248 \u4f01\u4e1a\u7248","boost":2},{"location":"concepts/deployment_options/#cloud-saas","title":"Cloud SaaS","text":"<p>Cloud SaaS \u90e8\u7f72\u9009\u9879\u662f\u4e00\u79cd\u5b8c\u5168\u6258\u7ba1\u7684\u90e8\u7f72\u6a21\u578b\uff0c\u6211\u4eec\u5728\u4e91\u4e2d\u7ba1\u7406\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u3002\u6b64\u9009\u9879\u63d0\u4f9b\u4e86\u4e00\u79cd\u7b80\u5355\u7684\u65b9\u5f0f\u6765\u90e8\u7f72\u548c\u7ba1\u7406\u4f60\u7684 LangGraph Server\u3002</p> <p>\u5c06\u4f60\u7684 GitHub \u4ed3\u5e93\u8fde\u63a5\u5230\u5e73\u53f0\uff0c\u5e76\u4ece\u63a7\u5236\u5e73\u9762 UI \u90e8\u7f72\u4f60\u7684 LangGraph Server\u3002\u6784\u5efa\u8fc7\u7a0b\uff08\u5373 CI/CD\uff09\u7531\u5e73\u53f0\u5185\u90e8\u7ba1\u7406\u3002</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a</p> <ul> <li>Cloud SaaS \u6982\u5ff5\u6307\u5357</li> <li>\u5982\u4f55\u90e8\u7f72\u5230 Cloud SaaS</li> </ul>","boost":2},{"location":"concepts/deployment_options/#_4","title":"\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762","text":"<p>\u91cd\u8981\u63d0\u793a</p> <p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u9700\u8981\u4f01\u4e1a\u7248\u8ba1\u5212\u3002</p> <p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u662f\u4e00\u79cd\"\u6df7\u5408\"\u90e8\u7f72\u6a21\u578b\uff0c\u6211\u4eec\u5728\u4e91\u4e2d\u7ba1\u7406\u63a7\u5236\u5e73\u9762\uff0c\u4f60\u5728\u4e91\u4e2d\u7ba1\u7406\u6570\u636e\u5e73\u9762\u3002\u6b64\u9009\u9879\u63d0\u4f9b\u4e86\u4e00\u79cd\u5b89\u5168\u7ba1\u7406\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u7684\u65b9\u6cd5\uff0c\u540c\u65f6\u5c06\u63a7\u5236\u5e73\u9762\u7ba1\u7406\u5378\u8f7d\u7ed9\u6211\u4eec\u3002</p> <p>\u4f7f\u7528 LangGraph CLI \u6784\u5efa Docker \u955c\u50cf\uff0c\u5e76\u4ece\u63a7\u5236\u5e73\u9762 UI \u90e8\u7f72\u4f60\u7684 LangGraph Server\u3002</p> <p>\u652f\u6301\u7684\u8ba1\u7b97\u5e73\u53f0\uff1aKubernetes\u3001Amazon ECS\uff08\u5373\u5c06\u63a8\u51fa\uff01\uff09</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a</p> <ul> <li>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u6982\u5ff5\u6307\u5357</li> <li>\u5982\u4f55\u90e8\u7f72\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762</li> </ul>","boost":2},{"location":"concepts/deployment_options/#_5","title":"\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762","text":"<p>\u91cd\u8981\u63d0\u793a</p> <p>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u9700\u8981\u4f01\u4e1a\u7248\u8ba1\u5212\u3002</p> <p>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u662f\u4e00\u79cd\u5b8c\u5168\u81ea\u6258\u7ba1\u7684\u90e8\u7f72\u6a21\u578b\uff0c\u4f60\u5728\u4e91\u4e2d\u7ba1\u7406\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u3002\u6b64\u9009\u9879\u4e3a\u4f60\u63d0\u4f9b\u4e86\u5bf9\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u7684\u5b8c\u5168\u63a7\u5236\u548c\u8d23\u4efb\u3002</p> <p>\u4f7f\u7528 LangGraph CLI \u6784\u5efa Docker \u955c\u50cf\uff0c\u5e76\u4ece\u63a7\u5236\u5e73\u9762 UI \u90e8\u7f72\u4f60\u7684 LangGraph Server\u3002</p> <p>\u652f\u6301\u7684\u8ba1\u7b97\u5e73\u53f0\uff1aKubernetes</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a</p> <ul> <li>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u6982\u5ff5\u6307\u5357</li> <li>\u5982\u4f55\u90e8\u7f72\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762</li> </ul>","boost":2},{"location":"concepts/deployment_options/#_6","title":"\u72ec\u7acb\u5bb9\u5668","text":"<p>\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u9009\u9879\u662f\u6700\u4e0d\u53d7\u9650\u5236\u7684\u90e8\u7f72\u6a21\u578b\u3002\u5728\u4f60\u7684\u4e91\u4e2d\u90e8\u7f72 LangGraph Server \u7684\u72ec\u7acb\u5b9e\u4f8b\uff0c\u4f7f\u7528\u4efb\u4f55\u53ef\u7528\u7684\u8bb8\u53ef\u8bc1\u9009\u9879\u3002</p> <p>\u4f7f\u7528 LangGraph CLI \u6784\u5efa Docker \u955c\u50cf\uff0c\u5e76\u4f7f\u7528\u4f60\u9009\u62e9\u7684\u5bb9\u5668\u90e8\u7f72\u5de5\u5177\u90e8\u7f72\u4f60\u7684 LangGraph Server\u3002\u955c\u50cf\u53ef\u4ee5\u90e8\u7f72\u5230\u4efb\u4f55\u8ba1\u7b97\u5e73\u53f0\u3002</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a</p> <ul> <li>\u72ec\u7acb\u5bb9\u5668\u6982\u5ff5\u6307\u5357</li> <li>\u5982\u4f55\u90e8\u7f72\u72ec\u7acb\u5bb9\u5668</li> </ul>","boost":2},{"location":"concepts/deployment_options/#_7","title":"\u76f8\u5173","text":"<p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\uff1a</p> <ul> <li>LangGraph Platform \u8ba1\u5212</li> <li>LangGraph Platform \u5b9a\u4ef7</li> </ul>","boost":2},{"location":"concepts/double_texting/","title":"\u53cc\u91cd\u8f93\u5165","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>LangGraph Server</li> </ul> <p>\u7528\u6237\u53ef\u80fd\u4f1a\u4ee5\u975e\u9884\u671f\u7684\u65b9\u5f0f\u4e0e\u4f60\u7684\u56fe\u4ea4\u4e92\u3002 \u4f8b\u5982,\u7528\u6237\u53ef\u80fd\u53d1\u9001\u4e00\u6761\u6d88\u606f,\u7136\u540e\u5728\u56fe\u5b8c\u6210\u8fd0\u884c\u4e4b\u524d\u53d1\u9001\u7b2c\u4e8c\u6761\u6d88\u606f\u3002 \u66f4\u4e00\u822c\u5730\u8bf4,\u7528\u6237\u53ef\u80fd\u5728\u7b2c\u4e00\u6b21\u8fd0\u884c\u5b8c\u6210\u4e4b\u524d\u7b2c\u4e8c\u6b21\u8c03\u7528\u56fe\u3002 \u6211\u4eec\u79f0\u8fd9\u79cd\u60c5\u51b5\u4e3a\"\u53cc\u91cd\u8f93\u5165\"\u3002</p> <p>\u76ee\u524d,LangGraph \u4ec5\u4f5c\u4e3a LangGraph Platform \u7684\u4e00\u90e8\u5206\u5904\u7406\u6b64\u95ee\u9898,\u800c\u4e0d\u662f\u5728\u5f00\u6e90\u7248\u672c\u4e2d\u3002 \u539f\u56e0\u662f\u4e3a\u4e86\u5904\u7406\u8fd9\u4e2a\u95ee\u9898,\u6211\u4eec\u9700\u8981\u77e5\u9053\u56fe\u662f\u5982\u4f55\u90e8\u7f72\u7684,\u7531\u4e8e LangGraph Platform \u5904\u7406\u90e8\u7f72,\u56e0\u6b64\u903b\u8f91\u9700\u8981\u5b58\u5728\u4e8e\u90a3\u91cc\u3002 \u5982\u679c\u4f60\u4e0d\u60f3\u4f7f\u7528 LangGraph Platform,\u6211\u4eec\u5728\u4e0b\u9762\u8be6\u7ec6\u63cf\u8ff0\u4e86\u6211\u4eec\u5b9e\u65bd\u7684\u9009\u9879\u3002</p> <p></p>","boost":2},{"location":"concepts/double_texting/#reject","title":"\u62d2\u7edd(Reject)","text":"<p>\u8fd9\u662f\u6700\u7b80\u5355\u7684\u9009\u9879,\u5b83\u53ea\u662f\u62d2\u7edd\u4efb\u4f55\u540e\u7eed\u8fd0\u884c\u5e76\u4e0d\u5141\u8bb8\u53cc\u91cd\u8f93\u5165\u3002 \u6709\u5173\u914d\u7f6e\u62d2\u7edd\u53cc\u91cd\u8f93\u5165\u9009\u9879\u7684\u4fe1\u606f,\u8bf7\u53c2\u9605\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/double_texting/#enqueue","title":"\u6392\u961f(Enqueue)","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u76f8\u5bf9\u7b80\u5355\u7684\u9009\u9879,\u5b83\u7ee7\u7eed\u7b2c\u4e00\u6b21\u8fd0\u884c\u76f4\u5230\u5b8c\u6210\u6574\u4e2a\u8fd0\u884c,\u7136\u540e\u5c06\u65b0\u8f93\u5165\u4f5c\u4e3a\u5355\u72ec\u7684\u8fd0\u884c\u53d1\u9001\u3002 \u6709\u5173\u914d\u7f6e\u6392\u961f\u53cc\u91cd\u8f93\u5165\u9009\u9879\u7684\u4fe1\u606f,\u8bf7\u53c2\u9605\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/double_texting/#interrupt","title":"\u4e2d\u65ad(Interrupt)","text":"<p>\u6b64\u9009\u9879\u4e2d\u65ad\u5f53\u524d\u6267\u884c,\u4f46\u4fdd\u5b58\u5230\u8be5\u70b9\u4e3a\u6b62\u5b8c\u6210\u7684\u6240\u6709\u5de5\u4f5c\u3002 \u7136\u540e\u5b83\u63d2\u5165\u7528\u6237\u8f93\u5165\u5e76\u4ece\u90a3\u91cc\u7ee7\u7eed\u3002</p> <p>\u5982\u679c\u4f60\u542f\u7528\u6b64\u9009\u9879,\u4f60\u7684\u56fe\u5e94\u8be5\u80fd\u591f\u5904\u7406\u53ef\u80fd\u51fa\u73b0\u7684\u5947\u602a\u8fb9\u7f18\u60c5\u51b5\u3002 \u4f8b\u5982,\u4f60\u53ef\u80fd\u5df2\u7ecf\u8c03\u7528\u4e86\u4e00\u4e2a\u5de5\u5177,\u4f46\u5c1a\u672a\u4ece\u8fd0\u884c\u8be5\u5de5\u5177\u4e2d\u83b7\u5f97\u7ed3\u679c\u3002 \u4f60\u53ef\u80fd\u9700\u8981\u5220\u9664\u8be5\u5de5\u5177\u8c03\u7528,\u4ee5\u514d\u51fa\u73b0\u60ac\u7a7a\u7684\u5de5\u5177\u8c03\u7528\u3002</p> <p>\u6709\u5173\u914d\u7f6e\u4e2d\u65ad\u53cc\u91cd\u8f93\u5165\u9009\u9879\u7684\u4fe1\u606f,\u8bf7\u53c2\u9605\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/double_texting/#rollback","title":"\u56de\u6eda(Rollback)","text":"<p>\u6b64\u9009\u9879\u4e2d\u65ad\u5f53\u524d\u6267\u884c\u5e76\u56de\u6eda\u5230\u8be5\u70b9\u4e3a\u6b62\u5b8c\u6210\u7684\u6240\u6709\u5de5\u4f5c,\u5305\u62ec\u539f\u59cb\u8fd0\u884c\u8f93\u5165\u3002\u7136\u540e\u5b83\u53d1\u9001\u65b0\u7684\u7528\u6237\u8f93\u5165,\u57fa\u672c\u4e0a\u5c31\u50cf\u5b83\u662f\u539f\u59cb\u8f93\u5165\u4e00\u6837\u3002</p> <p>\u6709\u5173\u914d\u7f6e\u56de\u6eda\u53cc\u91cd\u8f93\u5165\u9009\u9879\u7684\u4fe1\u606f,\u8bf7\u53c2\u9605\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/durable_execution/","title":"\u6301\u4e45\u5316\u6267\u884c","text":"<p>**\u6301\u4e45\u5316\u6267\u884c**\u662f\u4e00\u79cd\u6280\u672f\uff0c\u5176\u4e2d\u8fdb\u7a0b\u6216\u5de5\u4f5c\u6d41\u5728\u5173\u952e\u70b9\u4fdd\u5b58\u5176\u8fdb\u5ea6\uff0c\u5141\u8bb8\u5b83\u6682\u505c\u5e76\u7a0d\u540e\u4ece\u505c\u6b62\u7684\u5730\u65b9\u6062\u590d\u3002\u8fd9\u5728\u9700\u8981\u4eba\u673a\u534f\u540c\u7684\u573a\u666f\u4e2d\u7279\u522b\u6709\u7528\uff0c\u7528\u6237\u53ef\u4ee5\u5728\u7ee7\u7eed\u4e4b\u524d\u68c0\u67e5\u3001\u9a8c\u8bc1\u6216\u4fee\u6539\u8fdb\u7a0b\uff0c\u4ee5\u53ca\u5728\u53ef\u80fd\u9047\u5230\u4e2d\u65ad\u6216\u9519\u8bef\u7684\u957f\u65f6\u95f4\u8fd0\u884c\u4efb\u52a1\u4e2d\uff08\u4f8b\u5982\uff0c\u5bf9 LLM \u7684\u8c03\u7528\u8d85\u65f6\uff09\u3002\u901a\u8fc7\u4fdd\u7559\u5df2\u5b8c\u6210\u7684\u5de5\u4f5c\uff0c\u6301\u4e45\u5316\u6267\u884c\u4f7f\u8fdb\u7a0b\u80fd\u591f\u6062\u590d\u800c\u65e0\u9700\u91cd\u65b0\u5904\u7406\u5148\u524d\u7684\u6b65\u9aa4\u2014\u2014\u5373\u4f7f\u5728\u5f88\u957f\u7684\u5ef6\u8fdf\uff08\u4f8b\u5982\u4e00\u5468\u540e\uff09\u4e4b\u540e\u3002</p> <p>LangGraph \u5185\u7f6e\u7684\u6301\u4e45\u5316\u5c42\u4e3a\u5de5\u4f5c\u6d41\u63d0\u4f9b\u6301\u4e45\u5316\u6267\u884c\uff0c\u786e\u4fdd\u6bcf\u4e2a\u6267\u884c\u6b65\u9aa4\u7684\u72b6\u6001\u90fd\u4fdd\u5b58\u5230\u6301\u4e45\u5316\u5b58\u50a8\u4e2d\u3002\u6b64\u529f\u80fd\u53ef\u786e\u4fdd\u5982\u679c\u5de5\u4f5c\u6d41\u88ab\u4e2d\u65ad\u2014\u2014\u65e0\u8bba\u662f\u7531\u4e8e\u7cfb\u7edf\u6545\u969c\u8fd8\u662f\u4eba\u673a\u534f\u540c\u4ea4\u4e92\u2014\u2014\u5b83\u90fd\u53ef\u4ee5\u4ece\u6700\u540e\u8bb0\u5f55\u7684\u72b6\u6001\u6062\u590d\u3002</p> <p>Tip</p> <p>\u5982\u679c\u4f60\u4f7f\u7528 LangGraph \u4e0e\u68c0\u67e5\u70b9\u5668\uff0c\u4f60\u5df2\u7ecf\u542f\u7528\u4e86\u6301\u4e45\u5316\u6267\u884c\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u70b9\u6682\u505c\u548c\u6062\u590d\u5de5\u4f5c\u6d41\uff0c\u5373\u4f7f\u5728\u4e2d\u65ad\u6216\u5931\u8d25\u4e4b\u540e\u3002 \u8981\u5145\u5206\u5229\u7528\u6301\u4e45\u5316\u6267\u884c\uff0c\u8bf7\u786e\u4fdd\u4f60\u7684\u5de5\u4f5c\u6d41\u88ab\u8bbe\u8ba1\u4e3a\u786e\u5b9a\u6027\u548c\u5e42\u7b49\uff0c\u5e76\u5c06\u4efb\u4f55\u526f\u4f5c\u7528\u6216\u975e\u786e\u5b9a\u6027\u64cd\u4f5c\u5305\u88c5\u5728\u4efb\u52a1\u5185\u3002\u4f60\u53ef\u4ee5\u4eceStateGraph\uff08\u56fe API\uff09\u548c\u51fd\u6570\u5f0f API\u4e2d\u4f7f\u7528\u4efb\u52a1\u3002</p>","boost":2},{"location":"concepts/durable_execution/#_2","title":"\u8981\u6c42","text":"<p>\u8981\u5728 LangGraph \u4e2d\u5229\u7528\u6301\u4e45\u5316\u6267\u884c\uff0c\u4f60\u9700\u8981\uff1a</p> <ol> <li>\u901a\u8fc7\u6307\u5b9a\u5c06\u4fdd\u5b58\u5de5\u4f5c\u6d41\u8fdb\u5ea6\u7684\u68c0\u67e5\u70b9\u5668\u5728\u5de5\u4f5c\u6d41\u4e2d\u542f\u7528\u6301\u4e45\u5316\u3002</li> <li>\u5728\u6267\u884c\u5de5\u4f5c\u6d41\u65f6\u6307\u5b9a\u7ebf\u7a0b\u6807\u8bc6\u7b26\u3002\u8fd9\u5c06\u8ddf\u8e2a\u5de5\u4f5c\u6d41\u7279\u5b9a\u5b9e\u4f8b\u7684\u6267\u884c\u5386\u53f2\u3002</li> </ol> Python <ol> <li>\u5c06\u4efb\u4f55\u975e\u786e\u5b9a\u6027\u64cd\u4f5c\uff08\u4f8b\u5982\u968f\u673a\u6570\u751f\u6210\uff09\u6216\u5177\u6709\u526f\u4f5c\u7528\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\u6587\u4ef6\u5199\u5165\u3001API \u8c03\u7528\uff09\u5305\u88c5\u5728 @[tasks][task] \u5185\uff0c\u4ee5\u786e\u4fdd\u5f53\u5de5\u4f5c\u6d41\u6062\u590d\u65f6\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u4e0d\u4f1a\u9488\u5bf9\u7279\u5b9a\u8fd0\u884c\u91cd\u590d\u6267\u884c\uff0c\u800c\u662f\u4ece\u6301\u4e45\u5316\u5c42\u68c0\u7d22\u5b83\u4eec\u7684\u7ed3\u679c\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u786e\u5b9a\u6027\u548c\u4e00\u81f4\u91cd\u653e\u3002</li> </ol> JavaScript <ol> <li>\u5c06\u4efb\u4f55\u975e\u786e\u5b9a\u6027\u64cd\u4f5c\uff08\u4f8b\u5982\u968f\u673a\u6570\u751f\u6210\uff09\u6216\u5177\u6709\u526f\u4f5c\u7528\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\u6587\u4ef6\u5199\u5165\u3001API \u8c03\u7528\uff09\u5305\u88c5\u5728 @[tasks][task] \u5185\uff0c\u4ee5\u786e\u4fdd\u5f53\u5de5\u4f5c\u6d41\u6062\u590d\u65f6\uff0c\u8fd9\u4e9b\u64cd\u4f5c\u4e0d\u4f1a\u9488\u5bf9\u7279\u5b9a\u8fd0\u884c\u91cd\u590d\u6267\u884c\uff0c\u800c\u662f\u4ece\u6301\u4e45\u5316\u5c42\u68c0\u7d22\u5b83\u4eec\u7684\u7ed3\u679c\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u786e\u5b9a\u6027\u548c\u4e00\u81f4\u91cd\u653e\u3002</li> </ol>","boost":2},{"location":"concepts/durable_execution/#_3","title":"\u786e\u5b9a\u6027\u548c\u4e00\u81f4\u91cd\u653e","text":"<p>\u5f53\u4f60\u6062\u590d\u5de5\u4f5c\u6d41\u8fd0\u884c\u65f6\uff0c\u4ee3\u7801**\u4e0d\u4f1a**\u4ece\u6267\u884c\u505c\u6b62\u7684**\u540c\u4e00\u884c\u4ee3\u7801**\u6062\u590d\uff1b\u76f8\u53cd\uff0c\u5b83\u5c06\u8bc6\u522b\u4e00\u4e2a\u9002\u5f53\u7684\u8d77\u59cb\u70b9\uff0c\u4ece\u4e2d\u7ee7\u7eed\u505c\u6b62\u7684\u5730\u65b9\u3002\u8fd9\u610f\u5473\u7740\u5de5\u4f5c\u6d41\u5c06\u4ece\u8d77\u59cb\u70b9\u91cd\u653e\u6240\u6709\u6b65\u9aa4\uff0c\u76f4\u5230\u8fbe\u5230\u505c\u6b62\u7684\u70b9\u3002</p> <p>\u56e0\u6b64\uff0c\u5f53\u4f60\u4e3a\u6301\u4e45\u5316\u6267\u884c\u7f16\u5199\u5de5\u4f5c\u6d41\u65f6\uff0c\u5fc5\u987b\u5c06\u4efb\u4f55\u975e\u786e\u5b9a\u6027\u64cd\u4f5c\uff08\u4f8b\u5982\u968f\u673a\u6570\u751f\u6210\uff09\u548c\u4efb\u4f55\u5177\u6709\u526f\u4f5c\u7528\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\u6587\u4ef6\u5199\u5165\u3001API \u8c03\u7528\uff09\u5305\u88c5\u5728\u4efb\u52a1\u6216\u8282\u70b9\u5185\u3002</p> <p>\u4e3a\u786e\u4fdd\u4f60\u7684\u5de5\u4f5c\u6d41\u662f\u786e\u5b9a\u6027\u7684\u5e76\u4e14\u53ef\u4ee5\u4e00\u81f4\u5730\u91cd\u653e\uff0c\u8bf7\u9075\u5faa\u4ee5\u4e0b\u51c6\u5219\uff1a</p> <ul> <li>\u907f\u514d\u91cd\u590d\u5de5\u4f5c\uff1a\u5982\u679c\u8282\u70b9\u5305\u542b\u591a\u4e2a\u5177\u6709\u526f\u4f5c\u7528\u7684\u64cd\u4f5c\uff08\u4f8b\u5982\u65e5\u5fd7\u8bb0\u5f55\u3001\u6587\u4ef6\u5199\u5165\u6216\u7f51\u7edc\u8c03\u7528\uff09\uff0c\u8bf7\u5c06\u6bcf\u4e2a\u64cd\u4f5c\u5305\u88c5\u5728\u5355\u72ec\u7684**\u4efb\u52a1**\u4e2d\u3002\u8fd9\u53ef\u786e\u4fdd\u5f53\u5de5\u4f5c\u6d41\u6062\u590d\u65f6\uff0c\u64cd\u4f5c\u4e0d\u4f1a\u91cd\u590d\uff0c\u5e76\u4e14\u5b83\u4eec\u7684\u7ed3\u679c\u5c06\u4ece\u6301\u4e45\u5316\u5c42\u68c0\u7d22\u3002</li> <li>**\u5c01\u88c5\u975e\u786e\u5b9a\u6027\u64cd\u4f5c\uff1a**\u5c06\u4efb\u4f55\u53ef\u80fd\u4ea7\u751f\u975e\u786e\u5b9a\u6027\u7ed3\u679c\u7684\u4ee3\u7801\uff08\u4f8b\u5982\u968f\u673a\u6570\u751f\u6210\uff09\u5305\u88c5\u5728**\u4efb\u52a1**\u6216**\u8282\u70b9**\u5185\u3002\u8fd9\u53ef\u786e\u4fdd\u5728\u6062\u590d\u65f6\uff0c\u5de5\u4f5c\u6d41\u9075\u5faa\u5177\u6709\u76f8\u540c\u7ed3\u679c\u7684\u786e\u5207\u8bb0\u5f55\u6b65\u9aa4\u5e8f\u5217\u3002</li> <li>\u4f7f\u7528\u5e42\u7b49\u64cd\u4f5c\uff1a\u5728\u53ef\u80fd\u7684\u60c5\u51b5\u4e0b\uff0c\u786e\u4fdd\u526f\u4f5c\u7528\uff08\u4f8b\u5982 API \u8c03\u7528\u3001\u6587\u4ef6\u5199\u5165\uff09\u662f\u5e42\u7b49\u7684\u3002\u8fd9\u610f\u5473\u7740\u5982\u679c\u64cd\u4f5c\u5728\u5de5\u4f5c\u6d41\u5931\u8d25\u540e\u91cd\u8bd5\uff0c\u5b83\u5c06\u5177\u6709\u4e0e\u7b2c\u4e00\u6b21\u6267\u884c\u65f6\u76f8\u540c\u7684\u6548\u679c\u3002\u8fd9\u5bf9\u4e8e\u5bfc\u81f4\u6570\u636e\u5199\u5165\u7684\u64cd\u4f5c\u7279\u522b\u91cd\u8981\u3002\u5982\u679c**\u4efb\u52a1**\u542f\u52a8\u4f46\u672a\u80fd\u6210\u529f\u5b8c\u6210\uff0c\u5de5\u4f5c\u6d41\u7684\u6062\u590d\u5c06\u91cd\u65b0\u8fd0\u884c**\u4efb\u52a1**\uff0c\u4f9d\u8d56\u8bb0\u5f55\u7684\u7ed3\u679c\u6765\u4fdd\u6301\u4e00\u81f4\u6027\u3002\u4f7f\u7528\u5e42\u7b49\u6027\u952e\u6216\u9a8c\u8bc1\u73b0\u6709\u7ed3\u679c\u4ee5\u907f\u514d\u610f\u5916\u91cd\u590d\uff0c\u786e\u4fdd\u987a\u5229\u4e14\u53ef\u9884\u6d4b\u7684\u5de5\u4f5c\u6d41\u6267\u884c\u3002</li> </ul> Python <p>\u6709\u5173\u8981\u907f\u514d\u7684\u4e00\u4e9b\u9677\u9631\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u51fd\u6570\u5f0f API \u4e2d\u7684\u5e38\u89c1\u9677\u9631\u90e8\u5206\uff0c\u8be5\u90e8\u5206\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528**\u4efb\u52a1**\u6784\u5efa\u4ee3\u7801\u4ee5\u907f\u514d\u8fd9\u4e9b\u95ee\u9898\u3002\u76f8\u540c\u7684\u539f\u5219\u9002\u7528\u4e8e @[StateGraph\uff08\u56fe API\uff09][StateGraph]\u3002</p> JavaScript <p>\u6709\u5173\u8981\u907f\u514d\u7684\u4e00\u4e9b\u9677\u9631\u7684\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u51fd\u6570\u5f0f API \u4e2d\u7684\u5e38\u89c1\u9677\u9631\u90e8\u5206\uff0c\u8be5\u90e8\u5206\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528**\u4efb\u52a1**\u6784\u5efa\u4ee3\u7801\u4ee5\u907f\u514d\u8fd9\u4e9b\u95ee\u9898\u3002\u76f8\u540c\u7684\u539f\u5219\u9002\u7528\u4e8e @[StateGraph\uff08\u56fe API\uff09][StateGraph]\u3002</p>","boost":2},{"location":"concepts/durable_execution/#_4","title":"\u6301\u4e45\u6027\u6a21\u5f0f","text":"<p>LangGraph \u652f\u6301\u4e09\u79cd\u6301\u4e45\u6027\u6a21\u5f0f\uff0c\u5141\u8bb8\u4f60\u6839\u636e\u5e94\u7528\u7a0b\u5e8f\u7684\u8981\u6c42\u5e73\u8861\u6027\u80fd\u548c\u6570\u636e\u4e00\u81f4\u6027\u3002\u6301\u4e45\u6027\u6a21\u5f0f\u4ece\u6700\u4e0d\u6301\u4e45\u5230\u6700\u6301\u4e45\u5982\u4e0b\uff1a</p> <ul> <li><code>\"exit\"</code></li> <li><code>\"async\"</code></li> <li><code>\"sync\"</code></li> </ul> <p>\u66f4\u9ad8\u7684\u6301\u4e45\u6027\u6a21\u5f0f\u4f1a\u4e3a\u5de5\u4f5c\u6d41\u6267\u884c\u589e\u52a0\u66f4\u591a\u5f00\u9500\u3002</p> <p>\u5728\u7248\u672c 0.6.0 \u4e2d\u6dfb\u52a0</p> <p>\u4f7f\u7528 <code>durability</code> \u53c2\u6570\u800c\u4e0d\u662f <code>checkpoint_during</code>\uff08\u5728 v0.6.0 \u4e2d\u5f03\u7528\uff09\u8fdb\u884c\u6301\u4e45\u5316\u7b56\u7565\u7ba1\u7406\uff1a</p> <ul> <li><code>durability=\"async\"</code> \u66ff\u6362 <code>checkpoint_during=True</code></li> <li><code>durability=\"exit\"</code> \u66ff\u6362 <code>checkpoint_during=False</code></li> </ul> <p>\u7528\u4e8e\u6301\u4e45\u5316\u7b56\u7565\u7ba1\u7406\uff0c\u5177\u6709\u4ee5\u4e0b\u6620\u5c04\uff1a</p> <ul> <li><code>checkpoint_during=True</code> -&gt; <code>durability=\"async\"</code></li> <li><code>checkpoint_during=False</code> -&gt; <code>durability=\"exit\"</code></li> </ul>","boost":2},{"location":"concepts/durable_execution/#exit","title":"<code>\"exit\"</code>","text":"<p>\u4ec5\u5f53\u56fe\u6267\u884c\u5b8c\u6210\uff08\u6210\u529f\u6216\u51fa\u9519\uff09\u65f6\u624d\u6301\u4e45\u5316\u66f4\u6539\u3002\u8fd9\u4e3a\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u56fe\u63d0\u4f9b\u4e86\u6700\u4f73\u6027\u80fd\uff0c\u4f46\u610f\u5473\u7740\u4e2d\u95f4\u72b6\u6001\u4e0d\u4f1a\u88ab\u4fdd\u5b58\uff0c\u56e0\u6b64\u4f60\u65e0\u6cd5\u4ece\u6267\u884c\u4e2d\u671f\u5931\u8d25\u4e2d\u6062\u590d\u6216\u4e2d\u65ad\u56fe\u6267\u884c\u3002</p>","boost":2},{"location":"concepts/durable_execution/#async","title":"<code>\"async\"</code>","text":"<p>\u5728\u4e0b\u4e00\u6b65\u6267\u884c\u65f6\u5f02\u6b65\u6301\u4e45\u5316\u66f4\u6539\u3002\u8fd9\u63d0\u4f9b\u4e86\u826f\u597d\u7684\u6027\u80fd\u548c\u6301\u4e45\u6027\uff0c\u4f46\u5982\u679c\u8fdb\u7a0b\u5728\u6267\u884c\u671f\u95f4\u5d29\u6e83\uff0c\u68c0\u67e5\u70b9\u53ef\u80fd\u4e0d\u4f1a\u88ab\u5199\u5165\uff0c\u5b58\u5728\u5c0f\u98ce\u9669\u3002</p>","boost":2},{"location":"concepts/durable_execution/#sync","title":"<code>\"sync\"</code>","text":"<p>\u5728\u4e0b\u4e00\u6b65\u5f00\u59cb\u4e4b\u524d\u540c\u6b65\u6301\u4e45\u5316\u66f4\u6539\u3002\u8fd9\u53ef\u786e\u4fdd\u5728\u7ee7\u7eed\u6267\u884c\u4e4b\u524d\u5199\u5165\u6bcf\u4e2a\u68c0\u67e5\u70b9\uff0c\u4ee5\u4e00\u4e9b\u6027\u80fd\u5f00\u9500\u4e3a\u4ee3\u4ef7\u63d0\u4f9b\u9ad8\u6301\u4e45\u6027\u3002</p> <p>\u4f60\u53ef\u4ee5\u5728\u8c03\u7528\u4efb\u4f55\u56fe\u6267\u884c\u65b9\u6cd5\u65f6\u6307\u5b9a\u6301\u4e45\u6027\u6a21\u5f0f\uff1a</p> Python <pre><code>graph.stream(\n    {\"input\": \"test\"},\n    durability=\"sync\"\n)\n</code></pre>","boost":2},{"location":"concepts/durable_execution/#_5","title":"\u5728\u8282\u70b9\u4e2d\u4f7f\u7528\u4efb\u52a1","text":"<p>\u5982\u679c\u8282\u70b9\u5305\u542b\u591a\u4e2a\u64cd\u4f5c\uff0c\u4f60\u53ef\u80fd\u4f1a\u53d1\u73b0\u5c06\u6bcf\u4e2a\u64cd\u4f5c\u8f6c\u6362\u4e3a**\u4efb\u52a1**\u6bd4\u5c06\u64cd\u4f5c\u91cd\u6784\u4e3a\u5355\u4e2a\u8282\u70b9\u66f4\u5bb9\u6613\u3002</p> Python\u539f\u59cb\u7248\u672c\u4f7f\u7528\u4efb\u52a1JavaScript\u539f\u59cb\u7248\u672c\u4f7f\u7528\u4efb\u52a1 <pre><code>from typing import NotRequired\nfrom typing_extensions import TypedDict\nimport uuid\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph, START, END\nimport requests\n\n# Define a TypedDict to represent the state\nclass State(TypedDict):\n    url: str\n    result: NotRequired[str]\n\ndef call_api(state: State):\n    \"\"\"Example node that makes an API request.\"\"\"\n    # highlight-next-line\n    result = requests.get(state['url']).text[:100]  # Side-effect\n    return {\n        \"result\": result\n    }\n\n# Create a StateGraph builder and add a node for the call_api function\nbuilder = StateGraph(State)\nbuilder.add_node(\"call_api\", call_api)\n\n# Connect the start and end nodes to the call_api node\nbuilder.add_edge(START, \"call_api\")\nbuilder.add_edge(\"call_api\", END)\n\n# Specify a checkpointer\ncheckpointer = InMemorySaver()\n\n# Compile the graph with the checkpointer\ngraph = builder.compile(checkpointer=checkpointer)\n\n# Define a config with a thread ID.\nthread_id = uuid.uuid4()\nconfig = {\"configurable\": {\"thread_id\": thread_id}}\n\n# Invoke the graph\ngraph.invoke({\"url\": \"https://www.example.com\"}, config)\n</code></pre> <pre><code>from typing import NotRequired\nfrom typing_extensions import TypedDict\nimport uuid\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.func import task\nfrom langgraph.graph import StateGraph, START, END\nimport requests\n\n# Define a TypedDict to represent the state\nclass State(TypedDict):\n    urls: list[str]\n    result: NotRequired[list[str]]\n\n\n@task\ndef _make_request(url: str):\n    \"\"\"Make a request.\"\"\"\n    # highlight-next-line\n    return requests.get(url).text[:100]\n\ndef call_api(state: State):\n    \"\"\"Example node that makes an API request.\"\"\"\n    # highlight-next-line\n    requests = [_make_request(url) for url in state['urls']]\n    results = [request.result() for request in requests]\n    return {\n        \"results\": results\n    }\n\n# Create a StateGraph builder and add a node for the call_api function\nbuilder = StateGraph(State)\nbuilder.add_node(\"call_api\", call_api)\n\n# Connect the start and end nodes to the call_api node\nbuilder.add_edge(START, \"call_api\")\nbuilder.add_edge(\"call_api\", END)\n\n# Specify a checkpointer\ncheckpointer = InMemorySaver()\n\n# Compile the graph with the checkpointer\ngraph = builder.compile(checkpointer=checkpointer)\n\n# Define a config with a thread ID.\nthread_id = uuid.uuid4()\nconfig = {\"configurable\": {\"thread_id\": thread_id}}\n\n# Invoke the graph\ngraph.invoke({\"urls\": [\"https://www.example.com\"]}, config)\n</code></pre> <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { MemorySaver } from \"@langchain/langgraph\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { z } from \"zod\";\n\n// Define a Zod schema to represent the state\nconst State = z.object({\n  url: z.string(),\n  result: z.string().optional(),\n});\n\nconst callApi = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // highlight-next-line\n  const response = await fetch(state.url);\n  const text = await response.text();\n  const result = text.slice(0, 100); // Side-effect\n  return {\n    result,\n  };\n};\n\n// Create a StateGraph builder and add a node for the callApi function\nconst builder = new StateGraph(State)\n  .addNode(\"callApi\", callApi)\n  .addEdge(START, \"callApi\")\n  .addEdge(\"callApi\", END);\n\n// Specify a checkpointer\nconst checkpointer = new MemorySaver();\n\n// Compile the graph with the checkpointer\nconst graph = builder.compile({ checkpointer });\n\n// Define a config with a thread ID.\nconst threadId = uuidv4();\nconst config = { configurable: { thread_id: threadId } };\n\n// Invoke the graph\nawait graph.invoke({ url: \"https://www.example.com\" }, config);\n</code></pre> <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { MemorySaver } from \"@langchain/langgraph\";\nimport { task } from \"@langchain/langgraph\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { z } from \"zod\";\n\n// Define a Zod schema to represent the state\nconst State = z.object({\n  urls: z.array(z.string()),\n  results: z.array(z.string()).optional(),\n});\n\nconst makeRequest = task(\"makeRequest\", async (url: string) =&gt; {\n  // highlight-next-line\n  const response = await fetch(url);\n  const text = await response.text();\n  return text.slice(0, 100);\n});\n\nconst callApi = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // highlight-next-line\n  const requests = state.urls.map((url) =&gt; makeRequest(url));\n  const results = await Promise.all(requests);\n  return {\n    results,\n  };\n};\n\n// Create a StateGraph builder and add a node for the callApi function\nconst builder = new StateGraph(State)\n  .addNode(\"callApi\", callApi)\n  .addEdge(START, \"callApi\")\n  .addEdge(\"callApi\", END);\n\n// Specify a checkpointer\nconst checkpointer = new MemorySaver();\n\n// Compile the graph with the checkpointer\nconst graph = builder.compile({ checkpointer });\n\n// Define a config with a thread ID.\nconst threadId = uuidv4();\nconst config = { configurable: { thread_id: threadId } };\n\n// Invoke the graph\nawait graph.invoke({ urls: [\"https://www.example.com\"] }, config);\n</code></pre>","boost":2},{"location":"concepts/durable_execution/#_6","title":"\u6062\u590d\u5de5\u4f5c\u6d41","text":"<p>\u4e00\u65e6\u4f60\u5728\u5de5\u4f5c\u6d41\u4e2d\u542f\u7528\u4e86\u6301\u4e45\u5316\u6267\u884c\uff0c\u4f60\u53ef\u4ee5\u4e3a\u4ee5\u4e0b\u573a\u666f\u6062\u590d\u6267\u884c\uff1a</p> Python <ul> <li>**\u6682\u505c\u548c\u6062\u590d\u5de5\u4f5c\u6d41\uff1a**\u4f7f\u7528 @interrupt \u51fd\u6570\u5728\u7279\u5b9a\u70b9\u6682\u505c\u5de5\u4f5c\u6d41\uff0c\u5e76\u4f7f\u7528 @[Command] \u539f\u8bed\u4f7f\u7528\u66f4\u65b0\u7684\u72b6\u6001\u6062\u590d\u5b83\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4eba\u673a\u534f\u540c\u3002</li> <li>**\u4ece\u5931\u8d25\u4e2d\u6062\u590d\uff1a**\u5728\u5f02\u5e38\uff08\u4f8b\u5982 LLM \u63d0\u4f9b\u5546\u4e2d\u65ad\uff09\u4e4b\u540e\u81ea\u52a8\u4ece\u6700\u540e\u4e00\u4e2a\u6210\u529f\u7684\u68c0\u67e5\u70b9\u6062\u590d\u5de5\u4f5c\u6d41\u3002\u8fd9\u6d89\u53ca\u901a\u8fc7\u5411\u5176\u63d0\u4f9b <code>None</code> \u4f5c\u4e3a\u8f93\u5165\u503c\u6765\u4f7f\u7528\u76f8\u540c\u7684\u7ebf\u7a0b\u6807\u8bc6\u7b26\u6267\u884c\u5de5\u4f5c\u6d41\uff08\u53c2\u89c1\u4f7f\u7528\u51fd\u6570\u5f0f API \u7684\u6b64\u793a\u4f8b\uff09\u3002</li> </ul> JavaScript <ul> <li>**\u6682\u505c\u548c\u6062\u590d\u5de5\u4f5c\u6d41\uff1a**\u4f7f\u7528 @interrupt \u51fd\u6570\u5728\u7279\u5b9a\u70b9\u6682\u505c\u5de5\u4f5c\u6d41\uff0c\u5e76\u4f7f\u7528 @[Command] \u539f\u8bed\u4f7f\u7528\u66f4\u65b0\u7684\u72b6\u6001\u6062\u590d\u5b83\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4eba\u673a\u534f\u540c\u3002</li> <li>**\u4ece\u5931\u8d25\u4e2d\u6062\u590d\uff1a**\u5728\u5f02\u5e38\uff08\u4f8b\u5982 LLM \u63d0\u4f9b\u5546\u4e2d\u65ad\uff09\u4e4b\u540e\u81ea\u52a8\u4ece\u6700\u540e\u4e00\u4e2a\u6210\u529f\u7684\u68c0\u67e5\u70b9\u6062\u590d\u5de5\u4f5c\u6d41\u3002\u8fd9\u6d89\u53ca\u901a\u8fc7\u5411\u5176\u63d0\u4f9b <code>null</code> \u4f5c\u4e3a\u8f93\u5165\u503c\u6765\u4f7f\u7528\u76f8\u540c\u7684\u7ebf\u7a0b\u6807\u8bc6\u7b26\u6267\u884c\u5de5\u4f5c\u6d41\uff08\u53c2\u89c1\u4f7f\u7528\u51fd\u6570\u5f0f API \u7684\u6b64\u793a\u4f8b\uff09\u3002</li> </ul>","boost":2},{"location":"concepts/durable_execution/#_7","title":"\u6062\u590d\u5de5\u4f5c\u6d41\u7684\u8d77\u59cb\u70b9","text":"Python <ul> <li>\u5982\u679c\u4f60\u4f7f\u7528 @[StateGraph\uff08\u56fe API\uff09][StateGraph]\uff0c\u8d77\u59cb\u70b9\u662f\u6267\u884c\u505c\u6b62\u7684\u8282\u70b9\u7684\u5f00\u5934\u3002</li> <li>\u5982\u679c\u4f60\u5728\u8282\u70b9\u5185\u8fdb\u884c\u5b50\u56fe\u8c03\u7528\uff0c\u8d77\u59cb\u70b9\u5c06\u662f\u8c03\u7528\u88ab\u6682\u505c\u7684\u5b50\u56fe\u7684**\u7236**\u8282\u70b9\u3002   \u5728\u5b50\u56fe\u5185\uff0c\u8d77\u59cb\u70b9\u5c06\u662f\u6267\u884c\u505c\u6b62\u7684\u7279\u5b9a\u8282\u70b9\u3002</li> <li>\u5982\u679c\u4f60\u4f7f\u7528\u51fd\u6570\u5f0f API\uff0c\u8d77\u59cb\u70b9\u662f\u6267\u884c\u505c\u6b62\u7684\u5165\u53e3\u70b9\u7684\u5f00\u5934\u3002</li> </ul> JavaScript <ul> <li>\u5982\u679c\u4f60\u4f7f\u7528StateGraph\uff08\u56fe API\uff09\uff0c\u8d77\u59cb\u70b9\u662f\u6267\u884c\u505c\u6b62\u7684\u8282\u70b9\u7684\u5f00\u5934\u3002</li> <li>\u5982\u679c\u4f60\u5728\u8282\u70b9\u5185\u8fdb\u884c\u5b50\u56fe\u8c03\u7528\uff0c\u8d77\u59cb\u70b9\u5c06\u662f\u8c03\u7528\u88ab\u6682\u505c\u7684\u5b50\u56fe\u7684**\u7236**\u8282\u70b9\u3002   \u5728\u5b50\u56fe\u5185\uff0c\u8d77\u59cb\u70b9\u5c06\u662f\u6267\u884c\u505c\u6b62\u7684\u7279\u5b9a\u8282\u70b9\u3002</li> <li>\u5982\u679c\u4f60\u4f7f\u7528\u51fd\u6570\u5f0f API\uff0c\u8d77\u59cb\u70b9\u662f\u6267\u884c\u505c\u6b62\u7684\u5165\u53e3\u70b9\u7684\u5f00\u5934\u3002</li> </ul>","boost":2},{"location":"concepts/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>\u5e38\u89c1\u95ee\u9898\u53ca\u5176\u7b54\u6848!</p>","boost":2},{"location":"concepts/faq/#langchain-langgraph","title":"\u6211\u9700\u8981\u4f7f\u7528 LangChain \u624d\u80fd\u4f7f\u7528 LangGraph \u5417?\u6709\u4ec0\u4e48\u533a\u522b?","text":"<p>\u4e0d\u9700\u8981\u3002LangGraph \u662f\u4e00\u4e2a\u7528\u4e8e\u590d\u6742\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u7f16\u6392\u6846\u67b6,\u6bd4 LangChain \u667a\u80fd\u4ee3\u7406\u66f4\u5e95\u5c42\u3001\u66f4\u53ef\u63a7\u3002LangChain \u63d0\u4f9b\u4e86\u4e00\u4e2a\u4e0e\u6a21\u578b\u548c\u5176\u4ed6\u7ec4\u4ef6\u4ea4\u4e92\u7684\u6807\u51c6\u63a5\u53e3,\u5bf9\u4e8e\u7b80\u5355\u7684\u94fe\u548c\u68c0\u7d22\u6d41\u7a0b\u5f88\u6709\u7528\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph","title":"LangGraph \u4e0e\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u6846\u67b6\u6709\u4f55\u4e0d\u540c?","text":"<p>\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u6846\u67b6\u53ef\u4ee5\u5904\u7406\u7b80\u5355\u7684\u901a\u7528\u4efb\u52a1,\u4f46\u5bf9\u4e8e\u590d\u6742\u4efb\u52a1\u5219\u529b\u4e0d\u4ece\u5fc3\u3002LangGraph \u63d0\u4f9b\u4e86\u4e00\u4e2a\u66f4\u5177\u8868\u73b0\u529b\u7684\u6846\u67b6\u6765\u5904\u7406\u4f60\u7684\u72ec\u7279\u4efb\u52a1,\u800c\u4e0d\u4f1a\u5c06\u4f60\u9650\u5236\u5728\u5355\u4e00\u7684\u9ed1\u76d2\u8ba4\u77e5\u67b6\u6784\u4e2d\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph_1","title":"LangGraph \u4f1a\u5f71\u54cd\u6211\u7684\u5e94\u7528\u7a0b\u5e8f\u6027\u80fd\u5417?","text":"<p>LangGraph \u4e0d\u4f1a\u7ed9\u4f60\u7684\u4ee3\u7801\u589e\u52a0\u4efb\u4f55\u5f00\u9500,\u5e76\u4e14\u4e13\u95e8\u9488\u5bf9\u6d41\u5f0f\u5de5\u4f5c\u6d41\u800c\u8bbe\u8ba1\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph_2","title":"LangGraph \u662f\u5f00\u6e90\u7684\u5417?\u662f\u514d\u8d39\u7684\u5417?","text":"<p>\u662f\u7684\u3002LangGraph \u662f\u4e00\u4e2a MIT \u8bb8\u53ef\u7684\u5f00\u6e90\u5e93,\u53ef\u4ee5\u514d\u8d39\u4f7f\u7528\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph-langgraph-platform","title":"LangGraph \u548c LangGraph Platform \u6709\u4f55\u4e0d\u540c?","text":"<p>LangGraph \u662f\u4e00\u4e2a\u6709\u72b6\u6001\u7684\u7f16\u6392\u6846\u67b6,\u4e3a\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41\u5e26\u6765\u4e86\u66f4\u591a\u63a7\u5236\u3002LangGraph Platform \u662f\u4e00\u4e2a\u7528\u4e8e\u90e8\u7f72\u548c\u6269\u5c55 LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u670d\u52a1,\u5177\u6709\u7528\u4e8e\u6784\u5efa\u667a\u80fd\u4ee3\u7406 UX \u7684\u56fa\u5b9a API,\u4ee5\u53ca\u96c6\u6210\u7684\u5f00\u53d1\u8005\u5de5\u4f5c\u5ba4\u3002</p> \u529f\u80fd LangGraph(\u5f00\u6e90) LangGraph Platform \u63cf\u8ff0 \u7528\u4e8e\u667a\u80fd\u4ee3\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u6709\u72b6\u6001\u7f16\u6392\u6846\u67b6 \u7528\u4e8e\u90e8\u7f72 LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u53ef\u6269\u5c55\u57fa\u7840\u8bbe\u65bd SDK Python \u548c JavaScript Python \u548c JavaScript HTTP API \u65e0 \u662f - \u7528\u4e8e\u68c0\u7d22\u548c\u66f4\u65b0\u72b6\u6001\u6216\u957f\u671f\u8bb0\u5fc6,\u6216\u521b\u5efa\u53ef\u914d\u7f6e\u7684\u52a9\u624b \u6d41\u5f0f\u4f20\u8f93 \u57fa\u7840 \u7528\u4e8e\u9010\u4ee4\u724c\u6d88\u606f\u7684\u4e13\u7528\u6a21\u5f0f \u68c0\u67e5\u70b9\u5668 \u793e\u533a\u8d21\u732e \u5f00\u7bb1\u5373\u7528\u7684\u652f\u6301 \u6301\u4e45\u5c42 \u81ea\u7ba1\u7406 \u6258\u7ba1\u7684 Postgres,\u5177\u6709\u9ad8\u6548\u5b58\u50a8 \u90e8\u7f72 \u81ea\u7ba1\u7406 \u2022 Cloud SaaS  \u2022 \u514d\u8d39\u81ea\u6258\u7ba1  \u2022 \u4f01\u4e1a\u7248(\u4ed8\u8d39\u81ea\u6258\u7ba1) \u53ef\u6269\u5c55\u6027 \u81ea\u7ba1\u7406 \u4efb\u52a1\u961f\u5217\u548c\u670d\u52a1\u5668\u7684\u81ea\u52a8\u6269\u5c55 \u5bb9\u9519\u6027 \u81ea\u7ba1\u7406 \u81ea\u52a8\u91cd\u8bd5 \u5e76\u53d1\u63a7\u5236 \u7b80\u5355\u7ebf\u7a0b \u652f\u6301\u53cc\u91cd\u8f93\u5165 \u8c03\u5ea6 \u65e0 \u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6 \u76d1\u63a7 \u65e0 \u4e0e LangSmith \u96c6\u6210\u4ee5\u5b9e\u73b0\u53ef\u89c2\u5bdf\u6027 IDE \u96c6\u6210 LangGraph Studio LangGraph Studio","boost":2},{"location":"concepts/faq/#langgraph-platform","title":"LangGraph Platform \u662f\u5f00\u6e90\u7684\u5417?","text":"<p>\u4e0d\u662f\u3002LangGraph Platform \u662f\u4e13\u6709\u8f6f\u4ef6\u3002</p> <p>\u6709\u4e00\u4e2a\u514d\u8d39\u7684\u81ea\u6258\u7ba1\u7248\u672c\u7684 LangGraph Platform,\u53ef\u4ee5\u8bbf\u95ee\u57fa\u672c\u529f\u80fd\u3002Cloud SaaS \u90e8\u7f72\u9009\u9879\u548c\u81ea\u6258\u7ba1\u90e8\u7f72\u9009\u9879\u662f\u4ed8\u8d39\u670d\u52a1\u3002\u8054\u7cfb\u6211\u4eec\u7684\u9500\u552e\u56e2\u961f\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u6211\u4eec\u7684 LangGraph Platform \u5b9a\u4ef7\u9875\u9762\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph-llm","title":"LangGraph \u662f\u5426\u9002\u7528\u4e8e\u4e0d\u652f\u6301\u5de5\u5177\u8c03\u7528\u7684 LLM?","text":"<p>\u662f\u7684!\u4f60\u53ef\u4ee5\u5c06 LangGraph \u4e0e\u4efb\u4f55 LLM \u4e00\u8d77\u4f7f\u7528\u3002\u6211\u4eec\u4f7f\u7528\u652f\u6301\u5de5\u5177\u8c03\u7528\u7684 LLM \u7684\u4e3b\u8981\u539f\u56e0\u662f,\u8fd9\u901a\u5e38\u662f\u8ba9 LLM \u51b3\u5b9a\u8981\u505a\u4ec0\u4e48\u7684\u6700\u65b9\u4fbf\u7684\u65b9\u5f0f\u3002\u5982\u679c\u4f60\u7684 LLM \u4e0d\u652f\u6301\u5de5\u5177\u8c03\u7528,\u4f60\u4ecd\u7136\u53ef\u4ee5\u4f7f\u7528\u5b83 - \u4f60\u53ea\u9700\u8981\u7f16\u5199\u4e00\u70b9\u903b\u8f91\u6765\u5c06\u539f\u59cb LLM \u5b57\u7b26\u4e32\u54cd\u5e94\u8f6c\u6362\u4e3a\u5173\u4e8e\u8981\u505a\u4ec0\u4e48\u7684\u51b3\u5b9a\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph-oss-llm","title":"LangGraph \u662f\u5426\u9002\u7528\u4e8e OSS LLM?","text":"<p>\u662f\u7684!LangGraph \u5bf9\u5e95\u5c42\u4f7f\u7528\u54ea\u4e9b LLM \u5b8c\u5168\u4e0d\u5173\u5fc3\u3002\u6211\u4eec\u5728\u5927\u591a\u6570\u6559\u7a0b\u4e2d\u4f7f\u7528\u95ed\u6e90 LLM \u7684\u4e3b\u8981\u539f\u56e0\u662f\u5b83\u4eec\u65e0\u7f1d\u652f\u6301\u5de5\u5177\u8c03\u7528,\u800c OSS LLM \u901a\u5e38\u4e0d\u652f\u6301\u3002\u4f46\u5de5\u5177\u8c03\u7528\u5e76\u4e0d\u662f\u5fc5\u9700\u7684(\u8bf7\u53c2\u9605\u6b64\u90e8\u5206),\u6240\u4ee5\u4f60\u5b8c\u5168\u53ef\u4ee5\u5c06 LangGraph \u4e0e OSS LLM \u4e00\u8d77\u4f7f\u7528\u3002</p>","boost":2},{"location":"concepts/faq/#langsmith-langgraph-studio","title":"\u6211\u53ef\u4ee5\u5728\u4e0d\u767b\u5f55 LangSmith \u7684\u60c5\u51b5\u4e0b\u4f7f\u7528 LangGraph Studio \u5417?","text":"<p>\u53ef\u4ee5!\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph Server \u7684\u5f00\u53d1\u7248\u672c\u5728\u672c\u5730\u8fd0\u884c\u540e\u7aef\u3002 \u8fd9\u5c06\u8fde\u63a5\u5230\u4f5c\u4e3a LangSmith \u4e00\u90e8\u5206\u6258\u7ba1\u7684 Studio \u524d\u7aef\u3002 \u5982\u679c\u4f60\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf <code>LANGSMITH_TRACING=false</code>,\u5219\u4e0d\u4f1a\u5c06\u4efb\u4f55\u8ddf\u8e2a\u53d1\u9001\u5230 LangSmith\u3002</p>","boost":2},{"location":"concepts/faq/#langgraph-platform_1","title":"LangGraph Platform \u4f7f\u7528\u4e2d\u7684\"\u5df2\u6267\u884c\u8282\u70b9\"\u662f\u4ec0\u4e48\u610f\u601d?","text":"<p>**\u5df2\u6267\u884c\u8282\u70b9**\u662f\u5728\u8c03\u7528\u5e94\u7528\u7a0b\u5e8f\u671f\u95f4,LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u88ab\u8c03\u7528\u5e76\u6210\u529f\u5b8c\u6210\u7684\u8282\u70b9\u7684\u805a\u5408\u6570\u91cf\u3002\u5982\u679c\u56fe\u4e2d\u7684\u8282\u70b9\u5728\u6267\u884c\u671f\u95f4\u672a\u88ab\u8c03\u7528\u6216\u4ee5\u9519\u8bef\u72b6\u6001\u7ed3\u675f,\u5219\u8fd9\u4e9b\u8282\u70b9\u5c06\u4e0d\u4f1a\u88ab\u8ba1\u7b97\u5728\u5185\u3002\u5982\u679c\u8282\u70b9\u88ab\u8c03\u7528\u5e76\u6210\u529f\u5b8c\u6210\u591a\u6b21,\u6bcf\u6b21\u51fa\u73b0\u90fd\u5c06\u88ab\u8ba1\u6570\u3002</p>","boost":2},{"location":"concepts/functional_api/","title":"\u51fd\u6570\u5f0f API \u6982\u5ff5","text":"","boost":2},{"location":"concepts/functional_api/#_1","title":"\u6982\u8ff0","text":"<p>\u51fd\u6570\u5f0f API \u5141\u8bb8\u4f60\u4ee5\u6700\u5c0f\u7684\u4ee3\u7801\u66f4\u6539\u5c06 LangGraph \u7684\u5173\u952e\u529f\u80fd\u2014\u2014\u6301\u4e45\u5316\u3001\u8bb0\u5fc6\u3001\u4eba\u673a\u534f\u540c\u548c\u6d41\u5f0f\u4f20\u8f93\u2014\u2014\u6dfb\u52a0\u5230\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002</p> <p>\u5b83\u65e8\u5728\u5c06\u8fd9\u4e9b\u529f\u80fd\u96c6\u6210\u5230\u53ef\u80fd\u4f7f\u7528\u6807\u51c6\u8bed\u8a00\u539f\u8bed\u8fdb\u884c\u5206\u652f\u548c\u63a7\u5236\u6d41\u7684\u73b0\u6709\u4ee3\u7801\u4e2d\uff0c\u4f8b\u5982 <code>if</code> \u8bed\u53e5\u3001<code>for</code> \u5faa\u73af\u548c\u51fd\u6570\u8c03\u7528\u3002\u4e0e\u8bb8\u591a\u9700\u8981\u5c06\u4ee3\u7801\u91cd\u7ec4\u4e3a\u663e\u5f0f\u7ba1\u9053\u6216 DAG \u7684\u6570\u636e\u7f16\u6392\u6846\u67b6\u4e0d\u540c\uff0c\u51fd\u6570\u5f0f API \u5141\u8bb8\u4f60\u5728\u4e0d\u5f3a\u5236\u6267\u884c\u4e25\u683c\u6267\u884c\u6a21\u578b\u7684\u60c5\u51b5\u4e0b\u5408\u5e76\u8fd9\u4e9b\u529f\u80fd\u3002</p> <p>\u51fd\u6570\u5f0f API \u4f7f\u7528\u4e24\u4e2a\u5173\u952e\u6784\u5efa\u5757\uff1a</p> Python <ul> <li><code>@entrypoint</code> \u2013 \u5c06\u51fd\u6570\u6807\u8bb0\u4e3a\u5de5\u4f5c\u6d41\u7684\u8d77\u70b9\uff0c\u5c01\u88c5\u903b\u8f91\u5e76\u7ba1\u7406\u6267\u884c\u6d41\uff0c\u5305\u62ec\u5904\u7406\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1\u548c\u4e2d\u65ad\u3002</li> <li><code>@task</code> \u2013 \u8868\u793a\u79bb\u6563\u7684\u5de5\u4f5c\u5355\u5143\uff0c\u4f8b\u5982 API \u8c03\u7528\u6216\u6570\u636e\u5904\u7406\u6b65\u9aa4\uff0c\u53ef\u4ee5\u5728\u5165\u53e3\u70b9\u5185\u5f02\u6b65\u6267\u884c\u3002\u4efb\u52a1\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c future \u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5f02\u6b65\u7b49\u5f85\u6216\u540c\u6b65\u89e3\u6790\u3002</li> </ul> JavaScript <ul> <li><code>entrypoint</code> \u2013 \u5165\u53e3\u70b9\u5c01\u88c5\u5de5\u4f5c\u6d41\u903b\u8f91\u5e76\u7ba1\u7406\u6267\u884c\u6d41\uff0c\u5305\u62ec\u5904\u7406\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1\u548c\u4e2d\u65ad\u3002</li> <li><code>task</code> \u2013 \u8868\u793a\u79bb\u6563\u7684\u5de5\u4f5c\u5355\u5143\uff0c\u4f8b\u5982 API \u8c03\u7528\u6216\u6570\u636e\u5904\u7406\u6b65\u9aa4\uff0c\u53ef\u4ee5\u5728\u5165\u53e3\u70b9\u5185\u5f02\u6b65\u6267\u884c\u3002\u4efb\u52a1\u8fd4\u56de\u4e00\u4e2a\u7c7b\u4f3c future \u7684\u5bf9\u8c61\uff0c\u53ef\u4ee5\u5f02\u6b65\u7b49\u5f85\u6216\u540c\u6b65\u89e3\u6790\u3002</li> </ul> <p>\u8fd9\u4e3a\u6784\u5efa\u5177\u6709\u72b6\u6001\u7ba1\u7406\u548c\u6d41\u5f0f\u4f20\u8f93\u7684\u5de5\u4f5c\u6d41\u63d0\u4f9b\u4e86\u6700\u5c0f\u7684\u62bd\u8c61\u3002</p> <p>Tip</p> <p>\u6709\u5173\u5982\u4f55\u4f7f\u7528\u51fd\u6570\u5f0f API \u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4f7f\u7528\u51fd\u6570\u5f0f API\u3002</p>","boost":2},{"location":"concepts/functional_api/#api-api","title":"\u51fd\u6570\u5f0f API \u4e0e\u56fe API","text":"<p>\u5bf9\u4e8e\u559c\u6b22\u66f4\u58f0\u660e\u5f0f\u65b9\u6cd5\u7684\u7528\u6237\uff0cLangGraph \u7684\u56fe API\u5141\u8bb8\u4f60\u4f7f\u7528\u56fe\u8303\u5f0f\u5b9a\u4e49\u5de5\u4f5c\u6d41\u3002\u4e24\u4e2a API \u5171\u4eab\u76f8\u540c\u7684\u5e95\u5c42\u8fd0\u884c\u65f6\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u5728\u540c\u4e00\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4e00\u8d77\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5173\u952e\u533a\u522b\uff1a</p> <ul> <li>\u63a7\u5236\u6d41\uff1a\u51fd\u6570\u5f0f API \u4e0d\u9700\u8981\u8003\u8651\u56fe\u7ed3\u6784\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u6807\u51c6 Python \u6784\u9020\u6765\u5b9a\u4e49\u5de5\u4f5c\u6d41\u3002\u8fd9\u901a\u5e38\u4f1a\u51cf\u5c11\u4f60\u9700\u8981\u7f16\u5199\u7684\u4ee3\u7801\u91cf\u3002</li> <li>\u77ed\u671f\u8bb0\u5fc6\uff1a\u56fe API \u9700\u8981\u58f0\u660e\u4e00\u4e2a\u72b6\u6001\uff0c\u5e76\u53ef\u80fd\u9700\u8981\u5b9a\u4e49\u5f52\u7ea6\u5668\u6765\u7ba1\u7406\u5bf9\u56fe\u72b6\u6001\u7684\u66f4\u65b0\u3002<code>@entrypoint</code> \u548c <code>@tasks</code> \u4e0d\u9700\u8981\u663e\u5f0f\u7684\u72b6\u6001\u7ba1\u7406\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u72b6\u6001\u8303\u56f4\u9650\u5b9a\u4e8e\u51fd\u6570\uff0c\u5e76\u4e14\u4e0d\u5728\u51fd\u6570\u4e4b\u95f4\u5171\u4eab\u3002</li> <li>\u68c0\u67e5\u70b9\uff1a\u4e24\u4e2a API \u90fd\u751f\u6210\u548c\u4f7f\u7528\u68c0\u67e5\u70b9\u3002\u5728**\u56fe API** \u4e2d\uff0c\u6bcf\u4e2a\u8d85\u6b65\u4e4b\u540e\u90fd\u4f1a\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9\u3002\u5728**\u51fd\u6570\u5f0f API** \u4e2d\uff0c\u5f53\u6267\u884c\u4efb\u52a1\u65f6\uff0c\u5b83\u4eec\u7684\u7ed3\u679c\u5c06\u4fdd\u5b58\u5230\u4e0e\u7ed9\u5b9a\u5165\u53e3\u70b9\u5173\u8054\u7684\u73b0\u6709\u68c0\u67e5\u70b9\u4e2d\uff0c\u800c\u4e0d\u662f\u521b\u5efa\u65b0\u7684\u68c0\u67e5\u70b9\u3002</li> <li>\u53ef\u89c6\u5316\uff1a\u56fe API \u53ef\u4ee5\u8f7b\u677e\u5730\u5c06\u5de5\u4f5c\u6d41\u53ef\u89c6\u5316\u4e3a\u56fe\uff0c\u8fd9\u5bf9\u4e8e\u8c03\u8bd5\u3001\u7406\u89e3\u5de5\u4f5c\u6d41\u4ee5\u53ca\u4e0e\u4ed6\u4eba\u5206\u4eab\u5f88\u6709\u7528\u3002\u51fd\u6570\u5f0f API \u4e0d\u652f\u6301\u53ef\u89c6\u5316\uff0c\u56e0\u4e3a\u56fe\u662f\u5728\u8fd0\u884c\u65f6\u52a8\u6001\u751f\u6210\u7684\u3002</li> </ul>","boost":2},{"location":"concepts/functional_api/#_2","title":"\u793a\u4f8b","text":"<p>\u4e0b\u9762\u6211\u4eec\u6f14\u793a\u4e00\u4e2a\u7b80\u5355\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u5b83\u7f16\u5199\u4e00\u7bc7\u6587\u7ae0\u5e76\u4e2d\u65ad\u4ee5\u8bf7\u6c42\u4eba\u5de5\u5ba1\u67e5\u3002</p> Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.func import entrypoint, task\nfrom langgraph.types import interrupt\n\n@task\ndef write_essay(topic: str) -&gt; str:\n    \"\"\"Write an essay about the given topic.\"\"\"\n    time.sleep(1) # A placeholder for a long-running task.\n    return f\"An essay about topic: {topic}\"\n\n@entrypoint(checkpointer=InMemorySaver())\ndef workflow(topic: str) -&gt; dict:\n    \"\"\"A simple workflow that writes an essay and asks for a review.\"\"\"\n    essay = write_essay(\"cat\").result()\n    is_approved = interrupt({\n        # Any json-serializable payload provided to interrupt as argument.\n        # It will be surfaced on the client side as an Interrupt when streaming data\n        # from the workflow.\n        \"essay\": essay, # The essay we want reviewed.\n        # We can add any additional information that we need.\n        # For example, introduce a key called \"action\" with some instructions.\n        \"action\": \"Please approve/reject the essay\",\n    })\n\n    return {\n        \"essay\": essay, # The essay that was generated\n        \"is_approved\": is_approved, # Response from HIL\n    }\n</code></pre> JavaScript <pre><code>import { MemorySaver, entrypoint, task, interrupt } from \"@langchain/langgraph\";\n\nconst writeEssay = task(\"writeEssay\", async (topic: string) =&gt; {\n  // A placeholder for a long-running task.\n  await new Promise((resolve) =&gt; setTimeout(resolve, 1000));\n  return `An essay about topic: ${topic}`;\n});\n\nconst workflow = entrypoint(\n  { checkpointer: new MemorySaver(), name: \"workflow\" },\n  async (topic: string) =&gt; {\n    const essay = await writeEssay(topic);\n    const isApproved = interrupt({\n      // Any json-serializable payload provided to interrupt as argument.\n      // It will be surfaced on the client side as an Interrupt when streaming data\n      // from the workflow.\n      essay, // The essay we want reviewed.\n      // We can add any additional information that we need.\n      // For example, introduce a key called \"action\" with some instructions.\n      action: \"Please approve/reject the essay\",\n    });\n\n    return {\n      essay, // The essay that was generated\n      isApproved, // Response from HIL\n    };\n  }\n);\n</code></pre> \u8be6\u7ec6\u8bf4\u660e <p>\u6b64\u5de5\u4f5c\u6d41\u5c06\u7f16\u5199\u4e00\u7bc7\u5173\u4e8e\u4e3b\u9898 \"cat\" \u7684\u6587\u7ae0\uff0c\u7136\u540e\u6682\u505c\u4ee5\u83b7\u5f97\u4eba\u5de5\u5ba1\u67e5\u3002\u5de5\u4f5c\u6d41\u53ef\u4ee5\u65e0\u9650\u671f\u4e2d\u65ad\uff0c\u76f4\u5230\u63d0\u4f9b\u5ba1\u67e5\u3002</p> <p>\u5f53\u5de5\u4f5c\u6d41\u6062\u590d\u65f6\uff0c\u5b83\u4ece\u4e00\u5f00\u59cb\u6267\u884c\uff0c\u4f46\u56e0\u4e3a <code>writeEssay</code> \u4efb\u52a1\u7684\u7ed3\u679c\u5df2\u7ecf\u4fdd\u5b58\uff0c\u4efb\u52a1\u7ed3\u679c\u5c06\u4ece\u68c0\u67e5\u70b9\u52a0\u8f7d\uff0c\u800c\u4e0d\u662f\u91cd\u65b0\u8ba1\u7b97\u3002</p> Python <pre><code>import time\nimport uuid\nfrom langgraph.func import entrypoint, task\nfrom langgraph.types import interrupt\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n\n@task\ndef write_essay(topic: str) -&gt; str:\n    \"\"\"Write an essay about the given topic.\"\"\"\n    time.sleep(1)  # This is a placeholder for a long-running task.\n    return f\"An essay about topic: {topic}\"\n\n@entrypoint(checkpointer=InMemorySaver())\ndef workflow(topic: str) -&gt; dict:\n    \"\"\"A simple workflow that writes an essay and asks for a review.\"\"\"\n    essay = write_essay(\"cat\").result()\n    is_approved = interrupt(\n        {\n            # Any json-serializable payload provided to interrupt as argument.\n            # It will be surfaced on the client side as an Interrupt when streaming data\n            # from the workflow.\n            \"essay\": essay,  # The essay we want reviewed.\n            # We can add any additional information that we need.\n            # For example, introduce a key called \"action\" with some instructions.\n            \"action\": \"Please approve/reject the essay\",\n        }\n    )\n    return {\n        \"essay\": essay,  # The essay that was generated\n        \"is_approved\": is_approved,  # Response from HIL\n    }\n\n\nthread_id = str(uuid.uuid4())\nconfig = {\"configurable\": {\"thread_id\": thread_id}}\nfor item in workflow.stream(\"cat\", config):\n    print(item)\n# &gt; {'write_essay': 'An essay about topic: cat'}\n# &gt; {\n# &gt;     '__interrupt__': (\n# &gt;        Interrupt(\n# &gt;            value={\n# &gt;                'essay': 'An essay about topic: cat',\n# &gt;                'action': 'Please approve/reject the essay'\n# &gt;            },\n# &gt;            id='b9b2b9d788f482663ced6dc755c9e981'\n# &gt;        ),\n# &gt;    )\n# &gt; }\n</code></pre> <p>\u6587\u7ae0\u5df2\u7ecf\u7f16\u5199\u5b8c\u6210\uff0c\u51c6\u5907\u5ba1\u67e5\u3002\u4e00\u65e6\u63d0\u4f9b\u5ba1\u67e5\uff0c\u6211\u4eec\u53ef\u4ee5\u6062\u590d\u5de5\u4f5c\u6d41\uff1a</p> <pre><code>from langgraph.types import Command\n\n# Get review from a user (e.g., via a UI)\n# In this case, we're using a bool, but this can be any json-serializable value.\nhuman_review = True\n\nfor item in workflow.stream(Command(resume=human_review), config):\n    print(item)\n</code></pre> <pre><code>{'workflow': {'essay': 'An essay about topic: cat', 'is_approved': False}}\n</code></pre> <p>\u5de5\u4f5c\u6d41\u5df2\u5b8c\u6210\uff0c\u5ba1\u67e5\u5df2\u6dfb\u52a0\u5230\u6587\u7ae0\u4e2d\u3002</p> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { MemorySaver, entrypoint, task, interrupt } from \"@langchain/langgraph\";\n\nconst writeEssay = task(\"writeEssay\", async (topic: string) =&gt; {\n  // This is a placeholder for a long-running task.\n  await new Promise(resolve =&gt; setTimeout(resolve, 1000));\n  return `An essay about topic: ${topic}`;\n});\n\nconst workflow = entrypoint(\n  { checkpointer: new MemorySaver(), name: \"workflow\" },\n  async (topic: string) =&gt; {\n    const essay = await writeEssay(topic);\n    const isApproved = interrupt({\n      // Any json-serializable payload provided to interrupt as argument.\n      // It will be surfaced on the client side as an Interrupt when streaming data\n      // from the workflow.\n      essay, // The essay we want reviewed.\n      // We can add any additional information that we need.\n      // For example, introduce a key called \"action\" with some instructions.\n      action: \"Please approve/reject the essay\",\n    });\n\n    return {\n      essay, // The essay that was generated\n      isApproved, // Response from HIL\n    };\n  }\n);\n\nconst threadId = uuidv4();\n\nconst config = {\n  configurable: {\n    thread_id: threadId\n  }\n};\n\nfor await (const item of workflow.stream(\"cat\", config)) {\n  console.log(item);\n}\n</code></pre> <pre><code>{ writeEssay: 'An essay about topic: cat' }\n{\n  __interrupt__: [{\n    value: { essay: 'An essay about topic: cat', action: 'Please approve/reject the essay' },\n    resumable: true,\n    ns: ['workflow:f7b8508b-21c0-8b4c-5958-4e8de74d2684'],\n    when: 'during'\n  }]\n}\n</code></pre> <p>\u6587\u7ae0\u5df2\u7ecf\u7f16\u5199\u5b8c\u6210\uff0c\u51c6\u5907\u5ba1\u67e5\u3002\u4e00\u65e6\u63d0\u4f9b\u5ba1\u67e5\uff0c\u6211\u4eec\u53ef\u4ee5\u6062\u590d\u5de5\u4f5c\u6d41\uff1a</p> <pre><code>import { Command } from \"@langchain/langgraph\";\n\n// Get review from a user (e.g., via a UI)\n// In this case, we're using a bool, but this can be any json-serializable value.\nconst humanReview = true;\n\nfor await (const item of workflow.stream(new Command({ resume: humanReview }), config)) {\n  console.log(item);\n}\n</code></pre> <pre><code>{ workflow: { essay: 'An essay about topic: cat', isApproved: true } }\n</code></pre> <p>\u5de5\u4f5c\u6d41\u5df2\u5b8c\u6210\uff0c\u5ba1\u67e5\u5df2\u6dfb\u52a0\u5230\u6587\u7ae0\u4e2d\u3002</p>","boost":2},{"location":"concepts/functional_api/#_3","title":"\u5165\u53e3\u70b9","text":"Python <p>@[<code>@entrypoint</code>][entrypoint] \u88c5\u9970\u5668\u53ef\u7528\u4e8e\u4ece\u51fd\u6570\u521b\u5efa\u5de5\u4f5c\u6d41\u3002\u5b83\u5c01\u88c5\u5de5\u4f5c\u6d41\u903b\u8f91\u5e76\u7ba1\u7406\u6267\u884c\u6d41\uff0c\u5305\u62ec\u5904\u7406_\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1_\u548c\u4e2d\u65ad\u3002</p> JavaScript <p>@[<code>entrypoint</code>][] \u51fd\u6570\u53ef\u7528\u4e8e\u4ece\u51fd\u6570\u521b\u5efa\u5de5\u4f5c\u6d41\u3002\u5b83\u5c01\u88c5\u5de5\u4f5c\u6d41\u903b\u8f91\u5e76\u7ba1\u7406\u6267\u884c\u6d41\uff0c\u5305\u62ec\u5904\u7406_\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u4efb\u52a1_\u548c\u4e2d\u65ad\u3002</p>","boost":2},{"location":"concepts/functional_api/#_4","title":"\u5b9a\u4e49","text":"Python <p>\u901a\u8fc7\u4f7f\u7528 <code>@entrypoint</code> \u88c5\u9970\u5668\u88c5\u9970\u51fd\u6570\u6765\u5b9a\u4e49**\u5165\u53e3\u70b9**\u3002</p> <p>\u8be5\u51fd\u6570**\u5fc5\u987b\u63a5\u53d7\u5355\u4e2a\u4f4d\u7f6e\u53c2\u6570**\uff0c\u8be5\u53c2\u6570\u7528\u4f5c\u5de5\u4f5c\u6d41\u8f93\u5165\u3002\u5982\u679c\u9700\u8981\u4f20\u9012\u591a\u4e2a\u6570\u636e\u7247\u6bb5\uff0c\u8bf7\u4f7f\u7528\u5b57\u5178\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u8f93\u5165\u7c7b\u578b\u3002</p> <p>\u4f7f\u7528 <code>entrypoint</code> \u88c5\u9970\u51fd\u6570\u4f1a\u751f\u6210\u4e00\u4e2a @[<code>Pregel</code>][Pregel.stream] \u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u6709\u52a9\u4e8e\u7ba1\u7406\u5de5\u4f5c\u6d41\u7684\u6267\u884c\uff08\u4f8b\u5982\uff0c\u5904\u7406\u6d41\u5f0f\u4f20\u8f93\u3001\u6062\u590d\u548c\u68c0\u67e5\u70b9\uff09\u3002</p> <p>\u4f60\u901a\u5e38\u5e0c\u671b\u5c06**\u68c0\u67e5\u70b9\u5668**\u4f20\u9012\u7ed9 <code>@entrypoint</code> \u88c5\u9970\u5668\u4ee5\u542f\u7528\u6301\u4e45\u5316\u5e76\u4f7f\u7528**\u4eba\u673a\u534f\u540c**\u7b49\u529f\u80fd\u3002</p> \u540c\u6b65\u5f02\u6b65JavaScript <pre><code>from langgraph.func import entrypoint\n\n@entrypoint(checkpointer=checkpointer)\ndef my_workflow(some_input: dict) -&gt; int:\n    # some logic that may involve long-running tasks like API calls,\n    # and may be interrupted for human-in-the-loop.\n    ...\n    return result\n</code></pre> <pre><code>from langgraph.func import entrypoint\n\n@entrypoint(checkpointer=checkpointer)\nasync def my_workflow(some_input: dict) -&gt; int:\n    # some logic that may involve long-running tasks like API calls,\n    # and may be interrupted for human-in-the-loop\n    ...\n    return result\n</code></pre> <p>\u901a\u8fc7\u8c03\u7528 <code>entrypoint</code> \u51fd\u6570\u5e76\u4f20\u5165\u914d\u7f6e\u548c\u51fd\u6570\u6765\u5b9a\u4e49**\u5165\u53e3\u70b9**\u3002</p> <p>\u8be5\u51fd\u6570**\u5fc5\u987b\u63a5\u53d7\u5355\u4e2a\u4f4d\u7f6e\u53c2\u6570**\uff0c\u8be5\u53c2\u6570\u7528\u4f5c\u5de5\u4f5c\u6d41\u8f93\u5165\u3002\u5982\u679c\u9700\u8981\u4f20\u9012\u591a\u4e2a\u6570\u636e\u7247\u6bb5\uff0c\u8bf7\u4f7f\u7528\u5bf9\u8c61\u4f5c\u4e3a\u7b2c\u4e00\u4e2a\u53c2\u6570\u7684\u8f93\u5165\u7c7b\u578b\u3002</p> <p>\u4f7f\u7528\u51fd\u6570\u521b\u5efa\u5165\u53e3\u70b9\u4f1a\u751f\u6210\u4e00\u4e2a\u5de5\u4f5c\u6d41\u5b9e\u4f8b\uff0c\u8be5\u5b9e\u4f8b\u6709\u52a9\u4e8e\u7ba1\u7406\u5de5\u4f5c\u6d41\u7684\u6267\u884c\uff08\u4f8b\u5982\uff0c\u5904\u7406\u6d41\u5f0f\u4f20\u8f93\u3001\u6062\u590d\u548c\u68c0\u67e5\u70b9\uff09\u3002</p> <p>\u4f60\u901a\u5e38\u5e0c\u671b\u5c06**\u68c0\u67e5\u70b9\u5668**\u4f20\u9012\u7ed9 <code>entrypoint</code> \u51fd\u6570\u4ee5\u542f\u7528\u6301\u4e45\u5316\u5e76\u4f7f\u7528**\u4eba\u673a\u534f\u540c**\u7b49\u529f\u80fd\u3002</p> <pre><code>import { entrypoint } from \"@langchain/langgraph\";\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (someInput: Record&lt;string, any&gt;): Promise&lt;number&gt; =&gt; {\n    // some logic that may involve long-running tasks like API calls,\n    // and may be interrupted for human-in-the-loop\n    return result;\n  }\n);\n</code></pre> <p>\u5e8f\u5217\u5316</p> <p>\u5165\u53e3\u70b9\u7684**\u8f93\u5165**\u548c**\u8f93\u51fa**\u5fc5\u987b\u662f JSON \u53ef\u5e8f\u5217\u5316\u7684\uff0c\u4ee5\u652f\u6301\u68c0\u67e5\u70b9\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5e8f\u5217\u5316\u90e8\u5206\u3002</p> Python","boost":2},{"location":"concepts/functional_api/#_5","title":"\u53ef\u6ce8\u5165\u53c2\u6570","text":"<p>\u5728\u58f0\u660e <code>entrypoint</code> \u65f6\uff0c\u4f60\u53ef\u4ee5\u8bf7\u6c42\u8bbf\u95ee\u5c06\u5728\u8fd0\u884c\u65f6\u81ea\u52a8\u6ce8\u5165\u7684\u5176\u4ed6\u53c2\u6570\u3002\u8fd9\u4e9b\u53c2\u6570\u5305\u62ec\uff1a</p> \u53c2\u6570 \u63cf\u8ff0 previous \u8bbf\u95ee\u4e0e\u7ed9\u5b9a\u7ebf\u7a0b\u7684\u4e0a\u4e00\u4e2a <code>checkpoint</code> \u5173\u8054\u7684\u72b6\u6001\u3002\u8bf7\u53c2\u9605\u77ed\u671f\u8bb0\u5fc6\u3002 store [BaseStore][langgraph.store.base.BaseStore] \u7684\u5b9e\u4f8b\u3002\u5bf9\u957f\u671f\u8bb0\u5fc6\u5f88\u6709\u7528\u3002 writer \u7528\u4e8e\u5728\u4f7f\u7528 Async Python &lt; 3.11 \u65f6\u8bbf\u95ee StreamWriter\u3002\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4f7f\u7528\u51fd\u6570\u5f0f API \u8fdb\u884c\u6d41\u5f0f\u4f20\u8f93\u3002 config \u7528\u4e8e\u8bbf\u95ee\u8fd0\u884c\u65f6\u914d\u7f6e\u3002\u6709\u5173\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 RunnableConfig\u3002 <p>Important</p> <p>\u4f7f\u7528\u9002\u5f53\u7684\u540d\u79f0\u548c\u7c7b\u578b\u6ce8\u91ca\u58f0\u660e\u53c2\u6570\u3002</p> \u8bf7\u6c42\u53ef\u6ce8\u5165\u53c2\u6570 <pre><code>from langchain_core.runnables import RunnableConfig\nfrom langgraph.func import entrypoint\nfrom langgraph.store.base import BaseStore\nfrom langgraph.store.memory import InMemoryStore\n\nin_memory_store = InMemoryStore(...)  # An instance of InMemoryStore for long-term memory\n\n@entrypoint(\n    checkpointer=checkpointer,  # Specify the checkpointer\n    store=in_memory_store  # Specify the store\n)\ndef my_workflow(\n    some_input: dict,  # The input (e.g., passed via `invoke`)\n    *,\n    previous: Any = None, # For short-term memory\n    store: BaseStore,  # For long-term memory\n    writer: StreamWriter,  # For streaming custom data\n    config: RunnableConfig  # For accessing the configuration passed to the entrypoint\n) -&gt; ...:\n</code></pre>","boost":2},{"location":"concepts/functional_api/#_6","title":"\u6267\u884c","text":"Python <p>\u4f7f\u7528 <code>@entrypoint</code> \u4f1a\u4ea7\u751f\u4e00\u4e2a @[<code>Pregel</code>][Pregel.stream] \u5bf9\u8c61\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>invoke</code>\u3001<code>ainvoke</code>\u3001<code>stream</code> \u548c <code>astream</code> \u65b9\u6cd5\u6267\u884c\u3002</p> \u8c03\u7528\u5f02\u6b65\u8c03\u7528\u6d41\u5f0f\u4f20\u8f93\u5f02\u6b65\u6d41\u5f0f\u4f20\u8f93JavaScript <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\nmy_workflow.invoke(some_input, config)  # Wait for the result synchronously\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\nawait my_workflow.ainvoke(some_input, config)  # Await result asynchronously\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nfor chunk in my_workflow.stream(some_input, config):\n    print(chunk)\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nasync for chunk in my_workflow.astream(some_input, config):\n    print(chunk)\n</code></pre> <p>\u4f7f\u7528 <code>entrypoint</code> \u51fd\u6570\u5c06\u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u4f7f\u7528 <code>invoke</code> \u548c <code>stream</code> \u65b9\u6cd5\u6267\u884c\u7684\u5bf9\u8c61\u3002</p> \u8c03\u7528\u6d41\u5f0f\u4f20\u8f93 <pre><code>const config = {\n  configurable: {\n    thread_id: \"some_thread_id\"\n  }\n};\nawait myWorkflow.invoke(someInput, config); // Wait for the result\n</code></pre> <pre><code>const config = {\n  configurable: {\n    thread_id: \"some_thread_id\"\n  }\n};\n\nfor await (const chunk of myWorkflow.stream(someInput, config)) {\n  console.log(chunk);\n}\n</code></pre>","boost":2},{"location":"concepts/functional_api/#_7","title":"\u6062\u590d","text":"Python <p>\u5728 @interrupt \u540e\u6062\u590d\u6267\u884c\u53ef\u4ee5\u901a\u8fc7\u5c06**\u6062\u590d**\u503c\u4f20\u9012\u7ed9 @[Command] \u539f\u8bed\u6765\u5b8c\u6210\u3002</p> \u8c03\u7528\u5f02\u6b65\u8c03\u7528\u6d41\u5f0f\u4f20\u8f93\u5f02\u6b65\u6d41\u5f0f\u4f20\u8f93JavaScript <pre><code>from langgraph.types import Command\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nmy_workflow.invoke(Command(resume=some_resume_value), config)\n</code></pre> <pre><code>from langgraph.types import Command\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nawait my_workflow.ainvoke(Command(resume=some_resume_value), config)\n</code></pre> <pre><code>from langgraph.types import Command\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nfor chunk in my_workflow.stream(Command(resume=some_resume_value), config):\n    print(chunk)\n</code></pre> <pre><code>from langgraph.types import Command\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nasync for chunk in my_workflow.astream(Command(resume=some_resume_value), config):\n    print(chunk)\n</code></pre> <p>\u5728 @interrupt \u540e\u6062\u590d\u6267\u884c\u53ef\u4ee5\u901a\u8fc7\u5c06**\u6062\u590d**\u503c\u4f20\u9012\u7ed9 @[<code>Command</code>][] \u539f\u8bed\u6765\u5b8c\u6210\u3002</p> \u8c03\u7528\u6d41\u5f0f\u4f20\u8f93Python <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst config = {\n  configurable: {\n    thread_id: \"some_thread_id\"\n  }\n};\n\nawait myWorkflow.invoke(new Command({ resume: someResumeValue }), config);\n</code></pre> <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst config = {\n  configurable: {\n    thread_id: \"some_thread_id\"\n  }\n};\n\nconst stream = await myWorkflow.stream(\n  new Command({ resume: someResumableValue }),\n  config,\n)\n\nfor await (const chunk of stream) {\n  console.log(chunk);\n}\n</code></pre> <p>\u4ece\u9519\u8bef\u540e\u6062\u590d</p> <p>\u8981\u4ece\u9519\u8bef\u540e\u6062\u590d\uff0c\u8bf7\u4f7f\u7528 <code>None</code> \u548c\u76f8\u540c\u7684**\u7ebf\u7a0b ID**\uff08config\uff09\u8fd0\u884c <code>entrypoint</code>\u3002</p> <p>\u8fd9\u5047\u5b9a\u5e95\u5c42**\u9519\u8bef**\u5df2\u7ecf\u89e3\u51b3\uff0c\u6267\u884c\u53ef\u4ee5\u6210\u529f\u8fdb\u884c\u3002</p> \u8c03\u7528\u5f02\u6b65\u8c03\u7528\u6d41\u5f0f\u4f20\u8f93\u5f02\u6b65\u6d41\u5f0f\u4f20\u8f93JavaScript <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nmy_workflow.invoke(None, config)\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nawait my_workflow.ainvoke(None, config)\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nfor chunk in my_workflow.stream(None, config):\n    print(chunk)\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nasync for chunk in my_workflow.astream(None, config):\n    print(chunk)\n</code></pre> <p>\u4ece\u9519\u8bef\u540e\u6062\u590d</p> <p>\u8981\u4ece\u9519\u8bef\u540e\u6062\u590d\uff0c\u8bf7\u4f7f\u7528 <code>null</code> \u548c\u76f8\u540c\u7684**\u7ebf\u7a0b ID**\uff08config\uff09\u8fd0\u884c <code>entrypoint</code>\u3002</p> <p>\u8fd9\u5047\u5b9a\u5e95\u5c42**\u9519\u8bef**\u5df2\u7ecf\u89e3\u51b3\uff0c\u6267\u884c\u53ef\u4ee5\u6210\u529f\u8fdb\u884c\u3002</p> \u8c03\u7528\u6d41\u5f0f\u4f20\u8f93 <pre><code>const config = {\n  configurable: {\n    thread_id: \"some_thread_id\"\n  }\n};\n\nawait myWorkflow.invoke(null, config);\n</code></pre> <pre><code>const config = {\n  configurable: {\n    thread_id: \"some_thread_id\"\n  }\n};\n\nfor await (const chunk of myWorkflow.stream(null, config)) {\n  console.log(chunk);\n}\n</code></pre>","boost":2},{"location":"concepts/functional_api/#_8","title":"\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u5f53\u4f7f\u7528 <code>checkpointer</code> \u5b9a\u4e49 <code>entrypoint</code> \u65f6\uff0c\u5b83\u4f1a\u5728\u540c\u4e00**\u7ebf\u7a0b ID** \u4e0a\u7684\u8fde\u7eed\u8c03\u7528\u4e4b\u95f4\u5c06\u4fe1\u606f\u5b58\u50a8\u5728\u68c0\u67e5\u70b9\u4e2d\u3002</p> Python <p>\u8fd9\u5141\u8bb8\u4f7f\u7528 <code>previous</code> \u53c2\u6570\u8bbf\u95ee\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u72b6\u6001\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>previous</code> \u53c2\u6570\u662f\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>@entrypoint(checkpointer=checkpointer)\ndef my_workflow(number: int, *, previous: Any = None) -&gt; int:\n    previous = previous or 0\n    return number + previous\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread_id\"\n    }\n}\n\nmy_workflow.invoke(1, config)  # 1 (previous was None)\nmy_workflow.invoke(2, config)  # 3 (previous was 1 from the previous invocation)\n</code></pre> JavaScript <p>\u8fd9\u5141\u8bb8\u4f7f\u7528 <code>getPreviousState</code> \u51fd\u6570\u8bbf\u95ee\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u72b6\u6001\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>getPreviousState</code> \u51fd\u6570\u8fd4\u56de\u4e0a\u4e00\u6b21\u8c03\u7528\u7684\u8fd4\u56de\u503c\u3002</p> <pre><code>import { entrypoint, getPreviousState } from \"@langchain/langgraph\";\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (number: number) =&gt; {\n    const previous = getPreviousState&lt;number&gt;() ?? 0;\n    return number + previous;\n  }\n);\n\nconst config = {\n  configurable: {\n    thread_id: \"some_thread_id\",\n  },\n};\n\nawait myWorkflow.invoke(1, config); // 1 (previous was undefined)\nawait myWorkflow.invoke(2, config); // 3 (previous was 1 from the previous invocation)\n</code></pre>","boost":2},{"location":"concepts/functional_api/#entrypointfinal","title":"<code>entrypoint.final</code>","text":"Python <p>@[<code>entrypoint.final</code>][] \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u539f\u8bed\uff0c\u53ef\u4ee5\u4ece\u5165\u53e3\u70b9\u8fd4\u56de\uff0c\u5e76\u5141\u8bb8**\u89e3\u8026**\u5728**\u68c0\u67e5\u70b9\u4e2d\u4fdd\u5b58\u7684\u503c**\u4e0e**\u5165\u53e3\u70b9\u7684\u8fd4\u56de\u503c**\u3002</p> <p>\u7b2c\u4e00\u4e2a\u503c\u662f\u5165\u53e3\u70b9\u7684\u8fd4\u56de\u503c\uff0c\u7b2c\u4e8c\u4e2a\u503c\u662f\u5c06\u4fdd\u5b58\u5728\u68c0\u67e5\u70b9\u4e2d\u7684\u503c\u3002\u7c7b\u578b\u6ce8\u91ca\u662f <code>entrypoint.final[return_type, save_type]</code>\u3002</p> <pre><code>@entrypoint(checkpointer=checkpointer)\ndef my_workflow(number: int, *, previous: Any = None) -&gt; entrypoint.final[int, int]:\n    previous = previous or 0\n    # This will return the previous value to the caller, saving\n    # 2 * number to the checkpoint, which will be used in the next invocation\n    # for the `previous` parameter.\n    return entrypoint.final(value=previous, save=2 * number)\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"1\"\n    }\n}\n\nmy_workflow.invoke(3, config)  # 0 (previous was None)\nmy_workflow.invoke(1, config)  # 6 (previous was 3 * 2 from the previous invocation)\n</code></pre> JavaScript <p>@[<code>entrypoint.final</code>][] \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u539f\u8bed\uff0c\u53ef\u4ee5\u4ece\u5165\u53e3\u70b9\u8fd4\u56de\uff0c\u5e76\u5141\u8bb8**\u89e3\u8026**\u5728**\u68c0\u67e5\u70b9\u4e2d\u4fdd\u5b58\u7684\u503c**\u4e0e**\u5165\u53e3\u70b9\u7684\u8fd4\u56de\u503c**\u3002</p> <p>\u7b2c\u4e00\u4e2a\u503c\u662f\u5165\u53e3\u70b9\u7684\u8fd4\u56de\u503c\uff0c\u7b2c\u4e8c\u4e2a\u503c\u662f\u5c06\u4fdd\u5b58\u5728\u68c0\u67e5\u70b9\u4e2d\u7684\u503c\u3002</p> <pre><code>import { entrypoint, getPreviousState } from \"@langchain/langgraph\";\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (number: number) =&gt; {\n    const previous = getPreviousState&lt;number&gt;() ?? 0;\n    // This will return the previous value to the caller, saving\n    // 2 * number to the checkpoint, which will be used in the next invocation\n    // for the `previous` parameter.\n    return entrypoint.final({\n      value: previous,\n      save: 2 * number,\n    });\n  }\n);\n\nconst config = {\n  configurable: {\n    thread_id: \"1\",\n  },\n};\n\nawait myWorkflow.invoke(3, config); // 0 (previous was undefined)\nawait myWorkflow.invoke(1, config); // 6 (previous was 3 * 2 from the previous invocation)\n</code></pre>","boost":2},{"location":"concepts/functional_api/#_9","title":"\u4efb\u52a1","text":"<p>**\u4efb\u52a1**\u8868\u793a\u79bb\u6563\u7684\u5de5\u4f5c\u5355\u5143\uff0c\u4f8b\u5982 API \u8c03\u7528\u6216\u6570\u636e\u5904\u7406\u6b65\u9aa4\u3002\u5b83\u5177\u6709\u4e24\u4e2a\u5173\u952e\u7279\u5f81\uff1a</p> <ul> <li>\u5f02\u6b65\u6267\u884c\uff1a\u4efb\u52a1\u65e8\u5728\u5f02\u6b65\u6267\u884c\uff0c\u5141\u8bb8\u591a\u4e2a\u64cd\u4f5c\u5e76\u53d1\u8fd0\u884c\u800c\u4e0d\u4f1a\u963b\u585e\u3002</li> <li>\u68c0\u67e5\u70b9\uff1a\u4efb\u52a1\u7ed3\u679c\u4fdd\u5b58\u5230\u68c0\u67e5\u70b9\uff0c\u4ece\u800c\u53ef\u4ee5\u4ece\u6700\u540e\u4fdd\u5b58\u7684\u72b6\u6001\u6062\u590d\u5de5\u4f5c\u6d41\u3002\uff08\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6301\u4e45\u5316\uff09\u3002</li> </ul>","boost":2},{"location":"concepts/functional_api/#_10","title":"\u5b9a\u4e49","text":"Python <p>\u4f7f\u7528 <code>@task</code> \u88c5\u9970\u5668\u5b9a\u4e49\u4efb\u52a1\uff0c\u8be5\u88c5\u9970\u5668\u5305\u88c5\u5e38\u89c4 Python \u51fd\u6570\u3002</p> <pre><code>from langgraph.func import task\n\n@task()\ndef slow_computation(input_value):\n    # Simulate a long-running operation\n    ...\n    return result\n</code></pre> JavaScript <p>\u4f7f\u7528 <code>task</code> \u51fd\u6570\u5b9a\u4e49\u4efb\u52a1\uff0c\u8be5\u51fd\u6570\u5305\u88c5\u5e38\u89c4\u51fd\u6570\u3002</p> <pre><code>import { task } from \"@langchain/langgraph\";\n\nconst slowComputation = task(\"slowComputation\", async (inputValue: any) =&gt; {\n  // Simulate a long-running operation\n  return result;\n});\n</code></pre> <p>\u5e8f\u5217\u5316</p> <p>\u4efb\u52a1\u7684**\u8f93\u51fa**\u5fc5\u987b\u662f JSON \u53ef\u5e8f\u5217\u5316\u7684\uff0c\u4ee5\u652f\u6301\u68c0\u67e5\u70b9\u3002</p>","boost":2},{"location":"concepts/functional_api/#_11","title":"\u6267\u884c","text":"<p>\u4efb\u52a1**\u53ea\u80fd\u4ece**\u5165\u53e3\u70b9\u3001\u53e6\u4e00\u4e2a**\u4efb\u52a1**\u6216\u72b6\u6001\u56fe\u8282\u70b9\u5185\u8c03\u7528\u3002</p> <p>\u4efb\u52a1_\u4e0d\u80fd_\u76f4\u63a5\u4ece\u4e3b\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u8c03\u7528\u3002</p> Python <p>\u5f53\u4f60\u8c03\u7528**\u4efb\u52a1**\u65f6\uff0c\u5b83\u4f1a_\u7acb\u5373_\u8fd4\u56de\u4e00\u4e2a future \u5bf9\u8c61\u3002Future \u662f\u7a0d\u540e\u5c06\u53ef\u7528\u7684\u7ed3\u679c\u7684\u5360\u4f4d\u7b26\u3002</p> <p>\u8981\u83b7\u53d6**\u4efb\u52a1**\u7684\u7ed3\u679c\uff0c\u4f60\u53ef\u4ee5\u540c\u6b65\u7b49\u5f85\u5b83\uff08\u4f7f\u7528 <code>result()</code>\uff09\u6216\u5f02\u6b65\u7b49\u5f85\u5b83\uff08\u4f7f\u7528 <code>await</code>\uff09\u3002</p> \u540c\u6b65\u8c03\u7528\u5f02\u6b65\u8c03\u7528JavaScript <pre><code>@entrypoint(checkpointer=checkpointer)\ndef my_workflow(some_input: int) -&gt; int:\n    future = slow_computation(some_input)\n    return future.result()  # Wait for the result synchronously\n</code></pre> <pre><code>@entrypoint(checkpointer=checkpointer)\nasync def my_workflow(some_input: int) -&gt; int:\n    return await slow_computation(some_input)  # Await result asynchronously\n</code></pre> <p>\u5f53\u4f60\u8c03\u7528**\u4efb\u52a1**\u65f6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u53ef\u4ee5\u7b49\u5f85\u7684 Promise\u3002</p> <pre><code>const myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (someInput: number): Promise&lt;number&gt; =&gt; {\n    return await slowComputation(someInput);\n  }\n);\n</code></pre>","boost":2},{"location":"concepts/functional_api/#_12","title":"\u4f55\u65f6\u4f7f\u7528\u4efb\u52a1","text":"<p>**\u4efb\u52a1**\u5728\u4ee5\u4e0b\u573a\u666f\u4e2d\u5f88\u6709\u7528\uff1a</p> <ul> <li>\u68c0\u67e5\u70b9\uff1a\u5f53\u4f60\u9700\u8981\u5c06\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u64cd\u4f5c\u7684\u7ed3\u679c\u4fdd\u5b58\u5230\u68c0\u67e5\u70b9\u65f6\uff0c\u8fd9\u6837\u4f60\u5c31\u4e0d\u9700\u8981\u5728\u6062\u590d\u5de5\u4f5c\u6d41\u65f6\u91cd\u65b0\u8ba1\u7b97\u5b83\u3002</li> <li>\u4eba\u673a\u534f\u540c\uff1a\u5982\u679c\u4f60\u6b63\u5728\u6784\u5efa\u9700\u8981\u4eba\u5de5\u5e72\u9884\u7684\u5de5\u4f5c\u6d41\uff0c\u4f60\u5fc5\u987b\u4f7f\u7528**\u4efb\u52a1**\u6765\u5c01\u88c5\u4efb\u4f55\u968f\u673a\u6027\uff08\u4f8b\u5982 API \u8c03\u7528\uff09\uff0c\u4ee5\u786e\u4fdd\u5de5\u4f5c\u6d41\u53ef\u4ee5\u6b63\u786e\u6062\u590d\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u786e\u5b9a\u6027\u90e8\u5206\u3002</li> <li>\u5e76\u884c\u6267\u884c\uff1a\u5bf9\u4e8e I/O \u7ed1\u5b9a\u7684\u4efb\u52a1\uff0c**\u4efb\u52a1**\u53ef\u4ee5\u5e76\u884c\u6267\u884c\uff0c\u5141\u8bb8\u591a\u4e2a\u64cd\u4f5c\u5e76\u53d1\u8fd0\u884c\u800c\u4e0d\u4f1a\u963b\u585e\uff08\u4f8b\u5982\u8c03\u7528\u591a\u4e2a API\uff09\u3002</li> <li>\u53ef\u89c2\u5bdf\u6027\uff1a\u5c06\u64cd\u4f5c\u5305\u88c5\u5728**\u4efb\u52a1**\u4e2d\u63d0\u4f9b\u4e86\u4e00\u79cd\u8ddf\u8e2a\u5de5\u4f5c\u6d41\u8fdb\u5ea6\u548c\u4f7f\u7528 LangSmith \u76d1\u63a7\u5404\u4e2a\u64cd\u4f5c\u6267\u884c\u7684\u65b9\u6cd5\u3002</li> <li>\u53ef\u91cd\u8bd5\u5de5\u4f5c\uff1a\u5f53\u9700\u8981\u91cd\u8bd5\u5de5\u4f5c\u4ee5\u5904\u7406\u5931\u8d25\u6216\u4e0d\u4e00\u81f4\u6027\u65f6\uff0c**\u4efb\u52a1**\u63d0\u4f9b\u4e86\u4e00\u79cd\u5c01\u88c5\u548c\u7ba1\u7406\u91cd\u8bd5\u903b\u8f91\u7684\u65b9\u6cd5\u3002</li> </ul>","boost":2},{"location":"concepts/functional_api/#_13","title":"\u5e8f\u5217\u5316","text":"<p>LangGraph \u4e2d\u7684\u5e8f\u5217\u5316\u6709\u4e24\u4e2a\u5173\u952e\u65b9\u9762\uff1a</p> <ol> <li><code>entrypoint</code> \u8f93\u5165\u548c\u8f93\u51fa\u5fc5\u987b\u662f JSON \u53ef\u5e8f\u5217\u5316\u7684\u3002</li> <li><code>task</code> \u8f93\u51fa\u5fc5\u987b\u662f JSON \u53ef\u5e8f\u5217\u5316\u7684\u3002</li> </ol> Python <p>\u8fd9\u4e9b\u8981\u6c42\u5bf9\u4e8e\u542f\u7528\u68c0\u67e5\u70b9\u548c\u5de5\u4f5c\u6d41\u6062\u590d\u662f\u5fc5\u8981\u7684\u3002\u4f7f\u7528 Python \u539f\u8bed\uff0c\u5982\u5b57\u5178\u3001\u5217\u8868\u3001\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u548c\u5e03\u5c14\u503c\uff0c\u4ee5\u786e\u4fdd\u4f60\u7684\u8f93\u5165\u548c\u8f93\u51fa\u662f\u53ef\u5e8f\u5217\u5316\u7684\u3002</p> JavaScript <p>\u8fd9\u4e9b\u8981\u6c42\u5bf9\u4e8e\u542f\u7528\u68c0\u67e5\u70b9\u548c\u5de5\u4f5c\u6d41\u6062\u590d\u662f\u5fc5\u8981\u7684\u3002\u4f7f\u7528\u539f\u8bed\uff0c\u5982\u5bf9\u8c61\u3001\u6570\u7ec4\u3001\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u548c\u5e03\u5c14\u503c\uff0c\u4ee5\u786e\u4fdd\u4f60\u7684\u8f93\u5165\u548c\u8f93\u51fa\u662f\u53ef\u5e8f\u5217\u5316\u7684\u3002</p> <p>\u5e8f\u5217\u5316\u53ef\u786e\u4fdd\u5de5\u4f5c\u6d41\u72b6\u6001\uff08\u4f8b\u5982\u4efb\u52a1\u7ed3\u679c\u548c\u4e2d\u95f4\u503c\uff09\u53ef\u4ee5\u53ef\u9760\u5730\u4fdd\u5b58\u548c\u6062\u590d\u3002\u8fd9\u5bf9\u4e8e\u542f\u7528\u4eba\u673a\u534f\u540c\u4ea4\u4e92\u3001\u5bb9\u9519\u548c\u5e76\u884c\u6267\u884c\u81f3\u5173\u91cd\u8981\u3002</p> <p>\u5982\u679c\u5de5\u4f5c\u6d41\u914d\u7f6e\u4e86\u68c0\u67e5\u70b9\u5668\uff0c\u63d0\u4f9b\u4e0d\u53ef\u5e8f\u5217\u5316\u7684\u8f93\u5165\u6216\u8f93\u51fa\u5c06\u5bfc\u81f4\u8fd0\u884c\u65f6\u9519\u8bef\u3002</p>","boost":2},{"location":"concepts/functional_api/#_14","title":"\u786e\u5b9a\u6027","text":"<p>\u8981\u5229\u7528**\u4eba\u673a\u534f\u540c**\u7b49\u529f\u80fd\uff0c\u4efb\u4f55\u968f\u673a\u6027\u90fd\u5e94\u5c01\u88c5\u5728**\u4efb\u52a1**\u5185\u90e8\u3002\u8fd9\u4fdd\u8bc1\u4e86\u5f53\u6267\u884c\u6682\u505c\uff08\u4f8b\u5982\uff0c\u7528\u4e8e\u4eba\u673a\u534f\u540c\uff09\u7136\u540e\u6062\u590d\u65f6\uff0c\u5b83\u5c06\u9075\u5faa\u76f8\u540c\u7684_\u6b65\u9aa4\u5e8f\u5217_\uff0c\u5373\u4f7f**\u4efb\u52a1**\u7ed3\u679c\u662f\u975e\u786e\u5b9a\u6027\u7684\u3002</p> <p>LangGraph \u901a\u8fc7\u5728\u6267\u884c\u65f6\u6301\u4e45\u5316**\u4efb\u52a1**\u548c\u5b50\u56fe\u7ed3\u679c\u6765\u5b9e\u73b0\u6b64\u884c\u4e3a\u3002\u7cbe\u5fc3\u8bbe\u8ba1\u7684\u5de5\u4f5c\u6d41\u53ef\u786e\u4fdd\u6062\u590d\u6267\u884c\u9075\u5faa\u76f8\u540c\u7684_\u6b65\u9aa4\u5e8f\u5217_\uff0c\u4ece\u800c\u5141\u8bb8\u6b63\u786e\u68c0\u7d22\u5148\u524d\u8ba1\u7b97\u7684\u7ed3\u679c\u800c\u65e0\u9700\u91cd\u65b0\u6267\u884c\u5b83\u4eec\u3002\u8fd9\u5bf9\u4e8e\u957f\u65f6\u95f4\u8fd0\u884c\u7684**\u4efb\u52a1**\u6216\u5177\u6709\u975e\u786e\u5b9a\u6027\u7ed3\u679c\u7684**\u4efb\u52a1**\u7279\u522b\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u907f\u514d\u4e86\u91cd\u590d\u5148\u524d\u5b8c\u6210\u7684\u5de5\u4f5c\u5e76\u5141\u8bb8\u4ece\u672c\u8d28\u4e0a\u76f8\u540c\u7684\u4f4d\u7f6e\u6062\u590d\u3002</p> <p>\u867d\u7136\u5de5\u4f5c\u6d41\u7684\u4e0d\u540c\u8fd0\u884c\u53ef\u4ee5\u4ea7\u751f\u4e0d\u540c\u7684\u7ed3\u679c\uff0c\u4f46\u6062\u590d**\u7279\u5b9a**\u8fd0\u884c\u5e94\u59cb\u7ec8\u9075\u5faa\u76f8\u540c\u7684\u8bb0\u5f55\u6b65\u9aa4\u5e8f\u5217\u3002\u8fd9\u5141\u8bb8 LangGraph \u9ad8\u6548\u5730\u67e5\u627e\u5728\u56fe\u88ab\u4e2d\u65ad\u4e4b\u524d\u6267\u884c\u7684**\u4efb\u52a1**\u548c**\u5b50\u56fe**\u7ed3\u679c\uff0c\u5e76\u907f\u514d\u91cd\u65b0\u8ba1\u7b97\u5b83\u4eec\u3002</p>","boost":2},{"location":"concepts/functional_api/#_15","title":"\u5e42\u7b49\u6027","text":"<p>\u5e42\u7b49\u6027\u53ef\u786e\u4fdd\u591a\u6b21\u8fd0\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u4f1a\u4ea7\u751f\u76f8\u540c\u7684\u7ed3\u679c\u3002\u8fd9\u6709\u52a9\u4e8e\u9632\u6b62\u91cd\u590d\u7684 API \u8c03\u7528\u548c\u5197\u4f59\u5904\u7406\uff0c\u5982\u679c\u7531\u4e8e\u5931\u8d25\u800c\u91cd\u65b0\u8fd0\u884c\u67d0\u4e2a\u6b65\u9aa4\u3002\u59cb\u7ec8\u5c06 API \u8c03\u7528\u653e\u5728**\u4efb\u52a1**\u51fd\u6570\u5185\u4ee5\u8fdb\u884c\u68c0\u67e5\u70b9\uff0c\u5e76\u5c06\u5b83\u4eec\u8bbe\u8ba1\u4e3a\u5e42\u7b49\u7684\uff0c\u4ee5\u9632\u91cd\u65b0\u6267\u884c\u3002\u5982\u679c**\u4efb\u52a1**\u542f\u52a8\u4f46\u672a\u6210\u529f\u5b8c\u6210\uff0c\u5219\u53ef\u80fd\u53d1\u751f\u91cd\u65b0\u6267\u884c\u3002\u7136\u540e\uff0c\u5982\u679c\u5de5\u4f5c\u6d41\u6062\u590d\uff0c**\u4efb\u52a1**\u5c06\u518d\u6b21\u8fd0\u884c\u3002\u4f7f\u7528\u5e42\u7b49\u6027\u952e\u6216\u9a8c\u8bc1\u73b0\u6709\u7ed3\u679c\u4ee5\u907f\u514d\u91cd\u590d\u3002</p>","boost":2},{"location":"concepts/functional_api/#_16","title":"\u5e38\u89c1\u9677\u9631","text":"","boost":2},{"location":"concepts/functional_api/#_17","title":"\u5904\u7406\u526f\u4f5c\u7528","text":"<p>\u5c06\u526f\u4f5c\u7528\uff08\u4f8b\u5982\u5199\u5165\u6587\u4ef6\u3001\u53d1\u9001\u7535\u5b50\u90ae\u4ef6\uff09\u5c01\u88c5\u5728\u4efb\u52a1\u4e2d\uff0c\u4ee5\u786e\u4fdd\u5728\u6062\u590d\u5de5\u4f5c\u6d41\u65f6\u4e0d\u4f1a\u591a\u6b21\u6267\u884c\u5b83\u4eec\u3002</p> \u4e0d\u6b63\u786e\u6b63\u786e <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u526f\u4f5c\u7528\uff08\u5199\u5165\u6587\u4ef6\uff09\u76f4\u63a5\u5305\u542b\u5728\u5de5\u4f5c\u6d41\u4e2d\uff0c\u56e0\u6b64\u5728\u6062\u590d\u5de5\u4f5c\u6d41\u65f6\u5c06\u7b2c\u4e8c\u6b21\u6267\u884c\u3002</p> Python <pre><code>@entrypoint(checkpointer=checkpointer)\ndef my_workflow(inputs: dict) -&gt; int:\n    # This code will be executed a second time when resuming the workflow.\n    # Which is likely not what you want.\n    # highlight-next-line\n    with open(\"output.txt\", \"w\") as f:\n        # highlight-next-line\n        f.write(\"Side effect executed\")\n    value = interrupt(\"question\")\n    return value\n</code></pre> JavaScript <pre><code>import { entrypoint, interrupt } from \"@langchain/langgraph\";\nimport fs from \"fs\";\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow },\n  async (inputs: Record&lt;string, any&gt;) =&gt; {\n    // This code will be executed a second time when resuming the workflow.\n    // Which is likely not what you want.\n    fs.writeFileSync(\"output.txt\", \"Side effect executed\");\n    const value = interrupt(\"question\");\n    return value;\n  }\n);\n</code></pre> <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u526f\u4f5c\u7528\u5c01\u88c5\u5728\u4efb\u52a1\u4e2d\uff0c\u786e\u4fdd\u5728\u6062\u590d\u65f6\u4e00\u81f4\u6267\u884c\u3002</p> Python <pre><code>from langgraph.func import task\n\n# highlight-next-line\n@task\n# highlight-next-line\ndef write_to_file():\n    with open(\"output.txt\", \"w\") as f:\n        f.write(\"Side effect executed\")\n\n@entrypoint(checkpointer=checkpointer)\ndef my_workflow(inputs: dict) -&gt; int:\n    # The side effect is now encapsulated in a task.\n    write_to_file().result()\n    value = interrupt(\"question\")\n    return value\n</code></pre> JavaScript <pre><code>import { entrypoint, task, interrupt } from \"@langchain/langgraph\";\nimport * as fs from \"fs\";\n\nconst writeToFile = task(\"writeToFile\", async () =&gt; {\n  fs.writeFileSync(\"output.txt\", \"Side effect executed\");\n});\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (inputs: Record&lt;string, any&gt;) =&gt; {\n    // The side effect is now encapsulated in a task.\n    await writeToFile();\n    const value = interrupt(\"question\");\n    return value;\n  }\n);\n</code></pre>","boost":2},{"location":"concepts/functional_api/#_18","title":"\u975e\u786e\u5b9a\u6027\u63a7\u5236\u6d41","text":"<p>\u6bcf\u6b21\u53ef\u80fd\u4ea7\u751f\u4e0d\u540c\u7ed3\u679c\u7684\u64cd\u4f5c\uff08\u5982\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u6216\u968f\u673a\u6570\uff09\u5e94\u5c01\u88c5\u5728\u4efb\u52a1\u4e2d\uff0c\u4ee5\u786e\u4fdd\u5728\u6062\u590d\u65f6\u8fd4\u56de\u76f8\u540c\u7684\u7ed3\u679c\u3002</p> <ul> <li>\u5728\u4efb\u52a1\u4e2d\uff1a\u83b7\u53d6\u968f\u673a\u6570 (5) \u2192 \u4e2d\u65ad \u2192 \u6062\u590d \u2192 (\u518d\u6b21\u8fd4\u56de 5) \u2192 ...</li> <li>\u4e0d\u5728\u4efb\u52a1\u4e2d\uff1a\u83b7\u53d6\u968f\u673a\u6570 (5) \u2192 \u4e2d\u65ad \u2192 \u6062\u590d \u2192 \u83b7\u53d6\u65b0\u968f\u673a\u6570 (7) \u2192 ...</li> </ul> Python <p>\u8fd9\u5728\u4f7f\u7528\u5177\u6709\u591a\u4e2a\u4e2d\u65ad\u8c03\u7528\u7684**\u4eba\u673a\u534f\u540c**\u5de5\u4f5c\u6d41\u65f6\u7279\u522b\u91cd\u8981\u3002LangGraph \u4e3a\u6bcf\u4e2a\u4efb\u52a1/\u5165\u53e3\u70b9\u4fdd\u7559\u4e00\u4e2a\u6062\u590d\u503c\u5217\u8868\u3002\u5f53\u9047\u5230\u4e2d\u65ad\u65f6\uff0c\u5b83\u4e0e\u76f8\u5e94\u7684\u6062\u590d\u503c\u5339\u914d\u3002\u6b64\u5339\u914d\u4e25\u683c\u57fa\u4e8e**\u7d22\u5f15**\uff0c\u56e0\u6b64\u6062\u590d\u503c\u7684\u987a\u5e8f\u5e94\u4e0e\u4e2d\u65ad\u7684\u987a\u5e8f\u5339\u914d\u3002</p> JavaScript <p>\u8fd9\u5728\u4f7f\u7528\u5177\u6709\u591a\u4e2a\u4e2d\u65ad\u8c03\u7528\u7684**\u4eba\u673a\u534f\u540c**\u5de5\u4f5c\u6d41\u65f6\u7279\u522b\u91cd\u8981\u3002LangGraph \u4e3a\u6bcf\u4e2a\u4efb\u52a1/\u5165\u53e3\u70b9\u4fdd\u7559\u4e00\u4e2a\u6062\u590d\u503c\u5217\u8868\u3002\u5f53\u9047\u5230\u4e2d\u65ad\u65f6\uff0c\u5b83\u4e0e\u76f8\u5e94\u7684\u6062\u590d\u503c\u5339\u914d\u3002\u6b64\u5339\u914d\u4e25\u683c\u57fa\u4e8e**\u7d22\u5f15**\uff0c\u56e0\u6b64\u6062\u590d\u503c\u7684\u987a\u5e8f\u5e94\u4e0e\u4e2d\u65ad\u7684\u987a\u5e8f\u5339\u914d\u3002</p> <p>\u5982\u679c\u5728\u6062\u590d\u65f6\u672a\u4fdd\u6301\u6267\u884c\u987a\u5e8f\uff0c\u4e00\u4e2a <code>interrupt</code> \u8c03\u7528\u53ef\u80fd\u4f1a\u4e0e\u9519\u8bef\u7684 <code>resume</code> \u503c\u5339\u914d\uff0c\u4ece\u800c\u5bfc\u81f4\u4e0d\u6b63\u786e\u7684\u7ed3\u679c\u3002</p> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u9605\u8bfb\u786e\u5b9a\u6027\u90e8\u5206\u3002</p> \u4e0d\u6b63\u786e\u6b63\u786e <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5de5\u4f5c\u6d41\u4f7f\u7528\u5f53\u524d\u65f6\u95f4\u6765\u786e\u5b9a\u8981\u6267\u884c\u54ea\u4e2a\u4efb\u52a1\u3002\u8fd9\u662f\u975e\u786e\u5b9a\u6027\u7684\uff0c\u56e0\u4e3a\u5de5\u4f5c\u6d41\u7684\u7ed3\u679c\u53d6\u51b3\u4e8e\u6267\u884c\u65f6\u7684\u65f6\u95f4\u3002</p> Python <pre><code>from langgraph.func import entrypoint\n\n@entrypoint(checkpointer=checkpointer)\ndef my_workflow(inputs: dict) -&gt; int:\n    t0 = inputs[\"t0\"]\n    # highlight-next-line\n    t1 = time.time()\n\n    delta_t = t1 - t0\n\n    if delta_t &gt; 1:\n        result = slow_task(1).result()\n        value = interrupt(\"question\")\n    else:\n        result = slow_task(2).result()\n        value = interrupt(\"question\")\n\n    return {\n        \"result\": result,\n        \"value\": value\n    }\n</code></pre> JavaScript <pre><code>import { entrypoint, interrupt } from \"@langchain/langgraph\";\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (inputs: { t0: number }) =&gt; {\n    const t1 = Date.now();\n\n    const deltaT = t1 - inputs.t0;\n\n    if (deltaT &gt; 1000) {\n      const result = await slowTask(1);\n      const value = interrupt(\"question\");\n      return { result, value };\n    } else {\n      const result = await slowTask(2);\n      const value = interrupt(\"question\");\n      return { result, value };\n    }\n  }\n);\n</code></pre> Python <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5de5\u4f5c\u6d41\u4f7f\u7528\u8f93\u5165 <code>t0</code> \u6765\u786e\u5b9a\u8981\u6267\u884c\u54ea\u4e2a\u4efb\u52a1\u3002\u8fd9\u662f\u786e\u5b9a\u6027\u7684\uff0c\u56e0\u4e3a\u5de5\u4f5c\u6d41\u7684\u7ed3\u679c\u4ec5\u53d6\u51b3\u4e8e\u8f93\u5165\u3002</p> <pre><code>import time\n\nfrom langgraph.func import task\n\n# highlight-next-line\n@task\n# highlight-next-line\ndef get_time() -&gt; float:\n    return time.time()\n\n@entrypoint(checkpointer=checkpointer)\ndef my_workflow(inputs: dict) -&gt; int:\n    t0 = inputs[\"t0\"]\n    # highlight-next-line\n    t1 = get_time().result()\n\n    delta_t = t1 - t0\n\n    if delta_t &gt; 1:\n        result = slow_task(1).result()\n        value = interrupt(\"question\")\n    else:\n        result = slow_task(2).result()\n        value = interrupt(\"question\")\n\n    return {\n        \"result\": result,\n        \"value\": value\n    }\n</code></pre> JavaScript <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u5de5\u4f5c\u6d41\u4f7f\u7528\u8f93\u5165 <code>t0</code> \u6765\u786e\u5b9a\u8981\u6267\u884c\u54ea\u4e2a\u4efb\u52a1\u3002\u8fd9\u662f\u786e\u5b9a\u6027\u7684\uff0c\u56e0\u4e3a\u5de5\u4f5c\u6d41\u7684\u7ed3\u679c\u4ec5\u53d6\u51b3\u4e8e\u8f93\u5165\u3002</p> <pre><code>import { entrypoint, task, interrupt } from \"@langchain/langgraph\";\n\nconst getTime = task(\"getTime\", () =&gt; Date.now());\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (inputs: { t0: number }): Promise&lt;any&gt; =&gt; {\n    const t1 = await getTime();\n\n    const deltaT = t1 - inputs.t0;\n\n    if (deltaT &gt; 1000) {\n      const result = await slowTask(1);\n      const value = interrupt(\"question\");\n      return { result, value };\n    } else {\n      const result = await slowTask(2);\n      const value = interrupt(\"question\");\n      return { result, value };\n    }\n  }\n);\n</code></pre>","boost":2},{"location":"concepts/human_in_the_loop/","title":"\u4eba\u673a\u534f\u540c","text":"<p>\u8981\u5728\u667a\u80fd\u4ee3\u7406\u6216\u5de5\u4f5c\u6d41\u4e2d\u5ba1\u67e5\u3001\u7f16\u8f91\u548c\u6279\u51c6\u5de5\u5177\u8c03\u7528\uff0c\u4f7f\u7528 LangGraph \u7684\u4eba\u673a\u534f\u540c\u529f\u80fd\u5728\u5de5\u4f5c\u6d41\u7684\u4efb\u4f55\u70b9\u542f\u7528\u4eba\u7c7b\u5e72\u9884\u3002\u8fd9\u5728\u5927\u578b\u8bed\u8a00\u6a21\u578b (LLM) \u9a71\u52a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7279\u522b\u6709\u7528\uff0c\u5176\u4e2d\u6a21\u578b\u8f93\u51fa\u53ef\u80fd\u9700\u8981\u9a8c\u8bc1\u3001\u7ea0\u6b63\u6216\u989d\u5916\u7684\u4e0a\u4e0b\u6587\u3002</p> <p></p> <p>Tip</p> <p>\u6709\u5173\u5982\u4f55\u4f7f\u7528\u4eba\u673a\u534f\u540c\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u542f\u7528\u4eba\u7c7b\u5e72\u9884\u548c\u4f7f\u7528 Server API \u7684\u4eba\u673a\u534f\u540c\u3002</p>","tags":["human-in-the-loop","hil","overview"],"boost":2},{"location":"concepts/human_in_the_loop/#_2","title":"\u5173\u952e\u529f\u80fd","text":"<ul> <li> <p>\u6301\u4e45\u6267\u884c\u72b6\u6001\uff1a\u4e2d\u65ad\u4f7f\u7528 LangGraph \u7684\u6301\u4e45\u5316\u5c42\uff0c\u8be5\u5c42\u4fdd\u5b58\u56fe\u72b6\u6001\uff0c\u65e0\u9650\u671f\u6682\u505c\u56fe\u6267\u884c\u76f4\u5230\u4f60\u6062\u590d\u3002\u8fd9\u662f\u53ef\u80fd\u7684\uff0c\u56e0\u4e3a LangGraph \u5728\u6bcf\u4e2a\u6b65\u9aa4\u540e\u68c0\u67e5\u70b9\u56fe\u72b6\u6001\uff0c\u8fd9\u5141\u8bb8\u7cfb\u7edf\u6301\u4e45\u5316\u6267\u884c\u4e0a\u4e0b\u6587\u5e76\u7a0d\u540e\u6062\u590d\u5de5\u4f5c\u6d41\uff0c\u4ece\u5b83\u505c\u6b62\u7684\u5730\u65b9\u7ee7\u7eed\u3002\u8fd9\u652f\u6301\u5f02\u6b65\u4eba\u5de5\u5ba1\u67e5\u6216\u8f93\u5165\uff0c\u6ca1\u6709\u65f6\u95f4\u9650\u5236\u3002</p> <p>\u6709\u4e24\u79cd\u65b9\u5f0f\u6682\u505c\u56fe\uff1a</p> <ul> <li>\u52a8\u6001\u4e2d\u65ad\uff1a\u6839\u636e\u56fe\u7684\u5f53\u524d\u72b6\u6001\uff0c\u4f7f\u7528 <code>interrupt</code> \u4ece\u7279\u5b9a\u8282\u70b9\u5185\u90e8\u6682\u505c\u56fe\u3002</li> <li>\u9759\u6001\u4e2d\u65ad\uff1a\u4f7f\u7528 <code>interrupt_before</code> \u548c <code>interrupt_after</code> \u5728\u9884\u5b9a\u4e49\u7684\u70b9\u6682\u505c\u56fe\uff0c\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u6216\u4e4b\u540e\u3002</li> </ul> <p> \u4e00\u4e2a\u7531 3 \u4e2a\u987a\u5e8f\u6b65\u9aa4\u7ec4\u6210\u7684\u793a\u4f8b\u56fe\uff0c\u5728 step_3 \u4e4b\u524d\u6709\u4e00\u4e2a\u65ad\u70b9\u3002 </p> </li> <li> <p>\u7075\u6d3b\u7684\u96c6\u6210\u70b9\uff1a\u4eba\u673a\u534f\u540c\u903b\u8f91\u53ef\u4ee5\u5728\u5de5\u4f5c\u6d41\u7684\u4efb\u4f55\u70b9\u5f15\u5165\u3002\u8fd9\u5141\u8bb8\u6709\u9488\u5bf9\u6027\u7684\u4eba\u7c7b\u53c2\u4e0e\uff0c\u4f8b\u5982\u6279\u51c6 API \u8c03\u7528\u3001\u7ea0\u6b63\u8f93\u51fa\u6216\u6307\u5bfc\u5bf9\u8bdd\u3002</p> </li> </ul>","tags":["human-in-the-loop","hil","overview"],"boost":2},{"location":"concepts/human_in_the_loop/#_3","title":"\u6a21\u5f0f","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>interrupt</code> \u548c <code>Command</code> \u5b9e\u73b0\u56db\u79cd\u5178\u578b\u7684\u8bbe\u8ba1\u6a21\u5f0f\uff1a</p> <ul> <li>\u6279\u51c6\u6216\u62d2\u7edd\uff1a\u5728\u5173\u952e\u6b65\u9aa4\uff08\u5982 API \u8c03\u7528\uff09\u4e4b\u524d\u6682\u505c\u56fe\uff0c\u4ee5\u5ba1\u67e5\u548c\u6279\u51c6\u64cd\u4f5c\u3002\u5982\u679c\u64cd\u4f5c\u88ab\u62d2\u7edd\uff0c\u4f60\u53ef\u4ee5\u963b\u6b62\u56fe\u6267\u884c\u8be5\u6b65\u9aa4\uff0c\u5e76\u53ef\u80fd\u91c7\u53d6\u66ff\u4ee3\u64cd\u4f5c\u3002\u6b64\u6a21\u5f0f\u901a\u5e38\u6d89\u53ca\u6839\u636e\u4eba\u7c7b\u8f93\u5165\u8def\u7531\u56fe\u3002</li> <li>\u7f16\u8f91\u56fe\u72b6\u6001\uff1a\u6682\u505c\u56fe\u4ee5\u5ba1\u67e5\u548c\u7f16\u8f91\u56fe\u72b6\u6001\u3002\u8fd9\u5bf9\u4e8e\u7ea0\u6b63\u9519\u8bef\u6216\u4f7f\u7528\u5176\u4ed6\u4fe1\u606f\u66f4\u65b0\u72b6\u6001\u5f88\u6709\u7528\u3002\u6b64\u6a21\u5f0f\u901a\u5e38\u6d89\u53ca\u4f7f\u7528\u4eba\u7c7b\u8f93\u5165\u66f4\u65b0\u72b6\u6001\u3002</li> <li>\u5ba1\u67e5\u5de5\u5177\u8c03\u7528\uff1a\u6682\u505c\u56fe\u4ee5\u5728\u5de5\u5177\u6267\u884c\u4e4b\u524d\u5ba1\u67e5\u548c\u7f16\u8f91 LLM \u8bf7\u6c42\u7684\u5de5\u5177\u8c03\u7528\u3002</li> <li>\u9a8c\u8bc1\u4eba\u7c7b\u8f93\u5165\uff1a\u6682\u505c\u56fe\u4ee5\u5728\u7ee7\u7eed\u4e0b\u4e00\u6b65\u4e4b\u524d\u9a8c\u8bc1\u4eba\u7c7b\u8f93\u5165\u3002</li> </ul>","tags":["human-in-the-loop","hil","overview"],"boost":2},{"location":"concepts/langgraph_cli/","title":"LangGraph CLI","text":"<p>LangGraph CLI \u662f\u4e00\u4e2a\u591a\u5e73\u53f0\u547d\u4ee4\u884c\u5de5\u5177\uff0c\u7528\u4e8e\u5728\u672c\u5730\u6784\u5efa\u548c\u8fd0\u884c LangGraph API \u670d\u52a1\u5668\u3002\u751f\u6210\u7684\u670d\u52a1\u5668\u5305\u62ec\u56fe\u7684\u8fd0\u884c\u3001\u7ebf\u7a0b\u3001\u52a9\u624b\u7b49\u7684\u6240\u6709 API \u7aef\u70b9\uff0c\u4ee5\u53ca\u8fd0\u884c\u667a\u80fd\u4ee3\u7406\u6240\u9700\u7684\u5176\u4ed6\u670d\u52a1\uff0c\u5305\u62ec\u7528\u4e8e\u68c0\u67e5\u70b9\u548c\u5b58\u50a8\u7684\u6258\u7ba1\u6570\u636e\u5e93\u3002</p> Python","boost":2},{"location":"concepts/langgraph_cli/#_1","title":"\u5b89\u88c5","text":"<p>LangGraph CLI \u53ef\u4ee5\u901a\u8fc7 pip \u6216 Homebrew \u5b89\u88c5\uff1a</p> pipHomebrewJavaScript <pre><code>pip install langgraph-cli\n</code></pre> <pre><code>brew install langgraph-cli\n</code></pre>","boost":2},{"location":"concepts/langgraph_cli/#_2","title":"\u5b89\u88c5","text":"<p>LangGraph.js CLI \u53ef\u4ee5\u4ece NPM \u6ce8\u518c\u8868\u5b89\u88c5\uff1a</p> npxnpmyarnpnpmbun <pre><code>npx @langchain/langgraph-cli\n</code></pre> <pre><code>npm install @langchain/langgraph-cli\n</code></pre> <pre><code>yarn add @langchain/langgraph-cli\n</code></pre> <pre><code>pnpm add @langchain/langgraph-cli\n</code></pre> <pre><code>bun add @langchain/langgraph-cli\n</code></pre>","boost":2},{"location":"concepts/langgraph_cli/#_3","title":"\u547d\u4ee4","text":"<p>LangGraph CLI \u63d0\u4f9b\u4ee5\u4e0b\u6838\u5fc3\u529f\u80fd\uff1a</p> \u547d\u4ee4 \u63cf\u8ff0 <code>langgraph build</code> \u6784\u5efa\u53ef\u4ee5\u76f4\u63a5\u90e8\u7f72\u7684 LangGraph API \u670d\u52a1\u5668\u7684 Docker \u955c\u50cf\u3002 <code>langgraph dev</code> \u542f\u52a8\u4e00\u4e2a\u4e0d\u9700\u8981 Docker \u5b89\u88c5\u7684\u8f7b\u91cf\u7ea7\u5f00\u53d1\u670d\u52a1\u5668\u3002\u6b64\u670d\u52a1\u5668\u975e\u5e38\u9002\u5408\u5feb\u901f\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002 <code>langgraph dockerfile</code> \u751f\u6210\u4e00\u4e2a Dockerfile\uff0c\u53ef\u7528\u4e8e\u6784\u5efa\u955c\u50cf\u5e76\u90e8\u7f72 LangGraph API \u670d\u52a1\u5668\u5b9e\u4f8b\u3002\u5982\u679c\u4f60\u60f3\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49 dockerfile \u6216\u4ee5\u66f4\u81ea\u5b9a\u4e49\u7684\u65b9\u5f0f\u90e8\u7f72\uff0c\u8fd9\u5f88\u6709\u7528\u3002 <code>langgraph up</code> \u5728\u672c\u5730\u7684 docker \u5bb9\u5668\u4e2d\u542f\u52a8 LangGraph API \u670d\u52a1\u5668\u5b9e\u4f8b\u3002\u8fd9\u9700\u8981 docker \u670d\u52a1\u5668\u5728\u672c\u5730\u8fd0\u884c\u3002\u5b83\u8fd8\u9700\u8981\u7528\u4e8e\u672c\u5730\u5f00\u53d1\u7684 LangSmith API \u5bc6\u94a5\u6216\u7528\u4e8e\u751f\u4ea7\u4f7f\u7528\u7684\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002 <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 LangGraph CLI \u53c2\u8003\u3002</p>","boost":2},{"location":"concepts/langgraph_cloud/","title":"Cloud SaaS","text":"<p>\u8981\u90e8\u7f72 LangGraph Server\uff0c\u8bf7\u9075\u5faa\u5982\u4f55\u90e8\u7f72\u5230 Cloud SaaS \u7684\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/langgraph_cloud/#_1","title":"\u6982\u8ff0","text":"<p>Cloud SaaS \u90e8\u7f72\u9009\u9879\u662f\u4e00\u79cd\u5b8c\u5168\u6258\u7ba1\u7684\u90e8\u7f72\u6a21\u578b\uff0c\u6211\u4eec\u5728\u4e91\u4e2d\u7ba1\u7406\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u3002</p> \u63a7\u5236\u5e73\u9762 \u6570\u636e\u5e73\u9762 \u5b83\u662f\u4ec0\u4e48\uff1f <ul><li>\u7528\u4e8e\u521b\u5efa\u90e8\u7f72\u548c\u4fee\u8ba2\u7684\u63a7\u5236\u5e73\u9762 UI</li><li>\u7528\u4e8e\u521b\u5efa\u90e8\u7f72\u548c\u4fee\u8ba2\u7684\u63a7\u5236\u5e73\u9762 API</li></ul> <ul><li>\u7528\u4e8e\u534f\u8c03\u90e8\u7f72\u4e0e\u63a7\u5236\u5e73\u9762\u72b6\u6001\u7684\u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"</li><li>LangGraph \u670d\u52a1\u5668</li><li>Postgres\u3001Redis \u7b49</li></ul> \u5b83\u6258\u7ba1\u5728\u54ea\u91cc\uff1f LangChain \u7684\u4e91 LangChain \u7684\u4e91 \u8c01\u63d0\u4f9b\u548c\u7ba1\u7406\u5b83\uff1f LangChain LangChain","boost":2},{"location":"concepts/langgraph_cloud/#_2","title":"\u67b6\u6784","text":"","boost":2},{"location":"concepts/langgraph_components/","title":"Langgraph components","text":""},{"location":"concepts/langgraph_components/#_1","title":"\u7ec4\u4ef6","text":"<p>LangGraph Platform \u7531\u534f\u540c\u5de5\u4f5c\u7684\u7ec4\u4ef6\u7ec4\u6210\uff0c\u4ee5\u652f\u6301 LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u5f00\u53d1\u3001\u90e8\u7f72\u3001\u8c03\u8bd5\u548c\u76d1\u63a7\uff1a</p> <ul> <li>LangGraph Server\uff1a\u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u4e2a\u56fa\u5b9a\u7684 API \u548c\u67b6\u6784\uff0c\u5176\u4e2d\u5305\u542b\u4e86\u90e8\u7f72\u667a\u80fd\u4ee3\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u6700\u4f73\u5b9e\u8df5\uff0c\u4f7f\u4f60\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u903b\u8f91\uff0c\u800c\u4e0d\u662f\u5f00\u53d1\u670d\u52a1\u5668\u57fa\u7840\u8bbe\u65bd\u3002</li> <li>LangGraph CLI\uff1aLangGraph CLI \u662f\u4e00\u4e2a\u547d\u4ee4\u884c\u754c\u9762\uff0c\u53ef\u5e2e\u52a9\u4e0e\u672c\u5730 LangGraph \u4ea4\u4e92\u3002</li> <li>LangGraph Studio\uff1aLangGraph Studio \u662f\u4e00\u4e2a\u4e13\u4e1a\u7684 IDE\uff0c\u53ef\u4ee5\u8fde\u63a5\u5230 LangGraph Server\uff0c\u4ee5\u4fbf\u5728\u672c\u5730\u5bf9\u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u53ef\u89c6\u5316\u3001\u4ea4\u4e92\u548c\u8c03\u8bd5\u3002</li> <li>Python/JS SDK\uff1aPython/JS SDK \u63d0\u4f9b\u4e86\u4e00\u79cd\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u4e0e\u5df2\u90e8\u7f72\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ea4\u4e92\u7684\u65b9\u6cd5\u3002</li> <li>\u8fdc\u7a0b\u56fe\uff1aRemoteGraph \u5141\u8bb8\u4f60\u4e0e\u4efb\u4f55\u5df2\u90e8\u7f72\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\u8fdb\u884c\u4ea4\u4e92\uff0c\u5c31\u50cf\u5b83\u5728\u672c\u5730\u8fd0\u884c\u4e00\u6837\u3002</li> <li>LangGraph \u63a7\u5236\u5e73\u9762\uff1aLangGraph \u63a7\u5236\u5e73\u9762\u662f\u6307\u7528\u6237\u521b\u5efa\u548c\u66f4\u65b0 LangGraph \u670d\u52a1\u5668\u7684\u63a7\u5236\u5e73\u9762 UI\uff0c\u4ee5\u53ca\u652f\u6301 UI \u4f53\u9a8c\u7684\u63a7\u5236\u5e73\u9762 API\u3002</li> <li>LangGraph \u6570\u636e\u5e73\u9762\uff1aLangGraph \u6570\u636e\u5e73\u9762\u662f\u6307 LangGraph \u670d\u52a1\u5668\u3001\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u76f8\u5e94\u57fa\u7840\u8bbe\u65bd\uff0c\u4ee5\u53ca\u6301\u7eed\u8f6e\u8be2\u6765\u81ea LangGraph \u63a7\u5236\u5e73\u9762\u7684\u66f4\u65b0\u7684\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul> <p></p>"},{"location":"concepts/langgraph_control_plane/","title":"LangGraph \u63a7\u5236\u5e73\u9762","text":"<p>\u672f\u8bed\"\u63a7\u5236\u5e73\u9762\"\u5e7f\u6cdb\u7528\u4e8e\u6307\u7528\u6237\u521b\u5efa\u548c\u66f4\u65b0 LangGraph \u670d\u52a1\u5668\uff08\u90e8\u7f72\uff09\u7684\u63a7\u5236\u5e73\u9762 UI\uff0c\u4ee5\u53ca\u652f\u6301 UI \u4f53\u9a8c\u7684\u63a7\u5236\u5e73\u9762 API\u3002</p> <p>\u5f53\u7528\u6237\u901a\u8fc7\u63a7\u5236\u5e73\u9762 UI \u8fdb\u884c\u66f4\u65b0\u65f6\uff0c\u66f4\u65b0\u5c06\u5b58\u50a8\u5728\u63a7\u5236\u5e73\u9762\u72b6\u6001\u4e2d\u3002LangGraph \u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7\u8c03\u7528\u63a7\u5236\u5e73\u9762 API \u6765\u8f6e\u8be2\u8fd9\u4e9b\u66f4\u65b0\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#ui","title":"\u63a7\u5236\u5e73\u9762 UI","text":"<p>\u4ece\u63a7\u5236\u5e73\u9762 UI\uff0c\u4f60\u53ef\u4ee5\uff1a</p> <ul> <li>\u67e5\u770b\u672a\u5b8c\u6210\u90e8\u7f72\u7684\u5217\u8868\u3002</li> <li>\u67e5\u770b\u5355\u4e2a\u90e8\u7f72\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> <li>\u521b\u5efa\u65b0\u90e8\u7f72\u3002</li> <li>\u66f4\u65b0\u90e8\u7f72\u3002</li> <li>\u66f4\u65b0\u90e8\u7f72\u7684\u73af\u5883\u53d8\u91cf\u3002</li> <li>\u67e5\u770b\u90e8\u7f72\u7684\u6784\u5efa\u548c\u670d\u52a1\u5668\u65e5\u5fd7\u3002</li> <li>\u67e5\u770b\u90e8\u7f72\u6307\u6807\uff0c\u4f8b\u5982 CPU \u548c\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002</li> <li>\u5220\u9664\u90e8\u7f72\u3002</li> </ul> <p>\u63a7\u5236\u5e73\u9762 UI \u5d4c\u5165\u5728 LangSmith \u4e2d\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#api","title":"\u63a7\u5236\u5e73\u9762 API","text":"<p>\u672c\u8282\u63cf\u8ff0\u63a7\u5236\u5e73\u9762 API \u7684\u6570\u636e\u6a21\u578b\u3002\u8be5 API \u7528\u4e8e\u521b\u5efa\u3001\u66f4\u65b0\u548c\u5220\u9664\u90e8\u7f72\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u63a7\u5236\u5e73\u9762 API \u53c2\u8003\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_1","title":"\u90e8\u7f72","text":"<p>\u90e8\u7f72\u662f LangGraph \u670d\u52a1\u5668\u7684\u5b9e\u4f8b\u3002\u5355\u4e2a\u90e8\u7f72\u53ef\u4ee5\u6709\u8bb8\u591a\u4fee\u8ba2\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_2","title":"\u4fee\u8ba2","text":"<p>\u4fee\u8ba2\u662f\u90e8\u7f72\u7684\u8fed\u4ee3\u3002\u521b\u5efa\u65b0\u90e8\u7f72\u65f6\uff0c\u4f1a\u81ea\u52a8\u521b\u5efa\u521d\u59cb\u4fee\u8ba2\u3002\u8981\u90e8\u7f72\u4ee3\u7801\u66f4\u6539\u6216\u66f4\u65b0\u90e8\u7f72\u7684\u5bc6\u94a5\uff0c\u5fc5\u987b\u521b\u5efa\u65b0\u4fee\u8ba2\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_3","title":"\u63a7\u5236\u5e73\u9762\u529f\u80fd","text":"<p>\u672c\u8282\u63cf\u8ff0\u63a7\u5236\u5e73\u9762\u7684\u5404\u79cd\u529f\u80fd\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_4","title":"\u90e8\u7f72\u7c7b\u578b","text":"<p>\u4e3a\u7b80\u5355\u8d77\u89c1\uff0c\u63a7\u5236\u5e73\u9762\u63d0\u4f9b\u4e86\u4e24\u79cd\u5177\u6709\u4e0d\u540c\u8d44\u6e90\u5206\u914d\u7684\u90e8\u7f72\u7c7b\u578b\uff1a<code>\u5f00\u53d1\u7248</code>\u548c<code>\u751f\u4ea7\u7248</code>\u3002</p> \u90e8\u7f72\u7c7b\u578b CPU/\u5185\u5b58 \u6269\u5c55 \u6570\u636e\u5e93 \u5f00\u53d1\u7248 1 CPU\uff0c1 GB RAM \u6700\u591a 1 \u4e2a\u526f\u672c 10 GB \u78c1\u76d8\uff0c\u65e0\u5907\u4efd \u751f\u4ea7\u7248 2 CPU\uff0c2 GB RAM \u6700\u591a 10 \u4e2a\u526f\u672c \u81ea\u52a8\u6269\u5c55\u78c1\u76d8\uff0c\u81ea\u52a8\u5907\u4efd\uff0c\u9ad8\u53ef\u7528\u6027\uff08\u591a\u533a\u57df\u914d\u7f6e\uff09 <p>CPU \u548c\u5185\u5b58\u8d44\u6e90\u662f\u6bcf\u4e2a\u526f\u672c\u7684\u8d44\u6e90\u3002</p> <p>\u4e0d\u53ef\u53d8\u7684\u90e8\u7f72\u7c7b\u578b</p> <p>\u90e8\u7f72\u521b\u5efa\u540e\uff0c\u90e8\u7f72\u7c7b\u578b\u65e0\u6cd5\u66f4\u6539\u3002</p> <p>\u81ea\u6258\u7ba1\u90e8\u7f72</p> <p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u7684\u8d44\u6e90\u53ef\u4ee5\u5b8c\u5168\u81ea\u5b9a\u4e49\u3002\u90e8\u7f72\u7c7b\u578b\u4ec5\u9002\u7528\u4e8e Cloud SaaS \u90e8\u7f72\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_5","title":"\u751f\u4ea7\u7248","text":"<p><code>\u751f\u4ea7\u7248</code>\u7c7b\u578b\u90e8\u7f72\u9002\u7528\u4e8e\"\u751f\u4ea7\"\u5de5\u4f5c\u8d1f\u8f7d\u3002\u4f8b\u5982\uff0c\u4e3a\u5173\u952e\u8def\u5f84\u4e2d\u9762\u5411\u5ba2\u6237\u7684\u5e94\u7528\u7a0b\u5e8f\u9009\u62e9<code>\u751f\u4ea7\u7248</code>\u3002</p> <p>\u6839\u636e\u7528\u4f8b\u548c\u5bb9\u91cf\u9650\u5236\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u624b\u52a8\u589e\u52a0<code>\u751f\u4ea7\u7248</code>\u7c7b\u578b\u90e8\u7f72\u7684\u8d44\u6e90\u3002\u8bf7\u8054\u7cfb support@langchain.dev \u4ee5\u8bf7\u6c42\u589e\u52a0\u8d44\u6e90\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_6","title":"\u5f00\u53d1\u7248","text":"<p><code>\u5f00\u53d1\u7248</code>\u7c7b\u578b\u90e8\u7f72\u9002\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\u3002\u4f8b\u5982\uff0c\u4e3a\u5185\u90e8\u6d4b\u8bd5\u73af\u5883\u9009\u62e9<code>\u5f00\u53d1\u7248</code>\u3002<code>\u5f00\u53d1\u7248</code>\u7c7b\u578b\u90e8\u7f72\u4e0d\u9002\u7528\u4e8e\"\u751f\u4ea7\"\u5de5\u4f5c\u8d1f\u8f7d\u3002</p> <p>\u53ef\u62a2\u5360\u7684\u8ba1\u7b97\u57fa\u7840\u8bbe\u65bd</p> <p><code>\u5f00\u53d1\u7248</code>\u7c7b\u578b\u90e8\u7f72\uff08API \u670d\u52a1\u5668\u3001\u961f\u5217\u670d\u52a1\u5668\u548c\u6570\u636e\u5e93\uff09\u5728\u53ef\u62a2\u5360\u7684\u8ba1\u7b97\u57fa\u7840\u8bbe\u65bd\u4e0a\u63d0\u4f9b\u3002\u8fd9\u610f\u5473\u7740\u8ba1\u7b97\u57fa\u7840\u8bbe\u65bd**\u53ef\u80fd\u968f\u65f6\u7ec8\u6b62\u800c\u4e0d\u53e6\u884c\u901a\u77e5**\u3002\u8fd9\u53ef\u80fd\u5bfc\u81f4\u95f4\u6b47\u6027...</p> <pre><code>- Redis \u8fde\u63a5\u8d85\u65f6/\u9519\u8bef\n- Postgres \u8fde\u63a5\u8d85\u65f6/\u9519\u8bef\n- \u5931\u8d25\u6216\u91cd\u8bd5\u7684\u540e\u53f0\u8fd0\u884c\n\n\u8fd9\u79cd\u884c\u4e3a\u662f\u9884\u671f\u7684\u3002\u53ef\u62a2\u5360\u7684\u8ba1\u7b97\u57fa\u7840\u8bbe\u65bd**\u663e\u8457\u964d\u4f4e\u4e86\u63d0\u4f9b`\u5f00\u53d1\u7248`\u7c7b\u578b\u90e8\u7f72\u7684\u6210\u672c**\u3002\u6309\u8bbe\u8ba1\uff0cLangGraph \u670d\u52a1\u5668\u5177\u6709\u5bb9\u9519\u80fd\u529b\u3002\u5b9e\u73b0\u5c06\u81ea\u52a8\u5c1d\u8bd5\u4ece Redis/Postgres \u8fde\u63a5\u9519\u8bef\u4e2d\u6062\u590d\u5e76\u91cd\u8bd5\u5931\u8d25\u7684\u540e\u53f0\u8fd0\u884c\u3002\n\n`\u751f\u4ea7\u7248`\u7c7b\u578b\u90e8\u7f72\u5728\u6301\u4e45\u8ba1\u7b97\u57fa\u7840\u8bbe\u65bd\u4e0a\u63d0\u4f9b\uff0c\u800c\u4e0d\u662f\u53ef\u62a2\u5360\u7684\u8ba1\u7b97\u57fa\u7840\u8bbe\u65bd\u3002\n</code></pre> <p>\u6839\u636e\u7528\u4f8b\u548c\u5bb9\u91cf\u9650\u5236\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u624b\u52a8\u589e\u52a0<code>\u5f00\u53d1\u7248</code>\u7c7b\u578b\u90e8\u7f72\u7684\u6570\u636e\u5e93\u78c1\u76d8\u5927\u5c0f\u3002\u5bf9\u4e8e\u5927\u591a\u6570\u7528\u4f8b\uff0c\u5e94\u914d\u7f6e TTL \u6765\u7ba1\u7406\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\u3002\u8bf7\u8054\u7cfb support@langchain.dev \u4ee5\u8bf7\u6c42\u589e\u52a0\u8d44\u6e90\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_7","title":"\u6570\u636e\u5e93\u63d0\u4f9b","text":"<p>\u63a7\u5236\u5e73\u9762\u548c LangGraph \u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f\u534f\u8c03\u4ee5\u81ea\u52a8\u4e3a\u6bcf\u4e2a\u90e8\u7f72\u521b\u5efa Postgres \u6570\u636e\u5e93\u3002\u8be5\u6570\u636e\u5e93\u7528\u4f5c\u90e8\u7f72\u7684\u6301\u4e45\u5316\u5c42\u3002</p> <p>\u5728\u5b9e\u73b0 LangGraph \u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5f00\u53d1\u4eba\u5458\u4e0d\u9700\u8981\u914d\u7f6e\u68c0\u67e5\u70b9\u5668\u3002\u76f8\u53cd\uff0c\u68c0\u67e5\u70b9\u5668\u4f1a\u81ea\u52a8\u4e3a\u56fe\u914d\u7f6e\u3002\u4e3a\u56fe\u914d\u7f6e\u7684\u4efb\u4f55\u68c0\u67e5\u70b9\u5668\u90fd\u5c06\u88ab\u81ea\u52a8\u914d\u7f6e\u7684\u68c0\u67e5\u70b9\u5668\u66ff\u6362\u3002</p> <p>\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u6570\u636e\u5e93\u3002\u5bf9\u6570\u636e\u5e93\u7684\u6240\u6709\u8bbf\u95ee\u90fd\u901a\u8fc7 LangGraph \u670d\u52a1\u5668\u8fdb\u884c\u3002</p> <p>\u5728\u90e8\u7f72\u672c\u8eab\u88ab\u5220\u9664\u4e4b\u524d\uff0c\u6570\u636e\u5e93\u6c38\u8fdc\u4e0d\u4f1a\u88ab\u5220\u9664\u3002</p> <p>Info</p> <p>\u53ef\u4ee5\u4e3a\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u914d\u7f6e\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_8","title":"\u5f02\u6b65\u90e8\u7f72","text":"<p>\u90e8\u7f72\u548c\u4fee\u8ba2\u7684\u57fa\u7840\u8bbe\u65bd\u662f\u5f02\u6b65\u63d0\u4f9b\u548c\u90e8\u7f72\u7684\u3002\u5b83\u4eec\u4e0d\u4f1a\u5728\u63d0\u4ea4\u540e\u7acb\u5373\u90e8\u7f72\u3002\u76ee\u524d\uff0c\u90e8\u7f72\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\u7684\u65f6\u95f4\u3002</p> <ul> <li>\u521b\u5efa\u65b0\u90e8\u7f72\u65f6\uff0c\u5c06\u4e3a\u90e8\u7f72\u521b\u5efa\u65b0\u6570\u636e\u5e93\u3002\u6570\u636e\u5e93\u521b\u5efa\u662f\u4e00\u6b21\u6027\u6b65\u9aa4\u3002\u6b64\u6b65\u9aa4\u5bfc\u81f4\u90e8\u7f72\u7684\u521d\u59cb\u4fee\u8ba2\u7684\u90e8\u7f72\u65f6\u95f4\u66f4\u957f\u3002</li> <li>\u4e3a\u90e8\u7f72\u521b\u5efa\u540e\u7eed\u4fee\u8ba2\u65f6\uff0c\u6ca1\u6709\u6570\u636e\u5e93\u521b\u5efa\u6b65\u9aa4\u3002\u4e0e\u521d\u59cb\u4fee\u8ba2\u7684\u90e8\u7f72\u65f6\u95f4\u76f8\u6bd4\uff0c\u540e\u7eed\u4fee\u8ba2\u7684\u90e8\u7f72\u65f6\u95f4\u8981\u5feb\u5f97\u591a\u3002</li> <li>\u6bcf\u4e2a\u4fee\u8ba2\u7684\u90e8\u7f72\u8fc7\u7a0b\u5305\u542b\u4e00\u4e2a\u6784\u5efa\u6b65\u9aa4\uff0c\u53ef\u80fd\u9700\u8981\u51e0\u5206\u949f\u7684\u65f6\u95f4\u3002</li> </ul> <p>\u63a7\u5236\u5e73\u9762\u548c LangGraph \u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f\u534f\u8c03\u4ee5\u5b9e\u73b0\u5f02\u6b65\u90e8\u7f72\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#_9","title":"\u76d1\u63a7","text":"<p>\u90e8\u7f72\u51c6\u5907\u5c31\u7eea\u540e\uff0c\u63a7\u5236\u5e73\u9762\u4f1a\u76d1\u63a7\u90e8\u7f72\u5e76\u8bb0\u5f55\u5404\u79cd\u6307\u6807\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u90e8\u7f72\u7684 CPU \u548c\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u3002</li> <li>\u5bb9\u5668\u91cd\u542f\u6b21\u6570\u3002</li> <li>\u526f\u672c\u6570\u91cf\uff08\u8fd9\u5c06\u968f\u7740\u81ea\u52a8\u6269\u5c55\u800c\u589e\u52a0\uff09\u3002</li> <li>Postgres CPU\u3001\u5185\u5b58\u4f7f\u7528\u60c5\u51b5\u548c\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5\u3002</li> <li>LangGraph \u670d\u52a1\u5668\u961f\u5217\u5f85\u5904\u7406/\u6d3b\u52a8\u8fd0\u884c\u8ba1\u6570\u3002</li> <li>LangGraph \u670d\u52a1\u5668 API \u6210\u529f\u54cd\u5e94\u8ba1\u6570\u3001\u9519\u8bef\u54cd\u5e94\u8ba1\u6570\u548c\u5ef6\u8fdf\u3002</li> </ul> <p>\u8fd9\u4e9b\u6307\u6807\u5728\u63a7\u5236\u5e73\u9762 UI \u4e2d\u663e\u793a\u4e3a\u56fe\u8868\u3002</p>","boost":2},{"location":"concepts/langgraph_control_plane/#langsmith","title":"LangSmith \u96c6\u6210","text":"<p>\u4e3a\u6bcf\u4e2a\u90e8\u7f72\u81ea\u52a8\u521b\u5efa LangSmith \u8ddf\u8e2a\u9879\u76ee\u548c LangSmith API \u5bc6\u94a5\u3002\u90e8\u7f72\u4f7f\u7528\u8be5 API \u5bc6\u94a5\u81ea\u52a8\u5c06\u8ddf\u8e2a\u53d1\u9001\u5230 LangSmith\u3002</p> <ul> <li>\u8ddf\u8e2a\u9879\u76ee\u4e0e\u90e8\u7f72\u540c\u540d\u3002</li> <li>API \u5bc6\u94a5\u7684\u63cf\u8ff0\u4e3a <code>LangGraph Platform: &lt;deployment_name&gt;</code>\u3002</li> <li>API \u5bc6\u94a5\u6c38\u8fdc\u4e0d\u4f1a\u663e\u793a\uff0c\u4e5f\u65e0\u6cd5\u624b\u52a8\u5220\u9664\u3002</li> <li>\u521b\u5efa\u90e8\u7f72\u65f6\uff0c\u4e0d\u9700\u8981\u6307\u5b9a <code>LANGCHAIN_TRACING</code> \u548c <code>LANGSMITH_API_KEY</code>/<code>LANGCHAIN_API_KEY</code> \u73af\u5883\u53d8\u91cf\uff1b\u5b83\u4eec\u7531\u63a7\u5236\u5e73\u9762\u81ea\u52a8\u8bbe\u7f6e\u3002</li> </ul> <p>\u5220\u9664\u90e8\u7f72\u65f6\uff0c\u8ddf\u8e2a\u548c\u8ddf\u8e2a\u9879\u76ee\u4e0d\u4f1a\u88ab\u5220\u9664\u3002\u4f46\u662f\uff0c\u5220\u9664\u90e8\u7f72\u65f6\u5c06\u5220\u9664 API\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/","title":"LangGraph \u6570\u636e\u5e73\u9762","text":"<p>\u672f\u8bed\"\u6570\u636e\u5e73\u9762\"\u5e7f\u6cdb\u7528\u4e8e\u6307 LangGraph \u670d\u52a1\u5668\uff08\u90e8\u7f72\uff09\u3001\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u76f8\u5e94\u57fa\u7840\u8bbe\u65bd\uff0c\u4ee5\u53ca\u6301\u7eed\u8f6e\u8be2\u6765\u81ea LangGraph \u63a7\u5236\u5e73\u9762\u7684\u66f4\u65b0\u7684\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#_1","title":"\u670d\u52a1\u5668\u57fa\u7840\u8bbe\u65bd","text":"<p>\u9664\u4e86 LangGraph \u670d\u52a1\u5668\u672c\u8eab\u4e4b\u5916\uff0c\u4ee5\u4e0b\u6bcf\u4e2a\u670d\u52a1\u5668\u7684\u57fa\u7840\u8bbe\u65bd\u7ec4\u4ef6\u4e5f\u5305\u542b\u5728\"\u6570\u636e\u5e73\u9762\"\u7684\u5e7f\u6cdb\u5b9a\u4e49\u4e2d\uff1a</p> <ul> <li>Postgres</li> <li>Redis</li> <li>\u5bc6\u94a5\u5b58\u50a8</li> <li>\u81ea\u52a8\u6269\u5c55\u5668</li> </ul>","boost":2},{"location":"concepts/langgraph_data_plane/#_2","title":"\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f","text":"<p>\u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"\u5e94\u7528\u7a0b\u5e8f\u5b9a\u671f\u8c03\u7528\u63a7\u5236\u5e73\u9762 API\u4ee5\uff1a</p> <ul> <li>\u786e\u5b9a\u662f\u5426\u5e94\u521b\u5efa\u65b0\u90e8\u7f72\u3002</li> <li>\u786e\u5b9a\u662f\u5426\u5e94\u66f4\u65b0\u73b0\u6709\u90e8\u7f72\uff08\u5373\u65b0\u4fee\u8ba2\uff09\u3002</li> <li>\u786e\u5b9a\u662f\u5426\u5e94\u5220\u9664\u73b0\u6709\u90e8\u7f72\u3002</li> </ul> <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"\u8bfb\u53d6\u63a7\u5236\u5e73\u9762\u7684\u6700\u65b0\u72b6\u6001\uff08\u671f\u671b\u72b6\u6001\uff09\u5e76\u91c7\u53d6\u884c\u52a8\u6765\u534f\u8c03\u672a\u5b8c\u6210\u7684\u90e8\u7f72\uff08\u5f53\u524d\u72b6\u6001\uff09\u4ee5\u5339\u914d\u6700\u65b0\u72b6\u6001\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#postgres","title":"Postgres","text":"<p>Postgres \u662f LangGraph \u670d\u52a1\u5668\u4e2d\u6240\u6709\u7528\u6237\u3001\u8fd0\u884c\u548c\u957f\u671f\u8bb0\u5fc6\u6570\u636e\u7684\u6301\u4e45\u5316\u5c42\u3002\u5b83\u5b58\u50a8\u68c0\u67e5\u70b9\uff08\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u5904\uff09\u3001\u670d\u52a1\u5668\u8d44\u6e90\uff08\u7ebf\u7a0b\u3001\u8fd0\u884c\u3001\u52a9\u624b\u548c\u5b9a\u65f6\u4efb\u52a1\uff09\uff0c\u4ee5\u53ca\u4fdd\u5b58\u5728\u957f\u671f\u8bb0\u5fc6\u5b58\u50a8\u4e2d\u7684\u9879\u76ee\uff08\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u5904\uff09\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#redis","title":"Redis","text":"<p>Redis \u5728\u6bcf\u4e2a LangGraph \u670d\u52a1\u5668\u4e2d\u7528\u4f5c\u670d\u52a1\u5668\u548c\u961f\u5217\u5de5\u4f5c\u5668\u901a\u4fe1\u7684\u65b9\u5f0f\uff0c\u5e76\u5b58\u50a8\u4e34\u65f6\u5143\u6570\u636e\u3002\u7528\u6237\u6216\u8fd0\u884c\u6570\u636e\u4e0d\u5b58\u50a8\u5728 Redis \u4e2d\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#_3","title":"\u901a\u4fe1","text":"<p>LangGraph \u670d\u52a1\u5668\u4e2d\u7684\u6240\u6709\u8fd0\u884c\u90fd\u7531\u6bcf\u4e2a\u90e8\u7f72\u4e2d\u7684\u540e\u53f0\u5de5\u4f5c\u5668\u6c60\u6267\u884c\u3002\u4e3a\u4e86\u542f\u7528\u8fd9\u4e9b\u8fd0\u884c\u7684\u67d0\u4e9b\u529f\u80fd\uff08\u4f8b\u5982\u53d6\u6d88\u548c\u8f93\u51fa\u6d41\u5f0f\u4f20\u8f93\uff09\uff0c\u6211\u4eec\u9700\u8981\u670d\u52a1\u5668\u548c\u5904\u7406\u7279\u5b9a\u8fd0\u884c\u7684\u5de5\u4f5c\u5668\u4e4b\u95f4\u7684\u53cc\u5411\u901a\u4fe1\u901a\u9053\u3002\u6211\u4eec\u4f7f\u7528 Redis \u6765\u7ec4\u7ec7\u8be5\u901a\u4fe1\u3002</p> <ol> <li>Redis \u5217\u8868\u7528\u4f5c\u4e00\u79cd\u673a\u5236\uff0c\u5728\u521b\u5efa\u65b0\u8fd0\u884c\u65f6\u7acb\u5373\u5524\u9192\u5de5\u4f5c\u5668\u3002\u6b64\u5217\u8868\u4e2d\u4ec5\u5b58\u50a8\u54e8\u5175\u503c\uff0c\u6ca1\u6709\u5b9e\u9645\u7684\u8fd0\u884c\u4fe1\u606f\u3002\u7136\u540e\u5de5\u4f5c\u5668\u4ece Postgres \u68c0\u7d22\u8fd0\u884c\u4fe1\u606f\u3002</li> <li>Redis \u5b57\u7b26\u4e32\u548c Redis PubSub \u901a\u9053\u7684\u7ec4\u5408\u7528\u4e8e\u670d\u52a1\u5668\u5411\u9002\u5f53\u7684\u5de5\u4f5c\u5668\u4f20\u8fbe\u8fd0\u884c\u53d6\u6d88\u8bf7\u6c42\u3002</li> <li>\u5de5\u4f5c\u5668\u4f7f\u7528 Redis PubSub \u901a\u9053\u5728\u5904\u7406\u8fd0\u884c\u65f6\u4ece\u667a\u80fd\u4ee3\u7406\u5e7f\u64ad\u6d41\u5f0f\u8f93\u51fa\u3002\u670d\u52a1\u5668\u4e2d\u4efb\u4f55\u6253\u5f00\u7684 <code>/stream</code> \u8bf7\u6c42\u90fd\u5c06\u8ba2\u9605\u8be5\u901a\u9053\uff0c\u5e76\u5728\u4e8b\u4ef6\u5230\u8fbe\u65f6\u5c06\u5176\u8f6c\u53d1\u5230\u54cd\u5e94\u3002\u4efb\u4f55\u65f6\u5019\u90fd\u4e0d\u4f1a\u5728 Redis \u4e2d\u5b58\u50a8\u4efb\u4f55\u4e8b\u4ef6\u3002</li> </ol>","boost":2},{"location":"concepts/langgraph_data_plane/#_4","title":"\u4e34\u65f6\u5143\u6570\u636e","text":"<p>LangGraph \u670d\u52a1\u5668\u4e2d\u7684\u8fd0\u884c\u53ef\u80fd\u4f1a\u56e0\u7279\u5b9a\u6545\u969c\u800c\u91cd\u8bd5\uff08\u76ee\u524d\u4ec5\u9488\u5bf9\u8fd0\u884c\u671f\u95f4\u9047\u5230\u7684\u77ac\u65f6 Postgres \u9519\u8bef\uff09\u3002\u4e3a\u4e86\u9650\u5236\u91cd\u8bd5\u6b21\u6570\uff08\u76ee\u524d\u6bcf\u6b21\u8fd0\u884c\u9650\u5236\u4e3a 3 \u6b21\u5c1d\u8bd5\uff09\uff0c\u6211\u4eec\u5728\u62fe\u53d6\u8fd0\u884c\u65f6\u5c06\u5c1d\u8bd5\u6b21\u6570\u8bb0\u5f55\u5728 Redis \u5b57\u7b26\u4e32\u4e2d\u3002\u9664\u4e86\u5176 ID \u4e4b\u5916\uff0c\u5b83\u4e0d\u5305\u542b\u4efb\u4f55\u7279\u5b9a\u4e8e\u8fd0\u884c\u7684\u4fe1\u606f\uff0c\u5e76\u5728\u77ed\u6682\u7684\u5ef6\u8fdf\u540e\u8fc7\u671f\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#_5","title":"\u6570\u636e\u5e73\u9762\u529f\u80fd","text":"<p>\u672c\u8282\u63cf\u8ff0\u6570\u636e\u5e73\u9762\u7684\u5404\u79cd\u529f\u80fd\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#_6","title":"\u6570\u636e\u533a\u57df","text":"<p>\u4ec5\u9002\u7528\u4e8e Cloud SaaS</p> <p>\u6570\u636e\u533a\u57df\u4ec5\u9002\u7528\u4e8e Cloud SaaS \u90e8\u7f72\u3002</p> <p>\u90e8\u7f72\u53ef\u4ee5\u5728 2 \u4e2a\u6570\u636e\u533a\u57df\u4e2d\u521b\u5efa\uff1a\u7f8e\u56fd\u548c\u6b27\u76df</p> <p>\u90e8\u7f72\u7684\u6570\u636e\u533a\u57df\u7531\u521b\u5efa\u90e8\u7f72\u7684 LangSmith \u7ec4\u7ec7\u7684\u6570\u636e\u533a\u57df\u51b3\u5b9a\u3002\u90e8\u7f72\u548c\u90e8\u7f72\u7684\u5e95\u5c42\u6570\u636e\u5e93\u65e0\u6cd5\u5728\u6570\u636e\u533a\u57df\u4e4b\u95f4\u8fc1\u79fb\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#_7","title":"\u81ea\u52a8\u6269\u5c55","text":"<p><code>\u751f\u4ea7\u7248</code>\u7c7b\u578b\u90e8\u7f72\u4f1a\u81ea\u52a8\u6269\u5c55\u5230 10 \u4e2a\u5bb9\u5668\u3002\u6269\u5c55\u57fa\u4e8e 3 \u4e2a\u6307\u6807\uff1a</p> <ol> <li>CPU \u5229\u7528\u7387</li> <li>\u5185\u5b58\u5229\u7528\u7387</li> <li>\u5f85\u5904\u7406\uff08\u8fdb\u884c\u4e2d\uff09\u7684\u8fd0\u884c\u6570\u91cf</li> </ol> <p>\u5bf9\u4e8e CPU \u5229\u7528\u7387\uff0c\u81ea\u52a8\u6269\u5c55\u5668\u7684\u76ee\u6807\u662f 75% \u7684\u5229\u7528\u7387\u3002\u8fd9\u610f\u5473\u7740\u81ea\u52a8\u6269\u5c55\u5668\u5c06\u5411\u4e0a\u6216\u5411\u4e0b\u6269\u5c55\u5bb9\u5668\u6570\u91cf\uff0c\u4ee5\u786e\u4fdd CPU \u5229\u7528\u7387\u8fbe\u5230\u6216\u63a5\u8fd1 75%\u3002\u5bf9\u4e8e\u5185\u5b58\u5229\u7528\u7387\uff0c\u81ea\u52a8\u6269\u5c55\u5668\u7684\u76ee\u6807\u540c\u6837\u662f 75% \u7684\u5229\u7528\u7387\u3002</p> <p>\u5bf9\u4e8e\u5f85\u5904\u7406\u8fd0\u884c\u7684\u6570\u91cf\uff0c\u81ea\u52a8\u6269\u5c55\u5668\u7684\u76ee\u6807\u662f 10 \u4e2a\u5f85\u5904\u7406\u8fd0\u884c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u5f53\u524d\u5bb9\u5668\u6570\u91cf\u4e3a 1\uff0c\u4f46\u5f85\u5904\u7406\u8fd0\u884c\u6570\u91cf\u4e3a 20\uff0c\u81ea\u52a8\u6269\u5c55\u5668\u5c06\u628a\u90e8\u7f72\u6269\u5c55\u5230 2 \u4e2a\u5bb9\u5668\uff0820 \u4e2a\u5f85\u5904\u7406\u8fd0\u884c / 2 \u4e2a\u5bb9\u5668 = \u6bcf\u4e2a\u5bb9\u5668 10 \u4e2a\u5f85\u5904\u7406\u8fd0\u884c\uff09\u3002</p> <p>\u6bcf\u4e2a\u6307\u6807\u72ec\u7acb\u8ba1\u7b97\uff0c\u81ea\u52a8\u6269\u5c55\u5668\u5c06\u6839\u636e\u5bfc\u81f4\u6700\u5927\u5bb9\u5668\u6570\u91cf\u7684\u6307\u6807\u6765\u786e\u5b9a\u6269\u5c55\u64cd\u4f5c\u3002</p> <p>\u7f29\u51cf\u64cd\u4f5c\u5728\u91c7\u53d6\u4efb\u4f55\u884c\u52a8\u4e4b\u524d\u4f1a\u5ef6\u8fdf 30 \u5206\u949f\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u81ea\u52a8\u6269\u5c55\u5668\u51b3\u5b9a\u7f29\u51cf\u90e8\u7f72\uff0c\u5b83\u5c06\u9996\u5148\u7b49\u5f85 30 \u5206\u949f\uff0c\u7136\u540e\u518d\u7f29\u51cf\u300230 \u5206\u949f\u540e\uff0c\u5c06\u91cd\u65b0\u8ba1\u7b97\u6307\u6807\uff0c\u5982\u679c\u91cd\u65b0\u8ba1\u7b97\u7684\u6307\u6807\u5bfc\u81f4\u7684\u5bb9\u5668\u6570\u91cf\u4f4e\u4e8e\u5f53\u524d\u6570\u91cf\uff0c\u5219\u90e8\u7f72\u5c06\u7f29\u51cf\u3002\u5426\u5219\uff0c\u90e8\u7f72\u5c06\u4fdd\u6301\u6269\u5c55\u72b6\u6001\u3002\u8fd9\u4e2a\"\u51b7\u5374\"\u671f\u786e\u4fdd\u90e8\u7f72\u4e0d\u4f1a\u8fc7\u4e8e\u9891\u7e41\u5730\u6269\u5c55\u548c\u7f29\u51cf\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#ip","title":"\u9759\u6001 IP \u5730\u5740","text":"<p>\u4ec5\u9002\u7528\u4e8e Cloud SaaS</p> <p>\u9759\u6001 IP \u5730\u5740\u4ec5\u9002\u7528\u4e8e Cloud SaaS \u90e8\u7f72\u3002</p> <p>2025 \u5e74 1 \u6708 6 \u65e5\u4e4b\u540e\u521b\u5efa\u7684\u90e8\u7f72\u7684\u6240\u6709\u6d41\u91cf\u90fd\u5c06\u901a\u8fc7 NAT \u7f51\u5173\u3002\u6b64 NAT \u7f51\u5173\u5c06\u6839\u636e\u6570\u636e\u533a\u57df\u62e5\u6709\u591a\u4e2a\u9759\u6001 IP \u5730\u5740\u3002\u6709\u5173\u9759\u6001 IP \u5730\u5740\u5217\u8868\uff0c\u8bf7\u53c2\u9605\u4e0b\u8868\uff1a</p> \u7f8e\u56fd \u6b27\u76df 35.197.29.146 34.13.192.67 34.145.102.123 34.147.105.64 34.169.45.153 34.90.22.166 34.82.222.17 34.147.36.213 35.227.171.135 34.32.137.113 34.169.88.30 34.91.238.184 34.19.93.202 35.204.101.241 34.19.34.50 35.204.48.32","boost":2},{"location":"concepts/langgraph_data_plane/#postgres_1","title":"\u81ea\u5b9a\u4e49 Postgres","text":"<p>Info</p> <p>\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u63a7\u5236\u5e73\u9762\u81ea\u52a8\u521b\u5efa\u7684\u5b9e\u4f8b\u3002\u6307\u5b9a <code>POSTGRES_URI_CUSTOM</code> \u73af\u5883\u53d8\u91cf\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 Postgres \u5b9e\u4f8b\u3002</p> <p>\u591a\u4e2a\u90e8\u7f72\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2a Postgres \u5b9e\u4f8b\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e<code>\u90e8\u7f72 A</code>\uff0c<code>POSTGRES_URI_CUSTOM</code> \u53ef\u4ee5\u8bbe\u7f6e\u4e3a <code>postgres://&lt;user&gt;:&lt;password&gt;@/&lt;database_name_1&gt;?host=&lt;hostname_1&gt;</code>\uff0c\u5bf9\u4e8e<code>\u90e8\u7f72 B</code>\uff0c<code>POSTGRES_URI_CUSTOM</code> \u53ef\u4ee5\u8bbe\u7f6e\u4e3a <code>postgres://&lt;user&gt;:&lt;password&gt;@/&lt;database_name_2&gt;?host=&lt;hostname_1&gt;</code>\u3002<code>&lt;database_name_1&gt;</code> \u548c <code>database_name_2</code> \u662f\u540c\u4e00\u5b9e\u4f8b\u4e2d\u7684\u4e0d\u540c\u6570\u636e\u5e93\uff0c\u4f46 <code>&lt;hostname_1&gt;</code> \u662f\u5171\u4eab\u7684\u3002\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u4e0d\u80fd\u7528\u4e8e\u4e0d\u540c\u7684\u90e8\u7f72\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#redis_1","title":"\u81ea\u5b9a\u4e49 Redis","text":"<p>Info</p> <p>\u81ea\u5b9a\u4e49 Redis \u5b9e\u4f8b\u4ec5\u9002\u7528\u4e8e\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u3002</p> <p>\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 Redis \u5b9e\u4f8b\uff0c\u800c\u4e0d\u662f\u63a7\u5236\u5e73\u9762\u81ea\u52a8\u521b\u5efa\u7684\u5b9e\u4f8b\u3002\u6307\u5b9a REDIS_URI_CUSTOM \u73af\u5883\u53d8\u91cf\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49 Redis \u5b9e\u4f8b\u3002</p> <p>\u591a\u4e2a\u90e8\u7f72\u53ef\u4ee5\u5171\u4eab\u540c\u4e00\u4e2a Redis \u5b9e\u4f8b\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e<code>\u90e8\u7f72 A</code>\uff0c<code>REDIS_URI_CUSTOM</code> \u53ef\u4ee5\u8bbe\u7f6e\u4e3a <code>redis://&lt;hostname_1&gt;:&lt;port&gt;/1</code>\uff0c\u5bf9\u4e8e<code>\u90e8\u7f72 B</code>\uff0c<code>REDIS_URI_CUSTOM</code> \u53ef\u4ee5\u8bbe\u7f6e\u4e3a <code>redis://&lt;hostname_1&gt;:&lt;port&gt;/2</code>\u3002<code>1</code> \u548c <code>2</code> \u662f\u540c\u4e00\u5b9e\u4f8b\u4e2d\u7684\u4e0d\u540c\u6570\u636e\u5e93\u7f16\u53f7\uff0c\u4f46 <code>&lt;hostname_1&gt;</code> \u662f\u5171\u4eab\u7684\u3002\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u7f16\u53f7\u4e0d\u80fd\u7528\u4e8e\u4e0d\u540c\u7684\u90e8\u7f72\u3002</p>","boost":2},{"location":"concepts/langgraph_data_plane/#langsmith","title":"LangSmith \u8ddf\u8e2a","text":"<p>LangGraph \u670d\u52a1\u5668\u81ea\u52a8\u914d\u7f6e\u4e3a\u5411 LangSmith \u53d1\u9001\u8ddf\u8e2a\u3002\u6709\u5173\u6bcf\u4e2a\u90e8\u7f72\u9009\u9879\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u8868\u3002</p> Cloud SaaS \u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762 \u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762 \u72ec\u7acb\u5bb9\u5668 \u5fc5\u9700\u8ddf\u8e2a\u5230 LangSmith SaaS\u3002 \u53ef\u9009\u7981\u7528\u8ddf\u8e2a\u6216\u8ddf\u8e2a\u5230 LangSmith SaaS\u3002 \u53ef\u9009\u7981\u7528\u8ddf\u8e2a\u6216\u8ddf\u8e2a\u5230\u81ea\u6258\u7ba1 LangSmith\u3002 \u53ef\u9009\u7981\u7528\u8ddf\u8e2a\u3001\u8ddf\u8e2a\u5230 LangSmith SaaS \u6216\u8ddf\u8e2a\u5230\u81ea\u6258\u7ba1 LangSmith\u3002","boost":2},{"location":"concepts/langgraph_data_plane/#_8","title":"\u9065\u6d4b","text":"<p>LangGraph \u670d\u52a1\u5668\u81ea\u52a8\u914d\u7f6e\u4e3a\u62a5\u544a\u7528\u4e8e\u8ba1\u8d39\u76ee\u7684\u7684\u9065\u6d4b\u5143\u6570\u636e\u3002\u6709\u5173\u6bcf\u4e2a\u90e8\u7f72\u9009\u9879\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u8868\u3002</p> Cloud SaaS \u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762 \u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762 \u72ec\u7acb\u5bb9\u5668 \u9065\u6d4b\u53d1\u9001\u5230 LangSmith SaaS\u3002 \u9065\u6d4b\u53d1\u9001\u5230 LangSmith SaaS\u3002 \u6c14\u9699\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u7684\u81ea\u62a5\u544a\u4f7f\u7528\uff08\u5ba1\u8ba1\uff09\u3002LangGraph Platform \u8bb8\u53ef\u8bc1\u5bc6\u94a5\u7684\u9065\u6d4b\u53d1\u9001\u5230 LangSmith SaaS\u3002 \u6c14\u9699\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u7684\u81ea\u62a5\u544a\u4f7f\u7528\uff08\u5ba1\u8ba1\uff09\u3002LangGraph Platform \u8bb8\u53ef\u8bc1\u5bc6\u94a5\u7684\u9065\u6d4b\u53d1\u9001\u5230 LangSmith SaaS\u3002","boost":2},{"location":"concepts/langgraph_data_plane/#_9","title":"\u8bb8\u53ef","text":"<p>LangGraph \u670d\u52a1\u5668\u81ea\u52a8\u914d\u7f6e\u4e3a\u6267\u884c\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u9a8c\u8bc1\u3002\u6709\u5173\u6bcf\u4e2a\u90e8\u7f72\u9009\u9879\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u8868\u3002</p> Cloud SaaS \u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762 \u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762 \u72ec\u7acb\u5bb9\u5668 \u9488\u5bf9 LangSmith SaaS \u9a8c\u8bc1 LangSmith API \u5bc6\u94a5\u3002 \u9488\u5bf9 LangSmith SaaS \u9a8c\u8bc1 LangSmith API \u5bc6\u94a5\u3002 \u6c14\u9699\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u6216\u9488\u5bf9 LangSmith SaaS \u9a8c\u8bc1\u7684 LangGraph Platform \u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002 \u6c14\u9699\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u6216\u9488\u5bf9 LangSmith SaaS \u9a8c\u8bc1\u7684 LangGraph Platform \u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002","boost":2},{"location":"concepts/langgraph_platform/","title":"LangGraph Platform","text":"<p>\u4f7f\u7528 LangGraph Platform \u5f00\u53d1\u3001\u90e8\u7f72\u3001\u6269\u5c55\u548c\u7ba1\u7406\u667a\u80fd\u4ee3\u7406\u2014\u2014\u8fd9\u662f\u4e13\u4e3a\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41\u6784\u5efa\u7684\u5e73\u53f0\u3002</p> <p>\u5f00\u59cb\u4f7f\u7528 LangGraph Platform</p> <p>\u67e5\u770b LangGraph Platform \u5feb\u901f\u5165\u95e8\u4e86\u89e3\u5982\u4f55\u4f7f\u7528 LangGraph Platform \u5728\u672c\u5730\u8fd0\u884c LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u8bf4\u660e\u3002</p>","boost":2},{"location":"concepts/langgraph_platform/#langgraph-platform_1","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528 LangGraph Platform\uff1f","text":"<p>LangGraph Platform \u8ba9\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u8f7b\u677e\u8fd0\u884c\u2014\u2014\u65e0\u8bba\u5b83\u662f\u4f7f\u7528 LangGraph \u8fd8\u662f\u5176\u4ed6\u6846\u67b6\u6784\u5efa\u7684\u2014\u2014\u8ba9\u4f60\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91\uff0c\u800c\u4e0d\u662f\u57fa\u7840\u8bbe\u65bd\u3002\u4e00\u952e\u90e8\u7f72\u83b7\u53d6\u5b9e\u65f6\u7aef\u70b9\uff0c\u5e76\u4f7f\u7528\u6211\u4eec\u5f3a\u5927\u7684 API \u548c\u5185\u7f6e\u4efb\u52a1\u961f\u5217\u6765\u5904\u7406\u751f\u4ea7\u89c4\u6a21\u3002</p> <ul> <li> <p>\u6d41\u5f0f\u4f20\u8f93\u652f\u6301\uff1a\u968f\u7740\u667a\u80fd\u4ee3\u7406\u53d8\u5f97\u66f4\u52a0\u590d\u6742\uff0c\u5b83\u4eec\u901a\u5e38\u53d7\u76ca\u4e8e\u5411\u7528\u6237\u6d41\u5f0f\u4f20\u8f93\u4ee4\u724c\u8f93\u51fa\u548c\u4e2d\u95f4\u72b6\u6001\u3002\u6ca1\u6709\u8fd9\u4e2a\u529f\u80fd\uff0c\u7528\u6237\u5c06\u88ab\u8feb\u7b49\u5f85\u53ef\u80fd\u5f88\u957f\u7684\u64cd\u4f5c\u800c\u6ca1\u6709\u4efb\u4f55\u53cd\u9988\u3002LangGraph Server \u63d0\u4f9b\u4e86\u9488\u5bf9\u5404\u79cd\u5e94\u7528\u7a0b\u5e8f\u9700\u6c42\u4f18\u5316\u7684\u591a\u79cd\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u3002</p> </li> <li> <p>\u540e\u53f0\u8fd0\u884c\uff1a\u5bf9\u4e8e\u5904\u7406\u65f6\u95f4\u8f83\u957f\u7684\u667a\u80fd\u4ee3\u7406\uff08\u4f8b\u5982\u6570\u5c0f\u65f6\uff09\uff0c\u4fdd\u6301\u5f00\u653e\u8fde\u63a5\u53ef\u80fd\u4e0d\u5207\u5b9e\u9645\u3002LangGraph Server \u652f\u6301\u5728\u540e\u53f0\u542f\u52a8\u667a\u80fd\u4ee3\u7406\u8fd0\u884c\uff0c\u5e76\u63d0\u4f9b\u8f6e\u8be2\u7aef\u70b9\u548c webhook \u6765\u6709\u6548\u76d1\u63a7\u8fd0\u884c\u72b6\u6001\u3002</p> </li> <li> <p>\u652f\u6301\u957f\u65f6\u95f4\u8fd0\u884c\uff1a\u5e38\u89c4\u670d\u52a1\u5668\u8bbe\u7f6e\u5728\u5904\u7406\u9700\u8981\u5f88\u957f\u65f6\u95f4\u624d\u80fd\u5b8c\u6210\u7684\u8bf7\u6c42\u65f6\u901a\u5e38\u4f1a\u9047\u5230\u8d85\u65f6\u6216\u4e2d\u65ad\u3002LangGraph Server \u7684 API \u901a\u8fc7\u53d1\u9001\u5e38\u89c4\u5fc3\u8df3\u4fe1\u53f7\u4e3a\u8fd9\u4e9b\u4efb\u52a1\u63d0\u4f9b\u5f3a\u5927\u7684\u652f\u6301\uff0c\u9632\u6b62\u957f\u65f6\u95f4\u8fdb\u7a0b\u671f\u95f4\u610f\u5916\u8fde\u63a5\u5173\u95ed\u3002</p> </li> <li> <p>\u5904\u7406\u7a81\u53d1\u6d41\u91cf\uff1a\u67d0\u4e9b\u5e94\u7528\u7a0b\u5e8f\uff0c\u7279\u522b\u662f\u5177\u6709\u5b9e\u65f6\u7528\u6237\u4ea4\u4e92\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u53ef\u80fd\u4f1a\u7ecf\u5386\"\u7a81\u53d1\"\u8bf7\u6c42\u8d1f\u8f7d\uff0c\u5176\u4e2d\u5927\u91cf\u8bf7\u6c42\u540c\u65f6\u5230\u8fbe\u670d\u52a1\u5668\u3002LangGraph Server \u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\uff0c\u786e\u4fdd\u5373\u4f7f\u5728\u9ad8\u8d1f\u8f7d\u4e0b\u4e5f\u80fd\u4e00\u81f4\u5730\u5904\u7406\u8bf7\u6c42\u800c\u4e0d\u4e22\u5931\u3002</p> </li> <li> <p>\u53cc\u91cd\u8f93\u5165\uff1a\u5728\u7528\u6237\u9a71\u52a8\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u7528\u6237\u5feb\u901f\u53d1\u9001\u591a\u6761\u6d88\u606f\u662f\u5f88\u5e38\u89c1\u7684\u3002\u5982\u679c\u5904\u7406\u4e0d\u5f53\uff0c\u8fd9\u79cd\"\u53cc\u91cd\u8f93\u5165\"\u53ef\u80fd\u4f1a\u4e2d\u65ad\u667a\u80fd\u4ee3\u7406\u6d41\u7a0b\u3002LangGraph Server \u63d0\u4f9b\u5185\u7f6e\u7b56\u7565\u6765\u89e3\u51b3\u548c\u7ba1\u7406\u6b64\u7c7b\u4ea4\u4e92\u3002</p> </li> <li> <p>\u68c0\u67e5\u70b9\u5668\u548c\u8bb0\u5fc6\u7ba1\u7406\uff1a\u5bf9\u4e8e\u9700\u8981\u6301\u4e45\u5316\u7684\u667a\u80fd\u4ee3\u7406\uff08\u4f8b\u5982\u5bf9\u8bdd\u8bb0\u5fc6\uff09\uff0c\u90e8\u7f72\u5f3a\u5927\u7684\u5b58\u50a8\u89e3\u51b3\u65b9\u6848\u53ef\u80fd\u5f88\u590d\u6742\u3002LangGraph Platform \u5305\u542b\u4f18\u5316\u7684\u68c0\u67e5\u70b9\u5668\u548c\u8bb0\u5fc6\u5b58\u50a8\uff0c\u65e0\u9700\u81ea\u5b9a\u4e49\u89e3\u51b3\u65b9\u6848\u5373\u53ef\u8de8\u4f1a\u8bdd\u7ba1\u7406\u72b6\u6001\u3002</p> </li> <li> <p>\u4eba\u673a\u534f\u540c\u652f\u6301\uff1a\u5728\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u7528\u6237\u9700\u8981\u4e00\u79cd\u5e72\u9884\u667a\u80fd\u4ee3\u7406\u8fdb\u7a0b\u7684\u65b9\u5f0f\u3002LangGraph Server \u4e3a\u4eba\u673a\u534f\u540c\u573a\u666f\u63d0\u4f9b\u4e13\u95e8\u7684\u7aef\u70b9\uff0c\u7b80\u5316\u4e86\u5c06\u4eba\u5de5\u76d1\u7763\u96c6\u6210\u5230\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41\u7a0b\u4e2d\u7684\u8fc7\u7a0b\u3002</p> </li> <li> <p>LangGraph Studio\uff1a\u80fd\u591f\u53ef\u89c6\u5316\u3001\u4ea4\u4e92\u548c\u8c03\u8bd5\u5b9e\u73b0 LangGraph Server API \u534f\u8bae\u7684\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002Studio \u8fd8\u4e0e LangSmith \u96c6\u6210\uff0c\u4ee5\u5b9e\u73b0\u8ddf\u8e2a\u3001\u8bc4\u4f30\u548c\u63d0\u793a\u5de5\u7a0b\u3002</p> </li> <li> <p>\u90e8\u7f72\uff1a\u5728 LangGraph Platform \u4e0a\u6709\u56db\u79cd\u90e8\u7f72\u65b9\u5f0f\uff1aCloud SaaS\u3001\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u3001\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u548c\u72ec\u7acb\u5bb9\u5668\u3002</p> </li> </ul>","boost":2},{"location":"concepts/langgraph_self_hosted_control_plane/","title":"\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762","text":"<p>\u81ea\u6258\u7ba1\u90e8\u7f72\u6709\u4e24\u4e2a\u7248\u672c\uff1a\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u3002</p> <p>\u91cd\u8981</p> <p>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u9700\u8981\u4f01\u4e1a\u7248\u8ba1\u5212\u3002</p>"},{"location":"concepts/langgraph_self_hosted_control_plane/#_2","title":"\u8981\u6c42","text":"<ul> <li>\u4f60\u4f7f\u7528 LangGraph CLI \u548c/\u6216 LangGraph Studio \u5e94\u7528\u7a0b\u5e8f\u5728\u672c\u5730\u6d4b\u8bd5\u56fe\u3002</li> <li>\u4f60\u4f7f\u7528 <code>langgraph build</code> \u547d\u4ee4\u6784\u5efa\u955c\u50cf\u3002</li> <li>\u4f60\u5df2\u90e8\u7f72\u81ea\u6258\u7ba1 LangSmith \u5b9e\u4f8b\u3002</li> <li>\u4f60\u6b63\u5728\u4e3a LangSmith \u5b9e\u4f8b\u4f7f\u7528 Ingress\u3002\u6240\u6709\u667a\u80fd\u4ee3\u7406\u90fd\u5c06\u4f5c\u4e3a Kubernetes \u670d\u52a1\u90e8\u7f72\u5728\u6b64 ingress \u540e\u9762\u3002</li> </ul>"},{"location":"concepts/langgraph_self_hosted_control_plane/#_3","title":"\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762","text":"<p>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u662f\u4e00\u79cd\u5b8c\u5168\u81ea\u6258\u7ba1\u7684\u90e8\u7f72\u6a21\u578b\uff0c\u4f60\u5728\u4f60\u7684\u4e91\u4e2d\u7ba1\u7406\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u3002\u6b64\u9009\u9879\u8ba9\u4f60\u5b8c\u5168\u63a7\u5236\u5e76\u8d1f\u8d23\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u3002</p> \u63a7\u5236\u5e73\u9762 \u6570\u636e\u5e73\u9762 \u662f\u4ec0\u4e48\uff1f <ul><li>\u7528\u4e8e\u521b\u5efa\u90e8\u7f72\u548c\u4fee\u8ba2\u7248\u7684\u63a7\u5236\u5e73\u9762 UI</li><li>\u7528\u4e8e\u521b\u5efa\u90e8\u7f72\u548c\u4fee\u8ba2\u7248\u7684\u63a7\u5236\u5e73\u9762 API</li></ul> <ul><li>\u7528\u4e8e\u5c06\u90e8\u7f72\u4e0e\u63a7\u5236\u5e73\u9762\u72b6\u6001\u534f\u8c03\u7684\u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"</li><li>LangGraph Servers</li><li>Postgres\u3001Redis \u7b49</li></ul> \u6258\u7ba1\u5728\u54ea\u91cc\uff1f \u4f60\u7684\u4e91 \u4f60\u7684\u4e91 \u8c01\u914d\u7f6e\u548c\u7ba1\u7406\uff1f \u4f60 \u4f60"},{"location":"concepts/langgraph_self_hosted_control_plane/#_4","title":"\u67b6\u6784","text":""},{"location":"concepts/langgraph_self_hosted_control_plane/#_5","title":"\u8ba1\u7b97\u5e73\u53f0","text":"<ul> <li>Kubernetes\uff1a\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u9009\u9879\u652f\u6301\u5c06\u63a7\u5236\u5e73\u9762\u548c\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u90e8\u7f72\u5230\u4efb\u4f55 Kubernetes \u96c6\u7fa4\u3002</li> </ul> <p>Tip</p> <p>\u5982\u679c\u4f60\u60f3\u5728 LangSmith \u5b9e\u4f8b\u4e0a\u542f\u7528\u6b64\u529f\u80fd\uff0c\u8bf7\u6309\u7167\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u90e8\u7f72\u6307\u5357\u8fdb\u884c\u64cd\u4f5c\u3002</p>"},{"location":"concepts/langgraph_self_hosted_data_plane/","title":"\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762","text":"<p>\u81ea\u6258\u7ba1\u90e8\u7f72\u6709\u4e24\u4e2a\u7248\u672c\uff1a\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u548c\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762\u3002</p> <p>\u91cd\u8981</p> <p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u9700\u8981\u4f01\u4e1a\u7248\u8ba1\u5212\u3002</p>","boost":2},{"location":"concepts/langgraph_self_hosted_data_plane/#_2","title":"\u8981\u6c42","text":"<ul> <li>\u4f60\u4f7f\u7528 <code>langgraph-cli</code> \u548c/\u6216 LangGraph Studio \u5e94\u7528\u7a0b\u5e8f\u5728\u672c\u5730\u6d4b\u8bd5\u56fe\u3002</li> <li>\u4f60\u4f7f\u7528 <code>langgraph build</code> \u547d\u4ee4\u6784\u5efa\u955c\u50cf\u3002</li> </ul>","boost":2},{"location":"concepts/langgraph_self_hosted_data_plane/#_3","title":"\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762","text":"<p>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u662f\u4e00\u79cd\"\u6df7\u5408\"\u90e8\u7f72\u6a21\u578b\uff0c\u6211\u4eec\u5728\u6211\u4eec\u7684\u4e91\u4e2d\u7ba1\u7406\u63a7\u5236\u5e73\u9762\uff0c\u800c\u4f60\u5728\u4f60\u7684\u4e91\u4e2d\u7ba1\u7406\u6570\u636e\u5e73\u9762\u3002\u6b64\u9009\u9879\u63d0\u4f9b\u4e86\u4e00\u79cd\u5b89\u5168\u7ba1\u7406\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u7684\u65b9\u5f0f\uff0c\u540c\u65f6\u5c06\u63a7\u5236\u5e73\u9762\u7ba1\u7406\u5916\u5305\u7ed9\u6211\u4eec\u3002\u4f7f\u7528\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u7248\u672c\u65f6\uff0c\u4f60\u4f7f\u7528 LangSmith API \u5bc6\u94a5\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\u3002</p> \u63a7\u5236\u5e73\u9762 \u6570\u636e\u5e73\u9762 \u662f\u4ec0\u4e48\uff1f <ul><li>\u7528\u4e8e\u521b\u5efa\u90e8\u7f72\u548c\u4fee\u8ba2\u7248\u7684\u63a7\u5236\u5e73\u9762 UI</li><li>\u7528\u4e8e\u521b\u5efa\u90e8\u7f72\u548c\u4fee\u8ba2\u7248\u7684\u63a7\u5236\u5e73\u9762 API</li></ul> <ul><li>\u7528\u4e8e\u5c06\u90e8\u7f72\u4e0e\u63a7\u5236\u5e73\u9762\u72b6\u6001\u534f\u8c03\u7684\u6570\u636e\u5e73\u9762\"\u76d1\u542c\u5668\"</li><li>LangGraph Servers</li><li>Postgres\u3001Redis \u7b49</li></ul> \u6258\u7ba1\u5728\u54ea\u91cc\uff1f LangChain \u7684\u4e91 \u4f60\u7684\u4e91 \u8c01\u914d\u7f6e\u548c\u7ba1\u7406\uff1f LangChain \u4f60 <p>\u6709\u5173\u5982\u4f55\u5c06 LangGraph Server \u90e8\u7f72\u5230\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u90e8\u7f72\u5230\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762</p>","boost":2},{"location":"concepts/langgraph_self_hosted_data_plane/#_4","title":"\u67b6\u6784","text":"","boost":2},{"location":"concepts/langgraph_self_hosted_data_plane/#_5","title":"\u8ba1\u7b97\u5e73\u53f0","text":"<ul> <li>Kubernetes\uff1a\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u9009\u9879\u652f\u6301\u5c06\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u90e8\u7f72\u5230\u4efb\u4f55 Kubernetes \u96c6\u7fa4\u3002</li> <li>Amazon ECS\uff1a\u5373\u5c06\u63a8\u51fa\uff01</li> </ul> <p>Tip</p> <p>\u5982\u679c\u4f60\u60f3\u90e8\u7f72\u5230 Kubernetes\uff0c\u53ef\u4ee5\u6309\u7167\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762\u90e8\u7f72\u6307\u5357\u8fdb\u884c\u64cd\u4f5c\u3002</p>","boost":2},{"location":"concepts/langgraph_server/","title":"LangGraph Server","text":"<p>LangGraph Server \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u57fa\u4e8e\u667a\u80fd\u4ee3\u7406\u7684\u5e94\u7528\u7a0b\u5e8f\u7684 API\u3002\u5b83\u5efa\u7acb\u5728\u52a9\u624b\u7684\u6982\u5ff5\u4e4b\u4e0a\uff0c\u52a9\u624b\u662f\u4e3a\u7279\u5b9a\u4efb\u52a1\u914d\u7f6e\u7684\u667a\u80fd\u4ee3\u7406\uff0c\u5e76\u5305\u62ec\u5185\u7f6e\u7684\u6301\u4e45\u5316\u548c**\u4efb\u52a1\u961f\u5217**\u3002\u8fd9\u4e2a\u591a\u529f\u80fd\u7684 API \u652f\u6301\u5e7f\u6cdb\u7684\u667a\u80fd\u4ee3\u7406\u5e94\u7528\u7a0b\u5e8f\u7528\u4f8b\uff0c\u4ece\u540e\u53f0\u5904\u7406\u5230\u5b9e\u65f6\u4ea4\u4e92\u3002</p> <p>\u4f7f\u7528 LangGraph Server \u521b\u5efa\u548c\u7ba1\u7406\u52a9\u624b\u3001\u7ebf\u7a0b\u3001\u8fd0\u884c\u3001\u5b9a\u65f6\u4efb\u52a1\u3001webhook\u7b49\u3002</p> <p>API \u53c2\u8003</p> <p>\u6709\u5173 API \u7aef\u70b9\u548c\u6570\u636e\u6a21\u578b\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 LangGraph Platform API \u53c2\u8003\u6587\u6863\u3002</p>","boost":2},{"location":"concepts/langgraph_server/#_1","title":"\u5e94\u7528\u7a0b\u5e8f\u7ed3\u6784","text":"<p>\u8981\u90e8\u7f72 LangGraph Server \u5e94\u7528\u7a0b\u5e8f\uff0c\u4f60\u9700\u8981\u6307\u5b9a\u8981\u90e8\u7f72\u7684\u56fe\uff0c\u4ee5\u53ca\u4efb\u4f55\u76f8\u5173\u7684\u914d\u7f6e\u8bbe\u7f6e\uff0c\u4f8b\u5982\u4f9d\u8d56\u9879\u548c\u73af\u5883\u53d8\u91cf\u3002</p> <p>\u9605\u8bfb\u5e94\u7528\u7a0b\u5e8f\u7ed3\u6784\u6307\u5357\uff0c\u4e86\u89e3\u5982\u4f55\u6784\u5efa LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u3002</p>","boost":2},{"location":"concepts/langgraph_server/#_2","title":"\u90e8\u7f72\u7684\u7ec4\u6210\u90e8\u5206","text":"<p>\u5f53\u4f60\u90e8\u7f72 LangGraph Server \u65f6\uff0c\u4f60\u6b63\u5728\u90e8\u7f72\u4e00\u4e2a\u6216\u591a\u4e2a\u56fe\u3001\u4e00\u4e2a\u7528\u4e8e\u6301\u4e45\u5316\u7684\u6570\u636e\u5e93\u548c\u4e00\u4e2a\u4efb\u52a1\u961f\u5217\u3002</p>","boost":2},{"location":"concepts/langgraph_server/#_3","title":"\u56fe","text":"<p>\u5f53\u4f60\u4f7f\u7528 LangGraph Server \u90e8\u7f72\u56fe\u65f6\uff0c\u4f60\u6b63\u5728\u90e8\u7f72\u52a9\u624b\u7684\"\u84dd\u56fe\"\u3002</p> <p>\u52a9\u624b\u662f\u4e0e\u7279\u5b9a\u914d\u7f6e\u8bbe\u7f6e\u914d\u5bf9\u7684\u56fe\u3002\u4f60\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u56fe\u521b\u5efa\u591a\u4e2a\u52a9\u624b\uff0c\u6bcf\u4e2a\u52a9\u624b\u5177\u6709\u72ec\u7279\u7684\u8bbe\u7f6e\uff0c\u4ee5\u9002\u5e94\u53ef\u4ee5\u7531\u540c\u4e00\u4e2a\u56fe\u670d\u52a1\u7684\u4e0d\u540c\u7528\u4f8b\u3002</p> <p>\u90e8\u7f72\u540e\uff0cLangGraph Server \u5c06\u81ea\u52a8\u4f7f\u7528\u56fe\u7684\u9ed8\u8ba4\u914d\u7f6e\u8bbe\u7f6e\u4e3a\u6bcf\u4e2a\u56fe\u521b\u5efa\u4e00\u4e2a\u9ed8\u8ba4\u52a9\u624b\u3002</p> <p>Note</p> <p>\u6211\u4eec\u901a\u5e38\u5c06\u56fe\u89c6\u4e3a\u5b9e\u73b0\u667a\u80fd\u4ee3\u7406\uff0c\u4f46\u56fe\u4e0d\u4e00\u5b9a\u9700\u8981\u5b9e\u73b0\u667a\u80fd\u4ee3\u7406\u3002\u4f8b\u5982\uff0c\u56fe\u53ef\u4ee5\u5b9e\u73b0\u4e00\u4e2a\u7b80\u5355\u7684\u804a\u5929\u673a\u5668\u4eba\uff0c\u4ec5\u652f\u6301\u6765\u56de\u5bf9\u8bdd\uff0c\u800c\u65e0\u6cd5\u5f71\u54cd\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u6d41\u3002\u5b9e\u9645\u4e0a\uff0c\u968f\u7740\u5e94\u7528\u7a0b\u5e8f\u53d8\u5f97\u66f4\u52a0\u590d\u6742\uff0c\u56fe\u901a\u5e38\u4f1a\u5b9e\u73b0\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u6d41\u7a0b\uff0c\u53ef\u80fd\u4f7f\u7528\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u534f\u540c\u5de5\u4f5c\u3002</p>","boost":2},{"location":"concepts/langgraph_server/#_4","title":"\u6301\u4e45\u5316\u548c\u4efb\u52a1\u961f\u5217","text":"<p>LangGraph Server \u5229\u7528\u6570\u636e\u5e93\u8fdb\u884c\u6301\u4e45\u5316\u548c\u4efb\u52a1\u961f\u5217\u3002</p> <p>\u76ee\u524d\uff0cLangGraph Server \u4ec5\u652f\u6301 Postgres \u4f5c\u4e3a\u6570\u636e\u5e93\uff0cRedis \u4f5c\u4e3a\u4efb\u52a1\u961f\u5217\u3002</p> <p>\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u8fdb\u884c\u90e8\u7f72\uff0c\u8fd9\u4e9b\u7ec4\u4ef6\u5c06\u4e3a\u4f60\u7ba1\u7406\u3002\u5982\u679c\u4f60\u5728\u81ea\u5df1\u7684\u57fa\u7840\u8bbe\u65bd\u4e0a\u90e8\u7f72 LangGraph Server\uff0c\u4f60\u9700\u8981\u81ea\u5df1\u8bbe\u7f6e\u548c\u7ba1\u7406\u8fd9\u4e9b\u7ec4\u4ef6\u3002</p> <p>\u8bf7\u67e5\u770b\u90e8\u7f72\u9009\u9879\u6307\u5357\uff0c\u4e86\u89e3\u6709\u5173\u5982\u4f55\u8bbe\u7f6e\u548c\u7ba1\u7406\u8fd9\u4e9b\u7ec4\u4ef6\u7684\u66f4\u591a\u4fe1\u606f\u3002</p>","boost":2},{"location":"concepts/langgraph_server/#_5","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>LangGraph \u5e94\u7528\u7a0b\u5e8f\u7ed3\u6784\u6307\u5357\u89e3\u91ca\u4e86\u5982\u4f55\u6784\u5efa LangGraph \u5e94\u7528\u7a0b\u5e8f\u4ee5\u8fdb\u884c\u90e8\u7f72\u3002</li> <li>LangGraph Platform API \u53c2\u8003\u63d0\u4f9b\u4e86\u6709\u5173 API \u7aef\u70b9\u548c\u6570\u636e\u6a21\u578b\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ul>","boost":2},{"location":"concepts/langgraph_standalone_container/","title":"\u72ec\u7acb\u5bb9\u5668","text":"<p>\u8981\u90e8\u7f72 LangGraph Server\uff0c\u8bf7\u6309\u7167\u5982\u4f55\u90e8\u7f72\u72ec\u7acb\u5bb9\u5668\u7684\u64cd\u4f5c\u6307\u5357\u8fdb\u884c\u64cd\u4f5c\u3002</p>","boost":2},{"location":"concepts/langgraph_standalone_container/#_2","title":"\u6982\u8ff0","text":"<p>\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u9009\u9879\u662f\u9650\u5236\u6700\u5c11\u7684\u90e8\u7f72\u6a21\u578b\u3002\u6ca1\u6709\u63a7\u5236\u5e73\u9762\u3002\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u7531\u4f60\u7ba1\u7406\u3002</p> \u63a7\u5236\u5e73\u9762 \u6570\u636e\u5e73\u9762 \u662f\u4ec0\u4e48\uff1f \u4e0d\u9002\u7528 <ul><li>LangGraph Servers</li><li>Postgres\u3001Redis \u7b49</li></ul> \u6258\u7ba1\u5728\u54ea\u91cc\uff1f \u4e0d\u9002\u7528 \u4f60\u7684\u4e91 \u8c01\u914d\u7f6e\u548c\u7ba1\u7406\uff1f \u4e0d\u9002\u7528 \u4f60 <p>Warning</p> <p>LangGraph Platform \u4e0d\u5e94\u90e8\u7f72\u5728\u65e0\u670d\u52a1\u5668\u73af\u5883\u4e2d\u3002\u7f29\u5bb9\u5230\u96f6\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4efb\u52a1\u4e22\u5931\uff0c\u6269\u5bb9\u4e5f\u65e0\u6cd5\u53ef\u9760\u5de5\u4f5c\u3002</p>","boost":2},{"location":"concepts/langgraph_standalone_container/#_3","title":"\u67b6\u6784","text":"","boost":2},{"location":"concepts/langgraph_standalone_container/#_4","title":"\u8ba1\u7b97\u5e73\u53f0","text":"","boost":2},{"location":"concepts/langgraph_standalone_container/#kubernetes","title":"Kubernetes","text":"<p>\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u9009\u9879\u652f\u6301\u5c06\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u90e8\u7f72\u5230 Kubernetes \u96c6\u7fa4\u3002</p>","boost":2},{"location":"concepts/langgraph_standalone_container/#docker","title":"Docker","text":"<p>\u72ec\u7acb\u5bb9\u5668\u90e8\u7f72\u9009\u9879\u652f\u6301\u5c06\u6570\u636e\u5e73\u9762\u57fa\u7840\u8bbe\u65bd\u90e8\u7f72\u5230\u4efb\u4f55\u652f\u6301 Docker \u7684\u8ba1\u7b97\u5e73\u53f0\u3002</p>","boost":2},{"location":"concepts/langgraph_studio/","title":"LangGraph Studio","text":"<p>\u5148\u51b3\u6761\u4ef6</p> <ul> <li>LangGraph Platform</li> <li>LangGraph Server</li> <li>LangGraph CLI</li> </ul> <p>LangGraph Studio \u662f\u4e00\u4e2a\u4e13\u4e1a\u7684\u667a\u80fd\u4ee3\u7406 IDE\uff0c\u53ef\u4ee5\u5bf9\u5b9e\u73b0 LangGraph Server API \u534f\u8bae\u7684\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u8fdb\u884c\u53ef\u89c6\u5316\u3001\u4ea4\u4e92\u548c\u8c03\u8bd5\u3002Studio \u8fd8\u4e0e LangSmith \u96c6\u6210\uff0c\u4ee5\u5b9e\u73b0\u8ddf\u8e2a\u3001\u8bc4\u4f30\u548c\u63d0\u793a\u5de5\u7a0b\u3002</p> <p></p>","boost":2},{"location":"concepts/langgraph_studio/#_1","title":"\u529f\u80fd","text":"<p>LangGraph Studio \u7684\u4e3b\u8981\u529f\u80fd\uff1a</p> <ul> <li>\u53ef\u89c6\u5316\u4f60\u7684\u56fe\u67b6\u6784</li> <li>\u8fd0\u884c\u5e76\u4e0e\u667a\u80fd\u4ee3\u7406\u4ea4\u4e92</li> <li>\u7ba1\u7406\u52a9\u624b</li> <li>\u7ba1\u7406\u7ebf\u7a0b</li> <li>\u8fed\u4ee3\u63d0\u793a</li> <li>\u5728\u6570\u636e\u96c6\u4e0a\u8fd0\u884c\u5b9e\u9a8c</li> <li>\u7ba1\u7406\u957f\u671f\u8bb0\u5fc6</li> <li>\u901a\u8fc7\u65f6\u95f4\u65c5\u884c\u8c03\u8bd5\u667a\u80fd\u4ee3\u7406\u72b6\u6001</li> </ul> <p>LangGraph Studio \u9002\u7528\u4e8e\u90e8\u7f72\u5728 LangGraph Platform \u4e0a\u7684\u56fe\uff0c\u6216\u901a\u8fc7 LangGraph Server \u5728\u672c\u5730\u8fd0\u884c\u7684\u56fe\u3002</p> <p>Studio \u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff1a</p>","boost":2},{"location":"concepts/langgraph_studio/#_2","title":"\u56fe\u6a21\u5f0f","text":"<p>\u56fe\u6a21\u5f0f\u5c55\u793a\u4e86 Studio \u7684\u5b8c\u6574\u529f\u80fd\u96c6\uff0c\u5f53\u4f60\u5e0c\u671b\u83b7\u53d6\u5173\u4e8e\u667a\u80fd\u4ee3\u7406\u6267\u884c\u7684\u5c3d\u53ef\u80fd\u591a\u7684\u8be6\u7ec6\u4fe1\u606f\u65f6\u975e\u5e38\u6709\u7528\uff0c\u5305\u62ec\u904d\u5386\u7684\u8282\u70b9\u3001\u4e2d\u95f4\u72b6\u6001\u548c LangSmith \u96c6\u6210\uff08\u4f8b\u5982\u6dfb\u52a0\u5230\u6570\u636e\u96c6\u548c Playground\uff09\u3002</p>","boost":2},{"location":"concepts/langgraph_studio/#_3","title":"\u804a\u5929\u6a21\u5f0f","text":"<p>\u804a\u5929\u6a21\u5f0f\u662f\u4e00\u4e2a\u66f4\u7b80\u5355\u7684 UI\uff0c\u7528\u4e8e\u8fed\u4ee3\u548c\u6d4b\u8bd5\u7279\u5b9a\u4e8e\u804a\u5929\u7684\u667a\u80fd\u4ee3\u7406\u3002\u5b83\u5bf9\u4e1a\u52a1\u7528\u6237\u548c\u60f3\u8981\u6d4b\u8bd5\u6574\u4f53\u667a\u80fd\u4ee3\u7406\u884c\u4e3a\u7684\u4eba\u5f88\u6709\u7528\u3002\u804a\u5929\u6a21\u5f0f\u4ec5\u652f\u6301\u72b6\u6001\u5305\u542b\u6216\u6269\u5c55 <code>MessagesState</code> \u7684\u56fe\u3002</p>","boost":2},{"location":"concepts/langgraph_studio/#_4","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u4e86\u89e3\u5982\u4f55\u5f00\u59cb\u4f7f\u7528 LangGraph Studio\u3002</li> </ul>","boost":2},{"location":"concepts/low_level/","title":"\u56fe API \u6982\u5ff5","text":"","boost":2},{"location":"concepts/low_level/#_1","title":"\u56fe","text":"<p>LangGraph \u7684\u6838\u5fc3\u662f\u5c06\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41\u5efa\u6a21\u4e3a\u56fe\u3002\u4f60\u4f7f\u7528\u4e09\u4e2a\u5173\u952e\u7ec4\u4ef6\u6765\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u7684\u884c\u4e3a\uff1a</p> <ol> <li> <p><code>State</code>\uff1a\u8868\u793a\u5e94\u7528\u7a0b\u5e8f\u5f53\u524d\u5feb\u7167\u7684\u5171\u4eab\u6570\u636e\u7ed3\u6784\u3002\u5b83\u53ef\u4ee5\u662f\u4efb\u4f55\u6570\u636e\u7c7b\u578b\uff0c\u4f46\u901a\u5e38\u4f7f\u7528\u5171\u4eab\u72b6\u6001\u6a21\u5f0f\u5b9a\u4e49\u3002</p> </li> <li> <p><code>Nodes</code>\uff1a\u7f16\u7801\u667a\u80fd\u4ee3\u7406\u903b\u8f91\u7684\u51fd\u6570\u3002\u5b83\u4eec\u63a5\u6536\u5f53\u524d\u72b6\u6001\u4f5c\u4e3a\u8f93\u5165\uff0c\u6267\u884c\u4e00\u4e9b\u8ba1\u7b97\u6216\u526f\u4f5c\u7528\uff0c\u5e76\u8fd4\u56de\u66f4\u65b0\u540e\u7684\u72b6\u6001\u3002</p> </li> <li> <p><code>Edges</code>\uff1a\u6839\u636e\u5f53\u524d\u72b6\u6001\u786e\u5b9a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684 <code>Node</code> \u7684\u51fd\u6570\u3002\u5b83\u4eec\u53ef\u4ee5\u662f\u6761\u4ef6\u5206\u652f\u6216\u56fa\u5b9a\u8f6c\u6362\u3002</p> </li> </ol> <p>\u901a\u8fc7\u7ec4\u5408 <code>Nodes</code> \u548c <code>Edges</code>\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u590d\u6742\u7684\u3001\u5faa\u73af\u7684\u5de5\u4f5c\u6d41\uff0c\u968f\u7740\u65f6\u95f4\u7684\u63a8\u79fb\u6f14\u53d8\u72b6\u6001\u3002\u7136\u800c\uff0c\u771f\u6b63\u7684\u529b\u91cf\u6765\u81ea\u4e8e LangGraph \u5982\u4f55\u7ba1\u7406\u8be5\u72b6\u6001\u3002\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff1a<code>Nodes</code> \u548c <code>Edges</code> \u53ea\u4e0d\u8fc7\u662f\u51fd\u6570\u2014\u2014\u5b83\u4eec\u53ef\u4ee5\u5305\u542b LLM \u6216\u53ea\u662f\u666e\u901a\u7684\u4ee3\u7801\u3002</p> <p>\u7b80\u800c\u8a00\u4e4b\uff1a\u8282\u70b9\u6267\u884c\u5de5\u4f5c\uff0c\u8fb9\u544a\u8bc9\u4e0b\u4e00\u6b65\u505a\u4ec0\u4e48\u3002</p> <p>LangGraph \u7684\u5e95\u5c42\u56fe\u7b97\u6cd5\u4f7f\u7528\u6d88\u606f\u4f20\u9012\u6765\u5b9a\u4e49\u901a\u7528\u7a0b\u5e8f\u3002\u5f53\u4e00\u4e2a\u8282\u70b9\u5b8c\u6210\u5176\u64cd\u4f5c\u65f6\uff0c\u5b83\u4f1a\u6cbf\u7740\u4e00\u6761\u6216\u591a\u6761\u8fb9\u5411\u5176\u4ed6\u8282\u70b9\u53d1\u9001\u6d88\u606f\u3002\u8fd9\u4e9b\u63a5\u6536\u8282\u70b9\u7136\u540e\u6267\u884c\u5b83\u4eec\u7684\u51fd\u6570\uff0c\u5c06\u7ed3\u679c\u6d88\u606f\u4f20\u9012\u7ed9\u4e0b\u4e00\u7ec4\u8282\u70b9\uff0c\u8fc7\u7a0b\u7ee7\u7eed\u3002\u53d7 Google \u7684 Pregel \u7cfb\u7edf\u542f\u53d1\uff0c\u7a0b\u5e8f\u4ee5\u79bb\u6563\u7684\"\u8d85\u6b65\"\u8fdb\u884c\u3002</p> <p>\u8d85\u6b65\u53ef\u4ee5\u88ab\u89c6\u4e3a\u56fe\u8282\u70b9\u4e0a\u7684\u5355\u6b21\u8fed\u4ee3\u3002\u5e76\u884c\u8fd0\u884c\u7684\u8282\u70b9\u662f\u540c\u4e00\u8d85\u6b65\u7684\u4e00\u90e8\u5206\uff0c\u800c\u987a\u5e8f\u8fd0\u884c\u7684\u8282\u70b9\u5c5e\u4e8e\u4e0d\u540c\u7684\u8d85\u6b65\u3002\u5728\u56fe\u6267\u884c\u5f00\u59cb\u65f6\uff0c\u6240\u6709\u8282\u70b9\u90fd\u4ee5 <code>inactive</code> \u72b6\u6001\u5f00\u59cb\u3002\u5f53\u8282\u70b9\u5728\u5176\u4efb\u4f55\u4f20\u5165\u8fb9\uff08\u6216\"\u901a\u9053\"\uff09\u4e0a\u6536\u5230\u65b0\u6d88\u606f\uff08\u72b6\u6001\uff09\u65f6\uff0c\u5b83\u53d8\u4e3a <code>active</code>\u3002\u7136\u540e\u6d3b\u52a8\u8282\u70b9\u8fd0\u884c\u5176\u51fd\u6570\u5e76\u54cd\u5e94\u66f4\u65b0\u3002\u5728\u6bcf\u4e2a\u8d85\u6b65\u7ed3\u675f\u65f6\uff0c\u6ca1\u6709\u4f20\u5165\u6d88\u606f\u7684\u8282\u70b9\u901a\u8fc7\u5c06\u81ea\u5df1\u6807\u8bb0\u4e3a <code>inactive</code> \u6765\u6295\u7968 <code>halt</code>\u3002\u5f53\u6240\u6709\u8282\u70b9\u90fd\u5904\u4e8e <code>inactive</code> \u72b6\u6001\u4e14\u6ca1\u6709\u6d88\u606f\u5728\u4f20\u8f93\u4e2d\u65f6\uff0c\u56fe\u6267\u884c\u7ec8\u6b62\u3002</p>","boost":2},{"location":"concepts/low_level/#stategraph","title":"StateGraph","text":"<p><code>StateGraph</code> \u7c7b\u662f\u8981\u4f7f\u7528\u7684\u4e3b\u8981\u56fe\u7c7b\u3002\u5b83\u7531\u7528\u6237\u5b9a\u4e49\u7684 <code>State</code> \u5bf9\u8c61\u53c2\u6570\u5316\u3002</p>","boost":2},{"location":"concepts/low_level/#_2","title":"\u7f16\u8bd1\u4f60\u7684\u56fe","text":"<p>\u8981\u6784\u5efa\u4f60\u7684\u56fe\uff0c\u4f60\u9996\u5148\u5b9a\u4e49\u72b6\u6001\uff0c\u7136\u540e\u6dfb\u52a0\u8282\u70b9\u548c\u8fb9\uff0c\u6700\u540e\u7f16\u8bd1\u5b83\u3002\u7f16\u8bd1\u4f60\u7684\u56fe\u5230\u5e95\u662f\u4ec0\u4e48\uff0c\u4e3a\u4ec0\u4e48\u9700\u8981\u5b83\uff1f</p> <p>\u7f16\u8bd1\u662f\u4e00\u4e2a\u76f8\u5f53\u7b80\u5355\u7684\u6b65\u9aa4\u3002\u5b83\u5bf9\u56fe\u7684\u7ed3\u6784\u8fdb\u884c\u4e00\u4e9b\u57fa\u672c\u68c0\u67e5\uff08\u6ca1\u6709\u5b64\u7acb\u8282\u70b9\u7b49\uff09\u3002\u5b83\u4e5f\u662f\u4f60\u53ef\u4ee5\u6307\u5b9a\u8fd0\u884c\u65f6\u53c2\u6570\uff08\u5982\u68c0\u67e5\u70b9\u5668\u548c\u65ad\u70b9\uff09\u7684\u5730\u65b9\u3002\u4f60\u53ea\u9700\u8c03\u7528 <code>.compile</code> \u65b9\u6cd5\u6765\u7f16\u8bd1\u4f60\u7684\u56fe\uff1a</p> Python <pre><code>graph = graph_builder.compile(...)\n</code></pre> JavaScript <pre><code>const graph = new StateGraph(StateAnnotation)\n  .addNode(\"nodeA\", nodeA)\n  .addEdge(START, \"nodeA\")\n  .addEdge(\"nodeA\", END)\n  .compile();\n</code></pre> <p>\u4f60**\u5fc5\u987b**\u5728\u4f7f\u7528\u56fe\u4e4b\u524d\u7f16\u8bd1\u5b83\u3002</p>","boost":2},{"location":"concepts/low_level/#_3","title":"\u72b6\u6001","text":"Python <p>\u5b9a\u4e49\u56fe\u65f6\uff0c\u4f60\u9996\u5148\u8981\u505a\u7684\u662f\u5b9a\u4e49\u56fe\u7684 <code>State</code>\u3002<code>State</code> \u7531\u56fe\u7684\u6a21\u5f0f\u4ee5\u53ca\u6307\u5b9a\u5982\u4f55\u5c06\u66f4\u65b0\u5e94\u7528\u4e8e\u72b6\u6001\u7684 <code>reducer</code> \u51fd\u6570\u7ec4\u6210\u3002<code>State</code> \u7684\u6a21\u5f0f\u5c06\u662f\u56fe\u4e2d\u6240\u6709 <code>Nodes</code> \u548c <code>Edges</code> \u7684\u8f93\u5165\u6a21\u5f0f\uff0c\u53ef\u4ee5\u662f <code>TypedDict</code> \u6216 <code>Pydantic</code> \u6a21\u578b\u3002\u6240\u6709 <code>Nodes</code> \u5c06\u53d1\u51fa\u5bf9 <code>State</code> \u7684\u66f4\u65b0\uff0c\u7136\u540e\u4f7f\u7528\u6307\u5b9a\u7684 <code>reducer</code> \u51fd\u6570\u5e94\u7528\u8fd9\u4e9b\u66f4\u65b0\u3002</p> JavaScript <p>\u5b9a\u4e49\u56fe\u65f6\uff0c\u4f60\u9996\u5148\u8981\u505a\u7684\u662f\u5b9a\u4e49\u56fe\u7684 <code>State</code>\u3002<code>State</code> \u7531\u56fe\u7684\u6a21\u5f0f\u4ee5\u53ca\u6307\u5b9a\u5982\u4f55\u5c06\u66f4\u65b0\u5e94\u7528\u4e8e\u72b6\u6001\u7684 <code>reducer</code> \u51fd\u6570\u7ec4\u6210\u3002<code>State</code> \u7684\u6a21\u5f0f\u5c06\u662f\u56fe\u4e2d\u6240\u6709 <code>Nodes</code> \u548c <code>Edges</code> \u7684\u8f93\u5165\u6a21\u5f0f\uff0c\u53ef\u4ee5\u662f Zod \u6a21\u5f0f\u6216\u4f7f\u7528 <code>Annotation.Root</code> \u6784\u5efa\u7684\u6a21\u5f0f\u3002\u6240\u6709 <code>Nodes</code> \u5c06\u53d1\u51fa\u5bf9 <code>State</code> \u7684\u66f4\u65b0\uff0c\u7136\u540e\u4f7f\u7528\u6307\u5b9a\u7684 <code>reducer</code> \u51fd\u6570\u5e94\u7528\u8fd9\u4e9b\u66f4\u65b0\u3002</p>","boost":2},{"location":"concepts/low_level/#_4","title":"\u6a21\u5f0f","text":"Python <p>\u6307\u5b9a\u56fe\u6a21\u5f0f\u7684\u4e3b\u8981\u6587\u6863\u5316\u65b9\u5f0f\u662f\u4f7f\u7528 <code>TypedDict</code>\u3002\u5982\u679c\u4f60\u60f3\u5728\u72b6\u6001\u4e2d\u63d0\u4f9b\u9ed8\u8ba4\u503c\uff0c\u8bf7\u4f7f\u7528 <code>dataclass</code>\u3002\u5982\u679c\u4f60\u60f3\u8981\u9012\u5f52\u6570\u636e\u9a8c\u8bc1\uff0c\u6211\u4eec\u4e5f\u652f\u6301\u4f7f\u7528 Pydantic BaseModel \u4f5c\u4e3a\u56fe\u72b6\u6001\uff08\u4f46\u8bf7\u6ce8\u610f\uff0cpydantic \u7684\u6027\u80fd\u4e0d\u5982 <code>TypedDict</code> \u6216 <code>dataclass</code>\uff09\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u56fe\u5c06\u5177\u6709\u76f8\u540c\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002\u5982\u679c\u4f60\u60f3\u66f4\u6539\u6b64\u8bbe\u7f6e\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u663e\u5f0f\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002\u5f53\u4f60\u6709\u5f88\u591a\u952e\uff0c\u5176\u4e2d\u4e00\u4e9b\u660e\u786e\u7528\u4e8e\u8f93\u5165\uff0c\u53e6\u4e00\u4e9b\u7528\u4e8e\u8f93\u51fa\u65f6\uff0c\u8fd9\u5f88\u6709\u7528\u3002\u8bf7\u53c2\u9605\u6b64\u5904\u7684\u6307\u5357\u4e86\u89e3\u5982\u4f55\u4f7f\u7528\u3002</p> JavaScript <p>\u6307\u5b9a\u56fe\u6a21\u5f0f\u7684\u4e3b\u8981\u6587\u6863\u5316\u65b9\u5f0f\u662f\u4f7f\u7528 Zod \u6a21\u5f0f\u3002\u4f46\u662f\uff0c\u6211\u4eec\u4e5f\u652f\u6301\u4f7f\u7528 <code>Annotation</code> API \u6765\u5b9a\u4e49\u56fe\u7684\u6a21\u5f0f\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u56fe\u5c06\u5177\u6709\u76f8\u540c\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002\u5982\u679c\u4f60\u60f3\u66f4\u6539\u6b64\u8bbe\u7f6e\uff0c\u4f60\u4e5f\u53ef\u4ee5\u76f4\u63a5\u6307\u5b9a\u663e\u5f0f\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002\u5f53\u4f60\u6709\u5f88\u591a\u952e\uff0c\u5176\u4e2d\u4e00\u4e9b\u660e\u786e\u7528\u4e8e\u8f93\u5165\uff0c\u53e6\u4e00\u4e9b\u7528\u4e8e\u8f93\u51fa\u65f6\uff0c\u8fd9\u5f88\u6709\u7528\u3002</p>","boost":2},{"location":"concepts/low_level/#_5","title":"\u591a\u4e2a\u6a21\u5f0f","text":"<p>\u901a\u5e38\uff0c\u6240\u6709\u56fe\u8282\u70b9\u90fd\u4f7f\u7528\u5355\u4e2a\u6a21\u5f0f\u8fdb\u884c\u901a\u4fe1\u3002\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u5c06\u8bfb\u53d6\u548c\u5199\u5165\u76f8\u540c\u7684\u72b6\u6001\u901a\u9053\u3002\u4f46\u662f\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5e0c\u671b\u5bf9\u6b64\u6709\u66f4\u591a\u63a7\u5236\uff1a</p> <ul> <li>\u5185\u90e8\u8282\u70b9\u53ef\u4ee5\u4f20\u9012\u56fe\u8f93\u5165/\u8f93\u51fa\u4e2d\u4e0d\u9700\u8981\u7684\u4fe1\u606f\u3002</li> <li>\u6211\u4eec\u53ef\u80fd\u8fd8\u60f3\u4e3a\u56fe\u4f7f\u7528\u4e0d\u540c\u7684\u8f93\u5165/\u8f93\u51fa\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u8f93\u51fa\u53ef\u80fd\u53ea\u5305\u542b\u4e00\u4e2a\u76f8\u5173\u7684\u8f93\u51fa\u952e\u3002</li> </ul> <p>\u53ef\u4ee5\u8ba9\u8282\u70b9\u5199\u5165\u56fe\u5185\u90e8\u7684\u79c1\u6709\u72b6\u6001\u901a\u9053\u4ee5\u8fdb\u884c\u5185\u90e8\u8282\u70b9\u901a\u4fe1\u3002\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u5730\u5b9a\u4e49\u4e00\u4e2a\u79c1\u6709\u6a21\u5f0f <code>PrivateState</code>\u3002</p> <p>\u4e5f\u53ef\u4ee5\u4e3a\u56fe\u5b9a\u4e49\u663e\u5f0f\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u4e0e\u56fe\u64cd\u4f5c\u76f8\u5173\u7684_\u6240\u6709_\u952e\u7684\"\u5185\u90e8\"\u6a21\u5f0f\u3002\u4f46\u662f\uff0c\u6211\u4eec\u8fd8\u5b9a\u4e49\u4e86 <code>input</code> \u548c <code>output</code> \u6a21\u5f0f\uff0c\u5b83\u4eec\u662f\"\u5185\u90e8\"\u6a21\u5f0f\u7684\u5b50\u96c6\uff0c\u7528\u4e8e\u7ea6\u675f\u56fe\u7684\u8f93\u5165\u548c\u8f93\u51fa\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> Python <pre><code>class InputState(TypedDict):\n    user_input: str\n\nclass OutputState(TypedDict):\n    graph_output: str\n\nclass OverallState(TypedDict):\n    foo: str\n    user_input: str\n    graph_output: str\n\nclass PrivateState(TypedDict):\n    bar: str\n\ndef node_1(state: InputState) -&gt; OverallState:\n    # Write to OverallState\n    return {\"foo\": state[\"user_input\"] + \" name\"}\n\ndef node_2(state: OverallState) -&gt; PrivateState:\n    # Read from OverallState, write to PrivateState\n    return {\"bar\": state[\"foo\"] + \" is\"}\n\ndef node_3(state: PrivateState) -&gt; OutputState:\n    # Read from PrivateState, write to OutputState\n    return {\"graph_output\": state[\"bar\"] + \" Lance\"}\n\nbuilder = StateGraph(OverallState,input_schema=InputState,output_schema=OutputState)\nbuilder.add_node(\"node_1\", node_1)\nbuilder.add_node(\"node_2\", node_2)\nbuilder.add_node(\"node_3\", node_3)\nbuilder.add_edge(START, \"node_1\")\nbuilder.add_edge(\"node_1\", \"node_2\")\nbuilder.add_edge(\"node_2\", \"node_3\")\nbuilder.add_edge(\"node_3\", END)\n\ngraph = builder.compile()\ngraph.invoke({\"user_input\":\"My\"})\n# {'graph_output': 'My name is Lance'}\n</code></pre> JavaScript <pre><code>const InputState = z.object({\n  userInput: z.string(),\n});\n\nconst OutputState = z.object({\n  graphOutput: z.string(),\n});\n\nconst OverallState = z.object({\n  foo: z.string(),\n  userInput: z.string(),\n  graphOutput: z.string(),\n});\n\nconst PrivateState = z.object({\n  bar: z.string(),\n});\n\nconst graph = new StateGraph({\n  state: OverallState,\n  input: InputState,\n  output: OutputState,\n})\n  .addNode(\"node1\", (state) =&gt; {\n    // Write to OverallState\n    return { foo: state.userInput + \" name\" };\n  })\n  .addNode(\"node2\", (state) =&gt; {\n    // Read from OverallState, write to PrivateState\n    return { bar: state.foo + \" is\" };\n  })\n  .addNode(\n    \"node3\",\n    (state) =&gt; {\n      // Read from PrivateState, write to OutputState\n      return { graphOutput: state.bar + \" Lance\" };\n    },\n    { input: PrivateState }\n  )\n  .addEdge(START, \"node1\")\n  .addEdge(\"node1\", \"node2\")\n  .addEdge(\"node2\", \"node3\")\n  .addEdge(\"node3\", END)\n  .compile();\n\nawait graph.invoke({ userInput: \"My\" });\n// { graphOutput: 'My name is Lance' }\n</code></pre> <p>\u8fd9\u91cc\u6709\u4e24\u4e2a\u5fae\u5999\u800c\u91cd\u8981\u7684\u70b9\u9700\u8981\u6ce8\u610f\uff1a</p> Python <ol> <li> <p>\u6211\u4eec\u5c06 <code>state: InputState</code> \u4f5c\u4e3a\u8f93\u5165\u6a21\u5f0f\u4f20\u9012\u7ed9 <code>node_1</code>\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5199\u51fa\u5230 <code>foo</code>\uff0c\u8fd9\u662f <code>OverallState</code> \u4e2d\u7684\u4e00\u4e2a\u901a\u9053\u3002\u6211\u4eec\u5982\u4f55\u80fd\u5199\u51fa\u5230\u4e00\u4e2a\u4e0d\u5305\u542b\u5728\u8f93\u5165\u6a21\u5f0f\u4e2d\u7684\u72b6\u6001\u901a\u9053\uff1f\u8fd9\u662f\u56e0\u4e3a\u8282\u70b9_\u53ef\u4ee5\u5199\u5165\u56fe\u72b6\u6001\u4e2d\u7684\u4efb\u4f55\u72b6\u6001\u901a\u9053_\u3002\u56fe\u72b6\u6001\u662f\u5728\u521d\u59cb\u5316\u65f6\u5b9a\u4e49\u7684\u72b6\u6001\u901a\u9053\u7684\u5e76\u96c6\uff0c\u5305\u62ec <code>OverallState</code> \u548c\u8fc7\u6ee4\u5668 <code>InputState</code> \u548c <code>OutputState</code>\u3002</p> </li> <li> <p>\u6211\u4eec\u7528 <code>StateGraph(OverallState,input_schema=InputState,output_schema=OutputState)</code> \u521d\u59cb\u5316\u56fe\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5982\u4f55\u80fd\u5728 <code>node_2</code> \u4e2d\u5199\u5165 <code>PrivateState</code>\uff1f\u5982\u679c\u5b83\u6ca1\u6709\u5728 <code>StateGraph</code> \u521d\u59cb\u5316\u4e2d\u4f20\u9012\uff0c\u56fe\u5982\u4f55\u83b7\u5f97\u5bf9\u6b64\u6a21\u5f0f\u7684\u8bbf\u95ee\uff1f\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u505a\u662f\u56e0\u4e3a_\u8282\u70b9\u4e5f\u53ef\u4ee5\u58f0\u660e\u989d\u5916\u7684\u72b6\u6001\u901a\u9053_\uff0c\u53ea\u8981\u72b6\u6001\u6a21\u5f0f\u5b9a\u4e49\u5b58\u5728\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>PrivateState</code> \u6a21\u5f0f\u5df2\u5b9a\u4e49\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u56fe\u4e2d\u6dfb\u52a0 <code>bar</code> \u4f5c\u4e3a\u65b0\u7684\u72b6\u6001\u901a\u9053\u5e76\u5199\u5165\u5b83\u3002</p> </li> </ol> JavaScript <ol> <li> <p>\u6211\u4eec\u5c06 <code>state</code> \u4f5c\u4e3a\u8f93\u5165\u6a21\u5f0f\u4f20\u9012\u7ed9 <code>node1</code>\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5199\u51fa\u5230 <code>foo</code>\uff0c\u8fd9\u662f <code>OverallState</code> \u4e2d\u7684\u4e00\u4e2a\u901a\u9053\u3002\u6211\u4eec\u5982\u4f55\u80fd\u5199\u51fa\u5230\u4e00\u4e2a\u4e0d\u5305\u542b\u5728\u8f93\u5165\u6a21\u5f0f\u4e2d\u7684\u72b6\u6001\u901a\u9053\uff1f\u8fd9\u662f\u56e0\u4e3a\u8282\u70b9_\u53ef\u4ee5\u5199\u5165\u56fe\u72b6\u6001\u4e2d\u7684\u4efb\u4f55\u72b6\u6001\u901a\u9053_\u3002\u56fe\u72b6\u6001\u662f\u5728\u521d\u59cb\u5316\u65f6\u5b9a\u4e49\u7684\u72b6\u6001\u901a\u9053\u7684\u5e76\u96c6\uff0c\u5305\u62ec <code>OverallState</code> \u548c\u8fc7\u6ee4\u5668 <code>InputState</code> \u548c <code>OutputState</code>\u3002</p> </li> <li> <p>\u6211\u4eec\u7528 <code>StateGraph({ state: OverallState, input: InputState, output: OutputState })</code> \u521d\u59cb\u5316\u56fe\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u5982\u4f55\u80fd\u5728 <code>node2</code> \u4e2d\u5199\u5165 <code>PrivateState</code>\uff1f\u5982\u679c\u5b83\u6ca1\u6709\u5728 <code>StateGraph</code> \u521d\u59cb\u5316\u4e2d\u4f20\u9012\uff0c\u56fe\u5982\u4f55\u83b7\u5f97\u5bf9\u6b64\u6a21\u5f0f\u7684\u8bbf\u95ee\uff1f\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u505a\u662f\u56e0\u4e3a_\u8282\u70b9\u4e5f\u53ef\u4ee5\u58f0\u660e\u989d\u5916\u7684\u72b6\u6001\u901a\u9053_\uff0c\u53ea\u8981\u72b6\u6001\u6a21\u5f0f\u5b9a\u4e49\u5b58\u5728\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c<code>PrivateState</code> \u6a21\u5f0f\u5df2\u5b9a\u4e49\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u56fe\u4e2d\u6dfb\u52a0 <code>bar</code> \u4f5c\u4e3a\u65b0\u7684\u72b6\u6001\u901a\u9053\u5e76\u5199\u5165\u5b83\u3002</p> </li> </ol>","boost":2},{"location":"concepts/low_level/#_6","title":"\u5f52\u7ea6\u5668","text":"<p>\u5f52\u7ea6\u5668\u662f\u7406\u89e3\u8282\u70b9\u66f4\u65b0\u5982\u4f55\u5e94\u7528\u4e8e <code>State</code> \u7684\u5173\u952e\u3002<code>State</code> \u4e2d\u7684\u6bcf\u4e2a\u952e\u90fd\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5f52\u7ea6\u5668\u51fd\u6570\u3002\u5982\u679c\u6ca1\u6709\u663e\u5f0f\u6307\u5b9a\u5f52\u7ea6\u5668\u51fd\u6570\uff0c\u5219\u5047\u5b9a\u5bf9\u8be5\u952e\u7684\u6240\u6709\u66f4\u65b0\u90fd\u5e94\u8be5\u8986\u76d6\u5b83\u3002\u6709\u51e0\u79cd\u4e0d\u540c\u7c7b\u578b\u7684\u5f52\u7ea6\u5668\uff0c\u4ece\u9ed8\u8ba4\u7c7b\u578b\u7684\u5f52\u7ea6\u5668\u5f00\u59cb\uff1a</p>","boost":2},{"location":"concepts/low_level/#_7","title":"\u9ed8\u8ba4\u5f52\u7ea6\u5668","text":"<p>\u8fd9\u4e24\u4e2a\u4f8b\u5b50\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528\u9ed8\u8ba4\u5f52\u7ea6\u5668\uff1a</p> <p>\u793a\u4f8b A\uff1a</p> Python <pre><code>from typing_extensions import TypedDict\n\nclass State(TypedDict):\n    foo: int\n    bar: list[str]\n</code></pre> JavaScript <pre><code>const State = z.object({\n  foo: z.number(),\n  bar: z.array(z.string()),\n});\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6ca1\u6709\u4e3a\u4efb\u4f55\u952e\u6307\u5b9a\u5f52\u7ea6\u5668\u51fd\u6570\u3002\u5047\u8bbe\u56fe\u7684\u8f93\u5165\u662f\uff1a</p> Python <p><code>{\"foo\": 1, \"bar\": [\"hi\"]}</code>\u3002\u7136\u540e\u5047\u8bbe\u7b2c\u4e00\u4e2a <code>Node</code> \u8fd4\u56de <code>{\"foo\": 2}</code>\u3002\u8fd9\u88ab\u89c6\u4e3a\u5bf9\u72b6\u6001\u7684\u66f4\u65b0\u3002\u6ce8\u610f <code>Node</code> \u4e0d\u9700\u8981\u8fd4\u56de\u6574\u4e2a <code>State</code> \u6a21\u5f0f\u2014\u2014\u53ea\u9700\u8981\u4e00\u4e2a\u66f4\u65b0\u3002\u5e94\u7528\u6b64\u66f4\u65b0\u540e\uff0c<code>State</code> \u5c06\u53d8\u4e3a <code>{\"foo\": 2, \"bar\": [\"hi\"]}</code>\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u8282\u70b9\u8fd4\u56de <code>{\"bar\": [\"bye\"]}</code>\uff0c\u5219 <code>State</code> \u5c06\u53d8\u4e3a <code>{\"foo\": 2, \"bar\": [\"bye\"]}</code></p> JavaScript <p><code>{ foo: 1, bar: [\"hi\"] }</code>\u3002\u7136\u540e\u5047\u8bbe\u7b2c\u4e00\u4e2a <code>Node</code> \u8fd4\u56de <code>{ foo: 2 }</code>\u3002\u8fd9\u88ab\u89c6\u4e3a\u5bf9\u72b6\u6001\u7684\u66f4\u65b0\u3002\u6ce8\u610f <code>Node</code> \u4e0d\u9700\u8981\u8fd4\u56de\u6574\u4e2a <code>State</code> \u6a21\u5f0f\u2014\u2014\u53ea\u9700\u8981\u4e00\u4e2a\u66f4\u65b0\u3002\u5e94\u7528\u6b64\u66f4\u65b0\u540e\uff0c<code>State</code> \u5c06\u53d8\u4e3a <code>{ foo: 2, bar: [\"hi\"] }</code>\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u8282\u70b9\u8fd4\u56de <code>{ bar: [\"bye\"] }</code>\uff0c\u5219 <code>State</code> \u5c06\u53d8\u4e3a <code>{ foo: 2, bar: [\"bye\"] }</code></p> <p>\u793a\u4f8b B\uff1a</p> Python <pre><code>from typing import Annotated\nfrom typing_extensions import TypedDict\nfrom operator import add\n\nclass State(TypedDict):\n    foo: int\n    bar: Annotated[list[str], add]\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>Annotated</code> \u7c7b\u578b\u4e3a\u7b2c\u4e8c\u4e2a\u952e\uff08<code>bar</code>\uff09\u6307\u5b9a\u4e86\u4e00\u4e2a\u5f52\u7ea6\u5668\u51fd\u6570\uff08<code>operator.add</code>\uff09\u3002\u6ce8\u610f\u7b2c\u4e00\u4e2a\u952e\u4fdd\u6301\u4e0d\u53d8\u3002\u5047\u8bbe\u56fe\u7684\u8f93\u5165\u662f <code>{\"foo\": 1, \"bar\": [\"hi\"]}</code>\u3002\u7136\u540e\u5047\u8bbe\u7b2c\u4e00\u4e2a <code>Node</code> \u8fd4\u56de <code>{\"foo\": 2}</code>\u3002\u8fd9\u88ab\u89c6\u4e3a\u5bf9\u72b6\u6001\u7684\u66f4\u65b0\u3002\u6ce8\u610f <code>Node</code> \u4e0d\u9700\u8981\u8fd4\u56de\u6574\u4e2a <code>State</code> \u6a21\u5f0f\u2014\u2014\u53ea\u9700\u8981\u4e00\u4e2a\u66f4\u65b0\u3002\u5e94\u7528\u6b64\u66f4\u65b0\u540e\uff0c<code>State</code> \u5c06\u53d8\u4e3a <code>{\"foo\": 2, \"bar\": [\"hi\"]}</code>\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u8282\u70b9\u8fd4\u56de <code>{\"bar\": [\"bye\"]}</code>\uff0c\u5219 <code>State</code> \u5c06\u53d8\u4e3a <code>{\"foo\": 2, \"bar\": [\"hi\", \"bye\"]}</code>\u3002\u6ce8\u610f\u8fd9\u91cc <code>bar</code> \u952e\u662f\u901a\u8fc7\u5c06\u4e24\u4e2a\u5217\u8868\u76f8\u52a0\u6765\u66f4\u65b0\u7684\u3002</p> JavaScript <pre><code>import { z } from \"zod\";\nimport { withLangGraph } from \"@langchain/langgraph/zod\";\n\nconst State = z.object({\n  foo: z.number(),\n  bar: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (x, y) =&gt; x.concat(y),\n    },\n  }),\n});\n</code></pre> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>withLangGraph</code> \u51fd\u6570\u4e3a\u7b2c\u4e8c\u4e2a\u952e\uff08<code>bar</code>\uff09\u6307\u5b9a\u4e86\u4e00\u4e2a\u5f52\u7ea6\u5668\u51fd\u6570\u3002\u6ce8\u610f\u7b2c\u4e00\u4e2a\u952e\u4fdd\u6301\u4e0d\u53d8\u3002\u5047\u8bbe\u56fe\u7684\u8f93\u5165\u662f <code>{ foo: 1, bar: [\"hi\"] }</code>\u3002\u7136\u540e\u5047\u8bbe\u7b2c\u4e00\u4e2a <code>Node</code> \u8fd4\u56de <code>{ foo: 2 }</code>\u3002\u8fd9\u88ab\u89c6\u4e3a\u5bf9\u72b6\u6001\u7684\u66f4\u65b0\u3002\u6ce8\u610f <code>Node</code> \u4e0d\u9700\u8981\u8fd4\u56de\u6574\u4e2a <code>State</code> \u6a21\u5f0f\u2014\u2014\u53ea\u9700\u8981\u4e00\u4e2a\u66f4\u65b0\u3002\u5e94\u7528\u6b64\u66f4\u65b0\u540e\uff0c<code>State</code> \u5c06\u53d8\u4e3a <code>{ foo: 2, bar: [\"hi\"] }</code>\u3002\u5982\u679c\u7b2c\u4e8c\u4e2a\u8282\u70b9\u8fd4\u56de <code>{ bar: [\"bye\"] }</code>\uff0c\u5219 <code>State</code> \u5c06\u53d8\u4e3a <code>{ foo: 2, bar: [\"hi\", \"bye\"] }</code>\u3002\u6ce8\u610f\u8fd9\u91cc <code>bar</code> \u952e\u662f\u901a\u8fc7\u5c06\u4e24\u4e2a\u6570\u7ec4\u76f8\u52a0\u6765\u66f4\u65b0\u7684\u3002</p>","boost":2},{"location":"concepts/low_level/#_8","title":"\u5728\u56fe\u72b6\u6001\u4e2d\u4f7f\u7528\u6d88\u606f","text":"","boost":2},{"location":"concepts/low_level/#_9","title":"\u4e3a\u4ec0\u4e48\u4f7f\u7528\u6d88\u606f\uff1f","text":"Python <p>\u5927\u591a\u6570\u73b0\u4ee3 LLM \u63d0\u4f9b\u5546\u90fd\u6709\u4e00\u4e2a\u63a5\u53d7\u6d88\u606f\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\u7684\u804a\u5929\u6a21\u578b\u63a5\u53e3\u3002LangChain \u7684 <code>ChatModel</code> \u7279\u522b\u63a5\u53d7 <code>Message</code> \u5bf9\u8c61\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\u3002\u8fd9\u4e9b\u6d88\u606f\u6709\u591a\u79cd\u5f62\u5f0f\uff0c\u5982 <code>HumanMessage</code>\uff08\u7528\u6237\u8f93\u5165\uff09\u6216 <code>AIMessage</code>\uff08LLM \u54cd\u5e94\uff09\u3002\u8981\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u6d88\u606f\u5bf9\u8c61\u662f\u4ec0\u4e48\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u6982\u5ff5\u6307\u5357\u3002</p> JavaScript <p>\u5927\u591a\u6570\u73b0\u4ee3 LLM \u63d0\u4f9b\u5546\u90fd\u6709\u4e00\u4e2a\u63a5\u53d7\u6d88\u606f\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\u7684\u804a\u5929\u6a21\u578b\u63a5\u53e3\u3002LangChain \u7684 <code>ChatModel</code> \u7279\u522b\u63a5\u53d7 <code>Message</code> \u5bf9\u8c61\u5217\u8868\u4f5c\u4e3a\u8f93\u5165\u3002\u8fd9\u4e9b\u6d88\u606f\u6709\u591a\u79cd\u5f62\u5f0f\uff0c\u5982 <code>HumanMessage</code>\uff08\u7528\u6237\u8f93\u5165\uff09\u6216 <code>AIMessage</code>\uff08LLM \u54cd\u5e94\uff09\u3002\u8981\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u6d88\u606f\u5bf9\u8c61\u662f\u4ec0\u4e48\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u6982\u5ff5\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/low_level/#_10","title":"\u5728\u56fe\u4e2d\u4f7f\u7528\u6d88\u606f","text":"Python <p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5c06\u5148\u524d\u7684\u5bf9\u8bdd\u5386\u53f2\u8bb0\u5f55\u4f5c\u4e3a\u6d88\u606f\u5217\u8868\u5b58\u50a8\u5728\u56fe\u72b6\u6001\u4e2d\u662f\u6709\u5e2e\u52a9\u7684\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5411\u56fe\u72b6\u6001\u6dfb\u52a0\u4e00\u4e2a\u952e\uff08\u901a\u9053\uff09\uff0c\u7528\u4e8e\u5b58\u50a8 <code>Message</code> \u5bf9\u8c61\u5217\u8868\uff0c\u5e76\u4f7f\u7528\u5f52\u7ea6\u5668\u51fd\u6570\u5bf9\u5176\u8fdb\u884c\u6ce8\u91ca\uff08\u53c2\u89c1\u4e0b\u9762\u793a\u4f8b\u4e2d\u7684 <code>messages</code> \u952e\uff09\u3002\u5f52\u7ea6\u5668\u51fd\u6570\u5bf9\u4e8e\u544a\u8bc9\u56fe\u5982\u4f55\u5728\u6bcf\u6b21\u72b6\u6001\u66f4\u65b0\u65f6\u66f4\u65b0 <code>State</code> \u4e2d\u7684 <code>Message</code> \u5bf9\u8c61\u5217\u8868\u81f3\u5173\u91cd\u8981\uff08\u4f8b\u5982\uff0c\u5f53\u8282\u70b9\u53d1\u9001\u66f4\u65b0\u65f6\uff09\u3002\u5982\u679c\u4f60\u4e0d\u6307\u5b9a\u5f52\u7ea6\u5668\uff0c\u6bcf\u6b21\u72b6\u6001\u66f4\u65b0\u90fd\u4f1a\u7528\u6700\u8fd1\u63d0\u4f9b\u7684\u503c\u8986\u76d6\u6d88\u606f\u5217\u8868\u3002\u5982\u679c\u4f60\u60f3\u7b80\u5355\u5730\u5c06\u6d88\u606f\u9644\u52a0\u5230\u73b0\u6709\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>operator.add</code> \u4f5c\u4e3a\u5f52\u7ea6\u5668\u3002</p> <p>\u4f46\u662f\uff0c\u4f60\u53ef\u80fd\u8fd8\u60f3\u624b\u52a8\u66f4\u65b0\u56fe\u72b6\u6001\u4e2d\u7684\u6d88\u606f\uff08\u4f8b\u5982\uff0c\u4eba\u673a\u534f\u540c\uff09\u3002\u5982\u679c\u4f60\u4f7f\u7528 <code>operator.add</code>\uff0c\u4f60\u53d1\u9001\u5230\u56fe\u7684\u624b\u52a8\u72b6\u6001\u66f4\u65b0\u5c06\u88ab\u9644\u52a0\u5230\u73b0\u6709\u7684\u6d88\u606f\u5217\u8868\uff0c\u800c\u4e0d\u662f\u66f4\u65b0\u73b0\u6709\u6d88\u606f\u3002\u4e3a\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u4f60\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u8ddf\u8e2a\u6d88\u606f ID \u5e76\u8986\u76d6\u73b0\u6709\u6d88\u606f\uff08\u5982\u679c\u66f4\u65b0\uff09\u7684\u5f52\u7ea6\u5668\u3002\u4e3a\u6b64\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 <code>add_messages</code> \u51fd\u6570\u3002\u5bf9\u4e8e\u5168\u65b0\u7684\u6d88\u606f\uff0c\u5b83\u5c06\u7b80\u5355\u5730\u9644\u52a0\u5230\u73b0\u6709\u5217\u8868\uff0c\u4f46\u5b83\u4e5f\u4f1a\u6b63\u786e\u5904\u7406\u73b0\u6709\u6d88\u606f\u7684\u66f4\u65b0\u3002</p> JavaScript <p>\u5728\u8bb8\u591a\u60c5\u51b5\u4e0b\uff0c\u5c06\u5148\u524d\u7684\u5bf9\u8bdd\u5386\u53f2\u8bb0\u5f55\u4f5c\u4e3a\u6d88\u606f\u5217\u8868\u5b58\u50a8\u5728\u56fe\u72b6\u6001\u4e2d\u662f\u6709\u5e2e\u52a9\u7684\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5411\u56fe\u72b6\u6001\u6dfb\u52a0\u4e00\u4e2a\u952e\uff08\u901a\u9053\uff09\uff0c\u7528\u4e8e\u5b58\u50a8 <code>Message</code> \u5bf9\u8c61\u5217\u8868\uff0c\u5e76\u4f7f\u7528\u5f52\u7ea6\u5668\u51fd\u6570\u5bf9\u5176\u8fdb\u884c\u6ce8\u91ca\uff08\u53c2\u89c1\u4e0b\u9762\u793a\u4f8b\u4e2d\u7684 <code>messages</code> \u952e\uff09\u3002\u5f52\u7ea6\u5668\u51fd\u6570\u5bf9\u4e8e\u544a\u8bc9\u56fe\u5982\u4f55\u5728\u6bcf\u6b21\u72b6\u6001\u66f4\u65b0\u65f6\u66f4\u65b0 <code>State</code> \u4e2d\u7684 <code>Message</code> \u5bf9\u8c61\u5217\u8868\u81f3\u5173\u91cd\u8981\uff08\u4f8b\u5982\uff0c\u5f53\u8282\u70b9\u53d1\u9001\u66f4\u65b0\u65f6\uff09\u3002\u5982\u679c\u4f60\u4e0d\u6307\u5b9a\u5f52\u7ea6\u5668\uff0c\u6bcf\u6b21\u72b6\u6001\u66f4\u65b0\u90fd\u4f1a\u7528\u6700\u8fd1\u63d0\u4f9b\u7684\u503c\u8986\u76d6\u6d88\u606f\u5217\u8868\u3002\u5982\u679c\u4f60\u60f3\u7b80\u5355\u5730\u5c06\u6d88\u606f\u9644\u52a0\u5230\u73b0\u6709\u5217\u8868\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e2a\u8fde\u63a5\u6570\u7ec4\u7684\u51fd\u6570\u4f5c\u4e3a\u5f52\u7ea6\u5668\u3002</p> <p>\u4f46\u662f\uff0c\u4f60\u53ef\u80fd\u8fd8\u60f3\u624b\u52a8\u66f4\u65b0\u56fe\u72b6\u6001\u4e2d\u7684\u6d88\u606f\uff08\u4f8b\u5982\uff0c\u4eba\u673a\u534f\u540c\uff09\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7b80\u5355\u7684\u8fde\u63a5\u51fd\u6570\uff0c\u4f60\u53d1\u9001\u5230\u56fe\u7684\u624b\u52a8\u72b6\u6001\u66f4\u65b0\u5c06\u88ab\u9644\u52a0\u5230\u73b0\u6709\u7684\u6d88\u606f\u5217\u8868\uff0c\u800c\u4e0d\u662f\u66f4\u65b0\u73b0\u6709\u6d88\u606f\u3002\u4e3a\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\uff0c\u4f60\u9700\u8981\u4e00\u4e2a\u53ef\u4ee5\u8ddf\u8e2a\u6d88\u606f ID \u5e76\u8986\u76d6\u73b0\u6709\u6d88\u606f\uff08\u5982\u679c\u66f4\u65b0\uff09\u7684\u5f52\u7ea6\u5668\u3002\u4e3a\u6b64\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 <code>MessagesZodState</code> \u6a21\u5f0f\u3002\u5bf9\u4e8e\u5168\u65b0\u7684\u6d88\u606f\uff0c\u5b83\u5c06\u7b80\u5355\u5730\u9644\u52a0\u5230\u73b0\u6709\u5217\u8868\uff0c\u4f46\u5b83\u4e5f\u4f1a\u6b63\u786e\u5904\u7406\u73b0\u6709\u6d88\u606f\u7684\u66f4\u65b0\u3002</p>","boost":2},{"location":"concepts/low_level/#_11","title":"\u5e8f\u5217\u5316","text":"Python <p>\u9664\u4e86\u8ddf\u8e2a\u6d88\u606f ID \u4e4b\u5916\uff0c<code>add_messages</code> \u51fd\u6570\u8fd8\u4f1a\u5c1d\u8bd5\u5728 <code>messages</code> \u901a\u9053\u4e0a\u6536\u5230\u72b6\u6001\u66f4\u65b0\u65f6\u5c06\u6d88\u606f\u53cd\u5e8f\u5217\u5316\u4e3a LangChain <code>Message</code> \u5bf9\u8c61\u3002\u6709\u5173 LangChain \u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u5904\u3002\u8fd9\u5141\u8bb8\u4ee5\u4ee5\u4e0b\u683c\u5f0f\u53d1\u9001\u56fe\u8f93\u5165/\u72b6\u6001\u66f4\u65b0\uff1a</p> <pre><code># this is supported\n{\"messages\": [HumanMessage(content=\"message\")]}\n\n# and this is also supported\n{\"messages\": [{\"type\": \"human\", \"content\": \"message\"}]}\n</code></pre> <p>\u7531\u4e8e\u4f7f\u7528 <code>add_messages</code> \u65f6\u72b6\u6001\u66f4\u65b0\u59cb\u7ec8\u53cd\u5e8f\u5217\u5316\u4e3a LangChain <code>Messages</code>\uff0c\u56e0\u6b64\u4f60\u5e94\u8be5\u4f7f\u7528\u70b9\u8868\u793a\u6cd5\u8bbf\u95ee\u6d88\u606f\u5c5e\u6027\uff0c\u5982 <code>state[\"messages\"][-1].content</code>\u3002\u4e0b\u9762\u662f\u4f7f\u7528 <code>add_messages</code> \u4f5c\u4e3a\u5f52\u7ea6\u5668\u51fd\u6570\u7684\u56fe\u7684\u793a\u4f8b\u3002</p> <pre><code>from langchain_core.messages import AnyMessage\nfrom langgraph.graph.message import add_messages\nfrom typing import Annotated\nfrom typing_extensions import TypedDict\n\nclass GraphState(TypedDict):\n    messages: Annotated[list[AnyMessage], add_messages]\n</code></pre> JavaScript <p>\u9664\u4e86\u8ddf\u8e2a\u6d88\u606f ID \u4e4b\u5916\uff0c<code>MessagesZodState</code> \u8fd8\u4f1a\u5c1d\u8bd5\u5728 <code>messages</code> \u901a\u9053\u4e0a\u6536\u5230\u72b6\u6001\u66f4\u65b0\u65f6\u5c06\u6d88\u606f\u53cd\u5e8f\u5217\u5316\u4e3a LangChain <code>Message</code> \u5bf9\u8c61\u3002\u8fd9\u5141\u8bb8\u4ee5\u4ee5\u4e0b\u683c\u5f0f\u53d1\u9001\u56fe\u8f93\u5165/\u72b6\u6001\u66f4\u65b0\uff1a</p> <pre><code>// this is supported\n{\n  messages: [new HumanMessage(\"message\")];\n}\n\n// and this is also supported\n{\n  messages: [{ role: \"human\", content: \"message\" }];\n}\n</code></pre> <p>\u7531\u4e8e\u4f7f\u7528 <code>MessagesZodState</code> \u65f6\u72b6\u6001\u66f4\u65b0\u59cb\u7ec8\u53cd\u5e8f\u5217\u5316\u4e3a LangChain <code>Messages</code>\uff0c\u56e0\u6b64\u4f60\u5e94\u8be5\u4f7f\u7528\u70b9\u8868\u793a\u6cd5\u8bbf\u95ee\u6d88\u606f\u5c5e\u6027\uff0c\u5982 <code>state.messages[state.messages.length - 1].content</code>\u3002\u4e0b\u9762\u662f\u4f7f\u7528 <code>MessagesZodState</code> \u7684\u56fe\u7684\u793a\u4f8b\uff1a</p> <pre><code>import { StateGraph, MessagesZodState } from \"@langchain/langgraph\";\n\nconst graph = new StateGraph(MessagesZodState)\n  ...\n</code></pre> <p><code>MessagesZodState</code> \u5b9a\u4e49\u4e86\u4e00\u4e2a\u5355\u72ec\u7684 <code>messages</code> \u952e\uff0c\u5b83\u662f <code>BaseMessage</code> \u5bf9\u8c61\u7684\u5217\u8868\u5e76\u4f7f\u7528\u9002\u5f53\u7684\u5f52\u7ea6\u5668\u3002\u901a\u5e38\uff0c\u9700\u8981\u8ddf\u8e2a\u7684\u72b6\u6001\u4e0d\u4ec5\u4ec5\u662f\u6d88\u606f\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u5230\u4eba\u4eec\u6269\u5c55\u6b64\u72b6\u6001\u5e76\u6dfb\u52a0\u66f4\u591a\u5b57\u6bb5\uff0c\u5982\uff1a</p> <pre><code>const State = z.object({\n  messages: MessagesZodState.shape.messages,\n  documents: z.array(z.string()),\n});\n</code></pre> Python","boost":2},{"location":"concepts/low_level/#messagesstate","title":"MessagesState","text":"<p>\u7531\u4e8e\u5728\u72b6\u6001\u4e2d\u62e5\u6709\u6d88\u606f\u5217\u8868\u975e\u5e38\u5e38\u89c1\uff0c\u56e0\u6b64\u5b58\u5728\u4e00\u4e2a\u540d\u4e3a <code>MessagesState</code> \u7684\u9884\u6784\u5efa\u72b6\u6001\uff0c\u4f7f\u5176\u6613\u4e8e\u4f7f\u7528\u6d88\u606f\u3002<code>MessagesState</code> \u5b9a\u4e49\u4e86\u4e00\u4e2a\u5355\u72ec\u7684 <code>messages</code> \u952e\uff0c\u5b83\u662f <code>AnyMessage</code> \u5bf9\u8c61\u7684\u5217\u8868\u5e76\u4f7f\u7528 <code>add_messages</code> \u5f52\u7ea6\u5668\u3002\u901a\u5e38\uff0c\u9700\u8981\u8ddf\u8e2a\u7684\u72b6\u6001\u4e0d\u4ec5\u4ec5\u662f\u6d88\u606f\uff0c\u6240\u4ee5\u6211\u4eec\u770b\u5230\u4eba\u4eec\u5b50\u7c7b\u5316\u6b64\u72b6\u6001\u5e76\u6dfb\u52a0\u66f4\u591a\u5b57\u6bb5\uff0c\u5982\uff1a</p> <pre><code>from langgraph.graph import MessagesState\n\nclass State(MessagesState):\n    documents: list[str]\n</code></pre>","boost":2},{"location":"concepts/low_level/#_12","title":"\u8282\u70b9","text":"Python <p>\u5728 LangGraph \u4e2d\uff0c\u8282\u70b9\u662f\u63a5\u53d7\u4ee5\u4e0b\u53c2\u6570\u7684 Python \u51fd\u6570\uff08\u540c\u6b65\u6216\u5f02\u6b65\uff09\uff1a</p> <ol> <li><code>state</code>\uff1a\u56fe\u7684\u72b6\u6001</li> <li><code>config</code>\uff1a\u5305\u542b\u914d\u7f6e\u4fe1\u606f\uff08\u5982 <code>thread_id</code>\uff09\u548c\u8ddf\u8e2a\u4fe1\u606f\uff08\u5982 <code>tags</code>\uff09\u7684 <code>RunnableConfig</code> \u5bf9\u8c61</li> <li><code>runtime</code>\uff1a\u5305\u542b\u8fd0\u884c\u65f6 <code>context</code>\u548c\u5176\u4ed6\u4fe1\u606f\uff08\u5982 <code>store</code> \u548c <code>stream_writer</code>\uff09\u7684 <code>Runtime</code> \u5bf9\u8c61</li> </ol> <p>\u4e0e <code>NetworkX</code> \u7c7b\u4f3c\uff0c\u4f60\u4f7f\u7528 @[add_node][] \u65b9\u6cd5\u5c06\u8fd9\u4e9b\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\uff1a</p> <pre><code>from dataclasses import dataclass\nfrom typing_extensions import TypedDict\n\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.graph import StateGraph\nfrom langgraph.runtime import Runtime\n\nclass State(TypedDict):\n    input: str\n    results: str\n\n@dataclass\nclass Context:\n    user_id: str\n\nbuilder = StateGraph(State)\n\ndef plain_node(state: State):\n    return state\n\ndef node_with_runtime(state: State, runtime: Runtime[Context]):\n    print(\"In node: \", runtime.context.user_id)\n    return {\"results\": f\"Hello, {state['input']}!\"}\n\ndef node_with_config(state: State, config: RunnableConfig):\n    print(\"In node with thread_id: \", config[\"configurable\"][\"thread_id\"])\n    return {\"results\": f\"Hello, {state['input']}!\"}\n\n\nbuilder.add_node(\"plain_node\", plain_node)\nbuilder.add_node(\"node_with_runtime\", node_with_runtime)\nbuilder.add_node(\"node_with_config\", node_with_config)\n...\n</code></pre> JavaScript <p>\u5728 LangGraph \u4e2d\uff0c\u8282\u70b9\u901a\u5e38\u662f\u63a5\u53d7\u4ee5\u4e0b\u53c2\u6570\u7684\u51fd\u6570\uff08\u540c\u6b65\u6216\u5f02\u6b65\uff09\uff1a</p> <ol> <li><code>state</code>\uff1a\u56fe\u7684\u72b6\u6001</li> <li><code>config</code>\uff1a\u5305\u542b\u914d\u7f6e\u4fe1\u606f\uff08\u5982 <code>thread_id</code>\uff09\u548c\u8ddf\u8e2a\u4fe1\u606f\uff08\u5982 <code>tags</code>\uff09\u7684 <code>RunnableConfig</code> \u5bf9\u8c61</li> </ol> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>addNode</code> \u65b9\u6cd5\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\u3002</p> <pre><code>import { StateGraph } from \"@langchain/langgraph\";\nimport { RunnableConfig } from \"@langchain/core/runnables\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  input: z.string(),\n  results: z.string(),\n});\n\nconst builder = new StateGraph(State);\n  .addNode(\"myNode\", (state, config) =&gt; {\n    console.log(\"In node: \", config?.configurable?.user_id);\n    return { results: `Hello, ${state.input}!` };\n  })\n  addNode(\"otherNode\", (state) =&gt; {\n    return state;\n  })\n  ...\n</code></pre> <p>\u5728\u5e55\u540e\uff0c\u51fd\u6570\u88ab\u8f6c\u6362\u4e3a RunnableLambda\uff0c\u5b83\u4e3a\u4f60\u7684\u51fd\u6570\u6dfb\u52a0\u6279\u5904\u7406\u548c\u5f02\u6b65\u652f\u6301\uff0c\u4ee5\u53ca\u539f\u751f\u8ddf\u8e2a\u548c\u8c03\u8bd5\u3002</p> <p>\u5982\u679c\u4f60\u5728\u4e0d\u6307\u5b9a\u540d\u79f0\u7684\u60c5\u51b5\u4e0b\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\uff0c\u5b83\u5c06\u88ab\u8d4b\u4e88\u4e0e\u51fd\u6570\u540d\u79f0\u7b49\u6548\u7684\u9ed8\u8ba4\u540d\u79f0\u3002</p> Python <pre><code>builder.add_node(my_node)\n# You can then create edges to/from this node by referencing it as `\"my_node\"`\n</code></pre> JavaScript <pre><code>builder.addNode(myNode);\n// You can then create edges to/from this node by referencing it as `\"myNode\"`\n</code></pre>","boost":2},{"location":"concepts/low_level/#start","title":"<code>START</code> \u8282\u70b9","text":"<p><code>START</code> \u8282\u70b9\u662f\u4e00\u4e2a\u7279\u6b8a\u8282\u70b9\uff0c\u8868\u793a\u5411\u56fe\u53d1\u9001\u7528\u6237\u8f93\u5165\u7684\u8282\u70b9\u3002\u5f15\u7528\u6b64\u8282\u70b9\u7684\u4e3b\u8981\u76ee\u7684\u662f\u786e\u5b9a\u5e94\u8be5\u9996\u5148\u8c03\u7528\u54ea\u4e9b\u8282\u70b9\u3002</p> Python <pre><code>from langgraph.graph import START\n\ngraph.add_edge(START, \"node_a\")\n</code></pre> JavaScript <pre><code>import { START } from \"@langchain/langgraph\";\n\ngraph.addEdge(START, \"nodeA\");\n</code></pre>","boost":2},{"location":"concepts/low_level/#end","title":"<code>END</code> \u8282\u70b9","text":"<p><code>END</code> \u8282\u70b9\u662f\u4e00\u4e2a\u7279\u6b8a\u8282\u70b9\uff0c\u8868\u793a\u7ec8\u7aef\u8282\u70b9\u3002\u5f53\u4f60\u60f3\u8868\u793a\u54ea\u4e9b\u8fb9\u5728\u5b8c\u6210\u540e\u6ca1\u6709\u64cd\u4f5c\u65f6\uff0c\u5f15\u7528\u6b64\u8282\u70b9\u3002</p> Python <pre><code>from langgraph.graph import END\n\ngraph.add_edge(\"node_a\", END)\n</code></pre> JavaScript <pre><code>import { END } from \"@langchain/langgraph\";\n\ngraph.addEdge(\"nodeA\", END);\n</code></pre>","boost":2},{"location":"concepts/low_level/#_13","title":"\u8282\u70b9\u7f13\u5b58","text":"Python <p>LangGraph \u652f\u6301\u57fa\u4e8e\u8282\u70b9\u8f93\u5165\u7684\u4efb\u52a1/\u8282\u70b9\u7f13\u5b58\u3002\u8981\u4f7f\u7528\u7f13\u5b58\uff1a</p> <ul> <li>\u5728\u7f16\u8bd1\u56fe\uff08\u6216\u6307\u5b9a\u5165\u53e3\u70b9\uff09\u65f6\u6307\u5b9a\u7f13\u5b58</li> <li>\u4e3a\u8282\u70b9\u6307\u5b9a\u7f13\u5b58\u7b56\u7565\u3002\u6bcf\u4e2a\u7f13\u5b58\u7b56\u7565\u652f\u6301\uff1a</li> <li><code>key_func</code> \u7528\u4e8e\u6839\u636e\u8282\u70b9\u8f93\u5165\u751f\u6210\u7f13\u5b58\u952e\uff0c\u9ed8\u8ba4\u4e3a\u4f7f\u7528 pickle \u5bf9\u8f93\u5165\u8fdb\u884c <code>hash</code>\u3002</li> <li><code>ttl</code>\uff0c\u7f13\u5b58\u7684\u751f\u5b58\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u7f13\u5b58\u5c06\u6c38\u4e0d\u8fc7\u671f\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <pre><code>import time\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph\nfrom langgraph.cache.memory import InMemoryCache\nfrom langgraph.types import CachePolicy\n\n\nclass State(TypedDict):\n    x: int\n    result: int\n\n\nbuilder = StateGraph(State)\n\n\ndef expensive_node(state: State) -&gt; dict[str, int]:\n    # expensive computation\n    time.sleep(2)\n    return {\"result\": state[\"x\"] * 2}\n\n\nbuilder.add_node(\"expensive_node\", expensive_node, cache_policy=CachePolicy(ttl=3))\nbuilder.set_entry_point(\"expensive_node\")\nbuilder.set_finish_point(\"expensive_node\")\n\ngraph = builder.compile(cache=InMemoryCache())\n\nprint(graph.invoke({\"x\": 5}, stream_mode='updates'))  # (1)!\n[{'expensive_node': {'result': 10}}]\nprint(graph.invoke({\"x\": 5}, stream_mode='updates'))  # (2)!\n[{'expensive_node': {'result': 10}, '__metadata__': {'cached': True}}]\n</code></pre> <ol> <li>\u7b2c\u4e00\u6b21\u8fd0\u884c\u9700\u8981\u4e24\u79d2\u949f\uff08\u7531\u4e8e\u6a21\u62df\u7684\u6602\u8d35\u8ba1\u7b97\uff09\u3002</li> <li>\u7b2c\u4e8c\u6b21\u8fd0\u884c\u5229\u7528\u7f13\u5b58\u5e76\u5feb\u901f\u8fd4\u56de\u3002</li> </ol> JavaScript <p>LangGraph \u652f\u6301\u57fa\u4e8e\u8282\u70b9\u8f93\u5165\u7684\u4efb\u52a1/\u8282\u70b9\u7f13\u5b58\u3002\u8981\u4f7f\u7528\u7f13\u5b58\uff1a</p> <ul> <li>\u5728\u7f16\u8bd1\u56fe\uff08\u6216\u6307\u5b9a\u5165\u53e3\u70b9\uff09\u65f6\u6307\u5b9a\u7f13\u5b58</li> <li>\u4e3a\u8282\u70b9\u6307\u5b9a\u7f13\u5b58\u7b56\u7565\u3002\u6bcf\u4e2a\u7f13\u5b58\u7b56\u7565\u652f\u6301\uff1a</li> <li><code>keyFunc</code>\uff0c\u7528\u4e8e\u6839\u636e\u8282\u70b9\u8f93\u5165\u751f\u6210\u7f13\u5b58\u952e\u3002</li> <li><code>ttl</code>\uff0c\u7f13\u5b58\u7684\u751f\u5b58\u65f6\u95f4\uff08\u4ee5\u79d2\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u7f13\u5b58\u5c06\u6c38\u4e0d\u8fc7\u671f\u3002</li> </ul> <pre><code>import { StateGraph, MessagesZodState } from \"@langchain/langgraph\";\nimport { InMemoryCache } from \"@langchain/langgraph-checkpoint\";\n\nconst graph = new StateGraph(MessagesZodState)\n  .addNode(\n    \"expensive_node\",\n    async () =&gt; {\n      // Simulate an expensive operation\n      await new Promise((resolve) =&gt; setTimeout(resolve, 3000));\n      return { result: 10 };\n    },\n    { cachePolicy: { ttl: 3 } }\n  )\n  .addEdge(START, \"expensive_node\")\n  .compile({ cache: new InMemoryCache() });\n\nawait graph.invoke({ x: 5 }, { streamMode: \"updates\" }); // (1)!\n// [{\"expensive_node\": {\"result\": 10}}]\nawait graph.invoke({ x: 5 }, { streamMode: \"updates\" }); // (2)!\n// [{\"expensive_node\": {\"result\": 10}, \"__metadata__\": {\"cached\": true}}]\n</code></pre>","boost":2},{"location":"concepts/low_level/#_14","title":"\u8fb9","text":"<p>\u8fb9\u5b9a\u4e49\u4e86\u5982\u4f55\u8def\u7531\u903b\u8f91\u4ee5\u53ca\u56fe\u5982\u4f55\u51b3\u5b9a\u505c\u6b62\u3002\u8fd9\u662f\u667a\u80fd\u4ee3\u7406\u5982\u4f55\u5de5\u4f5c\u4ee5\u53ca\u4e0d\u540c\u8282\u70b9\u5982\u4f55\u76f8\u4e92\u901a\u4fe1\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\u3002\u6709\u51e0\u79cd\u5173\u952e\u7c7b\u578b\u7684\u8fb9\uff1a</p> <ul> <li>\u666e\u901a\u8fb9\uff1a\u76f4\u63a5\u4ece\u4e00\u4e2a\u8282\u70b9\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u3002</li> <li>\u6761\u4ef6\u8fb9\uff1a\u8c03\u7528\u51fd\u6570\u4ee5\u786e\u5b9a\u4e0b\u4e00\u4e2a\u8981\u53bb\u7684\u8282\u70b9\u3002</li> <li>\u5165\u53e3\u70b9\uff1a\u5f53\u7528\u6237\u8f93\u5165\u5230\u8fbe\u65f6\u9996\u5148\u8c03\u7528\u54ea\u4e2a\u8282\u70b9\u3002</li> <li>\u6761\u4ef6\u5165\u53e3\u70b9\uff1a\u8c03\u7528\u51fd\u6570\u4ee5\u786e\u5b9a\u5f53\u7528\u6237\u8f93\u5165\u5230\u8fbe\u65f6\u9996\u5148\u8c03\u7528\u54ea\u4e2a\u8282\u70b9\u3002</li> </ul> <p>\u4e00\u4e2a\u8282\u70b9\u53ef\u4ee5\u6709\u591a\u6761\u4f20\u51fa\u8fb9\u3002\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u6709\u591a\u6761\u4f20\u51fa\u8fb9\uff0c**\u6240\u6709**\u8fd9\u4e9b\u76ee\u6807\u8282\u70b9\u5c06\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8d85\u6b65\u7684\u4e00\u90e8\u5206\u5e76\u884c\u6267\u884c\u3002</p>","boost":2},{"location":"concepts/low_level/#_15","title":"\u666e\u901a\u8fb9","text":"Python <p>\u5982\u679c\u4f60**\u603b\u662f**\u60f3\u4ece\u8282\u70b9 A \u5230\u8282\u70b9 B\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 @[add_edge][] \u65b9\u6cd5\u3002</p> <pre><code>graph.add_edge(\"node_a\", \"node_b\")\n</code></pre> JavaScript <p>\u5982\u679c\u4f60**\u603b\u662f**\u60f3\u4ece\u8282\u70b9 A \u5230\u8282\u70b9 B\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 @[<code>addEdge</code>][add_edge] \u65b9\u6cd5\u3002</p> <pre><code>graph.addEdge(\"nodeA\", \"nodeB\");\n</code></pre>","boost":2},{"location":"concepts/low_level/#_16","title":"\u6761\u4ef6\u8fb9","text":"Python <p>\u5982\u679c\u4f60\u60f3**\u53ef\u9009\u5730**\u8def\u7531\u5230 1 \u6761\u6216\u591a\u6761\u8fb9\uff08\u6216\u53ef\u9009\u5730\u7ec8\u6b62\uff09\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 @[add_conditional_edges][] \u65b9\u6cd5\u3002\u6b64\u65b9\u6cd5\u63a5\u53d7\u8282\u70b9\u7684\u540d\u79f0\u548c\u5728\u8be5\u8282\u70b9\u6267\u884c\u540e\u8981\u8c03\u7528\u7684\"\u8def\u7531\u51fd\u6570\"\uff1a</p> <pre><code>graph.add_conditional_edges(\"node_a\", routing_function)\n</code></pre> <p>\u4e0e\u8282\u70b9\u7c7b\u4f3c\uff0c<code>routing_function</code> \u63a5\u53d7\u56fe\u7684\u5f53\u524d <code>state</code> \u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>routing_function</code> \u7684\u8fd4\u56de\u503c\u7528\u4f5c\u4e0b\u4e00\u4e2a\u8981\u53d1\u9001\u72b6\u6001\u7684\u8282\u70b9\uff08\u6216\u8282\u70b9\u5217\u8868\uff09\u7684\u540d\u79f0\u3002\u6240\u6709\u8fd9\u4e9b\u8282\u70b9\u5c06\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8d85\u6b65\u7684\u4e00\u90e8\u5206\u5e76\u884c\u8fd0\u884c\u3002</p> <p>\u4f60\u53ef\u4ee5\u9009\u62e9\u63d0\u4f9b\u4e00\u4e2a\u5b57\u5178\uff0c\u5c06 <code>routing_function</code> \u7684\u8f93\u51fa\u6620\u5c04\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u540d\u79f0\u3002</p> <pre><code>graph.add_conditional_edges(\"node_a\", routing_function, {True: \"node_b\", False: \"node_c\"})\n</code></pre> JavaScript <p>\u5982\u679c\u4f60\u60f3**\u53ef\u9009\u5730**\u8def\u7531\u5230 1 \u6761\u6216\u591a\u6761\u8fb9\uff08\u6216\u53ef\u9009\u5730\u7ec8\u6b62\uff09\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>addConditionalEdges</code>][add_conditional_edges] \u65b9\u6cd5\u3002\u6b64\u65b9\u6cd5\u63a5\u53d7\u8282\u70b9\u7684\u540d\u79f0\u548c\u5728\u8be5\u8282\u70b9\u6267\u884c\u540e\u8981\u8c03\u7528\u7684\"\u8def\u7531\u51fd\u6570\"\uff1a</p> <pre><code>graph.addConditionalEdges(\"nodeA\", routingFunction);\n</code></pre> <p>\u4e0e\u8282\u70b9\u7c7b\u4f3c\uff0c<code>routingFunction</code> \u63a5\u53d7\u56fe\u7684\u5f53\u524d <code>state</code> \u5e76\u8fd4\u56de\u4e00\u4e2a\u503c\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>routingFunction</code> \u7684\u8fd4\u56de\u503c\u7528\u4f5c\u4e0b\u4e00\u4e2a\u8981\u53d1\u9001\u72b6\u6001\u7684\u8282\u70b9\uff08\u6216\u8282\u70b9\u5217\u8868\uff09\u7684\u540d\u79f0\u3002\u6240\u6709\u8fd9\u4e9b\u8282\u70b9\u5c06\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8d85\u6b65\u7684\u4e00\u90e8\u5206\u5e76\u884c\u8fd0\u884c\u3002</p> <p>\u4f60\u53ef\u4ee5\u9009\u62e9\u63d0\u4f9b\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c06 <code>routingFunction</code> \u7684\u8f93\u51fa\u6620\u5c04\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u540d\u79f0\u3002</p> <pre><code>graph.addConditionalEdges(\"nodeA\", routingFunction, {\n  true: \"nodeB\",\n  false: \"nodeC\",\n});\n</code></pre> <p>Tip</p> <p>\u5982\u679c\u4f60\u60f3\u5728\u5355\u4e2a\u51fd\u6570\u4e2d\u7ec4\u5408\u72b6\u6001\u66f4\u65b0\u548c\u8def\u7531\uff0c\u8bf7\u4f7f\u7528 <code>Command</code> \u800c\u4e0d\u662f\u6761\u4ef6\u8fb9\u3002</p>","boost":2},{"location":"concepts/low_level/#_17","title":"\u5165\u53e3\u70b9","text":"Python <p>\u5165\u53e3\u70b9\u662f\u56fe\u542f\u52a8\u65f6\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>add_edge</code>][] \u65b9\u6cd5\u4ece\u865a\u62df @[<code>START</code>][] \u8282\u70b9\u5230\u7b2c\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9\u6765\u6307\u5b9a\u4ece\u54ea\u91cc\u8fdb\u5165\u56fe\u3002</p> <pre><code>from langgraph.graph import START\n\ngraph.add_edge(START, \"node_a\")\n</code></pre> JavaScript <p>\u5165\u53e3\u70b9\u662f\u56fe\u542f\u52a8\u65f6\u8fd0\u884c\u7684\u7b2c\u4e00\u4e2a\u8282\u70b9\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>addEdge</code>][add_edge] \u65b9\u6cd5\u4ece\u865a\u62df @[<code>START</code>][] \u8282\u70b9\u5230\u7b2c\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9\u6765\u6307\u5b9a\u4ece\u54ea\u91cc\u8fdb\u5165\u56fe\u3002</p> <pre><code>import { START } from \"@langchain/langgraph\";\n\ngraph.addEdge(START, \"nodeA\");\n</code></pre>","boost":2},{"location":"concepts/low_level/#_18","title":"\u6761\u4ef6\u5165\u53e3\u70b9","text":"Python <p>\u6761\u4ef6\u5165\u53e3\u70b9\u5141\u8bb8\u4f60\u6839\u636e\u81ea\u5b9a\u4e49\u903b\u8f91\u4ece\u4e0d\u540c\u7684\u8282\u70b9\u5f00\u59cb\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ece\u865a\u62df @[<code>START</code>][] \u8282\u70b9\u5f00\u59cb\u7684 @[<code>add_conditional_edges</code>][] \u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002</p> <pre><code>from langgraph.graph import START\n\ngraph.add_conditional_edges(START, routing_function)\n</code></pre> <p>\u4f60\u53ef\u4ee5\u9009\u62e9\u63d0\u4f9b\u4e00\u4e2a\u5b57\u5178\uff0c\u5c06 <code>routing_function</code> \u7684\u8f93\u51fa\u6620\u5c04\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u540d\u79f0\u3002</p> <pre><code>graph.add_conditional_edges(START, routing_function, {True: \"node_b\", False: \"node_c\"})\n</code></pre> JavaScript <p>\u6761\u4ef6\u5165\u53e3\u70b9\u5141\u8bb8\u4f60\u6839\u636e\u81ea\u5b9a\u4e49\u903b\u8f91\u4ece\u4e0d\u540c\u7684\u8282\u70b9\u5f00\u59cb\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ece\u865a\u62df @[<code>START</code>][] \u8282\u70b9\u5f00\u59cb\u7684 @[<code>addConditionalEdges</code>][add_conditional_edges] \u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u3002</p> <pre><code>import { START } from \"@langchain/langgraph\";\n\ngraph.addConditionalEdges(START, routingFunction);\n</code></pre> <p>\u4f60\u53ef\u4ee5\u9009\u62e9\u63d0\u4f9b\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5c06 <code>routingFunction</code> \u7684\u8f93\u51fa\u6620\u5c04\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u7684\u540d\u79f0\u3002</p> <pre><code>graph.addConditionalEdges(START, routingFunction, {\n  true: \"nodeB\",\n  false: \"nodeC\",\n});\n</code></pre>","boost":2},{"location":"concepts/low_level/#send","title":"<code>Send</code>","text":"Python <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>Nodes</code> \u548c <code>Edges</code> \u662f\u9884\u5148\u5b9a\u4e49\u7684\uff0c\u5e76\u5728\u76f8\u540c\u7684\u5171\u4eab\u72b6\u6001\u4e0a\u64cd\u4f5c\u3002\u4f46\u662f\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u786e\u5207\u7684\u8fb9\u53ef\u80fd\u4e8b\u5148\u4e0d\u77e5\u9053\uff0c\u5e76\u4e14/\u6216\u8005\u4f60\u53ef\u80fd\u5e0c\u671b\u540c\u65f6\u5b58\u5728\u4e0d\u540c\u7248\u672c\u7684 <code>State</code>\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u4f8b\u5b50\u662f map-reduce \u8bbe\u8ba1\u6a21\u5f0f\u3002\u5728\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u8282\u70b9\u53ef\u80fd\u4f1a\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\u5217\u8868\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5c06\u67d0\u4e2a\u5176\u4ed6\u8282\u70b9\u5e94\u7528\u4e8e\u6240\u6709\u8fd9\u4e9b\u5bf9\u8c61\u3002\u5bf9\u8c61\u7684\u6570\u91cf\u53ef\u80fd\u4e8b\u5148\u4e0d\u77e5\u9053\uff08\u610f\u5473\u7740\u8fb9\u7684\u6570\u91cf\u53ef\u80fd\u4e0d\u77e5\u9053\uff09\uff0c\u4e0b\u6e38 <code>Node</code> \u7684\u8f93\u5165 <code>State</code> \u5e94\u8be5\u4e0d\u540c\uff08\u6bcf\u4e2a\u751f\u6210\u7684\u5bf9\u8c61\u4e00\u4e2a\uff09\u3002</p> <p>\u4e3a\u4e86\u652f\u6301\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0cLangGraph \u652f\u6301\u4ece\u6761\u4ef6\u8fb9\u8fd4\u56de @[<code>Send</code>][] \u5bf9\u8c61\u3002<code>Send</code> \u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u9996\u5148\u662f\u8282\u70b9\u7684\u540d\u79f0\uff0c\u5176\u6b21\u662f\u8981\u4f20\u9012\u7ed9\u8be5\u8282\u70b9\u7684\u72b6\u6001\u3002</p> <pre><code>def continue_to_jokes(state: OverallState):\n    return [Send(\"generate_joke\", {\"subject\": s}) for s in state['subjects']]\n\ngraph.add_conditional_edges(\"node_a\", continue_to_jokes)\n</code></pre> JavaScript <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>Nodes</code> \u548c <code>Edges</code> \u662f\u9884\u5148\u5b9a\u4e49\u7684\uff0c\u5e76\u5728\u76f8\u540c\u7684\u5171\u4eab\u72b6\u6001\u4e0a\u64cd\u4f5c\u3002\u4f46\u662f\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u786e\u5207\u7684\u8fb9\u53ef\u80fd\u4e8b\u5148\u4e0d\u77e5\u9053\uff0c\u5e76\u4e14/\u6216\u8005\u4f60\u53ef\u80fd\u5e0c\u671b\u540c\u65f6\u5b58\u5728\u4e0d\u540c\u7248\u672c\u7684 <code>State</code>\u3002\u4e00\u4e2a\u5e38\u89c1\u7684\u4f8b\u5b50\u662f map-reduce \u8bbe\u8ba1\u6a21\u5f0f\u3002\u5728\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\u4e2d\uff0c\u7b2c\u4e00\u4e2a\u8282\u70b9\u53ef\u80fd\u4f1a\u751f\u6210\u4e00\u4e2a\u5bf9\u8c61\u5217\u8868\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5c06\u67d0\u4e2a\u5176\u4ed6\u8282\u70b9\u5e94\u7528\u4e8e\u6240\u6709\u8fd9\u4e9b\u5bf9\u8c61\u3002\u5bf9\u8c61\u7684\u6570\u91cf\u53ef\u80fd\u4e8b\u5148\u4e0d\u77e5\u9053\uff08\u610f\u5473\u7740\u8fb9\u7684\u6570\u91cf\u53ef\u80fd\u4e0d\u77e5\u9053\uff09\uff0c\u4e0b\u6e38 <code>Node</code> \u7684\u8f93\u5165 <code>State</code> \u5e94\u8be5\u4e0d\u540c\uff08\u6bcf\u4e2a\u751f\u6210\u7684\u5bf9\u8c61\u4e00\u4e2a\uff09\u3002</p> <p>\u4e3a\u4e86\u652f\u6301\u8fd9\u79cd\u8bbe\u8ba1\u6a21\u5f0f\uff0cLangGraph \u652f\u6301\u4ece\u6761\u4ef6\u8fb9\u8fd4\u56de @[<code>Send</code>][] \u5bf9\u8c61\u3002<code>Send</code> \u63a5\u53d7\u4e24\u4e2a\u53c2\u6570\uff1a\u9996\u5148\u662f\u8282\u70b9\u7684\u540d\u79f0\uff0c\u5176\u6b21\u662f\u8981\u4f20\u9012\u7ed9\u8be5\u8282\u70b9\u7684\u72b6\u6001\u3002</p> <pre><code>import { Send } from \"@langchain/langgraph\";\n\ngraph.addConditionalEdges(\"nodeA\", (state) =&gt; {\n  return state.subjects.map((subject) =&gt; new Send(\"generateJoke\", { subject }));\n});\n</code></pre>","boost":2},{"location":"concepts/low_level/#command","title":"<code>Command</code>","text":"Python <p>\u5c06\u63a7\u5236\u6d41\uff08\u8fb9\uff09\u548c\u72b6\u6001\u66f4\u65b0\uff08\u8282\u70b9\uff09\u7ed3\u5408\u8d77\u6765\u53ef\u80fd\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e2d\u540c\u65f6\u6267\u884c\u72b6\u6001\u66f4\u65b0\u5e76\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8981\u53bb\u7684\u8282\u70b9\u3002LangGraph \u901a\u8fc7\u4ece\u8282\u70b9\u51fd\u6570\u8fd4\u56de @[<code>Command</code>][] \u5bf9\u8c61\u6765\u63d0\u4f9b\u8fd9\u6837\u505a\u7684\u65b9\u6cd5\uff1a</p> <pre><code>def my_node(state: State) -&gt; Command[Literal[\"my_other_node\"]]:\n    return Command(\n        # state update\n        update={\"foo\": \"bar\"},\n        # control flow\n        goto=\"my_other_node\"\n    )\n</code></pre> <p>\u4f7f\u7528 <code>Command</code>\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u52a8\u6001\u63a7\u5236\u6d41\u884c\u4e3a\uff08\u4e0e\u6761\u4ef6\u8fb9\u76f8\u540c\uff09\uff1a</p> <pre><code>def my_node(state: State) -&gt; Command[Literal[\"my_other_node\"]]:\n    if state[\"foo\"] == \"bar\":\n        return Command(update={\"foo\": \"baz\"}, goto=\"my_other_node\")\n</code></pre> JavaScript <p>\u5c06\u63a7\u5236\u6d41\uff08\u8fb9\uff09\u548c\u72b6\u6001\u66f4\u65b0\uff08\u8282\u70b9\uff09\u7ed3\u5408\u8d77\u6765\u53ef\u80fd\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e2d\u540c\u65f6\u6267\u884c\u72b6\u6001\u66f4\u65b0\u5e76\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8981\u53bb\u7684\u8282\u70b9\u3002LangGraph \u901a\u8fc7\u4ece\u8282\u70b9\u51fd\u6570\u8fd4\u56de <code>Command</code> \u5bf9\u8c61\u6765\u63d0\u4f9b\u8fd9\u6837\u505a\u7684\u65b9\u6cd5\uff1a</p> <pre><code>import { Command } from \"@langchain/langgraph\";\n\ngraph.addNode(\"myNode\", (state) =&gt; {\n  return new Command({\n    update: { foo: \"bar\" },\n    goto: \"myOtherNode\",\n  });\n});\n</code></pre> <p>\u4f7f\u7528 <code>Command</code>\uff0c\u4f60\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u52a8\u6001\u63a7\u5236\u6d41\u884c\u4e3a\uff08\u4e0e\u6761\u4ef6\u8fb9\u76f8\u540c\uff09\uff1a</p> <pre><code>import { Command } from \"@langchain/langgraph\";\n\ngraph.addNode(\"myNode\", (state) =&gt; {\n  if (state.foo === \"bar\") {\n    return new Command({\n      update: { foo: \"baz\" },\n      goto: \"myOtherNode\",\n    });\n  }\n});\n</code></pre> <p>\u5728\u8282\u70b9\u51fd\u6570\u4e2d\u4f7f\u7528 <code>Command</code> \u65f6\uff0c\u4f60\u5fc5\u987b\u5728\u6dfb\u52a0\u8282\u70b9\u65f6\u6dfb\u52a0 <code>ends</code> \u53c2\u6570\u6765\u6307\u5b9a\u5b83\u53ef\u4ee5\u8def\u7531\u5230\u54ea\u4e9b\u8282\u70b9\uff1a</p> <pre><code>builder.addNode(\"myNode\", myNode, {\n  ends: [\"myOtherNode\", END],\n});\n</code></pre> <p>Important</p> <p>\u5728\u8282\u70b9\u51fd\u6570\u4e2d\u8fd4\u56de <code>Command</code> \u65f6\uff0c\u4f60\u5fc5\u987b\u6dfb\u52a0\u5e26\u6709\u8282\u70b9\u8def\u7531\u5230\u7684\u8282\u70b9\u540d\u79f0\u5217\u8868\u7684\u8fd4\u56de\u7c7b\u578b\u6ce8\u91ca\uff0c\u4f8b\u5982 <code>Command[Literal[\"my_other_node\"]]</code>\u3002\u8fd9\u5bf9\u4e8e\u56fe\u6e32\u67d3\u662f\u5fc5\u8981\u7684\uff0c\u5e76\u544a\u8bc9 LangGraph <code>my_node</code> \u53ef\u4ee5\u5bfc\u822a\u5230 <code>my_other_node</code>\u3002</p> <p>\u67e5\u770b\u8fd9\u4e2a\u64cd\u4f5c\u6307\u5357\u4ee5\u83b7\u53d6\u5982\u4f55\u4f7f\u7528 <code>Command</code> \u7684\u7aef\u5230\u7aef\u793a\u4f8b\u3002</p>","boost":2},{"location":"concepts/low_level/#command_1","title":"\u4ec0\u4e48\u65f6\u5019\u5e94\u8be5\u4f7f\u7528 Command \u800c\u4e0d\u662f\u6761\u4ef6\u8fb9\uff1f","text":"<ul> <li>\u5f53\u4f60\u9700\u8981**\u540c\u65f6**\u66f4\u65b0\u56fe\u72b6\u6001**\u548c**\u8def\u7531\u5230\u4e0d\u540c\u8282\u70b9\u65f6\uff0c\u4f7f\u7528 <code>Command</code>\u3002\u4f8b\u5982\uff0c\u5728\u5b9e\u73b0\u591a\u667a\u80fd\u4ee3\u7406\u5207\u6362\u65f6\uff0c\u8def\u7531\u5230\u4e0d\u540c\u7684\u667a\u80fd\u4ee3\u7406\u5e76\u5c06\u4e00\u4e9b\u4fe1\u606f\u4f20\u9012\u7ed9\u8be5\u667a\u80fd\u4ee3\u7406\u5f88\u91cd\u8981\u3002</li> <li>\u4f7f\u7528\u6761\u4ef6\u8fb9\u5728\u8282\u70b9\u4e4b\u95f4\u6709\u6761\u4ef6\u5730\u8def\u7531\u800c\u4e0d\u66f4\u65b0\u72b6\u6001\u3002</li> </ul>","boost":2},{"location":"concepts/low_level/#_19","title":"\u5bfc\u822a\u5230\u7236\u56fe\u4e2d\u7684\u8282\u70b9","text":"Python <p>\u5982\u679c\u4f60\u4f7f\u7528\u5b50\u56fe\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u4ece\u5b50\u56fe\u5185\u7684\u8282\u70b9\u5bfc\u822a\u5230\u4e0d\u540c\u7684\u5b50\u56fe\uff08\u5373\u7236\u56fe\u4e2d\u7684\u4e0d\u540c\u8282\u70b9\uff09\u3002\u4e3a\u6b64\uff0c\u4f60\u53ef\u4ee5\u5728 <code>Command</code> \u4e2d\u6307\u5b9a <code>graph=Command.PARENT</code>\uff1a</p> <pre><code>def my_node(state: State) -&gt; Command[Literal[\"other_subgraph\"]]:\n    return Command(\n        update={\"foo\": \"bar\"},\n        goto=\"other_subgraph\",  # where `other_subgraph` is a node in the parent graph\n        graph=Command.PARENT\n    )\n</code></pre> <p>Note</p> <p>\u5c06 <code>graph</code> \u8bbe\u7f6e\u4e3a <code>Command.PARENT</code> \u5c06\u5bfc\u822a\u5230\u6700\u8fd1\u7684\u7236\u56fe\u3002</p> <p>\u4f7f\u7528 <code>Command.PARENT</code> \u7684\u72b6\u6001\u66f4\u65b0</p> <p>\u5f53\u4f60\u4ece\u5b50\u56fe\u8282\u70b9\u5411\u7236\u56fe\u8282\u70b9\u53d1\u9001\u5171\u4eab\u7236\u56fe\u548c\u5b50\u56fe\u72b6\u6001\u6a21\u5f0f\u7684\u952e\u7684\u66f4\u65b0\u65f6\uff0c\u4f60**\u5fc5\u987b**\u4e3a\u8981\u66f4\u65b0\u7684\u952e\u5728\u7236\u56fe\u72b6\u6001\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u5f52\u7ea6\u5668\u3002\u53c2\u89c1\u6b64\u793a\u4f8b\u3002</p> JavaScript <p>\u5982\u679c\u4f60\u4f7f\u7528\u5b50\u56fe\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u4ece\u5b50\u56fe\u5185\u7684\u8282\u70b9\u5bfc\u822a\u5230\u4e0d\u540c\u7684\u5b50\u56fe\uff08\u5373\u7236\u56fe\u4e2d\u7684\u4e0d\u540c\u8282\u70b9\uff09\u3002\u4e3a\u6b64\uff0c\u4f60\u53ef\u4ee5\u5728 <code>Command</code> \u4e2d\u6307\u5b9a <code>graph: Command.PARENT</code>\uff1a</p> <pre><code>import { Command } from \"@langchain/langgraph\";\n\ngraph.addNode(\"myNode\", (state) =&gt; {\n  return new Command({\n    update: { foo: \"bar\" },\n    goto: \"otherSubgraph\", // where `otherSubgraph` is a node in the parent graph\n    graph: Command.PARENT,\n  });\n});\n</code></pre> <p>Note</p> <p>\u5c06 <code>graph</code> \u8bbe\u7f6e\u4e3a <code>Command.PARENT</code> \u5c06\u5bfc\u822a\u5230\u6700\u8fd1\u7684\u7236\u56fe\u3002</p> <p>\u4f7f\u7528 <code>Command.PARENT</code> \u7684\u72b6\u6001\u66f4\u65b0</p> <p>\u5f53\u4f60\u4ece\u5b50\u56fe\u8282\u70b9\u5411\u7236\u56fe\u8282\u70b9\u53d1\u9001\u5171\u4eab\u7236\u56fe\u548c\u5b50\u56fe\u72b6\u6001\u6a21\u5f0f\u7684\u952e\u7684\u66f4\u65b0\u65f6\uff0c\u4f60**\u5fc5\u987b**\u4e3a\u8981\u66f4\u65b0\u7684\u952e\u5728\u7236\u56fe\u72b6\u6001\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u5f52\u7ea6\u5668\u3002</p> JavaScript <p>\u5982\u679c\u4f60\u4f7f\u7528\u5b50\u56fe\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u4ece\u5b50\u56fe\u5185\u7684\u8282\u70b9\u5bfc\u822a\u5230\u4e0d\u540c\u7684\u5b50\u56fe\uff08\u5373\u7236\u56fe\u4e2d\u7684\u4e0d\u540c\u8282\u70b9\uff09\u3002\u4e3a\u6b64\uff0c\u4f60\u53ef\u4ee5\u5728 <code>Command</code> \u4e2d\u6307\u5b9a <code>graph: Command.PARENT</code>\uff1a</p> <pre><code>import { Command } from \"@langchain/langgraph\";\n\ngraph.addNode(\"myNode\", (state) =&gt; {\n  return new Command({\n    update: { foo: \"bar\" },\n    goto: \"otherSubgraph\", // where `otherSubgraph` is a node in the parent graph\n    graph: Command.PARENT,\n  });\n});\n</code></pre> <p>Note</p> <p>\u5c06 <code>graph</code> \u8bbe\u7f6e\u4e3a <code>Command.PARENT</code> \u5c06\u5bfc\u822a\u5230\u6700\u8fd1\u7684\u7236\u56fe\u3002</p> <p>\u4f7f\u7528 <code>Command.PARENT</code> \u7684\u72b6\u6001\u66f4\u65b0</p> <p>\u5f53\u4f60\u4ece\u5b50\u56fe\u8282\u70b9\u5411\u7236\u56fe\u8282\u70b9\u53d1\u9001\u5171\u4eab\u7236\u56fe\u548c\u5b50\u56fe\u72b6\u6001\u6a21\u5f0f\u7684\u952e\u7684\u66f4\u65b0\u65f6\uff0c\u4f60**\u5fc5\u987b**\u4e3a\u8981\u66f4\u65b0\u7684\u952e\u5728\u7236\u56fe\u72b6\u6001\u4e2d\u5b9a\u4e49\u4e00\u4e2a\u5f52\u7ea6\u5668\u3002</p> <p>\u8fd9\u5728\u5b9e\u73b0\u591a\u667a\u80fd\u4ee3\u7406\u5207\u6362\u65f6\u7279\u522b\u6709\u7528\u3002</p> <p>\u67e5\u770b\u6b64\u6307\u5357\u4e86\u89e3\u8be6\u60c5\u3002</p>","boost":2},{"location":"concepts/low_level/#_20","title":"\u5728\u5de5\u5177\u5185\u90e8\u4f7f\u7528","text":"<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u4ece\u5de5\u5177\u5185\u90e8\u66f4\u65b0\u56fe\u72b6\u6001\u3002\u4f8b\u5982\uff0c\u5728\u5ba2\u6237\u652f\u6301\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u5bf9\u8bdd\u5f00\u59cb\u65f6\u6839\u636e\u5ba2\u6237\u7684\u5e10\u53f7\u6216 ID \u67e5\u627e\u5ba2\u6237\u4fe1\u606f\u3002</p> <p>\u6709\u5173\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/low_level/#_21","title":"\u4eba\u673a\u534f\u540c","text":"Python <p><code>Command</code> \u662f\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff1a\u5f53\u4f7f\u7528 <code>interrupt()</code> \u6536\u96c6\u7528\u6237\u8f93\u5165\u65f6\uff0c\u7136\u540e\u4f7f\u7528 <code>Command</code> \u901a\u8fc7 <code>Command(resume=\"User input\")</code> \u63d0\u4f9b\u8f93\u5165\u5e76\u6062\u590d\u6267\u884c\u3002\u67e5\u770b\u6b64\u6982\u5ff5\u6307\u5357\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p> JavaScript <p><code>Command</code> \u662f\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u7684\u91cd\u8981\u7ec4\u6210\u90e8\u5206\uff1a\u5f53\u4f7f\u7528 <code>interrupt()</code> \u6536\u96c6\u7528\u6237\u8f93\u5165\u65f6\uff0c\u7136\u540e\u4f7f\u7528 <code>Command</code> \u901a\u8fc7 <code>new Command({ resume: \"User input\" })</code> \u63d0\u4f9b\u8f93\u5165\u5e76\u6062\u590d\u6267\u884c\u3002\u67e5\u770b\u4eba\u673a\u534f\u540c\u6982\u5ff5\u6307\u5357\u4e86\u89e3\u66f4\u591a\u4fe1\u606f\u3002</p>","boost":2},{"location":"concepts/low_level/#_22","title":"\u56fe\u8fc1\u79fb","text":"<p>LangGraph \u53ef\u4ee5\u8f7b\u677e\u5904\u7406\u56fe\u5b9a\u4e49\uff08\u8282\u70b9\u3001\u8fb9\u548c\u72b6\u6001\uff09\u7684\u8fc1\u79fb\uff0c\u5373\u4f7f\u4f7f\u7528\u68c0\u67e5\u70b9\u5668\u6765\u8ddf\u8e2a\u72b6\u6001\u3002</p> <ul> <li>\u5bf9\u4e8e\u56fe\u672b\u5c3e\u7684\u7ebf\u7a0b\uff08\u5373\u672a\u4e2d\u65ad\uff09\uff0c\u4f60\u53ef\u4ee5\u66f4\u6539\u56fe\u7684\u6574\u4e2a\u62d3\u6251\u7ed3\u6784\uff08\u5373\u6240\u6709\u8282\u70b9\u548c\u8fb9\uff0c\u5220\u9664\u3001\u6dfb\u52a0\u3001\u91cd\u547d\u540d\u7b49\uff09</li> <li>\u5bf9\u4e8e\u5f53\u524d\u4e2d\u65ad\u7684\u7ebf\u7a0b\uff0c\u6211\u4eec\u652f\u6301\u9664\u91cd\u547d\u540d/\u5220\u9664\u8282\u70b9\u4e4b\u5916\u7684\u6240\u6709\u62d3\u6251\u66f4\u6539\uff08\u56e0\u4e3a\u8be5\u7ebf\u7a0b\u73b0\u5728\u53ef\u80fd\u5373\u5c06\u8fdb\u5165\u4e00\u4e2a\u4e0d\u518d\u5b58\u5728\u7684\u8282\u70b9\uff09\u2014\u2014\u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u963b\u788d\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\uff0c\u6211\u4eec\u53ef\u4ee5\u4f18\u5148\u8003\u8651\u89e3\u51b3\u65b9\u6848\u3002</li> <li>\u5bf9\u4e8e\u4fee\u6539\u72b6\u6001\uff0c\u6211\u4eec\u5bf9\u6dfb\u52a0\u548c\u5220\u9664\u952e\u5177\u6709\u5b8c\u5168\u7684\u5411\u540e\u548c\u5411\u524d\u517c\u5bb9\u6027</li> <li>\u91cd\u547d\u540d\u7684\u72b6\u6001\u952e\u5728\u73b0\u6709\u7ebf\u7a0b\u4e2d\u4f1a\u4e22\u5931\u5176\u4fdd\u5b58\u7684\u72b6\u6001</li> <li>\u4ee5\u4e0d\u517c\u5bb9\u65b9\u5f0f\u66f4\u6539\u7c7b\u578b\u7684\u72b6\u6001\u952e\u53ef\u80fd\u4f1a\u5728\u66f4\u6539\u4e4b\u524d\u5177\u6709\u72b6\u6001\u7684\u7ebf\u7a0b\u4e2d\u5bfc\u81f4\u95ee\u9898\u2014\u2014\u5982\u679c\u8fd9\u662f\u4e00\u4e2a\u963b\u788d\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\uff0c\u6211\u4eec\u53ef\u4ee5\u4f18\u5148\u8003\u8651\u89e3\u51b3\u65b9\u6848\u3002</li> </ul> Python","boost":2},{"location":"concepts/low_level/#_23","title":"\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587","text":"<p>\u521b\u5efa\u56fe\u65f6\uff0c\u4f60\u53ef\u4ee5\u4e3a\u4f20\u9012\u7ed9\u8282\u70b9\u7684\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u6307\u5b9a <code>context_schema</code>\u3002\u8fd9\u5bf9\u4e8e\u4f20\u9012\u4e0d\u5c5e\u4e8e\u56fe\u72b6\u6001\u7684\u4fe1\u606f\u7ed9\u8282\u70b9\u5f88\u6709\u7528\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u4f20\u9012\u4f9d\u8d56\u9879\uff0c\u5982\u6a21\u578b\u540d\u79f0\u6216\u6570\u636e\u5e93\u8fde\u63a5\u3002</p> <pre><code>@dataclass\nclass ContextSchema:\n    llm_provider: str = \"openai\"\n\ngraph = StateGraph(State, context_schema=ContextSchema)\n</code></pre> JavaScript <p>\u521b\u5efa\u56fe\u65f6\uff0c\u4f60\u8fd8\u53ef\u4ee5\u6807\u8bb0\u56fe\u7684\u67d0\u4e9b\u90e8\u5206\u662f\u53ef\u914d\u7f6e\u7684\u3002\u8fd9\u901a\u5e38\u662f\u4e3a\u4e86\u80fd\u591f\u8f7b\u677e\u5207\u6362\u6a21\u578b\u6216\u7cfb\u7edf\u63d0\u793a\u3002\u8fd9\u5141\u8bb8\u4f60\u521b\u5efa\u5355\u4e2a\"\u8ba4\u77e5\u67b6\u6784\"\uff08\u56fe\uff09\uff0c\u4f46\u62e5\u6709\u5b83\u7684\u591a\u4e2a\u4e0d\u540c\u5b9e\u4f8b\u3002</p> <p>\u521b\u5efa\u56fe\u65f6\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u6307\u5b9a\u914d\u7f6e\u6a21\u5f0f\u3002</p> <pre><code>import { z } from \"zod\";\n\nconst ConfigSchema = z.object({\n  llm: z.string(),\n});\n\nconst graph = new StateGraph(State, ConfigSchema);\n</code></pre> Python <p>\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>invoke</code> \u65b9\u6cd5\u7684 <code>context</code> \u53c2\u6570\u5c06\u6b64\u4e0a\u4e0b\u6587\u4f20\u9012\u5230\u56fe\u4e2d\u3002</p> <pre><code>graph.invoke(inputs, context={\"llm_provider\": \"anthropic\"})\n</code></pre> JavaScript <p>\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>configurable</code> \u914d\u7f6e\u5b57\u6bb5\u5c06\u6b64\u914d\u7f6e\u4f20\u9012\u5230\u56fe\u4e2d\u3002</p> <pre><code>const config = { configurable: { llm: \"anthropic\" } };\n\nawait graph.invoke(inputs, config);\n</code></pre> <p>\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u5728\u8282\u70b9\u6216\u6761\u4ef6\u8fb9\u5185\u8bbf\u95ee\u548c\u4f7f\u7528\u6b64\u4e0a\u4e0b\u6587\uff1a</p> <pre><code>from langgraph.runtime import Runtime\n\ndef node_a(state: State, runtime: Runtime[ContextSchema]):\n    llm = get_llm(runtime.context.llm_provider)\n    ...\n</code></pre> <p>\u6709\u5173\u914d\u7f6e\u7684\u5b8c\u6574\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u6307\u5357\u3002</p> JavaScript <pre><code>graph.addNode(\"myNode\", (state, config) =&gt; {\n  const llmType = config?.configurable?.llm || \"openai\";\n  const llm = getLlm(llmType);\n  return { results: `Hello, ${state.input}!` };\n});\n</code></pre>","boost":2},{"location":"concepts/low_level/#_24","title":"\u9012\u5f52\u9650\u5236","text":"Python <p>\u9012\u5f52\u9650\u5236\u8bbe\u7f6e\u56fe\u5728\u5355\u6b21\u6267\u884c\u671f\u95f4\u53ef\u4ee5\u6267\u884c\u7684\u6700\u5927\u8d85\u6b65\u6570\u3002\u4e00\u65e6\u8fbe\u5230\u9650\u5236\uff0cLangGraph \u5c06\u5f15\u53d1 <code>GraphRecursionError</code>\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b64\u503c\u8bbe\u7f6e\u4e3a 25 \u6b65\u3002\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u4e3a\u4efb\u4f55\u56fe\u8bbe\u7f6e\u9012\u5f52\u9650\u5236\uff0c\u5e76\u901a\u8fc7\u914d\u7f6e\u5b57\u5178\u4f20\u9012\u7ed9 <code>.invoke</code>/<code>.stream</code>\u3002\u91cd\u8981\u7684\u662f\uff0c<code>recursion_limit</code> \u662f\u4e00\u4e2a\u72ec\u7acb\u7684 <code>config</code> \u952e\uff0c\u4e0d\u5e94\u8be5\u50cf\u6240\u6709\u5176\u4ed6\u7528\u6237\u5b9a\u4e49\u7684\u914d\u7f6e\u4e00\u6837\u4f20\u9012\u5230 <code>configurable</code> \u952e\u5185\u3002\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\uff1a</p> <pre><code>graph.invoke(inputs, config={\"recursion_limit\": 5}, context={\"llm\": \"anthropic\"})\n</code></pre> <p>\u9605\u8bfb\u6b64\u64cd\u4f5c\u6307\u5357\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u9012\u5f52\u9650\u5236\u5982\u4f55\u5de5\u4f5c\u7684\u4fe1\u606f\u3002</p> JavaScript <p>\u9012\u5f52\u9650\u5236\u8bbe\u7f6e\u56fe\u5728\u5355\u6b21\u6267\u884c\u671f\u95f4\u53ef\u4ee5\u6267\u884c\u7684\u6700\u5927\u8d85\u6b65\u6570\u3002\u4e00\u65e6\u8fbe\u5230\u9650\u5236\uff0cLangGraph \u5c06\u5f15\u53d1 <code>GraphRecursionError</code>\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6b64\u503c\u8bbe\u7f6e\u4e3a 25 \u6b65\u3002\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u4e3a\u4efb\u4f55\u56fe\u8bbe\u7f6e\u9012\u5f52\u9650\u5236\uff0c\u5e76\u901a\u8fc7\u914d\u7f6e\u5bf9\u8c61\u4f20\u9012\u7ed9 <code>.invoke</code>/<code>.stream</code>\u3002\u91cd\u8981\u7684\u662f\uff0c<code>recursionLimit</code> \u662f\u4e00\u4e2a\u72ec\u7acb\u7684 <code>config</code> \u952e\uff0c\u4e0d\u5e94\u8be5\u50cf\u6240\u6709\u5176\u4ed6\u7528\u6237\u5b9a\u4e49\u7684\u914d\u7f6e\u4e00\u6837\u4f20\u9012\u5230 <code>configurable</code> \u952e\u5185\u3002\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\uff1a</p> <pre><code>await graph.invoke(inputs, {\n  recursionLimit: 5,\n  configurable: { llm: \"anthropic\" },\n});\n</code></pre>","boost":2},{"location":"concepts/low_level/#_25","title":"\u53ef\u89c6\u5316","text":"<p>\u80fd\u591f\u53ef\u89c6\u5316\u56fe\u901a\u5e38\u5f88\u597d\uff0c\u7279\u522b\u662f\u5f53\u5b83\u4eec\u53d8\u5f97\u66f4\u590d\u6742\u65f6\u3002LangGraph \u5e26\u6709\u51e0\u79cd\u5185\u7f6e\u7684\u53ef\u89c6\u5316\u56fe\u7684\u65b9\u6cd5\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/mcp/","title":"MCP","text":"<p>\u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae(MCP) \u662f\u4e00\u4e2a\u5f00\u653e\u534f\u8bae,\u5b83\u6807\u51c6\u5316\u4e86\u5e94\u7528\u7a0b\u5e8f\u5982\u4f55\u5411\u8bed\u8a00\u6a21\u578b\u63d0\u4f9b\u5de5\u5177\u548c\u4e0a\u4e0b\u6587\u3002LangGraph \u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u901a\u8fc7 <code>langchain-mcp-adapters</code> \u5e93\u4f7f\u7528\u5728 MCP \u670d\u52a1\u5668\u4e0a\u5b9a\u4e49\u7684\u5de5\u5177\u3002</p> <p></p> <p>\u5b89\u88c5 <code>langchain-mcp-adapters</code> \u5e93\u4ee5\u5728 LangGraph \u4e2d\u4f7f\u7528 MCP \u5de5\u5177:</p> Python <pre><code>pip install langchain-mcp-adapters\n</code></pre> JavaScript <pre><code>npm install @langchain/mcp-adapters\n</code></pre>"},{"location":"concepts/memory/","title":"\u8bb0\u5fc6","text":"<p>\u8bb0\u5fc6\u662f\u4e00\u4e2a\u80fd\u591f\u8bb0\u4f4f\u5148\u524d\u4ea4\u4e92\u4fe1\u606f\u7684\u7cfb\u7edf\u3002\u5bf9\u4e8e AI \u667a\u80fd\u4ee3\u7406\u6765\u8bf4\uff0c\u8bb0\u5fc6\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u5b83\u8ba9\u5b83\u4eec\u80fd\u591f\u8bb0\u4f4f\u5148\u524d\u7684\u4ea4\u4e92\u3001\u4ece\u53cd\u9988\u4e2d\u5b66\u4e60\uff0c\u5e76\u9002\u5e94\u7528\u6237\u504f\u597d\u3002\u968f\u7740\u667a\u80fd\u4ee3\u7406\u5904\u7406\u8d8a\u6765\u8d8a\u590d\u6742\u7684\u4efb\u52a1\u548c\u5927\u91cf\u7528\u6237\u4ea4\u4e92\uff0c\u8fd9\u79cd\u80fd\u529b\u5bf9\u4e8e\u6548\u7387\u548c\u7528\u6237\u6ee1\u610f\u5ea6\u90fd\u53d8\u5f97\u81f3\u5173\u91cd\u8981\u3002</p> <p>\u672c\u6982\u5ff5\u6307\u5357\u6db5\u76d6\u4e24\u79cd\u7c7b\u578b\u7684\u8bb0\u5fc6\uff0c\u57fa\u4e8e\u5b83\u4eec\u7684\u53ec\u56de\u8303\u56f4\uff1a</p> <ul> <li> <p>\u77ed\u671f\u8bb0\u5fc6\uff0c\u6216\u7ebf\u7a0b\u8303\u56f4\u7684\u8bb0\u5fc6\uff0c\u901a\u8fc7\u5728\u4f1a\u8bdd\u4e2d\u7ef4\u62a4\u6d88\u606f\u5386\u53f2\u6765\u8ddf\u8e2a\u6b63\u5728\u8fdb\u884c\u7684\u5bf9\u8bdd\u3002LangGraph \u5c06\u77ed\u671f\u8bb0\u5fc6\u4f5c\u4e3a\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u7684\u4e00\u90e8\u5206\u6765\u7ba1\u7406\u3002\u72b6\u6001\u901a\u8fc7\u68c0\u67e5\u70b9\u5668\u6301\u4e45\u5316\u5230\u6570\u636e\u5e93\uff0c\u4ee5\u4fbf\u7ebf\u7a0b\u53ef\u4ee5\u5728\u4efb\u4f55\u65f6\u5019\u6062\u590d\u3002\u77ed\u671f\u8bb0\u5fc6\u5728\u56fe\u88ab\u8c03\u7528\u6216\u6b65\u9aa4\u5b8c\u6210\u65f6\u66f4\u65b0\uff0c\u72b6\u6001\u5728\u6bcf\u4e2a\u6b65\u9aa4\u5f00\u59cb\u65f6\u88ab\u8bfb\u53d6\u3002</p> </li> <li> <p>\u957f\u671f\u8bb0\u5fc6\u8de8\u4f1a\u8bdd\u5b58\u50a8\u7528\u6237\u7279\u5b9a\u6216\u5e94\u7528\u7a0b\u5e8f\u7ea7\u522b\u7684\u6570\u636e\uff0c\u5e76\u5728\u5bf9\u8bdd\u7ebf\u7a0b_\u4e4b\u95f4_\u5171\u4eab\u3002\u5b83\u53ef\u4ee5_\u5728\u4efb\u4f55\u65f6\u5019_\u548c_\u5728\u4efb\u4f55\u7ebf\u7a0b\u4e2d_\u88ab\u53ec\u56de\u3002\u8bb0\u5fc6\u88ab\u9650\u5b9a\u5728\u4efb\u4f55\u81ea\u5b9a\u4e49\u547d\u540d\u7a7a\u95f4\u4e2d\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5355\u4e2a\u7ebf\u7a0b ID \u5185\u3002LangGraph \u63d0\u4f9b\u5b58\u50a8\uff08\u53c2\u8003\u6587\u6863\uff09\u6765\u8ba9\u4f60\u4fdd\u5b58\u548c\u53ec\u56de\u957f\u671f\u8bb0\u5fc6\u3002</p> </li> </ul> <p></p>","boost":2},{"location":"concepts/memory/#_2","title":"\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u77ed\u671f\u8bb0\u5fc6\u8ba9\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u8bb0\u4f4f\u5355\u4e2a\u7ebf\u7a0b\u6216\u5bf9\u8bdd\u4e2d\u7684\u5148\u524d\u4ea4\u4e92\u3002\u7ebf\u7a0b\u5728\u4f1a\u8bdd\u4e2d\u7ec4\u7ec7\u591a\u4e2a\u4ea4\u4e92\uff0c\u7c7b\u4f3c\u4e8e\u7535\u5b50\u90ae\u4ef6\u5728\u5355\u4e2a\u5bf9\u8bdd\u4e2d\u5206\u7ec4\u6d88\u606f\u7684\u65b9\u5f0f\u3002</p> <p>LangGraph \u5c06\u77ed\u671f\u8bb0\u5fc6\u4f5c\u4e3a\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u7684\u4e00\u90e8\u5206\u6765\u7ba1\u7406\uff0c\u901a\u8fc7\u7ebf\u7a0b\u8303\u56f4\u7684\u68c0\u67e5\u70b9\u6301\u4e45\u5316\u3002\u8fd9\u4e2a\u72b6\u6001\u901a\u5e38\u53ef\u4ee5\u5305\u62ec\u5bf9\u8bdd\u5386\u53f2\u4ee5\u53ca\u5176\u4ed6\u6709\u72b6\u6001\u6570\u636e\uff0c\u5982\u4e0a\u4f20\u7684\u6587\u4ef6\u3001\u68c0\u7d22\u5230\u7684\u6587\u6863\u6216\u751f\u6210\u7684\u5de5\u4ef6\u3002\u901a\u8fc7\u5c06\u8fd9\u4e9b\u5b58\u50a8\u5728\u56fe\u7684\u72b6\u6001\u4e2d\uff0c\u673a\u5668\u4eba\u53ef\u4ee5\u8bbf\u95ee\u7ed9\u5b9a\u5bf9\u8bdd\u7684\u5b8c\u6574\u4e0a\u4e0b\u6587\uff0c\u540c\u65f6\u4fdd\u6301\u4e0d\u540c\u7ebf\u7a0b\u4e4b\u95f4\u7684\u5206\u79bb\u3002</p>","boost":2},{"location":"concepts/memory/#_3","title":"\u7ba1\u7406\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u5bf9\u8bdd\u5386\u53f2\u662f\u77ed\u671f\u8bb0\u5fc6\u6700\u5e38\u89c1\u7684\u5f62\u5f0f\uff0c\u800c\u957f\u5bf9\u8bdd\u5bf9\u5f53\u4eca\u7684 LLM \u6784\u6210\u6311\u6218\u3002\u5b8c\u6574\u7684\u5386\u53f2\u53ef\u80fd\u65e0\u6cd5\u653e\u5165 LLM \u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\u4e2d\uff0c\u5bfc\u81f4\u4e0d\u53ef\u6062\u590d\u7684\u9519\u8bef\u3002\u5373\u4f7f\u4f60\u7684 LLM \u652f\u6301\u5b8c\u6574\u7684\u4e0a\u4e0b\u6587\u957f\u5ea6\uff0c\u5927\u591a\u6570 LLM \u5728\u957f\u4e0a\u4e0b\u6587\u4e2d\u7684\u8868\u73b0\u4ecd\u7136\u5f88\u5dee\u3002\u5b83\u4eec\u4f1a\u88ab\u9648\u65e7\u6216\u504f\u79bb\u4e3b\u9898\u7684\u5185\u5bb9\"\u5206\u5fc3\"\uff0c\u540c\u65f6\u8fd8\u8981\u627f\u53d7\u66f4\u6162\u7684\u54cd\u5e94\u65f6\u95f4\u548c\u66f4\u9ad8\u7684\u6210\u672c\u3002</p> <p>\u804a\u5929\u6a21\u578b\u4f7f\u7528\u6d88\u606f\u63a5\u53d7\u4e0a\u4e0b\u6587\uff0c\u5305\u62ec\u5f00\u53d1\u8005\u63d0\u4f9b\u7684\u6307\u4ee4\uff08\u7cfb\u7edf\u6d88\u606f\uff09\u548c\u7528\u6237\u8f93\u5165\uff08\u4eba\u7c7b\u6d88\u606f\uff09\u3002\u5728\u804a\u5929\u5e94\u7528\u7a0b\u5e8f\u4e2d\uff0c\u6d88\u606f\u5728\u4eba\u7c7b\u8f93\u5165\u548c\u6a21\u578b\u54cd\u5e94\u4e4b\u95f4\u4ea4\u66ff\uff0c\u5bfc\u81f4\u6d88\u606f\u5217\u8868\u968f\u65f6\u95f4\u589e\u957f\u3002\u56e0\u4e3a\u4e0a\u4e0b\u6587\u7a97\u53e3\u6709\u9650\uff0c\u800c\u5bcc\u542b\u4ee4\u724c\u7684\u6d88\u606f\u5217\u8868\u53ef\u80fd\u4ee3\u4ef7\u9ad8\u6602\uff0c\u8bb8\u591a\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4ece\u4f7f\u7528\u6280\u672f\u6765\u624b\u52a8\u5220\u9664\u6216\u9057\u5fd8\u9648\u65e7\u4fe1\u606f\u4e2d\u53d7\u76ca\u3002</p> <p></p> <p>\u6709\u5173\u7ba1\u7406\u6d88\u606f\u7684\u5e38\u89c1\u6280\u672f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6dfb\u52a0\u548c\u7ba1\u7406\u8bb0\u5fc6\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/memory/#_4","title":"\u957f\u671f\u8bb0\u5fc6","text":"<p>LangGraph \u4e2d\u7684\u957f\u671f\u8bb0\u5fc6\u5141\u8bb8\u7cfb\u7edf\u5728\u4e0d\u540c\u5bf9\u8bdd\u6216\u4f1a\u8bdd\u4e4b\u95f4\u4fdd\u7559\u4fe1\u606f\u3002\u4e0e**\u7ebf\u7a0b\u8303\u56f4**\u7684\u77ed\u671f\u8bb0\u5fc6\u4e0d\u540c\uff0c\u957f\u671f\u8bb0\u5fc6\u4fdd\u5b58\u5728\u81ea\u5b9a\u4e49\"\u547d\u540d\u7a7a\u95f4\"\u4e2d\u3002</p> <p>\u957f\u671f\u8bb0\u5fc6\u662f\u4e00\u4e2a\u590d\u6742\u7684\u6311\u6218\uff0c\u6ca1\u6709\u4e00\u5200\u5207\u7684\u89e3\u51b3\u65b9\u6848\u3002\u4f46\u662f\uff0c\u4ee5\u4e0b\u95ee\u9898\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6846\u67b6\u6765\u5e2e\u52a9\u4f60\u5bfc\u822a\u4e0d\u540c\u7684\u6280\u672f\uff1a</p> <ul> <li> <p>\u8bb0\u5fc6\u7684\u7c7b\u578b\u662f\u4ec0\u4e48\uff1f\u4eba\u7c7b\u4f7f\u7528\u8bb0\u5fc6\u6765\u8bb0\u4f4f\u4e8b\u5b9e\uff08\u8bed\u4e49\u8bb0\u5fc6\uff09\u3001\u7ecf\u5386\uff08\u60c5\u666f\u8bb0\u5fc6\uff09\u548c\u89c4\u5219\uff08\u7a0b\u5e8f\u8bb0\u5fc6\uff09\u3002AI \u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4ee5\u540c\u6837\u7684\u65b9\u5f0f\u4f7f\u7528\u8bb0\u5fc6\u3002\u4f8b\u5982\uff0cAI \u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4f7f\u7528\u8bb0\u5fc6\u6765\u8bb0\u4f4f\u5173\u4e8e\u7528\u6237\u7684\u7279\u5b9a\u4e8b\u5b9e\u4ee5\u5b8c\u6210\u4efb\u52a1\u3002</p> </li> <li> <p>\u4f60\u60f3\u4ec0\u4e48\u65f6\u5019\u66f4\u65b0\u8bb0\u5fc6\uff1f\u8bb0\u5fc6\u53ef\u4ee5\u4f5c\u4e3a\u667a\u80fd\u4ee3\u7406\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91\u7684\u4e00\u90e8\u5206\u66f4\u65b0\uff08\u4f8b\u5982\uff0c\"\u5728\u70ed\u8def\u5f84\u4e0a\"\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u667a\u80fd\u4ee3\u7406\u901a\u5e38\u5728\u54cd\u5e94\u7528\u6237\u4e4b\u524d\u51b3\u5b9a\u8bb0\u4f4f\u4e8b\u5b9e\u3002\u6216\u8005\uff0c\u8bb0\u5fc6\u53ef\u4ee5\u4f5c\u4e3a\u540e\u53f0\u4efb\u52a1\u66f4\u65b0\uff08\u5728\u540e\u53f0/\u5f02\u6b65\u8fd0\u884c\u5e76\u751f\u6210\u8bb0\u5fc6\u7684\u903b\u8f91\uff09\u3002\u6211\u4eec\u5728\u4e0b\u9762\u7684\u90e8\u5206\u89e3\u91ca\u8fd9\u4e9b\u65b9\u6cd5\u4e4b\u95f4\u7684\u6743\u8861\u3002</p> </li> </ul>","boost":2},{"location":"concepts/memory/#_5","title":"\u8bb0\u5fc6\u7c7b\u578b","text":"<p>\u4e0d\u540c\u7684\u5e94\u7528\u7a0b\u5e8f\u9700\u8981\u4e0d\u540c\u7c7b\u578b\u7684\u8bb0\u5fc6\u3002\u867d\u7136\u7c7b\u6bd4\u5e76\u4e0d\u5b8c\u7f8e\uff0c\u4f46\u68c0\u67e5\u4eba\u7c7b\u8bb0\u5fc6\u7c7b\u578b\u53ef\u80fd\u5f88\u6709\u542f\u53d1\u6027\u3002\u4e00\u4e9b\u7814\u7a76\uff08\u4f8b\u5982\uff0cCoALA \u8bba\u6587\uff09\u751a\u81f3\u5c06\u8fd9\u4e9b\u4eba\u7c7b\u8bb0\u5fc6\u7c7b\u578b\u6620\u5c04\u5230 AI \u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7684\u7c7b\u578b\u3002</p> \u8bb0\u5fc6\u7c7b\u578b \u5b58\u50a8\u4ec0\u4e48 \u4eba\u7c7b\u793a\u4f8b \u667a\u80fd\u4ee3\u7406\u793a\u4f8b \u8bed\u4e49 \u4e8b\u5b9e \u6211\u5728\u5b66\u6821\u5b66\u5230\u7684\u4e1c\u897f \u5173\u4e8e\u7528\u6237\u7684\u4e8b\u5b9e \u60c5\u666f \u7ecf\u5386 \u6211\u505a\u8fc7\u7684\u4e8b\u60c5 \u8fc7\u53bb\u7684\u667a\u80fd\u4ee3\u7406\u64cd\u4f5c \u7a0b\u5e8f \u6307\u4ee4 \u672c\u80fd\u6216\u8fd0\u52a8\u6280\u80fd \u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u63d0\u793a","boost":2},{"location":"concepts/memory/#_6","title":"\u8bed\u4e49\u8bb0\u5fc6","text":"<p>\u8bed\u4e49\u8bb0\u5fc6\uff0c\u65e0\u8bba\u662f\u5728\u4eba\u7c7b\u8fd8\u662f AI \u667a\u80fd\u4ee3\u7406\u4e2d\uff0c\u90fd\u6d89\u53ca\u5bf9\u7279\u5b9a\u4e8b\u5b9e\u548c\u6982\u5ff5\u7684\u4fdd\u7559\u3002\u5728\u4eba\u7c7b\u4e2d\uff0c\u5b83\u53ef\u4ee5\u5305\u62ec\u5728\u5b66\u6821\u5b66\u5230\u7684\u4fe1\u606f\u4ee5\u53ca\u5bf9\u6982\u5ff5\u53ca\u5176\u5173\u7cfb\u7684\u7406\u89e3\u3002\u5bf9\u4e8e AI \u667a\u80fd\u4ee3\u7406\uff0c\u8bed\u4e49\u8bb0\u5fc6\u901a\u5e38\u7528\u4e8e\u901a\u8fc7\u8bb0\u4f4f\u8fc7\u53bb\u4ea4\u4e92\u4e2d\u7684\u4e8b\u5b9e\u6216\u6982\u5ff5\u6765\u4e2a\u6027\u5316\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>Note</p> <p>\u8bed\u4e49\u8bb0\u5fc6\u4e0e\"\u8bed\u4e49\u641c\u7d22\"\u4e0d\u540c\uff0c\u8bed\u4e49\u641c\u7d22\u662f\u4e00\u79cd\u4f7f\u7528\"\u542b\u4e49\"\uff08\u901a\u5e38\u4f5c\u4e3a\u5d4c\u5165\uff09\u67e5\u627e\u76f8\u4f3c\u5185\u5bb9\u7684\u6280\u672f\u3002\u8bed\u4e49\u8bb0\u5fc6\u662f\u5fc3\u7406\u5b66\u672f\u8bed\uff0c\u6307\u5b58\u50a8\u4e8b\u5b9e\u548c\u77e5\u8bc6\uff0c\u800c\u8bed\u4e49\u641c\u7d22\u662f\u4e00\u79cd\u57fa\u4e8e\u542b\u4e49\u800c\u975e\u7cbe\u786e\u5339\u914d\u68c0\u7d22\u4fe1\u606f\u7684\u65b9\u6cd5\u3002</p>","boost":2},{"location":"concepts/memory/#_7","title":"\u4e2a\u4eba\u8d44\u6599","text":"<p>\u8bed\u4e49\u8bb0\u5fc6\u53ef\u4ee5\u4ee5\u4e0d\u540c\u7684\u65b9\u5f0f\u7ba1\u7406\u3002\u4f8b\u5982\uff0c\u8bb0\u5fc6\u53ef\u4ee5\u662f\u5173\u4e8e\u7528\u6237\u3001\u7ec4\u7ec7\u6216\u5176\u4ed6\u5b9e\u4f53\uff08\u5305\u62ec\u667a\u80fd\u4ee3\u7406\u672c\u8eab\uff09\u7684\u8303\u56f4\u660e\u786e\u7684\u7279\u5b9a\u4fe1\u606f\u7684\u5355\u4e2a\u6301\u7eed\u66f4\u65b0\u7684\"\u4e2a\u4eba\u8d44\u6599\"\u3002\u4e2a\u4eba\u8d44\u6599\u901a\u5e38\u53ea\u662f\u4e00\u4e2a JSON \u6587\u6863\uff0c\u5305\u542b\u4f60\u9009\u62e9\u6765\u8868\u793a\u4f60\u7684\u9886\u57df\u7684\u5404\u79cd\u952e\u503c\u5bf9\u3002</p> <p>\u8bb0\u4f4f\u4e2a\u4eba\u8d44\u6599\u65f6\uff0c\u4f60\u9700\u8981\u786e\u4fdd\u6bcf\u6b21\u90fd\u5728**\u66f4\u65b0**\u4e2a\u4eba\u8d44\u6599\u3002\u56e0\u6b64\uff0c\u4f60\u9700\u8981\u4f20\u5165\u5148\u524d\u7684\u4e2a\u4eba\u8d44\u6599\u5e76\u8981\u6c42\u6a21\u578b\u751f\u6210\u65b0\u7684\u4e2a\u4eba\u8d44\u6599\uff08\u6216\u4e00\u4e9bJSON \u8865\u4e01\u5e94\u7528\u4e8e\u65e7\u7684\u4e2a\u4eba\u8d44\u6599\uff09\u3002\u968f\u7740\u4e2a\u4eba\u8d44\u6599\u53d8\u5927\uff0c\u8fd9\u53ef\u80fd\u53d8\u5f97\u5bb9\u6613\u51fa\u9519\uff0c\u5e76\u4e14\u53ef\u80fd\u53d7\u76ca\u4e8e\u5c06\u4e2a\u4eba\u8d44\u6599\u62c6\u5206\u4e3a\u591a\u4e2a\u6587\u6863\u6216\u5728\u751f\u6210\u6587\u6863\u65f6\u4f7f\u7528**\u4e25\u683c**\u89e3\u7801\u4ee5\u786e\u4fdd\u8bb0\u5fc6\u6a21\u5f0f\u4fdd\u6301\u6709\u6548\u3002</p> <p></p>","boost":2},{"location":"concepts/memory/#_8","title":"\u96c6\u5408","text":"<p>\u6216\u8005\uff0c\u8bb0\u5fc6\u53ef\u4ee5\u662f\u968f\u65f6\u95f4\u4e0d\u65ad\u66f4\u65b0\u548c\u6269\u5c55\u7684\u6587\u6863\u96c6\u5408\u3002\u6bcf\u4e2a\u5355\u72ec\u7684\u8bb0\u5fc6\u53ef\u4ee5\u8303\u56f4\u66f4\u7a84\uff0c\u66f4\u5bb9\u6613\u751f\u6210\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u4e0d\u592a\u53ef\u80fd\u968f\u65f6\u95f4**\u4e22\u5931**\u4fe1\u606f\u3002LLM \u66f4\u5bb9\u6613\u4e3a\u65b0\u4fe1\u606f\u751f\u6210_\u65b0_\u5bf9\u8c61\uff0c\u800c\u4e0d\u662f\u5c06\u65b0\u4fe1\u606f\u4e0e\u73b0\u6709\u4e2a\u4eba\u8d44\u6599\u534f\u8c03\u3002\u56e0\u6b64\uff0c\u6587\u6863\u96c6\u5408\u5f80\u5f80\u4f1a\u5bfc\u81f4\u66f4\u9ad8\u7684\u4e0b\u6e38\u53ec\u56de\u7387\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u5c06\u4e00\u4e9b\u590d\u6742\u6027\u8f6c\u79fb\u5230\u8bb0\u5fc6\u66f4\u65b0\u4e0a\u3002\u6a21\u578b\u73b0\u5728\u5fc5\u987b_\u5220\u9664_\u6216_\u66f4\u65b0_\u5217\u8868\u4e2d\u7684\u73b0\u6709\u9879\u76ee\uff0c\u8fd9\u53ef\u80fd\u5f88\u68d8\u624b\u3002\u6b64\u5916\uff0c\u4e00\u4e9b\u6a21\u578b\u53ef\u80fd\u9ed8\u8ba4\u8fc7\u5ea6\u63d2\u5165\uff0c\u800c\u5176\u4ed6\u6a21\u578b\u53ef\u80fd\u9ed8\u8ba4\u8fc7\u5ea6\u66f4\u65b0\u3002\u53c2\u89c1 Trustcall \u5305\u4e86\u89e3\u4e00\u79cd\u7ba1\u7406\u6b64\u95ee\u9898\u7684\u65b9\u6cd5\uff0c\u5e76\u8003\u8651\u8bc4\u4f30\uff08\u4f8b\u5982\uff0c\u4f7f\u7528\u50cf LangSmith \u8fd9\u6837\u7684\u5de5\u5177\uff09\u6765\u5e2e\u52a9\u4f60\u8c03\u6574\u884c\u4e3a\u3002</p> <p>\u4f7f\u7528\u6587\u6863\u96c6\u5408\u8fd8\u5c06\u590d\u6742\u6027\u8f6c\u79fb\u5230\u8bb0\u5fc6**\u641c\u7d22**\u5217\u8868\u4e0a\u3002<code>Store</code> \u76ee\u524d\u652f\u6301\u8bed\u4e49\u641c\u7d22\u548c\u6309\u5185\u5bb9\u8fc7\u6ee4\u3002</p> <p>\u6700\u540e\uff0c\u4f7f\u7528\u8bb0\u5fc6\u96c6\u5408\u53ef\u80fd\u4f7f\u5411\u6a21\u578b\u63d0\u4f9b\u5168\u9762\u4e0a\u4e0b\u6587\u53d8\u5f97\u5177\u6709\u6311\u6218\u6027\u3002\u867d\u7136\u5355\u4e2a\u8bb0\u5fc6\u53ef\u80fd\u9075\u5faa\u7279\u5b9a\u6a21\u5f0f\uff0c\u4f46\u8fd9\u79cd\u7ed3\u6784\u53ef\u80fd\u65e0\u6cd5\u6355\u83b7\u8bb0\u5fc6\u4e4b\u95f4\u7684\u5b8c\u6574\u4e0a\u4e0b\u6587\u6216\u5173\u7cfb\u3002\u56e0\u6b64\uff0c\u5f53\u4f7f\u7528\u8fd9\u4e9b\u8bb0\u5fc6\u751f\u6210\u54cd\u5e94\u65f6\uff0c\u6a21\u578b\u53ef\u80fd\u7f3a\u5c11\u5728\u7edf\u4e00\u4e2a\u4eba\u8d44\u6599\u65b9\u6cd5\u4e2d\u66f4\u5bb9\u6613\u83b7\u5f97\u7684\u91cd\u8981\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002</p> <p></p> <p>\u65e0\u8bba\u8bb0\u5fc6\u7ba1\u7406\u65b9\u6cd5\u5982\u4f55\uff0c\u6838\u5fc3\u8981\u70b9\u662f\u667a\u80fd\u4ee3\u7406\u5c06\u4f7f\u7528\u8bed\u4e49\u8bb0\u5fc6\u6765\u652f\u6491\u5176\u54cd\u5e94\uff0c\u8fd9\u901a\u5e38\u4f1a\u5bfc\u81f4\u66f4\u4e2a\u6027\u5316\u548c\u76f8\u5173\u7684\u4ea4\u4e92\u3002</p>","boost":2},{"location":"concepts/memory/#_9","title":"\u60c5\u666f\u8bb0\u5fc6","text":"<p>\u60c5\u666f\u8bb0\u5fc6\uff0c\u65e0\u8bba\u662f\u5728\u4eba\u7c7b\u8fd8\u662f AI \u667a\u80fd\u4ee3\u7406\u4e2d\uff0c\u90fd\u6d89\u53ca\u56de\u5fc6\u8fc7\u53bb\u7684\u4e8b\u4ef6\u6216\u884c\u52a8\u3002CoALA \u8bba\u6587\u5f88\u597d\u5730\u9610\u8ff0\u4e86\u8fd9\u4e00\u70b9\uff1a\u4e8b\u5b9e\u53ef\u4ee5\u5199\u5165\u8bed\u4e49\u8bb0\u5fc6\uff0c\u800c*\u7ecf\u5386*\u53ef\u4ee5\u5199\u5165\u60c5\u666f\u8bb0\u5fc6\u3002\u5bf9\u4e8e AI \u667a\u80fd\u4ee3\u7406\uff0c\u60c5\u666f\u8bb0\u5fc6\u901a\u5e38\u7528\u4e8e\u5e2e\u52a9\u667a\u80fd\u4ee3\u7406\u8bb0\u4f4f\u5982\u4f55\u5b8c\u6210\u4efb\u52a1\u3002</p> Python <p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u60c5\u666f\u8bb0\u5fc6\u901a\u5e38\u901a\u8fc7\u5c11\u6837\u672c\u793a\u4f8b\u63d0\u793a\u5b9e\u73b0\uff0c\u5176\u4e2d\u667a\u80fd\u4ee3\u7406\u4ece\u8fc7\u53bb\u7684\u5e8f\u5217\u4e2d\u5b66\u4e60\u4ee5\u6b63\u786e\u6267\u884c\u4efb\u52a1\u3002\u6709\u65f6\"\u5c55\u793a\"\u6bd4\"\u544a\u8bc9\"\u66f4\u5bb9\u6613\uff0cLLM \u4ece\u793a\u4f8b\u4e2d\u5b66\u4e60\u5f97\u5f88\u597d\u3002\u5c11\u6837\u672c\u5b66\u4e60\u8ba9\u4f60\u901a\u8fc7\u7528\u8f93\u5165-\u8f93\u51fa\u793a\u4f8b\u66f4\u65b0\u63d0\u793a\u6765\"\u7f16\u7a0b\"\u4f60\u7684 LLM\uff0c\u4ee5\u8bf4\u660e\u9884\u671f\u884c\u4e3a\u3002\u867d\u7136\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u6700\u4f73\u5b9e\u8df5\u6765\u751f\u6210\u5c11\u6837\u672c\u793a\u4f8b\uff0c\u4f46\u6311\u6218\u901a\u5e38\u5728\u4e8e\u6839\u636e\u7528\u6237\u8f93\u5165\u9009\u62e9\u6700\u76f8\u5173\u7684\u793a\u4f8b\u3002</p> JavaScript <p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u60c5\u666f\u8bb0\u5fc6\u901a\u5e38\u901a\u8fc7\u5c11\u6837\u672c\u793a\u4f8b\u63d0\u793a\u5b9e\u73b0\uff0c\u5176\u4e2d\u667a\u80fd\u4ee3\u7406\u4ece\u8fc7\u53bb\u7684\u5e8f\u5217\u4e2d\u5b66\u4e60\u4ee5\u6b63\u786e\u6267\u884c\u4efb\u52a1\u3002\u6709\u65f6\"\u5c55\u793a\"\u6bd4\"\u544a\u8bc9\"\u66f4\u5bb9\u6613\uff0cLLM \u4ece\u793a\u4f8b\u4e2d\u5b66\u4e60\u5f97\u5f88\u597d\u3002\u5c11\u6837\u672c\u5b66\u4e60\u8ba9\u4f60\u901a\u8fc7\u7528\u8f93\u5165-\u8f93\u51fa\u793a\u4f8b\u66f4\u65b0\u63d0\u793a\u6765\"\u7f16\u7a0b\"\u4f60\u7684 LLM\uff0c\u4ee5\u8bf4\u660e\u9884\u671f\u884c\u4e3a\u3002\u867d\u7136\u53ef\u4ee5\u4f7f\u7528\u5404\u79cd\u6700\u4f73\u5b9e\u8df5\u6765\u751f\u6210\u5c11\u6837\u672c\u793a\u4f8b\uff0c\u4f46\u6311\u6218\u901a\u5e38\u5728\u4e8e\u6839\u636e\u7528\u6237\u8f93\u5165\u9009\u62e9\u6700\u76f8\u5173\u7684\u793a\u4f8b\u3002</p> Python <p>\u8bf7\u6ce8\u610f\uff0c\u8bb0\u5fc6\u5b58\u50a8\u53ea\u662f\u5c06\u6570\u636e\u5b58\u50a8\u4e3a\u5c11\u6837\u672c\u793a\u4f8b\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u5982\u679c\u4f60\u60f3\u8981\u66f4\u591a\u7684\u5f00\u53d1\u8005\u53c2\u4e0e\uff0c\u6216\u5c06\u5c11\u6837\u672c\u793a\u4f8b\u4e0e\u4f60\u7684\u8bc4\u4f30\u5de5\u5177\u66f4\u7d27\u5bc6\u5730\u8054\u7cfb\u8d77\u6765\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 LangSmith \u6570\u636e\u96c6\u6765\u5b58\u50a8\u4f60\u7684\u6570\u636e\u3002\u7136\u540e\uff0c\u52a8\u6001\u5c11\u6837\u672c\u793a\u4f8b\u9009\u62e9\u5668\u53ef\u4ee5\u5f00\u7bb1\u5373\u7528\u5730\u5b9e\u73b0\u540c\u6837\u7684\u76ee\u6807\u3002LangSmith \u5c06\u4e3a\u4f60\u7d22\u5f15\u6570\u636e\u96c6\uff0c\u5e76\u80fd\u591f\u6839\u636e\u5173\u952e\u8bcd\u76f8\u4f3c\u6027\u68c0\u7d22\u4e0e\u7528\u6237\u8f93\u5165\u6700\u76f8\u5173\u7684\u5c11\u6837\u672c\u793a\u4f8b\uff08\u4f7f\u7528\u7c7b\u4f3c BM25 \u7684\u7b97\u6cd5\u8fdb\u884c\u57fa\u4e8e\u5173\u952e\u8bcd\u7684\u76f8\u4f3c\u6027\uff09\u3002</p> <p>\u53c2\u89c1\u6b64\u64cd\u4f5c\u6307\u5357\u89c6\u9891\u4e86\u89e3 LangSmith \u4e2d\u52a8\u6001\u5c11\u6837\u672c\u793a\u4f8b\u9009\u62e9\u7684\u793a\u4f8b\u7528\u6cd5\u3002\u53e6\u5916\uff0c\u53c2\u89c1\u6b64\u535a\u5ba2\u6587\u7ae0\u5c55\u793a\u5c11\u6837\u672c\u63d0\u793a\u4ee5\u6539\u8fdb\u5de5\u5177\u8c03\u7528\u6027\u80fd\uff0c\u4ee5\u53ca\u6b64\u535a\u5ba2\u6587\u7ae0\u4f7f\u7528\u5c11\u6837\u672c\u793a\u4f8b\u5c06 LLM \u4e0e\u4eba\u7c7b\u504f\u597d\u5bf9\u9f50\u3002</p> JavaScript <p>\u8bf7\u6ce8\u610f\uff0c\u8bb0\u5fc6\u5b58\u50a8\u53ea\u662f\u5c06\u6570\u636e\u5b58\u50a8\u4e3a\u5c11\u6837\u672c\u793a\u4f8b\u7684\u4e00\u79cd\u65b9\u5f0f\u3002\u5982\u679c\u4f60\u60f3\u8981\u66f4\u591a\u7684\u5f00\u53d1\u8005\u53c2\u4e0e\uff0c\u6216\u5c06\u5c11\u6837\u672c\u793a\u4f8b\u4e0e\u4f60\u7684\u8bc4\u4f30\u5de5\u5177\u66f4\u7d27\u5bc6\u5730\u8054\u7cfb\u8d77\u6765\uff0c\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 LangSmith \u6570\u636e\u96c6\u6765\u5b58\u50a8\u4f60\u7684\u6570\u636e\u3002\u7136\u540e\uff0c\u52a8\u6001\u5c11\u6837\u672c\u793a\u4f8b\u9009\u62e9\u5668\u53ef\u4ee5\u5f00\u7bb1\u5373\u7528\u5730\u5b9e\u73b0\u540c\u6837\u7684\u76ee\u6807\u3002LangSmith \u5c06\u4e3a\u4f60\u7d22\u5f15\u6570\u636e\u96c6\uff0c\u5e76\u80fd\u591f\u6839\u636e\u5173\u952e\u8bcd\u76f8\u4f3c\u6027\u68c0\u7d22\u4e0e\u7528\u6237\u8f93\u5165\u6700\u76f8\u5173\u7684\u5c11\u6837\u672c\u793a\u4f8b\u3002</p> <p>\u53c2\u89c1\u6b64\u64cd\u4f5c\u6307\u5357\u89c6\u9891\u4e86\u89e3 LangSmith \u4e2d\u52a8\u6001\u5c11\u6837\u672c\u793a\u4f8b\u9009\u62e9\u7684\u793a\u4f8b\u7528\u6cd5\u3002\u53e6\u5916\uff0c\u53c2\u89c1\u6b64\u535a\u5ba2\u6587\u7ae0\u5c55\u793a\u5c11\u6837\u672c\u63d0\u793a\u4ee5\u6539\u8fdb\u5de5\u5177\u8c03\u7528\u6027\u80fd\uff0c\u4ee5\u53ca\u6b64\u535a\u5ba2\u6587\u7ae0\u4f7f\u7528\u5c11\u6837\u672c\u793a\u4f8b\u5c06 LLM \u4e0e\u4eba\u7c7b\u504f\u597d\u5bf9\u9f50\u3002</p>","boost":2},{"location":"concepts/memory/#_10","title":"\u7a0b\u5e8f\u8bb0\u5fc6","text":"<p>\u7a0b\u5e8f\u8bb0\u5fc6\uff0c\u65e0\u8bba\u662f\u5728\u4eba\u7c7b\u8fd8\u662f AI \u667a\u80fd\u4ee3\u7406\u4e2d\uff0c\u90fd\u6d89\u53ca\u8bb0\u4f4f\u7528\u4e8e\u6267\u884c\u4efb\u52a1\u7684\u89c4\u5219\u3002\u5728\u4eba\u7c7b\u4e2d\uff0c\u7a0b\u5e8f\u8bb0\u5fc6\u5c31\u50cf\u662f\u5982\u4f55\u6267\u884c\u4efb\u52a1\u7684\u5185\u5316\u77e5\u8bc6\uff0c\u4f8b\u5982\u901a\u8fc7\u57fa\u672c\u8fd0\u52a8\u6280\u80fd\u548c\u5e73\u8861\u6765\u9a91\u81ea\u884c\u8f66\u3002\u53e6\u4e00\u65b9\u9762\uff0c\u60c5\u666f\u8bb0\u5fc6\u6d89\u53ca\u56de\u5fc6\u7279\u5b9a\u7ecf\u5386\uff0c\u4f8b\u5982\u7b2c\u4e00\u6b21\u4e0d\u7528\u8f85\u52a9\u8f6e\u6210\u529f\u9a91\u81ea\u884c\u8f66\uff0c\u6216\u8005\u4e00\u6b21\u96be\u5fd8\u7684\u98ce\u666f\u8def\u7ebf\u9a91\u884c\u3002\u5bf9\u4e8e AI \u667a\u80fd\u4ee3\u7406\uff0c\u7a0b\u5e8f\u8bb0\u5fc6\u662f\u6a21\u578b\u6743\u91cd\u3001\u667a\u80fd\u4ee3\u7406\u4ee3\u7801\u548c\u667a\u80fd\u4ee3\u7406\u63d0\u793a\u7684\u7ec4\u5408\uff0c\u5171\u540c\u51b3\u5b9a\u667a\u80fd\u4ee3\u7406\u7684\u529f\u80fd\u3002</p> <p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u4fee\u6539\u5176\u6a21\u578b\u6743\u91cd\u6216\u91cd\u5199\u5176\u4ee3\u7801\u662f\u76f8\u5f53\u4e0d\u5e38\u89c1\u7684\u3002\u4f46\u662f\uff0c\u667a\u80fd\u4ee3\u7406\u4fee\u6539\u81ea\u5df1\u7684\u63d0\u793a\u66f4\u4e3a\u5e38\u89c1\u3002</p> <p>\u6539\u8fdb\u667a\u80fd\u4ee3\u7406\u6307\u4ee4\u7684\u4e00\u4e2a\u6709\u6548\u65b9\u6cd5\u662f\u901a\u8fc7\"\u53cd\u601d\"\u6216\u5143\u63d0\u793a\u3002\u8fd9\u6d89\u53ca\u7528\u5176\u5f53\u524d\u6307\u4ee4\uff08\u4f8b\u5982\uff0c\u7cfb\u7edf\u63d0\u793a\uff09\u4ee5\u53ca\u6700\u8fd1\u7684\u5bf9\u8bdd\u6216\u660e\u786e\u7684\u7528\u6237\u53cd\u9988\u6765\u63d0\u793a\u667a\u80fd\u4ee3\u7406\u3002\u7136\u540e\u667a\u80fd\u4ee3\u7406\u6839\u636e\u6b64\u8f93\u5165\u6539\u8fdb\u81ea\u5df1\u7684\u6307\u4ee4\u3002\u8fd9\u79cd\u65b9\u6cd5\u5bf9\u4e8e\u96be\u4ee5\u9884\u5148\u6307\u5b9a\u6307\u4ee4\u7684\u4efb\u52a1\u7279\u522b\u6709\u7528\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u4ece\u5176\u4ea4\u4e92\u4e2d\u5b66\u4e60\u548c\u9002\u5e94\u3002</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u4f7f\u7528\u5916\u90e8\u53cd\u9988\u548c\u63d0\u793a\u91cd\u5199\u6784\u5efa\u4e86\u4e00\u4e2a Tweet \u751f\u6210\u5668\u6765\u4e3a Twitter \u751f\u6210\u9ad8\u8d28\u91cf\u7684\u8bba\u6587\u6458\u8981\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7279\u5b9a\u7684\u6458\u8981\u63d0\u793a\u5f88\u96be*\u5148\u9a8c*\u6307\u5b9a\uff0c\u4f46\u7528\u6237\u5f88\u5bb9\u6613\u6279\u8bc4\u751f\u6210\u7684 Tweet \u5e76\u63d0\u4f9b\u5173\u4e8e\u5982\u4f55\u6539\u8fdb\u6458\u8981\u8fc7\u7a0b\u7684\u53cd\u9988\u3002</p> <p>\u4e0b\u9762\u7684\u4f2a\u4ee3\u7801\u5c55\u793a\u4e86\u5982\u4f55\u4f7f\u7528 LangGraph \u8bb0\u5fc6\u5b58\u50a8\u5b9e\u73b0\u8fd9\u4e00\u70b9\uff0c\u4f7f\u7528\u5b58\u50a8\u4fdd\u5b58\u63d0\u793a\uff0c<code>update_instructions</code> \u8282\u70b9\u83b7\u53d6\u5f53\u524d\u63d0\u793a\uff08\u4ee5\u53ca\u4ece\u4e0e\u7528\u6237\u5bf9\u8bdd\u4e2d\u6355\u83b7\u7684\u53cd\u9988\u5728 <code>state[\"messages\"]</code> \u4e2d\uff09\uff0c\u66f4\u65b0\u63d0\u793a\uff0c\u5e76\u5c06\u65b0\u63d0\u793a\u4fdd\u5b58\u56de\u5b58\u50a8\u3002\u7136\u540e\uff0c<code>call_model</code> \u4ece\u5b58\u50a8\u4e2d\u83b7\u53d6\u66f4\u65b0\u7684\u63d0\u793a\u5e76\u4f7f\u7528\u5b83\u6765\u751f\u6210\u54cd\u5e94\u3002</p> Python <pre><code># Node that *uses* the instructions\ndef call_model(state: State, store: BaseStore):\n    namespace = (\"agent_instructions\", )\n    instructions = store.get(namespace, key=\"agent_a\")[0]\n    # Application logic\n    prompt = prompt_template.format(instructions=instructions.value[\"instructions\"])\n    ...\n\n# Node that updates instructions\ndef update_instructions(state: State, store: BaseStore):\n    namespace = (\"instructions\",)\n    current_instructions = store.search(namespace)[0]\n    # Memory logic\n    prompt = prompt_template.format(instructions=current_instructions.value[\"instructions\"], conversation=state[\"messages\"])\n    output = llm.invoke(prompt)\n    new_instructions = output['new_instructions']\n    store.put((\"agent_instructions\",), \"agent_a\", {\"instructions\": new_instructions})\n    ...\n</code></pre> JavaScript <pre><code>// Node that *uses* the instructions\nconst callModel = async (state: State, store: BaseStore) =&gt; {\n    const namespace = [\"agent_instructions\"];\n    const instructions = await store.get(namespace, \"agent_a\");\n    // Application logic\n    const prompt = promptTemplate.format({\n        instructions: instructions[0].value.instructions\n    });\n    // ...\n};\n\n// Node that updates instructions\nconst updateInstructions = async (state: State, store: BaseStore) =&gt; {\n    const namespace = [\"instructions\"];\n    const currentInstructions = await store.search(namespace);\n    // Memory logic\n    const prompt = promptTemplate.format({\n        instructions: currentInstructions[0].value.instructions,\n        conversation: state.messages\n    });\n    const output = await llm.invoke(prompt);\n    const newInstructions = output.new_instructions;\n    await store.put([\"agent_instructions\"], \"agent_a\", {\n        instructions: newInstructions\n    });\n    // ...\n};\n</code></pre> <p></p>","boost":2},{"location":"concepts/memory/#_11","title":"\u5199\u5165\u8bb0\u5fc6","text":"<p>\u667a\u80fd\u4ee3\u7406\u5199\u5165\u8bb0\u5fc6\u6709\u4e24\u79cd\u4e3b\u8981\u65b9\u6cd5\uff1a\"\u5728\u70ed\u8def\u5f84\u4e0a\"\u548c\"\u5728\u540e\u53f0\"\u3002</p> <p></p>","boost":2},{"location":"concepts/memory/#_12","title":"\u5728\u70ed\u8def\u5f84\u4e0a","text":"<p>\u5728\u8fd0\u884c\u65f6\u521b\u5efa\u8bb0\u5fc6\u65e2\u6709\u4f18\u52bf\u4e5f\u6709\u6311\u6218\u3002\u4ece\u79ef\u6781\u7684\u4e00\u9762\u6765\u770b\uff0c\u8fd9\u79cd\u65b9\u6cd5\u5141\u8bb8\u5b9e\u65f6\u66f4\u65b0\uff0c\u4f7f\u65b0\u8bb0\u5fc6\u7acb\u5373\u53ef\u7528\u4e8e\u540e\u7eed\u4ea4\u4e92\u3002\u5b83\u8fd8\u652f\u6301\u900f\u660e\u5ea6\uff0c\u56e0\u4e3a\u7528\u6237\u53ef\u4ee5\u5728\u521b\u5efa\u548c\u5b58\u50a8\u8bb0\u5fc6\u65f6\u5f97\u5230\u901a\u77e5\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u5e26\u6765\u6311\u6218\u3002\u5982\u679c\u667a\u80fd\u4ee3\u7406\u9700\u8981\u65b0\u5de5\u5177\u6765\u51b3\u5b9a\u5c06\u4ec0\u4e48\u63d0\u4ea4\u5230\u8bb0\u5fc6\uff0c\u53ef\u80fd\u4f1a\u589e\u52a0\u590d\u6742\u6027\u3002\u6b64\u5916\uff0c\u5173\u4e8e\u4fdd\u5b58\u4ec0\u4e48\u5230\u8bb0\u5fc6\u7684\u63a8\u7406\u8fc7\u7a0b\u53ef\u80fd\u4f1a\u5f71\u54cd\u667a\u80fd\u4ee3\u7406\u5ef6\u8fdf\u3002\u6700\u540e\uff0c\u667a\u80fd\u4ee3\u7406\u5fc5\u987b\u5728\u8bb0\u5fc6\u521b\u5efa\u548c\u5176\u5176\u4ed6\u804c\u8d23\u4e4b\u95f4\u591a\u4efb\u52a1\u5904\u7406\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u521b\u5efa\u7684\u8bb0\u5fc6\u7684\u6570\u91cf\u548c\u8d28\u91cf\u3002</p> <p>\u4f8b\u5982\uff0cChatGPT \u4f7f\u7528 save_memories \u5de5\u5177\u5c06\u8bb0\u5fc6\u4f5c\u4e3a\u5185\u5bb9\u5b57\u7b26\u4e32\u8fdb\u884c\u66f4\u65b0\u63d2\u5165\uff0c\u51b3\u5b9a\u662f\u5426\u4ee5\u53ca\u5982\u4f55\u5728\u6bcf\u6761\u7528\u6237\u6d88\u606f\u4e2d\u4f7f\u7528\u6b64\u5de5\u5177\u3002\u53c2\u89c1\u6211\u4eec\u7684 memory-agent \u6a21\u677f\u4f5c\u4e3a\u53c2\u8003\u5b9e\u73b0\u3002</p>","boost":2},{"location":"concepts/memory/#_13","title":"\u5728\u540e\u53f0","text":"<p>\u5c06\u8bb0\u5fc6\u521b\u5efa\u4f5c\u4e3a\u5355\u72ec\u7684\u540e\u53f0\u4efb\u52a1\u63d0\u4f9b\u4e86\u51e0\u4e2a\u4f18\u52bf\u3002\u5b83\u6d88\u9664\u4e86\u4e3b\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7684\u5ef6\u8fdf\uff0c\u5c06\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91\u4e0e\u8bb0\u5fc6\u7ba1\u7406\u5206\u5f00\uff0c\u5e76\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u66f4\u4e13\u6ce8\u5730\u5b8c\u6210\u4efb\u52a1\u3002\u8fd9\u79cd\u65b9\u6cd5\u8fd8\u63d0\u4f9b\u4e86\u7075\u6d3b\u6027\uff0c\u53ef\u4ee5\u5728\u8bb0\u5fc6\u521b\u5efa\u65f6\u673a\u4e0a\u907f\u514d\u5197\u4f59\u5de5\u4f5c\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u79cd\u65b9\u6cd5\u6709\u5176\u81ea\u8eab\u7684\u6311\u6218\u3002\u786e\u5b9a\u8bb0\u5fc6\u5199\u5165\u7684\u9891\u7387\u53d8\u5f97\u81f3\u5173\u91cd\u8981\uff0c\u56e0\u4e3a\u4e0d\u9891\u7e41\u7684\u66f4\u65b0\u53ef\u80fd\u4f1a\u4f7f\u5176\u4ed6\u7ebf\u7a0b\u6ca1\u6709\u65b0\u4e0a\u4e0b\u6587\u3002\u51b3\u5b9a\u4f55\u65f6\u89e6\u53d1\u8bb0\u5fc6\u5f62\u6210\u4e5f\u5f88\u91cd\u8981\u3002\u5e38\u89c1\u7b56\u7565\u5305\u62ec\u5728\u8bbe\u5b9a\u7684\u65f6\u95f4\u6bb5\u540e\u8c03\u5ea6\uff08\u5982\u679c\u53d1\u751f\u65b0\u4e8b\u4ef6\u5219\u91cd\u65b0\u8c03\u5ea6\uff09\u3001\u4f7f\u7528 cron \u8c03\u5ea6\uff0c\u6216\u5141\u8bb8\u7528\u6237\u6216\u5e94\u7528\u7a0b\u5e8f\u903b\u8f91\u624b\u52a8\u89e6\u53d1\u3002</p> <p>\u53c2\u89c1\u6211\u4eec\u7684 memory-service \u6a21\u677f\u4f5c\u4e3a\u53c2\u8003\u5b9e\u73b0\u3002</p>","boost":2},{"location":"concepts/memory/#_14","title":"\u8bb0\u5fc6\u5b58\u50a8","text":"<p>LangGraph \u5c06\u957f\u671f\u8bb0\u5fc6\u4f5c\u4e3a JSON \u6587\u6863\u5b58\u50a8\u5728\u5b58\u50a8\u4e2d\u3002\u6bcf\u4e2a\u8bb0\u5fc6\u90fd\u7ec4\u7ec7\u5728\u81ea\u5b9a\u4e49 <code>namespace</code>\uff08\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u5939\uff09\u548c\u4e0d\u540c\u7684 <code>key</code>\uff08\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u540d\uff09\u4e0b\u3002\u547d\u540d\u7a7a\u95f4\u901a\u5e38\u5305\u62ec\u7528\u6237\u6216\u7ec4\u7ec7 ID \u6216\u5176\u4ed6\u6807\u7b7e\uff0c\u4f7f\u7ec4\u7ec7\u4fe1\u606f\u66f4\u5bb9\u6613\u3002\u8fd9\u79cd\u7ed3\u6784\u5b9e\u73b0\u4e86\u8bb0\u5fc6\u7684\u5206\u5c42\u7ec4\u7ec7\u3002\u7136\u540e\u901a\u8fc7\u5185\u5bb9\u8fc7\u6ee4\u5668\u652f\u6301\u8de8\u547d\u540d\u7a7a\u95f4\u641c\u7d22\u3002</p> Python <pre><code>from langgraph.store.memory import InMemoryStore\n\n\ndef embed(texts: list[str]) -&gt; list[list[float]]:\n    # Replace with an actual embedding function or LangChain embeddings object\n    return [[1.0, 2.0] * len(texts)]\n\n\n# InMemoryStore saves data to an in-memory dictionary. Use a DB-backed store in production use.\nstore = InMemoryStore(index={\"embed\": embed, \"dims\": 2})\nuser_id = \"my-user\"\napplication_context = \"chitchat\"\nnamespace = (user_id, application_context)\nstore.put(\n    namespace,\n    \"a-memory\",\n    {\n        \"rules\": [\n            \"User likes short, direct language\",\n            \"User only speaks English &amp; python\",\n        ],\n        \"my-key\": \"my-value\",\n    },\n)\n# get the \"memory\" by ID\nitem = store.get(namespace, \"a-memory\")\n# search for \"memories\" within this namespace, filtering on content equivalence, sorted by vector similarity\nitems = store.search(\n    namespace, filter={\"my-key\": \"my-value\"}, query=\"language preferences\"\n)\n</code></pre> JavaScript <pre><code>import { InMemoryStore } from \"@langchain/langgraph\";\n\nconst embed = (texts: string[]): number[][] =&gt; {\n    // Replace with an actual embedding function or LangChain embeddings object\n    return texts.map(() =&gt; [1.0, 2.0]);\n};\n\n// InMemoryStore saves data to an in-memory dictionary. Use a DB-backed store in production use.\nconst store = new InMemoryStore({ index: { embed, dims: 2 } });\nconst userId = \"my-user\";\nconst applicationContext = \"chitchat\";\nconst namespace = [userId, applicationContext];\n\nawait store.put(\n    namespace,\n    \"a-memory\",\n    {\n        rules: [\n            \"User likes short, direct language\",\n            \"User only speaks English &amp; TypeScript\",\n        ],\n        \"my-key\": \"my-value\",\n    }\n);\n\n// get the \"memory\" by ID\nconst item = await store.get(namespace, \"a-memory\");\n\n// search for \"memories\" within this namespace, filtering on content equivalence, sorted by vector similarity\nconst items = await store.search(\n    namespace,\n    {\n        filter: { \"my-key\": \"my-value\" },\n        query: \"language preferences\"\n    }\n);\n</code></pre> <p>\u6709\u5173\u8bb0\u5fc6\u5b58\u50a8\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6301\u4e45\u5316\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/multi_agent/","title":"\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf","text":"<p>\u667a\u80fd\u4ee3\u7406\u662f_\u4f7f\u7528 LLM \u6765\u51b3\u5b9a\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u6d41\u7684\u7cfb\u7edf_\u3002\u968f\u7740\u4f60\u5f00\u53d1\u8fd9\u4e9b\u7cfb\u7edf\uff0c\u5b83\u4eec\u53ef\u80fd\u4f1a\u968f\u65f6\u95f4\u53d8\u5f97\u66f4\u590d\u6742\uff0c\u4f7f\u5176\u66f4\u96be\u4ee5\u7ba1\u7406\u548c\u6269\u5c55\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u4f1a\u9047\u5230\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>\u667a\u80fd\u4ee3\u7406\u6709\u592a\u591a\u5de5\u5177\u53ef\u4f9b\u4f7f\u7528\uff0c\u5e76\u4e14\u5728\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8c03\u7528\u54ea\u4e2a\u5de5\u5177\u65f6\u505a\u51fa\u4e86\u7cdf\u7cd5\u7684\u51b3\u5b9a</li> <li>\u4e0a\u4e0b\u6587\u53d8\u5f97\u5bf9\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u6765\u8bf4\u592a\u590d\u6742\u800c\u65e0\u6cd5\u8ddf\u8e2a</li> <li>\u7cfb\u7edf\u4e2d\u9700\u8981\u591a\u4e2a\u4e13\u4e1a\u9886\u57df\uff08\u4f8b\u5982\uff0c\u89c4\u5212\u5668\u3001\u7814\u7a76\u5458\u3001\u6570\u5b66\u4e13\u5bb6\u7b49\uff09</li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e9b\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u5c06\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u5206\u89e3\u4e3a\u591a\u4e2a\u8f83\u5c0f\u7684\u72ec\u7acb\u667a\u80fd\u4ee3\u7406\uff0c\u5e76\u5c06\u5b83\u4eec\u7ec4\u5408\u6210\u4e00\u4e2a**\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf**\u3002\u8fd9\u4e9b\u72ec\u7acb\u7684\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u50cf\u63d0\u793a\u548c LLM \u8c03\u7528\u4e00\u6837\u7b80\u5355\uff0c\u4e5f\u53ef\u4ee5\u50cf ReAct \u667a\u80fd\u4ee3\u7406\u4e00\u6837\u590d\u6742\uff08\u751a\u81f3\u66f4\u591a\uff01\uff09\u3002</p> <p>\u4f7f\u7528\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u4e3b\u8981\u597d\u5904\u662f\uff1a</p> <ul> <li>\u6a21\u5757\u5316\uff1a\u5206\u79bb\u7684\u667a\u80fd\u4ee3\u7406\u4f7f\u5f97\u5f00\u53d1\u3001\u6d4b\u8bd5\u548c\u7ef4\u62a4\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u66f4\u52a0\u5bb9\u6613\u3002</li> <li>\u4e13\u4e1a\u5316\uff1a\u4f60\u53ef\u4ee5\u521b\u5efa\u4e13\u6ce8\u4e8e\u7279\u5b9a\u9886\u57df\u7684\u4e13\u5bb6\u667a\u80fd\u4ee3\u7406\uff0c\u8fd9\u6709\u52a9\u4e8e\u63d0\u9ad8\u6574\u4f53\u7cfb\u7edf\u6027\u80fd\u3002</li> <li>\u63a7\u5236\uff1a\u4f60\u53ef\u4ee5\u660e\u786e\u63a7\u5236\u667a\u80fd\u4ee3\u7406\u5982\u4f55\u901a\u4fe1\uff08\u800c\u4e0d\u662f\u4f9d\u8d56\u51fd\u6570\u8c03\u7528\uff09\u3002</li> </ul>"},{"location":"concepts/multi_agent/#_2","title":"\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784","text":"<p>\u5728\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d\u6709\u51e0\u79cd\u8fde\u63a5\u667a\u80fd\u4ee3\u7406\u7684\u65b9\u5f0f\uff1a</p> <ul> <li>\u7f51\u7edc\uff1a\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4e0e\u5176\u4ed6\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u901a\u4fe1\u3002\u4efb\u4f55\u667a\u80fd\u4ee3\u7406\u90fd\u53ef\u4ee5\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8c03\u7528\u54ea\u4e2a\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u76d1\u7763\u8005\uff1a\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u4e0e\u5355\u4e2a\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u901a\u4fe1\u3002\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u5e94\u8be5\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u76d1\u7763\u8005\uff08\u5de5\u5177\u8c03\u7528\uff09\uff1a\u8fd9\u662f\u76d1\u7763\u8005\u67b6\u6784\u7684\u7279\u6b8a\u60c5\u51b5\u3002\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u8868\u793a\u4e3a\u5de5\u5177\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u5de5\u5177\u8c03\u7528 LLM \u6765\u51b3\u5b9a\u8c03\u7528\u54ea\u4e9b\u667a\u80fd\u4ee3\u7406\u5de5\u5177\uff0c\u4ee5\u53ca\u4f20\u9012\u7ed9\u8fd9\u4e9b\u667a\u80fd\u4ee3\u7406\u7684\u53c2\u6570\u3002</li> <li>\u5c42\u7ea7\uff1a\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u5177\u6709\u76d1\u7763\u8005\u7684\u76d1\u7763\u8005\u7684\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002\u8fd9\u662f\u76d1\u7763\u8005\u67b6\u6784\u7684\u6cdb\u5316\uff0c\u5141\u8bb8\u66f4\u590d\u6742\u7684\u63a7\u5236\u6d41\u3002</li> <li>\u81ea\u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41\uff1a\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u53ea\u4e0e\u667a\u80fd\u4ee3\u7406\u7684\u5b50\u96c6\u901a\u4fe1\u3002\u6d41\u7a0b\u7684\u67d0\u4e9b\u90e8\u5206\u662f\u786e\u5b9a\u6027\u7684\uff0c\u53ea\u6709\u67d0\u4e9b\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8c03\u7528\u54ea\u4e9b\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u3002</li> </ul>"},{"location":"concepts/multi_agent/#_3","title":"\u5207\u6362","text":"<p>\u5728\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u8868\u793a\u4e3a\u56fe\u8282\u70b9\u3002\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u6267\u884c\u5176\u6b65\u9aa4\u5e76\u51b3\u5b9a\u662f\u5b8c\u6210\u6267\u884c\u8fd8\u662f\u8def\u7531\u5230\u53e6\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\uff0c\u5305\u62ec\u53ef\u80fd\u8def\u7531\u5230\u81ea\u8eab\uff08\u4f8b\u5982\uff0c\u5728\u5faa\u73af\u4e2d\u8fd0\u884c\uff09\u3002\u591a\u667a\u80fd\u4ee3\u7406\u4ea4\u4e92\u4e2d\u7684\u4e00\u4e2a\u5e38\u89c1\u6a21\u5f0f\u662f**\u5207\u6362**\uff0c\u5176\u4e2d\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u63a7\u5236\u6743_\u5207\u6362_\u7ed9\u53e6\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u3002\u5207\u6362\u5141\u8bb8\u4f60\u6307\u5b9a\uff1a</p> <ul> <li>\u76ee\u7684\u5730\uff1a\u8981\u5bfc\u822a\u5230\u7684\u76ee\u6807\u667a\u80fd\u4ee3\u7406\uff08\u4f8b\u5982\uff0c\u8981\u53bb\u7684\u8282\u70b9\u7684\u540d\u79f0\uff09</li> <li>\u6709\u6548\u8f7d\u8377\uff1a\u4f20\u9012\u7ed9\u8be5\u667a\u80fd\u4ee3\u7406\u7684\u4fe1\u606f\uff08\u4f8b\u5982\uff0c\u72b6\u6001\u66f4\u65b0\uff09</li> </ul> <p>\u8981\u5728 LangGraph \u4e2d\u5b9e\u73b0\u5207\u6362\uff0c\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u53ef\u4ee5\u8fd4\u56de <code>Command</code> \u5bf9\u8c61\uff0c\u5141\u8bb8\u4f60\u7ec4\u5408\u63a7\u5236\u6d41\u548c\u72b6\u6001\u66f4\u65b0\uff1a</p> Python <pre><code>def agent(state) -&gt; Command[Literal[\"agent\", \"another_agent\"]]:\n    # the condition for routing/halting can be anything, e.g. LLM tool call / structured output, etc.\n    goto = get_next_agent(...)  # 'agent' / 'another_agent'\n    return Command(\n        # Specify which agent to call next\n        goto=goto,\n        # Update the graph state\n        update={\"my_state_key\": \"my_state_value\"}\n    )\n</code></pre> JavaScript <pre><code>graph.addNode((state) =&gt; {\n    // the condition for routing/halting can be anything, e.g. LLM tool call / structured output, etc.\n    const goto = getNextAgent(...); // 'agent' / 'another_agent'\n    return new Command({\n      // Specify which agent to call next\n      goto,\n      // Update the graph state\n      update: { myStateKey: \"myStateValue\" }\n    });\n})\n</code></pre> Python <p>\u5728\u66f4\u590d\u6742\u7684\u573a\u666f\u4e2d\uff0c\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u672c\u8eab\u662f\u4e00\u4e2a\u56fe\uff08\u5373\u5b50\u56fe\uff09\uff0c\u5176\u4e2d\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5b50\u56fe\u4e2d\u7684\u8282\u70b9\u53ef\u80fd\u60f3\u8981\u5bfc\u822a\u5230\u4e0d\u540c\u7684\u667a\u80fd\u4ee3\u7406\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u6709\u4e24\u4e2a\u667a\u80fd\u4ee3\u7406 <code>alice</code> \u548c <code>bob</code>\uff08\u7236\u56fe\u4e2d\u7684\u5b50\u56fe\u8282\u70b9\uff09\uff0c\u5e76\u4e14 <code>alice</code> \u9700\u8981\u5bfc\u822a\u5230 <code>bob</code>\uff0c\u4f60\u53ef\u4ee5\u5728 <code>Command</code> \u5bf9\u8c61\u4e2d\u8bbe\u7f6e <code>graph=Command.PARENT</code>\uff1a</p> <pre><code>def some_node_inside_alice(state):\n    return Command(\n        goto=\"bob\",\n        update={\"my_state_key\": \"my_state_value\"},\n        # specify which graph to navigate to (defaults to the current graph)\n        graph=Command.PARENT,\n    )\n</code></pre> JavaScript <p>\u5728\u66f4\u590d\u6742\u7684\u573a\u666f\u4e2d\uff0c\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u672c\u8eab\u662f\u4e00\u4e2a\u56fe\uff08\u5373\u5b50\u56fe\uff09\uff0c\u5176\u4e2d\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5b50\u56fe\u4e2d\u7684\u8282\u70b9\u53ef\u80fd\u60f3\u8981\u5bfc\u822a\u5230\u4e0d\u540c\u7684\u667a\u80fd\u4ee3\u7406\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u6709\u4e24\u4e2a\u667a\u80fd\u4ee3\u7406 <code>alice</code> \u548c <code>bob</code>\uff08\u7236\u56fe\u4e2d\u7684\u5b50\u56fe\u8282\u70b9\uff09\uff0c\u5e76\u4e14 <code>alice</code> \u9700\u8981\u5bfc\u822a\u5230 <code>bob</code>\uff0c\u4f60\u53ef\u4ee5\u5728 <code>Command</code> \u5bf9\u8c61\u4e2d\u8bbe\u7f6e <code>graph: Command.PARENT</code>\uff1a</p> <pre><code>alice.addNode((state) =&gt; {\n  return new Command({\n    goto: \"bob\",\n    update: { myStateKey: \"myStateValue\" },\n    // specify which graph to navigate to (defaults to the current graph)\n    graph: Command.PARENT,\n  });\n});\n</code></pre> <p>Note</p> Python <p>\u5982\u679c\u4f60\u9700\u8981\u652f\u6301\u4f7f\u7528 <code>Command(graph=Command.PARENT)</code> \u901a\u4fe1\u7684\u5b50\u56fe\u7684\u53ef\u89c6\u5316\uff0c\u4f60\u9700\u8981\u7528\u5e26\u6709 <code>Command</code> \u6ce8\u89e3\u7684\u8282\u70b9\u51fd\u6570\u5305\u88c5\u5b83\u4eec\uff1a \u800c\u4e0d\u662f\u8fd9\u6837\uff1a</p> <pre><code>builder.add_node(alice)\n</code></pre> <p>\u4f60\u9700\u8981\u8fd9\u6837\u505a\uff1a</p> <pre><code>def call_alice(state) -&gt; Command[Literal[\"bob\"]]:\n    return alice.invoke(state)\n\nbuilder.add_node(\"alice\", call_alice)\n</code></pre> JavaScript <p>\u5982\u679c\u4f60\u9700\u8981\u652f\u6301\u4f7f\u7528 <code>Command({ graph: Command.PARENT })</code> \u901a\u4fe1\u7684\u5b50\u56fe\u7684\u53ef\u89c6\u5316\uff0c\u4f60\u9700\u8981\u7528\u5e26\u6709 <code>Command</code> \u6ce8\u89e3\u7684\u8282\u70b9\u51fd\u6570\u5305\u88c5\u5b83\u4eec\uff1a</p> <p>\u800c\u4e0d\u662f\u8fd9\u6837\uff1a</p> <pre><code>builder.addNode(\"alice\", alice);\n</code></pre> <p>\u4f60\u9700\u8981\u8fd9\u6837\u505a\uff1a</p> <pre><code>builder.addNode(\"alice\", (state) =&gt; alice.invoke(state), { ends: [\"bob\"] });\n</code></pre>"},{"location":"concepts/multi_agent/#_4","title":"\u5207\u6362\u4f5c\u4e3a\u5de5\u5177","text":"<p>\u6700\u5e38\u89c1\u7684\u667a\u80fd\u4ee3\u7406\u7c7b\u578b\u4e4b\u4e00\u662f\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u3002\u5bf9\u4e8e\u8fd9\u4e9b\u7c7b\u578b\u7684\u667a\u80fd\u4ee3\u7406\uff0c\u4e00\u4e2a\u5e38\u89c1\u7684\u6a21\u5f0f\u662f\u5c06\u5207\u6362\u5305\u88c5\u5728\u5de5\u5177\u8c03\u7528\u4e2d\uff1a</p> Python <pre><code>from langchain_core.tools import tool\n\n@tool\ndef transfer_to_bob():\n    \"\"\"Transfer to bob.\"\"\"\n    return Command(\n        # name of the agent (node) to go to\n        goto=\"bob\",\n        # data to send to the agent\n        update={\"my_state_key\": \"my_state_value\"},\n        # indicate to LangGraph that we need to navigate to\n        # agent node in a parent graph\n        graph=Command.PARENT,\n    )\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { Command } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst transferToBob = tool(\n  async () =&gt; {\n    return new Command({\n      // name of the agent (node) to go to\n      goto: \"bob\",\n      // data to send to the agent\n      update: { myStateKey: \"myStateValue\" },\n      // indicate to LangGraph that we need to navigate to\n      // agent node in a parent graph\n      graph: Command.PARENT,\n    });\n  },\n  {\n    name: \"transfer_to_bob\",\n    description: \"Transfer to bob.\",\n    schema: z.object({}),\n  }\n);\n</code></pre> <p>\u8fd9\u662f\u4ece\u5de5\u5177\u66f4\u65b0\u56fe\u72b6\u6001\u7684\u7279\u6b8a\u60c5\u51b5\uff0c\u9664\u4e86\u72b6\u6001\u66f4\u65b0\u4e4b\u5916\uff0c\u8fd8\u5305\u62ec\u63a7\u5236\u6d41\u3002</p> <p>Important</p> <p>=== \"Python\"   \u5982\u679c\u4f60\u60f3\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u7684\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>create_react_agent</code>][] / @[<code>ToolNode</code>][] \u7ec4\u4ef6\uff0c\u6216\u8005\u5b9e\u73b0\u4f60\u81ea\u5df1\u7684\u903b\u8f91\uff1a</p> <pre><code>def call_tools(state):\n    ...\n    commands = [tools_by_name[tool_call[\"name\"]].invoke(tool_call) for tool_call in tool_calls]\n    return commands\n</code></pre> <p>=== \"JavaScript\"   \u5982\u679c\u4f60\u60f3\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u7684\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>createReactAgent</code>][create_react_agent] / @[ToolNode] \u7ec4\u4ef6\uff0c\u6216\u8005\u5b9e\u73b0\u4f60\u81ea\u5df1\u7684\u903b\u8f91\uff1a</p> <pre><code>graph.addNode(\"call_tools\", async (state) =&gt; {\n  // ... tool execution logic\n  const commands = toolCalls.map((toolCall) =&gt;\n    toolsByName[toolCall.name].invoke(toolCall)\n  );\n  return commands;\n});\n</code></pre> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u66f4\u8be6\u7ec6\u5730\u770b\u770b\u4e0d\u540c\u7684\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u3002</p>"},{"location":"concepts/multi_agent/#_5","title":"\u7f51\u7edc","text":"<p>\u5728\u8fd9\u79cd\u67b6\u6784\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u88ab\u5b9a\u4e49\u4e3a\u56fe\u8282\u70b9\u3002\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4e0e\u5176\u4ed6\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u901a\u4fe1\uff08\u591a\u5bf9\u591a\u8fde\u63a5\uff09\uff0c\u5e76\u53ef\u4ee5\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u79cd\u67b6\u6784\u9002\u5408\u6ca1\u6709\u660e\u786e\u667a\u80fd\u4ee3\u7406\u5c42\u6b21\u7ed3\u6784\u6216\u667a\u80fd\u4ee3\u7406\u8c03\u7528\u7279\u5b9a\u987a\u5e8f\u7684\u95ee\u9898\u3002</p> Python <pre><code>from typing import Literal\nfrom langchain_openai import ChatOpenAI\nfrom langgraph.types import Command\nfrom langgraph.graph import StateGraph, MessagesState, START, END\n\nmodel = ChatOpenAI()\n\ndef agent_1(state: MessagesState) -&gt; Command[Literal[\"agent_2\", \"agent_3\", END]]:\n    # you can pass relevant parts of the state to the LLM (e.g., state[\"messages\"])\n    # to determine which agent to call next. a common pattern is to call the model\n    # with a structured output (e.g. force it to return an output with a \"next_agent\" field)\n    response = model.invoke(...)\n    # route to one of the agents or exit based on the LLM's decision\n    # if the LLM returns \"__end__\", the graph will finish execution\n    return Command(\n        goto=response[\"next_agent\"],\n        update={\"messages\": [response[\"content\"]]},\n    )\n\ndef agent_2(state: MessagesState) -&gt; Command[Literal[\"agent_1\", \"agent_3\", END]]:\n    response = model.invoke(...)\n    return Command(\n        goto=response[\"next_agent\"],\n        update={\"messages\": [response[\"content\"]]},\n    )\n\ndef agent_3(state: MessagesState) -&gt; Command[Literal[\"agent_1\", \"agent_2\", END]]:\n    ...\n    return Command(\n        goto=response[\"next_agent\"],\n        update={\"messages\": [response[\"content\"]]},\n    )\n\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(agent_1)\nbuilder.add_node(agent_2)\nbuilder.add_node(agent_3)\n\nbuilder.add_edge(START, \"agent_1\")\nnetwork = builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START, END } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { Command } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI();\n\nconst agent1 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n  // to determine which agent to call next. a common pattern is to call the model\n  // with a structured output (e.g. force it to return an output with a \"next_agent\" field)\n  const response = await model.invoke(...);\n  // route to one of the agents or exit based on the LLM's decision\n  // if the LLM returns \"__end__\", the graph will finish execution\n  return new Command({\n    goto: response.nextAgent,\n    update: { messages: [response.content] },\n  });\n};\n\nconst agent2 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return new Command({\n    goto: response.nextAgent,\n    update: { messages: [response.content] },\n  });\n};\n\nconst agent3 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // ...\n  return new Command({\n    goto: response.nextAgent,\n    update: { messages: [response.content] },\n  });\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"agent1\", agent1, {\n    ends: [\"agent2\", \"agent3\", END]\n  })\n  .addNode(\"agent2\", agent2, {\n    ends: [\"agent1\", \"agent3\", END]\n  })\n  .addNode(\"agent3\", agent3, {\n    ends: [\"agent1\", \"agent2\", END]\n  })\n  .addEdge(START, \"agent1\");\n\nconst network = builder.compile();\n</code></pre>"},{"location":"concepts/multi_agent/#_6","title":"\u76d1\u7763\u8005","text":"<p>\u5728\u8fd9\u79cd\u67b6\u6784\u4e2d\uff0c\u6211\u4eec\u5c06\u667a\u80fd\u4ee3\u7406\u5b9a\u4e49\u4e3a\u8282\u70b9\uff0c\u5e76\u6dfb\u52a0\u4e00\u4e2a\u76d1\u7763\u8005\u8282\u70b9\uff08LLM\uff09\u6765\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u5e94\u8be5\u8c03\u7528\u54ea\u4e9b\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002\u6211\u4eec\u4f7f\u7528 <code>Command</code> \u6839\u636e\u76d1\u7763\u8005\u7684\u51b3\u5b9a\u5c06\u6267\u884c\u8def\u7531\u5230\u9002\u5f53\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002\u8fd9\u79cd\u67b6\u6784\u4e5f\u5f88\u9002\u5408\u5e76\u884c\u8fd0\u884c\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u6216\u4f7f\u7528 map-reduce \u6a21\u5f0f\u3002</p> Python <pre><code>from typing import Literal\nfrom langchain_openai import ChatOpenAI\nfrom langgraph.types import Command\nfrom langgraph.graph import StateGraph, MessagesState, START, END\n\nmodel = ChatOpenAI()\n\ndef supervisor(state: MessagesState) -&gt; Command[Literal[\"agent_1\", \"agent_2\", END]]:\n    # you can pass relevant parts of the state to the LLM (e.g., state[\"messages\"])\n    # to determine which agent to call next. a common pattern is to call the model\n    # with a structured output (e.g. force it to return an output with a \"next_agent\" field)\n    response = model.invoke(...)\n    # route to one of the agents or exit based on the supervisor's decision\n    # if the supervisor returns \"__end__\", the graph will finish execution\n    return Command(goto=response[\"next_agent\"])\n\ndef agent_1(state: MessagesState) -&gt; Command[Literal[\"supervisor\"]]:\n    # you can pass relevant parts of the state to the LLM (e.g., state[\"messages\"])\n    # and add any additional logic (different models, custom prompts, structured output, etc.)\n    response = model.invoke(...)\n    return Command(\n        goto=\"supervisor\",\n        update={\"messages\": [response]},\n    )\n\ndef agent_2(state: MessagesState) -&gt; Command[Literal[\"supervisor\"]]:\n    response = model.invoke(...)\n    return Command(\n        goto=\"supervisor\",\n        update={\"messages\": [response]},\n    )\n\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(supervisor)\nbuilder.add_node(agent_1)\nbuilder.add_node(agent_2)\n\nbuilder.add_edge(START, \"supervisor\")\n\nsupervisor = builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, Command, START, END } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI();\n\nconst supervisor = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n  // to determine which agent to call next. a common pattern is to call the model\n  // with a structured output (e.g. force it to return an output with a \"next_agent\" field)\n  const response = await model.invoke(...);\n  // route to one of the agents or exit based on the supervisor's decision\n  // if the supervisor returns \"__end__\", the graph will finish execution\n  return new Command({ goto: response.nextAgent });\n};\n\nconst agent1 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n  // and add any additional logic (different models, custom prompts, structured output, etc.)\n  const response = await model.invoke(...);\n  return new Command({\n    goto: \"supervisor\",\n    update: { messages: [response] },\n  });\n};\n\nconst agent2 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return new Command({\n    goto: \"supervisor\",\n    update: { messages: [response] },\n  });\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"supervisor\", supervisor, {\n    ends: [\"agent1\", \"agent2\", END]\n  })\n  .addNode(\"agent1\", agent1, {\n    ends: [\"supervisor\"]\n  })\n  .addNode(\"agent2\", agent2, {\n    ends: [\"supervisor\"]\n  })\n  .addEdge(START, \"supervisor\");\n\nconst supervisorGraph = builder.compile();\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, Command, START, END } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI();\n\nconst supervisor = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n  // to determine which agent to call next. a common pattern is to call the model\n  // with a structured output (e.g. force it to return an output with a \"next_agent\" field)\n  const response = await model.invoke(...);\n  // route to one of the agents or exit based on the supervisor's decision\n  // if the supervisor returns \"__end__\", the graph will finish execution\n  return new Command({ goto: response.nextAgent });\n};\n\nconst agent1 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n  // and add any additional logic (different models, custom prompts, structured output, etc.)\n  const response = await model.invoke(...);\n  return new Command({\n    goto: \"supervisor\",\n    update: { messages: [response] },\n  });\n};\n\nconst agent2 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return new Command({\n    goto: \"supervisor\",\n    update: { messages: [response] },\n  });\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"supervisor\", supervisor, {\n    ends: [\"agent1\", \"agent2\", END]\n  })\n  .addNode(\"agent1\", agent1, {\n    ends: [\"supervisor\"]\n  })\n  .addNode(\"agent2\", agent2, {\n    ends: [\"supervisor\"]\n  })\n  .addEdge(START, \"supervisor\");\n\nconst supervisorGraph = builder.compile();\n</code></pre> <p>\u67e5\u770b\u6b64\u6559\u7a0b\u4e86\u89e3\u76d1\u7763\u8005\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u7684\u793a\u4f8b\u3002</p>"},{"location":"concepts/multi_agent/#_7","title":"\u76d1\u7763\u8005\uff08\u5de5\u5177\u8c03\u7528\uff09","text":"<p>\u5728\u76d1\u7763\u8005\u67b6\u6784\u7684\u8fd9\u79cd\u53d8\u4f53\u4e2d\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\uff0c\u8d1f\u8d23\u8c03\u7528\u5b50\u667a\u80fd\u4ee3\u7406\u3002\u5b50\u667a\u80fd\u4ee3\u7406\u4f5c\u4e3a\u5de5\u5177\u66b4\u9732\u7ed9\u76d1\u7763\u8005\uff0c\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u51b3\u5b9a\u4e0b\u4e00\u4e2a\u8c03\u7528\u54ea\u4e2a\u5de5\u5177\u3002\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u9075\u5faa\u6807\u51c6\u5b9e\u73b0\uff0c\u5373\u5728\u5faa\u73af\u4e2d\u8fd0\u884c\u7684 LLM \u8c03\u7528\u5de5\u5177\u76f4\u5230\u5b83\u51b3\u5b9a\u505c\u6b62\u3002</p> Python <pre><code>from typing import Annotated\nfrom langchain_openai import ChatOpenAI\nfrom langgraph.prebuilt import InjectedState, create_react_agent\n\nmodel = ChatOpenAI()\n\n# this is the agent function that will be called as tool\n# notice that you can pass the state to the tool via InjectedState annotation\ndef agent_1(state: Annotated[dict, InjectedState]):\n    # you can pass relevant parts of the state to the LLM (e.g., state[\"messages\"])\n    # and add any additional logic (different models, custom prompts, structured output, etc.)\n    response = model.invoke(...)\n    # return the LLM response as a string (expected tool response format)\n    # this will be automatically turned to ToolMessage\n    # by the prebuilt create_react_agent (supervisor)\n    return response.content\n\ndef agent_2(state: Annotated[dict, InjectedState]):\n    response = model.invoke(...)\n    return response.content\n\ntools = [agent_1, agent_2]\n# the simplest way to build a supervisor w/ tool-calling is to use prebuilt ReAct agent graph\n# that consists of a tool-calling LLM node (i.e. supervisor) and a tool-executing node\nsupervisor = create_react_agent(model, tools)\n</code></pre> JavaScript <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI();\n\n// this is the agent function that will be called as tool\n// notice that you can pass the state to the tool via config parameter\nconst agent1 = tool(\n  async (_, config) =&gt; {\n    const state = config.configurable?.state;\n    // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n    // and add any additional logic (different models, custom prompts, structured output, etc.)\n    const response = await model.invoke(...);\n    // return the LLM response as a string (expected tool response format)\n    // this will be automatically turned to ToolMessage\n    // by the prebuilt createReactAgent (supervisor)\n    return response.content;\n  },\n  {\n    name: \"agent1\",\n    description: \"Agent 1 description\",\n    schema: z.object({}),\n  }\n);\n\nconst agent2 = tool(\n  async (_, config) =&gt; {\n    const state = config.configurable?.state;\n    const response = await model.invoke(...);\n    return response.content;\n  },\n  {\n    name: \"agent2\",\n    description: \"Agent 2 description\",\n    schema: z.object({}),\n  }\n);\n\nconst tools = [agent1, agent2];\n// the simplest way to build a supervisor w/ tool-calling is to use prebuilt ReAct agent graph\n// that consists of a tool-calling LLM node (i.e. supervisor) and a tool-executing node\nconst supervisor = createReactAgent({ llm: model, tools });\n</code></pre>"},{"location":"concepts/multi_agent/#_8","title":"\u5c42\u7ea7","text":"<p>\u968f\u7740\u4f60\u5411\u7cfb\u7edf\u6dfb\u52a0\u66f4\u591a\u667a\u80fd\u4ee3\u7406\uff0c\u76d1\u7763\u8005\u53ef\u80fd\u53d8\u5f97\u96be\u4ee5\u7ba1\u7406\u6240\u6709\u667a\u80fd\u4ee3\u7406\u3002\u76d1\u7763\u8005\u53ef\u80fd\u5f00\u59cb\u5bf9\u4e0b\u4e00\u4e2a\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u505a\u51fa\u7cdf\u7cd5\u7684\u51b3\u5b9a\uff0c\u6216\u8005\u4e0a\u4e0b\u6587\u53ef\u80fd\u53d8\u5f97\u5bf9\u5355\u4e2a\u76d1\u7763\u8005\u6765\u8bf4\u592a\u590d\u6742\u800c\u65e0\u6cd5\u8ddf\u8e2a\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4f60\u6700\u7ec8\u4f1a\u9047\u5230\u6700\u521d\u4fc3\u4f7f\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u51fa\u73b0\u7684\u540c\u6837\u95ee\u9898\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5_\u5c42\u7ea7\u5316_\u8bbe\u8ba1\u4f60\u7684\u7cfb\u7edf\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u7531\u5404\u81ea\u76d1\u7763\u8005\u7ba1\u7406\u7684\u72ec\u7acb\u4e13\u4e1a\u667a\u80fd\u4ee3\u7406\u56e2\u961f\uff0c\u4ee5\u53ca\u4e00\u4e2a\u9876\u5c42\u76d1\u7763\u8005\u6765\u7ba1\u7406\u8fd9\u4e9b\u56e2\u961f\u3002</p> Python <pre><code>from typing import Literal\nfrom langchain_openai import ChatOpenAI\nfrom langgraph.graph import StateGraph, MessagesState, START, END\nfrom langgraph.types import Command\nmodel = ChatOpenAI()\n\n# define team 1 (same as the single supervisor example above)\n\ndef team_1_supervisor(state: MessagesState) -&gt; Command[Literal[\"team_1_agent_1\", \"team_1_agent_2\", END]]:\n    response = model.invoke(...)\n    return Command(goto=response[\"next_agent\"])\n\ndef team_1_agent_1(state: MessagesState) -&gt; Command[Literal[\"team_1_supervisor\"]]:\n    response = model.invoke(...)\n    return Command(goto=\"team_1_supervisor\", update={\"messages\": [response]})\n\ndef team_1_agent_2(state: MessagesState) -&gt; Command[Literal[\"team_1_supervisor\"]]:\n    response = model.invoke(...)\n    return Command(goto=\"team_1_supervisor\", update={\"messages\": [response]})\n\nteam_1_builder = StateGraph(Team1State)\nteam_1_builder.add_node(team_1_supervisor)\nteam_1_builder.add_node(team_1_agent_1)\nteam_1_builder.add_node(team_1_agent_2)\nteam_1_builder.add_edge(START, \"team_1_supervisor\")\nteam_1_graph = team_1_builder.compile()\n\n# define team 2 (same as the single supervisor example above)\nclass Team2State(MessagesState):\n    next: Literal[\"team_2_agent_1\", \"team_2_agent_2\", \"__end__\"]\n\ndef team_2_supervisor(state: Team2State):\n    ...\n\ndef team_2_agent_1(state: Team2State):\n    ...\n\ndef team_2_agent_2(state: Team2State):\n    ...\n\nteam_2_builder = StateGraph(Team2State)\n...\nteam_2_graph = team_2_builder.compile()\n\n\n# define top-level supervisor\n\nbuilder = StateGraph(MessagesState)\ndef top_level_supervisor(state: MessagesState) -&gt; Command[Literal[\"team_1_graph\", \"team_2_graph\", END]]:\n    # you can pass relevant parts of the state to the LLM (e.g., state[\"messages\"])\n    # to determine which team to call next. a common pattern is to call the model\n    # with a structured output (e.g. force it to return an output with a \"next_team\" field)\n    response = model.invoke(...)\n    # route to one of the teams or exit based on the supervisor's decision\n    # if the supervisor returns \"__end__\", the graph will finish execution\n    return Command(goto=response[\"next_team\"])\n\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(top_level_supervisor)\nbuilder.add_node(\"team_1_graph\", team_1_graph)\nbuilder.add_node(\"team_2_graph\", team_2_graph)\nbuilder.add_edge(START, \"top_level_supervisor\")\nbuilder.add_edge(\"team_1_graph\", \"top_level_supervisor\")\nbuilder.add_edge(\"team_2_graph\", \"top_level_supervisor\")\ngraph = builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, Command, START, END } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI();\n\n// define team 1 (same as the single supervisor example above)\n\nconst team1Supervisor = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return new Command({ goto: response.nextAgent });\n};\n\nconst team1Agent1 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return new Command({\n    goto: \"team1Supervisor\",\n    update: { messages: [response] }\n  });\n};\n\nconst team1Agent2 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return new Command({\n    goto: \"team1Supervisor\",\n    update: { messages: [response] }\n  });\n};\n\nconst team1Builder = new StateGraph(MessagesZodState)\n  .addNode(\"team1Supervisor\", team1Supervisor, {\n    ends: [\"team1Agent1\", \"team1Agent2\", END]\n  })\n  .addNode(\"team1Agent1\", team1Agent1, {\n    ends: [\"team1Supervisor\"]\n  })\n  .addNode(\"team1Agent2\", team1Agent2, {\n    ends: [\"team1Supervisor\"]\n  })\n  .addEdge(START, \"team1Supervisor\");\nconst team1Graph = team1Builder.compile();\n\n// define team 2 (same as the single supervisor example above)\nconst team2Supervisor = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // ...\n};\n\nconst team2Agent1 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // ...\n};\n\nconst team2Agent2 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // ...\n};\n\nconst team2Builder = new StateGraph(MessagesZodState);\n// ... build team2Graph\nconst team2Graph = team2Builder.compile();\n\n// define top-level supervisor\n\nconst topLevelSupervisor = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // you can pass relevant parts of the state to the LLM (e.g., state.messages)\n  // to determine which team to call next. a common pattern is to call the model\n  // with a structured output (e.g. force it to return an output with a \"next_team\" field)\n  const response = await model.invoke(...);\n  // route to one of the teams or exit based on the supervisor's decision\n  // if the supervisor returns \"__end__\", the graph will finish execution\n  return new Command({ goto: response.nextTeam });\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"topLevelSupervisor\", topLevelSupervisor, {\n    ends: [\"team1Graph\", \"team2Graph\", END]\n  })\n  .addNode(\"team1Graph\", team1Graph)\n  .addNode(\"team2Graph\", team2Graph)\n  .addEdge(START, \"topLevelSupervisor\")\n  .addEdge(\"team1Graph\", \"topLevelSupervisor\")\n  .addEdge(\"team2Graph\", \"topLevelSupervisor\");\n\nconst graph = builder.compile();\n</code></pre>"},{"location":"concepts/multi_agent/#_9","title":"\u81ea\u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41","text":"<p>\u5728\u8fd9\u79cd\u67b6\u6784\u4e2d\uff0c\u6211\u4eec\u5c06\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u6dfb\u52a0\u4e3a\u56fe\u8282\u70b9\uff0c\u5e76\u63d0\u524d\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u8c03\u7528\u7684\u987a\u5e8f\uff0c\u5f62\u6210\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\u3002\u5728 LangGraph \u4e2d\uff0c\u5de5\u4f5c\u6d41\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u5b9a\u4e49\uff1a</p> <ul> <li> <p>\u663e\u5f0f\u63a7\u5236\u6d41\uff08\u666e\u901a\u8fb9\uff09\uff1aLangGraph \u5141\u8bb8\u4f60\u901a\u8fc7\u666e\u901a\u56fe\u8fb9\u663e\u5f0f\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u7684\u63a7\u5236\u6d41\uff08\u5373\u667a\u80fd\u4ee3\u7406\u901a\u4fe1\u7684\u987a\u5e8f\uff09\u3002\u8fd9\u662f\u4e0a\u8ff0\u67b6\u6784\u4e2d\u6700\u786e\u5b9a\u6027\u7684\u53d8\u4f53\u2014\u2014\u6211\u4eec\u603b\u662f\u63d0\u524d\u77e5\u9053\u4e0b\u4e00\u4e2a\u5c06\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u3002</p> </li> <li> <p>\u52a8\u6001\u63a7\u5236\u6d41\uff08Command\uff09\uff1a\u5728 LangGraph \u4e2d\uff0c\u4f60\u53ef\u4ee5\u5141\u8bb8 LLM \u51b3\u5b9a\u5e94\u7528\u7a0b\u5e8f\u63a7\u5236\u6d41\u7684\u90e8\u5206\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 <code>Command</code> \u6765\u5b9e\u73b0\u3002\u8fd9\u79cd\u60c5\u51b5\u7684\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\u662f\u76d1\u7763\u8005\u5de5\u5177\u8c03\u7528\u67b6\u6784\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u9a71\u52a8\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u7684\u5de5\u5177\u8c03\u7528 LLM \u5c06\u51b3\u5b9a\u8c03\u7528\u5de5\u5177\uff08\u667a\u80fd\u4ee3\u7406\uff09\u7684\u987a\u5e8f\u3002</p> </li> </ul> Python <pre><code>from langchain_openai import ChatOpenAI\nfrom langgraph.graph import StateGraph, MessagesState, START\n\nmodel = ChatOpenAI()\n\ndef agent_1(state: MessagesState):\n    response = model.invoke(...)\n    return {\"messages\": [response]}\n\ndef agent_2(state: MessagesState):\n    response = model.invoke(...)\n    return {\"messages\": [response]}\n\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(agent_1)\nbuilder.add_node(agent_2)\n# define the flow explicitly\nbuilder.add_edge(START, \"agent_1\")\nbuilder.add_edge(\"agent_1\", \"agent_2\")\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI();\n\nconst agent1 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return { messages: [response] };\n};\n\nconst agent2 = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(...);\n  return { messages: [response] };\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"agent1\", agent1)\n  .addNode(\"agent2\", agent2)\n  // define the flow explicitly\n  .addEdge(START, \"agent1\")\n  .addEdge(\"agent1\", \"agent2\");\n</code></pre>"},{"location":"concepts/multi_agent/#_10","title":"\u901a\u4fe1\u548c\u72b6\u6001\u7ba1\u7406","text":"<p>\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u65f6\u6700\u91cd\u8981\u7684\u4e8b\u60c5\u662f\u5f04\u6e05\u695a\u667a\u80fd\u4ee3\u7406\u5982\u4f55\u901a\u4fe1\u3002</p> <p>\u667a\u80fd\u4ee3\u7406\u901a\u4fe1\u7684\u4e00\u79cd\u5e38\u89c1\u901a\u7528\u65b9\u5f0f\u662f\u901a\u8fc7\u6d88\u606f\u5217\u8868\u3002\u8fd9\u5f15\u51fa\u4e86\u4ee5\u4e0b\u95ee\u9898\uff1a</p> <ul> <li>\u667a\u80fd\u4ee3\u7406\u662f\u901a\u8fc7\u5207\u6362\u8fd8\u662f\u901a\u8fc7\u5de5\u5177\u8c03\u7528\u901a\u4fe1\uff1f</li> <li>\u4ece\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u4f20\u9012\u5230\u4e0b\u4e00\u4e2a\u7684\u662f\u4ec0\u4e48\u6d88\u606f\uff1f</li> <li>\u5207\u6362\u5982\u4f55\u5728\u6d88\u606f\u5386\u53f2\u4e2d\u8868\u793a\uff1f</li> <li>\u4f60\u5982\u4f55\u4e3a\u5b50\u667a\u80fd\u4ee3\u7406\u7ba1\u7406\u72b6\u6001\uff1f</li> </ul> <p>\u6b64\u5916\uff0c\u5982\u679c\u4f60\u5904\u7406\u66f4\u590d\u6742\u7684\u667a\u80fd\u4ee3\u7406\u6216\u5e0c\u671b\u5c06\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u4e0e\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u72b6\u6001\u5206\u5f00\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4f7f\u7528\u4e0d\u540c\u7684\u72b6\u6001\u6a21\u5f0f\u3002</p>"},{"location":"concepts/multi_agent/#_11","title":"\u5207\u6362\u4e0e\u5de5\u5177\u8c03\u7528","text":"<p>\u667a\u80fd\u4ee3\u7406\u4e4b\u95f4\u4f20\u9012\u7684\"\u6709\u6548\u8f7d\u8377\"\u662f\u4ec0\u4e48\uff1f\u5728\u4e0a\u9762\u8ba8\u8bba\u7684\u5927\u591a\u6570\u67b6\u6784\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u901a\u8fc7\u5207\u6362\u901a\u4fe1\uff0c\u5e76\u5c06\u56fe\u72b6\u6001\u4f5c\u4e3a\u5207\u6362\u6709\u6548\u8f7d\u8377\u7684\u4e00\u90e8\u5206\u4f20\u9012\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u667a\u80fd\u4ee3\u7406\u5c06\u6d88\u606f\u5217\u8868\u4f5c\u4e3a\u56fe\u72b6\u6001\u7684\u4e00\u90e8\u5206\u4f20\u9012\u3002\u5728\u5de5\u5177\u8c03\u7528\u76d1\u7763\u8005\u7684\u60c5\u51b5\u4e0b\uff0c\u6709\u6548\u8f7d\u8377\u662f\u5de5\u5177\u8c03\u7528\u53c2\u6570\u3002</p> <p></p>"},{"location":"concepts/multi_agent/#_12","title":"\u667a\u80fd\u4ee3\u7406\u4e4b\u95f4\u7684\u6d88\u606f\u4f20\u9012","text":"<p>\u667a\u80fd\u4ee3\u7406\u901a\u4fe1\u6700\u5e38\u89c1\u7684\u65b9\u5f0f\u662f\u901a\u8fc7\u5171\u4eab\u72b6\u6001\u901a\u9053\uff0c\u901a\u5e38\u662f\u6d88\u606f\u5217\u8868\u3002\u8fd9\u5047\u8bbe\u59cb\u7ec8\u81f3\u5c11\u6709\u4e00\u4e2a\u901a\u9053\uff08\u952e\uff09\u5728\u667a\u80fd\u4ee3\u7406\u4e4b\u95f4\u5171\u4eab\uff08\u4f8b\u5982\uff0c<code>messages</code>\uff09\u3002\u5f53\u901a\u8fc7\u5171\u4eab\u6d88\u606f\u5217\u8868\u901a\u4fe1\u65f6\uff0c\u8fd8\u6709\u4e00\u4e2a\u989d\u5916\u7684\u8003\u8651\uff1a\u667a\u80fd\u4ee3\u7406\u5e94\u8be5\u5171\u4eab\u5176\u601d\u8003\u8fc7\u7a0b\u7684\u5b8c\u6574\u5386\u53f2\u8fd8\u662f\u53ea\u5171\u4eab\u6700\u7ec8\u7ed3\u679c\uff1f</p> <p></p>"},{"location":"concepts/multi_agent/#_13","title":"\u5171\u4eab\u5b8c\u6574\u601d\u8003\u8fc7\u7a0b","text":"<p>\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4e0e\u6240\u6709\u5176\u4ed6\u667a\u80fd\u4ee3\u7406**\u5171\u4eab\u5176\u601d\u8003\u8fc7\u7a0b\u7684\u5b8c\u6574\u5386\u53f2**\uff08\u5373\"\u8349\u7a3f\u672c\"\uff09\u3002\u8fd9\u4e2a\"\u8349\u7a3f\u672c\"\u901a\u5e38\u770b\u8d77\u6765\u50cf\u6d88\u606f\u5217\u8868\u3002\u5171\u4eab\u5b8c\u6574\u601d\u8003\u8fc7\u7a0b\u7684\u597d\u5904\u662f\u5b83\u53ef\u80fd\u5e2e\u52a9\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u505a\u51fa\u66f4\u597d\u7684\u51b3\u5b9a\uff0c\u5e76\u63d0\u9ad8\u6574\u4e2a\u7cfb\u7edf\u7684\u63a8\u7406\u80fd\u529b\u3002\u7f3a\u70b9\u662f\u968f\u7740\u667a\u80fd\u4ee3\u7406\u6570\u91cf\u548c\u590d\u6742\u6027\u7684\u589e\u52a0\uff0c\"\u8349\u7a3f\u672c\"\u4f1a\u5feb\u901f\u589e\u957f\uff0c\u53ef\u80fd\u9700\u8981\u989d\u5916\u7684\u8bb0\u5fc6\u7ba1\u7406\u7b56\u7565\u3002</p>"},{"location":"concepts/multi_agent/#_14","title":"\u53ea\u5171\u4eab\u6700\u7ec8\u7ed3\u679c","text":"<p>\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u6709\u81ea\u5df1\u7684\u79c1\u6709\"\u8349\u7a3f\u672c\"\uff0c\u53ea\u4e0e\u5176\u4ed6\u667a\u80fd\u4ee3\u7406**\u5171\u4eab\u6700\u7ec8\u7ed3\u679c**\u3002\u8fd9\u79cd\u65b9\u6cd5\u53ef\u80fd\u66f4\u9002\u5408\u6709\u5f88\u591a\u667a\u80fd\u4ee3\u7406\u6216\u66f4\u590d\u6742\u667a\u80fd\u4ee3\u7406\u7684\u7cfb\u7edf\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u9700\u8981\u5b9a\u4e49\u5177\u6709\u4e0d\u540c\u72b6\u6001\u6a21\u5f0f\u7684\u667a\u80fd\u4ee3\u7406\u3002</p> <p>\u5bf9\u4e8e\u4f5c\u4e3a\u5de5\u5177\u8c03\u7528\u7684\u667a\u80fd\u4ee3\u7406\uff0c\u76d1\u7763\u8005\u6839\u636e\u5de5\u5177\u6a21\u5f0f\u786e\u5b9a\u8f93\u5165\u3002\u6b64\u5916\uff0cLangGraph \u5141\u8bb8\u5728\u8fd0\u884c\u65f6\u5411\u5355\u4e2a\u5de5\u5177\u4f20\u9012\u72b6\u6001\uff0c\u56e0\u6b64\u5982\u679c\u9700\u8981\uff0c\u4e0b\u7ea7\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u8bbf\u95ee\u7236\u72b6\u6001\u3002</p>"},{"location":"concepts/multi_agent/#_15","title":"\u5728\u6d88\u606f\u4e2d\u6307\u793a\u667a\u80fd\u4ee3\u7406\u540d\u79f0","text":"<p>\u6307\u793a\u7279\u5b9a AI \u6d88\u606f\u6765\u81ea\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u53ef\u80fd\u5f88\u6709\u5e2e\u52a9\uff0c\u7279\u522b\u662f\u5bf9\u4e8e\u957f\u6d88\u606f\u5386\u53f2\u3002\u4e00\u4e9b LLM \u63d0\u4f9b\u5546\uff08\u5982 OpenAI\uff09\u652f\u6301\u5411\u6d88\u606f\u6dfb\u52a0 <code>name</code> \u53c2\u6570\u2014\u2014\u4f60\u53ef\u4ee5\u4f7f\u7528\u5b83\u5c06\u667a\u80fd\u4ee3\u7406\u540d\u79f0\u9644\u52a0\u5230\u6d88\u606f\u3002\u5982\u679c\u4e0d\u652f\u6301\uff0c\u4f60\u53ef\u4ee5\u8003\u8651\u624b\u52a8\u5c06\u667a\u80fd\u4ee3\u7406\u540d\u79f0\u6ce8\u5165\u6d88\u606f\u5185\u5bb9\u4e2d\uff0c\u4f8b\u5982\uff0c<code>&lt;agent&gt;alice&lt;/agent&gt;&lt;message&gt;message from alice&lt;/message&gt;</code>\u3002</p>"},{"location":"concepts/multi_agent/#_16","title":"\u5728\u6d88\u606f\u5386\u53f2\u4e2d\u8868\u793a\u5207\u6362","text":"Python <p>\u5207\u6362\u901a\u5e38\u901a\u8fc7 LLM \u8c03\u7528\u4e13\u7528\u5207\u6362\u5de5\u5177\u6765\u5b8c\u6210\u3002\u8fd9\u8868\u793a\u4e3a\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f\uff0c\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\uff08LLM\uff09\u3002\u5927\u591a\u6570 LLM \u63d0\u4f9b\u5546\u4e0d\u652f\u6301\u63a5\u6536\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f**\u800c\u6ca1\u6709**\u76f8\u5e94\u7684\u5de5\u5177\u6d88\u606f\u3002</p> JavaScript <p>\u5207\u6362\u901a\u5e38\u901a\u8fc7 LLM \u8c03\u7528\u4e13\u7528\u5207\u6362\u5de5\u5177\u6765\u5b8c\u6210\u3002\u8fd9\u8868\u793a\u4e3a\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f\uff0c\u4f20\u9012\u7ed9\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\uff08LLM\uff09\u3002\u5927\u591a\u6570 LLM \u63d0\u4f9b\u5546\u4e0d\u652f\u6301\u63a5\u6536\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f**\u800c\u6ca1\u6709**\u76f8\u5e94\u7684\u5de5\u5177\u6d88\u606f\u3002</p> <p>\u56e0\u6b64\u4f60\u6709\u4e24\u4e2a\u9009\u62e9\uff1a</p> Python <ol> <li>\u5411\u6d88\u606f\u5217\u8868\u6dfb\u52a0\u989d\u5916\u7684\u5de5\u5177\u6d88\u606f\uff0c\u4f8b\u5982\uff0c\"Successfully transferred to agent X\"</li> <li>\u5220\u9664\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f</li> </ol> JavaScript <ol> <li>\u5411\u6d88\u606f\u5217\u8868\u6dfb\u52a0\u989d\u5916\u7684\u5de5\u5177\u6d88\u606f\uff0c\u4f8b\u5982\uff0c\"Successfully transferred to agent X\"</li> <li>\u5220\u9664\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f</li> </ol> <p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u6211\u4eec\u770b\u5230\u5927\u591a\u6570\u5f00\u53d1\u8005\u9009\u62e9\u9009\u9879\uff081\uff09\u3002</p>"},{"location":"concepts/multi_agent/#_17","title":"\u5b50\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u7ba1\u7406","text":"<p>\u4e00\u79cd\u5e38\u89c1\u505a\u6cd5\u662f\u8ba9\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u5728\u5171\u4eab\u6d88\u606f\u5217\u8868\u4e0a\u901a\u4fe1\uff0c\u4f46\u53ea\u5c06\u5b83\u4eec\u7684\u6700\u7ec8\u6d88\u606f\u6dfb\u52a0\u5230\u5217\u8868\u3002\u8fd9\u610f\u5473\u7740\u4efb\u4f55\u4e2d\u95f4\u6d88\u606f\uff08\u4f8b\u5982\uff0c\u5de5\u5177\u8c03\u7528\uff09\u90fd\u4e0d\u4f1a\u4fdd\u5b58\u5728\u6b64\u5217\u8868\u4e2d\u3002</p> <p>\u5982\u679c\u4f60**\u786e\u5b9e**\u60f3\u4fdd\u5b58\u8fd9\u4e9b\u6d88\u606f\uff0c\u4ee5\u4fbf\u5c06\u6765\u8c03\u7528\u6b64\u7279\u5b9a\u5b50\u667a\u80fd\u4ee3\u7406\u65f6\u53ef\u4ee5\u5c06\u5b83\u4eec\u4f20\u9012\u56de\u6765\uff0c\u8be5\u600e\u4e48\u529e\uff1f</p> <p>\u6709\u4e24\u79cd\u9ad8\u7ea7\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\uff1a</p> Python <ol> <li>\u5c06\u8fd9\u4e9b\u6d88\u606f\u5b58\u50a8\u5728\u5171\u4eab\u6d88\u606f\u5217\u8868\u4e2d\uff0c\u4f46\u5728\u4f20\u9012\u7ed9\u5b50\u667a\u80fd\u4ee3\u7406 LLM \u4e4b\u524d\u8fc7\u6ee4\u5217\u8868\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u8fc7\u6ee4\u6389**\u5176\u4ed6**\u667a\u80fd\u4ee3\u7406\u7684\u6240\u6709\u5de5\u5177\u8c03\u7528\u3002</li> <li>\u5728\u5b50\u667a\u80fd\u4ee3\u7406\u7684\u56fe\u72b6\u6001\u4e2d\u4e3a\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u5b58\u50a8\u5355\u72ec\u7684\u6d88\u606f\u5217\u8868\uff08\u4f8b\u5982\uff0c<code>alice_messages</code>\uff09\u3002\u8fd9\u5c06\u662f\u5b83\u4eec\u5bf9\u6d88\u606f\u5386\u53f2\u7684\"\u89c6\u56fe\"\u3002</li> </ol> JavaScript <ol> <li>\u5c06\u8fd9\u4e9b\u6d88\u606f\u5b58\u50a8\u5728\u5171\u4eab\u6d88\u606f\u5217\u8868\u4e2d\uff0c\u4f46\u5728\u4f20\u9012\u7ed9\u5b50\u667a\u80fd\u4ee3\u7406 LLM \u4e4b\u524d\u8fc7\u6ee4\u5217\u8868\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u8fc7\u6ee4\u6389**\u5176\u4ed6**\u667a\u80fd\u4ee3\u7406\u7684\u6240\u6709\u5de5\u5177\u8c03\u7528\u3002</li> <li>\u5728\u5b50\u667a\u80fd\u4ee3\u7406\u7684\u56fe\u72b6\u6001\u4e2d\u4e3a\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u5b58\u50a8\u5355\u72ec\u7684\u6d88\u606f\u5217\u8868\uff08\u4f8b\u5982\uff0c<code>aliceMessages</code>\uff09\u3002\u8fd9\u5c06\u662f\u5b83\u4eec\u5bf9\u6d88\u606f\u5386\u53f2\u7684\"\u89c6\u56fe\"\u3002</li> </ol>"},{"location":"concepts/multi_agent/#_18","title":"\u4f7f\u7528\u4e0d\u540c\u7684\u72b6\u6001\u6a21\u5f0f","text":"<p>\u667a\u80fd\u4ee3\u7406\u53ef\u80fd\u9700\u8981\u4e0e\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u4e0d\u540c\u7684\u72b6\u6001\u6a21\u5f0f\u3002\u4f8b\u5982\uff0c\u641c\u7d22\u667a\u80fd\u4ee3\u7406\u53ef\u80fd\u53ea\u9700\u8981\u8ddf\u8e2a\u67e5\u8be2\u548c\u68c0\u7d22\u5230\u7684\u6587\u6863\u3002\u5728 LangGraph \u4e2d\u6709\u4e24\u79cd\u65b9\u6cd5\u53ef\u4ee5\u5b9e\u73b0\uff1a</p> <ul> <li>\u5b9a\u4e49\u5177\u6709\u5355\u72ec\u72b6\u6001\u6a21\u5f0f\u7684\u5b50\u56fe\u667a\u80fd\u4ee3\u7406\u3002\u5982\u679c\u5b50\u56fe\u548c\u7236\u56fe\u4e4b\u95f4\u6ca1\u6709\u5171\u4eab\u72b6\u6001\u952e\uff08\u901a\u9053\uff09\uff0c\u91cd\u8981\u7684\u662f\u6dfb\u52a0\u8f93\u5165/\u8f93\u51fa\u8f6c\u6362\uff0c\u4ee5\u4fbf\u7236\u56fe\u77e5\u9053\u5982\u4f55\u4e0e\u5b50\u56fe\u901a\u4fe1\u3002</li> <li>\u5b9a\u4e49\u5177\u6709\u4e0e\u6574\u4f53\u56fe\u72b6\u6001\u6a21\u5f0f\u4e0d\u540c\u7684\u79c1\u6709\u8f93\u5165\u72b6\u6001\u6a21\u5f0f\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u51fd\u6570\u3002\u8fd9\u5141\u8bb8\u4f20\u9012\u53ea\u9700\u8981\u7528\u4e8e\u6267\u884c\u8be5\u7279\u5b9a\u667a\u80fd\u4ee3\u7406\u7684\u4fe1\u606f\u3002</li> </ul>"},{"location":"concepts/persistence/","title":"\u6301\u4e45\u5316","text":"<p>LangGraph \u5177\u6709\u5185\u7f6e\u7684\u6301\u4e45\u5316\u5c42\uff0c\u901a\u8fc7\u68c0\u67e5\u70b9\u5668\u5b9e\u73b0\u3002\u5f53\u4f60\u4f7f\u7528\u68c0\u67e5\u70b9\u5668\u7f16\u8bd1\u56fe\u65f6\uff0c\u68c0\u67e5\u70b9\u5668\u4f1a\u5728\u6bcf\u4e2a\u8d85\u6b65\u4fdd\u5b58\u56fe\u72b6\u6001\u7684 <code>checkpoint</code>\u3002\u8fd9\u4e9b\u68c0\u67e5\u70b9\u4fdd\u5b58\u5230 <code>thread</code> \u4e2d\uff0c\u53ef\u4ee5\u5728\u56fe\u6267\u884c\u540e\u8bbf\u95ee\u3002\u56e0\u4e3a <code>threads</code> \u5141\u8bb8\u5728\u6267\u884c\u540e\u8bbf\u95ee\u56fe\u7684\u72b6\u6001\uff0c\u6240\u4ee5\u51e0\u4e2a\u5f3a\u5927\u7684\u529f\u80fd\uff0c\u5305\u62ec\u4eba\u673a\u534f\u540c\u3001\u8bb0\u5fc6\u3001\u65f6\u95f4\u65c5\u884c\u548c\u5bb9\u9519\uff0c\u90fd\u53d8\u5f97\u53ef\u80fd\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u66f4\u8be6\u7ec6\u5730\u8ba8\u8bba\u8fd9\u4e9b\u6982\u5ff5\u3002</p> <p></p> <p>LangGraph API \u81ea\u52a8\u5904\u7406\u68c0\u67e5\u70b9</p> <p>\u4f7f\u7528 LangGraph API \u65f6\uff0c\u4f60\u4e0d\u9700\u8981\u624b\u52a8\u5b9e\u73b0\u6216\u914d\u7f6e\u68c0\u67e5\u70b9\u5668\u3002API \u4f1a\u5728\u5e55\u540e\u4e3a\u4f60\u5904\u7406\u6240\u6709\u6301\u4e45\u5316\u57fa\u7840\u8bbe\u65bd\u3002</p>","boost":2},{"location":"concepts/persistence/#_2","title":"\u7ebf\u7a0b","text":"<p>\u7ebf\u7a0b\u662f\u5206\u914d\u7ed9\u68c0\u67e5\u70b9\u5668\u4fdd\u5b58\u7684\u6bcf\u4e2a\u68c0\u67e5\u70b9\u7684\u552f\u4e00 ID \u6216\u7ebf\u7a0b\u6807\u8bc6\u7b26\u3002\u5b83\u5305\u542b\u4e00\u7cfb\u5217\u8fd0\u884c\u7684\u7d2f\u79ef\u72b6\u6001\u3002\u5f53\u8fd0\u884c\u88ab\u6267\u884c\u65f6\uff0c\u52a9\u624b\u5e95\u5c42\u56fe\u7684\u72b6\u6001\u5c06\u88ab\u6301\u4e45\u5316\u5230\u7ebf\u7a0b\u4e2d\u3002</p> <p>\u4f7f\u7528\u68c0\u67e5\u70b9\u5668\u8c03\u7528\u56fe\u65f6\uff0c\u4f60**\u5fc5\u987b**\u5728\u914d\u7f6e\u7684 <code>configurable</code> \u90e8\u5206\u6307\u5b9a <code>thread_id</code>\uff1a</p> Python <pre><code>{\"configurable\": {\"thread_id\": \"1\"}}\n</code></pre> JavaScript <pre><code>{\n  configurable: {\n    thread_id: \"1\";\n  }\n}\n</code></pre> <p>\u53ef\u4ee5\u68c0\u7d22\u7ebf\u7a0b\u7684\u5f53\u524d\u548c\u5386\u53f2\u72b6\u6001\u3002\u8981\u6301\u4e45\u5316\u72b6\u6001\uff0c\u5fc5\u987b\u5728\u6267\u884c\u8fd0\u884c\u4e4b\u524d\u521b\u5efa\u7ebf\u7a0b\u3002LangGraph Platform API \u63d0\u4f9b\u4e86\u591a\u4e2a\u7aef\u70b9\u7528\u4e8e\u521b\u5efa\u548c\u7ba1\u7406\u7ebf\u7a0b\u548c\u7ebf\u7a0b\u72b6\u6001\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 API \u53c2\u8003\u3002</p>","boost":2},{"location":"concepts/persistence/#_3","title":"\u68c0\u67e5\u70b9","text":"<p>\u7ebf\u7a0b\u5728\u7279\u5b9a\u65f6\u95f4\u70b9\u7684\u72b6\u6001\u79f0\u4e3a\u68c0\u67e5\u70b9\u3002\u68c0\u67e5\u70b9\u662f\u5728\u6bcf\u4e2a\u8d85\u6b65\u4fdd\u5b58\u7684\u56fe\u72b6\u6001\u5feb\u7167\uff0c\u7531 <code>StateSnapshot</code> \u5bf9\u8c61\u8868\u793a\uff0c\u5177\u6709\u4ee5\u4e0b\u5173\u952e\u5c5e\u6027\uff1a</p> <ul> <li><code>config</code>\uff1a\u4e0e\u6b64\u68c0\u67e5\u70b9\u5173\u8054\u7684\u914d\u7f6e\u3002</li> <li><code>metadata</code>\uff1a\u4e0e\u6b64\u68c0\u67e5\u70b9\u5173\u8054\u7684\u5143\u6570\u636e\u3002</li> <li><code>values</code>\uff1a\u6b64\u65f6\u95f4\u70b9\u72b6\u6001\u901a\u9053\u7684\u503c\u3002</li> <li><code>next</code>\uff1a\u56fe\u4e2d\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9\u540d\u79f0\u7684\u5143\u7ec4\u3002</li> <li><code>tasks</code>\uff1a\u5305\u542b\u6709\u5173\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u4efb\u52a1\u4fe1\u606f\u7684 <code>PregelTask</code> \u5bf9\u8c61\u5143\u7ec4\u3002\u5982\u679c\u8be5\u6b65\u9aa4\u4e4b\u524d\u5df2\u5c1d\u8bd5\u8fc7\uff0c\u5b83\u5c06\u5305\u542b\u9519\u8bef\u4fe1\u606f\u3002\u5982\u679c\u56fe\u4ece\u8282\u70b9\u5185\u90e8\u52a8\u6001\u4e2d\u65ad\uff0c\u4efb\u52a1\u5c06\u5305\u542b\u4e0e\u4e2d\u65ad\u76f8\u5173\u7684\u9644\u52a0\u6570\u636e\u3002</li> </ul> <p>\u68c0\u67e5\u70b9\u88ab\u6301\u4e45\u5316\uff0c\u53ef\u4ee5\u7528\u4e8e\u5728\u7a0d\u540e\u65f6\u95f4\u6062\u590d\u7ebf\u7a0b\u7684\u72b6\u6001\u3002</p> <p>\u8ba9\u6211\u4eec\u770b\u770b\u5f53\u6309\u5982\u4e0b\u65b9\u5f0f\u8c03\u7528\u7b80\u5355\u56fe\u65f6\u4fdd\u5b58\u4e86\u54ea\u4e9b\u68c0\u67e5\u70b9\uff1a</p> Python <pre><code>from langgraph.graph import StateGraph, START, END\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom typing import Annotated\nfrom typing_extensions import TypedDict\nfrom operator import add\n\nclass State(TypedDict):\n    foo: str\n    bar: Annotated[list[str], add]\n\ndef node_a(state: State):\n    return {\"foo\": \"a\", \"bar\": [\"a\"]}\n\ndef node_b(state: State):\n    return {\"foo\": \"b\", \"bar\": [\"b\"]}\n\n\nworkflow = StateGraph(State)\nworkflow.add_node(node_a)\nworkflow.add_node(node_b)\nworkflow.add_edge(START, \"node_a\")\nworkflow.add_edge(\"node_a\", \"node_b\")\nworkflow.add_edge(\"node_b\", END)\n\ncheckpointer = InMemorySaver()\ngraph = workflow.compile(checkpointer=checkpointer)\n\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\ngraph.invoke({\"foo\": \"\"}, config)\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END, MemoryServer } from \"@langchain/langgraph\";\nimport { withLangGraph } from \"@langchain/langgraph/zod\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  foo: z.string(),\n  bar: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (x, y) =&gt; x.concat(y),\n    },\n    default: () =&gt; [],\n  }),\n});\n\nconst workflow = new StateGraph(State)\n  .addNode(\"nodeA\", (state) =&gt; {\n    return { foo: \"a\", bar: [\"a\"] };\n  })\n  .addNode(\"nodeB\", (state) =&gt; {\n    return { foo: \"b\", bar: [\"b\"] };\n  })\n  .addEdge(START, \"nodeA\")\n  .addEdge(\"nodeA\", \"nodeB\")\n  .addEdge(\"nodeB\", END);\n\nconst checkpointer = new MemorySaver();\nconst graph = workflow.compile({ checkpointer });\n\nconst config = { configurable: { thread_id: \"1\" } };\nawait graph.invoke({ foo: \"\" }, config);\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END, MemoryServer } from \"@langchain/langgraph\";\nimport { withLangGraph } from \"@langchain/langgraph/zod\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  foo: z.string(),\n  bar: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (x, y) =&gt; x.concat(y),\n    },\n    default: () =&gt; [],\n  }),\n});\n\nconst workflow = new StateGraph(State)\n  .addNode(\"nodeA\", (state) =&gt; {\n    return { foo: \"a\", bar: [\"a\"] };\n  })\n  .addNode(\"nodeB\", (state) =&gt; {\n    return { foo: \"b\", bar: [\"b\"] };\n  })\n  .addEdge(START, \"nodeA\")\n  .addEdge(\"nodeA\", \"nodeB\")\n  .addEdge(\"nodeB\", END);\n\nconst checkpointer = new MemorySaver();\nconst graph = workflow.compile({ checkpointer });\n\nconst config = { configurable: { thread_id: \"1\" } };\nawait graph.invoke({ foo: \"\" }, config);\n</code></pre> Python <p>\u8fd0\u884c\u56fe\u540e\uff0c\u6211\u4eec\u671f\u671b\u770b\u5230\u6b63\u597d 4 \u4e2a\u68c0\u67e5\u70b9\uff1a</p> <ul> <li>\u7a7a\u68c0\u67e5\u70b9\uff0c<code>START</code> \u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> <li>\u5305\u542b\u7528\u6237\u8f93\u5165 <code>{'foo': '', 'bar': []}</code> \u7684\u68c0\u67e5\u70b9\uff0c<code>node_a</code> \u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> <li>\u5305\u542b <code>node_a</code> \u8f93\u51fa <code>{'foo': 'a', 'bar': ['a']}</code> \u7684\u68c0\u67e5\u70b9\uff0c<code>node_b</code> \u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> <li>\u5305\u542b <code>node_b</code> \u8f93\u51fa <code>{'foo': 'b', 'bar': ['a', 'b']}</code> \u7684\u68c0\u67e5\u70b9\uff0c\u6ca1\u6709\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> </ul> <p>\u6ce8\u610f <code>bar</code> \u901a\u9053\u503c\u5305\u542b\u4e24\u4e2a\u8282\u70b9\u7684\u8f93\u51fa\uff0c\u56e0\u4e3a\u6211\u4eec\u4e3a <code>bar</code> \u901a\u9053\u8bbe\u7f6e\u4e86\u5f52\u7ea6\u5668\u3002</p> JavaScript <p>\u8fd0\u884c\u56fe\u540e\uff0c\u6211\u4eec\u671f\u671b\u770b\u5230\u6b63\u597d 4 \u4e2a\u68c0\u67e5\u70b9\uff1a</p> <ul> <li>\u7a7a\u68c0\u67e5\u70b9\uff0c<code>START</code> \u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> <li>\u5305\u542b\u7528\u6237\u8f93\u5165 <code>{'foo': '', 'bar': []}</code> \u7684\u68c0\u67e5\u70b9\uff0c<code>nodeA</code> \u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> <li>\u5305\u542b <code>nodeA</code> \u8f93\u51fa <code>{'foo': 'a', 'bar': ['a']}</code> \u7684\u68c0\u67e5\u70b9\uff0c<code>nodeB</code> \u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> <li>\u5305\u542b <code>nodeB</code> \u8f93\u51fa <code>{'foo': 'b', 'bar': ['a', 'b']}</code> \u7684\u68c0\u67e5\u70b9\uff0c\u6ca1\u6709\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8282\u70b9</li> </ul> <p>\u6ce8\u610f <code>bar</code> \u901a\u9053\u503c\u5305\u542b\u4e24\u4e2a\u8282\u70b9\u7684\u8f93\u51fa\uff0c\u56e0\u4e3a\u6211\u4eec\u4e3a <code>bar</code> \u901a\u9053\u8bbe\u7f6e\u4e86\u5f52\u7ea6\u5668\u3002</p>","boost":2},{"location":"concepts/persistence/#_4","title":"\u83b7\u53d6\u72b6\u6001","text":"Python <p>\u4e0e\u4fdd\u5b58\u7684\u56fe\u72b6\u6001\u4ea4\u4e92\u65f6\uff0c\u4f60**\u5fc5\u987b**\u6307\u5b9a\u7ebf\u7a0b\u6807\u8bc6\u7b26\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>graph.get_state(config)</code> \u6765\u67e5\u770b\u56fe\u7684_\u6700\u65b0_\u72b6\u6001\u3002\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a <code>StateSnapshot</code> \u5bf9\u8c61\uff0c\u5bf9\u5e94\u4e8e\u4e0e\u914d\u7f6e\u4e2d\u63d0\u4f9b\u7684\u7ebf\u7a0b ID \u5173\u8054\u7684\u6700\u65b0\u68c0\u67e5\u70b9\uff0c\u6216\u8005\u5982\u679c\u63d0\u4f9b\u4e86\u68c0\u67e5\u70b9 ID\uff0c\u5219\u5bf9\u5e94\u4e8e\u8be5\u7ebf\u7a0b\u7684\u7279\u5b9a\u68c0\u67e5\u70b9\u3002</p> <pre><code># get the latest state snapshot\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\ngraph.get_state(config)\n\n# get a state snapshot for a specific checkpoint_id\nconfig = {\"configurable\": {\"thread_id\": \"1\", \"checkpoint_id\": \"1ef663ba-28fe-6528-8002-5a559208592c\"}}\ngraph.get_state(config)\n</code></pre> JavaScript <p>\u4e0e\u4fdd\u5b58\u7684\u56fe\u72b6\u6001\u4ea4\u4e92\u65f6\uff0c\u4f60**\u5fc5\u987b**\u6307\u5b9a\u7ebf\u7a0b\u6807\u8bc6\u7b26\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>graph.getState(config)</code> \u6765\u67e5\u770b\u56fe\u7684_\u6700\u65b0_\u72b6\u6001\u3002\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a <code>StateSnapshot</code> \u5bf9\u8c61\uff0c\u5bf9\u5e94\u4e8e\u4e0e\u914d\u7f6e\u4e2d\u63d0\u4f9b\u7684\u7ebf\u7a0b ID \u5173\u8054\u7684\u6700\u65b0\u68c0\u67e5\u70b9\uff0c\u6216\u8005\u5982\u679c\u63d0\u4f9b\u4e86\u68c0\u67e5\u70b9 ID\uff0c\u5219\u5bf9\u5e94\u4e8e\u8be5\u7ebf\u7a0b\u7684\u7279\u5b9a\u68c0\u67e5\u70b9\u3002</p> <pre><code>// get the latest state snapshot\nconst config = { configurable: { thread_id: \"1\" } };\nawait graph.getState(config);\n\n// get a state snapshot for a specific checkpoint_id\nconst config = {\n  configurable: {\n    thread_id: \"1\",\n    checkpoint_id: \"1ef663ba-28fe-6528-8002-5a559208592c\",\n  },\n};\nawait graph.getState(config);\n</code></pre> Python <p>\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4e2d\uff0c<code>get_state</code> \u7684\u8f93\u51fa\u5c06\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>StateSnapshot(\n    values={'foo': 'b', 'bar': ['a', 'b']},\n    next=(),\n    config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28fe-6528-8002-5a559208592c'}},\n    metadata={'source': 'loop', 'writes': {'node_b': {'foo': 'b', 'bar': ['b']}}, 'step': 2},\n    created_at='2024-08-29T19:19:38.821749+00:00',\n    parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f9-6ec4-8001-31981c2c39f8'}}, tasks=()\n)\n</code></pre> JavaScript <p>\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4e2d\uff0c<code>getState</code> \u7684\u8f93\u51fa\u5c06\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>StateSnapshot {\n  values: { foo: 'b', bar: ['a', 'b'] },\n  next: [],\n  config: {\n    configurable: {\n      thread_id: '1',\n      checkpoint_ns: '',\n      checkpoint_id: '1ef663ba-28fe-6528-8002-5a559208592c'\n    }\n  },\n  metadata: {\n    source: 'loop',\n    writes: { nodeB: { foo: 'b', bar: ['b'] } },\n    step: 2\n  },\n  createdAt: '2024-08-29T19:19:38.821749+00:00',\n  parentConfig: {\n    configurable: {\n      thread_id: '1',\n      checkpoint_ns: '',\n      checkpoint_id: '1ef663ba-28f9-6ec4-8001-31981c2c39f8'\n    }\n  },\n  tasks: []\n}\n</code></pre>","boost":2},{"location":"concepts/persistence/#_5","title":"\u83b7\u53d6\u72b6\u6001\u5386\u53f2","text":"Python <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>graph.get_state_history(config)</code> \u83b7\u53d6\u7ed9\u5b9a\u7ebf\u7a0b\u7684\u56fe\u6267\u884c\u5b8c\u6574\u5386\u53f2\u3002\u8fd9\u5c06\u8fd4\u56de\u4e0e\u914d\u7f6e\u4e2d\u63d0\u4f9b\u7684\u7ebf\u7a0b ID \u5173\u8054\u7684 <code>StateSnapshot</code> \u5bf9\u8c61\u5217\u8868\u3002\u91cd\u8981\u7684\u662f\uff0c\u68c0\u67e5\u70b9\u5c06\u6309\u65f6\u95f4\u987a\u5e8f\u6392\u5217\uff0c\u6700\u8fd1\u7684\u68c0\u67e5\u70b9/<code>StateSnapshot</code> \u5728\u5217\u8868\u7684\u7b2c\u4e00\u4f4d\u3002</p> <pre><code>config = {\"configurable\": {\"thread_id\": \"1\"}}\nlist(graph.get_state_history(config))\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u8c03\u7528 <code>graph.getStateHistory(config)</code> \u83b7\u53d6\u7ed9\u5b9a\u7ebf\u7a0b\u7684\u56fe\u6267\u884c\u5b8c\u6574\u5386\u53f2\u3002\u8fd9\u5c06\u8fd4\u56de\u4e0e\u914d\u7f6e\u4e2d\u63d0\u4f9b\u7684\u7ebf\u7a0b ID \u5173\u8054\u7684 <code>StateSnapshot</code> \u5bf9\u8c61\u5217\u8868\u3002\u91cd\u8981\u7684\u662f\uff0c\u68c0\u67e5\u70b9\u5c06\u6309\u65f6\u95f4\u987a\u5e8f\u6392\u5217\uff0c\u6700\u8fd1\u7684\u68c0\u67e5\u70b9/<code>StateSnapshot</code> \u5728\u5217\u8868\u7684\u7b2c\u4e00\u4f4d\u3002</p> <pre><code>const config = { configurable: { thread_id: \"1\" } };\nfor await (const state of graph.getStateHistory(config)) {\n  console.log(state);\n}\n</code></pre> Python <p>\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4e2d\uff0c<code>get_state_history</code> \u7684\u8f93\u51fa\u5c06\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>[\n    StateSnapshot(\n        values={'foo': 'b', 'bar': ['a', 'b']},\n        next=(),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28fe-6528-8002-5a559208592c'}},\n        metadata={'source': 'loop', 'writes': {'node_b': {'foo': 'b', 'bar': ['b']}}, 'step': 2},\n        created_at='2024-08-29T19:19:38.821749+00:00',\n        parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f9-6ec4-8001-31981c2c39f8'}},\n        tasks=(),\n    ),\n    StateSnapshot(\n        values={'foo': 'a', 'bar': ['a']},\n        next=('node_b',),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f9-6ec4-8001-31981c2c39f8'}},\n        metadata={'source': 'loop', 'writes': {'node_a': {'foo': 'a', 'bar': ['a']}}, 'step': 1},\n        created_at='2024-08-29T19:19:38.819946+00:00',\n        parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f4-6b4a-8000-ca575a13d36a'}},\n        tasks=(PregelTask(id='6fb7314f-f114-5413-a1f3-d37dfe98ff44', name='node_b', error=None, interrupts=()),),\n    ),\n    StateSnapshot(\n        values={'foo': '', 'bar': []},\n        next=('node_a',),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f4-6b4a-8000-ca575a13d36a'}},\n        metadata={'source': 'loop', 'writes': None, 'step': 0},\n        created_at='2024-08-29T19:19:38.817813+00:00',\n        parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f0-6c66-bfff-6723431e8481'}},\n        tasks=(PregelTask(id='f1b14528-5ee5-579c-949b-23ef9bfbed58', name='node_a', error=None, interrupts=()),),\n    ),\n    StateSnapshot(\n        values={'bar': []},\n        next=('__start__',),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef663ba-28f0-6c66-bfff-6723431e8481'}},\n        metadata={'source': 'input', 'writes': {'foo': ''}, 'step': -1},\n        created_at='2024-08-29T19:19:38.816205+00:00',\n        parent_config=None,\n        tasks=(PregelTask(id='6d27aa2e-d72b-5504-a36f-8620e54a76dd', name='__start__', error=None, interrupts=()),),\n    )\n]\n</code></pre> JavaScript <p>\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4e2d\uff0c<code>getStateHistory</code> \u7684\u8f93\u51fa\u5c06\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>[\n  StateSnapshot {\n    values: { foo: 'b', bar: ['a', 'b'] },\n    next: [],\n    config: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28fe-6528-8002-5a559208592c'\n      }\n    },\n    metadata: {\n      source: 'loop',\n      writes: { nodeB: { foo: 'b', bar: ['b'] } },\n      step: 2\n    },\n    createdAt: '2024-08-29T19:19:38.821749+00:00',\n    parentConfig: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28f9-6ec4-8001-31981c2c39f8'\n      }\n    },\n    tasks: []\n  },\n  StateSnapshot {\n    values: { foo: 'a', bar: ['a'] },\n    next: ['nodeB'],\n    config: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28f9-6ec4-8001-31981c2c39f8'\n      }\n    },\n    metadata: {\n      source: 'loop',\n      writes: { nodeA: { foo: 'a', bar: ['a'] } },\n      step: 1\n    },\n    createdAt: '2024-08-29T19:19:38.819946+00:00',\n    parentConfig: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28f4-6b4a-8000-ca575a13d36a'\n      }\n    },\n    tasks: [\n      PregelTask {\n        id: '6fb7314f-f114-5413-a1f3-d37dfe98ff44',\n        name: 'nodeB',\n        error: null,\n        interrupts: []\n      }\n    ]\n  },\n  StateSnapshot {\n    values: { foo: '', bar: [] },\n    next: ['node_a'],\n    config: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28f4-6b4a-8000-ca575a13d36a'\n      }\n    },\n    metadata: {\n      source: 'loop',\n      writes: null,\n      step: 0\n    },\n    createdAt: '2024-08-29T19:19:38.817813+00:00',\n    parentConfig: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28f0-6c66-bfff-6723431e8481'\n      }\n    },\n    tasks: [\n      PregelTask {\n        id: 'f1b14528-5ee5-579c-949b-23ef9bfbed58',\n        name: 'node_a',\n        error: null,\n        interrupts: []\n      }\n    ]\n  },\n  StateSnapshot {\n    values: { bar: [] },\n    next: ['__start__'],\n    config: {\n      configurable: {\n        thread_id: '1',\n        checkpoint_ns: '',\n        checkpoint_id: '1ef663ba-28f0-6c66-bfff-6723431e8481'\n      }\n    },\n    metadata: {\n      source: 'input',\n      writes: { foo: '' },\n      step: -1\n    },\n    createdAt: '2024-08-29T19:19:38.816205+00:00',\n    parentConfig: null,\n    tasks: [\n      PregelTask {\n        id: '6d27aa2e-d72b-5504-a36f-8620e54a76dd',\n        name: '__start__',\n        error: null,\n        interrupts: []\n      }\n    ]\n  }\n]\n</code></pre> <p></p>","boost":2},{"location":"concepts/persistence/#_6","title":"\u91cd\u653e","text":"<p>\u4e5f\u53ef\u4ee5\u56de\u653e\u4e4b\u524d\u7684\u56fe\u6267\u884c\u3002\u5982\u679c\u6211\u4eec\u7528 <code>thread_id</code> \u548c <code>checkpoint_id</code> \u6765 <code>invoke</code> \u56fe\uff0c\u90a3\u4e48\u6211\u4eec\u5c06_\u91cd\u653e_\u5bf9\u5e94\u4e8e <code>checkpoint_id</code> \u7684\u68c0\u67e5\u70b9_\u4e4b\u524d_\u5148\u524d\u6267\u884c\u7684\u6b65\u9aa4\uff0c\u5e76\u4e14\u53ea\u6267\u884c\u68c0\u67e5\u70b9_\u4e4b\u540e_\u7684\u6b65\u9aa4\u3002</p> <ul> <li><code>thread_id</code> \u662f\u7ebf\u7a0b\u7684 ID\u3002</li> <li><code>checkpoint_id</code> \u662f\u6307\u7ebf\u7a0b\u5185\u7279\u5b9a\u68c0\u67e5\u70b9\u7684\u6807\u8bc6\u7b26\u3002</li> </ul> <p>\u8c03\u7528\u56fe\u65f6\uff0c\u4f60\u5fc5\u987b\u5c06\u8fd9\u4e9b\u4f5c\u4e3a\u914d\u7f6e\u7684 <code>configurable</code> \u90e8\u5206\u4f20\u9012\uff1a</p> Python <pre><code>config = {\"configurable\": {\"thread_id\": \"1\", \"checkpoint_id\": \"0c62ca34-ac19-445d-bbb0-5b4984975b2a\"}}\ngraph.invoke(None, config=config)\n</code></pre> JavaScript <pre><code>const config = {\n  configurable: {\n    thread_id: \"1\",\n    checkpoint_id: \"0c62ca34-ac19-445d-bbb0-5b4984975b2a\",\n  },\n};\nawait graph.invoke(null, config);\n</code></pre> <p>\u91cd\u8981\u7684\u662f\uff0cLangGraph \u77e5\u9053\u7279\u5b9a\u6b65\u9aa4\u4e4b\u524d\u662f\u5426\u5df2\u6267\u884c\u3002\u5982\u679c\u5df2\u6267\u884c\uff0cLangGraph \u53ea\u662f_\u91cd\u653e_\u56fe\u4e2d\u7684\u8be5\u7279\u5b9a\u6b65\u9aa4\uff0c\u800c\u4e0d\u4f1a\u91cd\u65b0\u6267\u884c\u8be5\u6b65\u9aa4\uff0c\u4f46\u8fd9\u53ea\u9002\u7528\u4e8e\u63d0\u4f9b\u7684 <code>checkpoint_id</code> _\u4e4b\u524d_\u7684\u6b65\u9aa4\u3002<code>checkpoint_id</code> _\u4e4b\u540e_\u7684\u6240\u6709\u6b65\u9aa4\u90fd\u5c06\u88ab\u6267\u884c\uff08\u5373\uff0c\u65b0\u7684\u5206\u53c9\uff09\uff0c\u5373\u4f7f\u5b83\u4eec\u4e4b\u524d\u5df2\u6267\u884c\u3002\u8bf7\u53c2\u9605\u6b64\u5173\u4e8e\u65f6\u95f4\u65c5\u884c\u7684\u64cd\u4f5c\u6307\u5357\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u91cd\u653e\u7684\u4fe1\u606f\u3002</p> <p></p>","boost":2},{"location":"concepts/persistence/#_7","title":"\u66f4\u65b0\u72b6\u6001","text":"Python <p>\u9664\u4e86\u4ece\u7279\u5b9a <code>checkpoints</code> \u91cd\u653e\u56fe\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5_\u7f16\u8f91_\u56fe\u72b6\u6001\u3002\u6211\u4eec\u4f7f\u7528 <code>graph.update_state()</code> \u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e09\u4e2a\u4e0d\u540c\u7684\u53c2\u6570\uff1a</p> JavaScript <p>\u9664\u4e86\u4ece\u7279\u5b9a <code>checkpoints</code> \u91cd\u653e\u56fe\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5_\u7f16\u8f91_\u56fe\u72b6\u6001\u3002\u6211\u4eec\u4f7f\u7528 <code>graph.updateState()</code> \u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002\u6b64\u65b9\u6cd5\u63a5\u53d7\u4e09\u4e2a\u4e0d\u540c\u7684\u53c2\u6570\uff1a</p>","boost":2},{"location":"concepts/persistence/#config","title":"<code>config</code>","text":"<p>\u914d\u7f6e\u5e94\u5305\u542b\u6307\u5b9a\u8981\u66f4\u65b0\u54ea\u4e2a\u7ebf\u7a0b\u7684 <code>thread_id</code>\u3002\u5f53\u53ea\u4f20\u9012 <code>thread_id</code> \u65f6\uff0c\u6211\u4eec\u66f4\u65b0\uff08\u6216\u5206\u53c9\uff09\u5f53\u524d\u72b6\u6001\u3002\u53ef\u9009\u5730\uff0c\u5982\u679c\u6211\u4eec\u5305\u542b <code>checkpoint_id</code> \u5b57\u6bb5\uff0c\u5219\u6211\u4eec\u5206\u53c9\u9009\u5b9a\u7684\u68c0\u67e5\u70b9\u3002</p>","boost":2},{"location":"concepts/persistence/#values","title":"<code>values</code>","text":"<p>\u8fd9\u4e9b\u662f\u5c06\u7528\u4e8e\u66f4\u65b0\u72b6\u6001\u7684\u503c\u3002\u8bf7\u6ce8\u610f\uff0c\u6b64\u66f4\u65b0\u4e0e\u6765\u81ea\u8282\u70b9\u7684\u4efb\u4f55\u66f4\u65b0\u5b8c\u5168\u76f8\u540c\u5904\u7406\u3002\u8fd9\u610f\u5473\u7740\u8fd9\u4e9b\u503c\u5c06\u4f20\u9012\u7ed9\u5f52\u7ea6\u5668\u51fd\u6570\uff0c\u5982\u679c\u4e3a\u56fe\u72b6\u6001\u4e2d\u7684\u67d0\u4e9b\u901a\u9053\u5b9a\u4e49\u4e86\u5f52\u7ea6\u5668\u3002\u8fd9\u610f\u5473\u7740 <code>update_state</code> \u4e0d\u4f1a\u81ea\u52a8\u8986\u76d6\u6bcf\u4e2a\u901a\u9053\u7684\u901a\u9053\u503c\uff0c\u800c\u53ea\u8986\u76d6\u6ca1\u6709\u5f52\u7ea6\u5668\u7684\u901a\u9053\u3002\u8ba9\u6211\u4eec\u901a\u8fc7\u4e00\u4e2a\u4f8b\u5b50\u6765\u8bf4\u660e\u3002</p> <p>\u5047\u8bbe\u4f60\u4f7f\u7528\u4ee5\u4e0b\u6a21\u5f0f\u5b9a\u4e49\u4e86\u56fe\u7684\u72b6\u6001\uff08\u53c2\u89c1\u4e0a\u9762\u7684\u5b8c\u6574\u793a\u4f8b\uff09\uff1a</p> Python <pre><code>from typing import Annotated\nfrom typing_extensions import TypedDict\nfrom operator import add\n\nclass State(TypedDict):\n    foo: int\n    bar: Annotated[list[str], add]\n</code></pre> JavaScript <pre><code>import { withLangGraph } from \"@langchain/langgraph/zod\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  foo: z.number(),\n  bar: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (x, y) =&gt; x.concat(y),\n    },\n    default: () =&gt; [],\n  }),\n});\n</code></pre> <p>\u73b0\u5728\u5047\u8bbe\u56fe\u7684\u5f53\u524d\u72b6\u6001\u662f</p> Python <pre><code>{\"foo\": 1, \"bar\": [\"a\"]}\n</code></pre> JavaScript <pre><code>{ foo: 1, bar: [\"a\"] }\n</code></pre> <p>\u5982\u679c\u4f60\u6309\u5982\u4e0b\u65b9\u5f0f\u66f4\u65b0\u72b6\u6001\uff1a</p> Python <pre><code>graph.update_state(config, {\"foo\": 2, \"bar\": [\"b\"]})\n</code></pre> JavaScript <pre><code>await graph.updateState(config, { foo: 2, bar: [\"b\"] });\n</code></pre> <p>\u90a3\u4e48\u56fe\u7684\u65b0\u72b6\u6001\u5c06\u662f\uff1a</p> Python <pre><code>{\"foo\": 2, \"bar\": [\"a\", \"b\"]}\n</code></pre> <p><code>foo</code> \u952e\uff08\u901a\u9053\uff09\u88ab\u5b8c\u5168\u66f4\u6539\uff08\u56e0\u4e3a\u8be5\u901a\u9053\u6ca1\u6709\u6307\u5b9a\u5f52\u7ea6\u5668\uff0c\u6240\u4ee5 <code>update_state</code> \u4f1a\u8986\u76d6\u5b83\uff09\u3002\u4f46\u662f\uff0c<code>bar</code> \u952e\u6709\u4e00\u4e2a\u6307\u5b9a\u7684\u5f52\u7ea6\u5668\uff0c\u6240\u4ee5\u5b83\u5c06 <code>\"b\"</code> \u9644\u52a0\u5230 <code>bar</code> \u7684\u72b6\u6001\u3002</p> JavaScript <pre><code>{ foo: 2, bar: [\"a\", \"b\"] }\n</code></pre> <p><code>foo</code> \u952e\uff08\u901a\u9053\uff09\u88ab\u5b8c\u5168\u66f4\u6539\uff08\u56e0\u4e3a\u8be5\u901a\u9053\u6ca1\u6709\u6307\u5b9a\u5f52\u7ea6\u5668\uff0c\u6240\u4ee5 <code>updateState</code> \u4f1a\u8986\u76d6\u5b83\uff09\u3002\u4f46\u662f\uff0c<code>bar</code> \u952e\u6709\u4e00\u4e2a\u6307\u5b9a\u7684\u5f52\u7ea6\u5668\uff0c\u6240\u4ee5\u5b83\u5c06 <code>\"b\"</code> \u9644\u52a0\u5230 <code>bar</code> \u7684\u72b6\u6001\u3002</p>","boost":2},{"location":"concepts/persistence/#as_node","title":"<code>as_node</code>","text":"Python <p>\u8c03\u7528 <code>update_state</code> \u65f6\u4f60\u53ef\u4ee5\u9009\u62e9\u6307\u5b9a\u7684\u6700\u540e\u4e00\u4ef6\u4e8b\u662f <code>as_node</code>\u3002\u5982\u679c\u4f60\u63d0\u4f9b\u4e86\u5b83\uff0c\u66f4\u65b0\u5c06\u88ab\u5e94\u7528\u4e3a\u597d\u50cf\u5b83\u6765\u81ea\u8282\u70b9 <code>as_node</code>\u3002\u5982\u679c\u672a\u63d0\u4f9b <code>as_node</code>\uff0c\u5b83\u5c06\u88ab\u8bbe\u7f6e\u4e3a\u6700\u540e\u4e00\u4e2a\u66f4\u65b0\u72b6\u6001\u7684\u8282\u70b9\uff08\u5982\u679c\u6ca1\u6709\u6b67\u4e49\uff09\u3002\u8fd9\u5f88\u91cd\u8981\u7684\u539f\u56e0\u662f\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u6b65\u9aa4\u53d6\u51b3\u4e8e\u6700\u540e\u4e00\u4e2a\u7ed9\u51fa\u66f4\u65b0\u7684\u8282\u70b9\uff0c\u56e0\u6b64\u8fd9\u53ef\u7528\u4e8e\u63a7\u5236\u4e0b\u4e00\u4e2a\u6267\u884c\u54ea\u4e2a\u8282\u70b9\u3002\u8bf7\u53c2\u9605\u6b64\u5173\u4e8e\u65f6\u95f4\u65c5\u884c\u7684\u64cd\u4f5c\u6307\u5357\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5206\u53c9\u72b6\u6001\u7684\u4fe1\u606f\u3002</p> JavaScript <p>\u8c03\u7528 <code>updateState</code> \u65f6\u4f60\u53ef\u4ee5\u9009\u62e9\u6307\u5b9a\u7684\u6700\u540e\u4e00\u4ef6\u4e8b\u662f <code>asNode</code>\u3002\u5982\u679c\u4f60\u63d0\u4f9b\u4e86\u5b83\uff0c\u66f4\u65b0\u5c06\u88ab\u5e94\u7528\u4e3a\u597d\u50cf\u5b83\u6765\u81ea\u8282\u70b9 <code>asNode</code>\u3002\u5982\u679c\u672a\u63d0\u4f9b <code>asNode</code>\uff0c\u5b83\u5c06\u88ab\u8bbe\u7f6e\u4e3a\u6700\u540e\u4e00\u4e2a\u66f4\u65b0\u72b6\u6001\u7684\u8282\u70b9\uff08\u5982\u679c\u6ca1\u6709\u6b67\u4e49\uff09\u3002\u8fd9\u5f88\u91cd\u8981\u7684\u539f\u56e0\u662f\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u6b65\u9aa4\u53d6\u51b3\u4e8e\u6700\u540e\u4e00\u4e2a\u7ed9\u51fa\u66f4\u65b0\u7684\u8282\u70b9\uff0c\u56e0\u6b64\u8fd9\u53ef\u7528\u4e8e\u63a7\u5236\u4e0b\u4e00\u4e2a\u6267\u884c\u54ea\u4e2a\u8282\u70b9\u3002\u8bf7\u53c2\u9605\u6b64\u5173\u4e8e\u65f6\u95f4\u65c5\u884c\u7684\u64cd\u4f5c\u6307\u5357\u4e86\u89e3\u66f4\u591a\u5173\u4e8e\u5206\u53c9\u72b6\u6001\u7684\u4fe1\u606f\u3002</p> <p></p>","boost":2},{"location":"concepts/persistence/#_8","title":"\u8bb0\u5fc6\u5b58\u50a8","text":"<p>\u72b6\u6001\u6a21\u5f0f\u6307\u5b9a\u4e86\u5728\u56fe\u6267\u884c\u65f6\u586b\u5145\u7684\u4e00\u7ec4\u952e\u3002\u5982\u4e0a\u6240\u8ff0\uff0c\u72b6\u6001\u53ef\u4ee5\u7531\u68c0\u67e5\u70b9\u5668\u5728\u6bcf\u4e2a\u56fe\u6b65\u9aa4\u5199\u5165\u7ebf\u7a0b\uff0c\u4ece\u800c\u5b9e\u73b0\u72b6\u6001\u6301\u4e45\u5316\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u6211\u4eec\u60f3_\u8de8\u7ebf\u7a0b_\u4fdd\u7559\u4e00\u4e9b\u4fe1\u606f\u5462\uff1f\u8003\u8651\u804a\u5929\u673a\u5668\u4eba\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u60f3\u5728\u8be5\u7528\u6237\u7684_\u6240\u6709_\u804a\u5929\u5bf9\u8bdd\uff08\u5373\u7ebf\u7a0b\uff09\u4e2d\u4fdd\u7559\u5173\u4e8e\u7528\u6237\u7684\u7279\u5b9a\u4fe1\u606f\uff01</p> <p>\u4ec5\u4f7f\u7528\u68c0\u67e5\u70b9\u5668\uff0c\u6211\u4eec\u65e0\u6cd5\u8de8\u7ebf\u7a0b\u5171\u4eab\u4fe1\u606f\u3002\u8fd9\u4fc3\u4f7f\u9700\u8981 <code>Store</code> \u63a5\u53e3\u3002\u4f5c\u4e3a\u8bf4\u660e\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a <code>InMemoryStore</code> \u6765\u8de8\u7ebf\u7a0b\u5b58\u50a8\u5173\u4e8e\u7528\u6237\u7684\u4fe1\u606f\u3002\u6211\u4eec\u53ea\u9700\u50cf\u4ee5\u524d\u4e00\u6837\u7528\u68c0\u67e5\u70b9\u5668\u7f16\u8bd1\u6211\u4eec\u7684\u56fe\uff0c\u5e76\u4f7f\u7528\u6211\u4eec\u7684\u65b0 <code>in_memory_store</code> \u53d8\u91cf\u3002</p> <p>LangGraph API \u81ea\u52a8\u5904\u7406\u5b58\u50a8</p> <p>\u4f7f\u7528 LangGraph API \u65f6\uff0c\u4f60\u4e0d\u9700\u8981\u624b\u52a8\u5b9e\u73b0\u6216\u914d\u7f6e\u5b58\u50a8\u3002API \u4f1a\u5728\u5e55\u540e\u4e3a\u4f60\u5904\u7406\u6240\u6709\u5b58\u50a8\u57fa\u7840\u8bbe\u65bd\u3002</p>","boost":2},{"location":"concepts/persistence/#_9","title":"\u57fa\u672c\u7528\u6cd5","text":"<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u5728\u4e0d\u4f7f\u7528 LangGraph \u7684\u60c5\u51b5\u4e0b\u5355\u72ec\u5c55\u793a\u8fd9\u4e00\u70b9\u3002</p> Python <pre><code>from langgraph.store.memory import InMemoryStore\nin_memory_store = InMemoryStore()\n</code></pre> JavaScript <pre><code>import { MemoryStore } from \"@langchain/langgraph\";\n\nconst memoryStore = new MemoryStore();\n</code></pre> <p>\u8bb0\u5fc6\u901a\u8fc7 <code>tuple</code> \u8fdb\u884c\u547d\u540d\u7a7a\u95f4\u5212\u5206\uff0c\u5728\u8fd9\u4e2a\u7279\u5b9a\u793a\u4f8b\u4e2d\u5c06\u662f <code>(&lt;user_id&gt;, \"memories\")</code>\u3002\u547d\u540d\u7a7a\u95f4\u53ef\u4ee5\u662f\u4efb\u610f\u957f\u5ea6\u5e76\u8868\u793a\u4efb\u4f55\u5185\u5bb9\uff0c\u4e0d\u5fc5\u662f\u7528\u6237\u7279\u5b9a\u7684\u3002</p> Python <pre><code>user_id = \"1\"\nnamespace_for_memory = (user_id, \"memories\")\n</code></pre> JavaScript <pre><code>const userId = \"1\";\nconst namespaceForMemory = [userId, \"memories\"];\n</code></pre> <p>\u6211\u4eec\u4f7f\u7528 <code>store.put</code> \u65b9\u6cd5\u5c06\u8bb0\u5fc6\u4fdd\u5b58\u5230\u5b58\u50a8\u4e2d\u7684\u547d\u540d\u7a7a\u95f4\u3002\u5f53\u6211\u4eec\u8fd9\u6837\u505a\u65f6\uff0c\u6211\u4eec\u6307\u5b9a\u5982\u4e0a\u5b9a\u4e49\u7684\u547d\u540d\u7a7a\u95f4\uff0c\u4ee5\u53ca\u8bb0\u5fc6\u7684\u952e\u503c\u5bf9\uff1a\u952e\u53ea\u662f\u8bb0\u5fc6\u7684\u552f\u4e00\u6807\u8bc6\u7b26\uff08<code>memory_id</code>\uff09\uff0c\u503c\uff08\u4e00\u4e2a\u5b57\u5178\uff09\u662f\u8bb0\u5fc6\u672c\u8eab\u3002</p> Python <pre><code>memory_id = str(uuid.uuid4())\nmemory = {\"food_preference\" : \"I like pizza\"}\nin_memory_store.put(namespace_for_memory, memory_id, memory)\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\n\nconst memoryId = uuidv4();\nconst memory = { food_preference: \"I like pizza\" };\nawait memoryStore.put(namespaceForMemory, memoryId, memory);\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 <code>store.search</code> \u65b9\u6cd5\u8bfb\u53d6\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u8bb0\u5fc6\uff0c\u8fd9\u5c06\u8fd4\u56de\u7ed9\u5b9a\u7528\u6237\u7684\u6240\u6709\u8bb0\u5fc6\u4f5c\u4e3a\u5217\u8868\u3002\u6700\u8fd1\u7684\u8bb0\u5fc6\u662f\u5217\u8868\u4e2d\u7684\u6700\u540e\u4e00\u4e2a\u3002</p> Python <pre><code>memories = in_memory_store.search(namespace_for_memory)\nmemories[-1].dict()\n{'value': {'food_preference': 'I like pizza'},\n 'key': '07e0caf4-1631-47b7-b15f-65515d4c1843',\n 'namespace': ['1', 'memories'],\n 'created_at': '2024-10-02T17:22:31.590602+00:00',\n 'updated_at': '2024-10-02T17:22:31.590605+00:00'}\n</code></pre> <p>\u6bcf\u79cd\u8bb0\u5fc6\u7c7b\u578b\u90fd\u662f\u4e00\u4e2a Python \u7c7b\uff08<code>Item</code>\uff09\uff0c\u5177\u6709\u67d0\u4e9b\u5c5e\u6027\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0a\u6240\u793a\u7684 <code>.dict</code> \u5c06\u5176\u8f6c\u6362\u4e3a\u5b57\u5178\u6765\u8bbf\u95ee\u5b83\u3002</p> <p>\u5b83\u5177\u6709\u7684\u5c5e\u6027\u662f\uff1a</p> <ul> <li><code>value</code>\uff1a\u6b64\u8bb0\u5fc6\u7684\u503c\uff08\u672c\u8eab\u662f\u4e00\u4e2a\u5b57\u5178\uff09</li> <li><code>key</code>\uff1a\u6b64\u547d\u540d\u7a7a\u95f4\u4e2d\u6b64\u8bb0\u5fc6\u7684\u552f\u4e00\u952e</li> <li><code>namespace</code>\uff1a\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u6b64\u8bb0\u5fc6\u7c7b\u578b\u7684\u547d\u540d\u7a7a\u95f4</li> <li><code>created_at</code>\uff1a\u6b64\u8bb0\u5fc6\u521b\u5efa\u65f6\u7684\u65f6\u95f4\u6233</li> <li><code>updated_at</code>\uff1a\u6b64\u8bb0\u5fc6\u66f4\u65b0\u65f6\u7684\u65f6\u95f4\u6233</li> </ul> JavaScript <pre><code>const memories = await memoryStore.search(namespaceForMemory);\nmemories[memories.length - 1];\n\n// {\n//   value: { food_preference: 'I like pizza' },\n//   key: '07e0caf4-1631-47b7-b15f-65515d4c1843',\n//   namespace: ['1', 'memories'],\n//   createdAt: '2024-10-02T17:22:31.590602+00:00',\n//   updatedAt: '2024-10-02T17:22:31.590605+00:00'\n// }\n</code></pre> <p>\u5b83\u5177\u6709\u7684\u5c5e\u6027\u662f\uff1a</p> <ul> <li><code>value</code>\uff1a\u6b64\u8bb0\u5fc6\u7684\u503c</li> <li><code>key</code>\uff1a\u6b64\u547d\u540d\u7a7a\u95f4\u4e2d\u6b64\u8bb0\u5fc6\u7684\u552f\u4e00\u952e</li> <li><code>namespace</code>\uff1a\u5b57\u7b26\u4e32\u5217\u8868\uff0c\u6b64\u8bb0\u5fc6\u7c7b\u578b\u7684\u547d\u540d\u7a7a\u95f4</li> <li><code>createdAt</code>\uff1a\u6b64\u8bb0\u5fc6\u521b\u5efa\u65f6\u7684\u65f6\u95f4\u6233</li> <li><code>updatedAt</code>\uff1a\u6b64\u8bb0\u5fc6\u66f4\u65b0\u65f6\u7684\u65f6\u95f4\u6233</li> </ul>","boost":2},{"location":"concepts/persistence/#_10","title":"\u8bed\u4e49\u641c\u7d22","text":"<p>\u9664\u4e86\u7b80\u5355\u68c0\u7d22\u4e4b\u5916\uff0c\u5b58\u50a8\u8fd8\u652f\u6301\u8bed\u4e49\u641c\u7d22\uff0c\u5141\u8bb8\u4f60\u6839\u636e\u542b\u4e49\u800c\u4e0d\u662f\u7cbe\u786e\u5339\u914d\u6765\u67e5\u627e\u8bb0\u5fc6\u3002\u8981\u542f\u7528\u6b64\u529f\u80fd\uff0c\u8bf7\u4f7f\u7528\u5d4c\u5165\u6a21\u578b\u914d\u7f6e\u5b58\u50a8\uff1a</p> Python <pre><code>from langchain.embeddings import init_embeddings\n\nstore = InMemoryStore(\n    index={\n        \"embed\": init_embeddings(\"openai:text-embedding-3-small\"),  # Embedding provider\n        \"dims\": 1536,                              # Embedding dimensions\n        \"fields\": [\"food_preference\", \"$\"]              # Fields to embed\n    }\n)\n</code></pre> JavaScript <pre><code>import { OpenAIEmbeddings } from \"@langchain/openai\";\n\nconst store = new InMemoryStore({\n  index: {\n    embeddings: new OpenAIEmbeddings({ model: \"text-embedding-3-small\" }),\n    dims: 1536,\n    fields: [\"food_preference\", \"$\"], // Fields to embed\n  },\n});\n</code></pre> <p>\u73b0\u5728\u641c\u7d22\u65f6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u81ea\u7136\u8bed\u8a00\u67e5\u8be2\u6765\u67e5\u627e\u76f8\u5173\u8bb0\u5fc6\uff1a</p> Python <pre><code># Find memories about food preferences\n# (This can be done after putting memories into the store)\nmemories = store.search(\n    namespace_for_memory,\n    query=\"What does the user like to eat?\",\n    limit=3  # Return top 3 matches\n)\n</code></pre> JavaScript <pre><code>// Find memories about food preferences\n// (This can be done after putting memories into the store)\nconst memories = await store.search(namespaceForMemory, {\n  query: \"What does the user like to eat?\",\n  limit: 3, // Return top 3 matches\n});\n</code></pre> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e <code>fields</code> \u53c2\u6570\u6216\u5728\u5b58\u50a8\u8bb0\u5fc6\u65f6\u6307\u5b9a <code>index</code> \u53c2\u6570\u6765\u63a7\u5236\u54ea\u4e9b\u90e8\u5206\u7684\u8bb0\u5fc6\u88ab\u5d4c\u5165\uff1a</p> Python <pre><code># Store with specific fields to embed\nstore.put(\n    namespace_for_memory,\n    str(uuid.uuid4()),\n    {\n        \"food_preference\": \"I love Italian cuisine\",\n        \"context\": \"Discussing dinner plans\"\n    },\n    index=[\"food_preference\"]  # Only embed \"food_preferences\" field\n)\n\n# Store without embedding (still retrievable, but not searchable)\nstore.put(\n    namespace_for_memory,\n    str(uuid.uuid4()),\n    {\"system_info\": \"Last updated: 2024-01-01\"},\n    index=False\n)\n</code></pre> JavaScript <pre><code>// Store with specific fields to embed\nawait store.put(\n  namespaceForMemory,\n  uuidv4(),\n  {\n    food_preference: \"I love Italian cuisine\",\n    context: \"Discussing dinner plans\",\n  },\n  { index: [\"food_preference\"] } // Only embed \"food_preferences\" field\n);\n\n// Store without embedding (still retrievable, but not searchable)\nawait store.put(\n  namespaceForMemory,\n  uuidv4(),\n  { system_info: \"Last updated: 2024-01-01\" },\n  { index: false }\n);\n</code></pre>","boost":2},{"location":"concepts/persistence/#langgraph","title":"\u5728 LangGraph \u4e2d\u4f7f\u7528","text":"Python <p>\u6709\u4e86\u8fd9\u4e9b\u51c6\u5907\uff0c\u6211\u4eec\u5728 LangGraph \u4e2d\u4f7f\u7528 <code>in_memory_store</code>\u3002<code>in_memory_store</code> \u4e0e\u68c0\u67e5\u70b9\u5668\u534f\u540c\u5de5\u4f5c\uff1a\u68c0\u67e5\u70b9\u5668\u5c06\u72b6\u6001\u4fdd\u5b58\u5230\u7ebf\u7a0b\uff0c\u5982\u4e0a\u6240\u8ff0\uff0c\u800c <code>in_memory_store</code> \u5141\u8bb8\u6211\u4eec\u5b58\u50a8\u4efb\u610f\u4fe1\u606f\u4ee5\u4fbf_\u8de8_\u7ebf\u7a0b\u8bbf\u95ee\u3002\u6211\u4eec\u6309\u5982\u4e0b\u65b9\u5f0f\u7528\u68c0\u67e5\u70b9\u5668\u548c <code>in_memory_store</code> \u7f16\u8bd1\u56fe\u3002</p> <pre><code>from langgraph.checkpoint.memory import InMemorySaver\n\n# We need this because we want to enable threads (conversations)\ncheckpointer = InMemorySaver()\n\n# ... Define the graph ...\n\n# Compile the graph with the checkpointer and store\ngraph = graph.compile(checkpointer=checkpointer, store=in_memory_store)\n</code></pre> JavaScript <p>\u6709\u4e86\u8fd9\u4e9b\u51c6\u5907\uff0c\u6211\u4eec\u5728 LangGraph \u4e2d\u4f7f\u7528 <code>memoryStore</code>\u3002<code>memoryStore</code> \u4e0e\u68c0\u67e5\u70b9\u5668\u534f\u540c\u5de5\u4f5c\uff1a\u68c0\u67e5\u70b9\u5668\u5c06\u72b6\u6001\u4fdd\u5b58\u5230\u7ebf\u7a0b\uff0c\u5982\u4e0a\u6240\u8ff0\uff0c\u800c <code>memoryStore</code> \u5141\u8bb8\u6211\u4eec\u5b58\u50a8\u4efb\u610f\u4fe1\u606f\u4ee5\u4fbf_\u8de8_\u7ebf\u7a0b\u8bbf\u95ee\u3002\u6211\u4eec\u6309\u5982\u4e0b\u65b9\u5f0f\u7528\u68c0\u67e5\u70b9\u5668\u548c <code>memoryStore</code> \u7f16\u8bd1\u56fe\u3002</p> <pre><code>import { MemorySaver } from \"@langchain/langgraph\";\n\n// We need this because we want to enable threads (conversations)\nconst checkpointer = new MemorySaver();\n\n// ... Define the graph ...\n\n// Compile the graph with the checkpointer and store\nconst graph = workflow.compile({ checkpointer, store: memoryStore });\n</code></pre> <p>\u6211\u4eec\u7528 <code>thread_id</code> \u8c03\u7528\u56fe\uff0c\u50cf\u4ee5\u524d\u4e00\u6837\uff0c\u8fd8\u6709 <code>user_id</code>\uff0c\u6211\u4eec\u5c06\u7528\u5b83\u6765\u4e3a\u8fd9\u4e2a\u7279\u5b9a\u7528\u6237\u7684\u8bb0\u5fc6\u8fdb\u884c\u547d\u540d\u7a7a\u95f4\u5212\u5206\uff0c\u5982\u4e0a\u6240\u793a\u3002</p> Python <pre><code># Invoke the graph\nuser_id = \"1\"\nconfig = {\"configurable\": {\"thread_id\": \"1\", \"user_id\": user_id}}\n\n# First let's just say hi to the AI\nfor update in graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"hi\"}]}, config, stream_mode=\"updates\"\n):\n    print(update)\n</code></pre> JavaScript <pre><code>// Invoke the graph\nconst userId = \"1\";\nconst config = { configurable: { thread_id: \"1\", user_id: userId } };\n\n// First let's just say hi to the AI\nfor await (const update of await graph.stream(\n  { messages: [{ role: \"user\", content: \"hi\" }] },\n  { ...config, streamMode: \"updates\" }\n)) {\n  console.log(update);\n}\n</code></pre> Python <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5c06 <code>store: BaseStore</code> \u548c <code>config: RunnableConfig</code> \u4f5c\u4e3a\u8282\u70b9\u53c2\u6570\u4f20\u9012\u6765\u5728_\u4efb\u4f55\u8282\u70b9_\u4e2d\u8bbf\u95ee <code>in_memory_store</code> \u548c <code>user_id</code>\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u5728\u8282\u70b9\u4e2d\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u6765\u67e5\u627e\u76f8\u5173\u8bb0\u5fc6\uff1a</p> <pre><code>def update_memory(state: MessagesState, config: RunnableConfig, *, store: BaseStore):\n\n    # Get the user id from the config\n    user_id = config[\"configurable\"][\"user_id\"]\n\n    # Namespace the memory\n    namespace = (user_id, \"memories\")\n\n    # ... Analyze conversation and create a new memory\n\n    # Create a new memory ID\n    memory_id = str(uuid.uuid4())\n\n    # We create a new memory\n    store.put(namespace, memory_id, {\"memory\": memory})\n</code></pre> JavaScript <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bbf\u95ee <code>config</code> \u548c <code>store</code> \u4f5c\u4e3a\u8282\u70b9\u53c2\u6570\u6765\u5728_\u4efb\u4f55\u8282\u70b9_\u4e2d\u8bbf\u95ee <code>memoryStore</code> \u548c <code>user_id</code>\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u5728\u8282\u70b9\u4e2d\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u6765\u67e5\u627e\u76f8\u5173\u8bb0\u5fc6\uff1a</p> <pre><code>import {\n  LangGraphRunnableConfig,\n  BaseStore,\n  MessagesZodState,\n} from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst updateMemory = async (\n  state: z.infer&lt;typeof MessagesZodState&gt;,\n  config: LangGraphRunnableConfig,\n  store: BaseStore\n) =&gt; {\n  // Get the user id from the config\n  const userId = config.configurable?.user_id;\n\n  // Namespace the memory\n  const namespace = [userId, \"memories\"];\n\n  // ... Analyze conversation and create a new memory\n\n  // Create a new memory ID\n  const memoryId = uuidv4();\n\n  // We create a new memory\n  await store.put(namespace, memoryId, { memory });\n};\n</code></pre> <p>\u5982\u4e0a\u6240\u793a\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728\u4efb\u4f55\u8282\u70b9\u4e2d\u8bbf\u95ee\u5b58\u50a8\u5e76\u4f7f\u7528 <code>store.search</code> \u65b9\u6cd5\u83b7\u53d6\u8bb0\u5fc6\u3002\u56de\u60f3\u4e00\u4e0b\uff0c\u8bb0\u5fc6\u4f5c\u4e3a\u53ef\u4ee5\u8f6c\u6362\u4e3a\u5b57\u5178\u7684\u5bf9\u8c61\u5217\u8868\u8fd4\u56de\u3002</p> Python <pre><code>memories[-1].dict()\n{'value': {'food_preference': 'I like pizza'},\n 'key': '07e0caf4-1631-47b7-b15f-65515d4c1843',\n 'namespace': ['1', 'memories'],\n 'created_at': '2024-10-02T17:22:31.590602+00:00',\n 'updated_at': '2024-10-02T17:22:31.590605+00:00'}\n</code></pre> JavaScript <pre><code>memories[memories.length - 1];\n// {\n//   value: { food_preference: 'I like pizza' },\n//   key: '07e0caf4-1631-47b7-b15f-65515d4c1843',\n//   namespace: ['1', 'memories'],\n//   createdAt: '2024-10-02T17:22:31.590602+00:00',\n//   updatedAt: '2024-10-02T17:22:31.590605+00:00'\n// }\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u8bbf\u95ee\u8bb0\u5fc6\u5e76\u5728\u6a21\u578b\u8c03\u7528\u4e2d\u4f7f\u7528\u5b83\u4eec\u3002</p> Python <pre><code>def call_model(state: MessagesState, config: RunnableConfig, *, store: BaseStore):\n    # Get the user id from the config\n    user_id = config[\"configurable\"][\"user_id\"]\n\n    # Namespace the memory\n    namespace = (user_id, \"memories\")\n\n    # Search based on the most recent message\n    memories = store.search(\n        namespace,\n        query=state[\"messages\"][-1].content,\n        limit=3\n    )\n    info = \"\\n\".join([d.value[\"memory\"] for d in memories])\n\n    # ... Use memories in the model call\n</code></pre> JavaScript <pre><code>const callModel = async (\n  state: z.infer&lt;typeof MessagesZodState&gt;,\n  config: LangGraphRunnableConfig,\n  store: BaseStore\n) =&gt; {\n  // Get the user id from the config\n  const userId = config.configurable?.user_id;\n\n  // Namespace the memory\n  const namespace = [userId, \"memories\"];\n\n  // Search based on the most recent message\n  const memories = await store.search(namespace, {\n    query: state.messages[state.messages.length - 1].content,\n    limit: 3,\n  });\n  const info = memories.map((d) =&gt; d.value.memory).join(\"\\n\");\n\n  // ... Use memories in the model call\n};\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u65b0\u7ebf\u7a0b\uff0c\u53ea\u8981 <code>user_id</code> \u76f8\u540c\uff0c\u6211\u4eec\u4ecd\u7136\u53ef\u4ee5\u8bbf\u95ee\u76f8\u540c\u7684\u8bb0\u5fc6\u3002</p> Python <pre><code># Invoke the graph\nconfig = {\"configurable\": {\"thread_id\": \"2\", \"user_id\": \"1\"}}\n\n# Let's say hi again\nfor update in graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"hi, tell me about my memories\"}]}, config, stream_mode=\"updates\"\n):\n    print(update)\n</code></pre> JavaScript <pre><code>// Invoke the graph\nconst config = { configurable: { thread_id: \"2\", user_id: \"1\" } };\n\n// Let's say hi again\nfor await (const update of await graph.stream(\n  { messages: [{ role: \"user\", content: \"hi, tell me about my memories\" }] },\n  { ...config, streamMode: \"updates\" }\n)) {\n  console.log(update);\n}\n</code></pre> <p>\u5f53\u6211\u4eec\u4f7f\u7528 LangGraph Platform \u65f6\uff0c\u65e0\u8bba\u662f\u672c\u5730\uff08\u4f8b\u5982\uff0c\u5728 LangGraph Studio \u4e2d\uff09\u8fd8\u662f\u4f7f\u7528 LangGraph Platform\uff0c\u57fa\u7840\u5b58\u50a8\u9ed8\u8ba4\u53ef\u7528\uff0c\u4e0d\u9700\u8981\u5728\u56fe\u7f16\u8bd1\u671f\u95f4\u6307\u5b9a\u3002\u4f46\u662f\uff0c\u8981\u542f\u7528\u8bed\u4e49\u641c\u7d22\uff0c\u4f60**\u786e\u5b9e**\u9700\u8981\u5728 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u914d\u7f6e\u7d22\u5f15\u8bbe\u7f6e\u3002\u4f8b\u5982\uff1a</p> <pre><code>{\n    ...\n    \"store\": {\n        \"index\": {\n            \"embed\": \"openai:text-embeddings-3-small\",\n            \"dims\": 1536,\n            \"fields\": [\"$\"]\n        }\n    }\n}\n</code></pre> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\u548c\u914d\u7f6e\u9009\u9879\uff0c\u8bf7\u53c2\u9605\u90e8\u7f72\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/persistence/#_11","title":"\u68c0\u67e5\u70b9\u5668\u5e93","text":"<p>\u5728\u5e95\u5c42\uff0c\u68c0\u67e5\u70b9\u7531\u7b26\u5408 @[BaseCheckpointSaver] \u63a5\u53e3\u7684\u68c0\u67e5\u70b9\u5668\u5bf9\u8c61\u63d0\u4f9b\u652f\u6301\u3002LangGraph \u63d0\u4f9b\u4e86\u51e0\u79cd\u68c0\u67e5\u70b9\u5668\u5b9e\u73b0\uff0c\u5168\u90e8\u901a\u8fc7\u72ec\u7acb\u7684\u53ef\u5b89\u88c5\u5e93\u5b9e\u73b0\uff1a</p> Python <ul> <li><code>langgraph-checkpoint</code>\uff1a\u68c0\u67e5\u70b9\u5668\u4fdd\u5b58\u5668\uff08@[BaseCheckpointSaver]\uff09\u548c\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u63a5\u53e3\uff08@[SerializerProtocol][]\uff09\u7684\u57fa\u672c\u63a5\u53e3\u3002\u5305\u62ec\u7528\u4e8e\u5b9e\u9a8c\u7684\u5185\u5b58\u68c0\u67e5\u70b9\u5668\u5b9e\u73b0\uff08@[InMemorySaver][]\uff09\u3002LangGraph \u81ea\u5e26 <code>langgraph-checkpoint</code>\u3002</li> <li><code>langgraph-checkpoint-sqlite</code>\uff1a\u4f7f\u7528 SQLite \u6570\u636e\u5e93\u7684 LangGraph \u68c0\u67e5\u70b9\u5668\u5b9e\u73b0\uff08@[SqliteSaver][] / @[AsyncSqliteSaver]\uff09\u3002\u9002\u5408\u5b9e\u9a8c\u548c\u672c\u5730\u5de5\u4f5c\u6d41\u3002\u9700\u8981\u5355\u72ec\u5b89\u88c5\u3002</li> <li><code>langgraph-checkpoint-postgres</code>\uff1a\u4f7f\u7528 Postgres \u6570\u636e\u5e93\u7684\u9ad8\u7ea7\u68c0\u67e5\u70b9\u5668\uff08@[PostgresSaver][] / @[AsyncPostgresSaver]\uff09\uff0c\u5728 LangGraph Platform \u4e2d\u4f7f\u7528\u3002\u9002\u5408\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u3002\u9700\u8981\u5355\u72ec\u5b89\u88c5\u3002</li> </ul> JavaScript <ul> <li><code>@langchain/langgraph-checkpoint</code>\uff1a\u68c0\u67e5\u70b9\u5668\u4fdd\u5b58\u5668\uff08@[BaseCheckpointSaver][]\uff09\u548c\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u63a5\u53e3\uff08@[SerializerProtocol][]\uff09\u7684\u57fa\u672c\u63a5\u53e3\u3002\u5305\u62ec\u7528\u4e8e\u5b9e\u9a8c\u7684\u5185\u5b58\u68c0\u67e5\u70b9\u5668\u5b9e\u73b0\uff08@[MemorySaver]\uff09\u3002LangGraph \u81ea\u5e26 <code>@langchain/langgraph-checkpoint</code>\u3002</li> <li><code>@langchain/langgraph-checkpoint-sqlite</code>\uff1a\u4f7f\u7528 SQLite \u6570\u636e\u5e93\u7684 LangGraph \u68c0\u67e5\u70b9\u5668\u5b9e\u73b0\uff08@[SqliteSaver]\uff09\u3002\u9002\u5408\u5b9e\u9a8c\u548c\u672c\u5730\u5de5\u4f5c\u6d41\u3002\u9700\u8981\u5355\u72ec\u5b89\u88c5\u3002</li> <li><code>@langchain/langgraph-checkpoint-postgres</code>\uff1a\u4f7f\u7528 Postgres \u6570\u636e\u5e93\u7684\u9ad8\u7ea7\u68c0\u67e5\u70b9\u5668\uff08@[PostgresSaver]\uff09\uff0c\u5728 LangGraph Platform \u4e2d\u4f7f\u7528\u3002\u9002\u5408\u5728\u751f\u4ea7\u4e2d\u4f7f\u7528\u3002\u9700\u8981\u5355\u72ec\u5b89\u88c5\u3002</li> </ul>","boost":2},{"location":"concepts/persistence/#_12","title":"\u68c0\u67e5\u70b9\u5668\u63a5\u53e3","text":"Python <p>\u6bcf\u4e2a\u68c0\u67e5\u70b9\u5668\u90fd\u7b26\u5408 @[BaseCheckpointSaver] \u63a5\u53e3\u5e76\u5b9e\u73b0\u4ee5\u4e0b\u65b9\u6cd5\uff1a</p> <ul> <li><code>.put</code> - \u5b58\u50a8\u68c0\u67e5\u70b9\u53ca\u5176\u914d\u7f6e\u548c\u5143\u6570\u636e\u3002</li> <li><code>.put_writes</code> - \u5b58\u50a8\u94fe\u63a5\u5230\u68c0\u67e5\u70b9\u7684\u4e2d\u95f4\u5199\u5165\uff08\u5373\u5f85\u5904\u7406\u5199\u5165\uff09\u3002</li> <li><code>.get_tuple</code> - \u4f7f\u7528\u7ed9\u5b9a\u914d\u7f6e\uff08<code>thread_id</code> \u548c <code>checkpoint_id</code>\uff09\u83b7\u53d6\u68c0\u67e5\u70b9\u5143\u7ec4\u3002\u8fd9\u7528\u4e8e\u5728 <code>graph.get_state()</code> \u4e2d\u586b\u5145 <code>StateSnapshot</code>\u3002</li> <li><code>.list</code> - \u5217\u51fa\u5339\u914d\u7ed9\u5b9a\u914d\u7f6e\u548c\u8fc7\u6ee4\u6761\u4ef6\u7684\u68c0\u67e5\u70b9\u3002\u8fd9\u7528\u4e8e\u5728 <code>graph.get_state_history()</code> \u4e2d\u586b\u5145\u72b6\u6001\u5386\u53f2</li> </ul> <p>\u5982\u679c\u68c0\u67e5\u70b9\u5668\u4e0e\u5f02\u6b65\u56fe\u6267\u884c\u4e00\u8d77\u4f7f\u7528\uff08\u5373\u901a\u8fc7 <code>.ainvoke</code>\u3001<code>.astream</code>\u3001<code>.abatch</code> \u6267\u884c\u56fe\uff09\uff0c\u5c06\u4f7f\u7528\u4e0a\u8ff0\u65b9\u6cd5\u7684\u5f02\u6b65\u7248\u672c\uff08<code>.aput</code>\u3001<code>.aput_writes</code>\u3001<code>.aget_tuple</code>\u3001<code>.alist</code>\uff09\u3002</p> <p>Note</p> <p>\u8981\u5f02\u6b65\u8fd0\u884c\u56fe\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>InMemorySaver</code>\uff0c\u6216 Sqlite/Postgres \u68c0\u67e5\u70b9\u5668\u7684\u5f02\u6b65\u7248\u672c\u2014\u2014<code>AsyncSqliteSaver</code> / <code>AsyncPostgresSaver</code> \u68c0\u67e5\u70b9\u5668\u3002</p> JavaScript <p>\u6bcf\u4e2a\u68c0\u67e5\u70b9\u5668\u90fd\u7b26\u5408 @[BaseCheckpointSaver][] \u63a5\u53e3\u5e76\u5b9e\u73b0\u4ee5\u4e0b\u65b9\u6cd5\uff1a</p> <ul> <li><code>.put</code> - \u5b58\u50a8\u68c0\u67e5\u70b9\u53ca\u5176\u914d\u7f6e\u548c\u5143\u6570\u636e\u3002</li> <li><code>.putWrites</code> - \u5b58\u50a8\u94fe\u63a5\u5230\u68c0\u67e5\u70b9\u7684\u4e2d\u95f4\u5199\u5165\uff08\u5373\u5f85\u5904\u7406\u5199\u5165\uff09\u3002</li> <li><code>.getTuple</code> - \u4f7f\u7528\u7ed9\u5b9a\u914d\u7f6e\uff08<code>thread_id</code> \u548c <code>checkpoint_id</code>\uff09\u83b7\u53d6\u68c0\u67e5\u70b9\u5143\u7ec4\u3002\u8fd9\u7528\u4e8e\u5728 <code>graph.getState()</code> \u4e2d\u586b\u5145 <code>StateSnapshot</code>\u3002</li> <li><code>.list</code> - \u5217\u51fa\u5339\u914d\u7ed9\u5b9a\u914d\u7f6e\u548c\u8fc7\u6ee4\u6761\u4ef6\u7684\u68c0\u67e5\u70b9\u3002\u8fd9\u7528\u4e8e\u5728 <code>graph.getStateHistory()</code> \u4e2d\u586b\u5145\u72b6\u6001\u5386\u53f2</li> </ul>","boost":2},{"location":"concepts/persistence/#_13","title":"\u5e8f\u5217\u5316\u5668","text":"<p>\u5f53\u68c0\u67e5\u70b9\u5668\u4fdd\u5b58\u56fe\u72b6\u6001\u65f6\uff0c\u5b83\u4eec\u9700\u8981\u5e8f\u5217\u5316\u72b6\u6001\u4e2d\u7684\u901a\u9053\u503c\u3002\u8fd9\u901a\u8fc7\u5e8f\u5217\u5316\u5668\u5bf9\u8c61\u5b8c\u6210\u3002</p> Python <p><code>langgraph_checkpoint</code> \u5b9a\u4e49\u4e86\u5b9e\u73b0\u5e8f\u5217\u5316\u5668\u7684@[\u534f\u8bae][SerializerProtocol]\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u5b9e\u73b0\uff08@[JsonPlusSerializer][]\uff09\uff0c\u5b83\u5904\u7406\u5404\u79cd\u7c7b\u578b\uff0c\u5305\u62ec LangChain \u548c LangGraph \u539f\u8bed\u3001\u65e5\u671f\u65f6\u95f4\u3001\u679a\u4e3e\u7b49\u3002</p>","boost":2},{"location":"concepts/persistence/#pickle","title":"\u4f7f\u7528 <code>pickle</code> \u5e8f\u5217\u5316","text":"<p>\u9ed8\u8ba4\u5e8f\u5217\u5316\u5668 @[<code>JsonPlusSerializer</code>][] \u5728\u5e95\u5c42\u4f7f\u7528 ormsgpack \u548c JSON\uff0c\u8fd9\u4e0d\u9002\u5408\u6240\u6709\u7c7b\u578b\u7684\u5bf9\u8c61\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u4e3a\u5f53\u524d\u4e0d\u53d7\u6211\u4eec\u7684 msgpack \u7f16\u7801\u5668\u652f\u6301\u7684\u5bf9\u8c61\uff08\u5982 Pandas \u6570\u636e\u6846\uff09\u56de\u9000\u5230 pickle\uff0c \u4f60\u53ef\u4ee5\u4f7f\u7528 <code>JsonPlusSerializer</code> \u7684 <code>pickle_fallback</code> \u53c2\u6570\uff1a</p> <pre><code>from langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.checkpoint.serde.jsonplus import JsonPlusSerializer\n\n# ... Define the graph ...\ngraph.compile(\n    checkpointer=InMemorySaver(serde=JsonPlusSerializer(pickle_fallback=True))\n)\n</code></pre>","boost":2},{"location":"concepts/persistence/#_14","title":"\u52a0\u5bc6","text":"<p>\u68c0\u67e5\u70b9\u5668\u53ef\u4ee5\u9009\u62e9\u52a0\u5bc6\u6240\u6709\u6301\u4e45\u5316\u72b6\u6001\u3002\u8981\u542f\u7528\u6b64\u529f\u80fd\uff0c\u8bf7\u5c06 @[<code>EncryptedSerializer</code>][] \u7684\u5b9e\u4f8b\u4f20\u9012\u7ed9\u4efb\u4f55 <code>BaseCheckpointSaver</code> \u5b9e\u73b0\u7684 <code>serde</code> \u53c2\u6570\u3002\u521b\u5efa\u52a0\u5bc6\u5e8f\u5217\u5316\u5668\u7684\u6700\u7b80\u5355\u65b9\u6cd5\u662f\u901a\u8fc7 @[<code>from_pycryptodome_aes</code>][]\uff0c\u5b83\u4ece <code>LANGGRAPH_AES_KEY</code> \u73af\u5883\u53d8\u91cf\u8bfb\u53d6 AES \u5bc6\u94a5\uff08\u6216\u63a5\u53d7 <code>key</code> \u53c2\u6570\uff09\uff1a</p> <pre><code>import sqlite3\n\nfrom langgraph.checkpoint.serde.encrypted import EncryptedSerializer\nfrom langgraph.checkpoint.sqlite import SqliteSaver\n\nserde = EncryptedSerializer.from_pycryptodome_aes()  # reads LANGGRAPH_AES_KEY\ncheckpointer = SqliteSaver(sqlite3.connect(\"checkpoint.db\"), serde=serde)\n</code></pre> <pre><code>from langgraph.checkpoint.serde.encrypted import EncryptedSerializer\nfrom langgraph.checkpoint.postgres import PostgresSaver\n\nserde = EncryptedSerializer.from_pycryptodome_aes()\ncheckpointer = PostgresSaver.from_conn_string(\"postgresql://...\", serde=serde)\ncheckpointer.setup()\n</code></pre> <p>\u5728 LangGraph Platform \u4e0a\u8fd0\u884c\u65f6\uff0c\u53ea\u8981\u5b58\u5728 <code>LANGGRAPH_AES_KEY</code>\uff0c\u52a0\u5bc6\u5c31\u4f1a\u81ea\u52a8\u542f\u7528\uff0c\u6240\u4ee5\u4f60\u53ea\u9700\u8981\u63d0\u4f9b\u73af\u5883\u53d8\u91cf\u3002\u5176\u4ed6\u52a0\u5bc6\u65b9\u6848\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0 @[<code>CipherProtocol</code>][] \u5e76\u5c06\u5176\u63d0\u4f9b\u7ed9 <code>EncryptedSerializer</code> \u6765\u4f7f\u7528\u3002</p> JavaScript <p><code>@langchain/langgraph-checkpoint</code> \u5b9a\u4e49\u4e86\u5b9e\u73b0\u5e8f\u5217\u5316\u5668\u7684\u534f\u8bae\u5e76\u63d0\u4f9b\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u5b9e\u73b0\uff0c\u5b83\u5904\u7406\u5404\u79cd\u7c7b\u578b\uff0c\u5305\u62ec LangChain \u548c LangGraph \u539f\u8bed\u3001\u65e5\u671f\u65f6\u95f4\u3001\u679a\u4e3e\u7b49\u3002</p>","boost":2},{"location":"concepts/persistence/#_15","title":"\u529f\u80fd","text":"","boost":2},{"location":"concepts/persistence/#_16","title":"\u4eba\u673a\u534f\u540c","text":"<p>\u9996\u5148\uff0c\u68c0\u67e5\u70b9\u5668\u901a\u8fc7\u5141\u8bb8\u4eba\u7c7b\u68c0\u67e5\u3001\u4e2d\u65ad\u548c\u6279\u51c6\u56fe\u6b65\u9aa4\u6765\u4fc3\u8fdb\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u3002\u68c0\u67e5\u70b9\u5668\u5bf9\u4e8e\u8fd9\u4e9b\u5de5\u4f5c\u6d41\u662f\u5fc5\u9700\u7684\uff0c\u56e0\u4e3a\u4eba\u7c7b\u5fc5\u987b\u80fd\u591f\u5728\u4efb\u4f55\u65f6\u95f4\u70b9\u67e5\u770b\u56fe\u7684\u72b6\u6001\uff0c\u5e76\u4e14\u56fe\u5fc5\u987b\u80fd\u591f\u5728\u4eba\u7c7b\u5bf9\u72b6\u6001\u8fdb\u884c\u4efb\u4f55\u66f4\u65b0\u540e\u6062\u590d\u6267\u884c\u3002\u6709\u5173\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605\u64cd\u4f5c\u6307\u5357\u3002</p>","boost":2},{"location":"concepts/persistence/#_17","title":"\u8bb0\u5fc6","text":"<p>\u5176\u6b21\uff0c\u68c0\u67e5\u70b9\u5668\u5141\u8bb8\u4ea4\u4e92\u4e4b\u95f4\u7684\"\u8bb0\u5fc6\"\u3002\u5728\u91cd\u590d\u4eba\u7c7b\u4ea4\u4e92\uff08\u5982\u5bf9\u8bdd\uff09\u7684\u60c5\u51b5\u4e0b\uff0c\u4efb\u4f55\u540e\u7eed\u6d88\u606f\u90fd\u53ef\u4ee5\u53d1\u9001\u5230\u8be5\u7ebf\u7a0b\uff0c\u8be5\u7ebf\u7a0b\u5c06\u4fdd\u7559\u5bf9\u5148\u524d\u6d88\u606f\u7684\u8bb0\u5fc6\u3002\u6709\u5173\u5982\u4f55\u4f7f\u7528\u68c0\u67e5\u70b9\u5668\u6dfb\u52a0\u548c\u7ba1\u7406\u5bf9\u8bdd\u8bb0\u5fc6\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6dfb\u52a0\u8bb0\u5fc6\u3002</p>","boost":2},{"location":"concepts/persistence/#_18","title":"\u65f6\u95f4\u65c5\u884c","text":"<p>\u7b2c\u4e09\uff0c\u68c0\u67e5\u70b9\u5668\u5141\u8bb8\"\u65f6\u95f4\u65c5\u884c\"\uff0c\u5141\u8bb8\u7528\u6237\u91cd\u653e\u5148\u524d\u7684\u56fe\u6267\u884c\u4ee5\u5ba1\u67e5\u548c/\u6216\u8c03\u8bd5\u7279\u5b9a\u56fe\u6b65\u9aa4\u3002\u6b64\u5916\uff0c\u68c0\u67e5\u70b9\u5668\u4f7f\u5f97\u53ef\u4ee5\u5728\u4efb\u610f\u68c0\u67e5\u70b9\u5206\u53c9\u56fe\u72b6\u6001\u4ee5\u63a2\u7d22\u66ff\u4ee3\u8f68\u8ff9\u3002</p>","boost":2},{"location":"concepts/persistence/#_19","title":"\u5bb9\u9519","text":"<p>\u6700\u540e\uff0c\u68c0\u67e5\u70b9\u63d0\u4f9b\u5bb9\u9519\u548c\u9519\u8bef\u6062\u590d\uff1a\u5982\u679c\u4e00\u4e2a\u6216\u591a\u4e2a\u8282\u70b9\u5728\u7ed9\u5b9a\u8d85\u6b65\u5931\u8d25\uff0c\u4f60\u53ef\u4ee5\u4ece\u6700\u540e\u4e00\u4e2a\u6210\u529f\u7684\u6b65\u9aa4\u91cd\u65b0\u542f\u52a8\u56fe\u3002\u6b64\u5916\uff0c\u5f53\u56fe\u8282\u70b9\u5728\u7ed9\u5b9a\u8d85\u6b65\u6267\u884c\u4e2d\u9014\u5931\u8d25\u65f6\uff0cLangGraph \u4f1a\u5b58\u50a8\u5728\u8be5\u8d85\u6b65\u6210\u529f\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u8282\u70b9\u7684\u5f85\u5904\u7406\u68c0\u67e5\u70b9\u5199\u5165\uff0c\u4ee5\u4fbf\u6bcf\u5f53\u6211\u4eec\u4ece\u8be5\u8d85\u6b65\u6062\u590d\u56fe\u6267\u884c\u65f6\uff0c\u6211\u4eec\u4e0d\u4f1a\u91cd\u65b0\u8fd0\u884c\u6210\u529f\u7684\u8282\u70b9\u3002</p>","boost":2},{"location":"concepts/persistence/#_20","title":"\u5f85\u5904\u7406\u5199\u5165","text":"<p>\u6b64\u5916\uff0c\u5f53\u56fe\u8282\u70b9\u5728\u7ed9\u5b9a\u8d85\u6b65\u6267\u884c\u4e2d\u9014\u5931\u8d25\u65f6\uff0cLangGraph \u4f1a\u5b58\u50a8\u5728\u8be5\u8d85\u6b65\u6210\u529f\u5b8c\u6210\u7684\u4efb\u4f55\u5176\u4ed6\u8282\u70b9\u7684\u5f85\u5904\u7406\u68c0\u67e5\u70b9\u5199\u5165\uff0c\u4ee5\u4fbf\u6bcf\u5f53\u6211\u4eec\u4ece\u8be5\u8d85\u6b65\u6062\u590d\u56fe\u6267\u884c\u65f6\uff0c\u6211\u4eec\u4e0d\u4f1a\u91cd\u65b0\u8fd0\u884c\u6210\u529f\u7684\u8282\u70b9\u3002</p>","boost":2},{"location":"concepts/plans/","title":"LangGraph Platform \u8ba1\u5212","text":"","boost":2},{"location":"concepts/plans/#_1","title":"\u6982\u8ff0","text":"<p>LangGraph Platform \u662f\u4e00\u4e2a\u7528\u4e8e\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u90e8\u7f72\u667a\u80fd\u4ee3\u7406\u5e94\u7528\u7a0b\u5e8f\u7684\u89e3\u51b3\u65b9\u6848\u3002 \u4f7f\u7528\u5b83\u6709\u4e09\u79cd\u4e0d\u540c\u7684\u8ba1\u5212\u3002</p> <ul> <li>Developer(\u5f00\u53d1\u8005): \u6240\u6709 LangSmith \u7528\u6237\u90fd\u53ef\u4ee5\u8bbf\u95ee\u6b64\u8ba1\u5212\u3002\u4f60\u53ea\u9700\u521b\u5efa LangSmith \u8d26\u6237\u5373\u53ef\u6ce8\u518c\u6b64\u8ba1\u5212\u3002\u8fd9\u4f7f\u4f60\u53ef\u4ee5\u8bbf\u95ee\u672c\u5730\u90e8\u7f72\u9009\u9879\u3002</li> <li>Plus: \u6240\u6709\u62e5\u6709 Plus \u8d26\u6237\u7684 LangSmith \u7528\u6237\u90fd\u53ef\u4ee5\u8bbf\u95ee\u6b64\u8ba1\u5212\u3002\u4f60\u53ea\u9700\u5c06 LangSmith \u8d26\u6237\u5347\u7ea7\u5230 Plus \u8ba1\u5212\u7c7b\u578b\u5373\u53ef\u6ce8\u518c\u6b64\u8ba1\u5212\u3002\u8fd9\u4f7f\u4f60\u53ef\u4ee5\u8bbf\u95ee Cloud \u90e8\u7f72\u9009\u9879\u3002</li> <li>Enterprise(\u4f01\u4e1a\u7248): \u8fd9\u4e0e LangSmith \u8ba1\u5212\u5206\u5f00\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8054\u7cfb\u6211\u4eec\u7684\u9500\u552e\u56e2\u961f\u6ce8\u518c\u6b64\u8ba1\u5212\u3002\u8fd9\u4f7f\u4f60\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u90e8\u7f72\u9009\u9879\u3002</li> </ul>","boost":2},{"location":"concepts/plans/#_2","title":"\u8ba1\u5212\u8be6\u60c5","text":"Developer Plus Enterprise \u90e8\u7f72\u9009\u9879 \u672c\u5730 Cloud SaaS <ul><li>Cloud SaaS</li><li>\u81ea\u6258\u7ba1\u6570\u636e\u5e73\u9762</li><li>\u81ea\u6258\u7ba1\u63a7\u5236\u5e73\u9762</li><li>\u72ec\u7acb\u5bb9\u5668</li></ul> \u4f7f\u7528 \u514d\u8d39 \u53c2\u89c1\u5b9a\u4ef7 \u81ea\u5b9a\u4e49 \u7528\u4e8e\u68c0\u7d22\u548c\u66f4\u65b0\u72b6\u6001\u548c\u5bf9\u8bdd\u5386\u53f2\u7684 API \u2705 \u2705 \u2705 \u7528\u4e8e\u68c0\u7d22\u548c\u66f4\u65b0\u957f\u671f\u8bb0\u5fc6\u7684 API \u2705 \u2705 \u2705 \u6c34\u5e73\u53ef\u6269\u5c55\u7684\u4efb\u52a1\u961f\u5217\u548c\u670d\u52a1\u5668 \u2705 \u2705 \u2705 \u8f93\u51fa\u548c\u4e2d\u95f4\u6b65\u9aa4\u7684\u5b9e\u65f6\u6d41\u5f0f\u4f20\u8f93 \u2705 \u2705 \u2705 \u52a9\u624b API(LangGraph \u5e94\u7528\u7684\u53ef\u914d\u7f6e\u6a21\u677f) \u2705 \u2705 \u2705 \u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6 -- \u2705 \u2705 \u7528\u4e8e\u539f\u578b\u8bbe\u8ba1\u7684 LangGraph Studio \u2705 \u2705 \u2705 \u7528\u4e8e\u8c03\u7528 LangGraph API \u7684\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743 -- \u5373\u5c06\u63a8\u51fa! \u5373\u5c06\u63a8\u51fa! \u51cf\u5c11 LLM API \u6d41\u91cf\u7684\u667a\u80fd\u7f13\u5b58 -- \u5373\u5c06\u63a8\u51fa! \u5373\u5c06\u63a8\u51fa! \u7528\u4e8e\u72b6\u6001\u7684\u53d1\u5e03/\u8ba2\u9605 API -- \u5373\u5c06\u63a8\u51fa! \u5373\u5c06\u63a8\u51fa! \u8c03\u5ea6\u4f18\u5148\u7ea7 -- \u5373\u5c06\u63a8\u51fa! \u5373\u5c06\u63a8\u51fa! <p>\u6709\u5173\u5b9a\u4ef7\u4fe1\u606f,\u8bf7\u53c2\u9605 LangGraph Platform \u5b9a\u4ef7\u3002</p>","boost":2},{"location":"concepts/plans/#_3","title":"\u76f8\u5173","text":"<p>\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605:</p> <ul> <li>\u90e8\u7f72\u9009\u9879\u6982\u5ff5\u6307\u5357</li> <li>LangGraph Platform \u5b9a\u4ef7</li> <li>LangSmith \u8ba1\u5212</li> </ul>","boost":2},{"location":"concepts/pregel/","title":"LangGraph \u8fd0\u884c\u65f6","text":"Python <p>@[Pregel] \u5b9e\u73b0\u4e86 LangGraph \u7684\u8fd0\u884c\u65f6\uff0c\u7ba1\u7406 LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u3002</p> <p>\u7f16\u8bd1 @[StateGraph][] \u6216\u521b\u5efa @[entrypoint][] \u4f1a\u4ea7\u751f\u4e00\u4e2a\u53ef\u4ee5\u7528\u8f93\u5165\u8c03\u7528\u7684 @[Pregel] \u5b9e\u4f8b\u3002</p> JavaScript <p>@[Pregel] \u5b9e\u73b0\u4e86 LangGraph \u7684\u8fd0\u884c\u65f6\uff0c\u7ba1\u7406 LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u3002</p> <p>\u7f16\u8bd1 @[StateGraph][] \u6216\u521b\u5efa @[entrypoint][] \u4f1a\u4ea7\u751f\u4e00\u4e2a\u53ef\u4ee5\u7528\u8f93\u5165\u8c03\u7528\u7684 @[Pregel] \u5b9e\u4f8b\u3002</p> <p>\u672c\u6307\u5357\u4ece\u9ad8\u5c42\u6b21\u89e3\u91ca\u8fd0\u884c\u65f6\uff0c\u5e76\u63d0\u4f9b\u76f4\u63a5\u4f7f\u7528 Pregel \u5b9e\u73b0\u5e94\u7528\u7a0b\u5e8f\u7684\u8bf4\u660e\u3002</p> Python <p>\u6ce8\u610f\uff1a @[Pregel] \u8fd0\u884c\u65f6\u4ee5 Google \u7684 Pregel \u7b97\u6cd5\u547d\u540d\uff0c\u8be5\u7b97\u6cd5\u63cf\u8ff0\u4e86\u4e00\u79cd\u4f7f\u7528\u56fe\u8fdb\u884c\u5927\u89c4\u6a21\u5e76\u884c\u8ba1\u7b97\u7684\u9ad8\u6548\u65b9\u6cd5\u3002</p> JavaScript <p>\u6ce8\u610f\uff1a @[Pregel] \u8fd0\u884c\u65f6\u4ee5 Google \u7684 Pregel \u7b97\u6cd5\u547d\u540d\uff0c\u8be5\u7b97\u6cd5\u63cf\u8ff0\u4e86\u4e00\u79cd\u4f7f\u7528\u56fe\u8fdb\u884c\u5927\u89c4\u6a21\u5e76\u884c\u8ba1\u7b97\u7684\u9ad8\u6548\u65b9\u6cd5\u3002</p>","boost":2},{"location":"concepts/pregel/#_1","title":"\u6982\u8ff0","text":"<p>\u5728 LangGraph \u4e2d\uff0cPregel \u5c06\u53c2\u4e0e\u8005\u548c**\u901a\u9053**\u7ec4\u5408\u6210\u5355\u4e2a\u5e94\u7528\u7a0b\u5e8f\u3002\u53c2\u4e0e\u8005**\u4ece\u901a\u9053\u8bfb\u53d6\u6570\u636e\u5e76\u5411\u901a\u9053\u5199\u5165\u6570\u636e\u3002Pregel \u6309\u7167 **Pregel \u7b97\u6cd5/**\u6279\u91cf\u540c\u6b65\u5e76\u884c**\u6a21\u578b\u5c06\u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u7ec4\u7ec7\u6210\u591a\u4e2a\u6b65\u9aa4\u3002</p> <p>\u6bcf\u4e2a\u6b65\u9aa4\u5305\u542b\u4e09\u4e2a\u9636\u6bb5\uff1a</p> <ul> <li>\u8ba1\u5212\uff1a\u786e\u5b9a\u6b64\u6b65\u9aa4\u8981\u6267\u884c\u54ea\u4e9b**\u53c2\u4e0e\u8005**\u3002\u4f8b\u5982\uff0c\u5728\u7b2c\u4e00\u6b65\u4e2d\uff0c\u9009\u62e9\u8ba2\u9605\u7279\u6b8a**\u8f93\u5165**\u901a\u9053\u7684**\u53c2\u4e0e\u8005**\uff1b\u5728\u540e\u7eed\u6b65\u9aa4\u4e2d\uff0c\u9009\u62e9\u8ba2\u9605\u4e0a\u4e00\u6b65\u66f4\u65b0\u7684\u901a\u9053\u7684**\u53c2\u4e0e\u8005**\u3002</li> <li>\u6267\u884c\uff1a\u5e76\u884c\u6267\u884c\u6240\u6709\u9009\u5b9a\u7684**\u53c2\u4e0e\u8005**\uff0c\u76f4\u5230\u5168\u90e8\u5b8c\u6210\u3001\u4e00\u4e2a\u5931\u8d25\u6216\u8fbe\u5230\u8d85\u65f6\u3002\u5728\u6b64\u9636\u6bb5\uff0c\u901a\u9053\u66f4\u65b0\u5bf9\u53c2\u4e0e\u8005\u4e0d\u53ef\u89c1\uff0c\u76f4\u5230\u4e0b\u4e00\u6b65\u3002</li> <li>\u66f4\u65b0\uff1a\u7528\u6b64\u6b65\u9aa4\u4e2d**\u53c2\u4e0e\u8005**\u5199\u5165\u7684\u503c\u66f4\u65b0\u901a\u9053\u3002</li> </ul> <p>\u91cd\u590d\u76f4\u5230\u6ca1\u6709**\u53c2\u4e0e\u8005**\u88ab\u9009\u4e2d\u6267\u884c\uff0c\u6216\u8fbe\u5230\u6700\u5927\u6b65\u9aa4\u6570\u3002</p>","boost":2},{"location":"concepts/pregel/#_2","title":"\u53c2\u4e0e\u8005","text":"<p>\u53c2\u4e0e\u8005**\u662f\u4e00\u4e2a <code>PregelNode</code>\u3002\u5b83\u8ba2\u9605\u901a\u9053\uff0c\u4ece\u4e2d\u8bfb\u53d6\u6570\u636e\uff0c\u5e76\u5411\u5176\u5199\u5165\u6570\u636e\u3002\u5b83\u53ef\u4ee5\u88ab\u89c6\u4e3a Pregel \u7b97\u6cd5\u4e2d\u7684**\u53c2\u4e0e\u8005\u3002<code>PregelNodes</code> \u5b9e\u73b0 LangChain \u7684 Runnable \u63a5\u53e3\u3002</p>","boost":2},{"location":"concepts/pregel/#_3","title":"\u901a\u9053","text":"<p>\u901a\u9053\u7528\u4e8e\u53c2\u4e0e\u8005\uff08PregelNodes\uff09\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u6bcf\u4e2a\u901a\u9053\u90fd\u6709\u4e00\u4e2a\u503c\u7c7b\u578b\u3001\u4e00\u4e2a\u66f4\u65b0\u7c7b\u578b\u548c\u4e00\u4e2a\u66f4\u65b0\u51fd\u6570\u2014\u2014\u5b83\u63a5\u53d7\u4e00\u7cfb\u5217\u66f4\u65b0\u5e76\u4fee\u6539\u5b58\u50a8\u7684\u503c\u3002\u901a\u9053\u53ef\u7528\u4e8e\u5c06\u6570\u636e\u4ece\u4e00\u4e2a\u94fe\u53d1\u9001\u5230\u53e6\u4e00\u4e2a\u94fe\uff0c\u6216\u5728\u672a\u6765\u6b65\u9aa4\u4e2d\u5c06\u6570\u636e\u4ece\u94fe\u53d1\u9001\u7ed9\u81ea\u8eab\u3002LangGraph \u63d0\u4f9b\u4e86\u591a\u4e2a\u5185\u7f6e\u901a\u9053\uff1a</p> Python <ul> <li>@[LastValue][]\uff1a\u9ed8\u8ba4\u901a\u9053\uff0c\u5b58\u50a8\u53d1\u9001\u5230\u901a\u9053\u7684\u6700\u540e\u4e00\u4e2a\u503c\uff0c\u5bf9\u8f93\u5165\u548c\u8f93\u51fa\u503c\u6216\u4ece\u4e00\u6b65\u5411\u4e0b\u4e00\u6b65\u53d1\u9001\u6570\u636e\u5f88\u6709\u7528\u3002</li> <li>@[Topic][]\uff1a\u53ef\u914d\u7f6e\u7684 PubSub \u4e3b\u9898\uff0c\u5bf9\u5728**\u53c2\u4e0e\u8005**\u4e4b\u95f4\u53d1\u9001\u591a\u4e2a\u503c\u6216\u7d2f\u79ef\u8f93\u51fa\u5f88\u6709\u7528\u3002\u53ef\u914d\u7f6e\u4e3a\u53bb\u91cd\u503c\u6216\u5728\u591a\u4e2a\u6b65\u9aa4\u8fc7\u7a0b\u4e2d\u7d2f\u79ef\u503c\u3002</li> <li>@[BinaryOperatorAggregate][]\uff1a\u5b58\u50a8\u4e00\u4e2a\u6301\u4e45\u503c\uff0c\u901a\u8fc7\u5bf9\u5f53\u524d\u503c\u548c\u53d1\u9001\u5230\u901a\u9053\u7684\u6bcf\u4e2a\u66f4\u65b0\u5e94\u7528\u4e8c\u5143\u8fd0\u7b97\u7b26\u6765\u66f4\u65b0\uff0c\u5bf9\u5728\u591a\u4e2a\u6b65\u9aa4\u4e2d\u8ba1\u7b97\u805a\u5408\u5f88\u6709\u7528\uff1b\u4f8b\u5982\uff0c<code>total = BinaryOperatorAggregate(int, operator.add)</code></li> </ul> JavaScript <ul> <li>@[LastValue]\uff1a\u9ed8\u8ba4\u901a\u9053\uff0c\u5b58\u50a8\u53d1\u9001\u5230\u901a\u9053\u7684\u6700\u540e\u4e00\u4e2a\u503c\uff0c\u5bf9\u8f93\u5165\u548c\u8f93\u51fa\u503c\u6216\u4ece\u4e00\u6b65\u5411\u4e0b\u4e00\u6b65\u53d1\u9001\u6570\u636e\u5f88\u6709\u7528\u3002</li> <li>@[Topic]\uff1a\u53ef\u914d\u7f6e\u7684 PubSub \u4e3b\u9898\uff0c\u5bf9\u5728**\u53c2\u4e0e\u8005**\u4e4b\u95f4\u53d1\u9001\u591a\u4e2a\u503c\u6216\u7d2f\u79ef\u8f93\u51fa\u5f88\u6709\u7528\u3002\u53ef\u914d\u7f6e\u4e3a\u53bb\u91cd\u503c\u6216\u5728\u591a\u4e2a\u6b65\u9aa4\u8fc7\u7a0b\u4e2d\u7d2f\u79ef\u503c\u3002</li> <li>@[BinaryOperatorAggregate]\uff1a\u5b58\u50a8\u4e00\u4e2a\u6301\u4e45\u503c\uff0c\u901a\u8fc7\u5bf9\u5f53\u524d\u503c\u548c\u53d1\u9001\u5230\u901a\u9053\u7684\u6bcf\u4e2a\u66f4\u65b0\u5e94\u7528\u4e8c\u5143\u8fd0\u7b97\u7b26\u6765\u66f4\u65b0\uff0c\u5bf9\u5728\u591a\u4e2a\u6b65\u9aa4\u4e2d\u8ba1\u7b97\u805a\u5408\u5f88\u6709\u7528\uff1b\u4f8b\u5982\uff0c<code>total = BinaryOperatorAggregate(int, operator.add)</code></li> </ul>","boost":2},{"location":"concepts/pregel/#_4","title":"\u793a\u4f8b","text":"Python <p>\u867d\u7136\u5927\u591a\u6570\u7528\u6237\u5c06\u901a\u8fc7 @[StateGraph][] API \u6216 @[entrypoint][] \u88c5\u9970\u5668\u4e0e Pregel \u4ea4\u4e92\uff0c\u4f46\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0e Pregel \u4ea4\u4e92\u3002</p> JavaScript <p>\u867d\u7136\u5927\u591a\u6570\u7528\u6237\u5c06\u901a\u8fc7 @[StateGraph] API \u6216 @[entrypoint] \u88c5\u9970\u5668\u4e0e Pregel \u4ea4\u4e92\uff0c\u4f46\u4e5f\u53ef\u4ee5\u76f4\u63a5\u4e0e Pregel \u4ea4\u4e92\u3002</p> <p>\u4ee5\u4e0b\u662f\u51e0\u4e2a\u4e0d\u540c\u7684\u793a\u4f8b\uff0c\u8ba9\u4f60\u4e86\u89e3 Pregel API\u3002</p> \u5355\u8282\u70b9\u591a\u8282\u70b9TopicBinaryOperatorAggregate\u5faa\u73af Python <pre><code>from langgraph.channels import EphemeralValue\nfrom langgraph.pregel import Pregel, NodeBuilder\n\nnode1 = (\n    NodeBuilder().subscribe_only(\"a\")\n    .do(lambda x: x + x)\n    .write_to(\"b\")\n)\n\napp = Pregel(\n    nodes={\"node1\": node1},\n    channels={\n        \"a\": EphemeralValue(str),\n        \"b\": EphemeralValue(str),\n    },\n    input_channels=[\"a\"],\n    output_channels=[\"b\"],\n)\n\napp.invoke({\"a\": \"foo\"})\n</code></pre> <pre><code>{'b': 'foofoo'}\n</code></pre> JavaScript <pre><code>import { EphemeralValue } from \"@langchain/langgraph/channels\";\nimport { Pregel, NodeBuilder } from \"@langchain/langgraph/pregel\";\n\nconst node1 = new NodeBuilder()\n  .subscribeOnly(\"a\")\n  .do((x: string) =&gt; x + x)\n  .writeTo(\"b\");\n\nconst app = new Pregel({\n  nodes: { node1 },\n  channels: {\n    a: new EphemeralValue&lt;string&gt;(),\n    b: new EphemeralValue&lt;string&gt;(),\n  },\n  inputChannels: [\"a\"],\n  outputChannels: [\"b\"],\n});\n\nawait app.invoke({ a: \"foo\" });\n</code></pre> <pre><code>{ b: 'foofoo' }\n</code></pre> Python <pre><code>from langgraph.channels import LastValue, EphemeralValue\nfrom langgraph.pregel import Pregel, NodeBuilder\n\nnode1 = (\n    NodeBuilder().subscribe_only(\"a\")\n    .do(lambda x: x + x)\n    .write_to(\"b\")\n)\n\nnode2 = (\n    NodeBuilder().subscribe_only(\"b\")\n    .do(lambda x: x + x)\n    .write_to(\"c\")\n)\n\n\napp = Pregel(\n    nodes={\"node1\": node1, \"node2\": node2},\n    channels={\n        \"a\": EphemeralValue(str),\n        \"b\": LastValue(str),\n        \"c\": EphemeralValue(str),\n    },\n    input_channels=[\"a\"],\n    output_channels=[\"b\", \"c\"],\n)\n\napp.invoke({\"a\": \"foo\"})\n</code></pre> <pre><code>{'b': 'foofoo', 'c': 'foofoofoofoo'}\n</code></pre> JavaScript <pre><code>import { LastValue, EphemeralValue } from \"@langchain/langgraph/channels\";\nimport { Pregel, NodeBuilder } from \"@langchain/langgraph/pregel\";\n\nconst node1 = new NodeBuilder()\n  .subscribeOnly(\"a\")\n  .do((x: string) =&gt; x + x)\n  .writeTo(\"b\");\n\nconst node2 = new NodeBuilder()\n  .subscribeOnly(\"b\")\n  .do((x: string) =&gt; x + x)\n  .writeTo(\"c\");\n\nconst app = new Pregel({\n  nodes: { node1, node2 },\n  channels: {\n    a: new EphemeralValue&lt;string&gt;(),\n    b: new LastValue&lt;string&gt;(),\n    c: new EphemeralValue&lt;string&gt;(),\n  },\n  inputChannels: [\"a\"],\n  outputChannels: [\"b\", \"c\"],\n});\n\nawait app.invoke({ a: \"foo\" });\n</code></pre> <pre><code>{ b: 'foofoo', c: 'foofoofoofoo' }\n</code></pre> Python <pre><code>from langgraph.channels import EphemeralValue, Topic\nfrom langgraph.pregel import Pregel, NodeBuilder\n\nnode1 = (\n    NodeBuilder().subscribe_only(\"a\")\n    .do(lambda x: x + x)\n    .write_to(\"b\", \"c\")\n)\n\nnode2 = (\n    NodeBuilder().subscribe_to(\"b\")\n    .do(lambda x: x[\"b\"] + x[\"b\"])\n    .write_to(\"c\")\n)\n\napp = Pregel(\n    nodes={\"node1\": node1, \"node2\": node2},\n    channels={\n        \"a\": EphemeralValue(str),\n        \"b\": EphemeralValue(str),\n        \"c\": Topic(str, accumulate=True),\n    },\n    input_channels=[\"a\"],\n    output_channels=[\"c\"],\n)\n\napp.invoke({\"a\": \"foo\"})\n</code></pre> <pre><code>{'c': ['foofoo', 'foofoofoofoo']}\n</code></pre> JavaScript <pre><code>import { EphemeralValue, Topic } from \"@langchain/langgraph/channels\";\nimport { Pregel, NodeBuilder } from \"@langchain/langgraph/pregel\";\n\nconst node1 = new NodeBuilder()\n  .subscribeOnly(\"a\")\n  .do((x: string) =&gt; x + x)\n  .writeTo(\"b\", \"c\");\n\nconst node2 = new NodeBuilder()\n  .subscribeTo(\"b\")\n  .do((x: { b: string }) =&gt; x.b + x.b)\n  .writeTo(\"c\");\n\nconst app = new Pregel({\n  nodes: { node1, node2 },\n  channels: {\n    a: new EphemeralValue&lt;string&gt;(),\n    b: new EphemeralValue&lt;string&gt;(),\n    c: new Topic&lt;string&gt;({ accumulate: true }),\n  },\n  inputChannels: [\"a\"],\n  outputChannels: [\"c\"],\n});\n\nawait app.invoke({ a: \"foo\" });\n</code></pre> <pre><code>{ c: ['foofoo', 'foofoofoofoo'] }\n</code></pre> <p>\u6b64\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 BinaryOperatorAggregate \u901a\u9053\u5b9e\u73b0\u5f52\u7ea6\u5668\u3002</p> Python <pre><code>from langgraph.channels import EphemeralValue, BinaryOperatorAggregate\nfrom langgraph.pregel import Pregel, NodeBuilder\n\n\nnode1 = (\n    NodeBuilder().subscribe_only(\"a\")\n    .do(lambda x: x + x)\n    .write_to(\"b\", \"c\")\n)\n\nnode2 = (\n    NodeBuilder().subscribe_only(\"b\")\n    .do(lambda x: x + x)\n    .write_to(\"c\")\n)\n\ndef reducer(current, update):\n    if current:\n        return current + \" | \" + update\n    else:\n        return update\n\napp = Pregel(\n    nodes={\"node1\": node1, \"node2\": node2},\n    channels={\n        \"a\": EphemeralValue(str),\n        \"b\": EphemeralValue(str),\n        \"c\": BinaryOperatorAggregate(str, operator=reducer),\n    },\n    input_channels=[\"a\"],\n    output_channels=[\"c\"],\n)\n\napp.invoke({\"a\": \"foo\"})\n</code></pre> JavaScript <pre><code>import { EphemeralValue, BinaryOperatorAggregate } from \"@langchain/langgraph/channels\";\nimport { Pregel, NodeBuilder } from \"@langchain/langgraph/pregel\";\n\nconst node1 = new NodeBuilder()\n  .subscribeOnly(\"a\")\n  .do((x: string) =&gt; x + x)\n  .writeTo(\"b\", \"c\");\n\nconst node2 = new NodeBuilder()\n  .subscribeOnly(\"b\")\n  .do((x: string) =&gt; x + x)\n  .writeTo(\"c\");\n\nconst reducer = (current: string, update: string) =&gt; {\n  if (current) {\n    return current + \" | \" + update;\n  } else {\n    return update;\n  }\n};\n\nconst app = new Pregel({\n  nodes: { node1, node2 },\n  channels: {\n    a: new EphemeralValue&lt;string&gt;(),\n    b: new EphemeralValue&lt;string&gt;(),\n    c: new BinaryOperatorAggregate&lt;string&gt;({ operator: reducer }),\n  },\n  inputChannels: [\"a\"],\n  outputChannels: [\"c\"],\n});\n\nawait app.invoke({ a: \"foo\" });\n</code></pre> Python <p>\u6b64\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u5728\u56fe\u4e2d\u5f15\u5165\u5faa\u73af\uff0c\u901a\u8fc7\u8ba9\u94fe\u5199\u5165\u5b83\u8ba2\u9605\u7684\u901a\u9053\u3002\u6267\u884c\u5c06\u7ee7\u7eed\uff0c\u76f4\u5230\u5411\u901a\u9053\u5199\u5165 <code>None</code> \u503c\u3002</p> <pre><code>from langgraph.channels import EphemeralValue\nfrom langgraph.pregel import Pregel, NodeBuilder, ChannelWriteEntry\n\nexample_node = (\n    NodeBuilder().subscribe_only(\"value\")\n    .do(lambda x: x + x if len(x) &lt; 10 else None)\n    .write_to(ChannelWriteEntry(\"value\", skip_none=True))\n)\n\napp = Pregel(\n    nodes={\"example_node\": example_node},\n    channels={\n        \"value\": EphemeralValue(str),\n    },\n    input_channels=[\"value\"],\n    output_channels=[\"value\"],\n)\n\napp.invoke({\"value\": \"a\"})\n</code></pre> <pre><code>{'value': 'aaaaaaaaaaaaaaaa'}\n</code></pre> JavaScript <p>\u6b64\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u5728\u56fe\u4e2d\u5f15\u5165\u5faa\u73af\uff0c\u901a\u8fc7\u8ba9\u94fe\u5199\u5165\u5b83\u8ba2\u9605\u7684\u901a\u9053\u3002\u6267\u884c\u5c06\u7ee7\u7eed\uff0c\u76f4\u5230\u5411\u901a\u9053\u5199\u5165 <code>null</code> \u503c\u3002</p> <pre><code>import { EphemeralValue } from \"@langchain/langgraph/channels\";\nimport { Pregel, NodeBuilder, ChannelWriteEntry } from \"@langchain/langgraph/pregel\";\n\nconst exampleNode = new NodeBuilder()\n  .subscribeOnly(\"value\")\n  .do((x: string) =&gt; x.length &lt; 10 ? x + x : null)\n  .writeTo(new ChannelWriteEntry(\"value\", { skipNone: true }));\n\nconst app = new Pregel({\n  nodes: { exampleNode },\n  channels: {\n    value: new EphemeralValue&lt;string&gt;(),\n  },\n  inputChannels: [\"value\"],\n  outputChannels: [\"value\"],\n});\n\nawait app.invoke({ value: \"a\" });\n</code></pre> <pre><code>{ value: 'aaaaaaaaaaaaaaaa' }\n</code></pre>","boost":2},{"location":"concepts/pregel/#api","title":"\u9ad8\u7ea7 API","text":"<p>LangGraph \u63d0\u4f9b\u4e24\u4e2a\u9ad8\u7ea7 API \u6765\u521b\u5efa Pregel \u5e94\u7528\u7a0b\u5e8f\uff1aStateGraph\uff08\u56fe API\uff09\u548c\u51fd\u6570\u5f0f API\u3002</p> StateGraph\uff08\u56fe API\uff09\u51fd\u6570\u5f0f API Python <p>@[StateGraph\uff08\u56fe API\uff09][StateGraph] \u662f\u4e00\u4e2a\u66f4\u9ad8\u7ea7\u7684\u62bd\u8c61\uff0c\u7b80\u5316\u4e86 Pregel \u5e94\u7528\u7a0b\u5e8f\u7684\u521b\u5efa\u3002\u5b83\u5141\u8bb8\u4f60\u5b9a\u4e49\u8282\u70b9\u548c\u8fb9\u7684\u56fe\u3002\u5f53\u4f60\u7f16\u8bd1\u56fe\u65f6\uff0cStateGraph API \u4f1a\u81ea\u52a8\u4e3a\u4f60\u521b\u5efa Pregel \u5e94\u7528\u7a0b\u5e8f\u3002</p> <pre><code>from typing import TypedDict, Optional\n\nfrom langgraph.constants import START\nfrom langgraph.graph import StateGraph\n\nclass Essay(TypedDict):\n    topic: str\n    content: Optional[str]\n    score: Optional[float]\n\ndef write_essay(essay: Essay):\n    return {\n        \"content\": f\"Essay about {essay['topic']}\",\n    }\n\ndef score_essay(essay: Essay):\n    return {\n        \"score\": 10\n    }\n\nbuilder = StateGraph(Essay)\nbuilder.add_node(write_essay)\nbuilder.add_node(score_essay)\nbuilder.add_edge(START, \"write_essay\")\n\n# Compile the graph.\n# This will return a Pregel instance.\ngraph = builder.compile()\n</code></pre> JavaScript <p>@[StateGraph\uff08\u56fe API\uff09][StateGraph] \u662f\u4e00\u4e2a\u66f4\u9ad8\u7ea7\u7684\u62bd\u8c61\uff0c\u7b80\u5316\u4e86 Pregel \u5e94\u7528\u7a0b\u5e8f\u7684\u521b\u5efa\u3002\u5b83\u5141\u8bb8\u4f60\u5b9a\u4e49\u8282\u70b9\u548c\u8fb9\u7684\u56fe\u3002\u5f53\u4f60\u7f16\u8bd1\u56fe\u65f6\uff0cStateGraph API \u4f1a\u81ea\u52a8\u4e3a\u4f60\u521b\u5efa Pregel \u5e94\u7528\u7a0b\u5e8f\u3002</p> <pre><code>import { START, StateGraph } from \"@langchain/langgraph\";\n\ninterface Essay {\n  topic: string;\n  content?: string;\n  score?: number;\n}\n\nconst writeEssay = (essay: Essay) =&gt; {\n  return {\n    content: `Essay about ${essay.topic}`,\n  };\n};\n\nconst scoreEssay = (essay: Essay) =&gt; {\n  return {\n    score: 10\n  };\n};\n\nconst builder = new StateGraph&lt;Essay&gt;({\n  channels: {\n    topic: null,\n    content: null,\n    score: null,\n  }\n})\n  .addNode(\"writeEssay\", writeEssay)\n  .addNode(\"scoreEssay\", scoreEssay)\n  .addEdge(START, \"writeEssay\");\n\n// Compile the graph.\n// This will return a Pregel instance.\nconst graph = builder.compile();\n</code></pre> <p>\u7f16\u8bd1\u540e\u7684 Pregel \u5b9e\u4f8b\u5c06\u4e0e\u8282\u70b9\u548c\u901a\u9053\u5217\u8868\u5173\u8054\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u6253\u5370\u6765\u68c0\u67e5\u8282\u70b9\u548c\u901a\u9053\u3002</p> Python <pre><code>print(graph.nodes)\n</code></pre> <p>\u4f60\u5c06\u770b\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9\uff1a</p> <pre><code>{'__start__': &lt;langgraph.pregel.read.PregelNode at 0x7d05e3ba1810&gt;,\n 'write_essay': &lt;langgraph.pregel.read.PregelNode at 0x7d05e3ba14d0&gt;,\n 'score_essay': &lt;langgraph.pregel.read.PregelNode at 0x7d05e3ba1710&gt;}\n</code></pre> <pre><code>print(graph.channels)\n</code></pre> <p>\u4f60\u5e94\u8be5\u770b\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9</p> <pre><code>{'topic': &lt;langgraph.channels.last_value.LastValue at 0x7d05e3294d80&gt;,\n 'content': &lt;langgraph.channels.last_value.LastValue at 0x7d05e3295040&gt;,\n 'score': &lt;langgraph.channels.last_value.LastValue at 0x7d05e3295980&gt;,\n '__start__': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e3297e00&gt;,\n 'write_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e32960c0&gt;,\n 'score_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e2d8ab80&gt;,\n 'branch:__start__:__self__:write_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e32941c0&gt;,\n 'branch:__start__:__self__:score_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e2d88800&gt;,\n 'branch:write_essay:__self__:write_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e3295ec0&gt;,\n 'branch:write_essay:__self__:score_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e2d8ac00&gt;,\n 'branch:score_essay:__self__:write_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e2d89700&gt;,\n 'branch:score_essay:__self__:score_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e2d8b400&gt;,\n 'start:write_essay': &lt;langgraph.channels.ephemeral_value.EphemeralValue at 0x7d05e2d8b280&gt;}\n</code></pre> JavaScript <pre><code>console.log(graph.nodes);\n</code></pre> <p>\u4f60\u5c06\u770b\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9\uff1a</p> <pre><code>{\n  __start__: PregelNode { ... },\n  writeEssay: PregelNode { ... },\n  scoreEssay: PregelNode { ... }\n}\n</code></pre> <pre><code>console.log(graph.channels);\n</code></pre> <p>\u4f60\u5e94\u8be5\u770b\u5230\u7c7b\u4f3c\u8fd9\u6837\u7684\u5185\u5bb9</p> <pre><code>{\n  topic: LastValue { ... },\n  content: LastValue { ... },\n  score: LastValue { ... },\n  __start__: EphemeralValue { ... },\n  writeEssay: EphemeralValue { ... },\n  scoreEssay: EphemeralValue { ... },\n  'branch:__start__:__self__:writeEssay': EphemeralValue { ... },\n  'branch:__start__:__self__:scoreEssay': EphemeralValue { ... },\n  'branch:writeEssay:__self__:writeEssay': EphemeralValue { ... },\n  'branch:writeEssay:__self__:scoreEssay': EphemeralValue { ... },\n  'branch:scoreEssay:__self__:writeEssay': EphemeralValue { ... },\n  'branch:scoreEssay:__self__:scoreEssay': EphemeralValue { ... },\n  'start:writeEssay': EphemeralValue { ... }\n}\n</code></pre> Python <p>\u5728\u51fd\u6570\u5f0f API \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>entrypoint</code>][] \u6765\u521b\u5efa Pregel \u5e94\u7528\u7a0b\u5e8f\u3002<code>entrypoint</code> \u88c5\u9970\u5668\u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53d7\u8f93\u5165\u5e76\u8fd4\u56de\u8f93\u51fa\u7684\u51fd\u6570\u3002</p> <pre><code>from typing import TypedDict, Optional\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.func import entrypoint\n\nclass Essay(TypedDict):\n    topic: str\n    content: Optional[str]\n    score: Optional[float]\n\n\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef write_essay(essay: Essay):\n    return {\n        \"content\": f\"Essay about {essay['topic']}\",\n    }\n\nprint(\"Nodes: \")\nprint(write_essay.nodes)\nprint(\"Channels: \")\nprint(write_essay.channels)\n</code></pre> <pre><code>Nodes:\n{'write_essay': &lt;langgraph.pregel.read.PregelNode object at 0x7d05e2f9aad0&gt;}\nChannels:\n{'__start__': &lt;langgraph.channels.ephemeral_value.EphemeralValue object at 0x7d05e2c906c0&gt;, '__end__': &lt;langgraph.channels.last_value.LastValue object at 0x7d05e2c90c40&gt;, '__previous__': &lt;langgraph.channels.last_value.LastValue object at 0x7d05e1007280&gt;}\n</code></pre> JavaScript <p>\u5728\u51fd\u6570\u5f0f API \u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>entrypoint</code>][] \u6765\u521b\u5efa Pregel \u5e94\u7528\u7a0b\u5e8f\u3002<code>entrypoint</code> \u88c5\u9970\u5668\u5141\u8bb8\u4f60\u5b9a\u4e49\u4e00\u4e2a\u63a5\u53d7\u8f93\u5165\u5e76\u8fd4\u56de\u8f93\u51fa\u7684\u51fd\u6570\u3002</p> <pre><code>import { MemorySaver } from \"@langchain/langgraph\";\nimport { entrypoint } from \"@langchain/langgraph/func\";\n\ninterface Essay {\n  topic: string;\n  content?: string;\n  score?: number;\n}\n\nconst checkpointer = new MemorySaver();\n\nconst writeEssay = entrypoint(\n  { checkpointer, name: \"writeEssay\" },\n  async (essay: Essay) =&gt; {\n    return {\n      content: `Essay about ${essay.topic}`,\n    };\n  }\n);\n\nconsole.log(\"Nodes: \");\nconsole.log(writeEssay.nodes);\nconsole.log(\"Channels: \");\nconsole.log(writeEssay.channels);\n</code></pre> <pre><code>Nodes:\n{ writeEssay: PregelNode { ... } }\nChannels:\n{\n  __start__: EphemeralValue { ... },\n  __end__: LastValue { ... },\n  __previous__: LastValue { ... }\n}\n</code></pre>","boost":2},{"location":"concepts/scalability_and_resilience/","title":"\u53ef\u6269\u5c55\u6027\u4e0e\u5f39\u6027","text":"<p>LangGraph Platform \u8bbe\u8ba1\u4e3a\u53ef\u968f\u5de5\u4f5c\u8d1f\u8f7d\u6c34\u5e73\u6269\u5c55\u3002\u670d\u52a1\u7684\u6bcf\u4e2a\u5b9e\u4f8b\u90fd\u662f\u65e0\u72b6\u6001\u7684\uff0c\u4e0d\u5728\u5185\u5b58\u4e2d\u4fdd\u7559\u4efb\u4f55\u8d44\u6e90\u3002\u8be5\u670d\u52a1\u8bbe\u8ba1\u4e3a\u80fd\u591f\u4f18\u96c5\u5730\u5904\u7406\u65b0\u5b9e\u4f8b\u7684\u6dfb\u52a0\u6216\u5220\u9664\uff0c\u5305\u62ec\u786c\u5173\u95ed\u60c5\u51b5\u3002</p>","boost":2},{"location":"concepts/scalability_and_resilience/#_2","title":"\u670d\u52a1\u5668\u53ef\u6269\u5c55\u6027","text":"<p>\u5f53\u4f60\u5411\u670d\u52a1\u6dfb\u52a0\u66f4\u591a\u5b9e\u4f8b\u65f6\uff0c\u53ea\u8981\u5728\u5b83\u4eec\u524d\u9762\u653e\u7f6e\u9002\u5f53\u7684\u8d1f\u8f7d\u5747\u8861\u673a\u5236\uff0c\u5b83\u4eec\u5c31\u4f1a\u5171\u4eab HTTP \u8d1f\u8f7d\u3002\u5728\u5927\u591a\u6570\u90e8\u7f72\u6a21\u5f0f\u4e0b\uff0c\u6211\u4eec\u4f1a\u81ea\u52a8\u4e3a\u670d\u52a1\u914d\u7f6e\u8d1f\u8f7d\u5747\u8861\u5668\u3002\u5728\"\u65e0\u63a7\u5236\u5e73\u9762\u7684\u81ea\u6258\u7ba1\"\u6a21\u5f0f\u4e0b\uff0c\u4f60\u9700\u8981\u81ea\u5df1\u6dfb\u52a0\u8d1f\u8f7d\u5747\u8861\u5668\u3002\u7531\u4e8e\u5b9e\u4f8b\u662f\u65e0\u72b6\u6001\u7684\uff0c\u4efb\u4f55\u8d1f\u8f7d\u5747\u8861\u7b56\u7565\u90fd\u53ef\u4ee5\u5de5\u4f5c\uff0c\u4e0d\u9700\u8981\u4e5f\u4e0d\u63a8\u8350\u4f1a\u8bdd\u7c98\u6027\u3002\u4efb\u4f55\u670d\u52a1\u5668\u5b9e\u4f8b\u90fd\u53ef\u4ee5\u4e0e\u4efb\u4f55\u961f\u5217\u5b9e\u4f8b\u901a\u4fe1\uff08\u901a\u8fc7 Redis PubSub\uff09\uff0c\u8fd9\u610f\u5473\u7740\u53d6\u6d88\u6216\u6d41\u5f0f\u4f20\u8f93\u8fdb\u884c\u4e2d\u8fd0\u884c\u7684\u8bf7\u6c42\u53ef\u4ee5\u7531\u4efb\u610f\u5b9e\u4f8b\u5904\u7406\u3002</p>","boost":2},{"location":"concepts/scalability_and_resilience/#_3","title":"\u961f\u5217\u53ef\u6269\u5c55\u6027","text":"<p>\u5f53\u4f60\u5411\u670d\u52a1\u6dfb\u52a0\u66f4\u591a\u5b9e\u4f8b\u65f6\uff0c\u5b83\u4eec\u4f1a\u7ebf\u6027\u589e\u52a0\u8fd0\u884c\u541e\u5410\u91cf\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u5b9e\u4f8b\u88ab\u914d\u7f6e\u4e3a\u5904\u7406\u4e00\u5b9a\u6570\u91cf\u7684\u5e76\u53d1\u8fd0\u884c\uff08\u9ed8\u8ba4\u4e3a 10 \u4e2a\uff09\u3002\u6bcf\u6b21\u8fd0\u884c\u7684\u6bcf\u6b21\u5c1d\u8bd5\u90fd\u7531\u5355\u4e2a\u5b9e\u4f8b\u5904\u7406\uff0c\u901a\u8fc7 Postgres \u7684 MVCC \u6a21\u578b\u5f3a\u5236\u6267\u884c\u6070\u597d\u4e00\u6b21\u8bed\u4e49\uff08\u6709\u5173\u5d29\u6e83\u6062\u590d\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u90e8\u5206\uff09\u3002\u7531\u4e8e\u77ac\u65f6\u6570\u636e\u5e93\u9519\u8bef\u800c\u5931\u8d25\u7684\u5c1d\u8bd5\u6700\u591a\u91cd\u8bd5 3 \u6b21\u3002\u6211\u4eec\u4e0d\u4f7f\u7528\u957f\u671f\u4e8b\u52a1\u6216\u9501\uff0c\u8fd9\u4f7f\u6211\u4eec\u80fd\u591f\u66f4\u6709\u6548\u5730\u4f7f\u7528 Postgres \u8d44\u6e90\u3002</p>","boost":2},{"location":"concepts/scalability_and_resilience/#_4","title":"\u5f39\u6027","text":"<p>\u5f53\u961f\u5217\u5b9e\u4f8b\u6b63\u5728\u5904\u7406\u8fd0\u884c\u65f6\uff0c\u8be5\u961f\u5217\u5de5\u4f5c\u8005\u4f1a\u5728 Redis \u4e2d\u8bb0\u5f55\u5b9a\u671f\u5fc3\u8df3\u65f6\u95f4\u6233\u3002</p> <p>\u5f53\u6536\u5230\u4f18\u96c5\u5173\u95ed\u8bf7\u6c42\uff08SIGINT\uff09\u65f6\uff0c\u5b9e\u4f8b\u8fdb\u5165\u5173\u95ed\u6a21\u5f0f\uff0c\u8fd9\u5c06\uff1a</p> <ul> <li>\u505c\u6b62\u63a5\u53d7\u65b0\u7684 HTTP \u8bf7\u6c42</li> <li>\u7ed9\u6b63\u5728\u8fdb\u884c\u7684\u8fd0\u884c\u6709\u9650\u7684\u79d2\u6570\u6765\u5b8c\u6210\uff08\u5982\u679c\u672a\u5b8c\u6210\uff0c\u5c06\u88ab\u653e\u56de\u961f\u5217\uff09</li> <li>\u505c\u6b62\u5b9e\u4f8b\u4ece\u961f\u5217\u4e2d\u83b7\u53d6\u66f4\u591a\u8fd0\u884c</li> </ul> <p>\u5982\u679c\u7531\u4e8e\u670d\u52a1\u5668\u5d29\u6e83\u6216\u57fa\u7840\u8bbe\u65bd\u6545\u969c\u800c\u53d1\u751f\u786c\u5173\u95ed\uff0c\u4efb\u4f55\u6b63\u5728\u8fdb\u884c\u7684\u8fd0\u884c\u90fd\u5c06\u88ab\u5185\u90e8\u6e05\u7406\u4efb\u52a1\u62fe\u53d6\uff0c\u8be5\u4efb\u52a1\u67e5\u627e\u5df2\u8d85\u8fc7\u5fc3\u8df3\u7a97\u53e3\u7684\u8fdb\u884c\u4e2d\u8fd0\u884c\u3002\u6e05\u7406\u5668\u6bcf 2 \u5206\u949f\u8fd0\u884c\u4e00\u6b21\uff0c\u5e76\u5c06\u8fd0\u884c\u653e\u56de\u961f\u5217\u4f9b\u53e6\u4e00\u4e2a\u5b9e\u4f8b\u62fe\u53d6\u3002</p>","boost":2},{"location":"concepts/scalability_and_resilience/#postgres","title":"Postgres \u5f39\u6027","text":"<p>\u5bf9\u4e8e\u6211\u4eec\u7ba1\u7406 Postgres \u6570\u636e\u5e93\u7684\u90e8\u7f72\u6a21\u5f0f\uff0c\u6211\u4eec\u6709\u5b9a\u671f\u5907\u4efd\u548c\u6301\u7eed\u590d\u5236\u7684\u5907\u7528\u526f\u672c\u4ee5\u8fdb\u884c\u81ea\u52a8\u6545\u969c\u8f6c\u79fb\u3002\u6b64 Postgres \u914d\u7f6e\u4ec5\u5728 Cloud SaaS \u90e8\u7f72\u9009\u9879\u4e2d\u4e3a<code>Production</code> \u90e8\u7f72\u7c7b\u578b\u63d0\u4f9b\u3002</p> <p>\u6240\u6709\u4e0e Postgres \u7684\u901a\u4fe1\u90fd\u4e3a\u53ef\u91cd\u8bd5\u9519\u8bef\u5b9e\u73b0\u91cd\u8bd5\u3002\u5982\u679c Postgres \u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u4f8b\u5982\u5728\u6570\u636e\u5e93\u91cd\u542f\u671f\u95f4\uff0c\u5927\u591a\u6570/\u6240\u6709\u6d41\u91cf\u5e94\u7ee7\u7eed\u6210\u529f\u3002Postgres \u957f\u65f6\u95f4\u6545\u969c\u5c06\u4f7f LangGraph Server \u4e0d\u53ef\u7528\u3002</p>","boost":2},{"location":"concepts/scalability_and_resilience/#redis","title":"Redis \u5f39\u6027","text":"<p>\u6240\u6709\u9700\u8981\u6301\u4e45\u5b58\u50a8\u7684\u6570\u636e\u90fd\u5b58\u50a8\u5728 Postgres \u4e2d\uff0c\u800c\u4e0d\u662f Redis \u4e2d\u3002Redis \u4ec5\u7528\u4e8e\u4e34\u65f6\u5143\u6570\u636e\u548c\u5b9e\u4f8b\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5bf9 Redis \u6ca1\u6709\u6301\u4e45\u6027\u8981\u6c42\u3002</p> <p>\u6240\u6709\u4e0e Redis \u7684\u901a\u4fe1\u90fd\u4e3a\u53ef\u91cd\u8bd5\u9519\u8bef\u5b9e\u73b0\u91cd\u8bd5\u3002\u5982\u679c Redis \u6682\u65f6\u4e0d\u53ef\u7528\uff0c\u4f8b\u5982\u5728\u6570\u636e\u5e93\u91cd\u542f\u671f\u95f4\uff0c\u5927\u591a\u6570/\u6240\u6709\u6d41\u91cf\u5e94\u7ee7\u7eed\u6210\u529f\u3002Redis \u957f\u65f6\u95f4\u6545\u969c\u5c06\u4f7f LangGraph Server \u4e0d\u53ef\u7528\u3002</p>","boost":2},{"location":"concepts/sdk/","title":"LangGraph SDK","text":"Python <p>LangGraph Platform \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u4e8e\u4e0e LangGraph Server \u4ea4\u4e92\u7684 Python SDK\u3002</p> <p>Python SDK \u53c2\u8003</p> <p>\u6709\u5173 Python SDK \u7684\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605 Python SDK \u53c2\u8003\u6587\u6863\u3002</p>","boost":2},{"location":"concepts/sdk/#_1","title":"\u5b89\u88c5","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5 LangGraph SDK:</p> <pre><code>pip install langgraph-sdk\n</code></pre>","boost":2},{"location":"concepts/sdk/#python-vs","title":"Python \u540c\u6b65 vs. \u5f02\u6b65","text":"<p>Python SDK \u63d0\u4f9b\u540c\u6b65(<code>get_sync_client</code>)\u548c\u5f02\u6b65(<code>get_client</code>)\u5ba2\u6237\u7aef\u7528\u4e8e\u4e0e LangGraph Server \u4ea4\u4e92:</p> SyncAsync <pre><code>from langgraph_sdk import get_sync_client\n\nclient = get_sync_client(url=..., api_key=...)\nclient.assistants.search()\n</code></pre> <pre><code>from langgraph_sdk import get_client\n\nclient = get_client(url=..., api_key=...)\nawait client.assistants.search()\n</code></pre>","boost":2},{"location":"concepts/sdk/#_2","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>Python SDK \u53c2\u8003</li> <li>LangGraph CLI API \u53c2\u8003</li> </ul> JavaScript <p>LangGraph Platform \u63d0\u4f9b\u4e86\u4e00\u4e2a\u7528\u4e8e\u4e0e LangGraph Server \u4ea4\u4e92\u7684 JS/TS SDK\u3002</p>","boost":2},{"location":"concepts/sdk/#_3","title":"\u5b89\u88c5","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5c06 LangGraph SDK \u6dfb\u52a0\u5230\u4f60\u7684\u9879\u76ee\u4e2d:</p> <pre><code>npm install @langchain/langgraph-sdk\n</code></pre>","boost":2},{"location":"concepts/sdk/#_4","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>LangGraph CLI API \u53c2\u8003</li> </ul>","boost":2},{"location":"concepts/server-mcp/","title":"LangGraph Server \u4e2d\u7684 MCP \u7aef\u70b9","text":"<p>\u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae\uff08MCP\uff09\u662f\u4e00\u4e2a\u5f00\u653e\u534f\u8bae\uff0c\u7528\u4e8e\u4ee5\u6a21\u578b\u65e0\u5173\u7684\u683c\u5f0f\u63cf\u8ff0\u5de5\u5177\u548c\u6570\u636e\u6e90\uff0c\u4f7f LLM \u80fd\u591f\u901a\u8fc7\u7ed3\u6784\u5316 API \u53d1\u73b0\u548c\u4f7f\u7528\u5b83\u4eec\u3002</p> <p>LangGraph Server \u4f7f\u7528\u53ef\u6d41\u5f0f HTTP \u4f20\u8f93\u5b9e\u73b0 MCP\u3002\u8fd9\u5141\u8bb8\u5c06 LangGraph \u667a\u80fd\u4ee3\u7406**\u66b4\u9732\u4e3a **MCP \u5de5\u5177\uff0c\u4f7f\u5176\u53ef\u4ee5\u4e0e\u4efb\u4f55\u652f\u6301\u53ef\u6d41\u5f0f HTTP \u7684 MCP \u517c\u5bb9\u5ba2\u6237\u7aef\u4e00\u8d77\u4f7f\u7528\u3002</p> <p>MCP \u7aef\u70b9\u4f4d\u4e8e LangGraph Server \u7684 <code>/mcp</code> \u8def\u5f84\u3002</p>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_1","title":"\u8981\u6c42","text":"Python <p>\u8981\u4f7f\u7528 MCP\uff0c\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5\u4ee5\u4e0b\u4f9d\u8d56\u9879\uff1a</p> <ul> <li><code>langgraph-api &gt;= 0.2.3</code></li> <li><code>langgraph-sdk &gt;= 0.1.61</code></li> </ul> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\uff1a</p> <pre><code>pip install \"langgraph-api&gt;=0.2.3\" \"langgraph-sdk&gt;=0.1.61\"\n</code></pre> JavaScript <p>\u8981\u4f7f\u7528 MCP\uff0c\u8bf7\u786e\u4fdd\u5df2\u5b89\u88c5 api \u548c sdk \u5305\u3002</p> <pre><code>npm install @langchain/langgraph-api @langchain/langgraph-sdk\n</code></pre>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#mcp","title":"\u5c06\u667a\u80fd\u4ee3\u7406\u66b4\u9732\u4e3a MCP \u5de5\u5177","text":"<p>\u90e8\u7f72\u540e\uff0c\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u5c06\u4ee5\u6b64\u914d\u7f6e\u51fa\u73b0\u5728 MCP \u7aef\u70b9\u4e2d\u4f5c\u4e3a\u5de5\u5177\uff1a</p> <ul> <li>\u5de5\u5177\u540d\u79f0\uff1a\u667a\u80fd\u4ee3\u7406\u7684\u540d\u79f0\u3002</li> <li>\u5de5\u5177\u63cf\u8ff0\uff1a\u667a\u80fd\u4ee3\u7406\u7684\u63cf\u8ff0\u3002</li> <li>\u5de5\u5177\u8f93\u5165\u6a21\u5f0f\uff1a\u667a\u80fd\u4ee3\u7406\u7684\u8f93\u5165\u6a21\u5f0f\u3002</li> </ul>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_2","title":"\u8bbe\u7f6e\u540d\u79f0\u548c\u63cf\u8ff0","text":"<p>\u4f60\u53ef\u4ee5\u5728 <code>langgraph.json</code> \u4e2d\u8bbe\u7f6e\u667a\u80fd\u4ee3\u7406\u7684\u540d\u79f0\u548c\u63cf\u8ff0\uff1a</p> Python <pre><code>{\n  \"graphs\": {\n    \"my_agent\": {\n      \"path\": \"./my_agent/agent.py:graph\",\n      \"description\": \"A description of what the agent does\"\n    }\n  },\n  \"env\": \".env\"\n}\n</code></pre> JavaScript <pre><code>{\n  \"graphs\": {\n    \"my_agent\": {\n      \"path\": \"./my_agent/agent.ts:graph\",\n      \"description\": \"A description of what the agent does\"\n    }\n  },\n  \"env\": \".env\"\n}\n</code></pre> <p>\u90e8\u7f72\u540e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph SDK \u66f4\u65b0\u540d\u79f0\u548c\u63cf\u8ff0\u3002</p>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_3","title":"\u6a21\u5f0f","text":"<p>\u5b9a\u4e49\u6e05\u6670\u3001\u6700\u5c0f\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\uff0c\u4ee5\u907f\u514d\u5411 LLM \u66b4\u9732\u4e0d\u5fc5\u8981\u7684\u5185\u90e8\u590d\u6742\u6027\u3002</p> Python <p>\u9ed8\u8ba4\u7684 MessagesState \u4f7f\u7528 <code>AnyMessage</code>\uff0c\u5b83\u652f\u6301\u591a\u79cd\u6d88\u606f\u7c7b\u578b\uff0c\u4f46\u5bf9\u4e8e\u76f4\u63a5 LLM \u66b4\u9732\u6765\u8bf4\u8fc7\u4e8e\u901a\u7528\u3002</p> <p>\u76f8\u53cd\uff0c\u5b9a\u4e49\u4f7f\u7528\u663e\u5f0f\u7c7b\u578b\u8f93\u5165\u548c\u8f93\u51fa\u7ed3\u6784\u7684**\u81ea\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\u6216\u5de5\u4f5c\u6d41**\u3002</p> <p>\u4f8b\u5982\uff0c\u4e00\u4e2a\u56de\u7b54\u6587\u6863\u95ee\u9898\u7684\u5de5\u4f5c\u6d41\u53ef\u80fd\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>from langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n\n# Define input schema\nclass InputState(TypedDict):\n    question: str\n\n# Define output schema\nclass OutputState(TypedDict):\n    answer: str\n\n# Combine input and output\nclass OverallState(InputState, OutputState):\n    pass\n\n# Define the processing node\ndef answer_node(state: InputState):\n    # Replace with actual logic and do something useful\n    return {\"answer\": \"bye\", \"question\": state[\"question\"]}\n\n# Build the graph with explicit schemas\nbuilder = StateGraph(OverallState, input_schema=InputState, output_schema=OutputState)\nbuilder.add_node(answer_node)\nbuilder.add_edge(START, \"answer_node\")\nbuilder.add_edge(\"answer_node\", END)\ngraph = builder.compile()\n\n# Run the graph\nprint(graph.invoke({\"question\": \"hi\"}))\n</code></pre> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u5e95\u5c42\u6982\u5ff5\u6307\u5357\u3002</p>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_4","title":"\u4f7f\u7528\u6982\u8ff0","text":"<p>\u8981\u542f\u7528 MCP\uff1a</p> <ul> <li>\u5347\u7ea7\u5230\u4f7f\u7528 langgraph-api&gt;=0.2.3\u3002\u5982\u679c\u4f60\u6b63\u5728\u90e8\u7f72 LangGraph Platform\uff0c\u5982\u679c\u4f60\u521b\u5efa\u65b0\u4fee\u8ba2\u7248\uff0c\u8fd9\u5c06\u81ea\u52a8\u4e3a\u4f60\u5b8c\u6210\u3002</li> <li>MCP \u5de5\u5177\uff08\u667a\u80fd\u4ee3\u7406\uff09\u5c06\u81ea\u52a8\u66b4\u9732\u3002</li> <li>\u4f7f\u7528\u4efb\u4f55\u652f\u6301\u53ef\u6d41\u5f0f HTTP \u7684 MCP \u517c\u5bb9\u5ba2\u6237\u7aef\u8fde\u63a5\u3002</li> </ul>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_5","title":"\u5ba2\u6237\u7aef","text":"Python <p>\u4f7f\u7528 MCP \u517c\u5bb9\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 LangGraph \u670d\u52a1\u5668\u3002\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u4f7f\u7528 langchain-mcp-adapters \u8fdb\u884c\u8fde\u63a5\u3002</p> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5b89\u88c5\u9002\u914d\u5668\uff1a</p> <pre><code>pip install langchain-mcp-adapters\n</code></pre> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u8fde\u63a5\u5230\u8fdc\u7a0b MCP \u7aef\u70b9\u5e76\u5c06\u667a\u80fd\u4ee3\u7406\u7528\u4f5c\u5de5\u5177\u7684\u793a\u4f8b\uff1a</p> <pre><code># Create server parameters for stdio connection\nfrom mcp import ClientSession\nfrom mcp.client.streamable_http import streamablehttp_client\nimport asyncio\n\nfrom langchain_mcp_adapters.tools import load_mcp_tools\nfrom langgraph.prebuilt import create_react_agent\n\nserver_params = {\n    \"url\": \"https://mcp-finance-agent.xxx.us.langgraph.app/mcp\",\n    \"headers\": {\n        \"X-Api-Key\":\"lsv2_pt_your_api_key\"\n    }\n}\n\nasync def main():\n    async with streamablehttp_client(**server_params) as (read, write, _):\n        async with ClientSession(read, write) as session:\n            # Initialize the connection\n            await session.initialize()\n\n            # Load the remote graph as if it was a tool\n            tools = await load_mcp_tools(session)\n\n            # Create and run a react agent with the tools\n            agent = create_react_agent(\"openai:gpt-4.1\", tools)\n\n            # Invoke the agent with a message\n            agent_response = await agent.ainvoke({\"messages\": \"What can the finance agent do for me?\"})\n            print(agent_response)\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre> JavaScript <p>\u4f7f\u7528 MCP \u517c\u5bb9\u5ba2\u6237\u7aef\u8fde\u63a5\u5230 LangGraph \u670d\u52a1\u5668\u3002\u4ee5\u4e0b\u793a\u4f8b\u5c55\u793a\u5982\u4f55\u4f7f\u7528 <code>@langchain/mcp-adapters</code> \u8fdb\u884c\u8fde\u63a5\u3002</p> <pre><code>npm install @langchain/mcp-adapters\n</code></pre> <p>\u4ee5\u4e0b\u662f\u5982\u4f55\u8fde\u63a5\u5230\u8fdc\u7a0b MCP \u7aef\u70b9\u5e76\u5c06\u667a\u80fd\u4ee3\u7406\u7528\u4f5c\u5de5\u5177\u7684\u793a\u4f8b\uff1a</p> <pre><code>import { MultiServerMCPClient } from \"@langchain/mcp-adapters\";\nimport { createReactAgent } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\n\nasync function main() {\n  const client = new MultiServerMCPClient({\n    mcpServers: {\n      \"finance-agent\": {\n        url: \"https://mcp-finance-agent.xxx.us.langgraph.app/mcp\",\n        headers: {\n          \"X-Api-Key\": \"lsv2_pt_your_api_key\",\n        },\n      },\n    },\n  });\n\n  const tools = await client.getTools();\n\n  const model = new ChatOpenAI({\n    model: \"gpt-4o-mini\",\n    temperature: 0,\n  });\n\n  const agent = createReactAgent({\n    model,\n    tools,\n  });\n\n  const response = await agent.invoke({\n    input: \"What can the finance agent do for me?\",\n  });\n\n  console.log(response);\n}\n\nmain();\n</code></pre>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_6","title":"\u4f1a\u8bdd\u884c\u4e3a","text":"<p>\u5f53\u524d\u7684 LangGraph MCP \u5b9e\u73b0\u4e0d\u652f\u6301\u4f1a\u8bdd\u3002\u6bcf\u4e2a <code>/mcp</code> \u8bf7\u6c42\u90fd\u662f\u65e0\u72b6\u6001\u4e14\u72ec\u7acb\u7684\u3002</p>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#_7","title":"\u8ba4\u8bc1","text":"<p><code>/mcp</code> \u7aef\u70b9\u4f7f\u7528\u4e0e LangGraph API \u5176\u4f59\u90e8\u5206\u76f8\u540c\u7684\u8ba4\u8bc1\u3002\u6709\u5173\u8bbe\u7f6e\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u8ba4\u8bc1\u6307\u5357\u3002</p>","tags":["mcp","platform"]},{"location":"concepts/server-mcp/#mcp_1","title":"\u7981\u7528 MCP","text":"<p>\u8981\u7981\u7528 MCP \u7aef\u70b9\uff0c\u8bf7\u5728 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u5c06 <code>disable_mcp</code> \u8bbe\u7f6e\u4e3a <code>true</code>\uff1a</p> <pre><code>{\n  \"http\": {\n    \"disable_mcp\": true\n  }\n}\n</code></pre> <p>\u8fd9\u5c06\u963b\u6b62\u670d\u52a1\u5668\u66b4\u9732 <code>/mcp</code> \u7aef\u70b9\u3002</p>","tags":["mcp","platform"]},{"location":"concepts/streaming/","title":"\u6d41\u5f0f\u4f20\u8f93","text":"<p>LangGraph \u5b9e\u73b0\u4e86\u4e00\u4e2a\u6d41\u5f0f\u4f20\u8f93\u7cfb\u7edf\u6765\u663e\u793a\u5b9e\u65f6\u66f4\u65b0\uff0c\u4ece\u800c\u5b9e\u73b0\u54cd\u5e94\u8fc5\u901f\u4e14\u900f\u660e\u7684\u7528\u6237\u4f53\u9a8c\u3002</p> <p>LangGraph \u7684\u6d41\u5f0f\u4f20\u8f93\u7cfb\u7edf\u8ba9\u4f60\u53ef\u4ee5\u5c06\u56fe\u8fd0\u884c\u7684\u5b9e\u65f6\u53cd\u9988\u663e\u793a\u5230\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002 \u4f60\u53ef\u4ee5\u6d41\u5f0f\u4f20\u8f93\u4e09\u5927\u7c7b\u6570\u636e\uff1a</p> <ol> <li>\u5de5\u4f5c\u6d41\u8fdb\u5ea6 \u2014 \u5728\u6267\u884c\u6bcf\u4e2a\u56fe\u8282\u70b9\u540e\u83b7\u53d6\u72b6\u6001\u66f4\u65b0\u3002</li> <li>LLM \u4ee4\u724c \u2014 \u5728\u751f\u6210\u8bed\u8a00\u6a21\u578b\u4ee4\u724c\u65f6\u8fdb\u884c\u6d41\u5f0f\u4f20\u8f93\u3002</li> <li>\u81ea\u5b9a\u4e49\u66f4\u65b0 \u2014 \u53d1\u51fa\u7528\u6237\u5b9a\u4e49\u7684\u4fe1\u53f7\uff08\u4f8b\u5982\uff0c\"\u5df2\u83b7\u53d6 10/100 \u6761\u8bb0\u5f55\"\uff09\u3002</li> </ol>","boost":2},{"location":"concepts/streaming/#langgraph","title":"LangGraph \u6d41\u5f0f\u4f20\u8f93\u7684\u529f\u80fd","text":"<ul> <li>\u6d41\u5f0f\u4f20\u8f93 LLM \u4ee4\u724c \u2014 \u4ece\u4efb\u4f55\u5730\u65b9\u6355\u83b7\u4ee4\u724c\u6d41\uff1a\u8282\u70b9\u5185\u90e8\u3001\u5b50\u56fe\u6216\u5de5\u5177\u3002</li> <li>\u4ece\u5de5\u5177\u53d1\u51fa\u8fdb\u5ea6\u901a\u77e5 \u2014 \u76f4\u63a5\u4ece\u5de5\u5177\u51fd\u6570\u53d1\u9001\u81ea\u5b9a\u4e49\u66f4\u65b0\u6216\u8fdb\u5ea6\u4fe1\u53f7\u3002</li> <li>\u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93 \u2014 \u5305\u62ec\u6765\u81ea\u7236\u56fe\u548c\u4efb\u4f55\u5d4c\u5957\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> <li>\u4f7f\u7528\u4efb\u4f55 LLM \u2014 \u4ece\u4efb\u4f55 LLM \u6d41\u5f0f\u4f20\u8f93\u4ee4\u724c\uff0c\u5373\u4f7f\u5b83\u4e0d\u662f\u4f7f\u7528 <code>custom</code> \u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u7684 LangChain \u6a21\u578b\u3002</li> <li>\u4f7f\u7528\u591a\u79cd\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f \u2014 \u4ece <code>values</code>\uff08\u5b8c\u6574\u72b6\u6001\uff09\u3001<code>updates</code>\uff08\u72b6\u6001\u589e\u91cf\uff09\u3001<code>messages</code>\uff08LLM \u4ee4\u724c + \u5143\u6570\u636e\uff09\u3001<code>custom</code>\uff08\u4efb\u610f\u7528\u6237\u6570\u636e\uff09\u6216 <code>debug</code>\uff08\u8be6\u7ec6\u8ddf\u8e2a\uff09\u4e2d\u9009\u62e9\u3002</li> </ul>","boost":2},{"location":"concepts/subgraphs/","title":"\u5b50\u56fe","text":"<p>\u5b50\u56fe\u662f\u4f5c\u4e3a\u53e6\u4e00\u4e2a\u56fe\u4e2d\u8282\u70b9\u4f7f\u7528\u7684\u56fe\u2014\u2014\u8fd9\u662f\u5e94\u7528\u4e8e LangGraph \u7684\u5c01\u88c5\u6982\u5ff5\u3002\u5b50\u56fe\u5141\u8bb8\u4f60\u6784\u5efa\u5177\u6709\u591a\u4e2a\u7ec4\u4ef6\u7684\u590d\u6742\u7cfb\u7edf\uff0c\u800c\u8fd9\u4e9b\u7ec4\u4ef6\u672c\u8eab\u4e5f\u662f\u56fe\u3002</p> <p></p> <p>\u4f7f\u7528\u5b50\u56fe\u7684\u4e00\u4e9b\u539f\u56e0\u662f\uff1a</p> <ul> <li>\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf</li> <li>\u5f53\u4f60\u60f3\u5728\u591a\u4e2a\u56fe\u4e2d\u91cd\u7528\u4e00\u7ec4\u8282\u70b9\u65f6</li> <li>\u5f53\u4f60\u5e0c\u671b\u4e0d\u540c\u56e2\u961f\u72ec\u7acb\u5904\u7406\u56fe\u7684\u4e0d\u540c\u90e8\u5206\u65f6\uff0c\u4f60\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u90e8\u5206\u5b9a\u4e49\u4e3a\u5b50\u56fe\uff0c\u53ea\u8981\u5b50\u56fe\u63a5\u53e3\uff08\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\uff09\u5f97\u5230\u9075\u5b88\uff0c\u7236\u56fe\u5c31\u53ef\u4ee5\u5728\u4e0d\u77e5\u9053\u5b50\u56fe\u4efb\u4f55\u7ec6\u8282\u7684\u60c5\u51b5\u4e0b\u6784\u5efa</li> </ul> <p>\u6dfb\u52a0\u5b50\u56fe\u65f6\u7684\u4e3b\u8981\u95ee\u9898\u662f\u7236\u56fe\u548c\u5b50\u56fe\u5982\u4f55\u901a\u4fe1\uff0c\u5373\u5b83\u4eec\u5728\u56fe\u6267\u884c\u671f\u95f4\u5982\u4f55\u76f8\u4e92\u4f20\u9012\u72b6\u6001\u3002\u6709\u4e24\u79cd\u573a\u666f\uff1a</p> <ul> <li>\u7236\u56fe\u548c\u5b50\u56fe\u5728\u5176\u72b6\u6001\u6a21\u5f0f\u4e2d\u6709**\u5171\u4eab\u72b6\u6001\u952e**\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u4ee5\u5c06\u5b50\u56fe\u4f5c\u4e3a\u7236\u56fe\u4e2d\u7684\u8282\u70b9\u5305\u542b</li> </ul> <p>=== \"Python\"</p> <pre><code>from langgraph.graph import StateGraph, MessagesState, START\n\n# Subgraph\n\ndef call_model(state: MessagesState):\n    response = model.invoke(state[\"messages\"])\n    return {\"messages\": response}\n\nsubgraph_builder = StateGraph(State)\nsubgraph_builder.add_node(call_model)\n...\n# highlight-next-line\nsubgraph = subgraph_builder.compile()\n\n# Parent graph\n\nbuilder = StateGraph(State)\n# highlight-next-line\nbuilder.add_node(\"subgraph_node\", subgraph)\nbuilder.add_edge(START, \"subgraph_node\")\ngraph = builder.compile()\n...\ngraph.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"hi!\"}]})\n</code></pre> <p>=== \"JavaScript\"</p> <pre><code>import { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\n\n// Subgraph\n\nconst subgraphBuilder = new StateGraph(MessagesZodState).addNode(\n  \"callModel\",\n  async (state) =&gt; {\n    const response = await model.invoke(state.messages);\n    return { messages: response };\n  }\n);\n// ... other nodes and edges\n// highlight-next-line\nconst subgraph = subgraphBuilder.compile();\n\n// Parent graph\n\nconst builder = new StateGraph(MessagesZodState)\n  // highlight-next-line\n  .addNode(\"subgraphNode\", subgraph)\n  .addEdge(START, \"subgraphNode\");\nconst graph = builder.compile();\n// ...\nawait graph.invoke({ messages: [{ role: \"user\", content: \"hi!\" }] });\n</code></pre> <ul> <li>\u7236\u56fe\u548c\u5b50\u56fe\u6709**\u4e0d\u540c\u7684\u6a21\u5f0f**\uff08\u5728\u5176\u72b6\u6001\u6a21\u5f0f\u4e2d\u6ca1\u6709\u5171\u4eab\u72b6\u6001\u952e\uff09\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f60\u5fc5\u987b\u4ece\u7236\u56fe\u4e2d\u7684\u8282\u70b9\u5185\u90e8\u8c03\u7528\u5b50\u56fe\uff1a\u5f53\u7236\u56fe\u548c\u5b50\u56fe\u6709\u4e0d\u540c\u7684\u72b6\u6001\u6a21\u5f0f\uff0c\u5e76\u4e14\u4f60\u9700\u8981\u5728\u8c03\u7528\u5b50\u56fe\u4e4b\u524d\u6216\u4e4b\u540e\u8f6c\u6362\u72b6\u6001\u65f6\uff0c\u8fd9\u5f88\u6709\u7528</li> </ul> <p>=== \"Python\"</p> <pre><code>from typing_extensions import TypedDict, Annotated\nfrom langchain_core.messages import AnyMessage\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom langgraph.graph.message import add_messages\n\nclass SubgraphMessagesState(TypedDict):\n    # highlight-next-line\n    subgraph_messages: Annotated[list[AnyMessage], add_messages]\n\n# Subgraph\n\n# highlight-next-line\ndef call_model(state: SubgraphMessagesState):\n    response = model.invoke(state[\"subgraph_messages\"])\n    return {\"subgraph_messages\": response}\n\nsubgraph_builder = StateGraph(SubgraphMessagesState)\nsubgraph_builder.add_node(\"call_model_from_subgraph\", call_model)\nsubgraph_builder.add_edge(START, \"call_model_from_subgraph\")\n...\n# highlight-next-line\nsubgraph = subgraph_builder.compile()\n\n# Parent graph\n\ndef call_subgraph(state: MessagesState):\n    response = subgraph.invoke({\"subgraph_messages\": state[\"messages\"]})\n    return {\"messages\": response[\"subgraph_messages\"]}\n\nbuilder = StateGraph(State)\n# highlight-next-line\nbuilder.add_node(\"subgraph_node\", call_subgraph)\nbuilder.add_edge(START, \"subgraph_node\")\ngraph = builder.compile()\n...\ngraph.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"hi!\"}]})\n</code></pre> <p>=== \"JavaScript\"</p> <pre><code>import { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst SubgraphState = z.object({\n  // highlight-next-line\n  subgraphMessages: MessagesZodState.shape.messages,\n});\n\n// Subgraph\n\nconst subgraphBuilder = new StateGraph(SubgraphState)\n  // highlight-next-line\n  .addNode(\"callModelFromSubgraph\", async (state) =&gt; {\n    const response = await model.invoke(state.subgraphMessages);\n    return { subgraphMessages: response };\n  })\n  .addEdge(START, \"callModelFromSubgraph\");\n// ...\n// highlight-next-line\nconst subgraph = subgraphBuilder.compile();\n\n// Parent graph\n\nconst builder = new StateGraph(MessagesZodState)\n  // highlight-next-line\n  .addNode(\"subgraphNode\", async (state) =&gt; {\n    const response = await subgraph.invoke({\n      subgraphMessages: state.messages,\n    });\n    return { messages: response.subgraphMessages };\n  })\n  .addEdge(START, \"subgraphNode\");\nconst graph = builder.compile();\n// ...\nawait graph.invoke({ messages: [{ role: \"user\", content: \"hi!\" }] });\n</code></pre>"},{"location":"concepts/template_applications/","title":"\u6a21\u677f\u5e94\u7528\u7a0b\u5e8f","text":"<p>\u6a21\u677f\u662f\u5f00\u6e90\u53c2\u8003\u5e94\u7528\u7a0b\u5e8f\uff0c\u65e8\u5728\u5e2e\u52a9\u4f60\u5728\u4f7f\u7528 LangGraph \u6784\u5efa\u65f6\u5feb\u901f\u5165\u95e8\u3002\u5b83\u4eec\u63d0\u4f9b\u4e86\u5e38\u89c1\u667a\u80fd\u4ee3\u7406\u5de5\u4f5c\u6d41\u7684\u5de5\u4f5c\u793a\u4f8b\uff0c\u53ef\u4ee5\u6839\u636e\u4f60\u7684\u9700\u6c42\u8fdb\u884c\u81ea\u5b9a\u4e49\u3002</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph CLI \u4ece\u6a21\u677f\u521b\u5efa\u5e94\u7528\u7a0b\u5e8f\u3002</p> Python <p>\u8981\u6c42</p> <ul> <li>Python &gt;= 3.11</li> <li>LangGraph CLI\uff1a\u9700\u8981 langchain-cli[inmem] &gt;= 0.1.58</li> </ul>","boost":2},{"location":"concepts/template_applications/#langgraph-cli","title":"\u5b89\u88c5 LangGraph CLI","text":"<pre><code>pip install \"langgraph-cli[inmem]\" --upgrade\n</code></pre> <p>\u6216\u8005\u901a\u8fc7 <code>uv</code>\uff08\u63a8\u8350\uff09\uff1a</p> <pre><code>uvx --from \"langgraph-cli[inmem]\" langgraph dev --help\n</code></pre> JavaScript <pre><code>npx @langchain/langgraph-cli --help\n</code></pre>","boost":2},{"location":"concepts/template_applications/#_2","title":"\u53ef\u7528\u6a21\u677f","text":"Python \u6a21\u677f \u63cf\u8ff0 \u94fe\u63a5 New LangGraph Project \u4e00\u4e2a\u7b80\u5355\u3001\u6700\u5c0f\u7684\u5e26\u8bb0\u5fc6\u529f\u80fd\u7684\u804a\u5929\u673a\u5668\u4eba\u3002 \u4ed3\u5e93 ReAct Agent \u4e00\u4e2a\u53ef\u4ee5\u7075\u6d3b\u6269\u5c55\u5230\u591a\u79cd\u5de5\u5177\u7684\u7b80\u5355\u667a\u80fd\u4ee3\u7406\u3002 \u4ed3\u5e93 Memory Agent \u4e00\u4e2a ReAct \u98ce\u683c\u7684\u667a\u80fd\u4ee3\u7406\uff0c\u5e26\u6709\u989d\u5916\u7684\u5de5\u5177\u6765\u5b58\u50a8\u8bb0\u5fc6\u4ee5\u4f9b\u8de8\u7ebf\u7a0b\u4f7f\u7528\u3002 \u4ed3\u5e93 Retrieval Agent \u4e00\u4e2a\u5305\u542b\u57fa\u4e8e\u68c0\u7d22\u7684\u95ee\u7b54\u7cfb\u7edf\u7684\u667a\u80fd\u4ee3\u7406\u3002 \u4ed3\u5e93 Data-Enrichment Agent \u4e00\u4e2a\u6267\u884c\u7f51\u7edc\u641c\u7d22\u5e76\u5c06\u5176\u53d1\u73b0\u7ec4\u7ec7\u6210\u7ed3\u6784\u5316\u683c\u5f0f\u7684\u667a\u80fd\u4ee3\u7406\u3002 \u4ed3\u5e93 JavaScript \u6a21\u677f \u63cf\u8ff0 \u94fe\u63a5 New LangGraph Project \u4e00\u4e2a\u7b80\u5355\u3001\u6700\u5c0f\u7684\u5e26\u8bb0\u5fc6\u529f\u80fd\u7684\u804a\u5929\u673a\u5668\u4eba\u3002 \u4ed3\u5e93 ReAct Agent \u4e00\u4e2a\u53ef\u4ee5\u7075\u6d3b\u6269\u5c55\u5230\u591a\u79cd\u5de5\u5177\u7684\u7b80\u5355\u667a\u80fd\u4ee3\u7406\u3002 \u4ed3\u5e93 Memory Agent \u4e00\u4e2a ReAct \u98ce\u683c\u7684\u667a\u80fd\u4ee3\u7406\uff0c\u5e26\u6709\u989d\u5916\u7684\u5de5\u5177\u6765\u5b58\u50a8\u8bb0\u5fc6\u4ee5\u4f9b\u8de8\u7ebf\u7a0b\u4f7f\u7528\u3002 \u4ed3\u5e93 Retrieval Agent \u4e00\u4e2a\u5305\u542b\u57fa\u4e8e\u68c0\u7d22\u7684\u95ee\u7b54\u7cfb\u7edf\u7684\u667a\u80fd\u4ee3\u7406\u3002 \u4ed3\u5e93 Data-Enrichment Agent \u4e00\u4e2a\u6267\u884c\u7f51\u7edc\u641c\u7d22\u5e76\u5c06\u5176\u53d1\u73b0\u7ec4\u7ec7\u6210\u7ed3\u6784\u5316\u683c\u5f0f\u7684\u667a\u80fd\u4ee3\u7406\u3002 \u4ed3\u5e93","boost":2},{"location":"concepts/template_applications/#langgraph","title":"\ud83c\udf31 \u521b\u5efa LangGraph \u5e94\u7528\u7a0b\u5e8f","text":"<p>\u8981\u4ece\u6a21\u677f\u521b\u5efa\u65b0\u5e94\u7528\u7a0b\u5e8f\uff0c\u8bf7\u4f7f\u7528 <code>langgraph new</code> \u547d\u4ee4\u3002</p> Python <pre><code>langgraph new\n</code></pre> <p>\u6216\u8005\u901a\u8fc7 <code>uv</code>\uff08\u63a8\u8350\uff09\uff1a</p> <pre><code>uvx --from \"langgraph-cli[inmem]\" langgraph new\n</code></pre> JavaScript <pre><code>npm create langgraph\n</code></pre>","boost":2},{"location":"concepts/template_applications/#_3","title":"\u540e\u7eed\u6b65\u9aa4","text":"<p>\u67e5\u770b\u65b0 LangGraph \u5e94\u7528\u7a0b\u5e8f\u6839\u76ee\u5f55\u4e2d\u7684 <code>README.md</code> \u6587\u4ef6\uff0c\u4e86\u89e3\u6709\u5173\u6a21\u677f\u4ee5\u53ca\u5982\u4f55\u81ea\u5b9a\u4e49\u5b83\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u6b63\u786e\u914d\u7f6e\u5e94\u7528\u7a0b\u5e8f\u5e76\u6dfb\u52a0 API \u5bc6\u94a5\u540e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph CLI \u542f\u52a8\u5e94\u7528\u7a0b\u5e8f\uff1a</p> Python <pre><code>langgraph dev\n</code></pre> <p>\u6216\u8005\u901a\u8fc7 <code>uv</code>\uff08\u63a8\u8350\uff09\uff1a</p> <pre><code>uvx --from \"langgraph-cli[inmem]\" --with-editable . langgraph dev\n</code></pre> <p>\u7f3a\u5c11\u672c\u5730\u5305\uff1f</p> <p>\u5982\u679c\u4f60\u6ca1\u6709\u4f7f\u7528 <code>uv</code> \u5e76\u9047\u5230 \"<code>ModuleNotFoundError</code>\" \u6216 \"<code>ImportError</code>\"\uff0c\u5373\u4f7f\u5728\u5b89\u88c5\u672c\u5730\u5305\uff08<code>pip install -e .</code>\uff09\u4e4b\u540e\uff0c\u5f88\u53ef\u80fd\u4f60\u9700\u8981\u5c06 CLI \u5b89\u88c5\u5230\u672c\u5730\u865a\u62df\u73af\u5883\u4e2d\uff0c\u4ee5\u4f7f CLI \"\u611f\u77e5\"\u672c\u5730\u5305\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c <code>python -m pip install \"langgraph-cli[inmem]\"</code> \u5e76\u5728\u8fd0\u884c <code>langgraph dev</code> \u4e4b\u524d\u91cd\u65b0\u6fc0\u6d3b\u865a\u62df\u73af\u5883\u6765\u5b8c\u6210\u6b64\u64cd\u4f5c\u3002</p> JavaScript <pre><code>npx @langchain/langgraph-cli dev\n</code></pre> <p>\u8bf7\u53c2\u9605\u4ee5\u4e0b\u6307\u5357\uff0c\u4e86\u89e3\u6709\u5173\u5982\u4f55\u90e8\u7f72\u5e94\u7528\u7a0b\u5e8f\u7684\u66f4\u591a\u4fe1\u606f\uff1a</p> <ul> <li>\u542f\u52a8\u672c\u5730 LangGraph Server\uff1a\u6b64\u5feb\u901f\u5165\u95e8\u6307\u5357\u5c55\u793a\u4e86\u5982\u4f55\u5728\u672c\u5730\u4e3a ReAct Agent \u6a21\u677f\u542f\u52a8 LangGraph Server\u3002\u5176\u4ed6\u6a21\u677f\u7684\u6b65\u9aa4\u7c7b\u4f3c\u3002</li> <li>\u90e8\u7f72\u5230 LangGraph Platform\uff1a\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\u4f60\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>","boost":2},{"location":"concepts/time-travel/","title":"\u65f6\u95f4\u65c5\u884c \u23f1\ufe0f","text":"<p>\u5728\u5904\u7406\u505a\u51fa\u57fa\u4e8e\u6a21\u578b\u51b3\u7b56\u7684\u975e\u786e\u5b9a\u6027\u7cfb\u7edf\uff08\u4f8b\u5982\uff0c\u7531 LLM \u9a71\u52a8\u7684\u667a\u80fd\u4ee3\u7406\uff09\u65f6\uff0c\u8be6\u7ec6\u68c0\u67e5\u5b83\u4eec\u7684\u51b3\u7b56\u8fc7\u7a0b\u53ef\u80fd\u5f88\u6709\u7528\uff1a</p> <ol> <li>\ud83e\udd14 \u7406\u89e3\u63a8\u7406\uff1a\u5206\u6790\u5bfc\u81f4\u6210\u529f\u7ed3\u679c\u7684\u6b65\u9aa4\u3002</li> <li>\ud83d\udc1e \u8c03\u8bd5\u9519\u8bef\uff1a\u8bc6\u522b\u9519\u8bef\u53d1\u751f\u7684\u4f4d\u7f6e\u548c\u539f\u56e0\u3002</li> <li>\ud83d\udd0d \u63a2\u7d22\u66ff\u4ee3\u65b9\u6848\uff1a\u6d4b\u8bd5\u4e0d\u540c\u8def\u5f84\u4ee5\u53d1\u73b0\u66f4\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002</li> </ol> <p>LangGraph \u63d0\u4f9b\u65f6\u95f4\u65c5\u884c\u529f\u80fd\u6765\u652f\u6301\u8fd9\u4e9b\u7528\u4f8b\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u4f60\u53ef\u4ee5\u4ece\u5148\u524d\u7684\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c\u2014\u2014\u8981\u4e48\u91cd\u653e\u76f8\u540c\u7684\u72b6\u6001\uff0c\u8981\u4e48\u4fee\u6539\u5b83\u4ee5\u63a2\u7d22\u66ff\u4ee3\u65b9\u6848\u3002\u5728\u6240\u6709\u60c5\u51b5\u4e0b\uff0c\u6062\u590d\u8fc7\u53bb\u7684\u6267\u884c\u90fd\u4f1a\u5728\u5386\u53f2\u8bb0\u5f55\u4e2d\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u5206\u652f\u3002</p> <p>Tip</p> <p>\u6709\u5173\u5982\u4f55\u4f7f\u7528\u65f6\u95f4\u65c5\u884c\u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4f7f\u7528\u65f6\u95f4\u65c5\u884c\u548c\u4f7f\u7528 Server API \u8fdb\u884c\u65f6\u95f4\u65c5\u884c\u3002</p>","boost":2},{"location":"concepts/tools/","title":"\u5de5\u5177","text":"<p>\u8bb8\u591a AI \u5e94\u7528\u7a0b\u5e8f\u901a\u8fc7\u81ea\u7136\u8bed\u8a00\u4e0e\u7528\u6237\u4ea4\u4e92\u3002\u7136\u800c,\u67d0\u4e9b\u7528\u4f8b\u9700\u8981\u6a21\u578b\u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u5165\u76f4\u63a5\u4e0e\u5916\u90e8\u7cfb\u7edf(\u5982 API\u3001\u6570\u636e\u5e93\u6216\u6587\u4ef6\u7cfb\u7edf)\u8fdb\u884c\u63a5\u53e3\u3002\u5728\u8fd9\u4e9b\u573a\u666f\u4e2d,\u5de5\u5177\u8c03\u7528\u4f7f\u6a21\u578b\u80fd\u591f\u751f\u6210\u7b26\u5408\u6307\u5b9a\u8f93\u5165\u67b6\u6784\u7684\u8bf7\u6c42\u3002</p> Python <p>**\u5de5\u5177**\u5c01\u88c5\u4e86\u53ef\u8c03\u7528\u51fd\u6570\u53ca\u5176\u8f93\u5165\u67b6\u6784\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4f20\u9012\u7ed9\u517c\u5bb9\u7684\u804a\u5929\u6a21\u578b,\u5141\u8bb8\u6a21\u578b\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u5de5\u5177\u4ee5\u53ca\u4f7f\u7528\u4ec0\u4e48\u53c2\u6570\u3002</p> JavaScript <p>**\u5de5\u5177**\u5c01\u88c5\u4e86\u53ef\u8c03\u7528\u51fd\u6570\u53ca\u5176\u8f93\u5165\u67b6\u6784\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4f20\u9012\u7ed9\u517c\u5bb9\u7684\u804a\u5929\u6a21\u578b,\u5141\u8bb8\u6a21\u578b\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u5de5\u5177\u4ee5\u53ca\u4f7f\u7528\u4ec0\u4e48\u53c2\u6570\u3002</p>"},{"location":"concepts/tools/#_2","title":"\u5de5\u5177\u8c03\u7528","text":"<p>\u5de5\u5177\u8c03\u7528\u901a\u5e38\u662f**\u6709\u6761\u4ef6\u7684**\u3002\u6839\u636e\u7528\u6237\u8f93\u5165\u548c\u53ef\u7528\u5de5\u5177,\u6a21\u578b\u53ef\u80fd\u9009\u62e9\u53d1\u51fa\u5de5\u5177\u8c03\u7528\u8bf7\u6c42\u3002\u6b64\u8bf7\u6c42\u5728 <code>AIMessage</code> \u5bf9\u8c61\u4e2d\u8fd4\u56de,\u5176\u4e2d\u5305\u62ec\u6307\u5b9a\u5de5\u5177\u540d\u79f0\u548c\u8f93\u5165\u53c2\u6570\u7684 <code>tool_calls</code> \u5b57\u6bb5:</p> Python <pre><code>llm_with_tools.invoke(\"What is 2 multiplied by 3?\")\n# -&gt; AIMessage(tool_calls=[{'name': 'multiply', 'args': {'a': 2, 'b': 3}, ...}])\n</code></pre> <pre><code>AIMessage(\n  tool_calls=[\n    ToolCall(name=\"multiply\", args={\"a\": 2, \"b\": 3}),\n    ...\n  ]\n)\n</code></pre> JavaScript <pre><code>await llmWithTools.invoke(\"What is 2 multiplied by 3?\");\n</code></pre> <pre><code>AIMessage {\n  tool_calls: [\n    ToolCall {\n      name: \"multiply\",\n      args: { a: 2, b: 3 },\n      ...\n    },\n    ...\n  ]\n}\n</code></pre> <p>\u5982\u679c\u8f93\u5165\u4e0e\u4efb\u4f55\u5de5\u5177\u65e0\u5173,\u6a21\u578b\u4ec5\u8fd4\u56de\u81ea\u7136\u8bed\u8a00\u6d88\u606f:</p> Python <pre><code>llm_with_tools.invoke(\"Hello world!\")  # -&gt; AIMessage(content=\"Hello!\")\n</code></pre> JavaScript <pre><code>await llmWithTools.invoke(\"Hello world!\"); // { content: \"Hello!\" }\n</code></pre> <p>\u91cd\u8981\u7684\u662f,\u6a21\u578b\u4e0d\u6267\u884c\u5de5\u5177\u2014\u2014\u5b83\u53ea\u751f\u6210\u8bf7\u6c42\u3002\u5355\u72ec\u7684\u6267\u884c\u5668(\u5982\u8fd0\u884c\u65f6\u6216\u667a\u80fd\u4ee3\u7406)\u8d1f\u8d23\u5904\u7406\u5de5\u5177\u8c03\u7528\u5e76\u8fd4\u56de\u7ed3\u679c\u3002</p> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u5de5\u5177\u8c03\u7528\u6307\u5357\u3002</p>"},{"location":"concepts/tools/#_3","title":"\u9884\u6784\u5efa\u5de5\u5177","text":"<p>LangChain \u4e3a\u5e38\u89c1\u7684\u5916\u90e8\u7cfb\u7edf(\u5305\u62ec API\u3001\u6570\u636e\u5e93\u3001\u6587\u4ef6\u7cfb\u7edf\u548c Web \u6570\u636e)\u63d0\u4f9b\u9884\u6784\u5efa\u7684\u5de5\u5177\u96c6\u6210\u3002</p> Python <p>\u6d4f\u89c8\u96c6\u6210\u76ee\u5f55\u4ee5\u83b7\u53d6\u53ef\u7528\u5de5\u5177\u3002</p> JavaScript <p>\u6d4f\u89c8\u96c6\u6210\u76ee\u5f55\u4ee5\u83b7\u53d6\u53ef\u7528\u5de5\u5177\u3002</p> <p>\u5e38\u89c1\u7c7b\u522b:</p> <ul> <li>\u641c\u7d22: Bing\u3001SerpAPI\u3001Tavily</li> <li>\u4ee3\u7801\u6267\u884c: Python REPL\u3001Node.js REPL</li> <li>\u6570\u636e\u5e93: SQL\u3001MongoDB\u3001Redis</li> <li>Web \u6570\u636e: \u6293\u53d6\u548c\u6d4f\u89c8</li> <li>API: OpenWeatherMap\u3001NewsAPI \u7b49</li> </ul>"},{"location":"concepts/tools/#_4","title":"\u81ea\u5b9a\u4e49\u5de5\u5177","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>@tool</code> \u88c5\u9970\u5668\u6216\u666e\u901a Python \u51fd\u6570\u5b9a\u4e49\u81ea\u5b9a\u4e49\u5de5\u5177\u3002\u4f8b\u5982:</p> <pre><code>from langchain_core.tools import tool\n\n@tool\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>tool</code> \u51fd\u6570\u5b9a\u4e49\u81ea\u5b9a\u4e49\u5de5\u5177\u3002\u4f8b\u5982:</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n  }\n);\n</code></pre> <p>\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f,\u8bf7\u53c2\u9605\u5de5\u5177\u8c03\u7528\u6307\u5357\u3002</p>"},{"location":"concepts/tools/#_5","title":"\u5de5\u5177\u6267\u884c","text":"<p>\u867d\u7136\u6a21\u578b\u786e\u5b9a\u4f55\u65f6\u8c03\u7528\u5de5\u5177,\u4f46\u5de5\u5177\u8c03\u7528\u7684\u6267\u884c\u5fc5\u987b\u7531\u8fd0\u884c\u65f6\u7ec4\u4ef6\u5904\u7406\u3002</p> <p>LangGraph \u4e3a\u6b64\u63d0\u4f9b\u4e86\u9884\u6784\u5efa\u7684\u7ec4\u4ef6:</p> Python <ul> <li>@[<code>ToolNode</code>][]: \u6267\u884c\u5de5\u5177\u7684\u9884\u6784\u5efa\u8282\u70b9\u3002</li> <li>@[<code>create_react_agent</code>][]: \u6784\u5efa\u81ea\u52a8\u7ba1\u7406\u5de5\u5177\u8c03\u7528\u7684\u5b8c\u6574\u667a\u80fd\u4ee3\u7406\u3002</li> </ul> JavaScript <ul> <li>@[ToolNode]: \u6267\u884c\u5de5\u5177\u7684\u9884\u6784\u5efa\u8282\u70b9\u3002</li> <li>@[<code>createReactAgent</code>][create_react_agent]: \u6784\u5efa\u81ea\u52a8\u7ba1\u7406\u5de5\u5177\u8c03\u7528\u7684\u5b8c\u6574\u667a\u80fd\u4ee3\u7406\u3002</li> </ul>"},{"location":"concepts/tracing/","title":"\u8ddf\u8e2a","text":"<p>\u8ddf\u8e2a\u662f\u5e94\u7528\u7a0b\u5e8f\u4ece\u8f93\u5165\u5230\u8f93\u51fa\u6240\u91c7\u53d6\u7684\u4e00\u7cfb\u5217\u6b65\u9aa4\u3002\u6bcf\u4e2a\u5355\u72ec\u7684\u6b65\u9aa4\u90fd\u7531\u4e00\u6b21\u8fd0\u884c\u8868\u793a\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 LangSmith \u53ef\u89c6\u5316\u8fd9\u4e9b\u6267\u884c\u6b65\u9aa4\u3002\u8981\u4f7f\u7528\u5b83,\u4e3a\u4f60\u7684\u5e94\u7528\u7a0b\u5e8f\u542f\u7528\u8ddf\u8e2a\u3002\u8fd9\u4f7f\u4f60\u80fd\u591f\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c:</p> <ul> <li>\u8c03\u8bd5\u672c\u5730\u8fd0\u884c\u7684\u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u8bc4\u4f30\u5e94\u7528\u7a0b\u5e8f\u6027\u80fd\u3002</li> <li>\u76d1\u63a7\u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul> <p>\u8981\u5f00\u59cb\u4f7f\u7528,\u8bf7\u5728 LangSmith \u6ce8\u518c\u514d\u8d39\u8d26\u6237\u3002</p>"},{"location":"concepts/tracing/#_2","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>LangSmith \u4e2d\u7684\u56fe\u8fd0\u884c</li> <li>LangSmith \u53ef\u89c2\u5bdf\u6027\u5feb\u901f\u5165\u95e8</li> <li>\u4f7f\u7528 LangGraph \u8fdb\u884c\u8ddf\u8e2a</li> <li>\u8ddf\u8e2a\u6982\u5ff5\u6307\u5357</li> </ul>"},{"location":"concepts/why-langgraph/","title":"\u6982\u8ff0","text":"<p>LangGraph \u662f\u4e3a\u60f3\u8981\u6784\u5efa\u5f3a\u5927\u3001\u9002\u5e94\u6027\u5f3a\u7684 AI \u667a\u80fd\u4ee3\u7406\u7684\u5f00\u53d1\u4eba\u5458\u800c\u6784\u5efa\u7684\u3002\u5f00\u53d1\u4eba\u5458\u9009\u62e9 LangGraph \u7684\u539f\u56e0\u662f\uff1a</p> <ul> <li>\u53ef\u9760\u6027\u548c\u53ef\u63a7\u6027\u3002 \u901a\u8fc7\u5ba1\u6838\u68c0\u67e5\u548c\u4eba\u673a\u534f\u540c\u6279\u51c6\u6765\u5f15\u5bfc\u667a\u80fd\u4ee3\u7406\u64cd\u4f5c\u3002LangGraph \u4e3a\u957f\u65f6\u95f4\u8fd0\u884c\u7684\u5de5\u4f5c\u6d41\u6301\u4e45\u5316\u4e0a\u4e0b\u6587\uff0c\u4fdd\u6301\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u5728\u6b63\u786e\u7684\u8f68\u9053\u4e0a\u3002</li> <li>\u5e95\u5c42\u548c\u53ef\u6269\u5c55\u3002 \u4f7f\u7528\u5b8c\u5168\u63cf\u8ff0\u6027\u7684\u5e95\u5c42\u539f\u8bed\u6784\u5efa\u81ea\u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\uff0c\u6446\u8131\u9650\u5236\u81ea\u5b9a\u4e49\u7684\u50f5\u5316\u62bd\u8c61\u3002\u8bbe\u8ba1\u53ef\u6269\u5c55\u7684\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\uff0c\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u90fd\u6709\u9488\u5bf9\u4f60\u7684\u7528\u4f8b\u91cf\u8eab\u5b9a\u5236\u7684\u7279\u5b9a\u89d2\u8272\u3002</li> <li>\u4e00\u6d41\u7684\u6d41\u5f0f\u4f20\u8f93\u652f\u6301\u3002 \u901a\u8fc7\u9010\u4ee4\u724c\u6d41\u5f0f\u4f20\u8f93\u548c\u4e2d\u95f4\u6b65\u9aa4\u6d41\u5f0f\u4f20\u8f93\uff0cLangGraph \u4f7f\u7528\u6237\u80fd\u591f\u5b9e\u65f6\u6e05\u6670\u5730\u770b\u5230\u667a\u80fd\u4ee3\u7406\u7684\u63a8\u7406\u548c\u64cd\u4f5c\u3002</li> </ul>"},{"location":"concepts/why-langgraph/#langgraph","title":"\u5b66\u4e60 LangGraph \u57fa\u7840","text":"<p>\u8981\u719f\u6089 LangGraph \u7684\u5173\u952e\u6982\u5ff5\u548c\u529f\u80fd\uff0c\u8bf7\u5b8c\u6210\u4ee5\u4e0b LangGraph \u57fa\u7840\u6559\u7a0b\u7cfb\u5217\uff1a</p> <ol> <li>\u6784\u5efa\u57fa\u672c\u804a\u5929\u673a\u5668\u4eba</li> <li>\u6dfb\u52a0\u5de5\u5177</li> <li>\u6dfb\u52a0\u8bb0\u5fc6</li> <li>\u6dfb\u52a0\u4eba\u673a\u534f\u540c\u63a7\u5236</li> <li>\u81ea\u5b9a\u4e49\u72b6\u6001</li> <li>\u65f6\u95f4\u65c5\u884c</li> </ol> <p>\u5b8c\u6210\u8fd9\u4e00\u7cfb\u5217\u6559\u7a0b\u540e\uff0c\u4f60\u5c06\u5728 LangGraph \u4e2d\u6784\u5efa\u4e00\u4e2a\u652f\u6301\u804a\u5929\u673a\u5668\u4eba\uff0c\u5b83\u53ef\u4ee5\uff1a</p> <ul> <li>\u2705 \u56de\u7b54\u5e38\u89c1\u95ee\u9898\uff0c\u901a\u8fc7\u641c\u7d22\u7f51\u7edc</li> <li>\u2705 \u7ef4\u62a4\u5bf9\u8bdd\u72b6\u6001\uff0c\u8de8\u8c03\u7528</li> <li>\u2705 \u8def\u7531\u590d\u6742\u67e5\u8be2\uff0c\u8f6c\u4ea4\u4eba\u5de5\u5ba1\u6838</li> <li>\u2705 \u4f7f\u7528\u81ea\u5b9a\u4e49\u72b6\u6001\uff0c\u63a7\u5236\u5176\u884c\u4e3a</li> <li>\u2705 \u56de\u6eaf\u548c\u63a2\u7d22\uff0c\u66ff\u4ee3\u5bf9\u8bdd\u8def\u5f84</li> </ul>"},{"location":"examples/","title":"\u793a\u4f8b","text":"<p>\u672c\u8282\u7684\u9875\u9762\u63d0\u4f9b\u4ee5\u4e0b\u4e3b\u9898\u7684\u7aef\u5230\u7aef\u793a\u4f8b\uff1a</p>"},{"location":"examples/#_2","title":"\u901a\u7528","text":"<ul> <li>\u6a21\u677f\u5e94\u7528\u7a0b\u5e8f\uff1a\u4ece\u6a21\u677f\u521b\u5efa LangGraph \u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>\u667a\u80fd\u4ee3\u7406 RAG\uff1a\u6784\u5efa\u4e00\u4e2a\u53ef\u4ee5\u51b3\u5b9a\u4f55\u65f6\u4f7f\u7528\u68c0\u7d22\u5668\u5de5\u5177\u7684\u68c0\u7d22\u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u667a\u80fd\u4ee3\u7406\u76d1\u7763\u8005\uff1a\u6784\u5efa\u4e00\u4e2a\u53ef\u4ee5\u7ba1\u7406\u667a\u80fd\u4ee3\u7406\u56e2\u961f\u7684\u76d1\u7763\u8005\u667a\u80fd\u4ee3\u7406\u3002</li> <li>SQL \u667a\u80fd\u4ee3\u7406\uff1a\u6784\u5efa\u4e00\u4e2a\u53ef\u4ee5\u6267\u884c SQL \u67e5\u8be2\u5e76\u8fd4\u56de\u7ed3\u679c\u7684 SQL \u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u9884\u6784\u5efa\u804a\u5929 UI\uff1a\u4f7f\u7528\u9884\u6784\u5efa\u7684\u804a\u5929 UI \u4e0e\u4efb\u4f55 LangGraph \u667a\u80fd\u4ee3\u7406\u4ea4\u4e92\u3002</li> <li>LangSmith \u4e2d\u7684\u56fe\u8fd0\u884c\uff1a\u4f7f\u7528 LangSmith \u8ddf\u8e2a\u548c\u5206\u6790\u56fe\u8fd0\u884c\u3002</li> </ul>"},{"location":"guides/","title":"\u6307\u5357","text":"<p>\u672c\u8282\u7684\u9875\u9762\u63d0\u4f9b\u4ee5\u4e0b\u4e3b\u9898\u7684\u6982\u5ff5\u6982\u8ff0\u548c\u64cd\u4f5c\u6307\u5357\uff1a</p>"},{"location":"guides/#_2","title":"\u667a\u80fd\u4ee3\u7406\u5f00\u53d1","text":"<ul> <li>\u6982\u8ff0\uff1a\u4f7f\u7528\u9884\u6784\u5efa\u7ec4\u4ef6\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u8fd0\u884c\u667a\u80fd\u4ee3\u7406\uff1a\u901a\u8fc7\u63d0\u4f9b\u8f93\u5165\u3001\u89e3\u91ca\u8f93\u51fa\u3001\u542f\u7528\u6d41\u5f0f\u4f20\u8f93\u548c\u63a7\u5236\u6267\u884c\u9650\u5236\u6765\u8fd0\u884c\u667a\u80fd\u4ee3\u7406\u3002</li> </ul>"},{"location":"guides/#langgraph-api","title":"LangGraph API","text":"<ul> <li>\u56fe API\uff1a\u4f7f\u7528\u56fe API \u901a\u8fc7\u56fe\u8303\u5f0f\u5b9a\u4e49\u5de5\u4f5c\u6d41\u3002</li> <li>\u51fd\u6570\u5f0f API\uff1a\u4f7f\u7528\u51fd\u6570\u5f0f API \u901a\u8fc7\u51fd\u6570\u5f0f\u8303\u5f0f\u6784\u5efa\u5de5\u4f5c\u6d41\uff0c\u65e0\u9700\u8003\u8651\u56fe\u7ed3\u6784\u3002</li> <li>\u8fd0\u884c\u65f6\uff1aPregel \u5b9e\u73b0\u4e86 LangGraph \u7684\u8fd0\u884c\u65f6\uff0c\u7ba1\u7406 LangGraph \u5e94\u7528\u7a0b\u5e8f\u7684\u6267\u884c\u3002</li> </ul>"},{"location":"guides/#_3","title":"\u6838\u5fc3\u80fd\u529b","text":"<p>\u8fd9\u4e9b\u80fd\u529b\u5728 LangGraph OSS \u548c LangGraph Platform \u4e2d\u90fd\u53ef\u7528\u3002</p> <ul> <li>\u6d41\u5f0f\u4f20\u8f93\uff1a\u4ece LangGraph \u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002</li> <li>\u6301\u4e45\u5316\uff1a\u6301\u4e45\u5316 LangGraph \u56fe\u7684\u72b6\u6001\u3002</li> <li>\u6301\u4e45\u6267\u884c\uff1a\u5728\u56fe\u6267\u884c\u7684\u5173\u952e\u70b9\u4fdd\u5b58\u8fdb\u5ea6\u3002</li> <li>\u8bb0\u5fc6\uff1a\u8bb0\u4f4f\u6709\u5173\u5148\u524d\u4ea4\u4e92\u7684\u4fe1\u606f\u3002</li> <li>\u4e0a\u4e0b\u6587\uff1a\u5c06\u5916\u90e8\u6570\u636e\u4f20\u9012\u7ed9 LangGraph \u56fe\uff0c\u4e3a\u56fe\u6267\u884c\u63d0\u4f9b\u4e0a\u4e0b\u6587\u3002</li> <li>\u6a21\u578b\uff1a\u5c06\u5404\u79cd LLM \u96c6\u6210\u5230\u4f60\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\u4e2d\u3002</li> <li>\u5de5\u5177\uff1a\u76f4\u63a5\u4e0e\u5916\u90e8\u7cfb\u7edf\u4ea4\u4e92\u3002</li> <li>\u4eba\u673a\u534f\u540c\uff1a\u5728\u5de5\u4f5c\u6d41\u7684\u4efb\u4f55\u70b9\u6682\u505c\u56fe\u5e76\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002</li> <li>\u65f6\u95f4\u65c5\u884c\uff1a\u56de\u5230 LangGraph \u56fe\u6267\u884c\u4e2d\u7684\u7279\u5b9a\u65f6\u95f4\u70b9\u3002</li> <li>\u5b50\u56fe\uff1a\u6784\u5efa\u6a21\u5757\u5316\u56fe\u3002</li> <li>\u591a\u667a\u80fd\u4ee3\u7406\uff1a\u5c06\u590d\u6742\u5de5\u4f5c\u6d41\u5206\u89e3\u4e3a\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u3002</li> <li>MCP\uff1a\u5728 LangGraph \u56fe\u4e2d\u4f7f\u7528 MCP \u670d\u52a1\u5668\u3002</li> <li>\u8bc4\u4f30\uff1a\u4f7f\u7528 LangSmith \u8bc4\u4f30\u4f60\u7684\u56fe\u7684\u6027\u80fd\u3002</li> </ul>"},{"location":"how-tos/","title":"\u64cd\u4f5c\u6307\u5357","text":"<p>\u672c\u8282\u63d0\u4f9b\u4e86\u5404\u79cd\u5b9e\u7528\u7684\u64cd\u4f5c\u6307\u5357\uff0c\u5e2e\u52a9\u4f60\u5b8c\u6210\u5177\u4f53\u7684\u4efb\u52a1\u548c\u5b9e\u73b0\u7279\u5b9a\u7684\u529f\u80fd\u3002</p>"},{"location":"how-tos/#_2","title":"\u56fe\u76f8\u5173","text":"<ul> <li>\u56fe API\uff1a\u4f7f\u7528\u56fe API \u6784\u5efa\u548c\u7ba1\u7406 LangGraph \u5e94\u7528\u7a0b\u5e8f\u3002</li> </ul>"},{"location":"how-tos/#_3","title":"\u96c6\u6210","text":"<ul> <li>AutoGen \u96c6\u6210\uff1a\u5c06 LangGraph \u4e0e AutoGen \u6846\u67b6\u96c6\u6210\u3002</li> </ul>"},{"location":"how-tos/#_4","title":"\u4eba\u673a\u4ea4\u4e92","text":"<ul> <li>\u6dfb\u52a0\u4eba\u673a\u534f\u540c\uff1a\u5728\u5de5\u4f5c\u6d41\u4e2d\u6dfb\u52a0\u4eba\u5de5\u5ba1\u6838\u548c\u8f93\u5165\u3002</li> <li>\u65f6\u95f4\u65c5\u884c\uff1a\u56de\u6eaf\u548c\u4fee\u6539\u56fe\u7684\u6267\u884c\u5386\u53f2\u3002</li> </ul>"},{"location":"how-tos/#_5","title":"\u6d41\u5f0f\u5904\u7406","text":"<ul> <li>\u6d41\u5f0f\u5904\u7406\uff1a\u5b9e\u73b0\u5b9e\u65f6\u6d41\u5f0f\u8f93\u51fa\u3002</li> </ul>"},{"location":"how-tos/#_6","title":"\u591a\u667a\u80fd\u4f53","text":"<ul> <li>\u591a\u667a\u80fd\u4f53\u7cfb\u7edf\uff1a\u6784\u5efa\u548c\u534f\u8c03\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u3002</li> </ul>"},{"location":"how-tos/#_7","title":"\u8ba4\u8bc1","text":"<ul> <li>\u81ea\u5b9a\u4e49\u8ba4\u8bc1\uff1a\u5b9e\u73b0\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u903b\u8f91\u3002</li> <li>OpenAPI \u5b89\u5168\uff1a\u914d\u7f6e OpenAPI \u5b89\u5168\u8bbe\u7f6e\u3002</li> </ul>"},{"location":"how-tos/#http","title":"HTTP \u914d\u7f6e","text":"<ul> <li>\u81ea\u5b9a\u4e49\u751f\u547d\u5468\u671f\uff1a\u81ea\u5b9a\u4e49\u5e94\u7528\u7a0b\u5e8f\u751f\u547d\u5468\u671f\u3002</li> <li>\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\uff1a\u6dfb\u52a0\u81ea\u5b9a\u4e49 HTTP \u4e2d\u95f4\u4ef6\u3002</li> <li>\u81ea\u5b9a\u4e49\u8def\u7531\uff1a\u5b9a\u4e49\u81ea\u5b9a\u4e49 HTTP \u8def\u7531\u3002</li> </ul>"},{"location":"how-tos/#_8","title":"\u5185\u5b58\u7ba1\u7406","text":"<ul> <li>\u6dfb\u52a0\u8bb0\u5fc6\uff1a\u4e3a\u667a\u80fd\u4ee3\u7406\u6dfb\u52a0\u8bb0\u5fc6\u529f\u80fd\u3002</li> </ul>"},{"location":"how-tos/#_9","title":"\u5b50\u56fe","text":"<ul> <li>\u4f7f\u7528\u5b50\u56fe\uff1a\u521b\u5efa\u548c\u7ba1\u7406\u5b50\u56fe\u3002</li> </ul>"},{"location":"how-tos/#_10","title":"\u5de5\u5177\u8c03\u7528","text":"<ul> <li>\u5de5\u5177\u8c03\u7528\uff1a\u914d\u7f6e\u548c\u4f7f\u7528\u5de5\u5177\u8c03\u7528\u3002</li> </ul>"},{"location":"how-tos/#_11","title":"\u5176\u4ed6","text":"<ul> <li>\u542f\u7528\u8ffd\u8e2a\uff1a\u542f\u7528 LangSmith \u8ffd\u8e2a\u3002</li> <li>\u4f7f\u7528\u8fdc\u7a0b\u56fe\uff1a\u8fde\u63a5\u548c\u4f7f\u7528\u8fdc\u7a0b\u56fe\u3002</li> <li>\u914d\u7f6e TTL\uff1a\u914d\u7f6e\u72b6\u6001\u7684\u751f\u5b58\u65f6\u95f4\u3002</li> <li>\u4f7f\u7528\u51fd\u6570\u5f0f API\uff1a\u4f7f\u7528\u51fd\u6570\u5f0f API \u6784\u5efa\u5de5\u4f5c\u6d41\u3002</li> <li>LangSmith \u8fd0\u884c ID\uff1a\u5728 LangSmith \u4e2d\u8ddf\u8e2a\u8fd0\u884c\u3002</li> </ul>"},{"location":"how-tos/autogen-integration/","title":"\u5982\u4f55\u5c06 LangGraph \u4e0e AutoGen\u3001CrewAI \u548c\u5176\u4ed6\u6846\u67b6\u96c6\u6210","text":"<p>\u672c\u6307\u5357\u5c55\u793a\u5982\u4f55\u5c06 AutoGen \u667a\u80fd\u4ee3\u7406\u4e0e LangGraph \u96c6\u6210\uff0c\u4ee5\u5229\u7528\u6301\u4e45\u5316\u3001\u6d41\u5f0f\u4f20\u8f93\u548c\u8bb0\u5fc6\u7b49\u529f\u80fd\uff0c\u7136\u540e\u5c06\u96c6\u6210\u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u5230 LangGraph Platform \u8fdb\u884c\u53ef\u6269\u5c55\u7684\u751f\u4ea7\u4f7f\u7528\u3002\u5728\u672c\u6307\u5357\u4e2d\uff0c\u6211\u4eec\u5c55\u793a\u5982\u4f55\u6784\u5efa\u4e00\u4e2a\u4e0e AutoGen \u96c6\u6210\u7684 LangGraph \u804a\u5929\u673a\u5668\u4eba\uff0c\u4f46\u4f60\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u65b9\u6cd5\u4e0e\u5176\u4ed6\u6846\u67b6\u96c6\u6210\u3002</p> <p>\u5c06 AutoGen \u4e0e LangGraph \u96c6\u6210\u63d0\u4f9b\u4ee5\u4e0b\u51e0\u4e2a\u597d\u5904\uff1a</p> <ul> <li>\u589e\u5f3a\u529f\u80fd\uff1a\u4e3a\u4f60\u7684 AutoGen \u667a\u80fd\u4ee3\u7406\u6dfb\u52a0\u6301\u4e45\u5316\u3001\u6d41\u5f0f\u4f20\u8f93\u3001\u77ed\u671f\u548c\u957f\u671f\u8bb0\u5fc6\u7b49\u529f\u80fd\u3002</li> <li>\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\uff1a\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\uff0c\u5176\u4e2d\u5404\u4e2a\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u4e0d\u540c\u7684\u6846\u67b6\u6784\u5efa\u3002</li> <li>\u751f\u4ea7\u90e8\u7f72\uff1a\u5c06\u4f60\u7684\u96c6\u6210\u89e3\u51b3\u65b9\u6848\u90e8\u7f72\u5230 LangGraph Platform \u8fdb\u884c\u53ef\u6269\u5c55\u7684\u751f\u4ea7\u4f7f\u7528\u3002</li> </ul>"},{"location":"how-tos/autogen-integration/#_1","title":"\u524d\u7f6e\u6761\u4ef6","text":"<ul> <li>Python 3.9+</li> <li>Autogen: <code>pip install autogen</code></li> <li>LangGraph: <code>pip install langgraph</code></li> <li>OpenAI API \u5bc6\u94a5</li> </ul>"},{"location":"how-tos/autogen-integration/#_2","title":"\u8bbe\u7f6e","text":"<p>\u8bbe\u7f6e\u4f60\u7684\u73af\u5883\uff1a</p> <pre><code>import getpass\nimport os\n\n\ndef _set_env(var: str):\n    if not os.environ.get(var):\n        os.environ[var] = getpass.getpass(f\"{var}: \")\n\n\n_set_env(\"OPENAI_API_KEY\")\n</code></pre>"},{"location":"how-tos/autogen-integration/#1-autogen","title":"1. \u5b9a\u4e49 AutoGen \u667a\u80fd\u4ee3\u7406","text":"<p>\u521b\u5efa\u4e00\u4e2a\u53ef\u4ee5\u6267\u884c\u4ee3\u7801\u7684 AutoGen \u667a\u80fd\u4ee3\u7406\u3002\u6b64\u793a\u4f8b\u6539\u7f16\u81ea AutoGen \u7684\u5b98\u65b9\u6559\u7a0b\uff1a</p> <pre><code>import autogen\nimport os\n\nconfig_list = [{\"model\": \"gpt-4o\", \"api_key\": os.environ[\"OPENAI_API_KEY\"]}]\n\nllm_config = {\n    \"timeout\": 600,\n    \"cache_seed\": 42,\n    \"config_list\": config_list,\n    \"temperature\": 0,\n}\n\nautogen_agent = autogen.AssistantAgent(\n    name=\"assistant\",\n    llm_config=llm_config,\n)\n\nuser_proxy = autogen.UserProxyAgent(\n    name=\"user_proxy\",\n    human_input_mode=\"NEVER\",\n    max_consecutive_auto_reply=10,\n    is_termination_msg=lambda x: x.get(\"content\", \"\").rstrip().endswith(\"TERMINATE\"),\n    code_execution_config={\n        \"work_dir\": \"web\",\n        \"use_docker\": False,\n    },  # \u5982\u679c docker \u53ef\u7528\uff0c\u8bf7\u8bbe\u7f6e use_docker=True \u6765\u8fd0\u884c\u751f\u6210\u7684\u4ee3\u7801\u3002\u4f7f\u7528 docker \u6bd4\u76f4\u63a5\u8fd0\u884c\u751f\u6210\u7684\u4ee3\u7801\u66f4\u5b89\u5168\u3002\n    llm_config=llm_config,\n    system_message=\"Reply TERMINATE if the task has been solved at full satisfaction. Otherwise, reply CONTINUE, or the reason why the task is not solved yet.\",\n)\n</code></pre>"},{"location":"how-tos/autogen-integration/#2","title":"2. \u521b\u5efa\u56fe","text":"<p>\u6211\u4eec\u73b0\u5728\u5c06\u521b\u5efa\u4e00\u4e2a\u8c03\u7528 AutoGen \u667a\u80fd\u4ee3\u7406\u7684 LangGraph \u804a\u5929\u673a\u5668\u4eba\u56fe\u3002</p> <pre><code>from langchain_core.messages import convert_to_openai_messages\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom langgraph.checkpoint.memory import InMemorySaver\n\ndef call_autogen_agent(state: MessagesState):\n    # \u5c06 LangGraph \u6d88\u606f\u8f6c\u6362\u4e3a AutoGen \u7684 OpenAI \u683c\u5f0f\n    messages = convert_to_openai_messages(state[\"messages\"])\n\n    # \u83b7\u53d6\u6700\u540e\u4e00\u6761\u7528\u6237\u6d88\u606f\n    last_message = messages[-1]\n\n    # \u5c06\u4e4b\u524d\u7684\u6d88\u606f\u5386\u53f2\u4f5c\u4e3a\u4e0a\u4e0b\u6587\u4f20\u9012\uff08\u4e0d\u5305\u62ec\u6700\u540e\u4e00\u6761\u6d88\u606f\uff09\n    carryover = messages[:-1] if len(messages) &gt; 1 else []\n\n    # \u4f7f\u7528 AutoGen \u53d1\u8d77\u804a\u5929\n    response = user_proxy.initiate_chat(\n        autogen_agent,\n        message=last_message,\n        carryover=carryover\n    )\n\n    # \u4ece\u667a\u80fd\u4ee3\u7406\u63d0\u53d6\u6700\u7ec8\u54cd\u5e94\n    final_content = response.chat_history[-1][\"content\"]\n\n    # \u4ee5 LangGraph \u683c\u5f0f\u8fd4\u56de\u54cd\u5e94\n    return {\"messages\": {\"role\": \"assistant\", \"content\": final_content}}\n\n# \u521b\u5efa\u5e26\u6709\u8bb0\u5fc6\u529f\u80fd\u7684\u56fe\u4ee5\u5b9e\u73b0\u6301\u4e45\u5316\ncheckpointer = InMemorySaver()\n\n# \u6784\u5efa\u56fe\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(\"autogen\", call_autogen_agent)\nbuilder.add_edge(START, \"autogen\")\n\n# \u4f7f\u7528\u68c0\u67e5\u70b9\u5668\u7f16\u8bd1\u4ee5\u5b9e\u73b0\u6301\u4e45\u5316\ngraph = builder.compile(checkpointer=checkpointer)\n</code></pre> <pre><code>from IPython.display import display, Image\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p>"},{"location":"how-tos/autogen-integration/#3","title":"3. \u672c\u5730\u6d4b\u8bd5\u56fe","text":"<p>\u5728\u90e8\u7f72\u5230 LangGraph Platform \u4e4b\u524d\uff0c\u4f60\u53ef\u4ee5\u5728\u672c\u5730\u6d4b\u8bd5\u56fe\uff1a</p> <pre><code># \u4f20\u9012\u7ebf\u7a0b ID \u4ee5\u6301\u4e45\u5316\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\uff0c\u7528\u4e8e\u540e\u7eed\u4ea4\u4e92\n# highlight-next-line\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\n\nfor chunk in graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"\u67e5\u627e\u6590\u6ce2\u90a3\u5951\u6570\u5217\u4e2d 10 \u5230 30 \u4e4b\u95f4\u7684\u6570\u5b57\",\n            }\n        ]\n    },\n    # highlight-next-line\n    config,\n):\n    print(chunk)\n</code></pre> <p>\u8f93\u51fa: <pre><code>user_proxy (to assistant):\n\n\u67e5\u627e\u6590\u6ce2\u90a3\u5951\u6570\u5217\u4e2d 10 \u5230 30 \u4e4b\u95f4\u7684\u6570\u5b57\n\n--------------------------------------------------------------------------------\nassistant (to user_proxy):\n\nTo find numbers between 10 and 30 in the Fibonacci sequence, we can generate the Fibonacci sequence and check which numbers fall within this range. Here's a plan:\n\n1. Generate Fibonacci numbers starting from 0.\n2. Continue generating until the numbers exceed 30.\n3. Collect and print the numbers that are between 10 and 30.\n\n...\n</code></pre></p> <p>\u7531\u4e8e\u6211\u4eec\u5229\u7528\u4e86 LangGraph \u7684\u6301\u4e45\u5316\u529f\u80fd\uff0c\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u7ebf\u7a0b ID \u7ee7\u7eed\u5bf9\u8bdd -- LangGraph \u4f1a\u81ea\u52a8\u5c06\u4e4b\u524d\u7684\u5386\u53f2\u4f20\u9012\u7ed9 AutoGen \u667a\u80fd\u4ee3\u7406\uff1a</p> <pre><code>for chunk in graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"Multiply the last number by 3\",\n            }\n        ]\n    },\n    # highlight-next-line\n    config,\n):\n    print(chunk)\n</code></pre> <p>\u8f93\u51fa: <pre><code>user_proxy (to assistant):\n\nMultiply the last number by 3\nContext:\n\u67e5\u627e\u6590\u6ce2\u90a3\u5951\u6570\u5217\u4e2d 10 \u5230 30 \u4e4b\u95f4\u7684\u6570\u5b57\nThe Fibonacci numbers between 10 and 30 are 13 and 21.\n\nThese numbers are part of the Fibonacci sequence, which is generated by adding the two preceding numbers to get the next number, starting from 0 and 1.\n\nThe sequence goes: 0, 1, 1, 2, 3, 5, 8, 13, 21, 34, ...\n\nAs you can see, 13 and 21 are the only numbers in this sequence that fall between 10 and 30.\n\nTERMINATE\n\n--------------------------------------------------------------------------------\nassistant (to user_proxy):\n\nThe last number in the Fibonacci sequence between 10 and 30 is 21. Multiplying 21 by 3 gives:\n\n21 * 3 = 63\n\nTERMINATE\n\n--------------------------------------------------------------------------------\n{'call_autogen_agent': {'messages': {'role': 'assistant', 'content': 'The last number in the Fibonacci sequence between 10 and 30 is 21. Multiplying 21 by 3 gives:\\n\\n21 * 3 = 63\\n\\nTERMINATE'}}}\n</code></pre></p>"},{"location":"how-tos/autogen-integration/#4","title":"4. \u51c6\u5907\u90e8\u7f72","text":"<p>\u8981\u90e8\u7f72\u5230 LangGraph Platform\uff0c\u8bf7\u521b\u5efa\u5982\u4e0b\u6587\u4ef6\u7ed3\u6784\uff1a</p> <pre><code>my-autogen-agent/\n\u251c\u2500\u2500 agent.py          # \u4f60\u7684\u4e3b\u667a\u80fd\u4ee3\u7406\u4ee3\u7801\n\u251c\u2500\u2500 requirements.txt  # Python \u4f9d\u8d56\n\u2514\u2500\u2500 langgraph.json   # LangGraph \u914d\u7f6e\n</code></pre> agent.pyrequirements.txtlanggraph.json <pre><code>import os\nimport autogen\nfrom langchain_core.messages import convert_to_openai_messages\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n# AutoGen \u914d\u7f6e\nconfig_list = [{\"model\": \"gpt-4o\", \"api_key\": os.environ[\"OPENAI_API_KEY\"]}]\n\nllm_config = {\n    \"timeout\": 600,\n    \"cache_seed\": 42,\n    \"config_list\": config_list,\n    \"temperature\": 0,\n}\n\n# \u521b\u5efa AutoGen \u667a\u80fd\u4ee3\u7406\nautogen_agent = autogen.AssistantAgent(\n    name=\"assistant\",\n    llm_config=llm_config,\n)\n\nuser_proxy = autogen.UserProxyAgent(\n    name=\"user_proxy\",\n    human_input_mode=\"NEVER\",\n    max_consecutive_auto_reply=10,\n    is_termination_msg=lambda x: x.get(\"content\", \"\").rstrip().endswith(\"TERMINATE\"),\n    code_execution_config={\n        \"work_dir\": \"/tmp/autogen_work\",\n        \"use_docker\": False,\n    },\n    llm_config=llm_config,\n    system_message=\"Reply TERMINATE if the task has been solved at full satisfaction.\",\n)\n\ndef call_autogen_agent(state: MessagesState):\n    \"\"\"\u8c03\u7528 AutoGen \u667a\u80fd\u4ee3\u7406\u7684\u8282\u70b9\u51fd\u6570\"\"\"\n    messages = convert_to_openai_messages(state[\"messages\"])\n    last_message = messages[-1]\n    carryover = messages[:-1] if len(messages) &gt; 1 else []\n\n    response = user_proxy.initiate_chat(\n        autogen_agent,\n        message=last_message,\n        carryover=carryover\n    )\n\n    final_content = response.chat_history[-1][\"content\"]\n    return {\"messages\": {\"role\": \"assistant\", \"content\": final_content}}\n\n# \u521b\u5efa\u5e76\u7f16\u8bd1\u56fe\ndef create_graph():\n    checkpointer = InMemorySaver()\n    builder = StateGraph(MessagesState)\n    builder.add_node(\"autogen\", call_autogen_agent)\n    builder.add_edge(START, \"autogen\")\n    return builder.compile(checkpointer=checkpointer)\n\n# \u5bfc\u51fa\u56fe\u4f9b LangGraph Platform \u4f7f\u7528\ngraph = create_graph()\n</code></pre> <pre><code>langgraph&gt;=0.1.0\nag2&gt;=0.2.0\nlangchain-core&gt;=0.1.0\nlangchain-openai&gt;=0.0.5\n</code></pre> <pre><code>{\n\"dependencies\": [\".\"],\n\"graphs\": {\n    \"autogen_agent\": \"./agent.py:graph\"\n},\n\"env\": \".env\"\n}\n</code></pre>"},{"location":"how-tos/autogen-integration/#5-langgraph-platform","title":"5. \u90e8\u7f72\u5230 LangGraph Platform","text":"<p>\u4f7f\u7528 LangGraph Platform CLI \u90e8\u7f72\u56fe\uff1a</p> <pre><code>pip install -U langgraph-cli\n</code></pre> <pre><code>langgraph deploy --config langgraph.json\n</code></pre>"},{"location":"how-tos/enable-tracing/","title":"\u4e3a\u5e94\u7528\u542f\u7528\u8ffd\u8e2a","text":"<p>\u8981\u4e3a\u5e94\u7528\u542f\u7528 \u8ffd\u8e2a\uff0c\u8bf7\u8bbe\u7f6e\u4ee5\u4e0b\u73af\u5883\u53d8\u91cf\uff1a</p> <pre><code>export LANGSMITH_TRACING=true\nexport LANGSMITH_API_KEY=&lt;your-api-key&gt;\n</code></pre> <p>\u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u9605 \u4f7f\u7528 LangGraph \u8fdb\u884c\u8ffd\u8e2a\u3002</p>"},{"location":"how-tos/enable-tracing/#_2","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>LangSmith \u4e2d\u7684\u56fe\u8fd0\u884c</li> <li>LangSmith \u53ef\u89c2\u6d4b\u6027\u5feb\u901f\u5165\u95e8</li> <li>\u8ffd\u8e2a\u6982\u5ff5\u6307\u5357</li> </ul>"},{"location":"how-tos/graph-api/","title":"\u5982\u4f55\u4f7f\u7528\u56fe API","text":"<p>\u672c\u6307\u5357\u6f14\u793a\u4e86 LangGraph \u56fe API \u7684\u57fa\u7840\u77e5\u8bc6\u3002\u5b83\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u72b6\u6001\uff0c\u4ee5\u53ca\u5982\u4f55\u7ec4\u5408\u5e38\u89c1\u7684\u56fe\u7ed3\u6784\uff0c\u5982\u5e8f\u5217\u3001\u5206\u652f\u548c\u5faa\u73af\u3002\u5b83\u8fd8\u6db5\u76d6\u4e86 LangGraph \u7684\u63a7\u5236\u529f\u80fd\uff0c\u5305\u62ec\u7528\u4e8e map-reduce \u5de5\u4f5c\u6d41\u7684 Send API \u548c\u7528\u4e8e\u7ed3\u5408\u72b6\u6001\u66f4\u65b0\u4e0e\u8de8\u8282\u70b9\"\u8df3\u8f6c\"\u7684 Command API\u3002</p>"},{"location":"how-tos/graph-api/#_1","title":"\u8bbe\u7f6e","text":"Python <p>\u5b89\u88c5 <code>langgraph</code>\uff1a</p> <pre><code>pip install -U langgraph\n</code></pre> JavaScript <p>\u5b89\u88c5 <code>langgraph</code>\uff1a</p> <pre><code>npm install @langchain/langgraph\n</code></pre> <p>\u8bbe\u7f6e LangSmith \u4ee5\u83b7\u5f97\u66f4\u597d\u7684\u8c03\u8bd5\u4f53\u9a8c</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u5347 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u8ba9\u4f60\u80fd\u591f\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528 \u2014 \u5728\u6587\u6863\u4e2d\u9605\u8bfb\u66f4\u591a\u5165\u95e8\u4fe1\u606f\u3002</p>"},{"location":"how-tos/graph-api/#_2","title":"\u5b9a\u4e49\u548c\u66f4\u65b0\u72b6\u6001","text":"<p>\u8fd9\u91cc\u6211\u4eec\u5c55\u793a\u5982\u4f55\u5728 LangGraph \u4e2d\u5b9a\u4e49\u548c\u66f4\u65b0\u72b6\u6001\u3002\u6211\u4eec\u5c06\u6f14\u793a\uff1a</p> <ol> <li>\u5982\u4f55\u4f7f\u7528\u72b6\u6001\u6765\u5b9a\u4e49\u56fe\u7684\u6a21\u5f0f</li> <li>\u5982\u4f55\u4f7f\u7528\u5f52\u7ea6\u5668\u6765\u63a7\u5236\u72b6\u6001\u66f4\u65b0\u7684\u5904\u7406\u65b9\u5f0f\u3002</li> </ol>"},{"location":"how-tos/graph-api/#_3","title":"\u5b9a\u4e49\u72b6\u6001","text":"Python <p>LangGraph \u4e2d\u7684\u72b6\u6001\u53ef\u4ee5\u662f <code>TypedDict</code>\u3001<code>Pydantic</code> \u6a21\u578b\u6216 dataclass\u3002\u4e0b\u9762\u6211\u4eec\u5c06\u4f7f\u7528 <code>TypedDict</code>\u3002\u6709\u5173\u4f7f\u7528 Pydantic \u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206\u3002</p> JavaScript <p>LangGraph \u4e2d\u7684\u72b6\u6001\u53ef\u4ee5\u4f7f\u7528 Zod \u6a21\u5f0f\u5b9a\u4e49\u3002\u4e0b\u9762\u6211\u4eec\u5c06\u4f7f\u7528 Zod\u3002\u6709\u5173\u4f7f\u7528\u5176\u4ed6\u65b9\u6cd5\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u56fe\u5c06\u5177\u6709\u76f8\u540c\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\uff0c\u72b6\u6001\u51b3\u5b9a\u8be5\u6a21\u5f0f\u3002\u6709\u5173\u5982\u4f55\u5b9a\u4e49\u4e0d\u540c\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206\u3002</p> <p>\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u4f7f\u7528\u6d88\u606f\u7684\u7b80\u5355\u793a\u4f8b\u3002\u8fd9\u4ee3\u8868\u4e86\u8bb8\u591a LLM \u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u7684\u901a\u7528\u8868\u793a\u65b9\u5f0f\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u6982\u5ff5\u9875\u9762\u3002</p> Python <pre><code>from langchain_core.messages import AnyMessage\nfrom typing_extensions import TypedDict\n\nclass State(TypedDict):\n    messages: list[AnyMessage]\n    extra_field: int\n</code></pre> <p>\u6b64\u72b6\u6001\u8ddf\u8e2a\u4e00\u4e2a\u6d88\u606f\u5bf9\u8c61\u5217\u8868\uff0c\u4ee5\u53ca\u4e00\u4e2a\u989d\u5916\u7684\u6574\u6570\u5b57\u6bb5\u3002</p> JavaScript <pre><code>import { BaseMessage } from \"@langchain/core/messages\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  messages: z.array(z.custom&lt;BaseMessage&gt;()),\n  extraField: z.number(),\n});\n</code></pre> <p>\u6b64\u72b6\u6001\u8ddf\u8e2a\u4e00\u4e2a\u6d88\u606f\u5bf9\u8c61\u5217\u8868\uff0c\u4ee5\u53ca\u4e00\u4e2a\u989d\u5916\u7684\u6574\u6570\u5b57\u6bb5\u3002</p>"},{"location":"how-tos/graph-api/#_4","title":"\u66f4\u65b0\u72b6\u6001","text":"Python <p>\u8ba9\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u5305\u542b\u5355\u4e2a\u8282\u70b9\u7684\u793a\u4f8b\u56fe\u3002\u6211\u4eec\u7684\u8282\u70b9\u53ea\u662f\u4e00\u4e2a\u8bfb\u53d6\u56fe\u72b6\u6001\u5e76\u5bf9\u5176\u8fdb\u884c\u66f4\u65b0\u7684 Python \u51fd\u6570\u3002\u6b64\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u59cb\u7ec8\u662f\u72b6\u6001\uff1a</p> <pre><code>from langchain_core.messages import AIMessage\n\ndef node(state: State):\n    messages = state[\"messages\"]\n    new_message = AIMessage(\"Hello!\")\n    return {\"messages\": messages + [new_message], \"extra_field\": 10}\n</code></pre> <p>\u6b64\u8282\u70b9\u53ea\u662f\u5c06\u4e00\u6761\u6d88\u606f\u8ffd\u52a0\u5230\u6211\u4eec\u7684\u6d88\u606f\u5217\u8868\u4e2d\uff0c\u5e76\u586b\u5145\u4e00\u4e2a\u989d\u5916\u7684\u5b57\u6bb5\u3002</p> JavaScript <p>\u8ba9\u6211\u4eec\u6784\u5efa\u4e00\u4e2a\u5305\u542b\u5355\u4e2a\u8282\u70b9\u7684\u793a\u4f8b\u56fe\u3002\u6211\u4eec\u7684\u8282\u70b9\u53ea\u662f\u4e00\u4e2a\u8bfb\u53d6\u56fe\u72b6\u6001\u5e76\u5bf9\u5176\u8fdb\u884c\u66f4\u65b0\u7684 TypeScript \u51fd\u6570\u3002\u6b64\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u59cb\u7ec8\u662f\u72b6\u6001\uff1a</p> <pre><code>import { AIMessage } from \"@langchain/core/messages\";\n\nconst node = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  const messages = state.messages;\n  const newMessage = new AIMessage(\"Hello!\");\n  return { messages: messages.concat([newMessage]), extraField: 10 };\n};\n</code></pre> <p>\u6b64\u8282\u70b9\u53ea\u662f\u5c06\u4e00\u6761\u6d88\u606f\u8ffd\u52a0\u5230\u6211\u4eec\u7684\u6d88\u606f\u5217\u8868\u4e2d\uff0c\u5e76\u586b\u5145\u4e00\u4e2a\u989d\u5916\u7684\u5b57\u6bb5\u3002</p> <p>Important</p> <p>\u8282\u70b9\u5e94\u8be5\u76f4\u63a5\u8fd4\u56de\u5bf9\u72b6\u6001\u7684\u66f4\u65b0\uff0c\u800c\u4e0d\u662f\u4fee\u6539\u72b6\u6001\u3002</p> Python <p>\u63a5\u4e0b\u6765\u8ba9\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u6b64\u8282\u70b9\u7684\u7b80\u5355\u56fe\u3002\u6211\u4eec\u4f7f\u7528 StateGraph \u6765\u5b9a\u4e49\u4e00\u4e2a\u5728\u6b64\u72b6\u6001\u4e0a\u64cd\u4f5c\u7684\u56fe\u3002\u7136\u540e\u6211\u4eec\u4f7f\u7528 add_node \u586b\u5145\u6211\u4eec\u7684\u56fe\u3002</p> <pre><code>from langgraph.graph import StateGraph\n\nbuilder = StateGraph(State)\nbuilder.add_node(node)\nbuilder.set_entry_point(\"node\")\ngraph = builder.compile()\n</code></pre> JavaScript <p>\u63a5\u4e0b\u6765\u8ba9\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5305\u542b\u6b64\u8282\u70b9\u7684\u7b80\u5355\u56fe\u3002\u6211\u4eec\u4f7f\u7528 StateGraph \u6765\u5b9a\u4e49\u4e00\u4e2a\u5728\u6b64\u72b6\u6001\u4e0a\u64cd\u4f5c\u7684\u56fe\u3002\u7136\u540e\u6211\u4eec\u4f7f\u7528 addNode \u586b\u5145\u6211\u4eec\u7684\u56fe\u3002</p> <pre><code>import { StateGraph } from \"@langchain/langgraph\";\n\nconst graph = new StateGraph(State)\n  .addNode(\"node\", node)\n  .addEdge(\"__start__\", \"node\")\n  .compile();\n</code></pre> <p>LangGraph \u63d0\u4f9b\u4e86\u7528\u4e8e\u53ef\u89c6\u5316\u56fe\u7684\u5185\u7f6e\u5de5\u5177\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u4e00\u4e0b\u6211\u4eec\u7684\u56fe\u3002\u6709\u5173\u53ef\u89c6\u5316\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206\u3002</p> Python <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> JavaScript <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <p>\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u56fe\u53ea\u6267\u884c\u5355\u4e2a\u8282\u70b9\u3002\u8ba9\u6211\u4eec\u8fdb\u884c\u4e00\u4e2a\u7b80\u5355\u7684\u8c03\u7528\uff1a</p> Python <pre><code>from langchain_core.messages import HumanMessage\n\nresult = graph.invoke({\"messages\": [HumanMessage(\"Hi\")]})\nresult\n</code></pre> <pre><code>{'messages': [HumanMessage(content='Hi'), AIMessage(content='Hello!')], 'extra_field': 10}\n</code></pre> JavaScript <pre><code>import { HumanMessage } from \"@langchain/core/messages\";\n\nconst result = await graph.invoke({ messages: [new HumanMessage(\"Hi\")], extraField: 0 });\nconsole.log(result);\n</code></pre> <pre><code>{ messages: [HumanMessage { content: 'Hi' }, AIMessage { content: 'Hello!' }], extraField: 10 }\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff1a</p> <ul> <li>\u6211\u4eec\u901a\u8fc7\u66f4\u65b0\u72b6\u6001\u7684\u5355\u4e2a\u952e\u6765\u542f\u52a8\u8c03\u7528\u3002</li> <li>\u6211\u4eec\u5728\u8c03\u7528\u7ed3\u679c\u4e2d\u6536\u5230\u5b8c\u6574\u7684\u72b6\u6001\u3002</li> </ul> Python <p>\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u7ecf\u5e38\u901a\u8fc7 pretty-print \u68c0\u67e5\u6d88\u606f\u5bf9\u8c61\u7684\u5185\u5bb9\uff1a</p> <pre><code>for message in result[\"messages\"]:\n    message.pretty_print()\n</code></pre> <pre><code>================================ Human Message ================================\n\nHi\n================================== Ai Message ==================================\n\nHello!\n</code></pre> JavaScript <p>\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c\u6211\u4eec\u7ecf\u5e38\u901a\u8fc7\u65e5\u5fd7\u68c0\u67e5\u6d88\u606f\u5bf9\u8c61\u7684\u5185\u5bb9\uff1a</p> <pre><code>for (const message of result.messages) {\n  console.log(`${message.getType()}: ${message.content}`);\n}\n</code></pre> <pre><code>human: Hi\nai: Hello!\n</code></pre>"},{"location":"how-tos/graph-api/#_5","title":"\u4f7f\u7528\u5f52\u7ea6\u5668\u5904\u7406\u72b6\u6001\u66f4\u65b0","text":"<p>\u72b6\u6001\u4e2d\u7684\u6bcf\u4e2a\u952e\u90fd\u53ef\u4ee5\u6709\u81ea\u5df1\u72ec\u7acb\u7684\u5f52\u7ea6\u5668\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u63a7\u5236\u5982\u4f55\u5e94\u7528\u6765\u81ea\u8282\u70b9\u7684\u66f4\u65b0\u3002\u5982\u679c\u6ca1\u6709\u660e\u786e\u6307\u5b9a\u5f52\u7ea6\u5668\u51fd\u6570\uff0c\u5219\u5047\u5b9a\u5bf9\u8be5\u952e\u7684\u6240\u6709\u66f4\u65b0\u90fd\u5e94\u8986\u76d6\u5b83\u3002</p> Python <p>\u5bf9\u4e8e <code>TypedDict</code> \u72b6\u6001\u6a21\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u5f52\u7ea6\u5668\u51fd\u6570\u6ce8\u91ca\u72b6\u6001\u7684\u76f8\u5e94\u5b57\u6bb5\u6765\u5b9a\u4e49\u5f52\u7ea6\u5668\u3002</p> <p>\u5728\u524d\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7684\u8282\u70b9\u901a\u8fc7\u5411\u72b6\u6001\u4e2d\u7684 <code>\"messages\"</code> \u952e\u8ffd\u52a0\u6d88\u606f\u6765\u66f4\u65b0\u5b83\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5411\u6b64\u952e\u6dfb\u52a0\u4e00\u4e2a\u5f52\u7ea6\u5668\uff0c\u4ee5\u4fbf\u81ea\u52a8\u8ffd\u52a0\u66f4\u65b0\uff1a</p> <pre><code>from typing_extensions import Annotated\n\ndef add(left, right):\n    \"\"\"\u4e5f\u53ef\u4ee5\u4ece `operator` \u5185\u7f6e\u6a21\u5757\u5bfc\u5165 `add`\u3002\"\"\"\n    return left + right\n\nclass State(TypedDict):\n    # highlight-next-line\n    messages: Annotated[list[AnyMessage], add]\n    extra_field: int\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u7684\u8282\u70b9\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a</p> <pre><code>def node(state: State):\n    new_message = AIMessage(\"Hello!\")\n    # highlight-next-line\n    return {\"messages\": [new_message], \"extra_field\": 10}\n</code></pre> JavaScript <p>\u5bf9\u4e8e Zod \u72b6\u6001\u6a21\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728\u6a21\u5f0f\u5b57\u6bb5\u4e0a\u4f7f\u7528\u7279\u6b8a\u7684 <code>.langgraph.reducer()</code> \u65b9\u6cd5\u6765\u5b9a\u4e49\u5f52\u7ea6\u5668\u3002</p> <p>\u5728\u524d\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u7684\u8282\u70b9\u901a\u8fc7\u5411\u72b6\u6001\u4e2d\u7684 <code>\"messages\"</code> \u952e\u8ffd\u52a0\u6d88\u606f\u6765\u66f4\u65b0\u5b83\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5411\u6b64\u952e\u6dfb\u52a0\u4e00\u4e2a\u5f52\u7ea6\u5668\uff0c\u4ee5\u4fbf\u81ea\u52a8\u8ffd\u52a0\u66f4\u65b0\uff1a</p> <pre><code>import \"@langchain/langgraph/zod\";\n\nconst State = z.object({\n  // highlight-next-line\n  messages: z.array(z.custom&lt;BaseMessage&gt;()).langgraph.reducer((x, y) =&gt; x.concat(y)),\n  extraField: z.number(),\n});\n</code></pre> <p>\u73b0\u5728\u6211\u4eec\u7684\u8282\u70b9\u53ef\u4ee5\u7b80\u5316\u4e3a\uff1a</p> <pre><code>const node = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  const newMessage = new AIMessage(\"Hello!\");\n  // highlight-next-line\n  return { messages: [newMessage], extraField: 10 };\n};\n</code></pre> Python <pre><code>from langgraph.graph import START\n\ngraph = StateGraph(State).add_node(node).add_edge(START, \"node\").compile()\n\nresult = graph.invoke({\"messages\": [HumanMessage(\"Hi\")]})\n\nfor message in result[\"messages\"]:\n    message.pretty_print()\n</code></pre> <pre><code>================================ Human Message ================================\n\nHi\n================================== Ai Message ==================================\n\nHello!\n</code></pre> JavaScript <pre><code>import { START } from \"@langchain/langgraph\";\n\nconst graph = new StateGraph(State)\n  .addNode(\"node\", node)\n  .addEdge(START, \"node\")\n  .compile();\n\nconst result = await graph.invoke({ messages: [new HumanMessage(\"Hi\")] });\n\nfor (const message of result.messages) {\n  console.log(`${message.getType()}: ${message.content}`);\n}\n</code></pre> <pre><code>human: Hi\nai: Hello!\n</code></pre>"},{"location":"how-tos/graph-api/#messagesstate","title":"MessagesState","text":"<p>\u5728\u5b9e\u8df5\u4e2d\uff0c\u66f4\u65b0\u6d88\u606f\u5217\u8868\u8fd8\u6709\u4e00\u4e9b\u989d\u5916\u7684\u8003\u8651\u56e0\u7d20\uff1a</p> <ul> <li>\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u66f4\u65b0\u72b6\u6001\u4e2d\u7684\u73b0\u6709\u6d88\u606f\u3002</li> <li>\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u63a5\u53d7\u6d88\u606f\u683c\u5f0f\u7684\u7b80\u5199\uff0c\u4f8b\u5982 OpenAI \u683c\u5f0f\u3002</li> </ul> Python <p>LangGraph \u5305\u542b\u4e00\u4e2a\u5185\u7f6e\u7684\u5f52\u7ea6\u5668 <code>add_messages</code>\uff0c\u5b83\u5904\u7406\u8fd9\u4e9b\u8003\u8651\u56e0\u7d20\uff1a</p> <pre><code>from langgraph.graph.message import add_messages\n\nclass State(TypedDict):\n    # highlight-next-line\n    messages: Annotated[list[AnyMessage], add_messages]\n    extra_field: int\n\ndef node(state: State):\n    new_message = AIMessage(\"Hello!\")\n    return {\"messages\": [new_message], \"extra_field\": 10}\n\ngraph = StateGraph(State).add_node(node).set_entry_point(\"node\").compile()\n</code></pre> <pre><code># highlight-next-line\ninput_message = {\"role\": \"user\", \"content\": \"Hi\"}\n\nresult = graph.invoke({\"messages\": [input_message]})\n\nfor message in result[\"messages\"]:\n    message.pretty_print()\n</code></pre> <pre><code>================================ Human Message ================================\n\nHi\n================================== Ai Message ==================================\n\nHello!\n</code></pre> <p>\u8fd9\u662f\u6d89\u53ca\u804a\u5929\u6a21\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u7684\u901a\u7528\u8868\u793a\u65b9\u5f0f\u3002LangGraph \u5305\u542b\u4e00\u4e2a\u9884\u6784\u5efa\u7684 <code>MessagesState</code> \u4ee5\u65b9\u4fbf\u4f7f\u7528\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u6709\uff1a</p> <pre><code>from langgraph.graph import MessagesState\n\nclass State(MessagesState):\n    extra_field: int\n</code></pre> JavaScript <p>LangGraph \u5305\u542b\u4e00\u4e2a\u5185\u7f6e\u7684 <code>MessagesZodState</code>\uff0c\u5b83\u5904\u7406\u8fd9\u4e9b\u8003\u8651\u56e0\u7d20\uff1a</p> <pre><code>import { MessagesZodState } from \"@langchain/langgraph\";\n\nconst State = z.object({\n  // highlight-next-line\n  messages: MessagesZodState.shape.messages,\n  extraField: z.number(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"node\", (state) =&gt; {\n    const newMessage = new AIMessage(\"Hello!\");\n    return { messages: [newMessage], extraField: 10 };\n  })\n  .addEdge(START, \"node\")\n  .compile();\n</code></pre> <pre><code>// highlight-next-line\nconst inputMessage = { role: \"user\", content: \"Hi\" };\n\nconst result = await graph.invoke({ messages: [inputMessage] });\n\nfor (const message of result.messages) {\n  console.log(`${message.getType()}: ${message.content}`);\n}\n</code></pre> <pre><code>human: Hi\nai: Hello!\n</code></pre> <p>\u8fd9\u662f\u6d89\u53ca\u804a\u5929\u6a21\u578b\u7684\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u7684\u901a\u7528\u8868\u793a\u65b9\u5f0f\u3002LangGraph \u5305\u542b\u8fd9\u4e2a\u9884\u6784\u5efa\u7684 <code>MessagesZodState</code> \u4ee5\u65b9\u4fbf\u4f7f\u7528\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u6709\uff1a</p> <pre><code>import { MessagesZodState } from \"@langchain/langgraph\";\n\nconst State = MessagesZodState.extend({\n  extraField: z.number(),\n});\n</code></pre>"},{"location":"how-tos/graph-api/#_6","title":"\u5b9a\u4e49\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>StateGraph</code> \u4f7f\u7528\u5355\u4e2a\u6a21\u5f0f\u64cd\u4f5c\uff0c\u6240\u6709\u8282\u70b9\u90fd\u5e94\u4f7f\u7528\u8be5\u6a21\u5f0f\u8fdb\u884c\u901a\u4fe1\u3002\u4f46\u662f\uff0c\u4e5f\u53ef\u4ee5\u4e3a\u56fe\u5b9a\u4e49\u4e0d\u540c\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002</p> <p>\u5f53\u6307\u5b9a\u4e0d\u540c\u7684\u6a21\u5f0f\u65f6\uff0c\u5185\u90e8\u6a21\u5f0f\u4ecd\u5c06\u7528\u4e8e\u8282\u70b9\u4e4b\u95f4\u7684\u901a\u4fe1\u3002\u8f93\u5165\u6a21\u5f0f\u786e\u4fdd\u63d0\u4f9b\u7684\u8f93\u5165\u4e0e\u9884\u671f\u7ed3\u6784\u5339\u914d\uff0c\u800c\u8f93\u51fa\u6a21\u5f0f\u6839\u636e\u5b9a\u4e49\u7684\u8f93\u51fa\u6a21\u5f0f\u8fc7\u6ee4\u5185\u90e8\u6570\u636e\u4ee5\u4ec5\u8fd4\u56de\u76f8\u5173\u4fe1\u606f\u3002</p> <p>\u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u770b\u5230\u5982\u4f55\u5b9a\u4e49\u4e0d\u540c\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u3002</p> Python <pre><code>from langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n\n# \u5b9a\u4e49\u8f93\u5165\u6a21\u5f0f\nclass InputState(TypedDict):\n    question: str\n\n# \u5b9a\u4e49\u8f93\u51fa\u6a21\u5f0f\nclass OutputState(TypedDict):\n    answer: str\n\n# \u5b9a\u4e49\u603b\u4f53\u6a21\u5f0f\uff0c\u7ed3\u5408\u8f93\u5165\u548c\u8f93\u51fa\nclass OverallState(InputState, OutputState):\n    pass\n\n# \u5b9a\u4e49\u5904\u7406\u8f93\u5165\u5e76\u751f\u6210\u7b54\u6848\u7684\u8282\u70b9\ndef answer_node(state: InputState):\n    # \u793a\u4f8b\u7b54\u6848\u548c\u4e00\u4e2a\u989d\u5916\u7684\u952e\n    return {\"answer\": \"bye\", \"question\": state[\"question\"]}\n\n# \u4f7f\u7528\u6307\u5b9a\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u6784\u5efa\u56fe\nbuilder = StateGraph(OverallState, input_schema=InputState, output_schema=OutputState)\nbuilder.add_node(answer_node)  # \u6dfb\u52a0\u7b54\u6848\u8282\u70b9\nbuilder.add_edge(START, \"answer_node\")  # \u5b9a\u4e49\u8d77\u59cb\u8fb9\nbuilder.add_edge(\"answer_node\", END)  # \u5b9a\u4e49\u7ed3\u675f\u8fb9\ngraph = builder.compile()  # \u7f16\u8bd1\u56fe\n\n# \u4f7f\u7528\u8f93\u5165\u8c03\u7528\u56fe\u5e76\u6253\u5370\u7ed3\u679c\nprint(graph.invoke({\"question\": \"hi\"}))\n</code></pre> <pre><code>{'answer': 'bye'}\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u8f93\u5165\u6a21\u5f0f\nconst InputState = z.object({\n  question: z.string(),\n});\n\n// \u5b9a\u4e49\u8f93\u51fa\u6a21\u5f0f\nconst OutputState = z.object({\n  answer: z.string(),\n});\n\n// \u5b9a\u4e49\u603b\u4f53\u6a21\u5f0f\uff0c\u7ed3\u5408\u8f93\u5165\u548c\u8f93\u51fa\nconst OverallState = InputState.merge(OutputState);\n\n// \u4f7f\u7528\u6307\u5b9a\u7684\u8f93\u5165\u548c\u8f93\u51fa\u6a21\u5f0f\u6784\u5efa\u56fe\nconst graph = new StateGraph({\n  input: InputState,\n  output: OutputState,\n  state: OverallState,\n})\n  .addNode(\"answerNode\", (state) =&gt; {\n    // \u793a\u4f8b\u7b54\u6848\u548c\u4e00\u4e2a\u989d\u5916\u7684\u952e\n    return { answer: \"bye\", question: state.question };\n  })\n  .addEdge(START, \"answerNode\")\n  .addEdge(\"answerNode\", END)\n  .compile();\n\n// \u4f7f\u7528\u8f93\u5165\u8c03\u7528\u56fe\u5e76\u6253\u5370\u7ed3\u679c\nconsole.log(await graph.invoke({ question: \"hi\" }));\n</code></pre> <pre><code>{ answer: 'bye' }\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0cinvoke \u7684\u8f93\u51fa\u4ec5\u5305\u542b\u8f93\u51fa\u6a21\u5f0f\u3002</p>"},{"location":"how-tos/graph-api/#_7","title":"\u5728\u8282\u70b9\u4e4b\u95f4\u4f20\u9012\u79c1\u6709\u72b6\u6001","text":"<p>\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u8282\u70b9\u4ea4\u6362\u5bf9\u4e2d\u95f4\u903b\u8f91\u81f3\u5173\u91cd\u8981\u4f46\u4e0d\u9700\u8981\u6210\u4e3a\u56fe\u4e3b\u6a21\u5f0f\u4e00\u90e8\u5206\u7684\u4fe1\u606f\u3002\u8fd9\u4e9b\u79c1\u6709\u6570\u636e\u4e0e\u56fe\u7684\u6574\u4f53\u8f93\u5165/\u8f93\u51fa\u65e0\u5173\uff0c\u53ea\u5e94\u5728\u67d0\u4e9b\u8282\u70b9\u4e4b\u95f4\u5171\u4eab\u3002</p> <p>\u4e0b\u9762\uff0c\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u7531\u4e09\u4e2a\u8282\u70b9\uff08node_1\u3001node_2 \u548c node_3\uff09\u7ec4\u6210\u7684\u793a\u4f8b\u987a\u5e8f\u56fe\uff0c\u5176\u4e2d\u79c1\u6709\u6570\u636e\u5728\u524d\u4e24\u4e2a\u6b65\u9aa4\uff08node_1 \u548c node_2\uff09\u4e4b\u95f4\u4f20\u9012\uff0c\u800c\u7b2c\u4e09\u4e2a\u6b65\u9aa4\uff08node_3\uff09\u53ea\u80fd\u8bbf\u95ee\u516c\u5171\u7684\u603b\u4f53\u72b6\u6001\u3002</p> Python <pre><code>from langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\n\n# \u56fe\u7684\u603b\u4f53\u72b6\u6001\uff08\u8fd9\u662f\u8de8\u8282\u70b9\u5171\u4eab\u7684\u516c\u5171\u72b6\u6001\uff09\nclass OverallState(TypedDict):\n    a: str\n\n# node_1 \u7684\u8f93\u51fa\u5305\u542b\u4e0d\u5c5e\u4e8e\u603b\u4f53\u72b6\u6001\u7684\u79c1\u6709\u6570\u636e\nclass Node1Output(TypedDict):\n    private_data: str\n\n# \u79c1\u6709\u6570\u636e\u4ec5\u5728 node_1 \u548c node_2 \u4e4b\u95f4\u5171\u4eab\ndef node_1(state: OverallState) -&gt; Node1Output:\n    output = {\"private_data\": \"set by node_1\"}\n    print(f\"Entered node `node_1`:\\n\\tInput: {state}.\\n\\tReturned: {output}\")\n    return output\n\n# Node 2 \u8f93\u5165\u53ea\u8bf7\u6c42 node_1 \u4e4b\u540e\u53ef\u7528\u7684\u79c1\u6709\u6570\u636e\nclass Node2Input(TypedDict):\n    private_data: str\n\ndef node_2(state: Node2Input) -&gt; OverallState:\n    output = {\"a\": \"set by node_2\"}\n    print(f\"Entered node `node_2`:\\n\\tInput: {state}.\\n\\tReturned: {output}\")\n    return output\n\n# Node 3 \u53ea\u80fd\u8bbf\u95ee\u603b\u4f53\u72b6\u6001\uff08\u65e0\u6cd5\u8bbf\u95ee\u6765\u81ea node_1 \u7684\u79c1\u6709\u6570\u636e\uff09\ndef node_3(state: OverallState) -&gt; OverallState:\n    output = {\"a\": \"set by node_3\"}\n    print(f\"Entered node `node_3`:\\n\\tInput: {state}.\\n\\tReturned: {output}\")\n    return output\n\n# \u6309\u987a\u5e8f\u8fde\u63a5\u8282\u70b9\n# node_2 \u63a5\u53d7\u6765\u81ea node_1 \u7684\u79c1\u6709\u6570\u636e\uff0c\u800c\n# node_3 \u770b\u4e0d\u5230\u79c1\u6709\u6570\u636e\u3002\nbuilder = StateGraph(OverallState).add_sequence([node_1, node_2, node_3])\nbuilder.add_edge(START, \"node_1\")\ngraph = builder.compile()\n\n# \u4f7f\u7528\u521d\u59cb\u72b6\u6001\u8c03\u7528\u56fe\nresponse = graph.invoke(\n    {\n        \"a\": \"set at start\",\n    }\n)\n\nprint()\nprint(f\"Output of graph invocation: {response}\")\n</code></pre> <pre><code>Entered node `node_1`:\n    Input: {'a': 'set at start'}.\n    Returned: {'private_data': 'set by node_1'}\nEntered node `node_2`:\n    Input: {'private_data': 'set by node_1'}.\n    Returned: {'a': 'set by node_2'}\nEntered node `node_3`:\n    Input: {'a': 'set by node_2'}.\n    Returned: {'a': 'set by node_3'}\n\nOutput of graph invocation: {'a': 'set by node_3'}\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u56fe\u7684\u603b\u4f53\u72b6\u6001\uff08\u8fd9\u662f\u8de8\u8282\u70b9\u5171\u4eab\u7684\u516c\u5171\u72b6\u6001\uff09\nconst OverallState = z.object({\n  a: z.string(),\n});\n\n// node1 \u7684\u8f93\u51fa\u5305\u542b\u4e0d\u5c5e\u4e8e\u603b\u4f53\u72b6\u6001\u7684\u79c1\u6709\u6570\u636e\nconst Node1Output = z.object({\n  privateData: z.string(),\n});\n\n// \u79c1\u6709\u6570\u636e\u4ec5\u5728 node1 \u548c node2 \u4e4b\u95f4\u5171\u4eab\nconst node1 = (state: z.infer&lt;typeof OverallState&gt;): z.infer&lt;typeof Node1Output&gt; =&gt; {\n  const output = { privateData: \"set by node1\" };\n  console.log(`Entered node 'node1':\\n\\tInput: ${JSON.stringify(state)}.\\n\\tReturned: ${JSON.stringify(output)}`);\n  return output;\n};\n\n// Node 2 \u8f93\u5165\u53ea\u8bf7\u6c42 node1 \u4e4b\u540e\u53ef\u7528\u7684\u79c1\u6709\u6570\u636e\nconst Node2Input = z.object({\n  privateData: z.string(),\n});\n\nconst node2 = (state: z.infer&lt;typeof Node2Input&gt;): z.infer&lt;typeof OverallState&gt; =&gt; {\n  const output = { a: \"set by node2\" };\n  console.log(`Entered node 'node2':\\n\\tInput: ${JSON.stringify(state)}.\\n\\tReturned: ${JSON.stringify(output)}`);\n  return output;\n};\n\n// Node 3 \u53ea\u80fd\u8bbf\u95ee\u603b\u4f53\u72b6\u6001\uff08\u65e0\u6cd5\u8bbf\u95ee\u6765\u81ea node1 \u7684\u79c1\u6709\u6570\u636e\uff09\nconst node3 = (state: z.infer&lt;typeof OverallState&gt;): z.infer&lt;typeof OverallState&gt; =&gt; {\n  const output = { a: \"set by node3\" };\n  console.log(`Entered node 'node3':\\n\\tInput: ${JSON.stringify(state)}.\\n\\tReturned: ${JSON.stringify(output)}`);\n  return output;\n};\n\n// \u6309\u987a\u5e8f\u8fde\u63a5\u8282\u70b9\n// node2 \u63a5\u53d7\u6765\u81ea node1 \u7684\u79c1\u6709\u6570\u636e\uff0c\u800c\n// node3 \u770b\u4e0d\u5230\u79c1\u6709\u6570\u636e\u3002\nconst graph = new StateGraph({\n  state: OverallState,\n  nodes: {\n    node1: { action: node1, output: Node1Output },\n    node2: { action: node2, input: Node2Input },\n    node3: { action: node3 },\n  }\n})\n  .addEdge(START, \"node1\")\n  .addEdge(\"node1\", \"node2\")\n  .addEdge(\"node2\", \"node3\")\n  .addEdge(\"node3\", END)\n  .compile();\n\n// \u4f7f\u7528\u521d\u59cb\u72b6\u6001\u8c03\u7528\u56fe\nconst response = await graph.invoke({ a: \"set at start\" });\n\nconsole.log(`\\nOutput of graph invocation: ${JSON.stringify(response)}`);\n</code></pre> <pre><code>Entered node 'node1':\n    Input: {\"a\":\"set at start\"}.\n    Returned: {\"privateData\":\"set by node1\"}\nEntered node 'node2':\n    Input: {\"privateData\":\"set by node1\"}.\n    Returned: {\"a\":\"set by node2\"}\nEntered node 'node3':\n    Input: {\"a\":\"set by node2\"}.\n    Returned: {\"a\":\"set by node3\"}\n\nOutput of graph invocation: {\"a\":\"set by node3\"}\n</code></pre> Python"},{"location":"how-tos/graph-api/#pydantic","title":"\u4f7f\u7528 Pydantic \u6a21\u578b\u4f5c\u4e3a\u56fe\u72b6\u6001","text":"<p>StateGraph \u5728\u521d\u59cb\u5316\u65f6\u63a5\u53d7\u4e00\u4e2a <code>state_schema</code> \u53c2\u6570\uff0c\u7528\u4e8e\u6307\u5b9a\u56fe\u4e2d\u8282\u70b9\u53ef\u4ee5\u8bbf\u95ee\u548c\u66f4\u65b0\u7684\u72b6\u6001\"\u5f62\u72b6\"\u3002</p> <p>\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u901a\u5e38\u4f7f\u7528 Python \u539f\u751f\u7684 <code>TypedDict</code> \u6216 <code>dataclass</code> \u4f5c\u4e3a <code>state_schema</code>\uff0c\u4f46 <code>state_schema</code> \u53ef\u4ee5\u662f\u4efb\u4f55\u7c7b\u578b\u3002</p> <p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u770b\u5230\u5982\u4f55\u4f7f\u7528 Pydantic BaseModel \u4f5c\u4e3a <code>state_schema</code>\uff0c\u4ee5\u5728**\u8f93\u5165**\u4e0a\u6dfb\u52a0\u8fd0\u884c\u65f6\u9a8c\u8bc1\u3002</p> <p>\u5df2\u77e5\u9650\u5236</p> <ul> <li>\u76ee\u524d\uff0c\u56fe\u7684\u8f93\u51fa\u5c06**\u4e0d\u4f1a**\u662f pydantic \u6a21\u578b\u7684\u5b9e\u4f8b\u3002</li> <li>\u8fd0\u884c\u65f6\u9a8c\u8bc1\u4ec5\u5728\u8282\u70b9\u7684\u8f93\u5165\u4e0a\u8fdb\u884c\uff0c\u800c\u4e0d\u5728\u8f93\u51fa\u4e0a\u8fdb\u884c\u3002</li> <li>pydantic \u7684\u9a8c\u8bc1\u9519\u8bef\u8ffd\u8e2a\u4e0d\u4f1a\u663e\u793a\u9519\u8bef\u51fa\u73b0\u5728\u54ea\u4e2a\u8282\u70b9\u4e2d\u3002</li> <li>Pydantic \u7684\u9012\u5f52\u9a8c\u8bc1\u53ef\u80fd\u4f1a\u5f88\u6162\u3002\u5bf9\u4e8e\u5bf9\u6027\u80fd\u654f\u611f\u7684\u5e94\u7528\u7a0b\u5e8f\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u8003\u8651\u4f7f\u7528 <code>dataclass</code> \u4ee3\u66ff\u3002</li> </ul> <pre><code>from langgraph.graph import StateGraph, START, END\nfrom typing_extensions import TypedDict\nfrom pydantic import BaseModel\n\n# \u56fe\u7684\u603b\u4f53\u72b6\u6001\uff08\u8fd9\u662f\u8de8\u8282\u70b9\u5171\u4eab\u7684\u516c\u5171\u72b6\u6001\uff09\nclass OverallState(BaseModel):\n    a: str\n\ndef node(state: OverallState):\n    return {\"a\": \"goodbye\"}\n\n# \u6784\u5efa\u72b6\u6001\u56fe\nbuilder = StateGraph(OverallState)\nbuilder.add_node(node)  # node_1 \u662f\u7b2c\u4e00\u4e2a\u8282\u70b9\nbuilder.add_edge(START, \"node\")  # \u4ee5 node_1 \u542f\u52a8\u56fe\nbuilder.add_edge(\"node\", END)  # \u5728 node_1 \u4e4b\u540e\u7ed3\u675f\u56fe\ngraph = builder.compile()\n\n# \u4f7f\u7528\u6709\u6548\u8f93\u5165\u6d4b\u8bd5\u56fe\ngraph.invoke({\"a\": \"hello\"})\n</code></pre> <p>\u4f7f\u7528**\u65e0\u6548**\u8f93\u5165\u8c03\u7528\u56fe</p> <pre><code>try:\n    graph.invoke({\"a\": 123})  # \u5e94\u8be5\u662f\u5b57\u7b26\u4e32\nexcept Exception as e:\n    print(\"An exception was raised because `a` is an integer rather than a string.\")\n    print(e)\n</code></pre> <pre><code>An exception was raised because `a` is an integer rather than a string.\n1 validation error for OverallState\na\n  Input should be a valid string [type=string_type, input_value=123, input_type=int]\n    For further information visit https://errors.pydantic.dev/2.9/v/string_type\n</code></pre> <p>\u6709\u5173 Pydantic \u6a21\u578b\u72b6\u6001\u7684\u5176\u4ed6\u529f\u80fd\uff0c\u8bf7\u53c2\u89c1\u4e0b\u6587\uff1a</p> \u5e8f\u5217\u5316\u884c\u4e3a <p>\u5f53\u4f7f\u7528 Pydantic \u6a21\u578b\u4f5c\u4e3a\u72b6\u6001\u6a21\u5f0f\u65f6\uff0c\u4e86\u89e3\u5e8f\u5217\u5316\u7684\u5de5\u4f5c\u539f\u7406\u975e\u5e38\u91cd\u8981\uff0c\u7279\u522b\u662f\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\uff1a - \u5c06 Pydantic \u5bf9\u8c61\u4f5c\u4e3a\u8f93\u5165\u4f20\u9012 - \u4ece\u56fe\u63a5\u6536\u8f93\u51fa - \u4f7f\u7528\u5d4c\u5957\u7684 Pydantic \u6a21\u578b</p> <p>\u8ba9\u6211\u4eec\u770b\u770b\u8fd9\u4e9b\u884c\u4e3a\u7684\u5b9e\u9645\u60c5\u51b5\u3002</p> <pre><code>from langgraph.graph import StateGraph, START, END\nfrom pydantic import BaseModel\n\nclass NestedModel(BaseModel):\n    value: str\n\nclass ComplexState(BaseModel):\n    text: str\n    count: int\n    nested: NestedModel\n\ndef process_node(state: ComplexState):\n    # \u8282\u70b9\u63a5\u6536\u4e00\u4e2a\u5df2\u9a8c\u8bc1\u7684 Pydantic \u5bf9\u8c61\n    print(f\"Input state type: {type(state)}\")\n    print(f\"Nested type: {type(state.nested)}\")\n    # \u8fd4\u56de\u5b57\u5178\u66f4\u65b0\n    return {\"text\": state.text + \" processed\", \"count\": state.count + 1}\n\n# \u6784\u5efa\u56fe\nbuilder = StateGraph(ComplexState)\nbuilder.add_node(\"process\", process_node)\nbuilder.add_edge(START, \"process\")\nbuilder.add_edge(\"process\", END)\ngraph = builder.compile()\n\n# \u521b\u5efa\u7528\u4e8e\u8f93\u5165\u7684 Pydantic \u5b9e\u4f8b\ninput_state = ComplexState(text=\"hello\", count=0, nested=NestedModel(value=\"test\"))\nprint(f\"Input object type: {type(input_state)}\")\n\n# \u4f7f\u7528 Pydantic \u5b9e\u4f8b\u8c03\u7528\u56fe\nresult = graph.invoke(input_state)\nprint(f\"Output type: {type(result)}\")\nprint(f\"Output content: {result}\")\n\n# \u5982\u679c\u9700\u8981\uff0c\u8f6c\u6362\u56de Pydantic \u6a21\u578b\noutput_model = ComplexState(**result)\nprint(f\"Converted back to Pydantic: {type(output_model)}\")\n</code></pre> \u8fd0\u884c\u65f6\u7c7b\u578b\u5f3a\u5236\u8f6c\u6362 <p>Pydantic \u5bf9\u67d0\u4e9b\u6570\u636e\u7c7b\u578b\u6267\u884c\u8fd0\u884c\u65f6\u7c7b\u578b\u5f3a\u5236\u8f6c\u6362\u3002\u8fd9\u53ef\u80fd\u5f88\u6709\u5e2e\u52a9\uff0c\u4f46\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\u5b83\uff0c\u4e5f\u53ef\u80fd\u5bfc\u81f4\u610f\u5916\u884c\u4e3a\u3002</p> <pre><code>from langgraph.graph import StateGraph, START, END\nfrom pydantic import BaseModel\n\nclass CoercionExample(BaseModel):\n    # Pydantic \u5c06\u5b57\u7b26\u4e32\u6570\u5b57\u5f3a\u5236\u8f6c\u6362\u4e3a\u6574\u6570\n    number: int\n    # Pydantic \u5c06\u5b57\u7b26\u4e32\u5e03\u5c14\u503c\u89e3\u6790\u4e3a bool\n    flag: bool\n\ndef inspect_node(state: CoercionExample):\n    print(f\"number: {state.number} (type: {type(state.number)})\")\n    print(f\"flag: {state.flag} (type: {type(state.flag)})\")\n    return {}\n\nbuilder = StateGraph(CoercionExample)\nbuilder.add_node(\"inspect\", inspect_node)\nbuilder.add_edge(START, \"inspect\")\nbuilder.add_edge(\"inspect\", END)\ngraph = builder.compile()\n\n# \u6f14\u793a\u4f7f\u7528\u5c06\u88ab\u8f6c\u6362\u7684\u5b57\u7b26\u4e32\u8f93\u5165\u8fdb\u884c\u5f3a\u5236\u8f6c\u6362\nresult = graph.invoke({\"number\": \"42\", \"flag\": \"true\"})\n\n# \u8fd9\u5c06\u56e0\u9a8c\u8bc1\u9519\u8bef\u800c\u5931\u8d25\ntry:\n    graph.invoke({\"number\": \"not-a-number\", \"flag\": \"true\"})\nexcept Exception as e:\n    print(f\"\\nExpected validation error: {e}\")\n</code></pre> \u4f7f\u7528\u6d88\u606f\u6a21\u578b <p>\u5728\u72b6\u6001\u6a21\u5f0f\u4e2d\u4f7f\u7528 LangChain \u6d88\u606f\u7c7b\u578b\u65f6\uff0c\u5e8f\u5217\u5316\u6709\u4e00\u4e9b\u91cd\u8981\u7684\u8003\u8651\u56e0\u7d20\u3002\u4f60\u5e94\u8be5\u4f7f\u7528 <code>AnyMessage</code>\uff08\u800c\u4e0d\u662f <code>BaseMessage</code>\uff09\u4ee5\u5728\u901a\u8fc7\u7f51\u7edc\u4f20\u8f93\u6d88\u606f\u5bf9\u8c61\u65f6\u8fdb\u884c\u9002\u5f53\u7684\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316\u3002</p> <pre><code>from langgraph.graph import StateGraph, START, END\nfrom pydantic import BaseModel\nfrom langchain_core.messages import HumanMessage, AIMessage, AnyMessage\nfrom typing import List\n\nclass ChatState(BaseModel):\n    messages: List[AnyMessage]\n    context: str\n\ndef add_message(state: ChatState):\n    return {\"messages\": state.messages + [AIMessage(content=\"Hello there!\")]}\n\nbuilder = StateGraph(ChatState)\nbuilder.add_node(\"add_message\", add_message)\nbuilder.add_edge(START, \"add_message\")\nbuilder.add_edge(\"add_message\", END)\ngraph = builder.compile()\n\n# \u4f7f\u7528\u6d88\u606f\u521b\u5efa\u8f93\u5165\ninitial_state = ChatState(\n    messages=[HumanMessage(content=\"Hi\")], context=\"Customer support chat\"\n)\n\nresult = graph.invoke(initial_state)\nprint(f\"Output: {result}\")\n\n# \u8f6c\u6362\u56de Pydantic \u6a21\u578b\u4ee5\u67e5\u770b\u6d88\u606f\u7c7b\u578b\noutput_model = ChatState(**result)\nfor i, msg in enumerate(output_model.messages):\n    print(f\"Message {i}: {type(msg).__name__} - {msg.content}\")\n</code></pre> JavaScript"},{"location":"how-tos/graph-api/#_8","title":"\u66ff\u4ee3\u72b6\u6001\u5b9a\u4e49","text":"<p>\u867d\u7136 Zod \u6a21\u5f0f\u662f\u63a8\u8350\u7684\u65b9\u6cd5\uff0c\u4f46 LangGraph \u4e5f\u652f\u6301\u5176\u4ed6\u5b9a\u4e49\u72b6\u6001\u6a21\u5f0f\u7684\u65b9\u5f0f\uff1a</p> <pre><code>import { BaseMessage } from \"@langchain/core/messages\";\nimport { StateGraph } from \"@langchain/langgraph\";\n\ninterface WorkflowChannelsState {\n  messages: BaseMessage[];\n  question: string;\n  answer: string;\n}\n\nconst workflowWithChannels = new StateGraph&lt;WorkflowChannelsState&gt;({\n  channels: {\n    messages: {\n      reducer: (currentState, updateValue) =&gt; currentState.concat(updateValue),\n      default: () =&gt; [],\n    },\n    question: null,\n    answer: null,\n  },\n});\n</code></pre>"},{"location":"how-tos/graph-api/#_9","title":"\u6dfb\u52a0\u8fd0\u884c\u65f6\u914d\u7f6e","text":"<p>\u6709\u65f6\u4f60\u5e0c\u671b\u80fd\u591f\u5728\u8c03\u7528\u56fe\u65f6\u5bf9\u5176\u8fdb\u884c\u914d\u7f6e\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u80fd\u591f\u5728\u8fd0\u884c\u65f6\u6307\u5b9a\u8981\u4f7f\u7528\u7684 LLM \u6216\u7cfb\u7edf\u63d0\u793a\uff0c\u800c\u4e0d\u4f1a\u4f7f\u7528\u8fd9\u4e9b\u53c2\u6570\u6c61\u67d3\u56fe\u72b6\u6001\u3002</p> <p>\u8981\u6dfb\u52a0\u8fd0\u884c\u65f6\u914d\u7f6e\uff1a</p> <ol> <li>\u4e3a\u4f60\u7684\u914d\u7f6e\u6307\u5b9a\u6a21\u5f0f</li> <li>\u5c06\u914d\u7f6e\u6dfb\u52a0\u5230\u8282\u70b9\u6216\u6761\u4ef6\u8fb9\u7684\u51fd\u6570\u7b7e\u540d\u4e2d</li> <li>\u5c06\u914d\u7f6e\u4f20\u9012\u5230\u56fe\u4e2d\u3002</li> </ol> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\uff1a</p> Python <pre><code>from langgraph.graph import END, StateGraph, START\nfrom langgraph.runtime import Runtime\nfrom typing_extensions import TypedDict\n\n# 1. \u6307\u5b9a\u914d\u7f6e\u6a21\u5f0f\nclass ContextSchema(TypedDict):\n    my_runtime_value: str\n\n# 2. \u5b9a\u4e49\u4e00\u4e2a\u5728\u8282\u70b9\u4e2d\u8bbf\u95ee\u914d\u7f6e\u7684\u56fe\nclass State(TypedDict):\n    my_state_value: str\n\n# highlight-next-line\ndef node(state: State, runtime: Runtime[ContextSchema]):\n    # highlight-next-line\n    if runtime.context[\"my_runtime_value\"] == \"a\":\n        return {\"my_state_value\": 1}\n        # highlight-next-line\n    elif runtime.context[\"my_runtime_value\"] == \"b\":\n        return {\"my_state_value\": 2}\n    else:\n        raise ValueError(\"Unknown values.\")\n\n# highlight-next-line\nbuilder = StateGraph(State, context_schema=ContextSchema)\nbuilder.add_node(node)\nbuilder.add_edge(START, \"node\")\nbuilder.add_edge(\"node\", END)\n\ngraph = builder.compile()\n\n# 3. \u5728\u8fd0\u884c\u65f6\u4f20\u5165\u914d\u7f6e\uff1a\n# highlight-next-line\nprint(graph.invoke({}, context={\"my_runtime_value\": \"a\"}))\n# highlight-next-line\nprint(graph.invoke({}, context={\"my_runtime_value\": \"b\"}))\n</code></pre> <pre><code>{'my_state_value': 1}\n{'my_state_value': 2}\n</code></pre> JavaScript <pre><code>import { StateGraph, END, START } from \"@langchain/langgraph\";\nimport { RunnableConfig } from \"@langchain/core/runnables\";\nimport { z } from \"zod\";\n\n// 1. \u6307\u5b9a\u914d\u7f6e\u6a21\u5f0f\nconst ConfigurableSchema = z.object({\n  myRuntimeValue: z.string(),\n});\n\n// 2. \u5b9a\u4e49\u4e00\u4e2a\u5728\u8282\u70b9\u4e2d\u8bbf\u95ee\u914d\u7f6e\u7684\u56fe\nconst State = z.object({\n  myStateValue: z.number(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"node\", (state, config) =&gt; {\n    // highlight-next-line\n    if (config?.configurable?.myRuntimeValue === \"a\") {\n      return { myStateValue: 1 };\n      // highlight-next-line\n    } else if (config?.configurable?.myRuntimeValue === \"b\") {\n      return { myStateValue: 2 };\n    } else {\n      throw new Error(\"Unknown values.\");\n    }\n  })\n  .addEdge(START, \"node\")\n  .addEdge(\"node\", END)\n  .compile();\n\n// 3. \u5728\u8fd0\u884c\u65f6\u4f20\u5165\u914d\u7f6e\uff1a\n// highlight-next-line\nconsole.log(await graph.invoke({}, { configurable: { myRuntimeValue: \"a\" } }));\n// highlight-next-line\nconsole.log(await graph.invoke({}, { configurable: { myRuntimeValue: \"b\" } }));\n</code></pre> <pre><code>{ myStateValue: 1 }\n{ myStateValue: 2 }\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u8fd0\u884c\u65f6\u6307\u5b9a LLM Python <p>\u4e0b\u9762\u6211\u4eec\u6f14\u793a\u4e00\u4e2a\u5b9e\u9645\u793a\u4f8b\uff0c\u5176\u4e2d\u6211\u4eec\u5728\u8fd0\u884c\u65f6\u914d\u7f6e\u8981\u4f7f\u7528\u7684 LLM\u3002\u6211\u4eec\u5c06\u540c\u65f6\u4f7f\u7528 OpenAI \u548c Anthropic \u6a21\u578b\u3002</p> <p><pre><code>from dataclasses import dataclass\n\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.graph import MessagesState, END, StateGraph, START\nfrom langgraph.runtime import Runtime\nfrom typing_extensions import TypedDict\n\n@dataclass\nclass ContextSchema:\n    model_provider: str = \"anthropic\"\n\nMODELS = {\n    \"anthropic\": init_chat_model(\"anthropic:claude-3-5-haiku-latest\"),\n    \"openai\": init_chat_model(\"openai:gpt-4.1-mini\"),\n}\n\ndef call_model(state: MessagesState, runtime: Runtime[ContextSchema]):\n    model = MODELS[runtime.context.model_provider]\n    response = model.invoke(state[\"messages\"])\n    return {\"messages\": [response]}\n\nbuilder = StateGraph(MessagesState, context_schema=ContextSchema)\nbuilder.add_node(\"model\", call_model)\nbuilder.add_edge(START, \"model\")\nbuilder.add_edge(\"model\", END)\n\ngraph = builder.compile()\n\n# \u7528\u6cd5\ninput_message = {\"role\": \"user\", \"content\": \"hi\"}\n# \u4e0d\u4f7f\u7528\u914d\u7f6e\u65f6\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\uff08Anthropic\uff09\nresponse_1 = graph.invoke({\"messages\": [input_message]}, context=ContextSchema())[\"messages\"][-1]\n# \u6216\u8005\uff0c\u53ef\u4ee5\u8bbe\u7f6e OpenAI\nresponse_2 = graph.invoke({\"messages\": [input_message]}, context={\"model_provider\": \"openai\"})[\"messages\"][-1]\n\nprint(response_1.response_metadata[\"model_name\"])\nprint(response_2.response_metadata[\"model_name\"])\n</code></pre> <pre><code>claude-3-5-haiku-20241022\ngpt-4.1-mini-2025-04-14\n</code></pre></p> JavaScript <p>\u4e0b\u9762\u6211\u4eec\u6f14\u793a\u4e00\u4e2a\u5b9e\u9645\u793a\u4f8b\uff0c\u5176\u4e2d\u6211\u4eec\u5728\u8fd0\u884c\u65f6\u914d\u7f6e\u8981\u4f7f\u7528\u7684 LLM\u3002\u6211\u4eec\u5c06\u540c\u65f6\u4f7f\u7528 OpenAI \u548c Anthropic \u6a21\u578b\u3002</p> <p><pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { MessagesZodState, StateGraph, START, END } from \"@langchain/langgraph\";\nimport { RunnableConfig } from \"@langchain/core/runnables\";\nimport { z } from \"zod\";\n\nconst ConfigSchema = z.object({\n  modelProvider: z.string().default(\"anthropic\"),\n});\n\nconst MODELS = {\n  anthropic: new ChatAnthropic({ model: \"claude-3-5-haiku-latest\" }),\n  openai: new ChatOpenAI({ model: \"gpt-4o-mini\" }),\n};\n\nconst graph = new StateGraph(MessagesZodState)\n  .addNode(\"model\", async (state, config) =&gt; {\n    const modelProvider = config?.configurable?.modelProvider || \"anthropic\";\n    const model = MODELS[modelProvider as keyof typeof MODELS];\n    const response = await model.invoke(state.messages);\n    return { messages: [response] };\n  })\n  .addEdge(START, \"model\")\n  .addEdge(\"model\", END)\n  .compile();\n\n// \u7528\u6cd5\nconst inputMessage = { role: \"user\", content: \"hi\" };\n// \u4e0d\u4f7f\u7528\u914d\u7f6e\u65f6\uff0c\u4f7f\u7528\u9ed8\u8ba4\u503c\uff08Anthropic\uff09\nconst response1 = await graph.invoke({ messages: [inputMessage] });\n// \u6216\u8005\uff0c\u53ef\u4ee5\u8bbe\u7f6e OpenAI\nconst response2 = await graph.invoke(\n  { messages: [inputMessage] },\n  { configurable: { modelProvider: \"openai\" } }\n);\n\nconsole.log(response1.messages.at(-1)?.response_metadata?.model);\nconsole.log(response2.messages.at(-1)?.response_metadata?.model);\n</code></pre> <pre><code>claude-3-5-haiku-20241022\ngpt-4o-mini-2024-07-18\n</code></pre></p> \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u8fd0\u884c\u65f6\u6307\u5b9a\u6a21\u578b\u548c\u7cfb\u7edf\u6d88\u606f Python <p>\u4e0b\u9762\u6211\u4eec\u6f14\u793a\u4e00\u4e2a\u5b9e\u9645\u793a\u4f8b\uff0c\u5176\u4e2d\u6211\u4eec\u914d\u7f6e\u4e24\u4e2a\u53c2\u6570\uff1a\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u7684 LLM \u548c\u7cfb\u7edf\u6d88\u606f\u3002</p> <p><pre><code>from dataclasses import dataclass\nfrom typing import Optional\nfrom langchain.chat_models import init_chat_model\nfrom langchain_core.messages import SystemMessage\nfrom langgraph.graph import END, MessagesState, StateGraph, START\nfrom langgraph.runtime import Runtime\nfrom typing_extensions import TypedDict\n\n@dataclass\nclass ContextSchema:\n    model_provider: str = \"anthropic\"\n    system_message: str | None = None\n\nMODELS = {\n    \"anthropic\": init_chat_model(\"anthropic:claude-3-5-haiku-latest\"),\n    \"openai\": init_chat_model(\"openai:gpt-4.1-mini\"),\n}\n\ndef call_model(state: MessagesState, runtime: Runtime[ContextSchema]):\n    model = MODELS[runtime.context.model_provider]\n    messages = state[\"messages\"]\n    if (system_message := runtime.context.system_message):\n        messages = [SystemMessage(system_message)] + messages\n    response = model.invoke(messages)\n    return {\"messages\": [response]}\n\nbuilder = StateGraph(MessagesState, context_schema=ContextSchema)\nbuilder.add_node(\"model\", call_model)\nbuilder.add_edge(START, \"model\")\nbuilder.add_edge(\"model\", END)\n\ngraph = builder.compile()\n\n# \u7528\u6cd5\ninput_message = {\"role\": \"user\", \"content\": \"hi\"}\nresponse = graph.invoke({\"messages\": [input_message]}, context={\"model_provider\": \"openai\", \"system_message\": \"Respond in Italian.\"})\nfor message in response[\"messages\"]:\n    message.pretty_print()\n</code></pre> <pre><code>================================ Human Message ================================\n\nhi\n================================== Ai Message ==================================\n\nCiao! Come posso aiutarti oggi?\n</code></pre></p> JavaScript <p>\u4e0b\u9762\u6211\u4eec\u6f14\u793a\u4e00\u4e2a\u5b9e\u9645\u793a\u4f8b\uff0c\u5176\u4e2d\u6211\u4eec\u914d\u7f6e\u4e24\u4e2a\u53c2\u6570\uff1a\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u7684 LLM \u548c\u7cfb\u7edf\u6d88\u606f\u3002</p> <p><pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { SystemMessage } from \"@langchain/core/messages\";\nimport { MessagesZodState, StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst ConfigSchema = z.object({\n  modelProvider: z.string().default(\"anthropic\"),\n  systemMessage: z.string().optional(),\n});\n\nconst MODELS = {\n  anthropic: new ChatAnthropic({ model: \"claude-3-5-haiku-latest\" }),\n  openai: new ChatOpenAI({ model: \"gpt-4o-mini\" }),\n};\n\nconst graph = new StateGraph(MessagesZodState)\n  .addNode(\"model\", async (state, config) =&gt; {\n    const modelProvider = config?.configurable?.modelProvider || \"anthropic\";\n    const systemMessage = config?.configurable?.systemMessage;\n\n    const model = MODELS[modelProvider as keyof typeof MODELS];\n    let messages = state.messages;\n\n    if (systemMessage) {\n      messages = [new SystemMessage(systemMessage), ...messages];\n    }\n\n    const response = await model.invoke(messages);\n    return { messages: [response] };\n  })\n  .addEdge(START, \"model\")\n  .addEdge(\"model\", END)\n  .compile();\n\n// \u7528\u6cd5\nconst inputMessage = { role: \"user\", content: \"hi\" };\nconst response = await graph.invoke(\n  { messages: [inputMessage] },\n  {\n    configurable: {\n      modelProvider: \"openai\",\n      systemMessage: \"Respond in Italian.\"\n    }\n  }\n);\n\nfor (const message of response.messages) {\n  console.log(`${message.getType()}: ${message.content}`);\n}\n</code></pre> <pre><code>human: hi\nai: Ciao! Come posso aiutarti oggi?\n</code></pre></p>"},{"location":"how-tos/graph-api/#_10","title":"\u6dfb\u52a0\u91cd\u8bd5\u7b56\u7565","text":"<p>\u5728\u8bb8\u591a\u4f7f\u7528\u573a\u666f\u4e2d\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u8282\u70b9\u5177\u6709\u81ea\u5b9a\u4e49\u91cd\u8bd5\u7b56\u7565\uff0c\u4f8b\u5982\u8c03\u7528 API\u3001\u67e5\u8be2\u6570\u636e\u5e93\u6216\u8c03\u7528 LLM \u7b49\u3002LangGraph \u5141\u8bb8\u4f60\u5411\u8282\u70b9\u6dfb\u52a0\u91cd\u8bd5\u7b56\u7565\u3002</p> Python <p>\u8981\u914d\u7f6e\u91cd\u8bd5\u7b56\u7565\uff0c\u8bf7\u5c06 <code>retry_policy</code> \u53c2\u6570\u4f20\u9012\u7ed9 add_node\u3002<code>retry_policy</code> \u53c2\u6570\u63a5\u53d7\u4e00\u4e2a <code>RetryPolicy</code> \u547d\u540d\u5143\u7ec4\u5bf9\u8c61\u3002\u4e0b\u9762\u6211\u4eec\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u5b9e\u4f8b\u5316\u4e00\u4e2a <code>RetryPolicy</code> \u5bf9\u8c61\u5e76\u5c06\u5176\u4e0e\u8282\u70b9\u5173\u8054\uff1a</p> <pre><code>from langgraph.types import RetryPolicy\n\nbuilder.add_node(\n    \"node_name\",\n    node_function,\n    retry_policy=RetryPolicy(),\n)\n</code></pre> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>retry_on</code> \u53c2\u6570\u4f7f\u7528 <code>default_retry_on</code> \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u5bf9\u9664\u4ee5\u4e0b\u5f02\u5e38\u5916\u7684\u4efb\u4f55\u5f02\u5e38\u8fdb\u884c\u91cd\u8bd5\uff1a</p> <ul> <li><code>ValueError</code></li> <li><code>TypeError</code></li> <li><code>ArithmeticError</code></li> <li><code>ImportError</code></li> <li><code>LookupError</code></li> <li><code>NameError</code></li> <li><code>SyntaxError</code></li> <li><code>RuntimeError</code></li> <li><code>ReferenceError</code></li> <li><code>StopIteration</code></li> <li><code>StopAsyncIteration</code></li> <li><code>OSError</code></li> </ul> <p>\u6b64\u5916\uff0c\u5bf9\u4e8e\u6765\u81ea\u6d41\u884c\u7684 http \u8bf7\u6c42\u5e93\uff08\u5982 <code>requests</code> \u548c <code>httpx</code>\uff09\u7684\u5f02\u5e38\uff0c\u5b83\u4ec5\u5728 5xx \u72b6\u6001\u7801\u65f6\u91cd\u8bd5\u3002</p> JavaScript <p>\u8981\u914d\u7f6e\u91cd\u8bd5\u7b56\u7565\uff0c\u8bf7\u5c06 <code>retryPolicy</code> \u53c2\u6570\u4f20\u9012\u7ed9 addNode\u3002<code>retryPolicy</code> \u53c2\u6570\u63a5\u53d7\u4e00\u4e2a <code>RetryPolicy</code> \u5bf9\u8c61\u3002\u4e0b\u9762\u6211\u4eec\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u5b9e\u4f8b\u5316\u4e00\u4e2a <code>RetryPolicy</code> \u5bf9\u8c61\u5e76\u5c06\u5176\u4e0e\u8282\u70b9\u5173\u8054\uff1a</p> <pre><code>import { RetryPolicy } from \"@langchain/langgraph\";\n\nconst graph = new StateGraph(State)\n  .addNode(\"nodeName\", nodeFunction, { retryPolicy: {} })\n  .compile();\n</code></pre> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u91cd\u8bd5\u7b56\u7565\u5bf9\u9664\u4ee5\u4e0b\u5f02\u5e38\u5916\u7684\u4efb\u4f55\u5f02\u5e38\u8fdb\u884c\u91cd\u8bd5\uff1a</p> <ul> <li><code>TypeError</code></li> <li><code>SyntaxError</code></li> <li><code>ReferenceError</code></li> </ul> \u6269\u5c55\u793a\u4f8b\uff1a\u81ea\u5b9a\u4e49\u91cd\u8bd5\u7b56\u7565 Python <p>\u8003\u8651\u4e00\u4e2a\u6211\u4eec\u4ece SQL \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u7684\u793a\u4f8b\u3002\u4e0b\u9762\u6211\u4eec\u5411\u8282\u70b9\u4f20\u9012\u4e24\u4e2a\u4e0d\u540c\u7684\u91cd\u8bd5\u7b56\u7565\uff1a</p> <pre><code>import sqlite3\nfrom typing_extensions import TypedDict\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.graph import END, MessagesState, StateGraph, START\nfrom langgraph.types import RetryPolicy\nfrom langchain_community.utilities import SQLDatabase\nfrom langchain_core.messages import AIMessage\n\ndb = SQLDatabase.from_uri(\"sqlite:///:memory:\")\nmodel = init_chat_model(\"anthropic:claude-3-5-haiku-latest\")\n\ndef query_database(state: MessagesState):\n    query_result = db.run(\"SELECT * FROM Artist LIMIT 10;\")\n    return {\"messages\": [AIMessage(content=query_result)]}\n\ndef call_model(state: MessagesState):\n    response = model.invoke(state[\"messages\"])\n    return {\"messages\": [response]}\n\n# \u5b9a\u4e49\u65b0\u56fe\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(\n    \"query_database\",\n    query_database,\n    retry_policy=RetryPolicy(retry_on=sqlite3.OperationalError),\n)\nbuilder.add_node(\"model\", call_model, retry_policy=RetryPolicy(max_attempts=5))\nbuilder.add_edge(START, \"model\")\nbuilder.add_edge(\"model\", \"query_database\")\nbuilder.add_edge(\"query_database\", END)\ngraph = builder.compile()\n</code></pre> JavaScript <p>\u8003\u8651\u4e00\u4e2a\u6211\u4eec\u4ece SQL \u6570\u636e\u5e93\u8bfb\u53d6\u6570\u636e\u7684\u793a\u4f8b\u3002\u4e0b\u9762\u6211\u4eec\u5411\u8282\u70b9\u4f20\u9012\u4e24\u4e2a\u4e0d\u540c\u7684\u91cd\u8bd5\u7b56\u7565\uff1a</p> <pre><code>import Database from \"better-sqlite3\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { StateGraph, START, END, MessagesZodState } from \"@langchain/langgraph\";\nimport { AIMessage } from \"@langchain/core/messages\";\nimport { z } from \"zod\";\n\n// \u521b\u5efa\u5185\u5b58\u6570\u636e\u5e93\nconst db: typeof Database.prototype = new Database(\":memory:\");\n\nconst model = new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" });\n\nconst callModel = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const response = await model.invoke(state.messages);\n  return { messages: [response] };\n};\n\nconst queryDatabase = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const queryResult: string = JSON.stringify(\n    db.prepare(\"SELECT * FROM Artist LIMIT 10;\").all(),\n  );\n\n  return { messages: [new AIMessage({ content: \"queryResult\" })] };\n};\n\nconst workflow = new StateGraph(MessagesZodState)\n  // \u5b9a\u4e49\u6211\u4eec\u5c06\u5728\u5176\u95f4\u5faa\u73af\u7684\u4e24\u4e2a\u8282\u70b9\n  .addNode(\"call_model\", callModel, { retryPolicy: { maxAttempts: 5 } })\n  .addNode(\"query_database\", queryDatabase, {\n    retryPolicy: {\n      retryOn: (e: any): boolean =&gt; {\n        if (e instanceof Database.SqliteError) {\n          // \u5728 \"SQLITE_BUSY\" \u9519\u8bef\u65f6\u91cd\u8bd5\n          return e.code === \"SQLITE_BUSY\";\n        }\n        return false; // \u5728\u5176\u4ed6\u9519\u8bef\u65f6\u4e0d\u91cd\u8bd5\n      },\n    },\n  })\n  .addEdge(START, \"call_model\")\n  .addEdge(\"call_model\", \"query_database\")\n  .addEdge(\"query_database\", END);\n\nconst graph = workflow.compile();\n</code></pre> Python"},{"location":"how-tos/graph-api/#_11","title":"\u6dfb\u52a0\u8282\u70b9\u7f13\u5b58","text":"<p>\u8282\u70b9\u7f13\u5b58\u5728\u4f60\u60f3\u8981\u907f\u514d\u91cd\u590d\u64cd\u4f5c\u7684\u60c5\u51b5\u4e0b\u5f88\u6709\u7528\uff0c\u4f8b\u5982\u6267\u884c\u6602\u8d35\u7684\u64cd\u4f5c\uff08\u65e0\u8bba\u662f\u65f6\u95f4\u4e0a\u8fd8\u662f\u6210\u672c\u4e0a\uff09\u3002LangGraph \u5141\u8bb8\u4f60\u5411\u56fe\u4e2d\u7684\u8282\u70b9\u6dfb\u52a0\u4e2a\u6027\u5316\u7684\u7f13\u5b58\u7b56\u7565\u3002</p> <p>\u8981\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u8bf7\u5c06 <code>cache_policy</code> \u53c2\u6570\u4f20\u9012\u7ed9 add_node \u51fd\u6570\u3002\u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u5b9e\u4f8b\u5316\u4e86\u4e00\u4e2a\u751f\u5b58\u65f6\u95f4\u4e3a 120 \u79d2\u7684 <code>CachePolicy</code> \u5bf9\u8c61\u548c\u9ed8\u8ba4\u7684 <code>key_func</code> \u751f\u6210\u5668\u3002\u7136\u540e\u5c06\u5176\u4e0e\u8282\u70b9\u5173\u8054\uff1a</p> <pre><code>from langgraph.types import CachePolicy\n\nbuilder.add_node(\n    \"node_name\",\n    node_function,\n    cache_policy=CachePolicy(ttl=120),\n)\n</code></pre> <p>\u7136\u540e\uff0c\u8981\u4e3a\u56fe\u542f\u7528\u8282\u70b9\u7ea7\u7f13\u5b58\uff0c\u8bf7\u5728\u7f16\u8bd1\u56fe\u65f6\u8bbe\u7f6e <code>cache</code> \u53c2\u6570\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u4f7f\u7528 <code>InMemoryCache</code> \u8bbe\u7f6e\u5177\u6709\u5185\u5b58\u7f13\u5b58\u7684\u56fe\uff0c\u4f46\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>SqliteCache</code>\u3002</p> <pre><code>from langgraph.cache.memory import InMemoryCache\n\ngraph = builder.compile(cache=InMemoryCache())\n</code></pre>"},{"location":"how-tos/graph-api/#_12","title":"\u521b\u5efa\u6b65\u9aa4\u5e8f\u5217","text":"<p>\u524d\u63d0\u6761\u4ef6</p> <p>\u672c\u6307\u5357\u5047\u8bbe\u4f60\u5df2\u719f\u6089\u4e0a\u9762\u5173\u4e8e\u72b6\u6001\u7684\u90e8\u5206\u3002</p> <p>\u8fd9\u91cc\u6211\u4eec\u6f14\u793a\u5982\u4f55\u6784\u5efa\u7b80\u5355\u7684\u6b65\u9aa4\u5e8f\u5217\u3002\u6211\u4eec\u5c06\u5c55\u793a\uff1a</p> <ol> <li>\u5982\u4f55\u6784\u5efa\u987a\u5e8f\u56fe</li> <li>\u6784\u5efa\u7c7b\u4f3c\u56fe\u7684\u5185\u7f6e\u7b80\u5199\u65b9\u6cd5\u3002</li> </ol> Python <p>\u8981\u6dfb\u52a0\u8282\u70b9\u5e8f\u5217\uff0c\u6211\u4eec\u4f7f\u7528\u56fe\u7684 <code>.add_node</code> \u548c <code>.add_edge</code> \u65b9\u6cd5\uff1a</p> <pre><code>from langgraph.graph import START, StateGraph\n\nbuilder = StateGraph(State)\n\n# \u6dfb\u52a0\u8282\u70b9\nbuilder.add_node(step_1)\nbuilder.add_node(step_2)\nbuilder.add_node(step_3)\n\n# \u6dfb\u52a0\u8fb9\nbuilder.add_edge(START, \"step_1\")\nbuilder.add_edge(\"step_1\", \"step_2\")\nbuilder.add_edge(\"step_2\", \"step_3\")\n</code></pre> <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528\u5185\u7f6e\u7b80\u5199 <code>.add_sequence</code>\uff1a</p> <pre><code>builder = StateGraph(State).add_sequence([step_1, step_2, step_3])\nbuilder.add_edge(START, \"step_1\")\n</code></pre> JavaScript <p>\u8981\u6dfb\u52a0\u8282\u70b9\u5e8f\u5217\uff0c\u6211\u4eec\u4f7f\u7528\u56fe\u7684 <code>.addNode</code> \u548c <code>.addEdge</code> \u65b9\u6cd5\uff1a</p> <pre><code>import { START, StateGraph } from \"@langchain/langgraph\";\n\nconst builder = new StateGraph(State)\n  .addNode(\"step1\", step1)\n  .addNode(\"step2\", step2)\n  .addNode(\"step3\", step3)\n  .addEdge(START, \"step1\")\n  .addEdge(\"step1\", \"step2\")\n  .addEdge(\"step2\", \"step3\");\n</code></pre> \u4e3a\u4ec0\u4e48\u4f7f\u7528 LangGraph \u5c06\u5e94\u7528\u6b65\u9aa4\u62c6\u5206\u4e3a\u5e8f\u5217\uff1f <p>LangGraph \u4f7f\u5411\u5e94\u7528\u7a0b\u5e8f\u6dfb\u52a0\u5e95\u5c42\u6301\u4e45\u5316\u5c42\u53d8\u5f97\u5bb9\u6613\u3002 \u8fd9\u5141\u8bb8\u5728\u8282\u70b9\u6267\u884c\u4e4b\u95f4\u68c0\u67e5\u70b9\u72b6\u6001\uff0c\u56e0\u6b64\u4f60\u7684 LangGraph \u8282\u70b9\u63a7\u5236\uff1a</p> <ul> <li>\u5982\u4f55\u5bf9\u72b6\u6001\u66f4\u65b0\u8fdb\u884c\u68c0\u67e5\u70b9</li> <li>\u5982\u4f55\u5728\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u4e2d\u6062\u590d\u4e2d\u65ad</li> <li>\u5982\u4f55\u4f7f\u7528 LangGraph \u7684\u65f6\u95f4\u65c5\u884c\u529f\u80fd\"\u5012\u5e26\"\u548c\u5206\u652f\u6267\u884c</li> </ul> <p>\u5b83\u4eec\u8fd8\u51b3\u5b9a\u6267\u884c\u6b65\u9aa4\u5982\u4f55\u6d41\u5f0f\u4f20\u8f93\uff0c\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528 LangGraph Studio \u53ef\u89c6\u5316\u548c\u8c03\u8bd5\u5e94\u7528\u7a0b\u5e8f\u3002</p> <p>\u8ba9\u6211\u4eec\u6f14\u793a\u4e00\u4e2a\u7aef\u5230\u7aef\u793a\u4f8b\u3002\u6211\u4eec\u5c06\u521b\u5efa\u4e00\u4e2a\u5305\u542b\u4e09\u4e2a\u6b65\u9aa4\u7684\u5e8f\u5217\uff1a</p> <ol> <li>\u5728\u72b6\u6001\u7684\u952e\u4e2d\u586b\u5145\u503c</li> <li>\u66f4\u65b0\u76f8\u540c\u7684\u503c</li> <li>\u586b\u5145\u4e0d\u540c\u7684\u503c</li> </ol> <p>\u8ba9\u6211\u4eec\u9996\u5148\u5b9a\u4e49\u6211\u4eec\u7684\u72b6\u6001\u3002\u8fd9\u63a7\u5236\u56fe\u7684\u6a21\u5f0f\uff0c\u8fd8\u53ef\u4ee5\u6307\u5b9a\u5982\u4f55\u5e94\u7528\u66f4\u65b0\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206\u3002</p> <p>\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8ddf\u8e2a\u4e24\u4e2a\u503c\uff1a</p> Python <pre><code>from typing_extensions import TypedDict\n\nclass State(TypedDict):\n    value_1: str\n    value_2: int\n</code></pre> JavaScript <pre><code>import { z } from \"zod\";\n\nconst State = z.object({\n  value1: z.string(),\n  value2: z.number(),\n});\n</code></pre> Python <p>\u6211\u4eec\u7684\u8282\u70b9\u53ea\u662f\u8bfb\u53d6\u56fe\u72b6\u6001\u5e76\u5bf9\u5176\u8fdb\u884c\u66f4\u65b0\u7684 Python \u51fd\u6570\u3002\u6b64\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u59cb\u7ec8\u662f\u72b6\u6001\uff1a</p> <pre><code>def step_1(state: State):\n    return {\"value_1\": \"a\"}\n\ndef step_2(state: State):\n    current_value_1 = state[\"value_1\"]\n    return {\"value_1\": f\"{current_value_1} b\"}\n\ndef step_3(state: State):\n    return {\"value_2\": 10}\n</code></pre> JavaScript <p>\u6211\u4eec\u7684\u8282\u70b9\u53ea\u662f\u8bfb\u53d6\u56fe\u72b6\u6001\u5e76\u5bf9\u5176\u8fdb\u884c\u66f4\u65b0\u7684 TypeScript \u51fd\u6570\u3002\u6b64\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u59cb\u7ec8\u662f\u72b6\u6001\uff1a</p> <pre><code>const step1 = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  return { value1: \"a\" };\n};\n\nconst step2 = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  const currentValue1 = state.value1;\n  return { value1: `${currentValue1} b` };\n};\n\nconst step3 = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  return { value2: 10 };\n};\n</code></pre> <p>Note</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5728\u5411\u72b6\u6001\u53d1\u51fa\u66f4\u65b0\u65f6\uff0c\u6bcf\u4e2a\u8282\u70b9\u53ea\u9700\u6307\u5b9a\u5b83\u5e0c\u671b\u66f4\u65b0\u7684\u952e\u7684\u503c\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8fd9\u5c06**\u8986\u76d6**\u76f8\u5e94\u952e\u7684\u503c\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528\u5f52\u7ea6\u5668\u6765\u63a7\u5236\u5982\u4f55\u5904\u7406\u66f4\u65b0\u2014\u2014\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u5c06\u8fde\u7eed\u7684\u66f4\u65b0\u8ffd\u52a0\u5230\u952e\u800c\u4e0d\u662f\u8986\u76d6\u3002\u6709\u5173\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u5b9a\u4e49\u56fe\u3002\u6211\u4eec\u4f7f\u7528 StateGraph \u6765\u5b9a\u4e49\u4e00\u4e2a\u5728\u6b64\u72b6\u6001\u4e0a\u64cd\u4f5c\u7684\u56fe\u3002</p> Python <p>\u7136\u540e\u6211\u4eec\u5c06\u4f7f\u7528 add_node \u548c add_edge \u6765\u586b\u5145\u6211\u4eec\u7684\u56fe\u5e76\u5b9a\u4e49\u5176\u63a7\u5236\u6d41\u3002</p> <pre><code>from langgraph.graph import START, StateGraph\n\nbuilder = StateGraph(State)\n\n# \u6dfb\u52a0\u8282\u70b9\nbuilder.add_node(step_1)\nbuilder.add_node(step_2)\nbuilder.add_node(step_3)\n\n# \u6dfb\u52a0\u8fb9\nbuilder.add_edge(START, \"step_1\")\nbuilder.add_edge(\"step_1\", \"step_2\")\nbuilder.add_edge(\"step_2\", \"step_3\")\n</code></pre> JavaScript <p>\u7136\u540e\u6211\u4eec\u5c06\u4f7f\u7528 addNode \u548c addEdge \u6765\u586b\u5145\u6211\u4eec\u7684\u56fe\u5e76\u5b9a\u4e49\u5176\u63a7\u5236\u6d41\u3002</p> <pre><code>import { START, StateGraph } from \"@langchain/langgraph\";\n\nconst graph = new StateGraph(State)\n  .addNode(\"step1\", step1)\n  .addNode(\"step2\", step2)\n  .addNode(\"step3\", step3)\n  .addEdge(START, \"step1\")\n  .addEdge(\"step1\", \"step2\")\n  .addEdge(\"step2\", \"step3\")\n  .compile();\n</code></pre> Python <p>\u6307\u5b9a\u81ea\u5b9a\u4e49\u540d\u79f0</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>.add_node</code> \u4e3a\u8282\u70b9\u6307\u5b9a\u81ea\u5b9a\u4e49\u540d\u79f0\uff1a</p> <pre><code>builder.add_node(\"my_node\", step_1)\n</code></pre> JavaScript <p>\u6307\u5b9a\u81ea\u5b9a\u4e49\u540d\u79f0</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>.addNode</code> \u4e3a\u8282\u70b9\u6307\u5b9a\u81ea\u5b9a\u4e49\u540d\u79f0\uff1a</p> <pre><code>const graph = new StateGraph(State)\n  .addNode(\"myNode\", step1)\n  .compile();\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff1a</p> Python <ul> <li><code>.add_edge</code> \u63a5\u53d7\u8282\u70b9\u7684\u540d\u79f0\uff0c\u5bf9\u4e8e\u51fd\u6570\uff0c\u9ed8\u8ba4\u4e3a <code>node.__name__</code>\u3002</li> <li>\u6211\u4eec\u5fc5\u987b\u6307\u5b9a\u56fe\u7684\u5165\u53e3\u70b9\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u6dfb\u52a0\u4e00\u6761\u4e0e START \u8282\u70b9\u7684\u8fb9\u3002</li> <li>\u5f53\u6ca1\u6709\u66f4\u591a\u8282\u70b9\u8981\u6267\u884c\u65f6\uff0c\u56fe\u5c06\u505c\u6b62\u3002</li> </ul> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u7f16\u8bd1\u6211\u4eec\u7684\u56fe\u3002\u8fd9\u63d0\u4f9b\u4e86\u5bf9\u56fe\u7ed3\u6784\u7684\u4e00\u4e9b\u57fa\u672c\u68c0\u67e5\uff08\u4f8b\u5982\uff0c\u8bc6\u522b\u5b64\u7acb\u7684\u8282\u70b9\uff09\u3002\u5982\u679c\u6211\u4eec\u901a\u8fc7\u68c0\u67e5\u70b9\u5411\u5e94\u7528\u7a0b\u5e8f\u6dfb\u52a0\u6301\u4e45\u5316\uff0c\u5b83\u4e5f\u4f1a\u5728\u8fd9\u91cc\u4f20\u5165\u3002</p> <pre><code>graph = builder.compile()\n</code></pre> JavaScript <ul> <li><code>.addEdge</code> \u63a5\u53d7\u8282\u70b9\u7684\u540d\u79f0\uff0c\u5bf9\u4e8e\u51fd\u6570\uff0c\u9ed8\u8ba4\u4e3a <code>node.name</code>\u3002</li> <li>\u6211\u4eec\u5fc5\u987b\u6307\u5b9a\u56fe\u7684\u5165\u53e3\u70b9\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u6dfb\u52a0\u4e00\u6761\u4e0e START \u8282\u70b9\u7684\u8fb9\u3002</li> <li>\u5f53\u6ca1\u6709\u66f4\u591a\u8282\u70b9\u8981\u6267\u884c\u65f6\uff0c\u56fe\u5c06\u505c\u6b62\u3002</li> </ul> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u7f16\u8bd1\u6211\u4eec\u7684\u56fe\u3002\u8fd9\u63d0\u4f9b\u4e86\u5bf9\u56fe\u7ed3\u6784\u7684\u4e00\u4e9b\u57fa\u672c\u68c0\u67e5\uff08\u4f8b\u5982\uff0c\u8bc6\u522b\u5b64\u7acb\u7684\u8282\u70b9\uff09\u3002\u5982\u679c\u6211\u4eec\u901a\u8fc7\u68c0\u67e5\u70b9\u5411\u5e94\u7528\u7a0b\u5e8f\u6dfb\u52a0\u6301\u4e45\u5316\uff0c\u5b83\u4e5f\u4f1a\u5728\u8fd9\u91cc\u4f20\u5165\u3002</p> <p>LangGraph \u63d0\u4f9b\u4e86\u7528\u4e8e\u53ef\u89c6\u5316\u56fe\u7684\u5185\u7f6e\u5de5\u5177\u3002\u8ba9\u6211\u4eec\u68c0\u67e5\u6211\u4eec\u7684\u5e8f\u5217\u3002\u6709\u5173\u53ef\u89c6\u5316\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u672c\u6307\u5357\u3002</p> Python <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> JavaScript <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <p>\u8ba9\u6211\u4eec\u8fdb\u884c\u4e00\u4e2a\u7b80\u5355\u7684\u8c03\u7528\uff1a</p> Python <pre><code>graph.invoke({\"value_1\": \"c\"})\n</code></pre> <pre><code>{'value_1': 'a b', 'value_2': 10}\n</code></pre> JavaScript <pre><code>const result = await graph.invoke({ value1: \"c\" });\nconsole.log(result);\n</code></pre> <pre><code>{ value1: 'a b', value2: 10 }\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff1a</p> <ul> <li>\u6211\u4eec\u901a\u8fc7\u4e3a\u5355\u4e2a\u72b6\u6001\u952e\u63d0\u4f9b\u503c\u6765\u542f\u52a8\u8c03\u7528\u3002\u6211\u4eec\u5fc5\u987b\u59cb\u7ec8\u4e3a\u81f3\u5c11\u4e00\u4e2a\u952e\u63d0\u4f9b\u503c\u3002</li> <li>\u6211\u4eec\u4f20\u5165\u7684\u503c\u88ab\u7b2c\u4e00\u4e2a\u8282\u70b9\u8986\u76d6\u3002</li> <li>\u7b2c\u4e8c\u4e2a\u8282\u70b9\u66f4\u65b0\u4e86\u8be5\u503c\u3002</li> <li>\u7b2c\u4e09\u4e2a\u8282\u70b9\u586b\u5145\u4e86\u4e0d\u540c\u7684\u503c\u3002</li> </ul> Python <p>\u5185\u7f6e\u7b80\u5199</p> <p><code>langgraph&gt;=0.2.46</code> \u5305\u542b\u4e00\u4e2a\u5185\u7f6e\u7b80\u5199 <code>add_sequence</code> \u7528\u4e8e\u6dfb\u52a0\u8282\u70b9\u5e8f\u5217\u3002\u4f60\u53ef\u4ee5\u5982\u4e0b\u7f16\u8bd1\u76f8\u540c\u7684\u56fe\uff1a</p> <pre><code># highlight-next-line\nbuilder = StateGraph(State).add_sequence([step_1, step_2, step_3])\nbuilder.add_edge(START, \"step_1\")\n\ngraph = builder.compile()\n\ngraph.invoke({\"value_1\": \"c\"})\n</code></pre>"},{"location":"how-tos/graph-api/#_13","title":"\u521b\u5efa\u5206\u652f","text":"<p>\u5e76\u884c\u6267\u884c\u8282\u70b9\u5bf9\u4e8e\u52a0\u5feb\u6574\u4f53\u56fe\u64cd\u4f5c\u81f3\u5173\u91cd\u8981\u3002LangGraph \u4e3a\u8282\u70b9\u7684\u5e76\u884c\u6267\u884c\u63d0\u4f9b\u539f\u751f\u652f\u6301\uff0c\u8fd9\u53ef\u4ee5\u663e\u8457\u63d0\u9ad8\u57fa\u4e8e\u56fe\u7684\u5de5\u4f5c\u6d41\u7684\u6027\u80fd\u3002\u8fd9\u79cd\u5e76\u884c\u5316\u662f\u901a\u8fc7\u6247\u51fa\u548c\u6247\u5165\u673a\u5236\u5b9e\u73b0\u7684\uff0c\u5229\u7528\u6807\u51c6\u8fb9\u548c\u6761\u4ef6\u8fb9\u3002\u4e0b\u9762\u662f\u4e00\u4e9b\u793a\u4f8b\uff0c\u5c55\u793a\u5982\u4f55\u6dfb\u52a0\u9002\u5408\u4f60\u7684\u5206\u652f\u6570\u636e\u6d41\u3002</p>"},{"location":"how-tos/graph-api/#_14","title":"\u5e76\u884c\u8fd0\u884c\u56fe\u8282\u70b9","text":"<p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4ece <code>Node A</code> \u6247\u51fa\u5230 <code>B \u548c C</code>\uff0c\u7136\u540e\u6247\u5165\u5230 <code>D</code>\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u72b6\u6001\uff0c\u6211\u4eec\u6307\u5b9a\u5f52\u7ea6\u5668 add \u64cd\u4f5c\u3002\u8fd9\u5c06\u4e3a\u72b6\u6001\u4e2d\u7684\u7279\u5b9a\u952e\u7ec4\u5408\u6216\u7d2f\u79ef\u503c\uff0c\u800c\u4e0d\u662f\u7b80\u5355\u5730\u8986\u76d6\u73b0\u6709\u503c\u3002\u5bf9\u4e8e\u5217\u8868\uff0c\u8fd9\u610f\u5473\u7740\u5c06\u65b0\u5217\u8868\u4e0e\u73b0\u6709\u5217\u8868\u8fde\u63a5\u3002\u6709\u5173\u4f7f\u7528\u5f52\u7ea6\u5668\u66f4\u65b0\u72b6\u6001\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605\u4e0a\u9762\u7684\u72b6\u6001\u5f52\u7ea6\u5668\u90e8\u5206\u3002</p> Python <pre><code>import operator\nfrom typing import Annotated, Any\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    # operator.add \u5f52\u7ea6\u5668\u51fd\u6570\u4f7f\u5176\u4ec5\u652f\u6301\u8ffd\u52a0\n    aggregate: Annotated[list, operator.add]\n\ndef a(state: State):\n    print(f'Adding \"A\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"A\"]}\n\ndef b(state: State):\n    print(f'Adding \"B\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B\"]}\n\ndef c(state: State):\n    print(f'Adding \"C\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"C\"]}\n\ndef d(state: State):\n    print(f'Adding \"D\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"D\"]}\n\nbuilder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\nbuilder.add_node(c)\nbuilder.add_node(d)\nbuilder.add_edge(START, \"a\")\nbuilder.add_edge(\"a\", \"b\")\nbuilder.add_edge(\"a\", \"c\")\nbuilder.add_edge(\"b\", \"d\")\nbuilder.add_edge(\"c\", \"d\")\nbuilder.add_edge(\"d\", END)\ngraph = builder.compile()\n</code></pre> JavaScript <pre><code>import \"@langchain/langgraph/zod\";\nimport { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  // \u5f52\u7ea6\u5668\u4f7f\u5176\u4ec5\u652f\u6301\u8ffd\u52a0\n  aggregate: z.array(z.string()).langgraph.reducer((x, y) =&gt; x.concat(y)),\n});\n\nconst nodeA = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"A\" to ${state.aggregate}`);\n  return { aggregate: [\"A\"] };\n};\n\nconst nodeB = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"B\" to ${state.aggregate}`);\n  return { aggregate: [\"B\"] };\n};\n\nconst nodeC = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"C\" to ${state.aggregate}`);\n  return { aggregate: [\"C\"] };\n};\n\nconst nodeD = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"D\" to ${state.aggregate}`);\n  return { aggregate: [\"D\"] };\n};\n\nconst graph = new StateGraph(State)\n  .addNode(\"a\", nodeA)\n  .addNode(\"b\", nodeB)\n  .addNode(\"c\", nodeC)\n  .addNode(\"d\", nodeD)\n  .addEdge(START, \"a\")\n  .addEdge(\"a\", \"b\")\n  .addEdge(\"a\", \"c\")\n  .addEdge(\"b\", \"d\")\n  .addEdge(\"c\", \"d\")\n  .addEdge(\"d\", END)\n  .compile();\n</code></pre> Python <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> JavaScript <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <p>\u4f7f\u7528\u5f52\u7ea6\u5668\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u5728\u6bcf\u4e2a\u8282\u70b9\u4e2d\u6dfb\u52a0\u7684\u503c\u88ab\u7d2f\u79ef\u3002</p> Python <pre><code>graph.invoke({\"aggregate\": []}, {\"configurable\": {\"thread_id\": \"foo\"}})\n</code></pre> <pre><code>Adding \"A\" to []\nAdding \"B\" to ['A']\nAdding \"C\" to ['A']\nAdding \"D\" to ['A', 'B', 'C']\n</code></pre> JavaScript <pre><code>const result = await graph.invoke({\n  aggregate: [],\n});\nconsole.log(result);\n</code></pre> <pre><code>Adding \"A\" to []\nAdding \"B\" to ['A']\nAdding \"C\" to ['A']\nAdding \"D\" to ['A', 'B', 'C']\n{ aggregate: ['A', 'B', 'C', 'D'] }\n</code></pre> <p>Note</p> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u8282\u70b9 <code>\"b\"</code> \u548c <code>\"c\"</code> \u5728\u540c\u4e00\u8d85\u6b65\u9aa4\u4e2d\u5e76\u53d1\u6267\u884c\u3002\u56e0\u4e3a\u5b83\u4eec\u5728\u540c\u4e00\u6b65\u9aa4\u4e2d\uff0c\u8282\u70b9 <code>\"d\"</code> \u5728 <code>\"b\"</code> \u548c <code>\"c\"</code> \u90fd\u5b8c\u6210\u540e\u6267\u884c\u3002</p> <p>\u91cd\u8981\u7684\u662f\uff0c\u6765\u81ea\u5e76\u884c\u8d85\u6b65\u9aa4\u7684\u66f4\u65b0\u53ef\u80fd\u4e0d\u4f1a\u59cb\u7ec8\u6709\u5e8f\u3002\u5982\u679c\u4f60\u9700\u8981\u4ece\u5e76\u884c\u8d85\u6b65\u9aa4\u4e2d\u83b7\u5f97\u4e00\u81f4\u7684\u3001\u9884\u5b9a\u7684\u66f4\u65b0\u987a\u5e8f\uff0c\u4f60\u5e94\u8be5\u5c06\u8f93\u51fa\u5199\u5165\u72b6\u6001\u7684\u5355\u72ec\u5b57\u6bb5\uff0c\u5e76\u4f7f\u7528\u4e00\u4e2a\u503c\u6765\u5bf9\u5b83\u4eec\u8fdb\u884c\u6392\u5e8f\u3002</p> \u5f02\u5e38\u5904\u7406\uff1f <p>LangGraph \u5728\u8d85\u6b65\u9aa4\u5185\u6267\u884c\u8282\u70b9\uff0c\u8fd9\u610f\u5473\u7740\u867d\u7136\u5e76\u884c\u5206\u652f\u662f\u5e76\u884c\u6267\u884c\u7684\uff0c\u4f46\u6574\u4e2a\u8d85\u6b65\u9aa4\u662f**\u4e8b\u52a1\u6027\u7684**\u3002\u5982\u679c\u8fd9\u4e9b\u5206\u652f\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u5f15\u53d1\u5f02\u5e38\uff0c**\u6ca1\u6709**\u4efb\u4f55\u66f4\u65b0\u4f1a\u5e94\u7528\u5230\u72b6\u6001\uff08\u6574\u4e2a\u8d85\u6b65\u9aa4\u51fa\u9519\uff09\u3002</p> <p>\u91cd\u8981\u7684\u662f\uff0c\u5f53\u4f7f\u7528\u68c0\u67e5\u70b9\u65f6\uff0c\u8d85\u6b65\u9aa4\u5185\u6210\u529f\u8282\u70b9\u7684\u7ed3\u679c\u4f1a\u88ab\u4fdd\u5b58\uff0c\u5e76\u4e14\u5728\u6062\u590d\u65f6\u4e0d\u4f1a\u91cd\u590d\u3002</p> <p>\u5982\u679c\u4f60\u6709\u5bb9\u6613\u51fa\u9519\u7684\u8282\u70b9\uff08\u53ef\u80fd\u60f3\u8981\u5904\u7406\u4e0d\u7a33\u5b9a\u7684 API \u8c03\u7528\uff09\uff0cLangGraph \u63d0\u4f9b\u4e24\u79cd\u65b9\u6cd5\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1a</p> <ol> <li>\u4f60\u53ef\u4ee5\u5728\u8282\u70b9\u5185\u7f16\u5199\u5e38\u89c4 python \u4ee3\u7801\u6765\u6355\u83b7\u548c\u5904\u7406\u5f02\u5e38\u3002</li> <li>\u4f60\u53ef\u4ee5\u8bbe\u7f6e**retry_policy**\u6765\u6307\u5bfc\u56fe\u91cd\u8bd5\u5f15\u53d1\u67d0\u4e9b\u7c7b\u578b\u5f02\u5e38\u7684\u8282\u70b9\u3002\u53ea\u6709\u5931\u8d25\u7684\u5206\u652f\u4f1a\u88ab\u91cd\u8bd5\uff0c\u56e0\u6b64\u4f60\u65e0\u9700\u62c5\u5fc3\u6267\u884c\u5197\u4f59\u5de5\u4f5c\u3002</li> </ol> <p>\u603b\u4e4b\uff0c\u8fd9\u4e9b\u529f\u80fd\u8ba9\u4f60\u53ef\u4ee5\u6267\u884c\u5e76\u884c\u6267\u884c\u5e76\u5b8c\u5168\u63a7\u5236\u5f02\u5e38\u5904\u7406\u3002</p> Python"},{"location":"how-tos/graph-api/#_15","title":"\u5ef6\u8fdf\u8282\u70b9\u6267\u884c","text":"<p>\u5ef6\u8fdf\u8282\u70b9\u6267\u884c\u5728\u4f60\u60f3\u8981\u5ef6\u8fdf\u8282\u70b9\u7684\u6267\u884c\u76f4\u5230\u6240\u6709\u5176\u4ed6\u5f85\u5904\u7406\u4efb\u52a1\u5b8c\u6210\u65f6\u5f88\u6709\u7528\u3002\u8fd9\u5728\u5206\u652f\u5177\u6709\u4e0d\u540c\u957f\u5ea6\u7684\u60c5\u51b5\u4e0b\u7279\u522b\u76f8\u5173\uff0c\u8fd9\u5728 map-reduce \u6d41\u7b49\u5de5\u4f5c\u6d41\u4e2d\u5f88\u5e38\u89c1\u3002</p> <p>\u4e0a\u9762\u7684\u793a\u4f8b\u5c55\u793a\u4e86\u5f53\u6bcf\u4e2a\u8def\u5f84\u53ea\u6709\u4e00\u6b65\u65f6\u5982\u4f55\u6247\u51fa\u548c\u6247\u5165\u3002\u4f46\u662f\u5982\u679c\u4e00\u4e2a\u5206\u652f\u6709\u591a\u4e2a\u6b65\u9aa4\u5462\uff1f\u8ba9\u6211\u4eec\u5728 <code>\"b\"</code> \u5206\u652f\u4e2d\u6dfb\u52a0\u4e00\u4e2a\u8282\u70b9 <code>\"b_2\"</code>\uff1a</p> <pre><code>import operator\nfrom typing import Annotated, Any\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    # operator.add \u5f52\u7ea6\u5668\u51fd\u6570\u4f7f\u5176\u4ec5\u652f\u6301\u8ffd\u52a0\n    aggregate: Annotated[list, operator.add]\n\ndef a(state: State):\n    print(f'Adding \"A\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"A\"]}\n\ndef b(state: State):\n    print(f'Adding \"B\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B\"]}\n\ndef b_2(state: State):\n    print(f'Adding \"B_2\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B_2\"]}\n\ndef c(state: State):\n    print(f'Adding \"C\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"C\"]}\n\ndef d(state: State):\n    print(f'Adding \"D\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"D\"]}\n\nbuilder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\nbuilder.add_node(b_2)\nbuilder.add_node(c)\n# highlight-next-line\nbuilder.add_node(d, defer=True)\nbuilder.add_edge(START, \"a\")\nbuilder.add_edge(\"a\", \"b\")\nbuilder.add_edge(\"a\", \"c\")\nbuilder.add_edge(\"b\", \"b_2\")\nbuilder.add_edge(\"b_2\", \"d\")\nbuilder.add_edge(\"c\", \"d\")\nbuilder.add_edge(\"d\", END)\ngraph = builder.compile()\n</code></pre> <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <pre><code>graph.invoke({\"aggregate\": []})\n</code></pre> <pre><code>Adding \"A\" to []\nAdding \"B\" to ['A']\nAdding \"C\" to ['A']\nAdding \"B_2\" to ['A', 'B', 'C']\nAdding \"D\" to ['A', 'B', 'C', 'B_2']\n</code></pre> <p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u8282\u70b9 <code>\"b\"</code> \u548c <code>\"c\"</code> \u5728\u540c\u4e00\u8d85\u6b65\u9aa4\u4e2d\u5e76\u53d1\u6267\u884c\u3002\u6211\u4eec\u5728\u8282\u70b9 <code>d</code> \u4e0a\u8bbe\u7f6e <code>defer=True</code>\uff0c\u4ee5\u4fbf\u5b83\u5728\u6240\u6709\u5f85\u5904\u7406\u4efb\u52a1\u5b8c\u6210\u4e4b\u524d\u4e0d\u4f1a\u6267\u884c\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u8fd9\u610f\u5473\u7740 <code>\"d\"</code> \u7b49\u5f85\u6267\u884c\u76f4\u5230\u6574\u4e2a <code>\"b\"</code> \u5206\u652f\u5b8c\u6210\u3002</p>"},{"location":"how-tos/graph-api/#_16","title":"\u6761\u4ef6\u5206\u652f","text":"Python <p>\u5982\u679c\u4f60\u7684\u6247\u51fa\u5e94\u8be5\u6839\u636e\u72b6\u6001\u5728\u8fd0\u884c\u65f6\u53d8\u5316\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 add_conditional_edges \u6765\u4f7f\u7528\u56fe\u72b6\u6001\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u8def\u5f84\u3002\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u5176\u4e2d\u8282\u70b9 <code>a</code> \u751f\u6210\u786e\u5b9a\u540e\u7eed\u8282\u70b9\u7684\u72b6\u6001\u66f4\u65b0\u3002</p> <pre><code>import operator\nfrom typing import Annotated, Literal, Sequence\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    aggregate: Annotated[list, operator.add]\n    # \u5411\u72b6\u6001\u6dfb\u52a0\u4e00\u4e2a\u952e\u3002\u6211\u4eec\u5c06\u8bbe\u7f6e\u6b64\u952e\u6765\u786e\u5b9a\n    # \u5982\u4f55\u5206\u652f\u3002\n    which: str\n\ndef a(state: State):\n    print(f'Adding \"A\" to {state[\"aggregate\"]}')\n    # highlight-next-line\n    return {\"aggregate\": [\"A\"], \"which\": \"c\"}\n\ndef b(state: State):\n    print(f'Adding \"B\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B\"]}\n\ndef c(state: State):\n    print(f'Adding \"C\" to {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"C\"]}\n\nbuilder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\nbuilder.add_node(c)\nbuilder.add_edge(START, \"a\")\nbuilder.add_edge(\"b\", END)\nbuilder.add_edge(\"c\", END)\n\ndef conditional_edge(state: State) -&gt; Literal[\"b\", \"c\"]:\n    # \u5728\u6b64\u5904\u586b\u5199\u4f7f\u7528\u72b6\u6001\u7684\u4efb\u610f\u903b\u8f91\n    # \u6765\u786e\u5b9a\u4e0b\u4e00\u4e2a\u8282\u70b9\n    return state[\"which\"]\n\n# highlight-next-line\nbuilder.add_conditional_edges(\"a\", conditional_edge)\n\ngraph = builder.compile()\n</code></pre> <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <pre><code>result = graph.invoke({\"aggregate\": []})\nprint(result)\n</code></pre> <pre><code>Adding \"A\" to []\nAdding \"C\" to ['A']\n{'aggregate': ['A', 'C'], 'which': 'c'}\n</code></pre> JavaScript <p>\u5982\u679c\u4f60\u7684\u6247\u51fa\u5e94\u8be5\u6839\u636e\u72b6\u6001\u5728\u8fd0\u884c\u65f6\u53d8\u5316\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 addConditionalEdges \u6765\u4f7f\u7528\u56fe\u72b6\u6001\u9009\u62e9\u4e00\u4e2a\u6216\u591a\u4e2a\u8def\u5f84\u3002\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\uff0c\u5176\u4e2d\u8282\u70b9 <code>a</code> \u751f\u6210\u786e\u5b9a\u540e\u7eed\u8282\u70b9\u7684\u72b6\u6001\u66f4\u65b0\u3002</p> <pre><code>import \"@langchain/langgraph/zod\";\nimport { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  aggregate: z.array(z.string()).langgraph.reducer((x, y) =&gt; x.concat(y)),\n  // \u5411\u72b6\u6001\u6dfb\u52a0\u4e00\u4e2a\u952e\u3002\u6211\u4eec\u5c06\u8bbe\u7f6e\u6b64\u952e\u6765\u786e\u5b9a\n  // \u5982\u4f55\u5206\u652f\u3002\n  which: z.string().langgraph.reducer((x, y) =&gt; y ?? x),\n});\n\nconst nodeA = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"A\" to ${state.aggregate}`);\n  // highlight-next-line\n  return { aggregate: [\"A\"], which: \"c\" };\n};\n\nconst nodeB = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"B\" to ${state.aggregate}`);\n  return { aggregate: [\"B\"] };\n};\n\nconst nodeC = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Adding \"C\" to ${state.aggregate}`);\n  return { aggregate: [\"C\"] };\n};\n\nconst conditionalEdge = (state: z.infer&lt;typeof State&gt;): \"b\" | \"c\" =&gt; {\n  // \u5728\u6b64\u5904\u586b\u5199\u4f7f\u7528\u72b6\u6001\u7684\u4efb\u610f\u903b\u8f91\n  // \u6765\u786e\u5b9a\u4e0b\u4e00\u4e2a\u8282\u70b9\n  return state.which as \"b\" | \"c\";\n};\n\n// highlight-next-line\nconst graph = new StateGraph(State)\n  .addNode(\"a\", nodeA)\n  .addNode(\"b\", nodeB)\n  .addNode(\"c\", nodeC)\n  .addEdge(START, \"a\")\n  .addEdge(\"b\", END)\n  .addEdge(\"c\", END)\n  .addConditionalEdges(\"a\", conditionalEdge)\n  .compile();\n</code></pre> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <pre><code>const result = await graph.invoke({ aggregate: [] });\nconsole.log(result);\n</code></pre> <pre><code>Adding \"A\" to []\nAdding \"C\" to ['A']\n{ aggregate: ['A', 'C'], which: 'c' }\n</code></pre> <p>Tip</p> <p>\u4f60\u7684\u6761\u4ef6\u8fb9\u53ef\u4ee5\u8def\u7531\u5230\u591a\u4e2a\u76ee\u6807\u8282\u70b9\u3002\u4f8b\u5982\uff1a</p> Python <pre><code>def route_bc_or_cd(state: State) -&gt; Sequence[str]:\n    if state[\"which\"] == \"cd\":\n        return [\"c\", \"d\"]\n    return [\"b\", \"c\"]\n</code></pre> JavaScript <pre><code>const routeBcOrCd = (state: z.infer&lt;typeof State&gt;): string[] =&gt; {\n  if (state.which === \"cd\") {\n    return [\"c\", \"d\"];\n  }\n  return [\"b\", \"c\"];\n};\n</code></pre>"},{"location":"how-tos/graph-api/#map-reduce-send-api","title":"Map-Reduce \u548c Send API","text":"<p>LangGraph \u4f7f\u7528 Send API \u652f\u6301 map-reduce \u548c\u5176\u4ed6\u9ad8\u7ea7\u5206\u652f\u6a21\u5f0f\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528\u5b83\u7684\u793a\u4f8b\uff1a</p> Python <pre><code>from langgraph.graph import StateGraph, START, END\nfrom langgraph.types import Send\nfrom typing_extensions import TypedDict, Annotated\nimport operator\n\nclass OverallState(TypedDict):\n    topic: str\n    subjects: list[str]\n    jokes: Annotated[list[str], operator.add]\n    best_selected_joke: str\n\ndef generate_topics(state: OverallState):\n    return {\"subjects\": [\"lions\", \"elephants\", \"penguins\"]}\n\ndef generate_joke(state: OverallState):\n    joke_map = {\n        \"lions\": \"Why don't lions like fast food? Because they can't catch it!\",\n        \"elephants\": \"Why don't elephants use computers? They're afraid of the mouse!\",\n        \"penguins\": \"Why don't penguins like talking to strangers at parties? Because they find it hard to break the ice.\"\n    }\n    return {\"jokes\": [joke_map[state[\"subject\"]]]}\n\ndef continue_to_jokes(state: OverallState):\n    return [Send(\"generate_joke\", {\"subject\": s}) for s in state[\"subjects\"]]\n\ndef best_joke(state: OverallState):\n    return {\"best_selected_joke\": \"penguins\"}\n\nbuilder = StateGraph(OverallState)\nbuilder.add_node(\"generate_topics\", generate_topics)\nbuilder.add_node(\"generate_joke\", generate_joke)\nbuilder.add_node(\"best_joke\", best_joke)\nbuilder.add_edge(START, \"generate_topics\")\nbuilder.add_conditional_edges(\"generate_topics\", continue_to_jokes, [\"generate_joke\"])\nbuilder.add_edge(\"generate_joke\", \"best_joke\")\nbuilder.add_edge(\"best_joke\", END)\ngraph = builder.compile()\n</code></pre> <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <pre><code># \u8c03\u7528\u56fe\uff1a\u8fd9\u91cc\u6211\u4eec\u8c03\u7528\u5b83\u6765\u751f\u6210\u7b11\u8bdd\u5217\u8868\nfor step in graph.stream({\"topic\": \"animals\"}):\n    print(step)\n</code></pre> <pre><code>{'generate_topics': {'subjects': ['lions', 'elephants', 'penguins']}}\n{'generate_joke': {'jokes': [\"Why don't lions like fast food? Because they can't catch it!\"]}}\n{'generate_joke': {'jokes': [\"Why don't elephants use computers? They're afraid of the mouse!\"]}}\n{'generate_joke': {'jokes': ['Why don't penguins like talking to strangers at parties? Because they find it hard to break the ice.']}}\n{'best_joke': {'best_selected_joke': 'penguins'}}\n</code></pre> JavaScript <pre><code>import \"@langchain/langgraph/zod\";\nimport { StateGraph, START, END, Send } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst OverallState = z.object({\n  topic: z.string(),\n  subjects: z.array(z.string()),\n  jokes: z.array(z.string()).langgraph.reducer((x, y) =&gt; x.concat(y)),\n  bestSelectedJoke: z.string(),\n});\n\nconst generateTopics = (state: z.infer&lt;typeof OverallState&gt;) =&gt; {\n  return { subjects: [\"lions\", \"elephants\", \"penguins\"] };\n};\n\nconst generateJoke = (state: { subject: string }) =&gt; {\n  const jokeMap: Record&lt;string, string&gt; = {\n    lions: \"Why don't lions like fast food? Because they can't catch it!\",\n    elephants: \"Why don't elephants use computers? They're afraid of the mouse!\",\n    penguins: \"Why don't penguins like talking to strangers at parties? Because they find it hard to break the ice.\"\n  };\n  return { jokes: [jokeMap[state.subject]] };\n};\n\nconst continueToJokes = (state: z.infer&lt;typeof OverallState&gt;) =&gt; {\n  return state.subjects.map((subject) =&gt; new Send(\"generateJoke\", { subject }));\n};\n\nconst bestJoke = (state: z.infer&lt;typeof OverallState&gt;) =&gt; {\n  return { bestSelectedJoke: \"penguins\" };\n};\n\nconst graph = new StateGraph(OverallState)\n  .addNode(\"generateTopics\", generateTopics)\n  .addNode(\"generateJoke\", generateJoke)\n  .addNode(\"bestJoke\", bestJoke)\n  .addEdge(START, \"generateTopics\")\n  .addConditionalEdges(\"generateTopics\", continueToJokes)\n  .addEdge(\"generateJoke\", \"bestJoke\")\n  .addEdge(\"bestJoke\", END)\n  .compile();\n</code></pre> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <pre><code>// \u8c03\u7528\u56fe\uff1a\u8fd9\u91cc\u6211\u4eec\u8c03\u7528\u5b83\u6765\u751f\u6210\u7b11\u8bdd\u5217\u8868\nfor await (const step of await graph.stream({ topic: \"animals\" })) {\n  console.log(step);\n}\n</code></pre> <pre><code>{ generateTopics: { subjects: [ 'lions', 'elephants', 'penguins' ] } }\n{ generateJoke: { jokes: [ \"Why don't lions like fast food? Because they can't catch it!\" ] } }\n{ generateJoke: { jokes: [ \"Why don't elephants use computers? They're afraid of the mouse!\" ] } }\n{ generateJoke: { jokes: [ \"Why don't penguins like talking to strangers at parties? Because they find it hard to break the ice.\" ] } }\n{ bestJoke: { bestSelectedJoke: 'penguins' } }\n</code></pre>"},{"location":"how-tos/graph-api/#_17","title":"\u521b\u5efa\u548c\u63a7\u5236\u5faa\u73af","text":"<p>\u5728\u521b\u5efa\u5e26\u6709\u5faa\u73af\u7684\u56fe\u65f6,\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u7ec8\u6b62\u6267\u884c\u7684\u673a\u5236\u3002\u6700\u5e38\u89c1\u7684\u505a\u6cd5\u662f\u6dfb\u52a0\u4e00\u4e2a\u6761\u4ef6\u8fb9,\u4e00\u65e6\u8fbe\u5230\u67d0\u4e2a\u7ec8\u6b62\u6761\u4ef6,\u5c31\u8def\u7531\u5230 END \u8282\u70b9\u3002</p> <p>\u4f60\u8fd8\u53ef\u4ee5\u5728\u8c03\u7528\u6216\u6d41\u5f0f\u4f20\u8f93\u56fe\u65f6\u8bbe\u7f6e\u56fe\u7684\u9012\u5f52\u9650\u5236\u3002\u9012\u5f52\u9650\u5236\u8bbe\u7f6e\u56fe\u5728\u5f15\u53d1\u9519\u8bef\u4e4b\u524d\u5141\u8bb8\u6267\u884c\u7684\u8d85\u6b65\u9aa4\u6570\u91cf\u3002\u5728\u8fd9\u91cc\u9605\u8bfb\u6709\u5173\u9012\u5f52\u9650\u5236\u6982\u5ff5\u7684\u66f4\u591a\u4fe1\u606f\u3002</p> <p>\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u5e26\u6709\u5faa\u73af\u7684\u7b80\u5355\u56fe,\u4ee5\u66f4\u597d\u5730\u7406\u89e3\u8fd9\u4e9b\u673a\u5236\u5982\u4f55\u5de5\u4f5c\u3002</p> <p>Tip</p> <p>\u8981\u8fd4\u56de\u72b6\u6001\u7684\u6700\u540e\u4e00\u4e2a\u503c\u800c\u4e0d\u662f\u6536\u5230\u9012\u5f52\u9650\u5236\u9519\u8bef,\u8bf7\u53c2\u9605\u4e0b\u4e00\u8282\u3002</p> <p>\u5728\u521b\u5efa\u5faa\u73af\u65f6,\u4f60\u53ef\u4ee5\u5305\u542b\u4e00\u4e2a\u6307\u5b9a\u7ec8\u6b62\u6761\u4ef6\u7684\u6761\u4ef6\u8fb9:</p> Python <pre><code>builder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\n\ndef route(state: State) -&gt; Literal[\"b\", END]:\n    if termination_condition(state):\n        return END\n    else:\n        return \"b\"\n\nbuilder.add_edge(START, \"a\")\nbuilder.add_conditional_edges(\"a\", route)\nbuilder.add_edge(\"b\", \"a\")\ngraph = builder.compile()\n</code></pre> JavaScript <pre><code>const graph = new StateGraph(State)\n  .addNode(\"a\", nodeA)\n  .addNode(\"b\", nodeB)\n  .addEdge(START, \"a\")\n  .addConditionalEdges(\"a\", route)\n  .addEdge(\"b\", \"a\")\n  .compile();\n\nconst route = (state: z.infer&lt;typeof State&gt;): \"b\" | typeof END =&gt; {\n  if (terminationCondition(state)) {\n    return END;\n  } else {\n    return \"b\";\n  }\n};\n</code></pre> <p>\u8981\u63a7\u5236\u9012\u5f52\u9650\u5236,\u8bf7\u5728\u914d\u7f6e\u4e2d\u6307\u5b9a <code>\"recursionLimit\"</code>\u3002\u8fd9\u5c06\u5f15\u53d1\u4e00\u4e2a <code>GraphRecursionError</code>,\u4f60\u53ef\u4ee5\u6355\u83b7\u5e76\u5904\u7406\u5b83:</p> Python <pre><code>from langgraph.errors import GraphRecursionError\n\ntry:\n    graph.invoke(inputs, {\"recursion_limit\": 3})\nexcept GraphRecursionError:\n    print(\"Recursion Error\")\n</code></pre> JavaScript <pre><code>import { GraphRecursionError } from \"@langchain/langgraph\";\n\ntry {\n  await graph.invoke(inputs, { recursionLimit: 3 });\n} catch (error) {\n  if (error instanceof GraphRecursionError) {\n    console.log(\"Recursion Error\");\n  }\n}\n</code></pre> <p>\u8ba9\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u5e26\u6709\u7b80\u5355\u5faa\u73af\u7684\u56fe\u3002\u8bf7\u6ce8\u610f,\u6211\u4eec\u4f7f\u7528\u6761\u4ef6\u8fb9\u6765\u5b9e\u73b0\u7ec8\u6b62\u6761\u4ef6\u3002</p> Python <pre><code>import operator\nfrom typing import Annotated, Literal\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    # operator.add \u5f52\u7ea6\u5668\u51fd\u6570\u4f7f\u5176\u4ec5\u652f\u6301\u8ffd\u52a0\n    aggregate: Annotated[list, operator.add]\n\ndef a(state: State):\n    print(f'Node A sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"A\"]}\n\ndef b(state: State):\n    print(f'Node B sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B\"]}\n\n# \u5b9a\u4e49\u8282\u70b9\nbuilder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\n\n# \u5b9a\u4e49\u8fb9\ndef route(state: State) -&gt; Literal[\"b\", END]:\n    if len(state[\"aggregate\"]) &lt; 7:\n        return \"b\"\n    else:\n        return END\n\nbuilder.add_edge(START, \"a\")\nbuilder.add_conditional_edges(\"a\", route)\nbuilder.add_edge(\"b\", \"a\")\ngraph = builder.compile()\n</code></pre> <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> JavaScript <pre><code>import \"@langchain/langgraph/zod\";\nimport { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  // \u5f52\u7ea6\u5668\u4f7f\u5176\u4ec5\u652f\u6301\u8ffd\u52a0\n  aggregate: z.array(z.string()).langgraph.reducer((x, y) =&gt; x.concat(y)),\n});\n\nconst nodeA = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Node A sees ${state.aggregate}`);\n  return { aggregate: [\"A\"] };\n};\n\nconst nodeB = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(`Node B sees ${state.aggregate}`);\n  return { aggregate: [\"B\"] };\n};\n\n// \u5b9a\u4e49\u8fb9\nconst route = (state: z.infer&lt;typeof State&gt;): \"b\" | typeof END =&gt; {\n  if (state.aggregate.length &lt; 7) {\n    return \"b\";\n  } else {\n    return END;\n  }\n};\n\nconst graph = new StateGraph(State)\n  .addNode(\"a\", nodeA)\n  .addNode(\"b\", nodeB)\n  .addEdge(START, \"a\")\n  .addConditionalEdges(\"a\", route)\n  .addEdge(\"b\", \"a\")\n  .compile();\n</code></pre> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <p>\u8fd9\u79cd\u67b6\u6784\u7c7b\u4f3c\u4e8e\u4e00\u4e2a React \u667a\u80fd\u4ee3\u7406,\u5176\u4e2d\u8282\u70b9 <code>\"a\"</code> \u662f\u4e00\u4e2a\u5de5\u5177\u8c03\u7528\u6a21\u578b,\u800c\u8282\u70b9 <code>\"b\"</code> \u4ee3\u8868\u5de5\u5177\u3002</p> <p>\u5728\u6211\u4eec\u7684 <code>route</code> \u6761\u4ef6\u8fb9\u4e2d,\u6211\u4eec\u6307\u5b9a\u5728\u72b6\u6001\u4e2d\u7684 <code>\"aggregate\"</code> \u5217\u8868\u8d85\u8fc7\u9608\u503c\u957f\u5ea6\u540e\u5e94\u8be5\u7ed3\u675f\u3002</p> <p>\u8c03\u7528\u56fe\u65f6,\u6211\u4eec\u770b\u5230\u6211\u4eec\u5728\u8282\u70b9 <code>\"a\"</code> \u548c <code>\"b\"</code> \u4e4b\u95f4\u4ea4\u66ff,\u76f4\u5230\u8fbe\u5230\u7ec8\u6b62\u6761\u4ef6\u540e\u624d\u7ec8\u6b62\u3002</p> Python <pre><code>graph.invoke({\"aggregate\": []})\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode A sees ['A', 'B']\nNode B sees ['A', 'B', 'A']\nNode A sees ['A', 'B', 'A', 'B']\nNode B sees ['A', 'B', 'A', 'B', 'A']\nNode A sees ['A', 'B', 'A', 'B', 'A', 'B']\n</code></pre> JavaScript <pre><code>const result = await graph.invoke({ aggregate: [] });\nconsole.log(result);\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode A sees ['A', 'B']\nNode B sees ['A', 'B', 'A']\nNode A sees ['A', 'B', 'A', 'B']\nNode B sees ['A', 'B', 'A', 'B', 'A']\nNode A sees ['A', 'B', 'A', 'B', 'A', 'B']\n{ aggregate: ['A', 'B', 'A', 'B', 'A', 'B', 'A'] }\n</code></pre>"},{"location":"how-tos/graph-api/#_18","title":"\u65bd\u52a0\u9012\u5f52\u9650\u5236","text":"<p>\u5728\u67d0\u4e9b\u5e94\u7528\u4e2d,\u6211\u4eec\u53ef\u80fd\u65e0\u6cd5\u4fdd\u8bc1\u4f1a\u8fbe\u5230\u7ed9\u5b9a\u7684\u7ec8\u6b62\u6761\u4ef6\u3002\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b,\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u56fe\u7684\u9012\u5f52\u9650\u5236\u3002\u8fd9\u5c06\u5728\u7ed9\u5b9a\u6570\u91cf\u7684\u8d85\u6b65\u9aa4\u4e4b\u540e\u5f15\u53d1 <code>GraphRecursionError</code>\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u6355\u83b7\u5e76\u5904\u7406\u6b64\u5f02\u5e38:</p> Python <pre><code>from langgraph.errors import GraphRecursionError\n\ntry:\n    graph.invoke({\"aggregate\": []}, {\"recursion_limit\": 4})\nexcept GraphRecursionError:\n    print(\"Recursion Error\")\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode C sees ['A', 'B']\nNode D sees ['A', 'B']\nNode A sees ['A', 'B', 'C', 'D']\nRecursion Error\n</code></pre> JavaScript <pre><code>import { GraphRecursionError } from \"@langchain/langgraph\";\n\ntry {\n  await graph.invoke({ aggregate: [] }, { recursionLimit: 4 });\n} catch (error) {\n  if (error instanceof GraphRecursionError) {\n    console.log(\"Recursion Error\");\n  }\n}\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode A sees ['A', 'B']\nNode B sees ['A', 'B', 'A']\nNode A sees ['A', 'B', 'A', 'B']\nRecursion Error\n</code></pre> Python \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u8fbe\u5230\u9012\u5f52\u9650\u5236\u65f6\u8fd4\u56de\u72b6\u6001 <p>\u4e0e\u5176\u5f15\u53d1 <code>GraphRecursionError</code>,\u6211\u4eec\u53ef\u4ee5\u5411\u72b6\u6001\u5f15\u5165\u4e00\u4e2a\u65b0\u952e,\u8be5\u952e\u8ddf\u8e2a\u8fbe\u5230\u9012\u5f52\u9650\u5236\u4e4b\u524d\u5269\u4f59\u7684\u6b65\u6570\u3002\u7136\u540e\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u6b64\u952e\u6765\u786e\u5b9a\u662f\u5426\u5e94\u8be5\u7ed3\u675f\u8fd0\u884c\u3002</p> <p>LangGraph \u5b9e\u73b0\u4e86\u4e00\u4e2a\u7279\u6b8a\u7684 <code>RemainingSteps</code> \u6ce8\u91ca\u3002\u5728\u5e95\u5c42,\u5b83\u521b\u5efa\u4e86\u4e00\u4e2a <code>ManagedValue</code> \u901a\u9053\u2014\u2014\u4e00\u4e2a\u5728\u6211\u4eec\u7684\u56fe\u8fd0\u884c\u671f\u95f4\u5b58\u5728\u4e14\u4e0d\u4f1a\u66f4\u957f\u65f6\u95f4\u5b58\u5728\u7684\u72b6\u6001\u901a\u9053\u3002</p> <p><pre><code>import operator\nfrom typing import Annotated, Literal\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.managed.is_last_step import RemainingSteps\n\nclass State(TypedDict):\n    aggregate: Annotated[list, operator.add]\n    remaining_steps: RemainingSteps\n\ndef a(state: State):\n    print(f'Node A sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"A\"]}\n\ndef b(state: State):\n    print(f'Node B sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B\"]}\n\n# \u5b9a\u4e49\u8282\u70b9\nbuilder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\n\n# \u5b9a\u4e49\u8fb9\ndef route(state: State) -&gt; Literal[\"b\", END]:\n    if state[\"remaining_steps\"] &lt;= 2:\n        return END\n    else:\n        return \"b\"\n\nbuilder.add_edge(START, \"a\")\nbuilder.add_conditional_edges(\"a\", route)\nbuilder.add_edge(\"b\", \"a\")\ngraph = builder.compile()\n\n# \u6d4b\u8bd5\u4e00\u4e0b\nresult = graph.invoke({\"aggregate\": []}, {\"recursion_limit\": 4})\nprint(result)\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode A sees ['A', 'B']\n{'aggregate': ['A', 'B', 'A']}\n</code></pre></p> Python \u6269\u5c55\u793a\u4f8b\uff1a\u5e26\u5206\u652f\u7684\u5faa\u73af <p>\u4e3a\u4e86\u66f4\u597d\u5730\u7406\u89e3\u9012\u5f52\u9650\u5236\u5982\u4f55\u5de5\u4f5c,\u8ba9\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u66f4\u590d\u6742\u7684\u793a\u4f8b\u3002\u4e0b\u9762\u6211\u4eec\u5b9e\u73b0\u4e00\u4e2a\u5faa\u73af,\u4f46\u6709\u4e00\u6b65\u4f1a\u6247\u51fa\u5230\u4e24\u4e2a\u8282\u70b9:</p> <pre><code>import operator\nfrom typing import Annotated, Literal\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    aggregate: Annotated[list, operator.add]\n\ndef a(state: State):\n    print(f'Node A sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"A\"]}\n\ndef b(state: State):\n    print(f'Node B sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"B\"]}\n\ndef c(state: State):\n    print(f'Node C sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"C\"]}\n\ndef d(state: State):\n    print(f'Node D sees {state[\"aggregate\"]}')\n    return {\"aggregate\": [\"D\"]}\n\n# \u5b9a\u4e49\u8282\u70b9\nbuilder = StateGraph(State)\nbuilder.add_node(a)\nbuilder.add_node(b)\nbuilder.add_node(c)\nbuilder.add_node(d)\n\n# \u5b9a\u4e49\u8fb9\ndef route(state: State) -&gt; Literal[\"b\", END]:\n    if len(state[\"aggregate\"]) &lt; 7:\n        return \"b\"\n    else:\n        return END\n\nbuilder.add_edge(START, \"a\")\nbuilder.add_conditional_edges(\"a\", route)\nbuilder.add_edge(\"b\", \"c\")\nbuilder.add_edge(\"b\", \"d\")\nbuilder.add_edge([\"c\", \"d\"], \"a\")\ngraph = builder.compile()\n</code></pre> <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <p>\u8fd9\u4e2a\u56fe\u770b\u8d77\u6765\u5f88\u590d\u6742,\u4f46\u53ef\u4ee5\u88ab\u6982\u5ff5\u5316\u4e3a\u8d85\u6b65\u9aa4\u7684\u5faa\u73af:</p> <ol> <li>\u8282\u70b9 A</li> <li>\u8282\u70b9 B</li> <li>\u8282\u70b9 C \u548c D</li> <li>\u8282\u70b9 A</li> <li>...</li> </ol> <p>\u6211\u4eec\u6709\u4e00\u4e2a\u56db\u4e2a\u8d85\u6b65\u9aa4\u7684\u5faa\u73af,\u5176\u4e2d\u8282\u70b9 C \u548c D \u5e76\u53d1\u6267\u884c\u3002</p> <p>\u5982\u4e4b\u524d\u90a3\u6837\u8c03\u7528\u56fe,\u6211\u4eec\u770b\u5230\u5728\u8fbe\u5230\u7ec8\u6b62\u6761\u4ef6\u4e4b\u524d\u6211\u4eec\u5b8c\u6210\u4e86\u4e24\u5708\u5b8c\u6574\u7684\"\u5faa\u73af\":</p> <p><pre><code>result = graph.invoke({\"aggregate\": []})\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode D sees ['A', 'B']\nNode C sees ['A', 'B']\nNode A sees ['A', 'B', 'C', 'D']\nNode B sees ['A', 'B', 'C', 'D', 'A']\nNode D sees ['A', 'B', 'C', 'D', 'A', 'B']\nNode C sees ['A', 'B', 'C', 'D', 'A', 'B']\nNode A sees ['A', 'B', 'C', 'D', 'A', 'B', 'C', 'D']\n</code></pre></p> <p>\u7136\u800c,\u5982\u679c\u6211\u4eec\u5c06\u9012\u5f52\u9650\u5236\u8bbe\u7f6e\u4e3a\u56db,\u6211\u4eec\u53ea\u5b8c\u6210\u4e00\u5708,\u56e0\u4e3a\u6bcf\u5708\u662f\u56db\u4e2a\u8d85\u6b65\u9aa4:</p> <p><pre><code>from langgraph.errors import GraphRecursionError\n\ntry:\n    result = graph.invoke({\"aggregate\": []}, {\"recursion_limit\": 4})\nexcept GraphRecursionError:\n    print(\"Recursion Error\")\n</code></pre> <pre><code>Node A sees []\nNode B sees ['A']\nNode C sees ['A', 'B']\nNode D sees ['A', 'B']\nNode A sees ['A', 'B', 'C', 'D']\nRecursion Error\n</code></pre></p> Python"},{"location":"how-tos/graph-api/#_19","title":"\u5f02\u6b65","text":"<p>\u4f7f\u7528\u5f02\u6b65\u7f16\u7a0b\u8303\u5f0f\u53ef\u4ee5\u5728\u5e76\u53d1\u8fd0\u884c IO \u5bc6\u96c6\u578b\u4ee3\u7801\u65f6\u4ea7\u751f\u663e\u8457\u7684\u6027\u80fd\u6539\u8fdb(\u4f8b\u5982,\u5411\u804a\u5929\u6a21\u578b\u63d0\u4f9b\u5546\u53d1\u51fa\u5e76\u53d1 API \u8bf7\u6c42)\u3002</p> <p>\u8981\u5c06\u56fe\u7684 <code>sync</code> \u5b9e\u73b0\u8f6c\u6362\u4e3a <code>async</code> \u5b9e\u73b0,\u4f60\u9700\u8981:</p> <ol> <li>\u66f4\u65b0 <code>nodes</code> \u4f7f\u7528 <code>async def</code> \u800c\u4e0d\u662f <code>def</code>\u3002</li> <li>\u66f4\u65b0\u5185\u90e8\u4ee3\u7801\u4ee5\u9002\u5f53\u4f7f\u7528 <code>await</code>\u3002</li> <li>\u6839\u636e\u9700\u8981\u4f7f\u7528 <code>.ainvoke</code> \u6216 <code>.astream</code> \u8c03\u7528\u56fe\u3002</li> </ol> <p>\u56e0\u4e3a\u8bb8\u591a LangChain \u5bf9\u8c61\u5b9e\u73b0\u4e86 Runnable Protocol,\u5b83\u5177\u6709\u6240\u6709 <code>sync</code> \u65b9\u6cd5\u7684 <code>async</code> \u53d8\u4f53,\u6240\u4ee5\u901a\u5e38\u53ef\u4ee5\u76f8\u5f53\u5feb\u901f\u5730\u5c06 <code>sync</code> \u56fe\u5347\u7ea7\u4e3a <code>async</code> \u56fe\u3002</p> <p>\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\u3002\u4e3a\u4e86\u6f14\u793a\u5e95\u5c42 LLM \u7684\u5f02\u6b65\u8c03\u7528,\u6211\u4eec\u5c06\u5305\u542b\u4e00\u4e2a\u804a\u5929\u6a21\u578b:</p> <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import MessagesState, StateGraph\n\n# highlight-next-line\nasync def node(state: MessagesState): # (1)!\n    # highlight-next-line\n    new_message = await llm.ainvoke(state[\"messages\"]) # (2)!\n    return {\"messages\": [new_message]}\n\nbuilder = StateGraph(MessagesState).add_node(node).set_entry_point(\"node\")\ngraph = builder.compile()\n\ninput_message = {\"role\": \"user\", \"content\": \"Hello\"}\n# highlight-next-line\nresult = await graph.ainvoke({\"messages\": [input_message]}) # (3)!\n</code></pre> <ol> <li>\u5c06\u8282\u70b9\u58f0\u660e\u4e3a\u5f02\u6b65\u51fd\u6570\u3002</li> <li>\u5728\u8282\u70b9\u5185\u4f7f\u7528\u53ef\u7528\u7684\u5f02\u6b65\u8c03\u7528\u3002</li> <li>\u5728\u56fe\u5bf9\u8c61\u672c\u8eab\u4e0a\u4f7f\u7528\u5f02\u6b65\u8c03\u7528\u3002</li> </ol> <p>\u5f02\u6b65\u6d41\u5f0f\u4f20\u8f93</p> <p>\u6709\u5173\u4f7f\u7528\u5f02\u6b65\u8fdb\u884c\u6d41\u5f0f\u4f20\u8f93\u7684\u793a\u4f8b,\u8bf7\u53c2\u9605\u6d41\u5f0f\u4f20\u8f93\u6307\u5357\u3002</p>"},{"location":"how-tos/graph-api/#command","title":"\u4f7f\u7528 <code>Command</code> \u7ec4\u5408\u63a7\u5236\u6d41\u548c\u72b6\u6001\u66f4\u65b0","text":"<p>\u7ec4\u5408\u63a7\u5236\u6d41(\u8fb9)\u548c\u72b6\u6001\u66f4\u65b0(\u8282\u70b9)\u53ef\u80fd\u5f88\u6709\u7528\u3002\u4f8b\u5982,\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e2d\u540c\u65f6\u6267\u884c\u72b6\u6001\u66f4\u65b0\u5e76\u51b3\u5b9a\u63a5\u4e0b\u6765\u8981\u53bb\u54ea\u4e2a\u8282\u70b9\u3002LangGraph \u63d0\u4f9b\u4e86\u4e00\u79cd\u65b9\u6cd5,\u901a\u8fc7\u4ece\u8282\u70b9\u51fd\u6570\u8fd4\u56de Command \u5bf9\u8c61\u6765\u5b9e\u73b0:</p> Python <pre><code>def my_node(state: State) -&gt; Command[Literal[\"my_other_node\"]]:\n    return Command(\n        # \u72b6\u6001\u66f4\u65b0\n        update={\"foo\": \"bar\"},\n        # \u63a7\u5236\u6d41\n        goto=\"my_other_node\"\n    )\n</code></pre> JavaScript <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst myNode = (state: State): Command =&gt; {\n  return new Command({\n    // \u72b6\u6001\u66f4\u65b0\n    update: { foo: \"bar\" },\n    // \u63a7\u5236\u6d41\n    goto: \"myOtherNode\"\n  });\n};\n</code></pre> <p>\u6211\u4eec\u5728\u4e0b\u9762\u5c55\u793a\u4e00\u4e2a\u7aef\u5230\u7aef\u793a\u4f8b\u3002\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u5305\u542b 3 \u4e2a\u8282\u70b9\u7684\u7b80\u5355\u56fe:A\u3001B \u548c C\u3002\u6211\u4eec\u5c06\u9996\u5148\u6267\u884c\u8282\u70b9 A,\u7136\u540e\u6839\u636e\u8282\u70b9 A \u7684\u8f93\u51fa\u51b3\u5b9a\u63a5\u4e0b\u6765\u662f\u53bb\u8282\u70b9 B \u8fd8\u662f\u8282\u70b9 C\u3002</p> Python <pre><code>import random\nfrom typing_extensions import TypedDict, Literal\nfrom langgraph.graph import StateGraph, START\nfrom langgraph.types import Command\n\n# \u5b9a\u4e49\u56fe\u72b6\u6001\nclass State(TypedDict):\n    foo: str\n\n# \u5b9a\u4e49\u8282\u70b9\n\ndef node_a(state: State) -&gt; Command[Literal[\"node_b\", \"node_c\"]]:\n    print(\"Called A\")\n    value = random.choice([\"b\", \"c\"])\n    # \u8fd9\u662f\u6761\u4ef6\u8fb9\u51fd\u6570\u7684\u66ff\u4ee3\n    if value == \"b\":\n        goto = \"node_b\"\n    else:\n        goto = \"node_c\"\n\n    # \u6ce8\u610f Command \u5982\u4f55\u5141\u8bb8\u4f60\u540c\u65f6\u66f4\u65b0\u56fe\u72b6\u6001\u5e76\u8def\u7531\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\n    return Command(\n        # \u8fd9\u662f\u72b6\u6001\u66f4\u65b0\n        update={\"foo\": value},\n        # \u8fd9\u662f\u8fb9\u7684\u66ff\u4ee3\n        goto=goto,\n    )\n\ndef node_b(state: State):\n    print(\"Called B\")\n    return {\"foo\": state[\"foo\"] + \"b\"}\n\ndef node_c(state: State):\n    print(\"Called C\")\n    return {\"foo\": state[\"foo\"] + \"c\"}\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u8282\u70b9\u521b\u5efa <code>StateGraph</code>\u3002\u8bf7\u6ce8\u610f,\u8be5\u56fe\u6ca1\u6709\u7528\u4e8e\u8def\u7531\u7684\u6761\u4ef6\u8fb9!\u8fd9\u662f\u56e0\u4e3a\u63a7\u5236\u6d41\u5728 <code>node_a</code> \u5185\u90e8\u4f7f\u7528 <code>Command</code> \u5b9a\u4e49\u3002</p> <pre><code>builder = StateGraph(State)\nbuilder.add_edge(START, \"node_a\")\nbuilder.add_node(node_a)\nbuilder.add_node(node_b)\nbuilder.add_node(node_c)\n# \u6ce8\u610f:\u8282\u70b9 A\u3001B \u548c C \u4e4b\u95f4\u6ca1\u6709\u8fb9!\n\ngraph = builder.compile()\n</code></pre> <p>Important</p> <p>\u4f60\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u6211\u4eec\u4f7f\u7528 <code>Command</code> \u4f5c\u4e3a\u8fd4\u56de\u7c7b\u578b\u6ce8\u91ca,\u4f8b\u5982 <code>Command[Literal[\"node_b\", \"node_c\"]]</code>\u3002\u8fd9\u5bf9\u4e8e\u56fe\u6e32\u67d3\u662f\u5fc5\u8981\u7684,\u5e76\u544a\u8bc9 LangGraph <code>node_a</code> \u53ef\u4ee5\u5bfc\u822a\u5230 <code>node_b</code> \u548c <code>node_c</code>\u3002</p> <pre><code>from IPython.display import display, Image\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <p>\u5982\u679c\u6211\u4eec\u591a\u6b21\u8fd0\u884c\u56fe,\u6211\u4eec\u4f1a\u770b\u5230\u5b83\u6839\u636e\u8282\u70b9 A \u4e2d\u7684\u968f\u673a\u9009\u62e9\u91c7\u7528\u4e0d\u540c\u7684\u8def\u5f84(A -&gt; B \u6216 A -&gt; C)\u3002</p> <pre><code>graph.invoke({\"foo\": \"\"})\n</code></pre> <pre><code>Called A\nCalled C\n</code></pre> JavaScript <pre><code>import { StateGraph, START, Command } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u56fe\u72b6\u6001\nconst State = z.object({\n  foo: z.string(),\n});\n\n// \u5b9a\u4e49\u8282\u70b9\n\nconst nodeA = (state: z.infer&lt;typeof State&gt;): Command =&gt; {\n  console.log(\"Called A\");\n  const value = Math.random() &gt; 0.5 ? \"b\" : \"c\";\n  // \u8fd9\u662f\u6761\u4ef6\u8fb9\u51fd\u6570\u7684\u66ff\u4ee3\n  const goto = value === \"b\" ? \"nodeB\" : \"nodeC\";\n\n  // \u6ce8\u610f Command \u5982\u4f55\u5141\u8bb8\u4f60\u540c\u65f6\u66f4\u65b0\u56fe\u72b6\u6001\u5e76\u8def\u7531\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\n  return new Command({\n    // \u8fd9\u662f\u72b6\u6001\u66f4\u65b0\n    update: { foo: value },\n    // \u8fd9\u662f\u8fb9\u7684\u66ff\u4ee3\n    goto,\n  });\n};\n\nconst nodeB = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(\"Called B\");\n  return { foo: state.foo + \"b\" };\n};\n\nconst nodeC = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(\"Called C\");\n  return { foo: state.foo + \"c\" };\n};\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u8282\u70b9\u521b\u5efa <code>StateGraph</code>\u3002\u8bf7\u6ce8\u610f,\u8be5\u56fe\u6ca1\u6709\u7528\u4e8e\u8def\u7531\u7684\u6761\u4ef6\u8fb9!\u8fd9\u662f\u56e0\u4e3a\u63a7\u5236\u6d41\u5728 <code>nodeA</code> \u5185\u90e8\u4f7f\u7528 <code>Command</code> \u5b9a\u4e49\u3002</p> <pre><code>const graph = new StateGraph(State)\n  .addNode(\"nodeA\", nodeA, {\n    ends: [\"nodeB\", \"nodeC\"],\n  })\n  .addNode(\"nodeB\", nodeB)\n  .addNode(\"nodeC\", nodeC)\n  .addEdge(START, \"nodeA\")\n  .compile();\n</code></pre> <p>Important</p> <p>\u4f60\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230\u6211\u4eec\u4f7f\u7528 <code>ends</code> \u6765\u6307\u5b9a <code>nodeA</code> \u53ef\u4ee5\u5bfc\u822a\u5230\u54ea\u4e9b\u8282\u70b9\u3002\u8fd9\u5bf9\u4e8e\u56fe\u6e32\u67d3\u662f\u5fc5\u8981\u7684,\u5e76\u544a\u8bc9 LangGraph <code>nodeA</code> \u53ef\u4ee5\u5bfc\u822a\u5230 <code>nodeB</code> \u548c <code>nodeC</code>\u3002</p> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre> <p>\u5982\u679c\u6211\u4eec\u591a\u6b21\u8fd0\u884c\u56fe,\u6211\u4eec\u4f1a\u770b\u5230\u5b83\u6839\u636e\u8282\u70b9 A \u4e2d\u7684\u968f\u673a\u9009\u62e9\u91c7\u7528\u4e0d\u540c\u7684\u8def\u5f84(A -&gt; B \u6216 A -&gt; C)\u3002</p> <pre><code>const result = await graph.invoke({ foo: \"\" });\nconsole.log(result);\n</code></pre> <pre><code>Called A\nCalled C\n{ foo: 'cc' }\n</code></pre>"},{"location":"how-tos/graph-api/#_20","title":"\u5bfc\u822a\u5230\u7236\u56fe\u4e2d\u7684\u8282\u70b9","text":"<p>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528\u5b50\u56fe,\u4f60\u53ef\u80fd\u5e0c\u671b\u4ece\u5b50\u56fe\u5185\u7684\u8282\u70b9\u5bfc\u822a\u5230\u4e0d\u540c\u7684\u5b50\u56fe(\u5373\u7236\u56fe\u4e2d\u7684\u4e0d\u540c\u8282\u70b9)\u3002\u4e3a\u6b64,\u4f60\u53ef\u4ee5\u5728 <code>Command</code> \u4e2d\u6307\u5b9a <code>graph=Command.PARENT</code>:</p> Python <pre><code>def my_node(state: State) -&gt; Command[Literal[\"my_other_node\"]]:\n    return Command(\n        update={\"foo\": \"bar\"},\n        goto=\"other_subgraph\",  # \u5176\u4e2d `other_subgraph` \u662f\u7236\u56fe\u4e2d\u7684\u4e00\u4e2a\u8282\u70b9\n        graph=Command.PARENT\n    )\n</code></pre> JavaScript <pre><code>const myNode = (state: State): Command =&gt; {\n  return new Command({\n    update: { foo: \"bar\" },\n    goto: \"otherSubgraph\",  // \u5176\u4e2d `otherSubgraph` \u662f\u7236\u56fe\u4e2d\u7684\u4e00\u4e2a\u8282\u70b9\n    graph: Command.PARENT\n  });\n};\n</code></pre> <p>\u8ba9\u6211\u4eec\u4f7f\u7528\u4e0a\u9762\u7684\u793a\u4f8b\u6765\u6f14\u793a\u8fd9\u4e00\u70b9\u3002\u6211\u4eec\u5c06\u901a\u8fc7\u5c06\u4e0a\u9762\u793a\u4f8b\u4e2d\u7684 <code>nodeA</code> \u66f4\u6539\u4e3a\u5355\u8282\u70b9\u56fe\u6765\u505a\u5230\u8fd9\u4e00\u70b9,\u6211\u4eec\u5c06\u5176\u4f5c\u4e3a\u5b50\u56fe\u6dfb\u52a0\u5230\u7236\u56fe\u4e2d\u3002</p> <p>\u4f7f\u7528 <code>Command.PARENT</code> \u8fdb\u884c\u72b6\u6001\u66f4\u65b0</p> <p>\u5f53\u4f60\u4ece\u5b50\u56fe\u8282\u70b9\u5411\u7236\u56fe\u8282\u70b9\u53d1\u9001\u66f4\u65b0\u65f6,\u5bf9\u4e8e\u7236\u56fe\u548c\u5b50\u56fe\u72b6\u6001\u6a21\u5f0f\u5171\u4eab\u7684\u952e,\u4f60**\u5fc5\u987b**\u5728\u7236\u56fe\u72b6\u6001\u4e2d\u4e3a\u8981\u66f4\u65b0\u7684\u952e\u5b9a\u4e49\u5f52\u7ea6\u5668\u3002\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u793a\u4f8b\u3002</p> Python <pre><code>import operator\nfrom typing_extensions import Annotated\n\nclass State(TypedDict):\n    # \u6ce8\u610f:\u6211\u4eec\u5728\u8fd9\u91cc\u5b9a\u4e49\u4e00\u4e2a\u5f52\u7ea6\u5668\n    # highlight-next-line\n    foo: Annotated[str, operator.add]\n\ndef node_a(state: State):\n    print(\"Called A\")\n    value = random.choice([\"a\", \"b\"])\n    # \u8fd9\u662f\u6761\u4ef6\u8fb9\u51fd\u6570\u7684\u66ff\u4ee3\n    if value == \"a\":\n        goto = \"node_b\"\n    else:\n        goto = \"node_c\"\n\n    # \u6ce8\u610f Command \u5982\u4f55\u5141\u8bb8\u4f60\u540c\u65f6\u66f4\u65b0\u56fe\u72b6\u6001\u5e76\u8def\u7531\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\n    return Command(\n        update={\"foo\": value},\n        goto=goto,\n        # \u8fd9\u544a\u8bc9 LangGraph \u5bfc\u822a\u5230\u7236\u56fe\u4e2d\u7684 node_b \u6216 node_c\n        # \u6ce8\u610f:\u8fd9\u5c06\u5bfc\u822a\u5230\u76f8\u5bf9\u4e8e\u5b50\u56fe\u6700\u8fd1\u7684\u7236\u56fe\n        # highlight-next-line\n        graph=Command.PARENT,\n    )\n\nsubgraph = StateGraph(State).add_node(node_a).add_edge(START, \"node_a\").compile()\n\ndef node_b(state: State):\n    print(\"Called B\")\n    # \u6ce8\u610f:\u7531\u4e8e\u6211\u4eec\u5b9a\u4e49\u4e86\u5f52\u7ea6\u5668,\u6211\u4eec\u4e0d\u9700\u8981\u624b\u52a8\u8ffd\u52a0\n    # \u65b0\u5b57\u7b26\u5230\u73b0\u6709\u7684 'foo' \u503c\u3002\u76f8\u53cd,\u5f52\u7ea6\u5668\u5c06\u81ea\u52a8\u8ffd\u52a0\u8fd9\u4e9b\n    # (\u901a\u8fc7 operator.add)\n    # highlight-next-line\n    return {\"foo\": \"b\"}\n\ndef node_c(state: State):\n    print(\"Called C\")\n    # highlight-next-line\n    return {\"foo\": \"c\"}\n\nbuilder = StateGraph(State)\nbuilder.add_edge(START, \"subgraph\")\nbuilder.add_node(\"subgraph\", subgraph)\nbuilder.add_node(node_b)\nbuilder.add_node(node_c)\n\ngraph = builder.compile()\n</code></pre> <pre><code>graph.invoke({\"foo\": \"\"})\n</code></pre> <pre><code>Called A\nCalled C\n</code></pre> JavaScript <pre><code>import \"@langchain/langgraph/zod\";\nimport { StateGraph, START, Command } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  // \u6ce8\u610f:\u6211\u4eec\u5728\u8fd9\u91cc\u5b9a\u4e49\u4e00\u4e2a\u5f52\u7ea6\u5668\n  // highlight-next-line\n  foo: z.string().langgraph.reducer((x, y) =&gt; x + y),\n});\n\nconst nodeA = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(\"Called A\");\n  const value = Math.random() &gt; 0.5 ? \"nodeB\" : \"nodeC\";\n\n  // \u6ce8\u610f Command \u5982\u4f55\u5141\u8bb8\u4f60\u540c\u65f6\u66f4\u65b0\u56fe\u72b6\u6001\u5e76\u8def\u7531\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\n  return new Command({\n    update: { foo: \"a\" },\n    goto: value,\n    // \u8fd9\u544a\u8bc9 LangGraph \u5bfc\u822a\u5230\u7236\u56fe\u4e2d\u7684 nodeB \u6216 nodeC\n    // \u6ce8\u610f:\u8fd9\u5c06\u5bfc\u822a\u5230\u76f8\u5bf9\u4e8e\u5b50\u56fe\u6700\u8fd1\u7684\u7236\u56fe\n    // highlight-next-line\n    graph: Command.PARENT,\n  });\n};\n\nconst subgraph = new StateGraph(State)\n  .addNode(\"nodeA\", nodeA, { ends: [\"nodeB\", \"nodeC\"] })\n  .addEdge(START, \"nodeA\")\n  .compile();\n\nconst nodeB = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(\"Called B\");\n  // \u6ce8\u610f:\u7531\u4e8e\u6211\u4eec\u5b9a\u4e49\u4e86\u5f52\u7ea6\u5668,\u6211\u4eec\u4e0d\u9700\u8981\u624b\u52a8\u8ffd\u52a0\n  // \u65b0\u5b57\u7b26\u5230\u73b0\u6709\u7684 'foo' \u503c\u3002\u76f8\u53cd,\u5f52\u7ea6\u5668\u5c06\u81ea\u52a8\u8ffd\u52a0\u8fd9\u4e9b\n  // highlight-next-line\n  return { foo: \"b\" };\n};\n\nconst nodeC = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  console.log(\"Called C\");\n  // highlight-next-line\n  return { foo: \"c\" };\n};\n\nconst graph = new StateGraph(State)\n  .addNode(\"subgraph\", subgraph, { ends: [\"nodeB\", \"nodeC\"] })\n  .addNode(\"nodeB\", nodeB)\n  .addNode(\"nodeC\", nodeC)\n  .addEdge(START, \"subgraph\")\n  .compile();\n</code></pre> <pre><code>const result = await graph.invoke({ foo: \"\" });\nconsole.log(result);\n</code></pre> <pre><code>Called A\nCalled C\n{ foo: 'ac' }\n</code></pre>"},{"location":"how-tos/graph-api/#_21","title":"\u5728\u5de5\u5177\u5185\u4f7f\u7528","text":"<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u7528\u4f8b\u662f\u4ece\u5de5\u5177\u5185\u90e8\u66f4\u65b0\u56fe\u72b6\u6001\u3002\u4f8b\u5982,\u5728\u5ba2\u6237\u652f\u6301\u5e94\u7528\u7a0b\u5e8f\u4e2d,\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u5bf9\u8bdd\u5f00\u59cb\u65f6\u6839\u636e\u5ba2\u6237\u7684\u5e10\u53f7\u6216 ID \u67e5\u627e\u5ba2\u6237\u4fe1\u606f\u3002\u8981\u4ece\u5de5\u5177\u66f4\u65b0\u56fe\u72b6\u6001,\u4f60\u53ef\u4ee5\u4ece\u5de5\u5177\u8fd4\u56de <code>Command(update={\"my_custom_key\": \"foo\", \"messages\": [...]})</code>:</p> Python <pre><code>@tool\ndef lookup_user_info(tool_call_id: Annotated[str, InjectedToolCallId], config: RunnableConfig):\n    \"\"\"\u4f7f\u7528\u5b83\u6765\u67e5\u627e\u7528\u6237\u4fe1\u606f\u4ee5\u66f4\u597d\u5730\u534f\u52a9\u4ed6\u4eec\u56de\u7b54\u95ee\u9898\u3002\"\"\"\n    user_info = get_user_info(config.get(\"configurable\", {}).get(\"user_id\"))\n    return Command(\n        update={\n            # \u66f4\u65b0\u72b6\u6001\u952e\n            \"user_info\": user_info,\n            # \u66f4\u65b0\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\n            \"messages\": [ToolMessage(\"Successfully looked up user information\", tool_call_id=tool_call_id)]\n        }\n    )\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { Command } from \"@langchain/langgraph\";\nimport { RunnableConfig } from \"@langchain/core/runnables\";\nimport { z } from \"zod\";\n\nconst lookupUserInfo = tool(\n  async (input, config: RunnableConfig) =&gt; {\n    const userId = config.configurable?.userId;\n    const userInfo = getUserInfo(userId);\n    return new Command({\n      update: {\n        // \u66f4\u65b0\u72b6\u6001\u952e\n        userInfo: userInfo,\n        // \u66f4\u65b0\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\n        messages: [{\n          role: \"tool\",\n          content: \"Successfully looked up user information\",\n          tool_call_id: config.toolCall.id\n        }]\n      }\n    });\n  },\n  {\n    name: \"lookupUserInfo\",\n    description: \"\u4f7f\u7528\u5b83\u6765\u67e5\u627e\u7528\u6237\u4fe1\u606f\u4ee5\u66f4\u597d\u5730\u534f\u52a9\u4ed6\u4eec\u56de\u7b54\u95ee\u9898\u3002\",\n    schema: z.object({}),\n  }\n);\n</code></pre> <p>Important</p> <p>\u5f53\u4ece\u5de5\u5177\u8fd4\u56de <code>Command</code> \u65f6,\u4f60\u5fc5\u987b\u5728 <code>Command.update</code> \u4e2d\u5305\u542b <code>messages</code>(\u6216\u7528\u4e8e\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u7684\u4efb\u4f55\u72b6\u6001\u952e),\u5e76\u4e14 <code>messages</code> \u4e2d\u7684\u6d88\u606f\u5217\u8868\u5fc5\u987b\u5305\u542b\u4e00\u4e2a <code>ToolMessage</code>\u3002\u8fd9\u5bf9\u4e8e\u751f\u6210\u7684\u6d88\u606f\u5386\u53f2\u8bb0\u5f55\u6709\u6548\u662f\u5fc5\u8981\u7684(LLM \u63d0\u4f9b\u5546\u8981\u6c42\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f\u540e\u9762\u5fc5\u987b\u8ddf\u7740\u5de5\u5177\u7ed3\u679c\u6d88\u606f)\u3002</p> <p>\u5982\u679c\u4f60\u6b63\u5728\u4f7f\u7528\u901a\u8fc7 <code>Command</code> \u66f4\u65b0\u72b6\u6001\u7684\u5de5\u5177,\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u9884\u6784\u5efa\u7684 <code>ToolNode</code>,\u5b83\u4f1a\u81ea\u52a8\u5904\u7406\u8fd4\u56de <code>Command</code> \u5bf9\u8c61\u7684\u5de5\u5177\u5e76\u5c06\u5b83\u4eec\u4f20\u64ad\u5230\u56fe\u72b6\u6001\u3002\u5982\u679c\u4f60\u6b63\u5728\u7f16\u5199\u8c03\u7528\u5de5\u5177\u7684\u81ea\u5b9a\u4e49\u8282\u70b9,\u5219\u9700\u8981\u624b\u52a8\u4f20\u64ad\u5de5\u5177\u8fd4\u56de\u7684 <code>Command</code> \u5bf9\u8c61\u4f5c\u4e3a\u8282\u70b9\u7684\u66f4\u65b0\u3002</p>"},{"location":"how-tos/graph-api/#_22","title":"\u53ef\u89c6\u5316\u4f60\u7684\u56fe","text":"<p>\u8fd9\u91cc\u6211\u4eec\u6f14\u793a\u5982\u4f55\u53ef\u89c6\u5316\u4f60\u521b\u5efa\u7684\u56fe\u3002</p> <p>\u4f60\u53ef\u4ee5\u53ef\u89c6\u5316\u4efb\u610f\u7684 Graph,\u5305\u62ec StateGraph\u3002</p> Python <p>\u8ba9\u6211\u4eec\u901a\u8fc7\u7ed8\u5236\u5206\u5f62\u6765\u83b7\u5f97\u4e00\u4e9b\u4e50\u8da3 :)\u3002</p> <pre><code>import random\nfrom typing import Annotated, Literal\nfrom typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\nclass MyNode:\n    def __init__(self, name: str):\n        self.name = name\n    def __call__(self, state: State):\n        return {\"messages\": [(\"assistant\", f\"Called node {self.name}\")]}\n\ndef route(state) -&gt; Literal[\"entry_node\", \"__end__\"]:\n    if len(state[\"messages\"]) &gt; 10:\n        return \"__end__\"\n    return \"entry_node\"\n\ndef add_fractal_nodes(builder, current_node, level, max_level):\n    if level &gt; max_level:\n        return\n    # Number of nodes to create at this level\n    num_nodes = random.randint(1, 3)  # Adjust randomness as needed\n    for i in range(num_nodes):\n        nm = [\"A\", \"B\", \"C\"][i]\n        node_name = f\"node_{current_node}_{nm}\"\n        builder.add_node(node_name, MyNode(node_name))\n        builder.add_edge(current_node, node_name)\n        # Recursively add more nodes\n        r = random.random()\n        if r &gt; 0.2 and level + 1 &lt; max_level:\n            add_fractal_nodes(builder, node_name, level + 1, max_level)\n        elif r &gt; 0.05:\n            builder.add_conditional_edges(node_name, route, node_name)\n        else:\n            # End\n            builder.add_edge(node_name, \"__end__\")\n\ndef build_fractal_graph(max_level: int):\n    builder = StateGraph(State)\n    entry_point = \"entry_node\"\n    builder.add_node(entry_point, MyNode(entry_point))\n    builder.add_edge(START, entry_point)\n    add_fractal_nodes(builder, entry_point, 1, max_level)\n    # Optional: set a finish point if required\n    builder.add_edge(entry_point, END)  # or any specific node\n    return builder.compile()\n\napp = build_fractal_graph(3)\n</code></pre> JavaScript <p>\u8ba9\u6211\u4eec\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u793a\u4f8b\u56fe\u6765\u6f14\u793a\u53ef\u89c6\u5316\u3002</p> <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = MessagesZodState.extend({\n  value: z.number(),\n});\n\nconst app = new StateGraph(State)\n  .addNode(\"node1\", (state) =&gt; {\n    return { value: state.value + 1 };\n  })\n  .addNode(\"node2\", (state) =&gt; {\n    return { value: state.value * 2 };\n  })\n  .addEdge(START, \"node1\")\n  .addConditionalEdges(\"node1\", (state) =&gt; {\n    if (state.value &lt; 10) {\n      return \"node2\";\n    }\n    return END;\n  })\n  .addEdge(\"node2\", \"node1\")\n  .compile();\n</code></pre>"},{"location":"how-tos/graph-api/#mermaid","title":"Mermaid","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c06\u56fe\u7c7b\u8f6c\u6362\u4e3a Mermaid \u8bed\u6cd5\u3002</p> Python <pre><code>print(app.get_graph().draw_mermaid())\n</code></pre> <pre><code>%%{init: {'flowchart': {'curve': 'linear'}}}%%\ngraph TD;\n    __start__([&lt;p&gt;__start__&lt;/p&gt;])\n    entry_node(entry_node)\n    node_entry_node_A(node_entry_node_A)\n    node_entry_node_B(node_entry_node_B)\n    node_node_entry_node_B_A(node_node_entry_node_B_A)\n    node_node_entry_node_B_B(node_node_entry_node_B_B)\n    node_node_entry_node_B_C(node_node_entry_node_B_C)\n    __end__([&lt;p&gt;__end__&lt;/p&gt;])\n    __start__ --&gt; entry_node;\n    entry_node --&gt; __end__;\n    entry_node --&gt; node_entry_node_A;\n    entry_node --&gt; node_entry_node_B;\n    node_entry_node_B --&gt; node_node_entry_node_B_A;\n    node_entry_node_B --&gt; node_node_entry_node_B_B;\n    node_entry_node_B --&gt; node_node_entry_node_B_C;\n    node_entry_node_A -.-&gt; entry_node;\n    node_entry_node_A -.-&gt; __end__;\n    node_node_entry_node_B_A -.-&gt; entry_node;\n    node_node_entry_node_B_A -.-&gt; __end__;\n    node_node_entry_node_B_B -.-&gt; entry_node;\n    node_node_entry_node_B_B -.-&gt; __end__;\n    node_node_entry_node_B_C -.-&gt; entry_node;\n    node_node_entry_node_B_C -.-&gt; __end__;\n    classDef default fill:#f2f0ff,line-height:1.2\n    classDef first fill-opacity:0\n    classDef last fill:#bfb6fc\n</code></pre> JavaScript <pre><code>const drawableGraph = await app.getGraphAsync();\nconsole.log(drawableGraph.drawMermaid());\n</code></pre> <pre><code>%%{init: {'flowchart': {'curve': 'linear'}}}%%\ngraph TD;\n    __start__([&lt;p&gt;__start__&lt;/p&gt;])\n    node1(node1)\n    node2(node2)\n    __end__([&lt;p&gt;__end__&lt;/p&gt;])\n    __start__ --&gt; node1;\n    node1 -.-&gt; node2;\n    node1 -.-&gt; __end__;\n    node2 --&gt; node1;\n    classDef default fill:#f2f0ff,line-height:1.2\n    classDef first fill-opacity:0\n    classDef last fill:#bfb6fc\n</code></pre>"},{"location":"how-tos/graph-api/#png","title":"PNG","text":"Python <p>\u5982\u679c\u9700\u8981,\u6211\u4eec\u53ef\u4ee5\u5c06\u56fe\u6e32\u67d3\u4e3a <code>.png</code>\u3002\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e09\u4e2a\u9009\u9879:</p> <ul> <li>\u4f7f\u7528 Mermaid.ink API(\u4e0d\u9700\u8981\u989d\u5916\u7684\u5305)</li> <li>\u4f7f\u7528 Mermaid + Pyppeteer(\u9700\u8981 <code>pip install pyppeteer</code>)</li> <li>\u4f7f\u7528 graphviz(\u9700\u8981 <code>pip install graphviz</code>)</li> </ul> <p>\u4f7f\u7528 Mermaid.Ink</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b,<code>draw_mermaid_png()</code> \u4f7f\u7528 Mermaid.Ink \u7684 API \u6765\u751f\u6210\u56fe\u8868\u3002</p> <pre><code>from IPython.display import Image, display\nfrom langchain_core.runnables.graph import CurveStyle, MermaidDrawMethod, NodeStyles\n\ndisplay(Image(app.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <p>\u4f7f\u7528 Mermaid + Pyppeteer</p> <pre><code>import nest_asyncio\n\nnest_asyncio.apply()  # Jupyter Notebook \u8fd0\u884c\u5f02\u6b65\u51fd\u6570\u6240\u9700\n\ndisplay(\n    Image(\n        app.get_graph().draw_mermaid_png(\n            curve_style=CurveStyle.LINEAR,\n            node_colors=NodeStyles(first=\"#ffdfba\", last=\"#baffc9\", default=\"#fad7de\"),\n            wrap_label_n_words=9,\n            output_file_path=None,\n            draw_method=MermaidDrawMethod.PYPPETEER,\n            background_color=\"white\",\n            padding=10,\n        )\n    )\n)\n</code></pre> <p>\u4f7f\u7528 Graphviz</p> <pre><code>try:\n    display(Image(app.get_graph().draw_png()))\nexcept ImportError:\n    print(\n        \"You likely need to install dependencies for pygraphviz, see more here https://github.com/pygraphviz/pygraphviz/blob/main/INSTALL.txt\"\n    )\n</code></pre> JavaScript <p>\u5982\u679c\u9700\u8981,\u6211\u4eec\u53ef\u4ee5\u5c06\u56fe\u6e32\u67d3\u4e3a <code>.png</code>\u3002\u8fd9\u4f7f\u7528 Mermaid.ink API \u6765\u751f\u6210\u56fe\u8868\u3002</p> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await app.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"graph.png\", imageBuffer);\n</code></pre>"},{"location":"how-tos/multi_agent/","title":"\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf","text":"<p>\u5355\u4e2a\u667a\u80fd\u4ee3\u7406\u5982\u679c\u9700\u8981\u5728\u591a\u4e2a\u9886\u57df\u8fdb\u884c\u4e13\u4e1a\u5316\u5904\u7406\u6216\u7ba1\u7406\u5927\u91cf\u5de5\u5177\u65f6\u53ef\u80fd\u4f1a\u9047\u5230\u56f0\u96be\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u4f60\u53ef\u4ee5\u5c06\u667a\u80fd\u4ee3\u7406\u62c6\u5206\u4e3a\u66f4\u5c0f\u7684\u72ec\u7acb\u667a\u80fd\u4ee3\u7406\uff0c\u5e76\u5c06\u5b83\u4eec\u7ec4\u5408\u6210\u4e00\u4e2a\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</p> <p>\u5728\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u4e4b\u95f4\u9700\u8981\u76f8\u4e92\u901a\u4fe1\u3002\u5b83\u4eec\u901a\u8fc7\u4ea4\u63a5\u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9\u2014\u2014\u8fd9\u662f\u4e00\u4e2a\u539f\u8bed\uff0c\u7528\u4e8e\u63cf\u8ff0\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u4ee5\u53ca\u53d1\u9001\u7ed9\u8be5\u667a\u80fd\u4ee3\u7406\u7684\u6709\u6548\u8d1f\u8f7d\u3002</p> <p>\u672c\u6307\u5357\u6db5\u76d6\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>\u5b9e\u73b0\u667a\u80fd\u4ee3\u7406\u4e4b\u95f4\u7684\u4ea4\u63a5</li> <li>\u4f7f\u7528\u4ea4\u63a5\u548c\u9884\u6784\u5efa\u7684\u667a\u80fd\u4ee3\u7406\u6765\u6784\u5efa\u81ea\u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf</li> </ul> <p>\u8981\u5f00\u59cb\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\uff0c\u8bf7\u67e5\u770b LangGraph \u9884\u6784\u5efa\u5b9e\u73b0\u4e2d\u4e24\u79cd\u6700\u6d41\u884c\u7684\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u2014\u2014supervisor \u548c swarm\u3002</p>"},{"location":"how-tos/multi_agent/#_2","title":"\u4ea4\u63a5","text":"<p>\u8981\u5728\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d\u8bbe\u7f6e\u667a\u80fd\u4ee3\u7406\u4e4b\u95f4\u7684\u901a\u4fe1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ea4\u63a5\u2014\u2014\u4e00\u79cd\u6a21\u5f0f\uff0c\u5176\u4e2d\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u63a7\u5236\u6743*\u4ea4\u63a5*\u7ed9\u53e6\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u3002\u4ea4\u63a5\u5141\u8bb8\u4f60\u6307\u5b9a\uff1a</p> <ul> <li>destination\uff08\u76ee\u6807\uff09\uff1a\u8981\u5bfc\u822a\u5230\u7684\u76ee\u6807\u667a\u80fd\u4ee3\u7406\uff08\u4f8b\u5982\uff0c\u8981\u8df3\u8f6c\u5230\u7684 LangGraph \u8282\u70b9\u540d\u79f0\uff09</li> <li>payload\uff08\u6709\u6548\u8d1f\u8f7d\uff09\uff1a\u8981\u4f20\u9012\u7ed9\u8be5\u667a\u80fd\u4ee3\u7406\u7684\u4fe1\u606f\uff08\u4f8b\u5982\uff0c\u72b6\u6001\u66f4\u65b0\uff09</li> </ul>"},{"location":"how-tos/multi_agent/#_3","title":"\u521b\u5efa\u4ea4\u63a5","text":"<p>\u8981\u5b9e\u73b0\u4ea4\u63a5\uff0c\u4f60\u53ef\u4ee5\u4ece\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u6216\u5de5\u5177\u4e2d\u8fd4\u56de <code>Command</code> \u5bf9\u8c61\uff1a</p> Python <pre><code>from typing import Annotated\nfrom langchain_core.tools import tool, InjectedToolCallId\nfrom langgraph.prebuilt import create_react_agent, InjectedState\nfrom langgraph.graph import StateGraph, START, MessagesState\nfrom langgraph.types import Command\n\ndef create_handoff_tool(*, agent_name: str, description: str | None = None):\n    name = f\"transfer_to_{agent_name}\"\n    description = description or f\"Transfer to {agent_name}\"\n\n    @tool(name, description=description)\n    def handoff_tool(\n        # highlight-next-line\n        state: Annotated[MessagesState, InjectedState], # (1)!\n        # highlight-next-line\n        tool_call_id: Annotated[str, InjectedToolCallId],\n    ) -&gt; Command:\n        tool_message = {\n            \"role\": \"tool\",\n            \"content\": f\"Successfully transferred to {agent_name}\",\n            \"name\": name,\n            \"tool_call_id\": tool_call_id,\n        }\n        return Command(  # (2)!\n            # highlight-next-line\n            goto=agent_name,  # (3)!\n            # highlight-next-line\n            update={\"messages\": state[\"messages\"] + [tool_message]},  # (4)!\n            # highlight-next-line\n            graph=Command.PARENT,  # (5)!\n        )\n    return handoff_tool\n</code></pre> <ol> <li>\u4f7f\u7528 @[InjectedState] \u6ce8\u89e3\u8bbf\u95ee\u8c03\u7528\u4ea4\u63a5\u5de5\u5177\u7684\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u3002</li> <li><code>Command</code> \u539f\u8bed\u5141\u8bb8\u5c06\u72b6\u6001\u66f4\u65b0\u548c\u8282\u70b9\u8f6c\u6362\u6307\u5b9a\u4e3a\u5355\u4e2a\u64cd\u4f5c\uff0c\u4f7f\u5176\u975e\u5e38\u9002\u5408\u5b9e\u73b0\u4ea4\u63a5\u3002</li> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4ee3\u7406\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4ee3\u7406\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec**\u6dfb\u52a0**\u5230\u7236\u7ea7\u7684**\u72b6\u6001**\u4e2d\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u770b\u5230\u7236\u7ea7\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4ee3\u7406\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002</li> </ol> <p>Tip</p> <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>create_react_agent</code>][] / @[<code>ToolNode</code>][] \u7ec4\u4ef6\uff0c\u6216\u8005\u5b9e\u73b0\u81ea\u5df1\u7684\u5de5\u5177\u6267\u884c\u8282\u70b9\u6765\u6536\u96c6\u5de5\u5177\u8fd4\u56de\u7684 <code>Command</code> \u5bf9\u8c61\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a</p> <pre><code>def call_tools(state):\n    ...\n    commands = [tools_by_name[tool_call[\"name\"]].invoke(tool_call) for tool_call in tool_calls]\n    return commands\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { Command, MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nfunction createHandoffTool({\n  agentName,\n  description,\n}: {\n  agentName: string;\n  description?: string;\n}) {\n  const name = `transfer_to_${agentName}`;\n  const toolDescription = description || `Transfer to ${agentName}`;\n\n  return tool(\n    async (_, config) =&gt; {\n      // (1)!\n      const state = config.state;\n      const toolCallId = config.toolCall.id;\n\n      const toolMessage = {\n        role: \"tool\" as const,\n        content: `Successfully transferred to ${agentName}`,\n        name: name,\n        tool_call_id: toolCallId,\n      };\n\n      return new Command({\n        // (3)!\n        goto: agentName,\n        // (4)!\n        update: { messages: [...state.messages, toolMessage] },\n        // (5)!\n        graph: Command.PARENT,\n      });\n    },\n    {\n      name,\n      description: toolDescription,\n      schema: z.object({}),\n    }\n  );\n}\n</code></pre> <ol> <li>\u901a\u8fc7 <code>config</code> \u53c2\u6570\u8bbf\u95ee\u8c03\u7528\u4ea4\u63a5\u5de5\u5177\u7684\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u3002</li> <li><code>Command</code> \u539f\u8bed\u5141\u8bb8\u5c06\u72b6\u6001\u66f4\u65b0\u548c\u8282\u70b9\u8f6c\u6362\u6307\u5b9a\u4e3a\u5355\u4e2a\u64cd\u4f5c\uff0c\u4f7f\u5176\u975e\u5e38\u9002\u5408\u5b9e\u73b0\u4ea4\u63a5\u3002</li> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4ee3\u7406\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4ee3\u7406\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec**\u6dfb\u52a0**\u5230\u7236\u7ea7\u7684**\u72b6\u6001**\u4e2d\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u770b\u5230\u7236\u7ea7\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4ee3\u7406\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002</li> </ol> <p>Tip</p> <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u7684\u5de5\u5177\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>create_react_agent</code>][] / @[<code>ToolNode</code>][] \u7ec4\u4ef6\uff0c\u6216\u8005\u5b9e\u73b0\u81ea\u5df1\u7684\u5de5\u5177\u6267\u884c\u8282\u70b9\u6765\u6536\u96c6\u5de5\u5177\u8fd4\u56de\u7684 <code>Command</code> \u5bf9\u8c61\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a</p> <pre><code>const callTools = async (state) =&gt; {\n  // ...\n  const commands = await Promise.all(\n    toolCalls.map(toolCall =&gt; toolsByName[toolCall.name].invoke(toolCall))\n  );\n  return commands;\n};\n</code></pre> <p>Important</p> <p>\u6b64\u4ea4\u63a5\u5b9e\u73b0\u5047\u8bbe\uff1a</p> <ul> <li>\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u63a5\u6536\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u4e2d\u7684\u6574\u4f53\u6d88\u606f\u5386\u53f2\uff08\u8de8\u6240\u6709\u667a\u80fd\u4ee3\u7406\uff09\u4f5c\u4e3a\u5176\u8f93\u5165\u3002\u5982\u679c\u4f60\u60f3\u5bf9\u667a\u80fd\u4ee3\u7406\u8f93\u5165\u6709\u66f4\u591a\u63a7\u5236\uff0c\u8bf7\u53c2\u9605\u6b64\u90e8\u5206</li> <li>\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u5176\u5185\u90e8\u6d88\u606f\u5386\u53f2\u8f93\u51fa\u5230\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u6574\u4f53\u6d88\u606f\u5386\u53f2\u4e2d\u3002\u5982\u679c\u4f60\u60f3\u5bf9**\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\u7684\u6dfb\u52a0\u65b9\u5f0f\u6709\u66f4\u591a\u63a7\u5236**\uff0c\u8bf7\u5c06\u667a\u80fd\u4ee3\u7406\u5305\u88c5\u5728\u5355\u72ec\u7684\u8282\u70b9\u51fd\u6570\u4e2d\uff1a</li> </ul> <p>=== \"Python\"   <pre><code>def call_hotel_assistant(state):\n    # \u8fd4\u56de\u667a\u80fd\u4ee3\u7406\u7684\u6700\u7ec8\u54cd\u5e94\uff0c\n    # \u6392\u9664\u5185\u90e8\u72ec\u767d\n    response = hotel_assistant.invoke(state)\n    # highlight-next-line\n    return {\"messages\": response[\"messages\"][-1]}\n</code></pre></p> <p>=== \"JavaScript\"   <pre><code>const callHotelAssistant = async (state) =&gt; {\n  // \u8fd4\u56de\u667a\u80fd\u4ee3\u7406\u7684\u6700\u7ec8\u54cd\u5e94\uff0c\n  // \u6392\u9664\u5185\u90e8\u72ec\u767d\n  const response = await hotelAssistant.invoke(state);\n  // highlight-next-line\n  return { messages: [response.messages.at(-1)] };\n};\n</code></pre></p>"},{"location":"how-tos/multi_agent/#_4","title":"\u63a7\u5236\u667a\u80fd\u4ee3\u7406\u8f93\u5165","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>Send()</code>][Send] \u539f\u8bed\u5728\u4ea4\u63a5\u671f\u95f4\u76f4\u63a5\u5411\u5de5\u4f5c\u667a\u80fd\u4ee3\u7406\u53d1\u9001\u6570\u636e\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u8bf7\u6c42\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u4e3a\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u586b\u5145\u4efb\u52a1\u63cf\u8ff0\uff1a</p> <pre><code>from typing import Annotated\nfrom langchain_core.tools import tool, InjectedToolCallId\nfrom langgraph.prebuilt import InjectedState\nfrom langgraph.graph import StateGraph, START, MessagesState\n# highlight-next-line\nfrom langgraph.types import Command, Send\n\ndef create_task_description_handoff_tool(\n    *, agent_name: str, description: str | None = None\n):\n    name = f\"transfer_to_{agent_name}\"\n    description = description or f\"Ask {agent_name} for help.\"\n\n    @tool(name, description=description)\n    def handoff_tool(\n        # \u8fd9\u7531\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u586b\u5145\n        task_description: Annotated[\n            str,\n            \"Description of what the next agent should do, including all of the relevant context.\",\n        ],\n        # \u8fd9\u4e9b\u53c2\u6570\u88ab LLM \u5ffd\u7565\n        state: Annotated[MessagesState, InjectedState],\n    ) -&gt; Command:\n        task_description_message = {\"role\": \"user\", \"content\": task_description}\n        agent_input = {**state, \"messages\": [task_description_message]}\n        return Command(\n            # highlight-next-line\n            goto=[Send(agent_name, agent_input)],\n            graph=Command.PARENT,\n        )\n\n    return handoff_tool\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>Send()</code>][Send] \u539f\u8bed\u5728\u4ea4\u63a5\u671f\u95f4\u76f4\u63a5\u5411\u5de5\u4f5c\u667a\u80fd\u4ee3\u7406\u53d1\u9001\u6570\u636e\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u4ee5\u8bf7\u6c42\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u4e3a\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u586b\u5145\u4efb\u52a1\u63cf\u8ff0\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { Command, Send, MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nfunction createTaskDescriptionHandoffTool({\n  agentName,\n  description,\n}: {\n  agentName: string;\n  description?: string;\n}) {\n  const name = `transfer_to_${agentName}`;\n  const toolDescription = description || `Ask ${agentName} for help.`;\n\n  return tool(\n    async (\n      { taskDescription },\n      config\n    ) =&gt; {\n      const state = config.state;\n\n      const taskDescriptionMessage = {\n        role: \"user\" as const,\n        content: taskDescription,\n      };\n      const agentInput = {\n        ...state,\n        messages: [taskDescriptionMessage],\n      };\n\n      return new Command({\n        // highlight-next-line\n        goto: [new Send(agentName, agentInput)],\n        graph: Command.PARENT,\n      });\n    },\n    {\n      name,\n      description: toolDescription,\n      schema: z.object({\n        taskDescription: z\n          .string()\n          .describe(\n            \"Description of what the next agent should do, including all of the relevant context.\"\n          ),\n      }),\n    }\n  );\n}\n</code></pre> <p>\u8bf7\u53c2\u9605\u591a\u667a\u80fd\u4ee3\u7406 supervisor \u793a\u4f8b\uff0c\u4e86\u89e3\u5728\u4ea4\u63a5\u4e2d\u4f7f\u7528 @[<code>Send()</code>][Send] \u7684\u5b8c\u6574\u793a\u4f8b\u3002</p>"},{"location":"how-tos/multi_agent/#_5","title":"\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf","text":"<p>\u4f60\u53ef\u4ee5\u5728\u4f7f\u7528 LangGraph \u6784\u5efa\u7684\u4efb\u4f55\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528\u4ea4\u63a5\u3002\u6211\u4eec\u5efa\u8bae\u4f7f\u7528\u9884\u6784\u5efa\u7684\u667a\u80fd\u4ee3\u7406\u6216 <code>ToolNode</code>\uff0c\u56e0\u4e3a\u5b83\u4eec\u539f\u751f\u652f\u6301\u8fd4\u56de <code>Command</code> \u7684\u4ea4\u63a5\u5de5\u5177\u3002\u4ee5\u4e0b\u662f\u5982\u4f55\u4f7f\u7528\u4ea4\u63a5\u5b9e\u73b0\u65c5\u884c\u9884\u8ba2\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u7684\u793a\u4f8b\uff1a</p> Python <pre><code>from langgraph.prebuilt import create_react_agent\nfrom langgraph.graph import StateGraph, START, MessagesState\n\ndef create_handoff_tool(*, agent_name: str, description: str | None = None):\n    # \u4e0e\u4e0a\u9762\u76f8\u540c\u7684\u5b9e\u73b0\n    ...\n    return Command(...)\n\n# \u4ea4\u63a5\ntransfer_to_hotel_assistant = create_handoff_tool(agent_name=\"hotel_assistant\")\ntransfer_to_flight_assistant = create_handoff_tool(agent_name=\"flight_assistant\")\n\n# \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\nflight_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[..., transfer_to_hotel_assistant],\n    # highlight-next-line\n    name=\"flight_assistant\"\n)\nhotel_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[..., transfer_to_flight_assistant],\n    # highlight-next-line\n    name=\"hotel_assistant\"\n)\n\n# \u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nmulti_agent_graph = (\n    StateGraph(MessagesState)\n    # highlight-next-line\n    .add_node(flight_assistant)\n    # highlight-next-line\n    .add_node(hotel_assistant)\n    .add_edge(START, \"flight_assistant\")\n    .compile()\n)\n</code></pre> JavaScript <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { StateGraph, START, MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nfunction createHandoffTool({\n  agentName,\n  description,\n}: {\n  agentName: string;\n  description?: string;\n}) {\n  // \u4e0e\u4e0a\u9762\u76f8\u540c\u7684\u5b9e\u73b0\n  // ...\n  return new Command(/* ... */);\n}\n\n// \u4ea4\u63a5\nconst transferToHotelAssistant = createHandoffTool({\n  agentName: \"hotel_assistant\",\n});\nconst transferToFlightAssistant = createHandoffTool({\n  agentName: \"flight_assistant\",\n});\n\n// \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\nconst flightAssistant = createReactAgent({\n  llm: model,\n  // highlight-next-line\n  tools: [/* ... */, transferToHotelAssistant],\n  // highlight-next-line\n  name: \"flight_assistant\",\n});\n\nconst hotelAssistant = createReactAgent({\n  llm: model,\n  // highlight-next-line\n  tools: [/* ... */, transferToFlightAssistant],\n  // highlight-next-line\n  name: \"hotel_assistant\",\n});\n\n// \u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nconst multiAgentGraph = new StateGraph(MessagesZodState)\n  // highlight-next-line\n  .addNode(\"flight_assistant\", flightAssistant)\n  // highlight-next-line\n  .addNode(\"hotel_assistant\", hotelAssistant)\n  .addEdge(START, \"flight_assistant\")\n  .compile();\n</code></pre> \u5b8c\u6574\u793a\u4f8b\uff1a\u65c5\u884c\u9884\u8ba2\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf Python <pre><code>from typing import Annotated\nfrom langchain_core.messages import convert_to_messages\nfrom langchain_core.tools import tool, InjectedToolCallId\nfrom langgraph.prebuilt import create_react_agent, InjectedState\nfrom langgraph.graph import StateGraph, START, MessagesState\nfrom langgraph.types import Command\n\n# \u6211\u4eec\u5c06\u4f7f\u7528 `pretty_print_messages` \u8f85\u52a9\u51fd\u6570\u6765\u7f8e\u5316\u6e32\u67d3\u6d41\u5f0f\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\n\ndef pretty_print_message(message, indent=False):\n    pretty_message = message.pretty_repr(html=True)\n    if not indent:\n        print(pretty_message)\n        return\n\n    indented = \"\\n\".join(\"\\t\" + c for c in pretty_message.split(\"\\n\"))\n    print(indented)\n\n\ndef pretty_print_messages(update, last_message=False):\n    is_subgraph = False\n    if isinstance(update, tuple):\n        ns, update = update\n        # \u5728\u6253\u5370\u8f93\u51fa\u4e2d\u8df3\u8fc7\u7236\u56fe\u66f4\u65b0\n        if len(ns) == 0:\n            return\n\n        graph_id = ns[-1].split(\":\")[0]\n        print(f\"Update from subgraph {graph_id}:\")\n        print(\"\\n\")\n        is_subgraph = True\n\n    for node_name, node_update in update.items():\n        update_label = f\"Update from node {node_name}:\"\n        if is_subgraph:\n            update_label = \"\\t\" + update_label\n\n        print(update_label)\n        print(\"\\n\")\n\n        messages = convert_to_messages(node_update[\"messages\"])\n        if last_message:\n            messages = messages[-1:]\n\n        for m in messages:\n            pretty_print_message(m, indent=is_subgraph)\n        print(\"\\n\")\n\n\ndef create_handoff_tool(*, agent_name: str, description: str | None = None):\n    name = f\"transfer_to_{agent_name}\"\n    description = description or f\"Transfer to {agent_name}\"\n\n    @tool(name, description=description)\n    def handoff_tool(\n        # highlight-next-line\n        state: Annotated[MessagesState, InjectedState], # (1)!\n        # highlight-next-line\n        tool_call_id: Annotated[str, InjectedToolCallId],\n    ) -&gt; Command:\n        tool_message = {\n            \"role\": \"tool\",\n            \"content\": f\"Successfully transferred to {agent_name}\",\n            \"name\": name,\n            \"tool_call_id\": tool_call_id,\n        }\n        return Command(  # (2)!\n            # highlight-next-line\n            goto=agent_name,  # (3)!\n            # highlight-next-line\n            update={\"messages\": state[\"messages\"] + [tool_message]},  # (4)!\n            # highlight-next-line\n            graph=Command.PARENT,  # (5)!\n        )\n    return handoff_tool\n\n# \u4ea4\u63a5\ntransfer_to_hotel_assistant = create_handoff_tool(\n    agent_name=\"hotel_assistant\",\n    description=\"Transfer user to the hotel-booking assistant.\",\n)\ntransfer_to_flight_assistant = create_handoff_tool(\n    agent_name=\"flight_assistant\",\n    description=\"Transfer user to the flight-booking assistant.\",\n)\n\n# \u7b80\u5355\u7684\u667a\u80fd\u4ee3\u7406\u5de5\u5177\ndef book_hotel(hotel_name: str):\n    \"\"\"\u9884\u8ba2\u9152\u5e97\"\"\"\n    return f\"Successfully booked a stay at {hotel_name}.\"\n\ndef book_flight(from_airport: str, to_airport: str):\n    \"\"\"\u9884\u8ba2\u822a\u73ed\"\"\"\n    return f\"Successfully booked a flight from {from_airport} to {to_airport}.\"\n\n# \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\nflight_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[book_flight, transfer_to_hotel_assistant],\n    prompt=\"You are a flight booking assistant\",\n    # highlight-next-line\n    name=\"flight_assistant\"\n)\nhotel_assistant = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    # highlight-next-line\n    tools=[book_hotel, transfer_to_flight_assistant],\n    prompt=\"You are a hotel booking assistant\",\n    # highlight-next-line\n    name=\"hotel_assistant\"\n)\n\n# \u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nmulti_agent_graph = (\n    StateGraph(MessagesState)\n    .add_node(flight_assistant)\n    .add_node(hotel_assistant)\n    .add_edge(START, \"flight_assistant\")\n    .compile()\n)\n\n# \u8fd0\u884c\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nfor chunk in multi_agent_graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"book a flight from BOS to JFK and a stay at McKittrick Hotel\"\n            }\n        ]\n    },\n    # highlight-next-line\n    subgraphs=True\n):\n    pretty_print_messages(chunk)\n</code></pre> <ol> <li>\u8bbf\u95ee\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001</li> <li><code>Command</code> \u539f\u8bed\u5141\u8bb8\u5c06\u72b6\u6001\u66f4\u65b0\u548c\u8282\u70b9\u8f6c\u6362\u6307\u5b9a\u4e3a\u5355\u4e2a\u64cd\u4f5c\uff0c\u4f7f\u5176\u975e\u5e38\u9002\u5408\u5b9e\u73b0\u4ea4\u63a5\u3002</li> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4ee3\u7406\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4ee3\u7406\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec**\u6dfb\u52a0**\u5230\u7236\u7ea7\u7684**\u72b6\u6001**\u4e2d\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u770b\u5230\u7236\u7ea7\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4ee3\u7406\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002</li> </ol> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { StateGraph, START, MessagesZodState, Command } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { isBaseMessage } from \"@langchain/core/messages\";\nimport { z } from \"zod\";\n\n// \u6211\u4eec\u5c06\u4f7f\u7528\u8f85\u52a9\u51fd\u6570\u6765\u7f8e\u5316\u6e32\u67d3\u6d41\u5f0f\u667a\u80fd\u4ee3\u7406\u8f93\u51fa\nconst prettyPrintMessages = (update: Record&lt;string, any&gt;) =&gt; {\n  // \u5904\u7406\u5e26\u547d\u540d\u7a7a\u95f4\u7684\u5143\u7ec4\u60c5\u51b5\n  if (Array.isArray(update)) {\n    const [ns, updateData] = update;\n    // \u5728\u6253\u5370\u8f93\u51fa\u4e2d\u8df3\u8fc7\u7236\u56fe\u66f4\u65b0\n    if (ns.length === 0) {\n      return;\n    }\n\n    const graphId = ns[ns.length - 1].split(\":\")[0];\n    console.log(`Update from subgraph ${graphId}:\\n`);\n    update = updateData;\n  }\n\n  for (const [nodeName, updateValue] of Object.entries(update)) {\n    console.log(`Update from node ${nodeName}:\\n`);\n\n    const messages = updateValue.messages || [];\n    for (const message of messages) {\n      if (isBaseMessage(message)) {\n        const textContent =\n          typeof message.content === \"string\"\n            ? message.content\n            : JSON.stringify(message.content);\n        console.log(`${message.getType()}: ${textContent}`);\n      }\n    }\n    console.log(\"\\n\");\n  }\n};\n\nfunction createHandoffTool({\n  agentName,\n  description,\n}: {\n  agentName: string;\n  description?: string;\n}) {\n  const name = `transfer_to_${agentName}`;\n  const toolDescription = description || `Transfer to ${agentName}`;\n\n  return tool(\n    async (_, config) =&gt; {\n      // highlight-next-line\n      const state = config.state; // (1)!\n      const toolCallId = config.toolCall.id;\n\n      const toolMessage = {\n        role: \"tool\" as const,\n        content: `Successfully transferred to ${agentName}`,\n        name: name,\n        tool_call_id: toolCallId,\n      };\n\n      return new Command({\n        // highlight-next-line\n        goto: agentName, // (3)!\n        // highlight-next-line\n        update: { messages: [...state.messages, toolMessage] }, // (4)!\n        // highlight-next-line\n        graph: Command.PARENT, // (5)!\n      });\n    },\n    {\n      name,\n      description: toolDescription,\n      schema: z.object({}),\n    }\n  );\n}\n\n// \u4ea4\u63a5\nconst transferToHotelAssistant = createHandoffTool({\n  agentName: \"hotel_assistant\",\n  description: \"Transfer user to the hotel-booking assistant.\",\n});\n\nconst transferToFlightAssistant = createHandoffTool({\n  agentName: \"flight_assistant\",\n  description: \"Transfer user to the flight-booking assistant.\",\n});\n\n// \u7b80\u5355\u7684\u667a\u80fd\u4ee3\u7406\u5de5\u5177\nconst bookHotel = tool(\n  async ({ hotelName }) =&gt; {\n    return `Successfully booked a stay at ${hotelName}.`;\n  },\n  {\n    name: \"book_hotel\",\n    description: \"Book a hotel\",\n    schema: z.object({\n      hotelName: z.string(),\n    }),\n  }\n);\n\nconst bookFlight = tool(\n  async ({ fromAirport, toAirport }) =&gt; {\n    return `Successfully booked a flight from ${fromAirport} to ${toAirport}.`;\n  },\n  {\n    name: \"book_flight\",\n    description: \"Book a flight\",\n    schema: z.object({\n      fromAirport: z.string(),\n      toAirport: z.string(),\n    }),\n  }\n);\n\nconst model = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n});\n\n// \u5b9a\u4e49\u667a\u80fd\u4ee3\u7406\nconst flightAssistant = createReactAgent({\n  llm: model,\n  // highlight-next-line\n  tools: [bookFlight, transferToHotelAssistant],\n  prompt: \"You are a flight booking assistant\",\n  // highlight-next-line\n  name: \"flight_assistant\",\n});\n\nconst hotelAssistant = createReactAgent({\n  llm: model,\n  // highlight-next-line\n  tools: [bookHotel, transferToFlightAssistant],\n  prompt: \"You are a hotel booking assistant\",\n  // highlight-next-line\n  name: \"hotel_assistant\",\n});\n\n// \u5b9a\u4e49\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nconst multiAgentGraph = new StateGraph(MessagesZodState)\n  .addNode(\"flight_assistant\", flightAssistant)\n  .addNode(\"hotel_assistant\", hotelAssistant)\n  .addEdge(START, \"flight_assistant\")\n  .compile();\n\n// \u8fd0\u884c\u591a\u667a\u80fd\u4ee3\u7406\u56fe\nconst stream = await multiAgentGraph.stream(\n  {\n    messages: [\n      {\n        role: \"user\",\n        content: \"book a flight from BOS to JFK and a stay at McKittrick Hotel\",\n      },\n    ],\n  },\n  // highlight-next-line\n  { subgraphs: true }\n);\n\nfor await (const chunk of stream) {\n  prettyPrintMessages(chunk);\n}\n</code></pre> <ol> <li>\u8bbf\u95ee\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001</li> <li><code>Command</code> \u539f\u8bed\u5141\u8bb8\u5c06\u72b6\u6001\u66f4\u65b0\u548c\u8282\u70b9\u8f6c\u6362\u6307\u5b9a\u4e3a\u5355\u4e2a\u64cd\u4f5c\uff0c\u4f7f\u5176\u975e\u5e38\u9002\u5408\u5b9e\u73b0\u4ea4\u63a5\u3002</li> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4ee3\u7406\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4ee3\u7406\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec**\u6dfb\u52a0**\u5230\u7236\u7ea7\u7684**\u72b6\u6001**\u4e2d\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\u5c06\u770b\u5230\u7236\u7ea7\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4ee3\u7406\u56fe\u4e2d\u7684\u667a\u80fd\u4ee3\u7406\u8282\u70b9\u3002</li> </ol>"},{"location":"how-tos/multi_agent/#_6","title":"\u591a\u8f6e\u5bf9\u8bdd","text":"<p>\u7528\u6237\u53ef\u80fd\u5e0c\u671b\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u8fdb\u884c*\u591a\u8f6e\u5bf9\u8bdd*\u3002\u8981\u6784\u5efa\u4e00\u4e2a\u80fd\u591f\u5904\u7406\u6b64\u573a\u666f\u7684\u7cfb\u7edf\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4f7f\u7528 @<code>interrupt</code> \u6765\u6536\u96c6\u7528\u6237\u8f93\u5165\u5e76\u8def\u7531\u56de**\u6d3b\u52a8**\u667a\u80fd\u4ee3\u7406\u7684\u8282\u70b9\u3002</p> <p>\u7136\u540e\uff0c\u667a\u80fd\u4ee3\u7406\u53ef\u4ee5\u4f5c\u4e3a\u56fe\u4e2d\u7684\u8282\u70b9\u6765\u5b9e\u73b0\uff0c\u6267\u884c\u667a\u80fd\u4ee3\u7406\u6b65\u9aa4\u5e76\u786e\u5b9a\u4e0b\u4e00\u4e2a\u64cd\u4f5c\uff1a</p> <ol> <li>**\u7b49\u5f85\u7528\u6237\u8f93\u5165**\u4ee5\u7ee7\u7eed\u5bf9\u8bdd\uff0c\u6216</li> <li>\u901a\u8fc7\u4ea4\u63a5\u8def\u7531\u5230\u53e6\u4e00\u4e2a\u667a\u80fd\u4ee3\u7406\uff08\u6216\u8fd4\u56de\u81ea\u8eab\uff0c\u4f8b\u5982\u5728\u5faa\u73af\u4e2d\uff09</li> </ol> Python <pre><code>def human(state) -&gt; Command[Literal[\"agent\", \"another_agent\"]]:\n    \"\"\"\u7528\u4e8e\u6536\u96c6\u7528\u6237\u8f93\u5165\u7684\u8282\u70b9\u3002\"\"\"\n    user_input = interrupt(value=\"Ready for user input.\")\n\n    # \u786e\u5b9a\u6d3b\u52a8\u667a\u80fd\u4ee3\u7406\u3002\n    active_agent = ...\n\n    ...\n    return Command(\n        update={\n            \"messages\": [{\n                \"role\": \"human\",\n                \"content\": user_input,\n            }]\n        },\n        goto=active_agent\n    )\n\ndef agent(state) -&gt; Command[Literal[\"agent\", \"another_agent\", \"human\"]]:\n    # \u8def\u7531/\u505c\u6b62\u7684\u6761\u4ef6\u53ef\u4ee5\u662f\u4efb\u4f55\u4e1c\u897f\uff0c\u4f8b\u5982 LLM \u5de5\u5177\u8c03\u7528/\u7ed3\u6784\u5316\u8f93\u51fa\u7b49\u3002\n    goto = get_next_agent(...)  # 'agent' / 'another_agent'\n    if goto:\n        return Command(goto=goto, update={\"my_state_key\": \"my_state_value\"})\n    else:\n        return Command(goto=\"human\") # \u8df3\u8f6c\u5230 human \u8282\u70b9\n</code></pre> JavaScript <pre><code>import { interrupt, Command } from \"@langchain/langgraph\";\n\nfunction human(state: MessagesState): Command {\n  const userInput: string = interrupt(\"Ready for user input.\");\n\n  // \u786e\u5b9a\u6d3b\u52a8\u667a\u80fd\u4ee3\u7406\n  const activeAgent = /* ... */;\n\n  return new Command({\n    update: {\n      messages: [{\n        role: \"human\",\n        content: userInput,\n      }]\n    },\n    goto: activeAgent,\n  });\n}\n\nfunction agent(state: MessagesState): Command {\n  // \u8def\u7531/\u505c\u6b62\u7684\u6761\u4ef6\u53ef\u4ee5\u662f\u4efb\u4f55\u4e1c\u897f\uff0c\u4f8b\u5982 LLM \u5de5\u5177\u8c03\u7528/\u7ed3\u6784\u5316\u8f93\u51fa\u7b49\u3002\n  const goto = getNextAgent(/* ... */); // 'agent' / 'anotherAgent'\n\n  if (goto) {\n    return new Command({\n      goto,\n      update: { myStateKey: \"myStateValue\" }\n    });\n  }\n\n  return new Command({ goto: \"human\" });\n}\n</code></pre> \u5b8c\u6574\u793a\u4f8b\uff1a\u65c5\u884c\u63a8\u8350\u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf <p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u6784\u5efa\u4e00\u4e2a\u53ef\u4ee5\u901a\u8fc7\u4ea4\u63a5\u76f8\u4e92\u901a\u4fe1\u7684\u65c5\u884c\u52a9\u624b\u667a\u80fd\u4ee3\u7406\u56e2\u961f\u3002</p> <p>\u6211\u4eec\u5c06\u521b\u5efa 2 \u4e2a\u667a\u80fd\u4ee3\u7406\uff1a</p> <ul> <li>travel_advisor\uff1a\u53ef\u4ee5\u5e2e\u52a9\u63a8\u8350\u65c5\u884c\u76ee\u7684\u5730\u3002\u53ef\u4ee5\u5411 hotel_advisor \u5bfb\u6c42\u5e2e\u52a9\u3002</li> <li>hotel_advisor\uff1a\u53ef\u4ee5\u5e2e\u52a9\u63a8\u8350\u9152\u5e97\u3002\u53ef\u4ee5\u5411 travel_advisor \u5bfb\u6c42\u5e2e\u52a9\u3002</li> </ul> Python <pre><code>from langchain_anthropic import ChatAnthropic\nfrom langgraph.graph import MessagesState, StateGraph, START\nfrom langgraph.prebuilt import create_react_agent, InjectedState\nfrom langgraph.types import Command, interrupt\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n\nmodel = ChatAnthropic(model=\"claude-3-5-sonnet-latest\")\n\nclass MultiAgentState(MessagesState):\n    last_active_agent: str\n\n\n# \u5b9a\u4e49\u65c5\u884c\u987e\u95ee\u5de5\u5177\u548c ReAct \u667a\u80fd\u4ee3\u7406\ntravel_advisor_tools = [\n    get_travel_recommendations,\n    make_handoff_tool(agent_name=\"hotel_advisor\"),\n]\ntravel_advisor = create_react_agent(\n    model,\n    travel_advisor_tools,\n    prompt=(\n        \"You are a general travel expert that can recommend travel destinations (e.g. countries, cities, etc). \"\n        \"If you need hotel recommendations, ask 'hotel_advisor' for help. \"\n        \"You MUST include human-readable response before transferring to another agent.\"\n    ),\n)\n\n\ndef call_travel_advisor(\n    state: MultiAgentState,\n) -&gt; Command[Literal[\"hotel_advisor\", \"human\"]]:\n    # \u4f60\u8fd8\u53ef\u4ee5\u6dfb\u52a0\u989d\u5916\u7684\u903b\u8f91\uff0c\u4f8b\u5982\u66f4\u6539\u667a\u80fd\u4ee3\u7406\u7684\u8f93\u5165/\u8f93\u51fa\u7b49\u3002\n    # \u6ce8\u610f\uff1a\u6211\u4eec\u4f7f\u7528\u72b6\u6001\u4e2d\u7684\u5b8c\u6574\u6d88\u606f\u5386\u53f2\u6765\u8c03\u7528 ReAct \u667a\u80fd\u4ee3\u7406\n    response = travel_advisor.invoke(state)\n    update = {**response, \"last_active_agent\": \"travel_advisor\"}\n    return Command(update=update, goto=\"human\")\n\n\n# \u5b9a\u4e49\u9152\u5e97\u987e\u95ee\u5de5\u5177\u548c ReAct \u667a\u80fd\u4ee3\u7406\nhotel_advisor_tools = [\n    get_hotel_recommendations,\n    make_handoff_tool(agent_name=\"travel_advisor\"),\n]\nhotel_advisor = create_react_agent(\n    model,\n    hotel_advisor_tools,\n    prompt=(\n        \"You are a hotel expert that can provide hotel recommendations for a given destination. \"\n        \"If you need help picking travel destinations, ask 'travel_advisor' for help.\"\n        \"You MUST include human-readable response before transferring to another agent.\"\n    ),\n)\n\n\ndef call_hotel_advisor(\n    state: MultiAgentState,\n) -&gt; Command[Literal[\"travel_advisor\", \"human\"]]:\n    response = hotel_advisor.invoke(state)\n    update = {**response, \"last_active_agent\": \"hotel_advisor\"}\n    return Command(update=update, goto=\"human\")\n\n\ndef human_node(\n    state: MultiAgentState, config\n) -&gt; Command[Literal[\"hotel_advisor\", \"travel_advisor\", \"human\"]]:\n    \"\"\"\u7528\u4e8e\u6536\u96c6\u7528\u6237\u8f93\u5165\u7684\u8282\u70b9\u3002\"\"\"\n\n    user_input = interrupt(value=\"Ready for user input.\")\n    active_agent = state[\"last_active_agent\"]\n\n    return Command(\n        update={\n            \"messages\": [\n                {\n                    \"role\": \"human\",\n                    \"content\": user_input,\n                }\n            ]\n        },\n        goto=active_agent,\n    )\n\n\nbuilder = StateGraph(MultiAgentState)\nbuilder.add_node(\"travel_advisor\", call_travel_advisor)\nbuilder.add_node(\"hotel_advisor\", call_hotel_advisor)\n\n# \u8fd9\u6dfb\u52a0\u4e86\u4e00\u4e2a\u6536\u96c6\u7528\u6237\u8f93\u5165\u7684\u8282\u70b9\uff0c\n# \u5b83\u5c06\u8def\u7531\u56de\u6d3b\u52a8\u667a\u80fd\u4ee3\u7406\u3002\nbuilder.add_node(\"human\", human_node)\n\n# \u6211\u4eec\u5c06\u59cb\u7ec8\u4ece\u901a\u7528\u65c5\u884c\u987e\u95ee\u5f00\u59cb\u3002\nbuilder.add_edge(START, \"travel_advisor\")\n\n\ncheckpointer = InMemorySaver()\ngraph = builder.compile(checkpointer=checkpointer)\n</code></pre> <p>\u8ba9\u6211\u4eec\u7528\u8fd9\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6d4b\u8bd5\u591a\u8f6e\u5bf9\u8bdd\u3002</p> <pre><code>import uuid\n\nthread_config = {\"configurable\": {\"thread_id\": str(uuid.uuid4())}}\n\ninputs = [\n    # \u7b2c 1 \u8f6e\u5bf9\u8bdd\uff0c\n    {\n        \"messages\": [\n            {\"role\": \"user\", \"content\": \"i wanna go somewhere warm in the caribbean\"}\n        ]\n    },\n    # \u7531\u4e8e\u6211\u4eec\u4f7f\u7528\u7684\u662f `interrupt`\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 Command \u539f\u8bed\u6765\u6062\u590d\u3002\n    # \u7b2c 2 \u8f6e\u5bf9\u8bdd\uff0c\n    Command(\n        resume=\"could you recommend a nice hotel in one of the areas and tell me which area it is.\"\n    ),\n    # \u7b2c 3 \u8f6e\u5bf9\u8bdd\uff0c\n    Command(\n        resume=\"i like the first one. could you recommend something to do near the hotel?\"\n    ),\n]\n\nfor idx, user_input in enumerate(inputs):\n    print()\n    print(f\"--- Conversation Turn {idx + 1} ---\")\n    print()\n    print(f\"User: {user_input}\")\n    print()\n    for update in graph.stream(\n        user_input,\n        config=thread_config,\n        stream_mode=\"updates\",\n    ):\n        for node_id, value in update.items():\n            if isinstance(value, dict) and value.get(\"messages\", []):\n                last_message = value[\"messages\"][-1]\n                if isinstance(last_message, dict) or last_message.type != \"ai\":\n                    continue\n                print(f\"{node_id}: {last_message.content}\")\n</code></pre> <pre><code>--- Conversation Turn 1 ---\n\nUser: {'messages': [{'role': 'user', 'content': 'i wanna go somewhere warm in the caribbean'}]}\n\ntravel_advisor: Based on the recommendations, Aruba would be an excellent choice for your Caribbean getaway! Aruba is known as \"One Happy Island\" and offers:\n- Year-round warm weather with consistent temperatures around 82\u00b0F (28\u00b0C)\n- Beautiful white sand beaches like Eagle Beach and Palm Beach\n- Clear turquoise waters perfect for swimming and snorkeling\n- Minimal rainfall and location outside the hurricane belt\n- A blend of Caribbean and Dutch culture\n- Great dining options and nightlife\n- Various water sports and activities\n\nWould you like me to get some specific hotel recommendations in Aruba for your stay? I can transfer you to our hotel advisor who can help with accommodations.\n\n--- Conversation Turn 2 ---\n\nUser: Command(resume='could you recommend a nice hotel in one of the areas and tell me which area it is.')\n\nhotel_advisor: Based on the recommendations, I can suggest two excellent options:\n\n1. The Ritz-Carlton, Aruba - Located in Palm Beach\n- This luxury resort is situated in the vibrant Palm Beach area\n- Known for its exceptional service and amenities\n- Perfect if you want to be close to dining, shopping, and entertainment\n- Features multiple restaurants, a casino, and a world-class spa\n- Located on a pristine stretch of Palm Beach\n\n2. Bucuti &amp; Tara Beach Resort - Located in Eagle Beach\n- An adults-only boutique resort on Eagle Beach\n- Known for being more intimate and peaceful\n- Award-winning for its sustainability practices\n- Perfect for a romantic getaway or peaceful vacation\n- Located on one of the most beautiful beaches in the Caribbean\n\nWould you like more specific information about either of these properties or their locations?\n\n--- Conversation Turn 3 ---\n\nUser: Command(resume='i like the first one. could you recommend something to do near the hotel?')\n\ntravel_advisor: Near the Ritz-Carlton in Palm Beach, here are some highly recommended activities:\n\n1. Visit the Palm Beach Plaza Mall - Just a short walk from the hotel, featuring shopping, dining, and entertainment\n2. Try your luck at the Stellaris Casino - It's right in the Ritz-Carlton\n3. Take a sunset sailing cruise - Many depart from the nearby pier\n4. Visit the California Lighthouse - A scenic landmark just north of Palm Beach\n5. Enjoy water sports at Palm Beach:\n   - Jet skiing\n   - Parasailing\n   - Snorkeling\n   - Stand-up paddleboarding\n\nWould you like more specific information about any of these activities or would you like to know about other options in the area?\n</code></pre> JavaScript <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\nimport { StateGraph, START, MessagesZodState, Command, interrupt, MemorySaver } from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst model = new ChatAnthropic({ model: \"claude-3-5-sonnet-latest\" });\n\nconst MultiAgentState = MessagesZodState.extend({\n  lastActiveAgent: z.string().optional(),\n});\n\n// \u5b9a\u4e49\u65c5\u884c\u987e\u95ee\u5de5\u5177\nconst getTravelRecommendations = tool(\n  async () =&gt; {\n    // \u5360\u4f4d\u7b26\u5b9e\u73b0\n    return \"Based on current trends, I recommend visiting Japan, Portugal, or New Zealand.\";\n  },\n  {\n    name: \"get_travel_recommendations\",\n    description: \"Get current travel destination recommendations\",\n    schema: z.object({}),\n  }\n);\n\nconst makeHandoffTool = (agentName: string) =&gt; {\n  return tool(\n    async (_, config) =&gt; {\n      const state = config.state;\n      const toolCallId = config.toolCall.id;\n\n      const toolMessage = {\n        role: \"tool\" as const,\n        content: `Successfully transferred to ${agentName}`,\n        name: `transfer_to_${agentName}`,\n        tool_call_id: toolCallId,\n      };\n\n      return new Command({\n        goto: agentName,\n        update: { messages: [...state.messages, toolMessage] },\n        graph: Command.PARENT,\n      });\n    },\n    {\n      name: `transfer_to_${agentName}`,\n      description: `Transfer to ${agentName}`,\n      schema: z.object({}),\n    }\n  );\n};\n\nconst travelAdvisorTools = [\n  getTravelRecommendations,\n  makeHandoffTool(\"hotel_advisor\"),\n];\n\nconst travelAdvisor = createReactAgent({\n  llm: model,\n  tools: travelAdvisorTools,\n  prompt: [\n    \"You are a general travel expert that can recommend travel destinations (e.g. countries, cities, etc). \",\n    \"If you need hotel recommendations, ask 'hotel_advisor' for help. \",\n    \"You MUST include human-readable response before transferring to another agent.\"\n  ].join(\"\")\n});\n\nconst callTravelAdvisor = async (\n  state: z.infer&lt;typeof MultiAgentState&gt;\n): Promise&lt;Command&gt; =&gt; {\n  const response = await travelAdvisor.invoke(state);\n  const update = { ...response, lastActiveAgent: \"travel_advisor\" };\n  return new Command({ update, goto: \"human\" });\n};\n\n// \u5b9a\u4e49\u9152\u5e97\u987e\u95ee\u5de5\u5177\nconst getHotelRecommendations = tool(\n  async () =&gt; {\n    // \u5360\u4f4d\u7b26\u5b9e\u73b0\n    return \"I recommend the Ritz-Carlton for luxury stays or boutique hotels for unique experiences.\";\n  },\n  {\n    name: \"get_hotel_recommendations\",\n    description: \"Get hotel recommendations for destinations\",\n    schema: z.object({}),\n  }\n);\n\nconst hotelAdvisorTools = [\n  getHotelRecommendations,\n  makeHandoffTool(\"travel_advisor\"),\n];\n\nconst hotelAdvisor = createReactAgent({\n  llm: model,\n  tools: hotelAdvisorTools,\n  prompt: [\n    \"You are a hotel expert that can provide hotel recommendations for a given destination. \",\n    \"If you need help picking travel destinations, ask 'travel_advisor' for help.\",\n    \"You MUST include human-readable response before transferring to another agent.\"\n  ].join(\"\")\n});\n\nconst callHotelAdvisor = async (\n  state: z.infer&lt;typeof MultiAgentState&gt;\n): Promise&lt;Command&gt; =&gt; {\n  const response = await hotelAdvisor.invoke(state);\n  const update = { ...response, lastActiveAgent: \"hotel_advisor\" };\n  return new Command({ update, goto: \"human\" });\n};\n\nconst humanNode = async (\n  state: z.infer&lt;typeof MultiAgentState&gt;\n): Promise&lt;Command&gt; =&gt; {\n  const userInput: string = interrupt(\"Ready for user input.\");\n  const activeAgent = state.lastActiveAgent || \"travel_advisor\";\n\n  return new Command({\n    update: {\n      messages: [\n        {\n          role: \"human\",\n          content: userInput,\n        }\n      ]\n    },\n    goto: activeAgent,\n  });\n};\n\nconst builder = new StateGraph(MultiAgentState)\n  .addNode(\"travel_advisor\", callTravelAdvisor)\n  .addNode(\"hotel_advisor\", callHotelAdvisor)\n  .addNode(\"human\", humanNode)\n  .addEdge(START, \"travel_advisor\");\n\nconst checkpointer = new MemorySaver();\nconst graph = builder.compile({ checkpointer });\n</code></pre> <p>\u8ba9\u6211\u4eec\u7528\u8fd9\u4e2a\u5e94\u7528\u7a0b\u5e8f\u6d4b\u8bd5\u591a\u8f6e\u5bf9\u8bdd\u3002</p> <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { Command } from \"@langchain/langgraph\";\n\nconst threadConfig = { configurable: { thread_id: uuidv4() } };\n\nconst inputs = [\n  // \u7b2c 1 \u8f6e\u5bf9\u8bdd\n  {\n    messages: [\n      { role: \"user\", content: \"i wanna go somewhere warm in the caribbean\" }\n    ]\n  },\n  // \u7531\u4e8e\u6211\u4eec\u4f7f\u7528\u7684\u662f `interrupt`\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 Command \u539f\u8bed\u6765\u6062\u590d\u3002\n  // \u7b2c 2 \u8f6e\u5bf9\u8bdd\n  new Command({\n    resume: \"could you recommend a nice hotel in one of the areas and tell me which area it is.\"\n  }),\n  // \u7b2c 3 \u8f6e\u5bf9\u8bdd\n  new Command({\n    resume: \"i like the first one. could you recommend something to do near the hotel?\"\n  }),\n];\n\nfor (const [idx, userInput] of inputs.entries()) {\n  console.log();\n  console.log(`--- Conversation Turn ${idx + 1} ---`);\n  console.log();\n  console.log(`User: ${JSON.stringify(userInput)}`);\n  console.log();\n\n  for await (const update of await graph.stream(\n    userInput,\n    { ...threadConfig, streamMode: \"updates\" }\n  )) {\n    for (const [nodeId, value] of Object.entries(update)) {\n      if (value?.messages?.length) {\n        const lastMessage = value.messages.at(-1);\n        if (lastMessage?.getType?.() === \"ai\") {\n          console.log(`${nodeId}: ${lastMessage.content}`);\n        }\n      }\n    }\n  }\n}\n</code></pre> <pre><code>--- Conversation Turn 1 ---\n\nUser: {\"messages\":[{\"role\":\"user\",\"content\":\"i wanna go somewhere warm in the caribbean\"}]}\n\ntravel_advisor: Based on the recommendations, Aruba would be an excellent choice for your Caribbean getaway! Aruba is known as \"One Happy Island\" and offers:\n- Year-round warm weather with consistent temperatures around 82\u00b0F (28\u00b0C)\n- Beautiful white sand beaches like Eagle Beach and Palm Beach\n- Clear turquoise waters perfect for swimming and snorkeling\n- Minimal rainfall and location outside the hurricane belt\n- A blend of Caribbean and Dutch culture\n- Great dining options and nightlife\n- Various water sports and activities\n\nWould you like me to get some specific hotel recommendations in Aruba for your stay? I can transfer you to our hotel advisor who can help with accommodations.\n\n--- Conversation Turn 2 ---\n\nUser: Command { resume: 'could you recommend a nice hotel in one of the areas and tell me which area it is.' }\n\nhotel_advisor: Based on the recommendations, I can suggest two excellent options:\n\n1. The Ritz-Carlton, Aruba - Located in Palm Beach\n- This luxury resort is situated in the vibrant Palm Beach area\n- Known for its exceptional service and amenities\n- Perfect if you want to be close to dining, shopping, and entertainment\n- Features multiple restaurants, a casino, and a world-class spa\n- Located on a pristine stretch of Palm Beach\n\n2. Bucuti &amp; Tara Beach Resort - Located in Eagle Beach\n- An adults-only boutique resort on Eagle Beach\n- Known for being more intimate and peaceful\n- Award-winning for its sustainability practices\n- Perfect for a romantic getaway or peaceful vacation\n- Located on one of the most beautiful beaches in the Caribbean\n\nWould you like more specific information about either of these properties or their locations?\n\n--- Conversation Turn 3 ---\n\nUser: Command { resume: 'i like the first one. could you recommend something to do near the hotel?' }\n\ntravel_advisor: Near the Ritz-Carlton in Palm Beach, here are some highly recommended activities:\n\n1. Visit the Palm Beach Plaza Mall - Just a short walk from the hotel, featuring shopping, dining, and entertainment\n2. Try your luck at the Stellaris Casino - It's right in the Ritz-Carlton\n3. Take a sunset sailing cruise - Many depart from the nearby pier\n4. Visit the California Lighthouse - A scenic landmark just north of Palm Beach\n5. Enjoy water sports at Palm Beach:\n   - Jet skiing\n   - Parasailing\n   - Snorkeling\n   - Stand-up paddleboarding\n\nWould you like more specific information about any of these activities or would you like to know about other options in the area?\n</code></pre>"},{"location":"how-tos/multi_agent/#_7","title":"\u9884\u6784\u5efa\u5b9e\u73b0","text":"<p>LangGraph \u63d0\u4f9b\u4e86\u4e24\u79cd\u6700\u6d41\u884c\u7684\u591a\u667a\u80fd\u4ee3\u7406\u67b6\u6784\u7684\u9884\u6784\u5efa\u5b9e\u73b0\uff1a</p> Python <ul> <li>supervisor \u2014 \u5404\u4e2a\u667a\u80fd\u4ee3\u7406\u7531\u4e2d\u592e supervisor \u667a\u80fd\u4ee3\u7406\u534f\u8c03\u3002supervisor \u63a7\u5236\u6240\u6709\u901a\u4fe1\u6d41\u548c\u4efb\u52a1\u59d4\u6d3e\uff0c\u6839\u636e\u5f53\u524d\u4e0a\u4e0b\u6587\u548c\u4efb\u52a1\u9700\u6c42\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>langgraph-supervisor</code> \u5e93\u6765\u521b\u5efa supervisor \u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</li> <li>swarm \u2014 \u667a\u80fd\u4ee3\u7406\u6839\u636e\u5176\u4e13\u957f\u52a8\u6001\u5730\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u5f7c\u6b64\u3002\u7cfb\u7edf\u4f1a\u8bb0\u4f4f\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u6700\u540e\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u786e\u4fdd\u5728\u540e\u7eed\u4ea4\u4e92\u4e2d\u5bf9\u8bdd\u4ece\u8be5\u667a\u80fd\u4ee3\u7406\u6062\u590d\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>langgraph-swarm</code> \u5e93\u6765\u521b\u5efa swarm \u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</li> </ul> JavaScript <ul> <li>supervisor \u2014 \u5404\u4e2a\u667a\u80fd\u4ee3\u7406\u7531\u4e2d\u592e supervisor \u667a\u80fd\u4ee3\u7406\u534f\u8c03\u3002supervisor \u63a7\u5236\u6240\u6709\u901a\u4fe1\u6d41\u548c\u4efb\u52a1\u59d4\u6d3e\uff0c\u6839\u636e\u5f53\u524d\u4e0a\u4e0b\u6587\u548c\u4efb\u52a1\u9700\u6c42\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>langgraph-supervisor</code> \u5e93\u6765\u521b\u5efa supervisor \u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</li> <li>swarm \u2014 \u667a\u80fd\u4ee3\u7406\u6839\u636e\u5176\u4e13\u957f\u52a8\u6001\u5730\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u5f7c\u6b64\u3002\u7cfb\u7edf\u4f1a\u8bb0\u4f4f\u54ea\u4e2a\u667a\u80fd\u4ee3\u7406\u6700\u540e\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\uff0c\u786e\u4fdd\u5728\u540e\u7eed\u4ea4\u4e92\u4e2d\u5bf9\u8bdd\u4ece\u8be5\u667a\u80fd\u4ee3\u7406\u6062\u590d\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>langgraph-swarm</code> \u5e93\u6765\u521b\u5efa swarm \u591a\u667a\u80fd\u4ee3\u7406\u7cfb\u7edf\u3002</li> </ul>"},{"location":"how-tos/run-id-langsmith/","title":"\u5982\u4f55\u5728 LangSmith \u4e2d\u4e3a\u56fe\u8fd0\u884c\u4f20\u9012\u81ea\u5b9a\u4e49 run ID \u6216\u8bbe\u7f6e\u6807\u7b7e\u548c\u5143\u6570\u636e","text":"<p>\u524d\u7f6e\u77e5\u8bc6</p> <p>\u672c\u6307\u5357\u5047\u8bbe\u4f60\u719f\u6089\u4ee5\u4e0b\u5185\u5bb9\uff1a</p> <ul> <li>LangSmith \u6587\u6863</li> <li>LangSmith \u5e73\u53f0</li> <li>RunnableConfig</li> <li>\u4e3a\u8ffd\u8e2a\u6dfb\u52a0\u5143\u6570\u636e\u548c\u6807\u7b7e</li> <li>\u81ea\u5b9a\u4e49\u8fd0\u884c\u540d\u79f0</li> </ul> <p>\u5728 IDE \u6216\u7ec8\u7aef\u4e2d\u8c03\u8bd5\u56fe\u8fd0\u884c\u6709\u65f6\u53ef\u80fd\u4f1a\u5f88\u56f0\u96be\u3002LangSmith \u8ba9\u4f60\u80fd\u591f\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528 \u2014 \u9605\u8bfb LangSmith \u6587\u6863 \u4e86\u89e3\u66f4\u591a\u5165\u95e8\u4fe1\u606f\u3002</p> <p>\u4e3a\u4e86\u66f4\u5bb9\u6613\u8bc6\u522b\u548c\u5206\u6790\u56fe\u8c03\u7528\u671f\u95f4\u751f\u6210\u7684\u8ffd\u8e2a\uff0c\u4f60\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u8bbe\u7f6e\u989d\u5916\u7684\u914d\u7f6e\uff08\u53c2\u89c1 RunnableConfig\uff09\uff1a</p> \u5b57\u6bb5 \u7c7b\u578b \u63cf\u8ff0 run_name <code>str</code> \u6b64\u8c03\u7528\u7684\u8ffd\u8e2a\u5668\u8fd0\u884c\u540d\u79f0\u3002\u9ed8\u8ba4\u4e3a\u7c7b\u540d\u3002 run_id <code>UUID</code> \u6b64\u8c03\u7528\u7684\u8ffd\u8e2a\u5668\u8fd0\u884c\u552f\u4e00\u6807\u8bc6\u7b26\u3002\u5982\u679c\u672a\u63d0\u4f9b\uff0c\u5c06\u751f\u6210\u4e00\u4e2a\u65b0\u7684 UUID\u3002 tags <code>List[str]</code> \u6b64\u8c03\u7528\u53ca\u4efb\u4f55\u5b50\u8c03\u7528\uff08\u4f8b\u5982\uff0c\u94fe\u8c03\u7528 LLM\uff09\u7684\u6807\u7b7e\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e9b\u6807\u7b7e\u6765\u8fc7\u6ee4\u8c03\u7528\u3002 metadata <code>Dict[str, Any]</code> \u6b64\u8c03\u7528\u53ca\u4efb\u4f55\u5b50\u8c03\u7528\uff08\u4f8b\u5982\uff0c\u94fe\u8c03\u7528 LLM\uff09\u7684\u5143\u6570\u636e\u3002\u952e\u5e94\u4e3a\u5b57\u7b26\u4e32\uff0c\u503c\u5e94\u53ef JSON \u5e8f\u5217\u5316\u3002 <p>LangGraph \u56fe\u5b9e\u73b0\u4e86 LangChain Runnable \u63a5\u53e3\uff0c\u5e76\u5728 <code>invoke</code>\u3001<code>ainvoke</code>\u3001<code>stream</code> \u7b49\u65b9\u6cd5\u4e2d\u63a5\u53d7\u7b2c\u4e8c\u4e2a\u53c2\u6570\uff08<code>RunnableConfig</code>\uff09\u3002</p> <p>LangSmith \u5e73\u53f0\u5141\u8bb8\u4f60\u6839\u636e <code>run_name</code>\u3001<code>run_id</code>\u3001<code>tags</code> \u548c <code>metadata</code> \u641c\u7d22\u548c\u8fc7\u6ee4\u8ffd\u8e2a\u3002</p>"},{"location":"how-tos/run-id-langsmith/#_1","title":"\u7b80\u8981\u8bf4\u660e","text":"<pre><code>import uuid\n# \u751f\u6210\u968f\u673a UUID -- \u5fc5\u987b\u662f UUID\nconfig = {\"run_id\": uuid.uuid4()}, \"tags\": [\"my_tag1\"], \"metadata\": {\"a\": 5}}\n# \u9002\u7528\u4e8e\u6240\u6709\u6807\u51c6 Runnable \u65b9\u6cd5\n# \u5982 invoke\u3001batch\u3001ainvoke\u3001astream_events \u7b49\ngraph.stream(inputs, config, stream_mode=\"values\")\n</code></pre> <p>\u672c\u64cd\u4f5c\u6307\u5357\u7684\u5176\u4f59\u90e8\u5206\u5c06\u5c55\u793a\u4e00\u4e2a\u5b8c\u6574\u7684\u667a\u80fd\u4ee3\u7406\u3002</p>"},{"location":"how-tos/run-id-langsmith/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u5b89\u88c5\u6240\u9700\u7684\u5305\u5e76\u8bbe\u7f6e API \u5bc6\u94a5</p> <pre><code>%%capture --no-stderr\n%pip install --quiet -U langgraph langchain_openai\n</code></pre> <pre><code>import getpass\nimport os\n\n\ndef _set_env(var: str):\n    if not os.environ.get(var):\n        os.environ[var] = getpass.getpass(f\"{var}: \")\n\n\n_set_env(\"OPENAI_API_KEY\")\n_set_env(\"LANGSMITH_API_KEY\")\n</code></pre> <p>Tip</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u5347 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u8ba9\u4f60\u80fd\u591f\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528 \u2014 \u5728\u8fd9\u91cc\u9605\u8bfb\u66f4\u591a\u5165\u95e8\u4fe1\u606f\u3002</p>"},{"location":"how-tos/run-id-langsmith/#_3","title":"\u5b9a\u4e49\u56fe","text":"<p>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u9884\u6784\u5efa\u7684 ReAct \u667a\u80fd\u4ee3\u7406\u3002</p> <pre><code>from langchain_openai import ChatOpenAI\nfrom typing import Literal\nfrom langgraph.prebuilt import create_react_agent\nfrom langchain_core.tools import tool\n\n# \u9996\u5148\u521d\u59cb\u5316\u6211\u4eec\u8981\u4f7f\u7528\u7684\u6a21\u578b\u3002\nmodel = ChatOpenAI(model=\"gpt-4o\", temperature=0)\n\n\n# \u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u81ea\u5b9a\u4e49\u5de5\u5177\uff0c\u8be5\u5de5\u5177\u8fd4\u56de\u4e24\u4e2a\u57ce\u5e02\uff08\u7ebd\u7ea6\u548c\u65e7\u91d1\u5c71\uff09\u7684\u9884\u5b9a\u4e49\u5929\u6c14\u503c\n@tool\ndef get_weather(city: Literal[\"nyc\", \"sf\"]):\n    \"\"\"Use this to get weather information.\"\"\"\n    if city == \"nyc\":\n        return \"It might be cloudy in nyc\"\n    elif city == \"sf\":\n        return \"It's always sunny in sf\"\n    else:\n        raise AssertionError(\"Unknown city\")\n\n\ntools = [get_weather]\n\n\n# \u5b9a\u4e49\u56fe\ngraph = create_react_agent(model, tools=tools)\n</code></pre>"},{"location":"how-tos/run-id-langsmith/#_4","title":"\u8fd0\u884c\u56fe","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u5b9a\u4e49\u4e86\u56fe\uff0c\u8ba9\u6211\u4eec\u8fd0\u884c\u4e00\u6b21\u5e76\u5728 LangSmith \u4e2d\u67e5\u770b\u8ffd\u8e2a\u3002\u4e3a\u4e86\u8ba9\u6211\u4eec\u7684\u8ffd\u8e2a\u5728 LangSmith \u4e2d\u6613\u4e8e\u8bbf\u95ee\uff0c\u6211\u4eec\u5c06\u5728\u914d\u7f6e\u4e2d\u4f20\u5165\u81ea\u5b9a\u4e49\u7684 <code>run_id</code>\u3002</p> <p>\u8fd9\u5047\u8bbe\u4f60\u5df2\u7ecf\u8bbe\u7f6e\u4e86 <code>LANGSMITH_API_KEY</code> \u73af\u5883\u53d8\u91cf\u3002</p> <p>\u6ce8\u610f\uff0c\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e <code>LANGCHAIN_PROJECT</code> \u73af\u5883\u53d8\u91cf\u6765\u914d\u7f6e\u8ffd\u8e2a\u5230\u54ea\u4e2a\u9879\u76ee\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u8fd0\u884c\u5c06\u8ffd\u8e2a\u5230 <code>default</code> \u9879\u76ee\u3002</p> <pre><code>import uuid\n\n\ndef print_stream(stream):\n    for s in stream:\n        message = s[\"messages\"][-1]\n        if isinstance(message, tuple):\n            print(message)\n        else:\n            message.pretty_print()\n\n\ninputs = {\"messages\": [(\"user\", \"what is the weather in sf\")]}\n\nconfig = {\"run_name\": \"agent_007\", \"tags\": [\"cats are awesome\"]}\n\nprint_stream(graph.stream(inputs, config, stream_mode=\"values\"))\n</code></pre> <p>\u8f93\u51fa: <pre><code>================================ Human Message ==================================\n\nwhat is the weather in sf\n================================== Ai Message ===================================\nTool Calls:\n  get_weather (call_9ZudXyMAdlUjptq9oMGtQo8o)\n Call ID: call_9ZudXyMAdlUjptq9oMGtQo8o\n  Args:\n    city: sf\n================================= Tool Message ==================================\nName: get_weather\n\nIt's always sunny in sf\n================================== Ai Message ===================================\n\nThe weather in San Francisco is currently sunny.\n</code></pre></p>"},{"location":"how-tos/run-id-langsmith/#langsmith","title":"\u5728 LangSmith \u4e2d\u67e5\u770b\u8ffd\u8e2a","text":"<p>\u73b0\u5728\u6211\u4eec\u5df2\u7ecf\u8fd0\u884c\u4e86\u56fe\uff0c\u8ba9\u6211\u4eec\u524d\u5f80 LangSmith \u67e5\u770b\u8ffd\u8e2a\u3002\u9996\u5148\u70b9\u51fb\u8fdb\u5165\u4f60\u8ffd\u8e2a\u5230\u7684\u9879\u76ee\uff08\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d\u662f\u9ed8\u8ba4\u9879\u76ee\uff09\u3002\u4f60\u5e94\u8be5\u80fd\u770b\u5230\u4e00\u4e2a\u5e26\u6709\u81ea\u5b9a\u4e49\u8fd0\u884c\u540d\u79f0 \"agent_007\" \u7684\u8fd0\u884c\u3002</p> <p></p> <p>\u6b64\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528\u63d0\u4f9b\u7684\u6807\u7b7e\u6216\u5143\u6570\u636e\u5728\u4e8b\u540e\u8fc7\u6ee4\u8ffd\u8e2a\u3002\u4f8b\u5982\uff0c</p> <p></p>"},{"location":"how-tos/streaming/","title":"\u6d41\u5f0f\u8f93\u51fa","text":"<p>\u4f60\u53ef\u4ee5\u4ece LangGraph \u667a\u80fd\u4ee3\u7406\u6216\u5de5\u4f5c\u6d41 \u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u3002</p>"},{"location":"how-tos/streaming/#_2","title":"\u652f\u6301\u7684\u6d41\u5f0f\u6a21\u5f0f","text":"Python <p>\u5c06\u4ee5\u4e0b\u4e00\u79cd\u6216\u591a\u79cd\u6d41\u5f0f\u6a21\u5f0f\u4f5c\u4e3a\u5217\u8868\u4f20\u9012\u7ed9 @[<code>stream()</code>][CompiledStateGraph.stream] \u6216 @[<code>astream()</code>][CompiledStateGraph.astream] \u65b9\u6cd5\uff1a</p> JavaScript <p>\u5c06\u4ee5\u4e0b\u4e00\u79cd\u6216\u591a\u79cd\u6d41\u5f0f\u6a21\u5f0f\u4f5c\u4e3a\u5217\u8868\u4f20\u9012\u7ed9 @[<code>stream()</code>][CompiledStateGraph.stream] \u65b9\u6cd5\uff1a</p> \u6a21\u5f0f \u63cf\u8ff0 <code>values</code> \u5728\u56fe\u7684\u6bcf\u4e00\u6b65\u4e4b\u540e\u6d41\u5f0f\u4f20\u8f93\u72b6\u6001\u7684\u5b8c\u6574\u503c\u3002 <code>updates</code> \u5728\u56fe\u7684\u6bcf\u4e00\u6b65\u4e4b\u540e\u6d41\u5f0f\u4f20\u8f93\u72b6\u6001\u7684\u66f4\u65b0\u3002\u5982\u679c\u5728\u540c\u4e00\u6b65\u4e2d\u8fdb\u884c\u591a\u6b21\u66f4\u65b0\uff08\u4f8b\u5982\u8fd0\u884c\u591a\u4e2a\u8282\u70b9\uff09\uff0c\u8fd9\u4e9b\u66f4\u65b0\u4f1a\u5206\u522b\u6d41\u5f0f\u4f20\u8f93\u3002 <code>custom</code> \u4ece\u56fe\u8282\u70b9\u5185\u90e8\u6d41\u5f0f\u4f20\u8f93\u81ea\u5b9a\u4e49\u6570\u636e\u3002 <code>messages</code> \u4ece\u8c03\u7528 LLM \u7684\u4efb\u4f55\u56fe\u8282\u70b9\u6d41\u5f0f\u4f20\u8f93 2 \u5143\u7ec4\uff08LLM token\uff0c\u5143\u6570\u636e\uff09\u3002 <code>debug</code> \u5728\u56fe\u6267\u884c\u8fc7\u7a0b\u4e2d\u5c3d\u53ef\u80fd\u591a\u5730\u6d41\u5f0f\u4f20\u8f93\u4fe1\u606f\u3002"},{"location":"how-tos/streaming/#_3","title":"\u4ece\u667a\u80fd\u4ee3\u7406\u6d41\u5f0f\u4f20\u8f93","text":""},{"location":"how-tos/streaming/#_4","title":"\u667a\u80fd\u4ee3\u7406\u8fdb\u5ea6","text":"Python <p>\u8981\u6d41\u5f0f\u4f20\u8f93\u667a\u80fd\u4ee3\u7406\u8fdb\u5ea6\uff0c\u4f7f\u7528 @[<code>stream()</code>][CompiledStateGraph.stream] \u6216 @[<code>astream()</code>][CompiledStateGraph.astream] \u65b9\u6cd5\u5e76\u8bbe\u7f6e <code>stream_mode=\"updates\"</code>\u3002\u8fd9\u4f1a\u5728\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u6b65\u9aa4\u540e\u53d1\u51fa\u4e8b\u4ef6\u3002</p> JavaScript <p>\u8981\u6d41\u5f0f\u4f20\u8f93\u667a\u80fd\u4ee3\u7406\u8fdb\u5ea6\uff0c\u4f7f\u7528 @[<code>stream()</code>][CompiledStateGraph.stream] \u65b9\u6cd5\u5e76\u8bbe\u7f6e <code>streamMode: \"updates\"</code>\u3002\u8fd9\u4f1a\u5728\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u6b65\u9aa4\u540e\u53d1\u51fa\u4e8b\u4ef6\u3002</p> <p>\u4f8b\u5982\uff0c\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u8c03\u7528\u4e00\u6b21\u5de5\u5177\u7684\u667a\u80fd\u4ee3\u7406\uff0c\u4f60\u5e94\u8be5\u770b\u5230\u4ee5\u4e0b\u66f4\u65b0\uff1a</p> <ul> <li>LLM \u8282\u70b9\uff1a\u5e26\u6709\u5de5\u5177\u8c03\u7528\u8bf7\u6c42\u7684 AI \u6d88\u606f</li> <li>\u5de5\u5177\u8282\u70b9\uff1a\u5e26\u6709\u6267\u884c\u7ed3\u679c\u7684\u5de5\u5177\u6d88\u606f</li> <li>LLM \u8282\u70b9\uff1a\u6700\u7ec8 AI \u54cd\u5e94</li> </ul> Python\u540c\u6b65\u5f02\u6b65JavaScript <pre><code>agent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n# highlight-next-line\nfor chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=\"updates\"\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <pre><code>agent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n# highlight-next-line\nasync for chunk in agent.astream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=\"updates\"\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <pre><code>const agent = createReactAgent({\n  llm: model,\n  tools: [getWeather],\n});\n\nfor await (const chunk of await agent.stream(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  { streamMode: \"updates\" }\n)) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre>"},{"location":"how-tos/streaming/#llm-token","title":"LLM token","text":"Python <p>\u8981\u5728 LLM \u751f\u6210 token \u65f6\u6d41\u5f0f\u4f20\u8f93\u5b83\u4eec\uff0c\u4f7f\u7528 <code>stream_mode=\"messages\"</code>\uff1a</p> \u540c\u6b65\u5f02\u6b65JavaScript <pre><code>agent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n# highlight-next-line\nfor token, metadata in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=\"messages\"\n):\n    print(\"Token\", token)\n    print(\"Metadata\", metadata)\n    print(\"\\n\")\n</code></pre> <pre><code>agent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n# highlight-next-line\nasync for token, metadata in agent.astream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=\"messages\"\n):\n    print(\"Token\", token)\n    print(\"Metadata\", metadata)\n    print(\"\\n\")\n</code></pre> <p>\u8981\u5728 LLM \u751f\u6210 token \u65f6\u6d41\u5f0f\u4f20\u8f93\u5b83\u4eec\uff0c\u4f7f\u7528 <code>streamMode: \"messages\"</code>\uff1a</p> <pre><code>const agent = createReactAgent({\n  llm: model,\n  tools: [getWeather],\n});\n\nfor await (const [token, metadata] of await agent.stream(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  { streamMode: \"messages\" }\n)) {\n  console.log(\"Token\", token);\n  console.log(\"Metadata\", metadata);\n  console.log(\"\\n\");\n}\n</code></pre>"},{"location":"how-tos/streaming/#_5","title":"\u5de5\u5177\u66f4\u65b0","text":"Python <p>\u8981\u5728\u5de5\u5177\u6267\u884c\u65f6\u6d41\u5f0f\u4f20\u8f93\u66f4\u65b0\uff0c\u53ef\u4ee5\u4f7f\u7528 @[get_stream_writer][]\u3002</p> \u540c\u6b65\u5f02\u6b65 <pre><code># highlight-next-line\nfrom langgraph.config import get_stream_writer\n\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Get weather for a given city.\"\"\"\n    # highlight-next-line\n    writer = get_stream_writer()\n    # \u6d41\u5f0f\u4f20\u8f93\u4efb\u610f\u6570\u636e\n    # highlight-next-line\n    writer(f\"Looking up data for city: {city}\")\n    return f\"It's always sunny in {city}!\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n\nfor chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=\"custom\"\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <pre><code># highlight-next-line\nfrom langgraph.config import get_stream_writer\n\ndef get_weather(city: str) -&gt; str:\n    \"\"\"Get weather for a given city.\"\"\"\n    # highlight-next-line\n    writer = get_stream_writer()\n    # \u6d41\u5f0f\u4f20\u8f93\u4efb\u610f\u6570\u636e\n    # highlight-next-line\n    writer(f\"Looking up data for city: {city}\")\n    return f\"It's always sunny in {city}!\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n\nasync for chunk in agent.astream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=\"custom\"\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <p>Note</p> <p>\u5982\u679c\u4f60\u5728\u5de5\u5177\u4e2d\u6dfb\u52a0 <code>get_stream_writer</code>\uff0c\u4f60\u5c06\u65e0\u6cd5\u5728 LangGraph \u6267\u884c\u4e0a\u4e0b\u6587\u4e4b\u5916\u8c03\u7528\u8be5\u5de5\u5177\u3002</p> JavaScript <p>\u8981\u5728\u5de5\u5177\u6267\u884c\u65f6\u6d41\u5f0f\u4f20\u8f93\u66f4\u65b0\uff0c\u53ef\u4ee5\u4f7f\u7528\u914d\u7f6e\u4e2d\u7684 <code>writer</code> \u53c2\u6570\u3002</p> <pre><code>import { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst getWeather = tool(\n  async (input, config: LangGraphRunnableConfig) =&gt; {\n    // \u6d41\u5f0f\u4f20\u8f93\u4efb\u610f\u6570\u636e\n    config.writer?.(\"Looking up data for city: \" + input.city);\n    return `It's always sunny in ${input.city}!`;\n  },\n  {\n    name: \"get_weather\",\n    description: \"Get weather for a given city.\",\n    schema: z.object({\n      city: z.string().describe(\"The city to get weather for.\"),\n    }),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [getWeather],\n});\n\nfor await (const chunk of await agent.stream(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  { streamMode: \"custom\" }\n)) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre> <p>Note</p> <p>\u5982\u679c\u4f60\u5411\u5de5\u5177\u6dfb\u52a0 <code>writer</code> \u53c2\u6570\uff0c\u4f60\u5c06\u65e0\u6cd5\u5728\u4e0d\u63d0\u4f9b writer \u51fd\u6570\u7684\u60c5\u51b5\u4e0b\u5728 LangGraph \u6267\u884c\u4e0a\u4e0b\u6587\u4e4b\u5916\u8c03\u7528\u8be5\u5de5\u5177\u3002</p>"},{"location":"how-tos/streaming/#_6","title":"\u591a\u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93","text":"Python <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u6d41\u5f0f\u6a21\u5f0f\u4f5c\u4e3a\u5217\u8868\u4f20\u9012\u6765\u6307\u5b9a\u591a\u79cd\u6d41\u5f0f\u6a21\u5f0f\uff1a<code>stream_mode=[\"updates\", \"messages\", \"custom\"]</code>\uff1a</p> \u540c\u6b65\u5f02\u6b65JavaScript <pre><code>agent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n\nfor stream_mode, chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=[\"updates\", \"messages\", \"custom\"]\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <pre><code>agent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_weather],\n)\n\nasync for stream_mode, chunk in agent.astream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what is the weather in sf\"}]},\n    # highlight-next-line\n    stream_mode=[\"updates\", \"messages\", \"custom\"]\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06 streamMode \u4f5c\u4e3a\u6570\u7ec4\u4f20\u9012\u6765\u6307\u5b9a\u591a\u79cd\u6d41\u5f0f\u6a21\u5f0f\uff1a<code>streamMode: [\"updates\", \"messages\", \"custom\"]</code>\uff1a</p> <pre><code>const agent = createReactAgent({\n  llm: model,\n  tools: [getWeather],\n});\n\nfor await (const chunk of await agent.stream(\n  { messages: [{ role: \"user\", content: \"what is the weather in sf\" }] },\n  { streamMode: [\"updates\", \"messages\", \"custom\"] }\n)) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre>"},{"location":"how-tos/streaming/#_7","title":"\u7981\u7528\u6d41\u5f0f\u4f20\u8f93","text":"<p>\u5728\u67d0\u4e9b\u5e94\u7528\u4e2d\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4e3a\u7ed9\u5b9a\u6a21\u578b\u7981\u7528\u5355\u4e2a token \u7684\u6d41\u5f0f\u4f20\u8f93\u3002\u8fd9\u5728 \u591a\u667a\u80fd\u4ee3\u7406 \u7cfb\u7edf\u4e2d\u5f88\u6709\u7528\uff0c\u53ef\u4ee5\u63a7\u5236\u54ea\u4e9b\u667a\u80fd\u4ee3\u7406\u6d41\u5f0f\u8f93\u51fa\u3002</p> <p>\u8bf7\u53c2\u9605 \u6a21\u578b \u6307\u5357\u4e86\u89e3\u5982\u4f55\u7981\u7528\u6d41\u5f0f\u4f20\u8f93\u3002</p>"},{"location":"how-tos/streaming/#_8","title":"\u4ece\u5de5\u4f5c\u6d41\u6d41\u5f0f\u4f20\u8f93","text":""},{"location":"how-tos/streaming/#_9","title":"\u57fa\u672c\u7528\u6cd5\u793a\u4f8b","text":"Python <p>LangGraph \u56fe\u66b4\u9732 @[<code>.stream()</code>][Pregel.stream]\uff08\u540c\u6b65\uff09\u548c @[<code>.astream()</code>][Pregel.astream]\uff08\u5f02\u6b65\uff09\u65b9\u6cd5\uff0c\u5c06\u6d41\u5f0f\u8f93\u51fa\u4f5c\u4e3a\u8fed\u4ee3\u5668\u8fd4\u56de\u3002</p> \u540c\u6b65\u5f02\u6b65JavaScript <pre><code>for chunk in graph.stream(inputs, stream_mode=\"updates\"):\n    print(chunk)\n</code></pre> <pre><code>async for chunk in graph.astream(inputs, stream_mode=\"updates\"):\n    print(chunk)\n</code></pre> <p>LangGraph \u56fe\u66b4\u9732 @[<code>.stream()</code>][Pregel.stream] \u65b9\u6cd5\uff0c\u5c06\u6d41\u5f0f\u8f93\u51fa\u4f5c\u4e3a\u8fed\u4ee3\u5668\u8fd4\u56de\u3002</p> <pre><code>for await (const chunk of await graph.stream(inputs, {\n  streamMode: \"updates\",\n})) {\n  console.log(chunk);\n}\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u6d41\u5f0f\u4f20\u8f93\u66f4\u65b0 <p>=== \"Python\"   <pre><code>from typing import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\nclass State(TypedDict):\n    topic: str\n    joke: str\n\ndef refine_topic(state: State):\n    return {\"topic\": state[\"topic\"] + \" and cats\"}\n\ndef generate_joke(state: State):\n    return {\"joke\": f\"This is a joke about {state['topic']}\"}\n\ngraph = (\n    StateGraph(State)\n    .add_node(refine_topic)\n    .add_node(generate_joke)\n    .add_edge(START, \"refine_topic\")\n    .add_edge(\"refine_topic\", \"generate_joke\")\n    .add_edge(\"generate_joke\", END)\n    .compile()\n)\n\n# highlight-next-line\nfor chunk in graph.stream( # (1)!\n    {\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"updates\", # (2)!\n):\n    print(chunk)\n</code></pre></p> <ol> <li><code>stream()</code> \u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u4ea7\u51fa\u6d41\u5f0f\u8f93\u51fa\u7684\u8fed\u4ee3\u5668\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"updates\"</code> \u4ee5\u4ec5\u6d41\u5f0f\u4f20\u8f93\u6bcf\u4e2a\u8282\u70b9\u540e\u5bf9\u56fe\u72b6\u6001\u7684\u66f4\u65b0\u3002\u8fd8\u6709\u5176\u4ed6\u6d41\u5f0f\u6a21\u5f0f\u53ef\u7528\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u652f\u6301\u7684\u6d41\u5f0f\u6a21\u5f0f\u3002</li> </ol> <p>=== \"JavaScript\"   <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  topic: z.string(),\n  joke: z.string(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"refineTopic\", (state) =&gt; {\n    return { topic: state.topic + \" and cats\" };\n  })\n  .addNode(\"generateJoke\", (state) =&gt; {\n    return { joke: `This is a joke about ${state.topic}` };\n  })\n  .addEdge(START, \"refineTopic\")\n  .addEdge(\"refineTopic\", \"generateJoke\")\n  .addEdge(\"generateJoke\", END)\n  .compile();\n\nfor await (const chunk of await graph.stream(\n  { topic: \"ice cream\" },\n  { streamMode: \"updates\" } // (1)!\n)) {\n  console.log(chunk);\n}\n</code></pre></p> <ol> <li>\u8bbe\u7f6e <code>streamMode: \"updates\"</code> \u4ee5\u4ec5\u6d41\u5f0f\u4f20\u8f93\u6bcf\u4e2a\u8282\u70b9\u540e\u5bf9\u56fe\u72b6\u6001\u7684\u66f4\u65b0\u3002\u8fd8\u6709\u5176\u4ed6\u6d41\u5f0f\u6a21\u5f0f\u53ef\u7528\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u652f\u6301\u7684\u6d41\u5f0f\u6a21\u5f0f\u3002</li> </ol> <p><code>output   {'refineTopic': {'topic': 'ice cream and cats'}}   {'generateJoke': {'joke': 'This is a joke about ice cream and cats'}}</code>                                                                                                   |</p>"},{"location":"how-tos/streaming/#_10","title":"\u591a\u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93","text":"Python <p>\u4f60\u53ef\u4ee5\u5c06\u5217\u8868\u4f5c\u4e3a <code>stream_mode</code> \u53c2\u6570\u4f20\u9012\uff0c\u4e00\u6b21\u6d41\u5f0f\u4f20\u8f93\u591a\u79cd\u6a21\u5f0f\u3002</p> <p>\u6d41\u5f0f\u8f93\u51fa\u5c06\u662f <code>(mode, chunk)</code> \u5143\u7ec4\uff0c\u5176\u4e2d <code>mode</code> \u662f\u6d41\u5f0f\u6a21\u5f0f\u7684\u540d\u79f0\uff0c<code>chunk</code> \u662f\u8be5\u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93\u7684\u6570\u636e\u3002</p> \u540c\u6b65\u5f02\u6b65JavaScript <pre><code>for mode, chunk in graph.stream(inputs, stream_mode=[\"updates\", \"custom\"]):\n    print(chunk)\n</code></pre> <pre><code>async for mode, chunk in graph.astream(inputs, stream_mode=[\"updates\", \"custom\"]):\n    print(chunk)\n</code></pre> <p>\u4f60\u53ef\u4ee5\u5c06\u6570\u7ec4\u4f5c\u4e3a <code>streamMode</code> \u53c2\u6570\u4f20\u9012\uff0c\u4e00\u6b21\u6d41\u5f0f\u4f20\u8f93\u591a\u79cd\u6a21\u5f0f\u3002</p> <p>\u6d41\u5f0f\u8f93\u51fa\u5c06\u662f <code>[mode, chunk]</code> \u5143\u7ec4\uff0c\u5176\u4e2d <code>mode</code> \u662f\u6d41\u5f0f\u6a21\u5f0f\u7684\u540d\u79f0\uff0c<code>chunk</code> \u662f\u8be5\u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93\u7684\u6570\u636e\u3002</p> <pre><code>for await (const [mode, chunk] of await graph.stream(inputs, {\n  streamMode: [\"updates\", \"custom\"],\n})) {\n  console.log(chunk);\n}\n</code></pre>"},{"location":"how-tos/streaming/#_11","title":"\u6d41\u5f0f\u4f20\u8f93\u56fe\u72b6\u6001","text":"<p>\u4f7f\u7528\u6d41\u5f0f\u6a21\u5f0f <code>updates</code> \u548c <code>values</code> \u5728\u56fe\u6267\u884c\u65f6\u6d41\u5f0f\u4f20\u8f93\u5176\u72b6\u6001\u3002</p> <ul> <li><code>updates</code> \u5728\u56fe\u7684\u6bcf\u4e00\u6b65\u4e4b\u540e\u6d41\u5f0f\u4f20\u8f93\u72b6\u6001\u7684 \u66f4\u65b0\u3002</li> <li><code>values</code> \u5728\u56fe\u7684\u6bcf\u4e00\u6b65\u4e4b\u540e\u6d41\u5f0f\u4f20\u8f93\u72b6\u6001\u7684 \u5b8c\u6574\u503c\u3002</li> </ul> Python <pre><code>from typing import TypedDict\nfrom langgraph.graph import StateGraph, START, END\n\n\nclass State(TypedDict):\n  topic: str\n  joke: str\n\n\ndef refine_topic(state: State):\n    return {\"topic\": state[\"topic\"] + \" and cats\"}\n\n\ndef generate_joke(state: State):\n    return {\"joke\": f\"This is a joke about {state['topic']}\"}\n\ngraph = (\n  StateGraph(State)\n  .add_node(refine_topic)\n  .add_node(generate_joke)\n  .add_edge(START, \"refine_topic\")\n  .add_edge(\"refine_topic\", \"generate_joke\")\n  .add_edge(\"generate_joke\", END)\n  .compile()\n)\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  topic: z.string(),\n  joke: z.string(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"refineTopic\", (state) =&gt; {\n    return { topic: state.topic + \" and cats\" };\n  })\n  .addNode(\"generateJoke\", (state) =&gt; {\n    return { joke: `This is a joke about ${state.topic}` };\n  })\n  .addEdge(START, \"refineTopic\")\n  .addEdge(\"refineTopic\", \"generateJoke\")\n  .addEdge(\"generateJoke\", END)\n  .compile();\n</code></pre> updatesvalues <p>\u4f7f\u7528\u6b64\u6a21\u5f0f\u4ec5\u6d41\u5f0f\u4f20\u8f93\u8282\u70b9\u8fd4\u56de\u7684 \u72b6\u6001\u66f4\u65b0\u3002\u6d41\u5f0f\u8f93\u51fa\u5305\u62ec\u8282\u70b9\u540d\u79f0\u548c\u66f4\u65b0\u3002</p> Python <pre><code>for chunk in graph.stream(\n    {\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"updates\",\n):\n    print(chunk)\n</code></pre> JavaScript <pre><code>for await (const chunk of await graph.stream(\n  { topic: \"ice cream\" },\n  { streamMode: \"updates\" }\n)) {\n  console.log(chunk);\n}\n</code></pre> <p>\u4f7f\u7528\u6b64\u6a21\u5f0f\u5728\u6bcf\u4e00\u6b65\u4e4b\u540e\u6d41\u5f0f\u4f20\u8f93\u56fe\u7684 \u5b8c\u6574\u72b6\u6001\u3002</p> Python <pre><code>for chunk in graph.stream(\n    {\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"values\",\n):\n    print(chunk)\n</code></pre> JavaScript <pre><code>for await (const chunk of await graph.stream(\n  { topic: \"ice cream\" },\n  { streamMode: \"values\" }\n)) {\n  console.log(chunk);\n}\n</code></pre>"},{"location":"how-tos/streaming/#_12","title":"\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u8f93\u51fa","text":"Python <p>\u8981\u5728\u6d41\u5f0f\u8f93\u51fa\u4e2d\u5305\u542b \u5b50\u56fe \u7684\u8f93\u51fa\uff0c\u4f60\u53ef\u4ee5\u5728\u7236\u56fe\u7684 <code>.stream()</code> \u65b9\u6cd5\u4e2d\u8bbe\u7f6e <code>subgraphs=True</code>\u3002\u8fd9\u5c06\u6d41\u5f0f\u4f20\u8f93\u7236\u56fe\u548c\u4efb\u4f55\u5b50\u56fe\u7684\u8f93\u51fa\u3002</p> <p>\u8f93\u51fa\u5c06\u4ee5\u5143\u7ec4 <code>(namespace, data)</code> \u7684\u5f62\u5f0f\u6d41\u5f0f\u4f20\u8f93\uff0c\u5176\u4e2d <code>namespace</code> \u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u5305\u542b\u8c03\u7528\u5b50\u56fe\u7684\u8282\u70b9\u8def\u5f84\uff0c\u4f8b\u5982 <code>(\"parent_node:&lt;task_id&gt;\", \"child_node:&lt;task_id&gt;\")</code>\u3002</p> <pre><code>for chunk in graph.stream(\n    {\"foo\": \"foo\"},\n    # highlight-next-line\n    subgraphs=True, # (1)!\n    stream_mode=\"updates\",\n):\n    print(chunk)\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>subgraphs=True</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> JavaScript <p>\u8981\u5728\u6d41\u5f0f\u8f93\u51fa\u4e2d\u5305\u542b \u5b50\u56fe \u7684\u8f93\u51fa\uff0c\u4f60\u53ef\u4ee5\u5728\u7236\u56fe\u7684 <code>.stream()</code> \u65b9\u6cd5\u4e2d\u8bbe\u7f6e <code>subgraphs: true</code>\u3002\u8fd9\u5c06\u6d41\u5f0f\u4f20\u8f93\u7236\u56fe\u548c\u4efb\u4f55\u5b50\u56fe\u7684\u8f93\u51fa\u3002</p> <p>\u8f93\u51fa\u5c06\u4ee5\u5143\u7ec4 <code>[namespace, data]</code> \u7684\u5f62\u5f0f\u6d41\u5f0f\u4f20\u8f93\uff0c\u5176\u4e2d <code>namespace</code> \u662f\u4e00\u4e2a\u5143\u7ec4\uff0c\u5305\u542b\u8c03\u7528\u5b50\u56fe\u7684\u8282\u70b9\u8def\u5f84\uff0c\u4f8b\u5982 <code>[\"parent_node:&lt;task_id&gt;\", \"child_node:&lt;task_id&gt;\"]</code>\u3002</p> <pre><code>for await (const chunk of await graph.stream(\n  { foo: \"foo\" },\n  {\n    subgraphs: true, // (1)!\n    streamMode: \"updates\",\n  }\n)) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>subgraphs: true</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93 <p>=== \"Python\"   <pre><code>from langgraph.graph import START, StateGraph\nfrom typing import TypedDict\n\n# \u5b9a\u4e49\u5b50\u56fe\nclass SubgraphState(TypedDict):\n    foo: str  # \u6ce8\u610f\u6b64\u952e\u4e0e\u7236\u56fe\u72b6\u6001\u5171\u4eab\n    bar: str\n\ndef subgraph_node_1(state: SubgraphState):\n    return {\"bar\": \"bar\"}\n\ndef subgraph_node_2(state: SubgraphState):\n    return {\"foo\": state[\"foo\"] + state[\"bar\"]}\n\nsubgraph_builder = StateGraph(SubgraphState)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_node(subgraph_node_2)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph_builder.add_edge(\"subgraph_node_1\", \"subgraph_node_2\")\nsubgraph = subgraph_builder.compile()\n\n# \u5b9a\u4e49\u7236\u56fe\nclass ParentState(TypedDict):\n    foo: str\n\ndef node_1(state: ParentState):\n    return {\"foo\": \"hi! \" + state[\"foo\"]}\n\nbuilder = StateGraph(ParentState)\nbuilder.add_node(\"node_1\", node_1)\nbuilder.add_node(\"node_2\", subgraph)\nbuilder.add_edge(START, \"node_1\")\nbuilder.add_edge(\"node_1\", \"node_2\")\ngraph = builder.compile()\n\nfor chunk in graph.stream(\n    {\"foo\": \"foo\"},\n    stream_mode=\"updates\",\n    # highlight-next-line\n    subgraphs=True, # (1)!\n):\n    print(chunk)\n</code></pre></p> <ol> <li>\u8bbe\u7f6e <code>subgraphs=True</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> <p>=== \"JavaScript\"   <pre><code>import { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5b50\u56fe\nconst SubgraphState = z.object({\n  foo: z.string(), // \u6ce8\u610f\u6b64\u952e\u4e0e\u7236\u56fe\u72b6\u6001\u5171\u4eab\n  bar: z.string(),\n});\n\nconst subgraphBuilder = new StateGraph(SubgraphState)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { bar: \"bar\" };\n  })\n  .addNode(\"subgraphNode2\", (state) =&gt; {\n    return { foo: state.foo + state.bar };\n  })\n  .addEdge(START, \"subgraphNode1\")\n  .addEdge(\"subgraphNode1\", \"subgraphNode2\");\nconst subgraph = subgraphBuilder.compile();\n\n// \u5b9a\u4e49\u7236\u56fe\nconst ParentState = z.object({\n  foo: z.string(),\n});\n\nconst builder = new StateGraph(ParentState)\n  .addNode(\"node1\", (state) =&gt; {\n    return { foo: \"hi! \" + state.foo };\n  })\n  .addNode(\"node2\", subgraph)\n  .addEdge(START, \"node1\")\n  .addEdge(\"node1\", \"node2\");\nconst graph = builder.compile();\n\nfor await (const chunk of await graph.stream(\n  { foo: \"foo\" },\n  {\n    streamMode: \"updates\",\n    subgraphs: true, // (1)!\n  }\n)) {\n  console.log(chunk);\n}\n</code></pre></p> <ol> <li>\u8bbe\u7f6e <code>subgraphs: true</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> <p>=== \"Python\"   <pre><code>((), {'node_1': {'foo': 'hi! foo'}})\n(('node_2:dfddc4ba-c3c5-6887-5012-a243b5b377c2',), {'subgraph_node_1': {'bar': 'bar'}})\n(('node_2:dfddc4ba-c3c5-6887-5012-a243b5b377c2',), {'subgraph_node_2': {'foo': 'hi! foobar'}})\n((), {'node_2': {'foo': 'hi! foobar'}})\n</code></pre></p> <p>=== \"JavaScript\"   <pre><code>[[], {'node1': {'foo': 'hi! foo'}}]\n[['node2:dfddc4ba-c3c5-6887-5012-a243b5b377c2'], {'subgraphNode1': {'bar': 'bar'}}]\n[['node2:dfddc4ba-c3c5-6887-5012-a243b5b377c2'], {'subgraphNode2': {'foo': 'hi! foobar'}}]\n[[], {'node2': {'foo': 'hi! foobar'}}]\n</code></pre></p> <p>\u6ce8\u610f\uff0c\u6211\u4eec\u4e0d\u4ec5\u63a5\u6536\u8282\u70b9\u66f4\u65b0\uff0c\u8fd8\u63a5\u6536\u547d\u540d\u7a7a\u95f4\uff0c\u5b83\u4eec\u544a\u8bc9\u6211\u4eec\u6b63\u5728\u4ece\u54ea\u4e2a\u56fe\uff08\u6216\u5b50\u56fe\uff09\u6d41\u5f0f\u4f20\u8f93\u3002</p>"},{"location":"how-tos/streaming/#debug","title":"\u8c03\u8bd5","text":"<p>\u4f7f\u7528 <code>debug</code> \u6d41\u5f0f\u6a21\u5f0f\u5728\u56fe\u6267\u884c\u8fc7\u7a0b\u4e2d\u5c3d\u53ef\u80fd\u591a\u5730\u6d41\u5f0f\u4f20\u8f93\u4fe1\u606f\u3002\u6d41\u5f0f\u8f93\u51fa\u5305\u62ec\u8282\u70b9\u540d\u79f0\u548c\u5b8c\u6574\u72b6\u6001\u3002</p> Python <pre><code>for chunk in graph.stream(\n    {\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"debug\",\n):\n    print(chunk)\n</code></pre> JavaScript <pre><code>for await (const chunk of await graph.stream(\n  { topic: \"ice cream\" },\n  { streamMode: \"debug\" }\n)) {\n  console.log(chunk);\n}\n</code></pre>"},{"location":"how-tos/streaming/#messages","title":"LLM token","text":"<p>\u4f7f\u7528 <code>messages</code> \u6d41\u5f0f\u6a21\u5f0f\u4ece\u56fe\u7684\u4efb\u4f55\u90e8\u5206\uff08\u5305\u62ec\u8282\u70b9\u3001\u5de5\u5177\u3001\u5b50\u56fe\u6216\u4efb\u52a1\uff09\u9010 token \u6d41\u5f0f\u4f20\u8f93\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u8f93\u51fa\u3002</p> Python <p><code>messages</code> \u6a21\u5f0f \u7684\u6d41\u5f0f\u8f93\u51fa\u662f\u4e00\u4e2a\u5143\u7ec4 <code>(message_chunk, metadata)</code>\uff0c\u5176\u4e2d\uff1a</p> <ul> <li><code>message_chunk</code>\uff1a\u6765\u81ea LLM \u7684 token \u6216\u6d88\u606f\u7247\u6bb5\u3002</li> <li><code>metadata</code>\uff1a\u5305\u542b\u56fe\u8282\u70b9\u548c LLM \u8c03\u7528\u8be6\u7ec6\u4fe1\u606f\u7684\u5b57\u5178\u3002</li> </ul> <p>\u5982\u679c\u4f60\u7684 LLM \u6ca1\u6709 LangChain \u96c6\u6210\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>custom</code> \u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93\u5176\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u4e0e\u4efb\u610f LLM \u4e00\u8d77\u4f7f\u7528\u3002</p> <p>Python &lt; 3.11 \u5f02\u6b65\u9700\u8981\u624b\u52a8\u914d\u7f6e</p> <p>\u5728 Python &lt; 3.11 \u4e2d\u4f7f\u7528\u5f02\u6b65\u4ee3\u7801\u65f6\uff0c\u4f60\u5fc5\u987b\u663e\u5f0f\u5c06 <code>RunnableConfig</code> \u4f20\u9012\u7ed9 <code>ainvoke()</code> \u4ee5\u542f\u7528\u6b63\u786e\u7684\u6d41\u5f0f\u4f20\u8f93\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 Python &lt; 3.11 \u5f02\u6b65 \u6216\u5347\u7ea7\u5230 Python 3.11+\u3002</p> <pre><code>from dataclasses import dataclass\n\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, START\n\n\n@dataclass\nclass MyState:\n    topic: str\n    joke: str = \"\"\n\n\nllm = init_chat_model(model=\"openai:gpt-4o-mini\")\n\ndef call_model(state: MyState):\n    \"\"\"Call the LLM to generate a joke about a topic\"\"\"\n    # highlight-next-line\n    llm_response = llm.invoke( # (1)!\n        [\n            {\"role\": \"user\", \"content\": f\"Generate a joke about {state.topic}\"}\n        ]\n    )\n    return {\"joke\": llm_response.content}\n\ngraph = (\n    StateGraph(MyState)\n    .add_node(call_model)\n    .add_edge(START, \"call_model\")\n    .compile()\n)\n\nfor message_chunk, metadata in graph.stream( # (2)!\n    {\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"messages\",\n):\n    if message_chunk.content:\n        print(message_chunk.content, end=\"|\", flush=True)\n</code></pre> <ol> <li>\u6ce8\u610f\uff0c\u5373\u4f7f\u4f7f\u7528 <code>.invoke</code> \u800c\u4e0d\u662f <code>.stream</code> \u8fd0\u884c LLM\uff0c\u6d88\u606f\u4e8b\u4ef6\u4e5f\u4f1a\u88ab\u53d1\u51fa\u3002</li> <li>\"messages\" \u6d41\u5f0f\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a <code>(message_chunk, metadata)</code> \u5143\u7ec4\u7684\u8fed\u4ee3\u5668\uff0c\u5176\u4e2d <code>message_chunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684 token\uff0c<code>metadata</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u4fe1\u606f\u548c\u5176\u4ed6\u4fe1\u606f\u3002</li> </ol> JavaScript <p><code>messages</code> \u6a21\u5f0f \u7684\u6d41\u5f0f\u8f93\u51fa\u662f\u4e00\u4e2a\u5143\u7ec4 <code>[message_chunk, metadata]</code>\uff0c\u5176\u4e2d\uff1a</p> <ul> <li><code>message_chunk</code>\uff1a\u6765\u81ea LLM \u7684 token \u6216\u6d88\u606f\u7247\u6bb5\u3002</li> <li><code>metadata</code>\uff1a\u5305\u542b\u56fe\u8282\u70b9\u548c LLM \u8c03\u7528\u8be6\u7ec6\u4fe1\u606f\u7684\u5b57\u5178\u3002</li> </ul> <p>\u5982\u679c\u4f60\u7684 LLM \u6ca1\u6709 LangChain \u96c6\u6210\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>custom</code> \u6a21\u5f0f\u6d41\u5f0f\u4f20\u8f93\u5176\u8f93\u51fa\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u4e0e\u4efb\u610f LLM \u4e00\u8d77\u4f7f\u7528\u3002</p> <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst MyState = z.object({\n  topic: z.string(),\n  joke: z.string().default(\"\"),\n});\n\nconst llm = new ChatOpenAI({ model: \"gpt-4o-mini\" });\n\nconst callModel = async (state: z.infer&lt;typeof MyState&gt;) =&gt; {\n  // Call the LLM to generate a joke about a topic\n  const llmResponse = await llm.invoke([\n    { role: \"user\", content: `Generate a joke about ${state.topic}` },\n  ]); // (1)!\n  return { joke: llmResponse.content };\n};\n\nconst graph = new StateGraph(MyState)\n  .addNode(\"callModel\", callModel)\n  .addEdge(START, \"callModel\")\n  .compile();\n\nfor await (const [messageChunk, metadata] of await graph.stream(\n  // (2)!\n  { topic: \"ice cream\" },\n  { streamMode: \"messages\" }\n)) {\n  if (messageChunk.content) {\n    console.log(messageChunk.content + \"|\");\n  }\n}\n</code></pre> <ol> <li>\u6ce8\u610f\uff0c\u5373\u4f7f\u4f7f\u7528 <code>.invoke</code> \u800c\u4e0d\u662f <code>.stream</code> \u8fd0\u884c LLM\uff0c\u6d88\u606f\u4e8b\u4ef6\u4e5f\u4f1a\u88ab\u53d1\u51fa\u3002</li> <li>\"messages\" \u6d41\u5f0f\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a <code>[messageChunk, metadata]</code> \u5143\u7ec4\u7684\u8fed\u4ee3\u5668\uff0c\u5176\u4e2d <code>messageChunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684 token\uff0c<code>metadata</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u4fe1\u606f\u548c\u5176\u4ed6\u4fe1\u606f\u3002</li> </ol>"},{"location":"how-tos/streaming/#llm","title":"\u6309 LLM \u8c03\u7528\u8fc7\u6ee4","text":"<p>\u4f60\u53ef\u4ee5\u5c06 <code>tags</code> \u4e0e LLM \u8c03\u7528\u5173\u8054\uff0c\u4ee5\u6309 LLM \u8c03\u7528\u8fc7\u6ee4\u6d41\u5f0f token\u3002</p> Python <pre><code>from langchain.chat_models import init_chat_model\n\nllm_1 = init_chat_model(model=\"openai:gpt-4o-mini\", tags=['joke']) # (1)!\nllm_2 = init_chat_model(model=\"openai:gpt-4o-mini\", tags=['poem']) # (2)!\n\ngraph = ... # \u5b9a\u4e49\u4f7f\u7528\u8fd9\u4e9b LLM \u7684\u56fe\n\nasync for msg, metadata in graph.astream(  # (3)!\n    {\"topic\": \"cats\"},\n    # highlight-next-line\n    stream_mode=\"messages\",\n):\n    if metadata[\"tags\"] == [\"joke\"]: # (4)!\n        print(msg.content, end=\"|\", flush=True)\n</code></pre> <ol> <li>llm_1 \u88ab\u6807\u8bb0\u4e3a \"joke\"\u3002</li> <li>llm_2 \u88ab\u6807\u8bb0\u4e3a \"poem\"\u3002</li> <li><code>stream_mode</code> \u8bbe\u7f6e\u4e3a \"messages\" \u4ee5\u6d41\u5f0f\u4f20\u8f93 LLM token\u3002<code>metadata</code> \u5305\u542b\u6709\u5173 LLM \u8c03\u7528\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6807\u7b7e\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>tags</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u5e26\u6709 \"joke\" \u6807\u7b7e\u7684 LLM \u8c03\u7528\u7684 token\u3002</li> </ol> JavaScript <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\n\nconst llm1 = new ChatOpenAI({\n  model: \"gpt-4o-mini\",\n  tags: ['joke'] // (1)!\n});\nconst llm2 = new ChatOpenAI({\n  model: \"gpt-4o-mini\",\n  tags: ['poem'] // (2)!\n});\n\nconst graph = // ... \u5b9a\u4e49\u4f7f\u7528\u8fd9\u4e9b LLM \u7684\u56fe\n\nfor await (const [msg, metadata] of await graph.stream( // (3)!\n  { topic: \"cats\" },\n  { streamMode: \"messages\" }\n)) {\n  if (metadata.tags?.includes(\"joke\")) { // (4)!\n    console.log(msg.content + \"|\");\n  }\n}\n</code></pre> <ol> <li>llm1 \u88ab\u6807\u8bb0\u4e3a \"joke\"\u3002</li> <li>llm2 \u88ab\u6807\u8bb0\u4e3a \"poem\"\u3002</li> <li><code>streamMode</code> \u8bbe\u7f6e\u4e3a \"messages\" \u4ee5\u6d41\u5f0f\u4f20\u8f93 LLM token\u3002<code>metadata</code> \u5305\u542b\u6709\u5173 LLM \u8c03\u7528\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6807\u7b7e\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>tags</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u5e26\u6709 \"joke\" \u6807\u7b7e\u7684 LLM \u8c03\u7528\u7684 token\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u6309\u6807\u7b7e\u8fc7\u6ee4 <p>=== \"Python\"   <pre><code>from typing import TypedDict\n\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.graph import START, StateGraph\n\njoke_model = init_chat_model(model=\"openai:gpt-4o-mini\", tags=[\"joke\"]) # (1)!\npoem_model = init_chat_model(model=\"openai:gpt-4o-mini\", tags=[\"poem\"]) # (2)!\n\n\nclass State(TypedDict):\n      topic: str\n      joke: str\n      poem: str\n\n\nasync def call_model(state, config):\n      topic = state[\"topic\"]\n      print(\"Writing joke...\")\n      # \u6ce8\u610f\uff1a\u5728 Python &lt; 3.11 \u4e2d\u663e\u5f0f\u4f20\u9012 config \u662f\u5fc5\u9700\u7684\n      # \u56e0\u4e3a\u5728\u6b64\u4e4b\u524d\u6ca1\u6709\u6dfb\u52a0\u4e0a\u4e0b\u6587\u53d8\u91cf\u652f\u6301\uff1ahttps://docs.python.org/3/library/asyncio-task.html#creating-tasks\n      joke_response = await joke_model.ainvoke(\n            [{\"role\": \"user\", \"content\": f\"Write a joke about {topic}\"}],\n            config, # (3)!\n      )\n      print(\"\\n\\nWriting poem...\")\n      poem_response = await poem_model.ainvoke(\n            [{\"role\": \"user\", \"content\": f\"Write a short poem about {topic}\"}],\n            config, # (3)!\n      )\n      return {\"joke\": joke_response.content, \"poem\": poem_response.content}\n\n\ngraph = (\n      StateGraph(State)\n      .add_node(call_model)\n      .add_edge(START, \"call_model\")\n      .compile()\n)\n\nasync for msg, metadata in graph.astream(\n      {\"topic\": \"cats\"},\n      # highlight-next-line\n      stream_mode=\"messages\", # (4)!\n):\n    if metadata[\"tags\"] == [\"joke\"]: # (4)!\n        print(msg.content, end=\"|\", flush=True)\n</code></pre></p> <ol> <li><code>joke_model</code> \u88ab\u6807\u8bb0\u4e3a \"joke\"\u3002</li> <li><code>poem_model</code> \u88ab\u6807\u8bb0\u4e3a \"poem\"\u3002</li> <li>\u663e\u5f0f\u4f20\u9012 <code>config</code> \u4ee5\u786e\u4fdd\u4e0a\u4e0b\u6587\u53d8\u91cf\u6b63\u786e\u4f20\u64ad\u3002\u8fd9\u662f\u5728\u4f7f\u7528\u5f02\u6b65\u4ee3\u7801\u65f6 Python &lt; 3.11 \u6240\u5fc5\u9700\u7684\u3002\u8be6\u60c5\u8bf7\u53c2\u9605 \u5f02\u6b65\u90e8\u5206\u3002</li> <li><code>stream_mode</code> \u8bbe\u7f6e\u4e3a \"messages\" \u4ee5\u6d41\u5f0f\u4f20\u8f93 LLM token\u3002<code>metadata</code> \u5305\u542b\u6709\u5173 LLM \u8c03\u7528\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6807\u7b7e\u3002</li> </ol> <p>=== \"JavaScript\"   <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst jokeModel = new ChatOpenAI({\n  model: \"gpt-4o-mini\",\n  tags: [\"joke\"] // (1)!\n});\nconst poemModel = new ChatOpenAI({\n  model: \"gpt-4o-mini\",\n  tags: [\"poem\"] // (2)!\n});\n\nconst State = z.object({\n  topic: z.string(),\n  joke: z.string(),\n  poem: z.string(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"callModel\", (state) =&gt; {\n    const topic = state.topic;\n    console.log(\"Writing joke...\");\n\n    const jokeResponse = await jokeModel.invoke([\n      { role: \"user\", content: `Write a joke about ${topic}` }\n    ]);\n\n    console.log(\"\\n\\nWriting poem...\");\n    const poemResponse = await poemModel.invoke([\n      { role: \"user\", content: `Write a short poem about ${topic}` }\n    ]);\n\n    return {\n      joke: jokeResponse.content,\n      poem: poemResponse.content\n    };\n  })\n  .addEdge(START, \"callModel\")\n  .compile();\n\nfor await (const [msg, metadata] of await graph.stream(\n  { topic: \"cats\" },\n  { streamMode: \"messages\" } // (3)!\n)) {\n  if (metadata.tags?.includes(\"joke\")) { // (4)!\n    console.log(msg.content + \"|\");\n  }\n}\n</code></pre></p> <ol> <li><code>jokeModel</code> \u88ab\u6807\u8bb0\u4e3a \"joke\"\u3002</li> <li><code>poemModel</code> \u88ab\u6807\u8bb0\u4e3a \"poem\"\u3002</li> <li><code>streamMode</code> \u8bbe\u7f6e\u4e3a \"messages\" \u4ee5\u6d41\u5f0f\u4f20\u8f93 LLM token\u3002<code>metadata</code> \u5305\u542b\u6709\u5173 LLM \u8c03\u7528\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u6807\u7b7e\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>tags</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u5e26\u6709 \"joke\" \u6807\u7b7e\u7684 LLM \u8c03\u7528\u7684 token\u3002</li> </ol>"},{"location":"how-tos/streaming/#_13","title":"\u6309\u8282\u70b9\u8fc7\u6ee4","text":"<p>\u8981\u4ec5\u4ece\u7279\u5b9a\u8282\u70b9\u6d41\u5f0f\u4f20\u8f93 token\uff0c\u4f7f\u7528 <code>stream_mode=\"messages\"</code> \u5e76\u901a\u8fc7\u6d41\u5f0f\u5143\u6570\u636e\u4e2d\u7684 <code>langgraph_node</code> \u5b57\u6bb5\u8fc7\u6ee4\u8f93\u51fa\uff1a</p> Python <pre><code>for msg, metadata in graph.stream( # (1)!\n    inputs,\n    # highlight-next-line\n    stream_mode=\"messages\",\n):\n    # highlight-next-line\n    if msg.content and metadata[\"langgraph_node\"] == \"some_node_name\": # (2)!\n        ...\n</code></pre> <ol> <li>\"messages\" \u6d41\u5f0f\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a <code>(message_chunk, metadata)</code> \u5143\u7ec4\uff0c\u5176\u4e2d <code>message_chunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684 token\uff0c<code>metadata</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u4fe1\u606f\u548c\u5176\u4ed6\u4fe1\u606f\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>langgraph_node</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u6765\u81ea <code>write_poem</code> \u8282\u70b9\u7684 token\u3002</li> </ol> JavaScript <pre><code>for await (const [msg, metadata] of await graph.stream(\n  // (1)!\n  inputs,\n  { streamMode: \"messages\" }\n)) {\n  if (msg.content &amp;&amp; metadata.langgraph_node === \"some_node_name\") {\n    // (2)!\n    // ...\n  }\n}\n</code></pre> <ol> <li>\"messages\" \u6d41\u5f0f\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a <code>[messageChunk, metadata]</code> \u5143\u7ec4\uff0c\u5176\u4e2d <code>messageChunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684 token\uff0c<code>metadata</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u4fe1\u606f\u548c\u5176\u4ed6\u4fe1\u606f\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>langgraph_node</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u6765\u81ea <code>writePoem</code> \u8282\u70b9\u7684 token\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u4ece\u7279\u5b9a\u8282\u70b9\u6d41\u5f0f\u4f20\u8f93 LLM token <p>=== \"Python\"   <pre><code>from typing import TypedDict\nfrom langgraph.graph import START, StateGraph\nfrom langchain_openai import ChatOpenAI\n\nmodel = ChatOpenAI(model=\"gpt-4o-mini\")\n\n\nclass State(TypedDict):\n      topic: str\n      joke: str\n      poem: str\n\n\ndef write_joke(state: State):\n      topic = state[\"topic\"]\n      joke_response = model.invoke(\n            [{\"role\": \"user\", \"content\": f\"Write a joke about {topic}\"}]\n      )\n      return {\"joke\": joke_response.content}\n\n\ndef write_poem(state: State):\n      topic = state[\"topic\"]\n      poem_response = model.invoke(\n            [{\"role\": \"user\", \"content\": f\"Write a short poem about {topic}\"}]\n      )\n      return {\"poem\": poem_response.content}\n\n\ngraph = (\n      StateGraph(State)\n      .add_node(write_joke)\n      .add_node(write_poem)\n      # \u5e76\u53d1\u5199\u7b11\u8bdd\u548c\u8bd7\n      .add_edge(START, \"write_joke\")\n      .add_edge(START, \"write_poem\")\n      .compile()\n)\n\n# highlight-next-line\nfor msg, metadata in graph.stream( # (1)!\n    {\"topic\": \"cats\"},\n    stream_mode=\"messages\",\n):\n    # highlight-next-line\n    if msg.content and metadata[\"langgraph_node\"] == \"write_poem\": # (2)!\n        print(msg.content, end=\"|\", flush=True)\n</code></pre></p> <ol> <li>\"messages\" \u6d41\u5f0f\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a <code>(message_chunk, metadata)</code> \u5143\u7ec4\uff0c\u5176\u4e2d <code>message_chunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684 token\uff0c<code>metadata</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u4fe1\u606f\u548c\u5176\u4ed6\u4fe1\u606f\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>langgraph_node</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u6765\u81ea <code>write_poem</code> \u8282\u70b9\u7684 token\u3002</li> </ol> <p>=== \"JavaScript\"   <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst model = new ChatOpenAI({ model: \"gpt-4o-mini\" });\n\nconst State = z.object({\n  topic: z.string(),\n  joke: z.string(),\n  poem: z.string(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"writeJoke\", async (state) =&gt; {\n    const topic = state.topic;\n    const jokeResponse = await model.invoke([\n      { role: \"user\", content: `Write a joke about ${topic}` }\n    ]);\n    return { joke: jokeResponse.content };\n  })\n  .addNode(\"writePoem\", async (state) =&gt; {\n    const topic = state.topic;\n    const poemResponse = await model.invoke([\n      { role: \"user\", content: `Write a short poem about ${topic}` }\n    ]);\n    return { poem: poemResponse.content };\n  })\n  // \u5e76\u53d1\u5199\u7b11\u8bdd\u548c\u8bd7\n  .addEdge(START, \"writeJoke\")\n  .addEdge(START, \"writePoem\")\n  .compile();\n\nfor await (const [msg, metadata] of await graph.stream( // (1)!\n  { topic: \"cats\" },\n  { streamMode: \"messages\" }\n)) {\n  if (msg.content &amp;&amp; metadata.langgraph_node === \"writePoem\") { // (2)!\n    console.log(msg.content + \"|\");\n  }\n}\n</code></pre></p> <ol> <li>\"messages\" \u6d41\u5f0f\u6a21\u5f0f\u8fd4\u56de\u4e00\u4e2a <code>[messageChunk, metadata]</code> \u5143\u7ec4\uff0c\u5176\u4e2d <code>messageChunk</code> \u662f LLM \u6d41\u5f0f\u4f20\u8f93\u7684 token\uff0c<code>metadata</code> \u662f\u4e00\u4e2a\u5b57\u5178\uff0c\u5305\u542b\u8c03\u7528 LLM \u7684\u56fe\u8282\u70b9\u4fe1\u606f\u548c\u5176\u4ed6\u4fe1\u606f\u3002</li> <li>\u901a\u8fc7\u5143\u6570\u636e\u4e2d\u7684 <code>langgraph_node</code> \u5b57\u6bb5\u8fc7\u6ee4\u6d41\u5f0f token\uff0c\u53ea\u5305\u542b\u6765\u81ea <code>writePoem</code> \u8282\u70b9\u7684 token\u3002</li> </ol>"},{"location":"how-tos/streaming/#_14","title":"\u6d41\u5f0f\u4f20\u8f93\u81ea\u5b9a\u4e49\u6570\u636e","text":"Python <p>\u8981\u4ece LangGraph \u8282\u70b9\u6216\u5de5\u5177\u5185\u90e8\u53d1\u9001 \u81ea\u5b9a\u4e49\u7528\u6237\u5b9a\u4e49\u6570\u636e\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a</p> <ol> <li>\u4f7f\u7528 <code>get_stream_writer()</code> \u8bbf\u95ee\u6d41\u5199\u5165\u5668\u5e76\u53d1\u51fa\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u5728\u8c03\u7528 <code>.stream()</code> \u6216 <code>.astream()</code> \u65f6\u8bbe\u7f6e <code>stream_mode=\"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u83b7\u53d6\u81ea\u5b9a\u4e49\u6570\u636e\u3002\u4f60\u53ef\u4ee5\u7ec4\u5408\u591a\u79cd\u6a21\u5f0f\uff08\u4f8b\u5982 <code>[\"updates\", \"custom\"]</code>\uff09\uff0c\u4f46\u81f3\u5c11\u5fc5\u987b\u6709\u4e00\u4e2a\u662f <code>\"custom\"</code>\u3002</li> </ol> <p>Python &lt; 3.11 \u5f02\u6b65\u4e2d\u6ca1\u6709 <code>get_stream_writer()</code></p> <p>\u5728 Python &lt; 3.11 \u4e0a\u8fd0\u884c\u7684\u5f02\u6b65\u4ee3\u7801\u4e2d\uff0c<code>get_stream_writer()</code> \u5c06\u4e0d\u8d77\u4f5c\u7528\u3002 \u76f8\u53cd\uff0c\u5411\u4f60\u7684\u8282\u70b9\u6216\u5de5\u5177\u6dfb\u52a0 <code>writer</code> \u53c2\u6570\u5e76\u624b\u52a8\u4f20\u9012\u5b83\u3002 \u8bf7\u53c2\u9605 Python &lt; 3.11 \u5f02\u6b65 \u4e86\u89e3\u4f7f\u7528\u793a\u4f8b\u3002</p> nodetoolJavaScript <pre><code>from typing import TypedDict\nfrom langgraph.config import get_stream_writer\nfrom langgraph.graph import StateGraph, START\n\nclass State(TypedDict):\n    query: str\n    answer: str\n\ndef node(state: State):\n    writer = get_stream_writer()  # (1)!\n    writer({\"custom_key\": \"Generating custom data inside node\"}) # (2)!\n    return {\"answer\": \"some data\"}\n\ngraph = (\n    StateGraph(State)\n    .add_node(node)\n    .add_edge(START, \"node\")\n    .compile()\n)\n\ninputs = {\"query\": \"example\"}\n\n# \u4f7f\u7528\nfor chunk in graph.stream(inputs, stream_mode=\"custom\"):  # (3)!\n    print(chunk)\n</code></pre> <ol> <li>\u83b7\u53d6\u6d41\u5199\u5165\u5668\u4ee5\u53d1\u9001\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u53d1\u51fa\u81ea\u5b9a\u4e49\u952e\u503c\u5bf9\uff08\u4f8b\u5982\u8fdb\u5ea6\u66f4\u65b0\uff09\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol> <pre><code>from langchain_core.tools import tool\nfrom langgraph.config import get_stream_writer\n\n@tool\ndef query_database(query: str) -&gt; str:\n    \"\"\"Query the database.\"\"\"\n    writer = get_stream_writer() # (1)!\n    # highlight-next-line\n    writer({\"data\": \"Retrieved 0/100 records\", \"type\": \"progress\"}) # (2)!\n    # \u6267\u884c\u67e5\u8be2\n    # highlight-next-line\n    writer({\"data\": \"Retrieved 100/100 records\", \"type\": \"progress\"}) # (3)!\n    return \"some-answer\"\n\n\ngraph = ... # \u5b9a\u4e49\u4f7f\u7528\u6b64\u5de5\u5177\u7684\u56fe\n\nfor chunk in graph.stream(inputs, stream_mode=\"custom\"): # (4)!\n    print(chunk)\n</code></pre> <ol> <li>\u8bbf\u95ee\u6d41\u5199\u5165\u5668\u4ee5\u53d1\u9001\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u53d1\u51fa\u81ea\u5b9a\u4e49\u952e\u503c\u5bf9\uff08\u4f8b\u5982\u8fdb\u5ea6\u66f4\u65b0\uff09\u3002</li> <li>\u53d1\u51fa\u53e6\u4e00\u4e2a\u81ea\u5b9a\u4e49\u952e\u503c\u5bf9\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol> <p>\u8981\u4ece LangGraph \u8282\u70b9\u6216\u5de5\u5177\u5185\u90e8\u53d1\u9001 \u81ea\u5b9a\u4e49\u7528\u6237\u5b9a\u4e49\u6570\u636e\uff0c\u8bf7\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a</p> <ol> <li>\u4f7f\u7528 <code>LangGraphRunnableConfig</code> \u4e2d\u7684 <code>writer</code> \u53c2\u6570\u53d1\u51fa\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u5728\u8c03\u7528 <code>.stream()</code> \u65f6\u8bbe\u7f6e <code>streamMode: \"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u83b7\u53d6\u81ea\u5b9a\u4e49\u6570\u636e\u3002\u4f60\u53ef\u4ee5\u7ec4\u5408\u591a\u79cd\u6a21\u5f0f\uff08\u4f8b\u5982 <code>[\"updates\", \"custom\"]</code>\uff09\uff0c\u4f46\u81f3\u5c11\u5fc5\u987b\u6709\u4e00\u4e2a\u662f <code>\"custom\"</code>\u3002</li> </ol> nodetool <pre><code>import { StateGraph, START, LangGraphRunnableConfig } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  query: z.string(),\n  answer: z.string(),\n});\n\nconst graph = new StateGraph(State)\n  .addNode(\"node\", async (state, config) =&gt; {\n    config.writer({ custom_key: \"Generating custom data inside node\" }); // (1)!\n    return { answer: \"some data\" };\n  })\n  .addEdge(START, \"node\")\n  .compile();\n\nconst inputs = { query: \"example\" };\n\n// \u4f7f\u7528\nfor await (const chunk of await graph.stream(inputs, { streamMode: \"custom\" })) { // (2)!\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u4f7f\u7528\u5199\u5165\u5668\u53d1\u51fa\u81ea\u5b9a\u4e49\u952e\u503c\u5bf9\uff08\u4f8b\u5982\u8fdb\u5ea6\u66f4\u65b0\uff09\u3002</li> <li>\u8bbe\u7f6e <code>streamMode: \"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { LangGraphRunnableConfig } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst queryDatabase = tool(\n  async (input, config: LangGraphRunnableConfig) =&gt; {\n    config.writer({ data: \"Retrieved 0/100 records\", type: \"progress\" }); // (1)!\n    // \u6267\u884c\u67e5\u8be2\n    config.writer({ data: \"Retrieved 100/100 records\", type: \"progress\" }); // (2)!\n    return \"some-answer\";\n  },\n  {\n    name: \"query_database\",\n    description: \"Query the database.\",\n    schema: z.object({\n      query: z.string().describe(\"The query to execute.\"),\n    }),\n  }\n);\n\nconst graph = // ... \u5b9a\u4e49\u4f7f\u7528\u6b64\u5de5\u5177\u7684\u56fe\n\nfor await (const chunk of await graph.stream(inputs, { streamMode: \"custom\" })) { // (3)!\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u4f7f\u7528\u5199\u5165\u5668\u53d1\u51fa\u81ea\u5b9a\u4e49\u952e\u503c\u5bf9\uff08\u4f8b\u5982\u8fdb\u5ea6\u66f4\u65b0\uff09\u3002</li> <li>\u53d1\u51fa\u53e6\u4e00\u4e2a\u81ea\u5b9a\u4e49\u952e\u503c\u5bf9\u3002</li> <li>\u8bbe\u7f6e <code>streamMode: \"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol>"},{"location":"how-tos/streaming/#llm_1","title":"\u4e0e\u4efb\u610f LLM \u4e00\u8d77\u4f7f\u7528","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>stream_mode=\"custom\"</code> \u4ece \u4efb\u4f55 LLM API \u6d41\u5f0f\u4f20\u8f93\u6570\u636e \u2014 \u5373\u4f7f\u8be5 API \u6ca1\u6709 \u5b9e\u73b0 LangChain \u804a\u5929\u6a21\u578b\u63a5\u53e3\u3002</p> <p>\u8fd9\u8ba9\u4f60\u53ef\u4ee5\u96c6\u6210\u539f\u59cb LLM \u5ba2\u6237\u7aef\u6216\u63d0\u4f9b\u81ea\u5df1\u6d41\u5f0f\u63a5\u53e3\u7684\u5916\u90e8\u670d\u52a1\uff0c\u4f7f LangGraph \u5bf9\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u9ad8\u5ea6\u7075\u6d3b\u3002</p> <pre><code>from langgraph.config import get_stream_writer\n\ndef call_arbitrary_model(state):\n    \"\"\"Example node that calls an arbitrary model and streams the output\"\"\"\n    # highlight-next-line\n    writer = get_stream_writer() # (1)!\n    # \u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u4ea7\u51fa\u5757\u7684\u6d41\u5f0f\u5ba2\u6237\u7aef\n    for chunk in your_custom_streaming_client(state[\"topic\"]): # (2)!\n        # highlight-next-line\n        writer({\"custom_llm_chunk\": chunk}) # (3)!\n    return {\"result\": \"completed\"}\n\ngraph = (\n    StateGraph(State)\n    .add_node(call_arbitrary_model)\n    # \u6839\u636e\u9700\u8981\u6dfb\u52a0\u5176\u4ed6\u8282\u70b9\u548c\u8fb9\n    .compile()\n)\n\nfor chunk in graph.stream(\n    {\"topic\": \"cats\"},\n    # highlight-next-line\n    stream_mode=\"custom\", # (4)!\n):\n    # chunk \u5c06\u5305\u542b\u4ece llm \u6d41\u5f0f\u4f20\u8f93\u7684\u81ea\u5b9a\u4e49\u6570\u636e\n    print(chunk)\n</code></pre> <ol> <li>\u83b7\u53d6\u6d41\u5199\u5165\u5668\u4ee5\u53d1\u9001\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u4f7f\u7528\u4f60\u7684\u81ea\u5b9a\u4e49\u6d41\u5f0f\u5ba2\u6237\u7aef\u751f\u6210 LLM token\u3002</li> <li>\u4f7f\u7528\u5199\u5165\u5668\u5411\u6d41\u53d1\u9001\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>streamMode: \"custom\"</code> \u4ece \u4efb\u4f55 LLM API \u6d41\u5f0f\u4f20\u8f93\u6570\u636e \u2014 \u5373\u4f7f\u8be5 API \u6ca1\u6709 \u5b9e\u73b0 LangChain \u804a\u5929\u6a21\u578b\u63a5\u53e3\u3002</p> <p>\u8fd9\u8ba9\u4f60\u53ef\u4ee5\u96c6\u6210\u539f\u59cb LLM \u5ba2\u6237\u7aef\u6216\u63d0\u4f9b\u81ea\u5df1\u6d41\u5f0f\u63a5\u53e3\u7684\u5916\u90e8\u670d\u52a1\uff0c\u4f7f LangGraph \u5bf9\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u9ad8\u5ea6\u7075\u6d3b\u3002</p> <pre><code>import { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst callArbitraryModel = async (\n  state: any,\n  config: LangGraphRunnableConfig\n) =&gt; {\n  // \u8c03\u7528\u4efb\u610f\u6a21\u578b\u5e76\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\u7684\u793a\u4f8b\u8282\u70b9\n  // \u5047\u8bbe\u4f60\u6709\u4e00\u4e2a\u4ea7\u51fa\u5757\u7684\u6d41\u5f0f\u5ba2\u6237\u7aef\n  for await (const chunk of yourCustomStreamingClient(state.topic)) {\n    // (1)!\n    config.writer({ custom_llm_chunk: chunk }); // (2)!\n  }\n  return { result: \"completed\" };\n};\n\nconst graph = new StateGraph(State)\n  .addNode(\"callArbitraryModel\", callArbitraryModel)\n  // \u6839\u636e\u9700\u8981\u6dfb\u52a0\u5176\u4ed6\u8282\u70b9\u548c\u8fb9\n  .compile();\n\nfor await (const chunk of await graph.stream(\n  { topic: \"cats\" },\n  { streamMode: \"custom\" } // (3)!\n)) {\n  // chunk \u5c06\u5305\u542b\u4ece llm \u6d41\u5f0f\u4f20\u8f93\u7684\u81ea\u5b9a\u4e49\u6570\u636e\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u4f7f\u7528\u4f60\u7684\u81ea\u5b9a\u4e49\u6d41\u5f0f\u5ba2\u6237\u7aef\u751f\u6210 LLM token\u3002</li> <li>\u4f7f\u7528\u5199\u5165\u5668\u5411\u6d41\u53d1\u9001\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u8bbe\u7f6e <code>streamMode: \"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u6d41\u5f0f\u4f20\u8f93\u4efb\u610f\u804a\u5929\u6a21\u578b <p>=== \"Python\"   <pre><code>import operator\nimport json\n\nfrom typing import TypedDict\nfrom typing_extensions import Annotated\nfrom langgraph.graph import StateGraph, START\n\nfrom openai import AsyncOpenAI\n\nopenai_client = AsyncOpenAI()\nmodel_name = \"gpt-4o-mini\"\n\n\nasync def stream_tokens(model_name: str, messages: list[dict]):\n    response = await openai_client.chat.completions.create(\n        messages=messages, model=model_name, stream=True\n    )\n    role = None\n    async for chunk in response:\n        delta = chunk.choices[0].delta\n\n        if delta.role is not None:\n            role = delta.role\n\n        if delta.content:\n            yield {\"role\": role, \"content\": delta.content}\n\n\n# \u8fd9\u662f\u6211\u4eec\u7684\u5de5\u5177\nasync def get_items(place: str) -&gt; str:\n    \"\"\"Use this tool to list items one might find in a place you're asked about.\"\"\"\n    writer = get_stream_writer()\n    response = \"\"\n    async for msg_chunk in stream_tokens(\n        model_name,\n        [\n            {\n                \"role\": \"user\",\n                \"content\": (\n                    \"Can you tell me what kind of items \"\n                    f\"i might find in the following place: '{place}'. \"\n                    \"List at least 3 such items separating them by a comma. \"\n                    \"And include a brief description of each item.\"\n                ),\n            }\n        ],\n    ):\n        response += msg_chunk[\"content\"]\n        writer(msg_chunk)\n\n    return response\n\n\nclass State(TypedDict):\n    messages: Annotated[list[dict], operator.add]\n\n\n# \u8fd9\u662f\u5de5\u5177\u8c03\u7528\u56fe\u8282\u70b9\nasync def call_tool(state: State):\n    ai_message = state[\"messages\"][-1]\n    tool_call = ai_message[\"tool_calls\"][-1]\n\n    function_name = tool_call[\"function\"][\"name\"]\n    if function_name != \"get_items\":\n        raise ValueError(f\"Tool {function_name} not supported\")\n\n    function_arguments = tool_call[\"function\"][\"arguments\"]\n    arguments = json.loads(function_arguments)\n\n    function_response = await get_items(**arguments)\n    tool_message = {\n        \"tool_call_id\": tool_call[\"id\"],\n        \"role\": \"tool\",\n        \"name\": function_name,\n        \"content\": function_response,\n    }\n    return {\"messages\": [tool_message]}\n\n\ngraph = (\n    StateGraph(State)\n    .add_node(call_tool)\n    .add_edge(START, \"call_tool\")\n    .compile()\n)\n</code></pre></p> <p>\u8ba9\u6211\u4eec\u7528\u4e00\u4e2a\u5305\u542b\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f\u8c03\u7528\u56fe\uff1a</p> <pre><code>inputs = {\n    \"messages\": [\n        {\n            \"content\": None,\n            \"role\": \"assistant\",\n            \"tool_calls\": [\n                {\n                    \"id\": \"1\",\n                    \"function\": {\n                        \"arguments\": '{\"place\":\"bedroom\"}',\n                        \"name\": \"get_items\",\n                    },\n                    \"type\": \"function\",\n                }\n            ],\n        }\n    ]\n}\n\nasync for chunk in graph.astream(\n    inputs,\n    stream_mode=\"custom\",\n):\n    print(chunk[\"content\"], end=\"|\", flush=True)\n</code></pre> <p>=== \"JavaScript\"   <pre><code>import { StateGraph, START, LangGraphRunnableConfig } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\nimport OpenAI from \"openai\";\n\nconst openaiClient = new OpenAI();\nconst modelName = \"gpt-4o-mini\";\n\nasync function* streamTokens(modelName: string, messages: any[]) {\n  const response = await openaiClient.chat.completions.create({\n    messages,\n    model: modelName,\n    stream: true,\n  });\n\n  let role: string | null = null;\n  for await (const chunk of response) {\n    const delta = chunk.choices[0]?.delta;\n\n    if (delta?.role) {\n      role = delta.role;\n    }\n\n    if (delta?.content) {\n      yield { role, content: delta.content };\n    }\n  }\n}\n\n// \u8fd9\u662f\u6211\u4eec\u7684\u5de5\u5177\nconst getItems = tool(\n  async (input, config: LangGraphRunnableConfig) =&gt; {\n    let response = \"\";\n    for await (const msgChunk of streamTokens(\n      modelName,\n      [\n        {\n          role: \"user\",\n          content: `Can you tell me what kind of items i might find in the following place: '${input.place}'. List at least 3 such items separating them by a comma. And include a brief description of each item.`,\n        },\n      ]\n    )) {\n      response += msgChunk.content;\n      config.writer?.(msgChunk);\n    }\n    return response;\n  },\n  {\n    name: \"get_items\",\n    description: \"Use this tool to list items one might find in a place you're asked about.\",\n    schema: z.object({\n      place: z.string().describe(\"The place to look up items for.\"),\n    }),\n  }\n);\n\nconst State = z.object({\n  messages: z.array(z.any()),\n});\n\nconst graph = new StateGraph(State)\n  // \u8fd9\u662f\u5de5\u5177\u8c03\u7528\u56fe\u8282\u70b9\n  .addNode(\"callTool\", async (state) =&gt; {\n    const aiMessage = state.messages.at(-1);\n    const toolCall = aiMessage.tool_calls?.at(-1);\n\n    const functionName = toolCall?.function?.name;\n    if (functionName !== \"get_items\") {\n      throw new Error(`Tool ${functionName} not supported`);\n    }\n\n    const functionArguments = toolCall?.function?.arguments;\n    const args = JSON.parse(functionArguments);\n\n    const functionResponse = await getItems.invoke(args);\n    const toolMessage = {\n      tool_call_id: toolCall.id,\n      role: \"tool\",\n      name: functionName,\n      content: functionResponse,\n    };\n    return { messages: [toolMessage] };\n  })\n  .addEdge(START, \"callTool\")\n  .compile();\n</code></pre></p> <p>\u8ba9\u6211\u4eec\u7528\u4e00\u4e2a\u5305\u542b\u5de5\u5177\u8c03\u7528\u7684 AI \u6d88\u606f\u8c03\u7528\u56fe\uff1a</p> <pre><code>const inputs = {\n  messages: [\n    {\n      content: null,\n      role: \"assistant\",\n      tool_calls: [\n        {\n          id: \"1\",\n          function: {\n            arguments: '{\"place\":\"bedroom\"}',\n            name: \"get_items\",\n          },\n          type: \"function\",\n        }\n      ],\n    }\n  ]\n};\n\nfor await (const chunk of await graph.stream(\n  inputs,\n  { streamMode: \"custom\" }\n)) {\n  console.log(chunk.content + \"|\");\n}\n</code></pre>"},{"location":"how-tos/streaming/#_15","title":"\u4e3a\u7279\u5b9a\u804a\u5929\u6a21\u578b\u7981\u7528\u6d41\u5f0f\u4f20\u8f93","text":"<p>\u5982\u679c\u4f60\u7684\u5e94\u7528\u6df7\u5408\u4f7f\u7528\u652f\u6301\u6d41\u5f0f\u4f20\u8f93\u548c\u4e0d\u652f\u6301\u6d41\u5f0f\u4f20\u8f93\u7684\u6a21\u578b\uff0c\u4f60\u53ef\u80fd\u9700\u8981\u4e3a\u4e0d\u652f\u6301\u6d41\u5f0f\u4f20\u8f93\u7684\u6a21\u578b\u663e\u5f0f\u7981\u7528\u6d41\u5f0f\u4f20\u8f93\u3002</p> Python <p>\u521d\u59cb\u5316\u6a21\u578b\u65f6\u8bbe\u7f6e <code>disable_streaming=True</code>\u3002</p> init_chat_modelchat model interfaceJavaScript <pre><code>from langchain.chat_models import init_chat_model\n\nmodel = init_chat_model(\n    \"anthropic:claude-3-7-sonnet-latest\",\n    # highlight-next-line\n    disable_streaming=True # (1)!\n)\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>disable_streaming=True</code> \u4ee5\u7981\u7528\u804a\u5929\u6a21\u578b\u7684\u6d41\u5f0f\u4f20\u8f93\u3002</li> </ol> <pre><code>from langchain_openai import ChatOpenAI\n\nllm = ChatOpenAI(model=\"o1-preview\", disable_streaming=True) # (1)!\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>disable_streaming=True</code> \u4ee5\u7981\u7528\u804a\u5929\u6a21\u578b\u7684\u6d41\u5f0f\u4f20\u8f93\u3002</li> </ol> <p>\u521d\u59cb\u5316\u6a21\u578b\u65f6\u8bbe\u7f6e <code>streaming: false</code>\u3002</p> <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\n\nconst model = new ChatOpenAI({\n  model: \"o1-preview\",\n  streaming: false, // (1)!\n});\n</code></pre> Python"},{"location":"how-tos/streaming/#async","title":"Python &lt; 3.11 \u5f02\u6b65","text":"<p>\u5728 Python &lt; 3.11 \u7248\u672c\u4e2d\uff0casyncio tasks \u4e0d\u652f\u6301 <code>context</code> \u53c2\u6570\u3002 \u8fd9\u9650\u5236\u4e86 LangGraph \u81ea\u52a8\u4f20\u64ad\u4e0a\u4e0b\u6587\u7684\u80fd\u529b\uff0c\u5e76\u4ee5\u4e24\u79cd\u5173\u952e\u65b9\u5f0f\u5f71\u54cd LangGraph \u7684\u6d41\u5f0f\u673a\u5236\uff1a</p> <ol> <li>\u4f60 \u5fc5\u987b \u663e\u5f0f\u5c06 <code>RunnableConfig</code> \u4f20\u9012\u7ed9\u5f02\u6b65 LLM \u8c03\u7528\uff08\u4f8b\u5982 <code>ainvoke()</code>\uff09\uff0c\u56e0\u4e3a\u56de\u8c03\u4e0d\u4f1a\u81ea\u52a8\u4f20\u64ad\u3002</li> <li>\u4f60 \u4e0d\u80fd \u5728\u5f02\u6b65\u8282\u70b9\u6216\u5de5\u5177\u4e2d\u4f7f\u7528 <code>get_stream_writer()</code> \u2014 \u4f60\u5fc5\u987b\u76f4\u63a5\u4f20\u9012 <code>writer</code> \u53c2\u6570\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u5e26\u624b\u52a8\u914d\u7f6e\u7684\u5f02\u6b65 LLM \u8c03\u7528 <pre><code>from typing import TypedDict\nfrom langgraph.graph import START, StateGraph\nfrom langchain.chat_models import init_chat_model\n\nllm = init_chat_model(model=\"openai:gpt-4o-mini\")\n\nclass State(TypedDict):\n    topic: str\n    joke: str\n\nasync def call_model(state, config): # (1)!\n    topic = state[\"topic\"]\n    print(\"Generating joke...\")\n    joke_response = await llm.ainvoke(\n        [{\"role\": \"user\", \"content\": f\"Write a joke about {topic}\"}],\n        # highlight-next-line\n        config, # (2)!\n    )\n    return {\"joke\": joke_response.content}\n\ngraph = (\n    StateGraph(State)\n    .add_node(call_model)\n    .add_edge(START, \"call_model\")\n    .compile()\n)\n\nasync for chunk, metadata in graph.astream(\n    {\"topic\": \"ice cream\"},\n    # highlight-next-line\n    stream_mode=\"messages\", # (3)!\n):\n    if chunk.content:\n        print(chunk.content, end=\"|\", flush=True)\n</code></pre> <ol> <li>\u5728\u5f02\u6b65\u8282\u70b9\u51fd\u6570\u4e2d\u63a5\u53d7 <code>config</code> \u4f5c\u4e3a\u53c2\u6570\u3002</li> <li>\u5c06 <code>config</code> \u4f20\u9012\u7ed9 <code>llm.ainvoke()</code> \u4ee5\u786e\u4fdd\u6b63\u786e\u7684\u4e0a\u4e0b\u6587\u4f20\u64ad\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"messages\"</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93 LLM token\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u5e26\u6d41\u5199\u5165\u5668\u7684\u5f02\u6b65\u81ea\u5b9a\u4e49\u6d41\u5f0f\u4f20\u8f93 <pre><code>from typing import TypedDict\nfrom langgraph.types import StreamWriter\n\nclass State(TypedDict):\n      topic: str\n      joke: str\n\n# highlight-next-line\nasync def generate_joke(state: State, writer: StreamWriter): # (1)!\n      writer({\"custom_key\": \"Streaming custom data while generating a joke\"})\n      return {\"joke\": f\"This is a joke about {state['topic']}\"}\n\ngraph = (\n      StateGraph(State)\n      .add_node(generate_joke)\n      .add_edge(START, \"generate_joke\")\n      .compile()\n)\n\nasync for chunk in graph.astream(\n      {\"topic\": \"ice cream\"},\n      # highlight-next-line\n      stream_mode=\"custom\", # (2)!\n):\n      print(chunk)\n</code></pre> <ol> <li>\u5728\u5f02\u6b65\u8282\u70b9\u6216\u5de5\u5177\u7684\u51fd\u6570\u7b7e\u540d\u4e2d\u6dfb\u52a0 <code>writer</code> \u4f5c\u4e3a\u53c2\u6570\u3002LangGraph \u5c06\u81ea\u52a8\u5c06\u6d41\u5199\u5165\u5668\u4f20\u9012\u7ed9\u51fd\u6570\u3002</li> <li>\u8bbe\u7f6e <code>stream_mode=\"custom\"</code> \u4ee5\u5728\u6d41\u4e2d\u63a5\u6536\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> </ol>"},{"location":"how-tos/subgraph/","title":"\u4f7f\u7528\u5b50\u56fe","text":"<p>\u672c\u6307\u5357\u89e3\u91ca\u4e86\u4f7f\u7528 \u5b50\u56fe \u7684\u673a\u5236\u3002\u5b50\u56fe\u7684\u4e00\u4e2a\u5e38\u89c1\u5e94\u7528\u662f\u6784\u5efa \u591a\u667a\u80fd\u4ee3\u7406 \u7cfb\u7edf\u3002</p> <p>\u6dfb\u52a0\u5b50\u56fe\u65f6\uff0c\u4f60\u9700\u8981\u5b9a\u4e49\u7236\u56fe\u548c\u5b50\u56fe\u5982\u4f55\u901a\u4fe1\uff1a</p> <ul> <li>\u5171\u4eab\u72b6\u6001\u6a21\u5f0f \u2014 \u7236\u56fe\u548c\u5b50\u56fe\u5728\u5176\u72b6\u6001 \u6a21\u5f0f \u4e2d\u6709 \u5171\u4eab\u7684\u72b6\u6001\u952e</li> <li>\u4e0d\u540c\u72b6\u6001\u6a21\u5f0f \u2014 \u7236\u56fe\u548c\u5b50\u56fe \u6a21\u5f0f \u4e2d \u6ca1\u6709\u5171\u4eab\u7684\u72b6\u6001\u952e</li> </ul>"},{"location":"how-tos/subgraph/#_2","title":"\u8bbe\u7f6e","text":"Python <pre><code>pip install -U langgraph\n</code></pre> JavaScript <pre><code>npm install @langchain/langgraph\n</code></pre> <p>\u4e3a LangGraph \u5f00\u53d1\u8bbe\u7f6e LangSmith</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u9ad8 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u8ba9\u4f60\u53ef\u4ee5\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528 \u2014 \u5728 \u8fd9\u91cc \u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u5f00\u59cb\u7684\u4fe1\u606f\u3002</p>"},{"location":"how-tos/subgraph/#_3","title":"\u5171\u4eab\u72b6\u6001\u6a21\u5f0f","text":"<p>\u4e00\u4e2a\u5e38\u89c1\u7684\u60c5\u51b5\u662f\u7236\u56fe\u548c\u5b50\u56fe\u901a\u8fc7 \u6a21\u5f0f \u4e2d\u7684\u5171\u4eab\u72b6\u6001\u952e\uff08\u901a\u9053\uff09\u8fdb\u884c\u901a\u4fe1\u3002\u4f8b\u5982\uff0c\u5728 \u591a\u667a\u80fd\u4ee3\u7406 \u7cfb\u7edf\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u901a\u5e38\u901a\u8fc7\u5171\u4eab\u7684 messages \u952e\u8fdb\u884c\u901a\u4fe1\u3002</p> <p>\u5982\u679c\u4f60\u7684\u5b50\u56fe\u4e0e\u7236\u56fe\u5171\u4eab\u72b6\u6001\u952e\uff0c\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u5c06\u5176\u6dfb\u52a0\u5230\u56fe\u4e2d\uff1a</p> Python <ol> <li>\u5b9a\u4e49\u5b50\u56fe\u5de5\u4f5c\u6d41\uff08\u4e0b\u9762\u793a\u4f8b\u4e2d\u7684 <code>subgraph_builder</code>\uff09\u5e76\u7f16\u8bd1\u5b83</li> <li>\u5728\u5b9a\u4e49\u7236\u56fe\u5de5\u4f5c\u6d41\u65f6\uff0c\u5c06\u7f16\u8bd1\u540e\u7684\u5b50\u56fe\u4f20\u9012\u7ed9 <code>.add_node</code> \u65b9\u6cd5</li> </ol> <pre><code>from typing_extensions import TypedDict\nfrom langgraph.graph.state import StateGraph, START\n\nclass State(TypedDict):\n    foo: str\n\n# \u5b50\u56fe\n\ndef subgraph_node_1(state: State):\n    return {\"foo\": \"hi! \" + state[\"foo\"]}\n\nsubgraph_builder = StateGraph(State)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph = subgraph_builder.compile()\n\n# \u7236\u56fe\n\nbuilder = StateGraph(State)\nbuilder.add_node(\"node_1\", subgraph)\nbuilder.add_edge(START, \"node_1\")\ngraph = builder.compile()\n</code></pre> JavaScript <ol> <li>\u5b9a\u4e49\u5b50\u56fe\u5de5\u4f5c\u6d41\uff08\u4e0b\u9762\u793a\u4f8b\u4e2d\u7684 <code>subgraphBuilder</code>\uff09\u5e76\u7f16\u8bd1\u5b83</li> <li>\u5728\u5b9a\u4e49\u7236\u56fe\u5de5\u4f5c\u6d41\u65f6\uff0c\u5c06\u7f16\u8bd1\u540e\u7684\u5b50\u56fe\u4f20\u9012\u7ed9 <code>.addNode</code> \u65b9\u6cd5</li> </ol> <pre><code>import { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  foo: z.string(),\n});\n\n// \u5b50\u56fe\nconst subgraphBuilder = new StateGraph(State)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { foo: \"hi! \" + state.foo };\n  })\n  .addEdge(START, \"subgraphNode1\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u7236\u56fe\nconst builder = new StateGraph(State)\n  .addNode(\"node1\", subgraph)\n  .addEdge(START, \"node1\");\n\nconst graph = builder.compile();\n</code></pre> \u5b8c\u6574\u793a\u4f8b\uff1a\u5171\u4eab\u72b6\u6001\u6a21\u5f0f Python <pre><code>from typing_extensions import TypedDict\nfrom langgraph.graph.state import StateGraph, START\n\n# \u5b9a\u4e49\u5b50\u56fe\nclass SubgraphState(TypedDict):\n    foo: str  # (1)!\n    bar: str  # (2)!\n\ndef subgraph_node_1(state: SubgraphState):\n    return {\"bar\": \"bar\"}\n\ndef subgraph_node_2(state: SubgraphState):\n    # \u6ce8\u610f\u8fd9\u4e2a\u8282\u70b9\u4f7f\u7528\u7684\u72b6\u6001\u952e\uff08'bar'\uff09\u53ea\u5728\u5b50\u56fe\u4e2d\u53ef\u7528\n    # \u5e76\u4e14\u5728\u5171\u4eab\u72b6\u6001\u952e\uff08'foo'\uff09\u4e0a\u53d1\u9001\u66f4\u65b0\n    return {\"foo\": state[\"foo\"] + state[\"bar\"]}\n\nsubgraph_builder = StateGraph(SubgraphState)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_node(subgraph_node_2)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph_builder.add_edge(\"subgraph_node_1\", \"subgraph_node_2\")\nsubgraph = subgraph_builder.compile()\n\n# \u5b9a\u4e49\u7236\u56fe\nclass ParentState(TypedDict):\n    foo: str\n\ndef node_1(state: ParentState):\n    return {\"foo\": \"hi! \" + state[\"foo\"]}\n\nbuilder = StateGraph(ParentState)\nbuilder.add_node(\"node_1\", node_1)\nbuilder.add_node(\"node_2\", subgraph)\nbuilder.add_edge(START, \"node_1\")\nbuilder.add_edge(\"node_1\", \"node_2\")\ngraph = builder.compile()\n\nfor chunk in graph.stream({\"foo\": \"foo\"}):\n    print(chunk)\n</code></pre> <ol> <li>\u6b64\u952e\u4e0e\u7236\u56fe\u72b6\u6001\u5171\u4eab</li> <li>\u6b64\u952e\u662f <code>SubgraphState</code> \u7684\u79c1\u6709\u952e\uff0c\u5bf9\u7236\u56fe\u4e0d\u53ef\u89c1</li> </ol> <pre><code>{'node_1': {'foo': 'hi! foo'}}\n{'node_2': {'foo': 'hi! foobar'}}\n</code></pre> JavaScript <pre><code>import { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5b50\u56fe\nconst SubgraphState = z.object({\n  foo: z.string(),  // (1)!\n  bar: z.string(),  // (2)!\n});\n\nconst subgraphBuilder = new StateGraph(SubgraphState)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { bar: \"bar\" };\n  })\n  .addNode(\"subgraphNode2\", (state) =&gt; {\n    // \u6ce8\u610f\u8fd9\u4e2a\u8282\u70b9\u4f7f\u7528\u7684\u72b6\u6001\u952e\uff08'bar'\uff09\u53ea\u5728\u5b50\u56fe\u4e2d\u53ef\u7528\n    // \u5e76\u4e14\u5728\u5171\u4eab\u72b6\u6001\u952e\uff08'foo'\uff09\u4e0a\u53d1\u9001\u66f4\u65b0\n    return { foo: state.foo + state.bar };\n  })\n  .addEdge(START, \"subgraphNode1\")\n  .addEdge(\"subgraphNode1\", \"subgraphNode2\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u5b9a\u4e49\u7236\u56fe\nconst ParentState = z.object({\n  foo: z.string(),\n});\n\nconst builder = new StateGraph(ParentState)\n  .addNode(\"node1\", (state) =&gt; {\n    return { foo: \"hi! \" + state.foo };\n  })\n  .addNode(\"node2\", subgraph)\n  .addEdge(START, \"node1\")\n  .addEdge(\"node1\", \"node2\");\n\nconst graph = builder.compile();\n\nfor await (const chunk of await graph.stream({ foo: \"foo\" })) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u6b64\u952e\u4e0e\u7236\u56fe\u72b6\u6001\u5171\u4eab</li> <li>\u6b64\u952e\u662f <code>SubgraphState</code> \u7684\u79c1\u6709\u952e\uff0c\u5bf9\u7236\u56fe\u4e0d\u53ef\u89c1</li> </ol> <pre><code>{ node1: { foo: 'hi! foo' } }\n{ node2: { foo: 'hi! foobar' } }\n</code></pre>"},{"location":"how-tos/subgraph/#_4","title":"\u4e0d\u540c\u72b6\u6001\u6a21\u5f0f","text":"<p>\u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u7cfb\u7edf\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u5b9a\u4e49\u4e0e\u7236\u56fe\u5177\u6709 \u5b8c\u5168\u4e0d\u540c\u6a21\u5f0f \u7684\u5b50\u56fe\uff08\u6ca1\u6709\u5171\u4eab\u952e\uff09\u3002\u4f8b\u5982\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\u4e3a \u591a\u667a\u80fd\u4ee3\u7406 \u7cfb\u7edf\u4e2d\u7684\u6bcf\u4e2a\u667a\u80fd\u4ee3\u7406\u4fdd\u7559\u79c1\u6709\u7684\u6d88\u606f\u5386\u53f2\u3002</p> <p>\u5982\u679c\u4f60\u7684\u5e94\u7528\u662f\u8fd9\u79cd\u60c5\u51b5\uff0c\u4f60\u9700\u8981\u5b9a\u4e49\u4e00\u4e2a \u8c03\u7528\u5b50\u56fe\u7684\u8282\u70b9\u51fd\u6570\u3002\u8fd9\u4e2a\u51fd\u6570\u9700\u8981\u5728\u8c03\u7528\u5b50\u56fe\u4e4b\u524d\u5c06\u8f93\u5165\uff08\u7236\uff09\u72b6\u6001\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001\uff0c\u5e76\u5728\u4ece\u8282\u70b9\u8fd4\u56de\u72b6\u6001\u66f4\u65b0\u4e4b\u524d\u5c06\u7ed3\u679c\u8f6c\u6362\u56de\u7236\u72b6\u6001\u3002</p> Python <pre><code>from typing_extensions import TypedDict\nfrom langgraph.graph.state import StateGraph, START\n\nclass SubgraphState(TypedDict):\n    bar: str\n\n# \u5b50\u56fe\n\ndef subgraph_node_1(state: SubgraphState):\n    return {\"bar\": \"hi! \" + state[\"bar\"]}\n\nsubgraph_builder = StateGraph(SubgraphState)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph = subgraph_builder.compile()\n\n# \u7236\u56fe\n\nclass State(TypedDict):\n    foo: str\n\ndef call_subgraph(state: State):\n    subgraph_output = subgraph.invoke({\"bar\": state[\"foo\"]})  # (1)!\n    return {\"foo\": subgraph_output[\"bar\"]}  # (2)!\n\nbuilder = StateGraph(State)\nbuilder.add_node(\"node_1\", call_subgraph)\nbuilder.add_edge(START, \"node_1\")\ngraph = builder.compile()\n</code></pre> <ol> <li>\u5c06\u72b6\u6001\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001</li> <li>\u5c06\u54cd\u5e94\u8f6c\u6362\u56de\u7236\u72b6\u6001</li> </ol> JavaScript <pre><code>import { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst SubgraphState = z.object({\n  bar: z.string(),\n});\n\n// \u5b50\u56fe\nconst subgraphBuilder = new StateGraph(SubgraphState)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { bar: \"hi! \" + state.bar };\n  })\n  .addEdge(START, \"subgraphNode1\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u7236\u56fe\nconst State = z.object({\n  foo: z.string(),\n});\n\nconst builder = new StateGraph(State)\n  .addNode(\"node1\", async (state) =&gt; {\n    const subgraphOutput = await subgraph.invoke({ bar: state.foo }); // (1)!\n    return { foo: subgraphOutput.bar }; // (2)!\n  })\n  .addEdge(START, \"node1\");\n\nconst graph = builder.compile();\n</code></pre> <ol> <li>\u5c06\u72b6\u6001\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001</li> <li>\u5c06\u54cd\u5e94\u8f6c\u6362\u56de\u7236\u72b6\u6001</li> </ol> \u5b8c\u6574\u793a\u4f8b\uff1a\u4e0d\u540c\u72b6\u6001\u6a21\u5f0f Python <pre><code>from typing_extensions import TypedDict\nfrom langgraph.graph.state import StateGraph, START\n\n# \u5b9a\u4e49\u5b50\u56fe\nclass SubgraphState(TypedDict):\n    # \u6ce8\u610f\u8fd9\u4e9b\u952e\u90fd\u4e0d\u4e0e\u7236\u56fe\u72b6\u6001\u5171\u4eab\n    bar: str\n    baz: str\n\ndef subgraph_node_1(state: SubgraphState):\n    return {\"baz\": \"baz\"}\n\ndef subgraph_node_2(state: SubgraphState):\n    return {\"bar\": state[\"bar\"] + state[\"baz\"]}\n\nsubgraph_builder = StateGraph(SubgraphState)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_node(subgraph_node_2)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph_builder.add_edge(\"subgraph_node_1\", \"subgraph_node_2\")\nsubgraph = subgraph_builder.compile()\n\n# \u5b9a\u4e49\u7236\u56fe\nclass ParentState(TypedDict):\n    foo: str\n\ndef node_1(state: ParentState):\n    return {\"foo\": \"hi! \" + state[\"foo\"]}\n\ndef node_2(state: ParentState):\n    response = subgraph.invoke({\"bar\": state[\"foo\"]})  # (1)!\n    return {\"foo\": response[\"bar\"]}  # (2)!\n\n\nbuilder = StateGraph(ParentState)\nbuilder.add_node(\"node_1\", node_1)\nbuilder.add_node(\"node_2\", node_2)\nbuilder.add_edge(START, \"node_1\")\nbuilder.add_edge(\"node_1\", \"node_2\")\ngraph = builder.compile()\n\nfor chunk in graph.stream({\"foo\": \"foo\"}, subgraphs=True):\n    print(chunk)\n</code></pre> <ol> <li>\u5c06\u72b6\u6001\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001</li> <li>\u5c06\u54cd\u5e94\u8f6c\u6362\u56de\u7236\u72b6\u6001</li> </ol> <pre><code>((), {'node_1': {'foo': 'hi! foo'}})\n(('node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7',), {'grandchild_1': {'my_grandchild_key': 'hi Bob, how are you'}})\n(('node_2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7',), {'grandchild_2': {'bar': 'hi! foobaz'}})\n((), {'node_2': {'foo': 'hi! foobaz'}})\n</code></pre> JavaScript <pre><code>import { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5b50\u56fe\nconst SubgraphState = z.object({\n  // \u6ce8\u610f\u8fd9\u4e9b\u952e\u90fd\u4e0d\u4e0e\u7236\u56fe\u72b6\u6001\u5171\u4eab\n  bar: z.string(),\n  baz: z.string(),\n});\n\nconst subgraphBuilder = new StateGraph(SubgraphState)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { baz: \"baz\" };\n  })\n  .addNode(\"subgraphNode2\", (state) =&gt; {\n    return { bar: state.bar + state.baz };\n  })\n  .addEdge(START, \"subgraphNode1\")\n  .addEdge(\"subgraphNode1\", \"subgraphNode2\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u5b9a\u4e49\u7236\u56fe\nconst ParentState = z.object({\n  foo: z.string(),\n});\n\nconst builder = new StateGraph(ParentState)\n  .addNode(\"node1\", (state) =&gt; {\n    return { foo: \"hi! \" + state.foo };\n  })\n  .addNode(\"node2\", async (state) =&gt; {\n    const response = await subgraph.invoke({ bar: state.foo }); // (1)!\n    return { foo: response.bar }; // (2)!\n  })\n  .addEdge(START, \"node1\")\n  .addEdge(\"node1\", \"node2\");\n\nconst graph = builder.compile();\n\nfor await (const chunk of await graph.stream(\n  { foo: \"foo\" },\n  { subgraphs: true }\n)) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u5c06\u72b6\u6001\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001</li> <li>\u5c06\u54cd\u5e94\u8f6c\u6362\u56de\u7236\u72b6\u6001</li> </ol> <pre><code>[[], { node1: { foo: 'hi! foo' } }]\n[['node2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7'], { subgraphNode1: { baz: 'baz' } }]\n[['node2:9c36dd0f-151a-cb42-cbad-fa2f851f9ab7'], { subgraphNode2: { bar: 'hi! foobaz' } }]\n[[], { node2: { foo: 'hi! foobaz' } }]\n</code></pre> \u5b8c\u6574\u793a\u4f8b\uff1a\u4e0d\u540c\u72b6\u6001\u6a21\u5f0f\uff08\u4e24\u5c42\u5b50\u56fe\uff09 <p>\u8fd9\u662f\u4e00\u4e2a\u4e24\u5c42\u5b50\u56fe\u7684\u793a\u4f8b\uff1a\u7236\u56fe -&gt; \u5b50\u56fe -&gt; \u5b59\u56fe\u3002</p> Python <pre><code># \u5b59\u56fe\nfrom typing_extensions import TypedDict\nfrom langgraph.graph.state import StateGraph, START, END\n\nclass GrandChildState(TypedDict):\n    my_grandchild_key: str\n\ndef grandchild_1(state: GrandChildState) -&gt; GrandChildState:\n    # \u6ce8\u610f\uff1a\u5b50\u56fe\u6216\u7236\u56fe\u7684\u952e\u5728\u8fd9\u91cc\u4e0d\u53ef\u8bbf\u95ee\n    return {\"my_grandchild_key\": state[\"my_grandchild_key\"] + \", how are you\"}\n\n\ngrandchild = StateGraph(GrandChildState)\ngrandchild.add_node(\"grandchild_1\", grandchild_1)\n\ngrandchild.add_edge(START, \"grandchild_1\")\ngrandchild.add_edge(\"grandchild_1\", END)\n\ngrandchild_graph = grandchild.compile()\n\n# \u5b50\u56fe\nclass ChildState(TypedDict):\n    my_child_key: str\n\ndef call_grandchild_graph(state: ChildState) -&gt; ChildState:\n    # \u6ce8\u610f\uff1a\u7236\u56fe\u6216\u5b59\u56fe\u7684\u952e\u5728\u8fd9\u91cc\u4e0d\u53ef\u8bbf\u95ee\n    grandchild_graph_input = {\"my_grandchild_key\": state[\"my_child_key\"]}  # (1)!\n    grandchild_graph_output = grandchild_graph.invoke(grandchild_graph_input)\n    return {\"my_child_key\": grandchild_graph_output[\"my_grandchild_key\"] + \" today?\"}  # (2)!\n\nchild = StateGraph(ChildState)\nchild.add_node(\"child_1\", call_grandchild_graph)  # (3)!\nchild.add_edge(START, \"child_1\")\nchild.add_edge(\"child_1\", END)\nchild_graph = child.compile()\n\n# \u7236\u56fe\nclass ParentState(TypedDict):\n    my_key: str\n\ndef parent_1(state: ParentState) -&gt; ParentState:\n    # \u6ce8\u610f\uff1a\u5b50\u56fe\u6216\u5b59\u56fe\u7684\u952e\u5728\u8fd9\u91cc\u4e0d\u53ef\u8bbf\u95ee\n    return {\"my_key\": \"hi \" + state[\"my_key\"]}\n\ndef parent_2(state: ParentState) -&gt; ParentState:\n    return {\"my_key\": state[\"my_key\"] + \" bye!\"}\n\ndef call_child_graph(state: ParentState) -&gt; ParentState:\n    child_graph_input = {\"my_child_key\": state[\"my_key\"]}  # (4)!\n    child_graph_output = child_graph.invoke(child_graph_input)\n    return {\"my_key\": child_graph_output[\"my_child_key\"]}  # (5)!\n\nparent = StateGraph(ParentState)\nparent.add_node(\"parent_1\", parent_1)\nparent.add_node(\"child\", call_child_graph)  # (6)!\nparent.add_node(\"parent_2\", parent_2)\n\nparent.add_edge(START, \"parent_1\")\nparent.add_edge(\"parent_1\", \"child\")\nparent.add_edge(\"child\", \"parent_2\")\nparent.add_edge(\"parent_2\", END)\n\nparent_graph = parent.compile()\n\nfor chunk in parent_graph.stream({\"my_key\": \"Bob\"}, subgraphs=True):\n    print(chunk)\n</code></pre> <ol> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_child_key</code>\uff09\u8f6c\u6362\u4e3a\u5b59\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_grandchild_key</code>\uff09</li> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u5b59\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_grandchild_key</code>\uff09\u8f6c\u6362\u56de\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_child_key</code>\uff09</li> <li>\u6211\u4eec\u5728\u8fd9\u91cc\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u800c\u4e0d\u662f\u76f4\u63a5\u4f20\u9012\u7f16\u8bd1\u540e\u7684\u56fe\uff08<code>grandchild_graph</code>\uff09</li> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u7236\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_key</code>\uff09\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_child_key</code>\uff09</li> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_child_key</code>\uff09\u8f6c\u6362\u56de\u7236\u56fe\u72b6\u6001\u901a\u9053\uff08<code>my_key</code>\uff09</li> <li>\u6211\u4eec\u5728\u8fd9\u91cc\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u800c\u4e0d\u662f\u76f4\u63a5\u4f20\u9012\u7f16\u8bd1\u540e\u7684\u56fe\uff08<code>child_graph</code>\uff09</li> </ol> <pre><code>((), {'parent_1': {'my_key': 'hi Bob'}})\n(('child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b', 'child_1:781bb3b1-3971-84ce-810b-acf819a03f9c'), {'grandchild_1': {'my_grandchild_key': 'hi Bob, how are you'}})\n(('child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b',), {'child_1': {'my_child_key': 'hi Bob, how are you today?'}})\n((), {'child': {'my_key': 'hi Bob, how are you today?'}})\n((), {'parent_2': {'my_key': 'hi Bob, how are you today? bye!'}})\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b59\u56fe\nconst GrandChildState = z.object({\n  myGrandchildKey: z.string(),\n});\n\nconst grandchild = new StateGraph(GrandChildState)\n  .addNode(\"grandchild1\", (state) =&gt; {\n    // \u6ce8\u610f\uff1a\u5b50\u56fe\u6216\u7236\u56fe\u7684\u952e\u5728\u8fd9\u91cc\u4e0d\u53ef\u8bbf\u95ee\n    return { myGrandchildKey: state.myGrandchildKey + \", how are you\" };\n  })\n  .addEdge(START, \"grandchild1\")\n  .addEdge(\"grandchild1\", END);\n\nconst grandchildGraph = grandchild.compile();\n\n// \u5b50\u56fe\nconst ChildState = z.object({\n  myChildKey: z.string(),\n});\n\nconst child = new StateGraph(ChildState)\n  .addNode(\"child1\", async (state) =&gt; {\n    // \u6ce8\u610f\uff1a\u7236\u56fe\u6216\u5b59\u56fe\u7684\u952e\u5728\u8fd9\u91cc\u4e0d\u53ef\u8bbf\u95ee\n    const grandchildGraphInput = { myGrandchildKey: state.myChildKey }; // (1)!\n    const grandchildGraphOutput = await grandchildGraph.invoke(grandchildGraphInput);\n    return { myChildKey: grandchildGraphOutput.myGrandchildKey + \" today?\" }; // (2)!\n  }) // (3)!\n  .addEdge(START, \"child1\")\n  .addEdge(\"child1\", END);\n\nconst childGraph = child.compile();\n\n// \u7236\u56fe\nconst ParentState = z.object({\n  myKey: z.string(),\n});\n\nconst parent = new StateGraph(ParentState)\n  .addNode(\"parent1\", (state) =&gt; {\n    // \u6ce8\u610f\uff1a\u5b50\u56fe\u6216\u5b59\u56fe\u7684\u952e\u5728\u8fd9\u91cc\u4e0d\u53ef\u8bbf\u95ee\n    return { myKey: \"hi \" + state.myKey };\n  })\n  .addNode(\"child\", async (state) =&gt; {\n    const childGraphInput = { myChildKey: state.myKey }; // (4)!\n    const childGraphOutput = await childGraph.invoke(childGraphInput);\n    return { myKey: childGraphOutput.myChildKey }; // (5)!\n  }) // (6)!\n  .addNode(\"parent2\", (state) =&gt; {\n    return { myKey: state.myKey + \" bye!\" };\n  })\n  .addEdge(START, \"parent1\")\n  .addEdge(\"parent1\", \"child\")\n  .addEdge(\"child\", \"parent2\")\n  .addEdge(\"parent2\", END);\n\nconst parentGraph = parent.compile();\n\nfor await (const chunk of await parentGraph.stream(\n  { myKey: \"Bob\" },\n  { subgraphs: true }\n)) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myChildKey</code>\uff09\u8f6c\u6362\u4e3a\u5b59\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myGrandchildKey</code>\uff09</li> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u5b59\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myGrandchildKey</code>\uff09\u8f6c\u6362\u56de\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myChildKey</code>\uff09</li> <li>\u6211\u4eec\u5728\u8fd9\u91cc\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u800c\u4e0d\u662f\u76f4\u63a5\u4f20\u9012\u7f16\u8bd1\u540e\u7684\u56fe\uff08<code>grandchildGraph</code>\uff09</li> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u7236\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myKey</code>\uff09\u8f6c\u6362\u4e3a\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myChildKey</code>\uff09</li> <li>\u6211\u4eec\u5c06\u72b6\u6001\u4ece\u5b50\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myChildKey</code>\uff09\u8f6c\u6362\u56de\u7236\u56fe\u72b6\u6001\u901a\u9053\uff08<code>myKey</code>\uff09</li> <li>\u6211\u4eec\u5728\u8fd9\u91cc\u4f20\u9012\u4e00\u4e2a\u51fd\u6570\u800c\u4e0d\u662f\u76f4\u63a5\u4f20\u9012\u7f16\u8bd1\u540e\u7684\u56fe\uff08<code>childGraph</code>\uff09</li> </ol> <pre><code>[[], { parent1: { myKey: 'hi Bob' } }]\n[['child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b', 'child1:781bb3b1-3971-84ce-810b-acf819a03f9c'], { grandchild1: { myGrandchildKey: 'hi Bob, how are you' } }]\n[['child:2e26e9ce-602f-862c-aa66-1ea5a4655e3b'], { child1: { myChildKey: 'hi Bob, how are you today?' } }]\n[[], { child: { myKey: 'hi Bob, how are you today?' } }]\n[[], { parent2: { myKey: 'hi Bob, how are you today? bye!' } }]\n</code></pre>"},{"location":"how-tos/subgraph/#_5","title":"\u6dfb\u52a0\u6301\u4e45\u5316","text":"<p>\u4f60\u53ea\u9700\u8981 \u5728\u7f16\u8bd1\u7236\u56fe\u65f6\u63d0\u4f9b\u68c0\u67e5\u70b9\u5668\u3002LangGraph \u4f1a\u81ea\u52a8\u5c06\u68c0\u67e5\u70b9\u5668\u4f20\u64ad\u5230\u5b50\u56fe\u3002</p> Python <pre><code>from langgraph.graph import START, StateGraph\nfrom langgraph.checkpoint.memory import MemorySaver\nfrom typing_extensions import TypedDict\n\nclass State(TypedDict):\n    foo: str\n\n# \u5b50\u56fe\n\ndef subgraph_node_1(state: State):\n    return {\"foo\": state[\"foo\"] + \"bar\"}\n\nsubgraph_builder = StateGraph(State)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph = subgraph_builder.compile()\n\n# \u7236\u56fe\n\nbuilder = StateGraph(State)\nbuilder.add_node(\"node_1\", subgraph)\nbuilder.add_edge(START, \"node_1\")\n\ncheckpointer = MemorySaver()\ngraph = builder.compile(checkpointer=checkpointer)\n</code></pre> JavaScript <pre><code>import { StateGraph, START, MemorySaver } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  foo: z.string(),\n});\n\n// \u5b50\u56fe\nconst subgraphBuilder = new StateGraph(State)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { foo: state.foo + \"bar\" };\n  })\n  .addEdge(START, \"subgraphNode1\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u7236\u56fe\nconst builder = new StateGraph(State)\n  .addNode(\"node1\", subgraph)\n  .addEdge(START, \"node1\");\n\nconst checkpointer = new MemorySaver();\nconst graph = builder.compile({ checkpointer });\n</code></pre> <p>\u5982\u679c\u4f60\u5e0c\u671b\u5b50\u56fe \u62e5\u6709\u81ea\u5df1\u7684\u8bb0\u5fc6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9002\u5f53\u7684\u68c0\u67e5\u70b9\u5668\u9009\u9879\u7f16\u8bd1\u5b83\u3002\u8fd9\u5728 \u591a\u667a\u80fd\u4ee3\u7406 \u7cfb\u7edf\u4e2d\u5f88\u6709\u7528\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u667a\u80fd\u4ee3\u7406\u8ddf\u8e2a\u5b83\u4eec\u7684\u5185\u90e8\u6d88\u606f\u5386\u53f2\uff1a</p> Python <pre><code>subgraph_builder = StateGraph(...)\nsubgraph = subgraph_builder.compile(checkpointer=True)\n</code></pre> JavaScript <pre><code>const subgraphBuilder = new StateGraph(...)\nconst subgraph = subgraphBuilder.compile({ checkpointer: true });\n</code></pre>"},{"location":"how-tos/subgraph/#_6","title":"\u67e5\u770b\u5b50\u56fe\u72b6\u6001","text":"<p>\u5f53\u4f60\u542f\u7528 \u6301\u4e45\u5316 \u65f6\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u9002\u5f53\u7684\u65b9\u6cd5 \u68c0\u67e5\u56fe\u72b6\u6001\uff08\u68c0\u67e5\u70b9\uff09\u3002\u8981\u67e5\u770b\u5b50\u56fe\u72b6\u6001\uff0c\u53ef\u4ee5\u4f7f\u7528 subgraphs \u9009\u9879\u3002</p> Python <p>\u4f60\u53ef\u4ee5\u901a\u8fc7 <code>graph.get_state(config)</code> \u68c0\u67e5\u56fe\u72b6\u6001\u3002\u8981\u67e5\u770b\u5b50\u56fe\u72b6\u6001\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>graph.get_state(config, subgraphs=True)</code>\u3002</p> JavaScript <p>\u4f60\u53ef\u4ee5\u901a\u8fc7 <code>graph.getState(config)</code> \u68c0\u67e5\u56fe\u72b6\u6001\u3002\u8981\u67e5\u770b\u5b50\u56fe\u72b6\u6001\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>graph.getState(config, { subgraphs: true })</code>\u3002</p> <p>\u4ec5\u5728\u4e2d\u65ad\u65f6\u53ef\u7528</p> <p>\u5b50\u56fe\u72b6\u6001\u53ea\u80fd\u5728 \u5b50\u56fe\u88ab\u4e2d\u65ad\u65f6 \u67e5\u770b\u3002\u4e00\u65e6\u6062\u590d\u56fe\uff0c\u4f60\u5c06\u65e0\u6cd5\u8bbf\u95ee\u5b50\u56fe\u72b6\u6001\u3002</p> \u67e5\u770b\u4e2d\u65ad\u7684\u5b50\u56fe\u72b6\u6001 Python <pre><code>from langgraph.graph import START, StateGraph\nfrom langgraph.checkpoint.memory import MemorySaver\nfrom langgraph.types import interrupt, Command\nfrom typing_extensions import TypedDict\n\nclass State(TypedDict):\n    foo: str\n\n# \u5b50\u56fe\n\ndef subgraph_node_1(state: State):\n    value = interrupt(\"Provide value:\")\n    return {\"foo\": state[\"foo\"] + value}\n\nsubgraph_builder = StateGraph(State)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\n\nsubgraph = subgraph_builder.compile()\n\n# \u7236\u56fe\n\nbuilder = StateGraph(State)\nbuilder.add_node(\"node_1\", subgraph)\nbuilder.add_edge(START, \"node_1\")\n\ncheckpointer = MemorySaver()\ngraph = builder.compile(checkpointer=checkpointer)\n\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\n\ngraph.invoke({\"foo\": \"\"}, config)\nparent_state = graph.get_state(config)\nsubgraph_state = graph.get_state(config, subgraphs=True).tasks[0].state  # (1)!\n\n# \u6062\u590d\u5b50\u56fe\ngraph.invoke(Command(resume=\"bar\"), config)\n</code></pre> <ol> <li>\u8fd9\u53ea\u5728\u5b50\u56fe\u88ab\u4e2d\u65ad\u65f6\u53ef\u7528\u3002\u4e00\u65e6\u6062\u590d\u56fe\uff0c\u4f60\u5c06\u65e0\u6cd5\u8bbf\u95ee\u5b50\u56fe\u72b6\u6001\u3002</li> </ol> JavaScript <pre><code>import { StateGraph, START, MemorySaver, interrupt, Command } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  foo: z.string(),\n});\n\n// \u5b50\u56fe\nconst subgraphBuilder = new StateGraph(State)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    const value = interrupt(\"Provide value:\");\n    return { foo: state.foo + value };\n  })\n  .addEdge(START, \"subgraphNode1\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u7236\u56fe\nconst builder = new StateGraph(State)\n  .addNode(\"node1\", subgraph)\n  .addEdge(START, \"node1\");\n\nconst checkpointer = new MemorySaver();\nconst graph = builder.compile({ checkpointer });\n\nconst config = { configurable: { thread_id: \"1\" } };\n\nawait graph.invoke({ foo: \"\" }, config);\nconst parentState = await graph.getState(config);\nconst subgraphState = (await graph.getState(config, { subgraphs: true })).tasks[0].state; // (1)!\n\n// \u6062\u590d\u5b50\u56fe\nawait graph.invoke(new Command({ resume: \"bar\" }), config);\n</code></pre> <ol> <li>\u8fd9\u53ea\u5728\u5b50\u56fe\u88ab\u4e2d\u65ad\u65f6\u53ef\u7528\u3002\u4e00\u65e6\u6062\u590d\u56fe\uff0c\u4f60\u5c06\u65e0\u6cd5\u8bbf\u95ee\u5b50\u56fe\u72b6\u6001\u3002</li> </ol>"},{"location":"how-tos/subgraph/#_7","title":"\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u8f93\u51fa","text":"<p>\u8981\u5728\u6d41\u5f0f\u8f93\u51fa\u4e2d\u5305\u542b\u5b50\u56fe\u7684\u8f93\u51fa\uff0c\u4f60\u53ef\u4ee5\u5728\u7236\u56fe\u7684 stream \u65b9\u6cd5\u4e2d\u8bbe\u7f6e subgraphs \u9009\u9879\u3002\u8fd9\u5c06\u6d41\u5f0f\u4f20\u8f93\u7236\u56fe\u548c\u4efb\u4f55\u5b50\u56fe\u7684\u8f93\u51fa\u3002</p> Python <pre><code>for chunk in graph.stream(\n    {\"foo\": \"foo\"},\n    subgraphs=True, # (1)!\n    stream_mode=\"updates\",\n):\n    print(chunk)\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>subgraphs=True</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> JavaScript <pre><code>for await (const chunk of await graph.stream(\n  { foo: \"foo\" },\n  {\n    subgraphs: true, // (1)!\n    streamMode: \"updates\",\n  }\n)) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>subgraphs: true</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> \u4ece\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93 Python <pre><code>from typing_extensions import TypedDict\nfrom langgraph.graph.state import StateGraph, START\n\n# \u5b9a\u4e49\u5b50\u56fe\nclass SubgraphState(TypedDict):\n    foo: str\n    bar: str\n\ndef subgraph_node_1(state: SubgraphState):\n    return {\"bar\": \"bar\"}\n\ndef subgraph_node_2(state: SubgraphState):\n    # \u6ce8\u610f\u8fd9\u4e2a\u8282\u70b9\u4f7f\u7528\u7684\u72b6\u6001\u952e\uff08'bar'\uff09\u53ea\u5728\u5b50\u56fe\u4e2d\u53ef\u7528\n    # \u5e76\u4e14\u5728\u5171\u4eab\u72b6\u6001\u952e\uff08'foo'\uff09\u4e0a\u53d1\u9001\u66f4\u65b0\n    return {\"foo\": state[\"foo\"] + state[\"bar\"]}\n\nsubgraph_builder = StateGraph(SubgraphState)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_node(subgraph_node_2)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\nsubgraph_builder.add_edge(\"subgraph_node_1\", \"subgraph_node_2\")\nsubgraph = subgraph_builder.compile()\n\n# \u5b9a\u4e49\u7236\u56fe\nclass ParentState(TypedDict):\n    foo: str\n\ndef node_1(state: ParentState):\n    return {\"foo\": \"hi! \" + state[\"foo\"]}\n\nbuilder = StateGraph(ParentState)\nbuilder.add_node(\"node_1\", node_1)\nbuilder.add_node(\"node_2\", subgraph)\nbuilder.add_edge(START, \"node_1\")\nbuilder.add_edge(\"node_1\", \"node_2\")\ngraph = builder.compile()\n\nfor chunk in graph.stream(\n    {\"foo\": \"foo\"},\n    stream_mode=\"updates\",\n    subgraphs=True, # (1)!\n):\n    print(chunk)\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>subgraphs=True</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> <pre><code>((), {'node_1': {'foo': 'hi! foo'}})\n(('node_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7',), {'subgraph_node_1': {'bar': 'bar'}})\n(('node_2:e58e5673-a661-ebb0-70d4-e298a7fc28b7',), {'subgraph_node_2': {'foo': 'hi! foobar'}})\n((), {'node_2': {'foo': 'hi! foobar'}})\n</code></pre> JavaScript <pre><code>import { StateGraph, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5b50\u56fe\nconst SubgraphState = z.object({\n  foo: z.string(),\n  bar: z.string(),\n});\n\nconst subgraphBuilder = new StateGraph(SubgraphState)\n  .addNode(\"subgraphNode1\", (state) =&gt; {\n    return { bar: \"bar\" };\n  })\n  .addNode(\"subgraphNode2\", (state) =&gt; {\n    // \u6ce8\u610f\u8fd9\u4e2a\u8282\u70b9\u4f7f\u7528\u7684\u72b6\u6001\u952e\uff08'bar'\uff09\u53ea\u5728\u5b50\u56fe\u4e2d\u53ef\u7528\n    // \u5e76\u4e14\u5728\u5171\u4eab\u72b6\u6001\u952e\uff08'foo'\uff09\u4e0a\u53d1\u9001\u66f4\u65b0\n    return { foo: state.foo + state.bar };\n  })\n  .addEdge(START, \"subgraphNode1\")\n  .addEdge(\"subgraphNode1\", \"subgraphNode2\");\n\nconst subgraph = subgraphBuilder.compile();\n\n// \u5b9a\u4e49\u7236\u56fe\nconst ParentState = z.object({\n  foo: z.string(),\n});\n\nconst builder = new StateGraph(ParentState)\n  .addNode(\"node1\", (state) =&gt; {\n    return { foo: \"hi! \" + state.foo };\n  })\n  .addNode(\"node2\", subgraph)\n  .addEdge(START, \"node1\")\n  .addEdge(\"node1\", \"node2\");\n\nconst graph = builder.compile();\n\nfor await (const chunk of await graph.stream(\n  { foo: \"foo\" },\n  {\n    streamMode: \"updates\",\n    subgraphs: true, // (1)!\n  }\n)) {\n  console.log(chunk);\n}\n</code></pre> <ol> <li>\u8bbe\u7f6e <code>subgraphs: true</code> \u4ee5\u6d41\u5f0f\u4f20\u8f93\u5b50\u56fe\u7684\u8f93\u51fa\u3002</li> </ol> <pre><code>[[], { node1: { foo: 'hi! foo' } }]\n[['node2:e58e5673-a661-ebb0-70d4-e298a7fc28b7'], { subgraphNode1: { bar: 'bar' } }]\n[['node2:e58e5673-a661-ebb0-70d4-e298a7fc28b7'], { subgraphNode2: { foo: 'hi! foobar' } }]\n[[], { node2: { foo: 'hi! foobar' } }]\n</code></pre>"},{"location":"how-tos/tool-calling/","title":"\u8c03\u7528\u5de5\u5177","text":"<p>\u5de5\u5177 \u5c01\u88c5\u4e86\u4e00\u4e2a\u53ef\u8c03\u7528\u51fd\u6570\u53ca\u5176\u8f93\u5165\u6a21\u5f0f\u3002\u8fd9\u4e9b\u53ef\u4ee5\u4f20\u9012\u7ed9\u517c\u5bb9\u7684\u804a\u5929\u6a21\u578b\uff0c\u5141\u8bb8\u6a21\u578b\u51b3\u5b9a\u662f\u5426\u8c03\u7528\u5de5\u5177\u5e76\u786e\u5b9a\u9002\u5f53\u7684\u53c2\u6570\u3002</p> <p>\u4f60\u53ef\u4ee5 \u5b9a\u4e49\u81ea\u5df1\u7684\u5de5\u5177 \u6216\u4f7f\u7528 \u9884\u6784\u5efa\u5de5\u5177</p>"},{"location":"how-tos/tool-calling/#_2","title":"\u5b9a\u4e49\u5de5\u5177","text":"Python <p>\u4f7f\u7528 @tool \u88c5\u9970\u5668\u5b9a\u4e49\u57fa\u672c\u5de5\u5177\uff1a</p> <pre><code>from langchain_core.tools import tool\n\n# highlight-next-line\n@tool\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n</code></pre> JavaScript <p>\u4f7f\u7528 tool \u51fd\u6570\u5b9a\u4e49\u57fa\u672c\u5de5\u5177\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number().describe(\"First operand\"),\n      b: z.number().describe(\"Second operand\"),\n    }),\n  }\n);\n</code></pre>"},{"location":"how-tos/tool-calling/#_3","title":"\u8fd0\u884c\u5de5\u5177","text":"<p>\u5de5\u5177\u7b26\u5408 Runnable \u63a5\u53e3\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>invoke</code> \u65b9\u6cd5\u8fd0\u884c\u5de5\u5177\uff1a</p> Python <pre><code>multiply.invoke({\"a\": 6, \"b\": 7})  # \u8fd4\u56de 42\n</code></pre> JavaScript <pre><code>await multiply.invoke({ a: 6, b: 7 }); // \u8fd4\u56de 42\n</code></pre> <p>\u5982\u679c\u4f7f\u7528 <code>type=\"tool_call\"</code> \u8c03\u7528\u5de5\u5177\uff0c\u5b83\u5c06\u8fd4\u56de\u4e00\u4e2a ToolMessage\uff1a</p> Python <pre><code>tool_call = {\n    \"type\": \"tool_call\",\n    \"id\": \"1\",\n    \"args\": {\"a\": 42, \"b\": 7}\n}\nmultiply.invoke(tool_call) # \u8fd4\u56de ToolMessage \u5bf9\u8c61\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>ToolMessage(content='294', name='multiply', tool_call_id='1')\n</code></pre> JavaScript <pre><code>const toolCall = {\n  type: \"tool_call\",\n  id: \"1\",\n  name: \"multiply\",\n  args: { a: 42, b: 7 },\n};\nawait multiply.invoke(toolCall); // \u8fd4\u56de ToolMessage \u5bf9\u8c61\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>ToolMessage {\n  content: \"294\",\n  name: \"multiply\",\n  tool_call_id: \"1\"\n}\n</code></pre>"},{"location":"how-tos/tool-calling/#_4","title":"\u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528","text":"Python <p>\u8981\u521b\u5efa\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[create_react_agent][]\uff1a</p> <pre><code>from langchain_core.tools import tool\n# highlight-next-line\nfrom langgraph.prebuilt import create_react_agent\n\n@tool\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\n# highlight-next-line\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet\",\n    tools=[multiply]\n)\nagent.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"what's 42 x 7?\"}]})\n</code></pre> JavaScript <p>\u8981\u521b\u5efa\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 createReactAgent\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n// highlight-next-line\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number().describe(\"First operand\"),\n      b: z.number().describe(\"Second operand\"),\n    }),\n  }\n);\n\n// highlight-next-line\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: [multiply],\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"what's 42 x 7?\" }],\n});\n</code></pre> Python"},{"location":"how-tos/tool-calling/#_5","title":"\u52a8\u6001\u9009\u62e9\u5de5\u5177","text":"<p>\u6839\u636e\u4e0a\u4e0b\u6587\u5728\u8fd0\u884c\u65f6\u914d\u7f6e\u5de5\u5177\u53ef\u7528\u6027\uff1a</p> <pre><code>from dataclasses import dataclass\nfrom typing import Literal\n\nfrom langchain.chat_models import init_chat_model\nfrom langchain_core.tools import tool\n\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\nfrom langgraph.runtime import Runtime\n\n\n@dataclass\nclass CustomContext:\n    tools: list[Literal[\"weather\", \"compass\"]]\n\n\n@tool\ndef weather() -&gt; str:\n    \"\"\"Returns the current weather conditions.\"\"\"\n    return \"It's nice and sunny.\"\n\n\n@tool\ndef compass() -&gt; str:\n    \"\"\"Returns the direction the user is facing.\"\"\"\n    return \"North\"\n\nmodel = init_chat_model(\"anthropic:claude-sonnet-4-20250514\")\n\n# highlight-next-line\ndef configure_model(state: AgentState, runtime: Runtime[CustomContext]):\n    \"\"\"\u6839\u636e\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u914d\u7f6e\u5e26\u5de5\u5177\u7684\u6a21\u578b\u3002\"\"\"\n    selected_tools = [\n        tool\n        for tool in [weather, compass]\n        if tool.name in runtime.context.tools\n    ]\n    return model.bind_tools(selected_tools)\n\n\nagent = create_react_agent(\n    # \u6839\u636e\u8fd0\u884c\u65f6\u4e0a\u4e0b\u6587\u52a8\u6001\u914d\u7f6e\u5e26\u5de5\u5177\u7684\u6a21\u578b\n    # highlight-next-line\n    configure_model,\n    # \u521d\u59cb\u5316\u65f6\u542f\u7528\u6240\u6709\u5de5\u5177\n    # highlight-next-line\n    tools=[weather, compass]\n)\n\noutput = agent.invoke(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"Who are you and what tools do you have access to?\",\n            }\n        ]\n    },\n    # highlight-next-line\n    context=CustomContext(tools=[\"weather\"]),  # \u53ea\u542f\u7528\u5929\u6c14\u5de5\u5177\n)\n\nprint(output[\"messages\"][-1].text())\n</code></pre> <p>\u5728\u7248\u672c 0.6.0 \u4e2d\u6dfb\u52a0</p>"},{"location":"how-tos/tool-calling/#_6","title":"\u5728\u5de5\u4f5c\u6d41\u4e2d\u4f7f\u7528","text":"<p>\u5982\u679c\u4f60\u6b63\u5728\u7f16\u5199\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\uff0c\u4f60\u9700\u8981\uff1a</p> <ol> <li>\u5411\u804a\u5929\u6a21\u578b\u6ce8\u518c\u5de5\u5177</li> <li>\u5982\u679c\u6a21\u578b\u51b3\u5b9a\u4f7f\u7528\u5de5\u5177\uff0c\u5219\u8c03\u7528\u8be5\u5de5\u5177</li> </ol> Python <p>\u4f7f\u7528 <code>model.bind_tools()</code> \u5411\u6a21\u578b\u6ce8\u518c\u5de5\u5177\u3002</p> <pre><code>from langchain.chat_models import init_chat_model\n\nmodel = init_chat_model(model=\"claude-3-5-haiku-latest\")\n\n# highlight-next-line\nmodel_with_tools = model.bind_tools([multiply])\n</code></pre> JavaScript <p>\u4f7f\u7528 <code>model.bindTools()</code> \u5411\u6a21\u578b\u6ce8\u518c\u5de5\u5177\u3002</p> <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\n\nconst model = new ChatOpenAI({ model: \"gpt-4o\" });\n\n// highlight-next-line\nconst modelWithTools = model.bindTools([multiply]);\n</code></pre> <p>LLM \u4f1a\u81ea\u52a8\u5224\u65ad\u662f\u5426\u9700\u8981\u8c03\u7528\u5de5\u5177\uff0c\u5e76\u4f7f\u7528\u9002\u5f53\u7684\u53c2\u6570\u5904\u7406\u5de5\u5177\u8c03\u7528\u3002</p> \u6269\u5c55\u793a\u4f8b\uff1a\u5c06\u5de5\u5177\u9644\u52a0\u5230\u804a\u5929\u6a21\u578b Python <pre><code>from langchain_core.tools import tool\nfrom langchain.chat_models import init_chat_model\n\n@tool\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\nmodel = init_chat_model(model=\"claude-3-5-haiku-latest\")\n# highlight-next-line\nmodel_with_tools = model.bind_tools([multiply])\n\nresponse_message = model_with_tools.invoke(\"what's 42 x 7?\")\ntool_call = response_message.tool_calls[0]\n\nmultiply.invoke(tool_call)\n</code></pre> <pre><code>ToolMessage(\n    content='294',\n    name='multiply',\n    tool_call_id='toolu_0176DV4YKSD8FndkeuuLj36c'\n)\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number().describe(\"First operand\"),\n      b: z.number().describe(\"Second operand\"),\n    }),\n  }\n);\n\nconst model = new ChatOpenAI({ model: \"gpt-4o\" });\n// highlight-next-line\nconst modelWithTools = model.bindTools([multiply]);\n\nconst responseMessage = await modelWithTools.invoke(\"what's 42 x 7?\");\nconst toolCall = responseMessage.tool_calls[0];\n\nawait multiply.invoke(toolCall);\n</code></pre> <pre><code>ToolMessage {\n  content: \"294\",\n  name: \"multiply\",\n  tool_call_id: \"toolu_0176DV4YKSD8FndkeuuLj36c\"\n}\n</code></pre>"},{"location":"how-tos/tool-calling/#toolnode","title":"ToolNode","text":"Python <p>\u8981\u5728\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\u4e2d\u6267\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>ToolNode</code>][] \u6216\u5b9e\u73b0\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u8282\u70b9\u3002</p> <p><code>ToolNode</code> \u662f\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u5728\u5de5\u4f5c\u6d41\u4e2d\u6267\u884c\u5de5\u5177\u7684\u8282\u70b9\u3002\u5b83\u63d0\u4f9b\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65\u5de5\u5177\u3002</li> <li>\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u5de5\u5177\u3002</li> <li>\u5904\u7406\u5de5\u5177\u6267\u884c\u671f\u95f4\u7684\u9519\u8bef\uff08<code>handle_tool_errors=True</code>\uff0c\u9ed8\u8ba4\u542f\u7528\uff09\u3002\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u9605 \u5904\u7406\u5de5\u5177\u9519\u8bef\u3002</li> </ul> <p><code>ToolNode</code> \u57fa\u4e8e <code>MessagesState</code> \u64cd\u4f5c\uff1a</p> <ul> <li>\u8f93\u5165\uff1a<code>MessagesState</code>\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u6761\u6d88\u606f\u662f\u5305\u542b <code>tool_calls</code> \u53c2\u6570\u7684 <code>AIMessage</code>\u3002</li> <li>\u8f93\u51fa\uff1a\u66f4\u65b0\u540e\u7684 <code>MessagesState</code>\uff0c\u5305\u542b\u5df2\u6267\u884c\u5de5\u5177\u7684 <code>ToolMessage</code> \u7ed3\u679c\u3002</li> </ul> <pre><code># highlight-next-line\nfrom langgraph.prebuilt import ToolNode\n\ndef get_weather(location: str):\n    \"\"\"Call to get the current weather.\"\"\"\n    if location.lower() in [\"sf\", \"san francisco\"]:\n        return \"It's 60 degrees and foggy.\"\n    else:\n        return \"It's 90 degrees and sunny.\"\n\ndef get_coolest_cities():\n    \"\"\"Get a list of coolest cities\"\"\"\n    return \"nyc, sf\"\n\n# highlight-next-line\ntool_node = ToolNode([get_weather, get_coolest_cities])\ntool_node.invoke({\"messages\": [...]})\n</code></pre> JavaScript <p>\u8981\u5728\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\u4e2d\u6267\u884c\u5de5\u5177\uff0c\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 <code>ToolNode</code> \u6216\u5b9e\u73b0\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u8282\u70b9\u3002</p> <p><code>ToolNode</code> \u662f\u4e00\u4e2a\u4e13\u95e8\u7528\u4e8e\u5728\u5de5\u4f5c\u6d41\u4e2d\u6267\u884c\u5de5\u5177\u7684\u8282\u70b9\u3002\u5b83\u63d0\u4f9b\u4ee5\u4e0b\u529f\u80fd\uff1a</p> <ul> <li>\u652f\u6301\u540c\u6b65\u548c\u5f02\u6b65\u5de5\u5177\u3002</li> <li>\u5e76\u53d1\u6267\u884c\u591a\u4e2a\u5de5\u5177\u3002</li> <li> <p>\u5904\u7406\u5de5\u5177\u6267\u884c\u671f\u95f4\u7684\u9519\u8bef\uff08<code>handleToolErrors: true</code>\uff0c\u9ed8\u8ba4\u542f\u7528\uff09\u3002\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u9605 \u5904\u7406\u5de5\u5177\u9519\u8bef\u3002</p> </li> <li> <p>\u8f93\u5165\uff1a<code>MessagesZodState</code>\uff0c\u5176\u4e2d\u6700\u540e\u4e00\u6761\u6d88\u606f\u662f\u5305\u542b <code>tool_calls</code> \u53c2\u6570\u7684 <code>AIMessage</code>\u3002</p> </li> <li>\u8f93\u51fa\uff1a\u66f4\u65b0\u540e\u7684 <code>MessagesZodState</code>\uff0c\u5305\u542b\u5df2\u6267\u884c\u5de5\u5177\u7684 <code>ToolMessage</code> \u7ed3\u679c\u3002</li> </ul> <pre><code>// highlight-next-line\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\n\nconst getWeather = tool(\n  (input) =&gt; {\n    if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n      return \"It's 60 degrees and foggy.\";\n    } else {\n      return \"It's 90 degrees and sunny.\";\n    }\n  },\n  {\n    name: \"get_weather\",\n    description: \"Call to get the current weather.\",\n    schema: z.object({\n      location: z.string().describe(\"Location to get the weather for.\"),\n    }),\n  }\n);\n\nconst getCoolestCities = tool(\n  () =&gt; {\n    return \"nyc, sf\";\n  },\n  {\n    name: \"get_coolest_cities\",\n    description: \"Get a list of coolest cities\",\n    schema: z.object({\n      noOp: z.string().optional().describe(\"No-op parameter.\"),\n    }),\n  }\n);\n\n// highlight-next-line\nconst toolNode = new ToolNode([getWeather, getCoolestCities]);\nawait toolNode.invoke({ messages: [...] });\n</code></pre> \u5355\u4e2a\u5de5\u5177\u8c03\u7528 Python <pre><code>from langchain_core.messages import AIMessage\nfrom langgraph.prebuilt import ToolNode\n\n# \u5b9a\u4e49\u5de5\u5177\n@tool\ndef get_weather(location: str):\n    \"\"\"Call to get the current weather.\"\"\"\n    if location.lower() in [\"sf\", \"san francisco\"]:\n        return \"It's 60 degrees and foggy.\"\n    else:\n        return \"It's 90 degrees and sunny.\"\n\n# highlight-next-line\ntool_node = ToolNode([get_weather])\n\nmessage_with_single_tool_call = AIMessage(\n    content=\"\",\n    tool_calls=[\n        {\n            \"name\": \"get_weather\",\n            \"args\": {\"location\": \"sf\"},\n            \"id\": \"tool_call_id\",\n            \"type\": \"tool_call\",\n        }\n    ],\n)\n\ntool_node.invoke({\"messages\": [message_with_single_tool_call]})\n</code></pre> <pre><code>{'messages': [ToolMessage(content=\"It's 60 degrees and foggy.\", name='get_weather', tool_call_id='tool_call_id')]}\n</code></pre> JavaScript <pre><code>import { AIMessage } from \"@langchain/core/messages\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5de5\u5177\nconst getWeather = tool(\n  (input) =&gt; {\n    if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n      return \"It's 60 degrees and foggy.\";\n    } else {\n      return \"It's 90 degrees and sunny.\";\n    }\n  },\n  {\n    name: \"get_weather\",\n    description: \"Call to get the current weather.\",\n    schema: z.object({\n      location: z.string().describe(\"Location to get the weather for.\"),\n    }),\n  }\n);\n\n// highlight-next-line\nconst toolNode = new ToolNode([getWeather]);\n\nconst messageWithSingleToolCall = new AIMessage({\n  content: \"\",\n  tool_calls: [\n    {\n      name: \"get_weather\",\n      args: { location: \"sf\" },\n      id: \"tool_call_id\",\n      type: \"tool_call\",\n    }\n  ],\n});\n\nawait toolNode.invoke({ messages: [messageWithSingleToolCall] });\n</code></pre> <pre><code>{ messages: [ToolMessage { content: \"It's 60 degrees and foggy.\", name: \"get_weather\", tool_call_id: \"tool_call_id\" }] }\n</code></pre> \u591a\u4e2a\u5de5\u5177\u8c03\u7528 Python <pre><code>from langchain_core.messages import AIMessage\nfrom langgraph.prebuilt import ToolNode\n\n# \u5b9a\u4e49\u5de5\u5177\n\ndef get_weather(location: str):\n    \"\"\"Call to get the current weather.\"\"\"\n    if location.lower() in [\"sf\", \"san francisco\"]:\n        return \"It's 60 degrees and foggy.\"\n    else:\n        return \"It's 90 degrees and sunny.\"\n\ndef get_coolest_cities():\n    \"\"\"Get a list of coolest cities\"\"\"\n    return \"nyc, sf\"\n\n# highlight-next-line\ntool_node = ToolNode([get_weather, get_coolest_cities])\n\nmessage_with_multiple_tool_calls = AIMessage(\n    content=\"\",\n    tool_calls=[\n        {\n            \"name\": \"get_coolest_cities\",\n            \"args\": {},\n            \"id\": \"tool_call_id_1\",\n            \"type\": \"tool_call\",\n        },\n        {\n            \"name\": \"get_weather\",\n            \"args\": {\"location\": \"sf\"},\n            \"id\": \"tool_call_id_2\",\n            \"type\": \"tool_call\",\n        },\n    ],\n)\n\n# highlight-next-line\ntool_node.invoke({\"messages\": [message_with_multiple_tool_calls]})  # (1)!\n</code></pre> <ol> <li><code>ToolNode</code> \u5c06\u5e76\u884c\u6267\u884c\u4e24\u4e2a\u5de5\u5177</li> </ol> <pre><code>{\n    'messages': [\n        ToolMessage(content='nyc, sf', name='get_coolest_cities', tool_call_id='tool_call_id_1'),\n        ToolMessage(content=\"It's 60 degrees and foggy.\", name='get_weather', tool_call_id='tool_call_id_2')\n    ]\n}\n</code></pre> JavaScript <pre><code>import { AIMessage } from \"@langchain/core/messages\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5de5\u5177\nconst getWeather = tool(\n  (input) =&gt; {\n    if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n      return \"It's 60 degrees and foggy.\";\n    } else {\n      return \"It's 90 degrees and sunny.\";\n    }\n  },\n  {\n    name: \"get_weather\",\n    description: \"Call to get the current weather.\",\n    schema: z.object({\n      location: z.string().describe(\"Location to get the weather for.\"),\n    }),\n  }\n);\n\nconst getCoolestCities = tool(\n  () =&gt; {\n    return \"nyc, sf\";\n  },\n  {\n    name: \"get_coolest_cities\",\n    description: \"Get a list of coolest cities\",\n    schema: z.object({\n      noOp: z.string().optional().describe(\"No-op parameter.\"),\n    }),\n  }\n);\n\n// highlight-next-line\nconst toolNode = new ToolNode([getWeather, getCoolestCities]);\n\nconst messageWithMultipleToolCalls = new AIMessage({\n  content: \"\",\n  tool_calls: [\n    {\n      name: \"get_coolest_cities\",\n      args: {},\n      id: \"tool_call_id_1\",\n      type: \"tool_call\",\n    },\n    {\n      name: \"get_weather\",\n      args: { location: \"sf\" },\n      id: \"tool_call_id_2\",\n      type: \"tool_call\",\n    },\n  ],\n});\n\n// highlight-next-line\nawait toolNode.invoke({ messages: [messageWithMultipleToolCalls] }); // (1)!\n</code></pre> <ol> <li><code>ToolNode</code> \u5c06\u5e76\u884c\u6267\u884c\u4e24\u4e2a\u5de5\u5177</li> </ol> <pre><code>{\n  messages: [\n    ToolMessage { content: \"nyc, sf\", name: \"get_coolest_cities\", tool_call_id: \"tool_call_id_1\" },\n    ToolMessage { content: \"It's 60 degrees and foggy.\", name: \"get_weather\", tool_call_id: \"tool_call_id_2\" }\n  ]\n}\n</code></pre> \u4e0e\u804a\u5929\u6a21\u578b\u4e00\u8d77\u4f7f\u7528 Python <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.prebuilt import ToolNode\n\ndef get_weather(location: str):\n    \"\"\"Call to get the current weather.\"\"\"\n    if location.lower() in [\"sf\", \"san francisco\"]:\n        return \"It's 60 degrees and foggy.\"\n    else:\n        return \"It's 90 degrees and sunny.\"\n\n# highlight-next-line\ntool_node = ToolNode([get_weather])\n\nmodel = init_chat_model(model=\"claude-3-5-haiku-latest\")\n# highlight-next-line\nmodel_with_tools = model.bind_tools([get_weather])  # (1)!\n\n\n# highlight-next-line\nresponse_message = model_with_tools.invoke(\"what's the weather in sf?\")\ntool_node.invoke({\"messages\": [response_message]})\n</code></pre> <ol> <li>\u4f7f\u7528 <code>.bind_tools()</code> \u5c06\u5de5\u5177\u6a21\u5f0f\u9644\u52a0\u5230\u804a\u5929\u6a21\u578b</li> </ol> <pre><code>{'messages': [ToolMessage(content=\"It's 60 degrees and foggy.\", name='get_weather', tool_call_id='toolu_01Pnkgw5JeTRxXAU7tyHT4UW')]}\n</code></pre> JavaScript <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst getWeather = tool(\n  (input) =&gt; {\n    if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n      return \"It's 60 degrees and foggy.\";\n    } else {\n      return \"It's 90 degrees and sunny.\";\n    }\n  },\n  {\n    name: \"get_weather\",\n    description: \"Call to get the current weather.\",\n    schema: z.object({\n      location: z.string().describe(\"Location to get the weather for.\"),\n    }),\n  }\n);\n\n// highlight-next-line\nconst toolNode = new ToolNode([getWeather]);\n\nconst model = new ChatOpenAI({ model: \"gpt-4o\" });\n// highlight-next-line\nconst modelWithTools = model.bindTools([getWeather]); // (1)!\n\n// highlight-next-line\nconst responseMessage = await modelWithTools.invoke(\"what's the weather in sf?\");\nawait toolNode.invoke({ messages: [responseMessage] });\n</code></pre> <ol> <li>\u4f7f\u7528 <code>.bindTools()</code> \u5c06\u5de5\u5177\u6a21\u5f0f\u9644\u52a0\u5230\u804a\u5929\u6a21\u578b</li> </ol> <pre><code>{ messages: [ToolMessage { content: \"It's 60 degrees and foggy.\", name: \"get_weather\", tool_call_id: \"toolu_01Pnkgw5JeTRxXAU7tyHT4UW\" }] }\n</code></pre> \u5728\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528 <p>\u8fd9\u662f\u4e00\u4e2a\u4f7f\u7528 <code>ToolNode</code> \u4ece\u5934\u521b\u5efa\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4ee3\u7406\u7684\u793a\u4f8b\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 LangGraph \u7684\u9884\u6784\u5efa agent\u3002</p> Python <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.prebuilt import ToolNode\nfrom langgraph.graph import StateGraph, MessagesState, START, END\n\ndef get_weather(location: str):\n    \"\"\"Call to get the current weather.\"\"\"\n    if location.lower() in [\"sf\", \"san francisco\"]:\n        return \"It's 60 degrees and foggy.\"\n    else:\n        return \"It's 90 degrees and sunny.\"\n\n# highlight-next-line\ntool_node = ToolNode([get_weather])\n\nmodel = init_chat_model(model=\"claude-3-5-haiku-latest\")\n# highlight-next-line\nmodel_with_tools = model.bind_tools([get_weather])\n\ndef should_continue(state: MessagesState):\n    messages = state[\"messages\"]\n    last_message = messages[-1]\n    if last_message.tool_calls:\n        return \"tools\"\n    return END\n\ndef call_model(state: MessagesState):\n    messages = state[\"messages\"]\n    response = model_with_tools.invoke(messages)\n    return {\"messages\": [response]}\n\nbuilder = StateGraph(MessagesState)\n\n# \u5b9a\u4e49\u6211\u4eec\u5c06\u5faa\u73af\u7684\u4e24\u4e2a\u8282\u70b9\nbuilder.add_node(\"call_model\", call_model)\n# highlight-next-line\nbuilder.add_node(\"tools\", tool_node)\n\nbuilder.add_edge(START, \"call_model\")\nbuilder.add_conditional_edges(\"call_model\", should_continue, [\"tools\", END])\nbuilder.add_edge(\"tools\", \"call_model\")\n\ngraph = builder.compile()\n\ngraph.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf?\"}]})\n</code></pre> <pre><code>{\n    'messages': [\n        HumanMessage(content=\"what's the weather in sf?\"),\n        AIMessage(\n            content=[{'text': \"I'll help you check the weather in San Francisco right now.\", 'type': 'text'}, {'id': 'toolu_01A4vwUEgBKxfFVc5H3v1CNs', 'input': {'location': 'San Francisco'}, 'name': 'get_weather', 'type': 'tool_use'}],\n            tool_calls=[{'name': 'get_weather', 'args': {'location': 'San Francisco'}, 'id': 'toolu_01A4vwUEgBKxfFVc5H3v1CNs', 'type': 'tool_call'}]\n        ),\n        ToolMessage(content=\"It's 60 degrees and foggy.\"),\n        AIMessage(content=\"The current weather in San Francisco is 60 degrees and foggy. Typical San Francisco weather with its famous marine layer!\")\n    ]\n}\n</code></pre> JavaScript <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { StateGraph, MessagesZodState, START, END } from \"@langchain/langgraph\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { isAIMessage } from \"@langchain/core/messages\";\n\nconst getWeather = tool(\n  (input) =&gt; {\n    if ([\"sf\", \"san francisco\"].includes(input.location.toLowerCase())) {\n      return \"It's 60 degrees and foggy.\";\n    } else {\n      return \"It's 90 degrees and sunny.\";\n    }\n  },\n  {\n    name: \"get_weather\",\n    description: \"Call to get the current weather.\",\n    schema: z.object({\n      location: z.string().describe(\"Location to get the weather for.\"),\n    }),\n  }\n);\n\n// highlight-next-line\nconst toolNode = new ToolNode([getWeather]);\n\nconst model = new ChatOpenAI({ model: \"gpt-4o\" });\n// highlight-next-line\nconst modelWithTools = model.bindTools([getWeather]);\n\nconst shouldContinue = (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const messages = state.messages;\n  const lastMessage = messages.at(-1);\n  if (lastMessage &amp;&amp; isAIMessage(lastMessage) &amp;&amp; lastMessage.tool_calls?.length) {\n    return \"tools\";\n  }\n  return END;\n};\n\nconst callModel = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const messages = state.messages;\n  const response = await modelWithTools.invoke(messages);\n  return { messages: [response] };\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  // \u5b9a\u4e49\u6211\u4eec\u5c06\u5faa\u73af\u7684\u4e24\u4e2a\u8282\u70b9\n  .addNode(\"agent\", callModel)\n  // highlight-next-line\n  .addNode(\"tools\", toolNode)\n  .addEdge(START, \"agent\")\n  .addConditionalEdges(\"agent\", shouldContinue, [\"tools\", END])\n  .addEdge(\"tools\", \"agent\");\n\nconst graph = builder.compile();\n\nawait graph.invoke({\n  messages: [{ role: \"user\", content: \"what's the weather in sf?\" }]\n});\n</code></pre> <pre><code>{\n  messages: [\n    HumanMessage { content: \"what's the weather in sf?\" },\n    AIMessage {\n      content: [{ text: \"I'll help you check the weather in San Francisco right now.\", type: \"text\" }, { id: \"toolu_01A4vwUEgBKxfFVc5H3v1CNs\", input: { location: \"San Francisco\" }, name: \"get_weather\", type: \"tool_use\" }],\n      tool_calls: [{ name: \"get_weather\", args: { location: \"San Francisco\" }, id: \"toolu_01A4vwUEgBKxfFVc5H3v1CNs\", type: \"tool_call\" }]\n    },\n    ToolMessage { content: \"It's 60 degrees and foggy.\" },\n    AIMessage { content: \"The current weather in San Francisco is 60 degrees and foggy. Typical San Francisco weather with its famous marine layer!\" }\n  ]\n}\n</code></pre>"},{"location":"how-tos/tool-calling/#_7","title":"\u5de5\u5177\u81ea\u5b9a\u4e49","text":"<p>\u8981\u66f4\u597d\u5730\u63a7\u5236\u5de5\u5177\u884c\u4e3a\uff0c\u8bf7\u4f7f\u7528 <code>@tool</code> \u88c5\u9970\u5668\u3002</p>"},{"location":"how-tos/tool-calling/#_8","title":"\u53c2\u6570\u63cf\u8ff0","text":"Python <p>\u4ece\u6587\u6863\u5b57\u7b26\u4e32\u81ea\u52a8\u751f\u6210\u63cf\u8ff0\uff1a</p> <pre><code># highlight-next-line\nfrom langchain_core.tools import tool\n\n# highlight-next-line\n@tool(\"multiply_tool\", parse_docstring=True)\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\n\n    Args:\n        a: First operand\n        b: Second operand\n    \"\"\"\n    return a * b\n</code></pre> JavaScript <p>\u4ece\u6a21\u5f0f\u81ea\u52a8\u751f\u6210\u63cf\u8ff0\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number().describe(\"First operand\"),\n      b: z.number().describe(\"Second operand\"),\n    }),\n  }\n);\n</code></pre>"},{"location":"how-tos/tool-calling/#_9","title":"\u663e\u5f0f\u8f93\u5165\u6a21\u5f0f","text":"Python <p>\u4f7f\u7528 <code>args_schema</code> \u5b9a\u4e49\u6a21\u5f0f\uff1a</p> <pre><code>from pydantic import BaseModel, Field\nfrom langchain_core.tools import tool\n\nclass MultiplyInputSchema(BaseModel):\n    \"\"\"Multiply two numbers\"\"\"\n    a: int = Field(description=\"First operand\")\n    b: int = Field(description=\"Second operand\")\n\n# highlight-next-line\n@tool(\"multiply_tool\", args_schema=MultiplyInputSchema)\ndef multiply(a: int, b: int) -&gt; int:\n    return a * b\n</code></pre>"},{"location":"how-tos/tool-calling/#_10","title":"\u5de5\u5177\u540d\u79f0","text":"<p>\u4f7f\u7528\u7b2c\u4e00\u4e2a\u53c2\u6570\u6216 name \u5c5e\u6027\u8986\u76d6\u9ed8\u8ba4\u5de5\u5177\u540d\u79f0\uff1a</p> Python <pre><code>from langchain_core.tools import tool\n\n# highlight-next-line\n@tool(\"multiply_tool\")\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply_tool\", // \u81ea\u5b9a\u4e49\u540d\u79f0\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number().describe(\"First operand\"),\n      b: z.number().describe(\"Second operand\"),\n    }),\n  }\n);\n</code></pre>"},{"location":"how-tos/tool-calling/#_11","title":"\u4e0a\u4e0b\u6587\u7ba1\u7406","text":"<p>LangGraph \u4e2d\u7684\u5de5\u5177\u6709\u65f6\u9700\u8981\u4e0a\u4e0b\u6587\u6570\u636e\uff0c\u4f8b\u5982\u4ec5\u8fd0\u884c\u65f6\u53c2\u6570\uff08\u5982\u7528\u6237 ID \u6216\u4f1a\u8bdd\u8be6\u60c5\uff09\uff0c\u8fd9\u4e9b\u4e0d\u5e94\u7531\u6a21\u578b\u63a7\u5236\u3002LangGraph \u63d0\u4f9b\u4e09\u79cd\u7ba1\u7406\u6b64\u7c7b\u4e0a\u4e0b\u6587\u7684\u65b9\u6cd5\uff1a</p> \u7c7b\u578b \u4f7f\u7528\u573a\u666f \u53ef\u53d8 \u751f\u547d\u5468\u671f \u914d\u7f6e \u9759\u6001\u3001\u4e0d\u53ef\u53d8\u7684\u8fd0\u884c\u65f6\u6570\u636e \u274c \u5355\u6b21\u8c03\u7528 \u77ed\u671f\u8bb0\u5fc6 \u8c03\u7528\u671f\u95f4\u52a8\u6001\u53d8\u5316\u7684\u6570\u636e \u2705 \u5355\u6b21\u8c03\u7528 \u957f\u671f\u8bb0\u5fc6 \u6301\u4e45\u5316\u7684\u8de8\u4f1a\u8bdd\u6570\u636e \u2705 \u8de8\u591a\u4e2a\u4f1a\u8bdd"},{"location":"how-tos/tool-calling/#_12","title":"\u914d\u7f6e","text":"Python <p>\u5f53\u4f60\u6709\u5de5\u5177\u6240\u9700\u7684 \u4e0d\u53ef\u53d8 \u8fd0\u884c\u65f6\u6570\u636e\uff08\u5982\u7528\u6237\u6807\u8bc6\u7b26\uff09\u65f6\uff0c\u4f7f\u7528\u914d\u7f6e\u3002\u901a\u8fc7 <code>RunnableConfig</code> \u5728\u8c03\u7528\u65f6\u4f20\u9012\u8fd9\u4e9b\u53c2\u6570\u5e76\u5728\u5de5\u5177\u4e2d\u8bbf\u95ee\u5b83\u4eec\uff1a</p> <pre><code>from langchain_core.tools import tool\nfrom langchain_core.runnables import RunnableConfig\n\n@tool\n# highlight-next-line\ndef get_user_info(config: RunnableConfig) -&gt; str:\n    \"\"\"Retrieve user information based on user ID.\"\"\"\n    user_id = config[\"configurable\"].get(\"user_id\")\n    return \"User is John Smith\" if user_id == \"user_123\" else \"Unknown user\"\n\n# \u4f7f\u7528\u667a\u80fd\u4ee3\u7406\u7684\u8c03\u7528\u793a\u4f8b\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"look up user info\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}}\n)\n</code></pre> JavaScript <p>\u5f53\u4f60\u6709\u5de5\u5177\u6240\u9700\u7684 \u4e0d\u53ef\u53d8 \u8fd0\u884c\u65f6\u6570\u636e\uff08\u5982\u7528\u6237\u6807\u8bc6\u7b26\uff09\u65f6\uff0c\u4f7f\u7528\u914d\u7f6e\u3002\u901a\u8fc7 <code>LangGraphRunnableConfig</code> \u5728\u8c03\u7528\u65f6\u4f20\u9012\u8fd9\u4e9b\u53c2\u6570\u5e76\u5728\u5de5\u5177\u4e2d\u8bbf\u95ee\u5b83\u4eec\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst getUserInfo = tool(\n  // highlight-next-line\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    const userId = config?.configurable?.user_id;\n    return userId === \"user_123\" ? \"User is John Smith\" : \"Unknown user\";\n  },\n  {\n    name: \"get_user_info\",\n    description: \"Retrieve user information based on user ID.\",\n    schema: z.object({}),\n  }\n);\n\n// \u4f7f\u7528\u667a\u80fd\u4ee3\u7406\u7684\u8c03\u7528\u793a\u4f8b\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"look up user info\" }] },\n  // highlight-next-line\n  { configurable: { user_id: \"user_123\" } }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u5de5\u5177\u4e2d\u8bbf\u95ee\u914d\u7f6e Python <pre><code>from langchain_core.runnables import RunnableConfig\nfrom langchain_core.tools import tool\nfrom langgraph.prebuilt import create_react_agent\n\ndef get_user_info(\n    # highlight-next-line\n    config: RunnableConfig,\n) -&gt; str:\n    \"\"\"Look up user info.\"\"\"\n    # highlight-next-line\n    user_id = config[\"configurable\"].get(\"user_id\")\n    return \"User is John Smith\" if user_id == \"user_123\" else \"Unknown user\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_user_info],\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"look up user information\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}}\n)\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst getUserInfo = tool(\n  // highlight-next-line\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    // highlight-next-line\n    const userId = config?.configurable?.user_id;\n    return userId === \"user_123\" ? \"User is John Smith\" : \"Unknown user\";\n  },\n  {\n    name: \"get_user_info\",\n    description: \"Look up user info.\",\n    schema: z.object({}),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: [getUserInfo],\n});\n\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"look up user information\" }] },\n  // highlight-next-line\n  { configurable: { user_id: \"user_123\" } }\n);\n</code></pre>"},{"location":"how-tos/tool-calling/#_13","title":"\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u77ed\u671f\u8bb0\u5fc6\u7ef4\u62a4\u5728\u5355\u6b21\u6267\u884c\u671f\u95f4\u53d8\u5316\u7684 \u52a8\u6001 \u72b6\u6001\u3002</p> Python <p>\u8981\u5728\u5de5\u5177\u5185\u90e8 \u8bbf\u95ee\uff08\u8bfb\u53d6\uff09\u56fe\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u7279\u6b8a\u7684\u53c2\u6570 \u6ce8\u89e3 \u2014 @[<code>InjectedState</code>][]\uff1a</p> <pre><code>from typing import Annotated, NotRequired\nfrom langchain_core.tools import tool\nfrom langgraph.prebuilt import InjectedState, create_react_agent\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\n\nclass CustomState(AgentState):\n    # \u77ed\u671f\u72b6\u6001\u4e2d\u7684 user_name \u5b57\u6bb5\n    user_name: NotRequired[str]\n\n@tool\ndef get_user_name(\n    # highlight-next-line\n    state: Annotated[CustomState, InjectedState]\n) -&gt; str:\n    \"\"\"Retrieve the current user-name from state.\"\"\"\n    # \u8fd4\u56de\u5b58\u50a8\u7684\u540d\u79f0\uff0c\u5982\u679c\u672a\u8bbe\u7f6e\u5219\u8fd4\u56de\u9ed8\u8ba4\u503c\n    return state.get(\"user_name\", \"Unknown user\")\n\n# \u793a\u4f8b\u667a\u80fd\u4ee3\u7406\u8bbe\u7f6e\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_user_name],\n    state_schema=CustomState,\n)\n\n# \u8c03\u7528\uff1a\u4ece\u72b6\u6001\u8bfb\u53d6\u540d\u79f0\uff08\u521d\u59cb\u4e3a\u7a7a\uff09\nagent.invoke({\"messages\": \"what's my name?\"})\n</code></pre> JavaScript <p>\u8981\u5728\u5de5\u5177\u5185\u90e8 \u8bbf\u95ee\uff08\u8bfb\u53d6\uff09\u56fe\u72b6\u6001\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 @[<code>getContextVariable</code>][] \u51fd\u6570\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { getContextVariable } from \"@langchain/core/context\";\nimport { MessagesZodState } from \"@langchain/langgraph\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst getUserName = tool(\n  // highlight-next-line\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    // highlight-next-line\n    const currentState = getContextVariable(\"currentState\") as z.infer&lt;\n      typeof MessagesZodState\n    &gt; &amp; { userName?: string };\n    return currentState?.userName || \"Unknown user\";\n  },\n  {\n    name: \"get_user_name\",\n    description: \"Retrieve the current user name from state.\",\n    schema: z.object({}),\n  }\n);\n</code></pre> Python <p>\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u7684\u5de5\u5177\u6765 \u66f4\u65b0 <code>user_name</code> \u5e76\u8ffd\u52a0\u786e\u8ba4\u6d88\u606f\uff1a</p> <pre><code>from typing import Annotated\nfrom langgraph.types import Command\nfrom langchain_core.messages import ToolMessage\nfrom langchain_core.tools import tool, InjectedToolCallId\n\n@tool\ndef update_user_name(\n    new_name: str,\n    tool_call_id: Annotated[str, InjectedToolCallId]\n) -&gt; Command:\n    \"\"\"Update user-name in short-term memory.\"\"\"\n    # highlight-next-line\n    return Command(update={\n        # highlight-next-line\n        \"user_name\": new_name,\n        # highlight-next-line\n        \"messages\": [\n            # highlight-next-line\n            ToolMessage(f\"Updated user name to {new_name}\", tool_call_id=tool_call_id)\n            # highlight-next-line\n        ]\n        # highlight-next-line\n    })\n</code></pre> JavaScript <p>\u8981 \u66f4\u65b0 \u77ed\u671f\u8bb0\u5fc6\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u6765\u66f4\u65b0\u72b6\u6001\u7684\u5de5\u5177\uff1a</p> <pre><code>import { Command } from \"@langchain/langgraph\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst updateUserName = tool(\n  async (input) =&gt; {\n    // highlight-next-line\n    return new Command({\n      // highlight-next-line\n      update: {\n        // highlight-next-line\n        userName: input.newName,\n        // highlight-next-line\n        messages: [\n          // highlight-next-line\n          {\n            // highlight-next-line\n            role: \"assistant\",\n            // highlight-next-line\n            content: `Updated user name to ${input.newName}`,\n            // highlight-next-line\n          },\n          // highlight-next-line\n        ],\n        // highlight-next-line\n      },\n      // highlight-next-line\n    });\n  },\n  {\n    name: \"update_user_name\",\n    description: \"Update user name in short-term memory.\",\n    schema: z.object({\n      newName: z.string().describe(\"The new user name\"),\n    }),\n  }\n);\n</code></pre> <p>Important</p> Python <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u5e76\u66f4\u65b0\u56fe\u72b6\u6001\u7684\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>create_react_agent</code>][] / @[<code>ToolNode</code>][] \u7ec4\u4ef6\uff0c\u6216\u5b9e\u73b0\u81ea\u5df1\u7684\u5de5\u5177\u6267\u884c\u8282\u70b9\u6765\u6536\u96c6\u5de5\u5177\u8fd4\u56de\u7684 <code>Command</code> \u5bf9\u8c61\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a</p> <pre><code>def call_tools(state):\n    ...\n    commands = [tools_by_name[tool_call[\"name\"]].invoke(tool_call) for tool_call in tool_calls]\n    return commands\n</code></pre> JavaScript <p>\u5982\u679c\u4f60\u60f3\u4f7f\u7528\u8fd4\u56de <code>Command</code> \u5e76\u66f4\u65b0\u56fe\u72b6\u6001\u7684\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>createReactAgent</code>][create_react_agent] / @[ToolNode] \u7ec4\u4ef6\uff0c\u6216\u5b9e\u73b0\u81ea\u5df1\u7684\u5de5\u5177\u6267\u884c\u8282\u70b9\u6765\u6536\u96c6\u5de5\u5177\u8fd4\u56de\u7684 <code>Command</code> \u5bf9\u8c61\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u5217\u8868\uff0c\u4f8b\u5982\uff1a</p> <pre><code>const callTools = async (state: State) =&gt; {\n  // ...\n  const commands = await Promise.all(\n    toolCalls.map(toolCall =&gt; toolsByName[toolCall.name].invoke(toolCall))\n  );\n  return commands;\n};\n</code></pre>"},{"location":"how-tos/tool-calling/#_14","title":"\u957f\u671f\u8bb0\u5fc6","text":"<p>\u4f7f\u7528 \u957f\u671f\u8bb0\u5fc6 \u5b58\u50a8\u8de8\u5bf9\u8bdd\u7684\u7528\u6237\u7279\u5b9a\u6216\u5e94\u7528\u7279\u5b9a\u6570\u636e\u3002\u8fd9\u5bf9\u4e8e\u804a\u5929\u673a\u5668\u4eba\u7b49\u5e94\u7528\u5f88\u6709\u7528\uff0c\u4f60\u53ef\u80fd\u60f3\u8bb0\u4f4f\u7528\u6237\u504f\u597d\u6216\u5176\u4ed6\u4fe1\u606f\u3002</p> <p>\u8981\u4f7f\u7528\u957f\u671f\u8bb0\u5fc6\uff0c\u4f60\u9700\u8981\uff1a</p> <ol> <li>\u914d\u7f6e\u5b58\u50a8 \u4ee5\u8de8\u8c03\u7528\u6301\u4e45\u5316\u6570\u636e\u3002</li> <li>\u4ece\u5de5\u5177\u5185\u90e8\u8bbf\u95ee\u5b58\u50a8\u3002</li> </ol> Python <p>\u8981 \u8bbf\u95ee \u5b58\u50a8\u4e2d\u7684\u4fe1\u606f\uff1a</p> <pre><code>from langchain_core.runnables import RunnableConfig\nfrom langchain_core.tools import tool\nfrom langgraph.graph import StateGraph\n# highlight-next-line\nfrom langgraph.config import get_store\n\n@tool\ndef get_user_info(config: RunnableConfig) -&gt; str:\n    \"\"\"Look up user info.\"\"\"\n    # \u4e0e\u63d0\u4f9b\u7ed9 `builder.compile(store=store)`\n    # \u6216 `create_react_agent` \u7684\u76f8\u540c\n    # highlight-next-line\n    store = get_store()\n    user_id = config[\"configurable\"].get(\"user_id\")\n    # highlight-next-line\n    user_info = store.get((\"users\",), user_id)\n    return str(user_info.value) if user_info else \"Unknown user\"\n\nbuilder = StateGraph(...)\n...\ngraph = builder.compile(store=store)\n</code></pre> JavaScript <p>\u8981 \u8bbf\u95ee \u5b58\u50a8\u4e2d\u7684\u4fe1\u606f\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst getUserInfo = tool(\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    // \u4e0e\u63d0\u4f9b\u7ed9 `builder.compile({ store })`\n    // \u6216 `createReactAgent` \u7684\u76f8\u540c\n    // highlight-next-line\n    const store = config.store;\n    if (!store) throw new Error(\"Store not provided\");\n\n    const userId = config?.configurable?.user_id;\n    // highlight-next-line\n    const userInfo = await store.get([\"users\"], userId);\n    return userInfo?.value ? JSON.stringify(userInfo.value) : \"Unknown user\";\n  },\n  {\n    name: \"get_user_info\",\n    description: \"Look up user info.\",\n    schema: z.object({}),\n  }\n);\n</code></pre> \u8bbf\u95ee\u957f\u671f\u8bb0\u5fc6 Python <pre><code>from langchain_core.runnables import RunnableConfig\nfrom langchain_core.tools import tool\nfrom langgraph.config import get_store\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.store.memory import InMemoryStore\n\n# highlight-next-line\nstore = InMemoryStore() # (1)!\n\n# highlight-next-line\nstore.put(  # (2)!\n    (\"users\",),  # (3)!\n    \"user_123\",  # (4)!\n    {\n        \"name\": \"John Smith\",\n        \"language\": \"English\",\n    } # (5)!\n)\n\n@tool\ndef get_user_info(config: RunnableConfig) -&gt; str:\n    \"\"\"Look up user info.\"\"\"\n    # \u4e0e\u63d0\u4f9b\u7ed9 `create_react_agent` \u7684\u76f8\u540c\n    # highlight-next-line\n    store = get_store() # (6)!\n    user_id = config[\"configurable\"].get(\"user_id\")\n    # highlight-next-line\n    user_info = store.get((\"users\",), user_id) # (7)!\n    return str(user_info.value) if user_info else \"Unknown user\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_user_info],\n    # highlight-next-line\n    store=store # (8)!\n)\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"look up user information\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}}\n)\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b [\u5b58\u50a8\u6587\u6863][../reference/store.md) \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>put</code> \u65b9\u6cd5\u5411\u5b58\u50a8\u5199\u5165\u4e00\u4e9b\u793a\u4f8b\u6570\u636e\u3002\u8bf7\u53c2\u9605 @[BaseStore.put] API \u53c2\u8003\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</li> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\u3002\u7528\u4e8e\u5c06\u76f8\u5173\u6570\u636e\u5206\u7ec4\u5728\u4e00\u8d77\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>users</code> \u547d\u540d\u7a7a\u95f4\u6765\u5206\u7ec4\u7528\u6237\u6570\u636e\u3002</li> <li>\u547d\u540d\u7a7a\u95f4\u5185\u7684\u952e\u3002\u6b64\u793a\u4f8b\u4f7f\u7528\u7528\u6237 ID \u4f5c\u4e3a\u952e\u3002</li> <li>\u6211\u4eec\u8981\u4e3a\u7ed9\u5b9a\u7528\u6237\u5b58\u50a8\u7684\u6570\u636e\u3002</li> <li><code>get_store</code> \u51fd\u6570\u7528\u4e8e\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u53ef\u4ee5\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8c03\u7528\u5b83\uff0c\u5305\u62ec\u5de5\u5177\u548c\u63d0\u793a\u8bcd\u3002\u6b64\u51fd\u6570\u8fd4\u56de\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u4f20\u9012\u7684\u5b58\u50a8\u3002</li> <li><code>get</code> \u65b9\u6cd5\u7528\u4e8e\u4ece\u5b58\u50a8\u68c0\u7d22\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a <code>StoreValue</code> \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u503c\u548c\u5173\u4e8e\u503c\u7684\u5143\u6570\u636e\u3002</li> <li><code>store</code> \u88ab\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u5728\u8fd0\u884c\u5de5\u5177\u65f6\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>get_store</code> \u51fd\u6570\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8bbf\u95ee\u5b58\u50a8\u3002</li> </ol> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { InMemoryStore } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\n// highlight-next-line\nconst store = new InMemoryStore(); // (1)!\n\n// highlight-next-line\nawait store.put(  // (2)!\n  [\"users\"],  // (3)!\n  \"user_123\",  // (4)!\n  {\n    name: \"John Smith\",\n    language: \"English\",\n  } // (5)!\n);\n\nconst getUserInfo = tool(\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    // \u4e0e\u63d0\u4f9b\u7ed9 `createReactAgent` \u7684\u76f8\u540c\n    // highlight-next-line\n    const store = config.store; // (6)!\n    if (!store) throw new Error(\"Store not provided\");\n\n    const userId = config?.configurable?.user_id;\n    // highlight-next-line\n    const userInfo = await store.get([\"users\"], userId); // (7)!\n    return userInfo?.value ? JSON.stringify(userInfo.value) : \"Unknown user\";\n  },\n  {\n    name: \"get_user_info\",\n    description: \"Look up user info.\",\n    schema: z.object({}),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: [getUserInfo],\n  // highlight-next-line\n  store: store // (8)!\n});\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"look up user information\" }] },\n  // highlight-next-line\n  { configurable: { user_id: \"user_123\" } }\n);\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>put</code> \u65b9\u6cd5\u5411\u5b58\u50a8\u5199\u5165\u4e00\u4e9b\u793a\u4f8b\u6570\u636e\u3002\u8bf7\u53c2\u9605 BaseStore.put API \u53c2\u8003\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</li> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\u3002\u7528\u4e8e\u5c06\u76f8\u5173\u6570\u636e\u5206\u7ec4\u5728\u4e00\u8d77\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>users</code> \u547d\u540d\u7a7a\u95f4\u6765\u5206\u7ec4\u7528\u6237\u6570\u636e\u3002</li> <li>\u547d\u540d\u7a7a\u95f4\u5185\u7684\u952e\u3002\u6b64\u793a\u4f8b\u4f7f\u7528\u7528\u6237 ID \u4f5c\u4e3a\u952e\u3002</li> <li>\u6211\u4eec\u8981\u4e3a\u7ed9\u5b9a\u7528\u6237\u5b58\u50a8\u7684\u6570\u636e\u3002</li> <li>\u5b58\u50a8\u53ef\u4ece\u4f20\u9012\u7ed9\u5de5\u5177\u7684 config \u5bf9\u8c61\u8bbf\u95ee\u3002\u8fd9\u4f7f\u5de5\u5177\u80fd\u591f\u5728\u8fd0\u884c\u65f6\u8bbf\u95ee\u5b58\u50a8\u3002</li> <li><code>get</code> \u65b9\u6cd5\u7528\u4e8e\u4ece\u5b58\u50a8\u68c0\u7d22\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a <code>StoreValue</code> \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u503c\u548c\u5173\u4e8e\u503c\u7684\u5143\u6570\u636e\u3002</li> <li><code>store</code> \u88ab\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u5728\u8fd0\u884c\u5de5\u5177\u65f6\u8bbf\u95ee\u5b58\u50a8\u3002</li> </ol> Python <p>\u8981 \u66f4\u65b0 \u5b58\u50a8\u4e2d\u7684\u4fe1\u606f\uff1a</p> <pre><code>from langchain_core.runnables import RunnableConfig\nfrom langchain_core.tools import tool\nfrom langgraph.graph import StateGraph\n# highlight-next-line\nfrom langgraph.config import get_store\n\n@tool\ndef save_user_info(user_info: str, config: RunnableConfig) -&gt; str:\n    \"\"\"Save user info.\"\"\"\n    # \u4e0e\u63d0\u4f9b\u7ed9 `builder.compile(store=store)`\n    # \u6216 `create_react_agent` \u7684\u76f8\u540c\n    # highlight-next-line\n    store = get_store()\n    user_id = config[\"configurable\"].get(\"user_id\")\n    # highlight-next-line\n    store.put((\"users\",), user_id, user_info)\n    return \"Successfully saved user info.\"\n\nbuilder = StateGraph(...)\n...\ngraph = builder.compile(store=store)\n</code></pre> JavaScript <p>\u8981 \u66f4\u65b0 \u5b58\u50a8\u4e2d\u7684\u4fe1\u606f\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst saveUserInfo = tool(\n  async (input, config: LangGraphRunnableConfig) =&gt; {\n    // \u4e0e\u63d0\u4f9b\u7ed9 `builder.compile({ store })`\n    // \u6216 `createReactAgent` \u7684\u76f8\u540c\n    // highlight-next-line\n    const store = config.store;\n    if (!store) throw new Error(\"Store not provided\");\n\n    const userId = config?.configurable?.user_id;\n    // highlight-next-line\n    await store.put([\"users\"], userId, input.userInfo);\n    return \"Successfully saved user info.\";\n  },\n  {\n    name: \"save_user_info\",\n    description: \"Save user info.\",\n    schema: z.object({\n      userInfo: z.string().describe(\"User information to save\"),\n    }),\n  }\n);\n</code></pre> \u66f4\u65b0\u957f\u671f\u8bb0\u5fc6 Python <pre><code>from typing_extensions import TypedDict\n\nfrom langchain_core.tools import tool\nfrom langgraph.config import get_store\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.store.memory import InMemoryStore\n\nstore = InMemoryStore() # (1)!\n\nclass UserInfo(TypedDict): # (2)!\n    name: str\n\n@tool\ndef save_user_info(user_info: UserInfo, config: RunnableConfig) -&gt; str: # (3)!\n    \"\"\"Save user info.\"\"\"\n    # \u4e0e\u63d0\u4f9b\u7ed9 `create_react_agent` \u7684\u76f8\u540c\n    # highlight-next-line\n    store = get_store() # (4)!\n    user_id = config[\"configurable\"].get(\"user_id\")\n    # highlight-next-line\n    store.put((\"users\",), user_id, user_info) # (5)!\n    return \"Successfully saved user info.\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[save_user_info],\n    # highlight-next-line\n    store=store\n)\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"My name is John Smith\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}} # (6)!\n)\n\n# \u4f60\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5b58\u50a8\u6765\u83b7\u53d6\u503c\nstore.get((\"users\",), \"user_123\").value\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li><code>UserInfo</code> \u7c7b\u662f\u4e00\u4e2a\u5b9a\u4e49\u7528\u6237\u4fe1\u606f\u7ed3\u6784\u7684 <code>TypedDict</code>\u3002LLM \u5c06\u4f7f\u7528\u5b83\u6839\u636e\u6a21\u5f0f\u683c\u5f0f\u5316\u54cd\u5e94\u3002</li> <li><code>save_user_info</code> \u51fd\u6570\u662f\u4e00\u4e2a\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u66f4\u65b0\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177\u3002\u8fd9\u5bf9\u4e8e\u7528\u6237\u60f3\u8981\u66f4\u65b0\u5176\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u7684\u804a\u5929\u5e94\u7528\u53ef\u80fd\u5f88\u6709\u7528\u3002</li> <li><code>get_store</code> \u51fd\u6570\u7528\u4e8e\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u53ef\u4ee5\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8c03\u7528\u5b83\uff0c\u5305\u62ec\u5de5\u5177\u548c\u63d0\u793a\u8bcd\u3002\u6b64\u51fd\u6570\u8fd4\u56de\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u4f20\u9012\u7684\u5b58\u50a8\u3002</li> <li><code>put</code> \u65b9\u6cd5\u7528\u4e8e\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u3002</li> <li><code>user_id</code> \u5728 config \u4e2d\u4f20\u9012\u3002\u7528\u4e8e\u6807\u8bc6\u6b63\u5728\u66f4\u65b0\u4fe1\u606f\u7684\u7528\u6237\u3002</li> </ol> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { InMemoryStore } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport type { LangGraphRunnableConfig } from \"@langchain/langgraph\";\n\nconst store = new InMemoryStore(); // (1)!\n\nconst UserInfoSchema = z.object({ // (2)!\n  name: z.string(),\n});\n\nconst saveUserInfo = tool(\n  async (input, config: LangGraphRunnableConfig) =&gt; { // (3)!\n    // \u4e0e\u63d0\u4f9b\u7ed9 `createReactAgent` \u7684\u76f8\u540c\n    // highlight-next-line\n    const store = config.store; // (4)!\n    if (!store) throw new Error(\"Store not provided\");\n\n    const userId = config?.configurable?.user_id;\n    // highlight-next-line\n    await store.put([\"users\"], userId, input); // (5)!\n    return \"Successfully saved user info.\";\n  },\n  {\n    name: \"save_user_info\",\n    description: \"Save user info.\",\n    schema: UserInfoSchema,\n  }\n);\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: [saveUserInfo],\n  // highlight-next-line\n  store: store\n});\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"My name is John Smith\" }] },\n  // highlight-next-line\n  { configurable: { user_id: \"user_123\" } } // (6)!\n);\n\n// \u4f60\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5b58\u50a8\u6765\u83b7\u53d6\u503c\nconst userInfo = await store.get([\"users\"], \"user_123\");\nconsole.log(userInfo?.value);\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li><code>UserInfoSchema</code> \u662f\u4e00\u4e2a\u5b9a\u4e49\u7528\u6237\u4fe1\u606f\u7ed3\u6784\u7684 Zod \u6a21\u5f0f\u3002LLM \u5c06\u4f7f\u7528\u5b83\u6839\u636e\u6a21\u5f0f\u683c\u5f0f\u5316\u54cd\u5e94\u3002</li> <li><code>saveUserInfo</code> \u51fd\u6570\u662f\u4e00\u4e2a\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u66f4\u65b0\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177\u3002\u8fd9\u5bf9\u4e8e\u7528\u6237\u60f3\u8981\u66f4\u65b0\u5176\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u7684\u804a\u5929\u5e94\u7528\u53ef\u80fd\u5f88\u6709\u7528\u3002</li> <li>\u5b58\u50a8\u53ef\u4ece\u4f20\u9012\u7ed9\u5de5\u5177\u7684 config \u5bf9\u8c61\u8bbf\u95ee\u3002\u8fd9\u4f7f\u5de5\u5177\u80fd\u591f\u5728\u8fd0\u884c\u65f6\u8bbf\u95ee\u5b58\u50a8\u3002</li> <li><code>put</code> \u65b9\u6cd5\u7528\u4e8e\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u3002</li> <li><code>user_id</code> \u5728 config \u4e2d\u4f20\u9012\u3002\u7528\u4e8e\u6807\u8bc6\u6b63\u5728\u66f4\u65b0\u4fe1\u606f\u7684\u7528\u6237\u3002</li> </ol>"},{"location":"how-tos/tool-calling/#_15","title":"\u9ad8\u7ea7\u5de5\u5177\u529f\u80fd","text":""},{"location":"how-tos/tool-calling/#_16","title":"\u7acb\u5373\u8fd4\u56de","text":"Python <p>\u4f7f\u7528 <code>return_direct=True</code> \u53ef\u4ee5\u7acb\u5373\u8fd4\u56de\u5de5\u5177\u7684\u7ed3\u679c\u800c\u4e0d\u6267\u884c\u989d\u5916\u903b\u8f91\u3002</p> <p>\u8fd9\u5bf9\u4e8e\u4e0d\u5e94\u89e6\u53d1\u8fdb\u4e00\u6b65\u5904\u7406\u6216\u5de5\u5177\u8c03\u7528\u7684\u5de5\u5177\u5f88\u6709\u7528\uff0c\u5141\u8bb8\u4f60\u76f4\u63a5\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u7528\u6237\u3002</p> <pre><code># highlight-next-line\n@tool(return_direct=True)\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"Add two numbers\"\"\"\n    return a + b\n</code></pre> JavaScript <p>\u4f7f\u7528 <code>returnDirect: true</code> \u53ef\u4ee5\u7acb\u5373\u8fd4\u56de\u5de5\u5177\u7684\u7ed3\u679c\u800c\u4e0d\u6267\u884c\u989d\u5916\u903b\u8f91\u3002</p> <p>\u8fd9\u5bf9\u4e8e\u4e0d\u5e94\u89e6\u53d1\u8fdb\u4e00\u6b65\u5904\u7406\u6216\u5de5\u5177\u8c03\u7528\u7684\u5de5\u5177\u5f88\u6709\u7528\uff0c\u5141\u8bb8\u4f60\u76f4\u63a5\u5c06\u7ed3\u679c\u8fd4\u56de\u7ed9\u7528\u6237\u3002</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst add = tool(\n  (input) =&gt; {\n    return input.a + input.b;\n  },\n  {\n    name: \"add\",\n    description: \"Add two numbers\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n    // highlight-next-line\n    returnDirect: true,\n  }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528 return_direct Python <pre><code>from langchain_core.tools import tool\nfrom langgraph.prebuilt import create_react_agent\n\n# highlight-next-line\n@tool(return_direct=True)\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"Add two numbers\"\"\"\n    return a + b\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[add]\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what's 3 + 5?\"}]}\n)\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\n\n// highlight-next-line\nconst add = tool(\n  (input) =&gt; {\n    return input.a + input.b;\n  },\n  {\n    name: \"add\",\n    description: \"Add two numbers\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n    // highlight-next-line\n    returnDirect: true,\n  }\n);\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: [add]\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"what's 3 + 5?\" }]\n});\n</code></pre> <p>\u4e0d\u4f7f\u7528\u9884\u6784\u5efa\u7ec4\u4ef6\u65f6</p> Python <p>\u5982\u679c\u4f60\u6b63\u5728\u6784\u5efa\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\u4e14\u4e0d\u4f9d\u8d56 <code>create_react_agent</code> \u6216 <code>ToolNode</code>\uff0c\u4f60\u8fd8\u9700\u8981\u5b9e\u73b0\u63a7\u5236\u6d41\u6765\u5904\u7406 <code>return_direct=True</code>\u3002</p> JavaScript <p>\u5982\u679c\u4f60\u6b63\u5728\u6784\u5efa\u81ea\u5b9a\u4e49\u5de5\u4f5c\u6d41\u4e14\u4e0d\u4f9d\u8d56 <code>createReactAgent</code> \u6216 <code>ToolNode</code>\uff0c\u4f60\u8fd8\u9700\u8981\u5b9e\u73b0\u63a7\u5236\u6d41\u6765\u5904\u7406 <code>returnDirect: true</code>\u3002</p>"},{"location":"how-tos/tool-calling/#_17","title":"\u5f3a\u5236\u4f7f\u7528\u5de5\u5177","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u5f3a\u5236\u4f7f\u7528\u7279\u5b9a\u5de5\u5177\uff0c\u4f60\u9700\u8981\u5728 \u6a21\u578b \u7ea7\u522b\u4f7f\u7528 bind_tools \u65b9\u6cd5\u4e2d\u7684 <code>tool_choice</code> \u53c2\u6570\u8fdb\u884c\u914d\u7f6e\u3002</p> <p>\u901a\u8fc7 tool_choice \u5f3a\u5236\u4f7f\u7528\u7279\u5b9a\u5de5\u5177\uff1a</p> Python <pre><code>@tool(return_direct=True)\ndef greet(user_name: str) -&gt; int:\n    \"\"\"Greet user.\"\"\"\n    return f\"Hello {user_name}!\"\n\ntools = [greet]\n\nconfigured_model = model.bind_tools(\n    tools,\n    # \u5f3a\u5236\u4f7f\u7528 'greet' \u5de5\u5177\n    # highlight-next-line\n    tool_choice={\"type\": \"tool\", \"name\": \"greet\"}\n)\n</code></pre> JavaScript <pre><code>const greet = tool(\n  (input) =&gt; {\n    return `Hello ${input.userName}!`;\n  },\n  {\n    name: \"greet\",\n    description: \"Greet user.\",\n    schema: z.object({\n      userName: z.string(),\n    }),\n    returnDirect: true,\n  }\n);\n\nconst tools = [greet];\n\nconst configuredModel = model.bindTools(\n  tools,\n  // \u5f3a\u5236\u4f7f\u7528 'greet' \u5de5\u5177\n  // highlight-next-line\n  { tool_choice: { type: \"tool\", name: \"greet\" } }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u5f3a\u5236\u4f7f\u7528\u5de5\u5177 Python <p>\u8981\u5f3a\u5236\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7279\u5b9a\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u5728 <code>model.bind_tools()</code> \u4e2d\u8bbe\u7f6e <code>tool_choice</code> \u9009\u9879\uff1a</p> <pre><code>from langchain_core.tools import tool\n\n# highlight-next-line\n@tool(return_direct=True)\ndef greet(user_name: str) -&gt; int:\n    \"\"\"Greet user.\"\"\"\n    return f\"Hello {user_name}!\"\n\ntools = [greet]\n\nagent = create_react_agent(\n    # highlight-next-line\n    model=model.bind_tools(tools, tool_choice={\"type\": \"tool\", \"name\": \"greet\"}),\n    tools=tools\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"Hi, I am Bob\"}]}\n)\n</code></pre> JavaScript <p>\u8981\u5f3a\u5236\u667a\u80fd\u4ee3\u7406\u4f7f\u7528\u7279\u5b9a\u5de5\u5177\uff0c\u4f60\u53ef\u4ee5\u5728 <code>model.bindTools()</code> \u4e2d\u8bbe\u7f6e <code>tool_choice</code> \u9009\u9879\uff1a</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { ChatOpenAI } from \"@langchain/openai\";\n\n// highlight-next-line\nconst greet = tool(\n  (input) =&gt; {\n    return `Hello ${input.userName}!`;\n  },\n  {\n    name: \"greet\",\n    description: \"Greet user.\",\n    schema: z.object({\n      userName: z.string(),\n    }),\n    // highlight-next-line\n    returnDirect: true,\n  }\n);\n\nconst tools = [greet];\nconst model = new ChatOpenAI({ model: \"gpt-4o\" });\n\nconst agent = createReactAgent({\n  // highlight-next-line\n  llm: model.bindTools(tools, { tool_choice: { type: \"tool\", name: \"greet\" } }),\n  tools: tools\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"Hi, I am Bob\" }]\n});\n</code></pre> <p>\u907f\u514d\u65e0\u9650\u5faa\u73af</p> Python <p>\u5728\u6ca1\u6709\u505c\u6b62\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u5f3a\u5236\u4f7f\u7528\u5de5\u5177\u53ef\u80fd\u4f1a\u521b\u5efa\u65e0\u9650\u5faa\u73af\u3002\u4f7f\u7528\u4ee5\u4e0b\u4fdd\u62a4\u63aa\u65bd\u4e4b\u4e00\uff1a</p> <ul> <li>\u4f7f\u7528 <code>return_direct=True</code> \u6807\u8bb0\u5de5\u5177\uff0c\u4ee5\u5728\u6267\u884c\u540e\u7ed3\u675f\u5faa\u73af\u3002</li> <li>\u8bbe\u7f6e <code>recursion_limit</code> \u6765\u9650\u5236\u6267\u884c\u6b65\u9aa4\u6570\u3002</li> </ul> JavaScript <p>\u5728\u6ca1\u6709\u505c\u6b62\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u5f3a\u5236\u4f7f\u7528\u5de5\u5177\u53ef\u80fd\u4f1a\u521b\u5efa\u65e0\u9650\u5faa\u73af\u3002\u4f7f\u7528\u4ee5\u4e0b\u4fdd\u62a4\u63aa\u65bd\u4e4b\u4e00\uff1a</p> <ul> <li>\u4f7f\u7528 <code>returnDirect: true</code> \u6807\u8bb0\u5de5\u5177\uff0c\u4ee5\u5728\u6267\u884c\u540e\u7ed3\u675f\u5faa\u73af\u3002</li> <li>\u8bbe\u7f6e <code>recursionLimit</code> \u6765\u9650\u5236\u6267\u884c\u6b65\u9aa4\u6570\u3002</li> </ul> <p>\u5de5\u5177\u9009\u62e9\u914d\u7f6e</p> <p><code>tool_choice</code> \u53c2\u6570\u7528\u4e8e\u914d\u7f6e\u6a21\u578b\u5728\u51b3\u5b9a\u8c03\u7528\u5de5\u5177\u65f6\u5e94\u4f7f\u7528\u54ea\u4e2a\u5de5\u5177\u3002\u5f53\u4f60\u60f3\u786e\u4fdd\u7279\u5b9a\u4efb\u52a1\u59cb\u7ec8\u8c03\u7528\u7279\u5b9a\u5de5\u5177\uff0c\u6216\u5f53\u4f60\u60f3\u8986\u76d6\u6a21\u578b\u57fa\u4e8e\u5176\u5185\u90e8\u903b\u8f91\u9009\u62e9\u5de5\u5177\u7684\u9ed8\u8ba4\u884c\u4e3a\u65f6\uff0c\u8fd9\u5f88\u6709\u7528\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0c\u5e76\u975e\u6240\u6709\u6a21\u578b\u90fd\u652f\u6301\u6b64\u529f\u80fd\uff0c\u786e\u5207\u7684\u914d\u7f6e\u53ef\u80fd\u56e0\u4f60\u4f7f\u7528\u7684\u6a21\u578b\u800c\u5f02\u3002</p>"},{"location":"how-tos/tool-calling/#_18","title":"\u7981\u7528\u5e76\u884c\u8c03\u7528","text":"Python <p>\u5bf9\u4e8e\u652f\u6301\u7684\u63d0\u4f9b\u5546\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728 <code>model.bind_tools()</code> \u65b9\u6cd5\u4e2d\u8bbe\u7f6e <code>parallel_tool_calls=False</code> \u6765\u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528\uff1a</p> <pre><code>model.bind_tools(\n    tools,\n    # highlight-next-line\n    parallel_tool_calls=False\n)\n</code></pre> JavaScript <p>\u5bf9\u4e8e\u652f\u6301\u7684\u63d0\u4f9b\u5546\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728 <code>model.bindTools()</code> \u65b9\u6cd5\u4e2d\u8bbe\u7f6e <code>parallel_tool_calls: false</code> \u6765\u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528\uff1a</p> <pre><code>model.bindTools(\n  tools,\n  // highlight-next-line\n  { parallel_tool_calls: false }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u5728\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u4e2d\u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528 Python <pre><code>from langchain.chat_models import init_chat_model\n\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"Add two numbers\"\"\"\n    return a + b\n\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\nmodel = init_chat_model(\"anthropic:claude-3-5-sonnet-latest\", temperature=0)\ntools = [add, multiply]\nagent = create_react_agent(\n    # \u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528\n    # highlight-next-line\n    model=model.bind_tools(tools, parallel_tool_calls=False),\n    tools=tools\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what's 3 + 5 and 4 * 7?\"}]}\n)\n</code></pre> JavaScript <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst add = tool(\n  (input) =&gt; {\n    return input.a + input.b;\n  },\n  {\n    name: \"add\",\n    description: \"Add two numbers\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n  }\n);\n\nconst multiply = tool(\n  (input) =&gt; {\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers.\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n  }\n);\n\nconst model = new ChatOpenAI({ model: \"gpt-4o\", temperature: 0 });\nconst tools = [add, multiply];\n\nconst agent = createReactAgent({\n  // \u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528\n  // highlight-next-line\n  llm: model.bindTools(tools, { parallel_tool_calls: false }),\n  tools: tools\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"what's 3 + 5 and 4 * 7?\" }]\n});\n</code></pre>"},{"location":"how-tos/tool-calling/#_19","title":"\u5904\u7406\u9519\u8bef","text":"Python <p>LangGraph \u901a\u8fc7\u9884\u6784\u5efa\u7684 @[ToolNode][] \u7ec4\u4ef6\u4e3a\u5de5\u5177\u6267\u884c\u63d0\u4f9b\u5185\u7f6e\u9519\u8bef\u5904\u7406\uff0c\u53ef\u72ec\u7acb\u4f7f\u7528\u4e5f\u53ef\u5728\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>ToolNode</code> \u6355\u83b7\u5de5\u5177\u6267\u884c\u671f\u95f4\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u5e76\u5c06\u5b83\u4eec\u4f5c\u4e3a\u5e26\u6709\u9519\u8bef\u72b6\u6001\u7684 <code>ToolMessage</code> \u5bf9\u8c61\u8fd4\u56de\u3002</p> <pre><code>from langchain_core.messages import AIMessage\nfrom langgraph.prebuilt import ToolNode\n\ndef multiply(a: int, b: int) -&gt; int:\n    if a == 42:\n        raise ValueError(\"The ultimate error\")\n    return a * b\n\n# \u9ed8\u8ba4\u9519\u8bef\u5904\u7406\uff08\u9ed8\u8ba4\u542f\u7528\uff09\ntool_node = ToolNode([multiply])\n\nmessage = AIMessage(\n    content=\"\",\n    tool_calls=[{\n        \"name\": \"multiply\",\n        \"args\": {\"a\": 42, \"b\": 7},\n        \"id\": \"tool_call_id\",\n        \"type\": \"tool_call\"\n    }]\n)\n\nresult = tool_node.invoke({\"messages\": [message]})\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>{'messages': [\n    ToolMessage(\n        content=\"Error: ValueError('The ultimate error')\\n Please fix your mistakes.\",\n        name='multiply',\n        tool_call_id='tool_call_id',\n        status='error'\n    )\n]}\n</code></pre> JavaScript <p>LangGraph \u901a\u8fc7\u9884\u6784\u5efa\u7684 ToolNode \u7ec4\u4ef6\u4e3a\u5de5\u5177\u6267\u884c\u63d0\u4f9b\u5185\u7f6e\u9519\u8bef\u5904\u7406\uff0c\u53ef\u72ec\u7acb\u4f7f\u7528\u4e5f\u53ef\u5728\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u4e2d\u4f7f\u7528\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c<code>ToolNode</code> \u6355\u83b7\u5de5\u5177\u6267\u884c\u671f\u95f4\u629b\u51fa\u7684\u5f02\u5e38\uff0c\u5e76\u5c06\u5b83\u4eec\u4f5c\u4e3a\u5e26\u6709\u9519\u8bef\u72b6\u6001\u7684 <code>ToolMessage</code> \u5bf9\u8c61\u8fd4\u56de\u3002</p> <pre><code>import { AIMessage } from \"@langchain/core/messages\";\nimport { ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst multiply = tool(\n  (input) =&gt; {\n    if (input.a === 42) {\n      throw new Error(\"The ultimate error\");\n    }\n    return input.a * input.b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n  }\n);\n\n// \u9ed8\u8ba4\u9519\u8bef\u5904\u7406\uff08\u9ed8\u8ba4\u542f\u7528\uff09\nconst toolNode = new ToolNode([multiply]);\n\nconst message = new AIMessage({\n  content: \"\",\n  tool_calls: [\n    {\n      name: \"multiply\",\n      args: { a: 42, b: 7 },\n      id: \"tool_call_id\",\n      type: \"tool_call\",\n    },\n  ],\n});\n\nconst result = await toolNode.invoke({ messages: [message] });\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>{ messages: [\n  ToolMessage {\n    content: \"Error: The ultimate error\\n Please fix your mistakes.\",\n    name: \"multiply\",\n    tool_call_id: \"tool_call_id\",\n    status: \"error\"\n  }\n]}\n</code></pre>"},{"location":"how-tos/tool-calling/#_20","title":"\u7981\u7528\u9519\u8bef\u5904\u7406","text":"<p>\u8981\u76f4\u63a5\u4f20\u64ad\u5f02\u5e38\uff0c\u8bf7\u7981\u7528\u9519\u8bef\u5904\u7406\uff1a</p> Python <pre><code>tool_node = ToolNode([multiply], handle_tool_errors=False)\n</code></pre> JavaScript <pre><code>const toolNode = new ToolNode([multiply], { handleToolErrors: false });\n</code></pre> <p>\u7981\u7528\u9519\u8bef\u5904\u7406\u540e\uff0c\u5de5\u5177\u629b\u51fa\u7684\u5f02\u5e38\u5c06\u5411\u4e0a\u4f20\u64ad\uff0c\u9700\u8981\u663e\u5f0f\u7ba1\u7406\u3002</p>"},{"location":"how-tos/tool-calling/#_21","title":"\u81ea\u5b9a\u4e49\u9519\u8bef\u6d88\u606f","text":"<p>\u901a\u8fc7\u5c06\u9519\u8bef\u5904\u7406\u53c2\u6570\u8bbe\u7f6e\u4e3a\u5b57\u7b26\u4e32\u6765\u63d0\u4f9b\u81ea\u5b9a\u4e49\u9519\u8bef\u6d88\u606f\uff1a</p> Python <pre><code>tool_node = ToolNode(\n    [multiply],\n    handle_tool_errors=\"Can't use 42 as the first operand, please switch operands!\"\n)\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>{'messages': [\n    ToolMessage(\n        content=\"Can't use 42 as the first operand, please switch operands!\",\n        name='multiply',\n        tool_call_id='tool_call_id',\n        status='error'\n    )\n]}\n</code></pre> JavaScript <pre><code>const toolNode = new ToolNode([multiply], {\n  handleToolErrors:\n    \"Can't use 42 as the first operand, please switch operands!\",\n});\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa\uff1a</p> <pre><code>{ messages: [\n  ToolMessage {\n    content: \"Can't use 42 as the first operand, please switch operands!\",\n    name: \"multiply\",\n    tool_call_id: \"tool_call_id\",\n    status: \"error\"\n  }\n]}\n</code></pre>"},{"location":"how-tos/tool-calling/#_22","title":"\u667a\u80fd\u4ee3\u7406\u4e2d\u7684\u9519\u8bef\u5904\u7406","text":"Python <p>\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\uff08<code>create_react_agent</code>\uff09\u4e2d\u7684\u9519\u8bef\u5904\u7406\u5229\u7528 <code>ToolNode</code>\uff1a</p> <pre><code>from langgraph.prebuilt import create_react_agent\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[multiply]\n)\n\n# \u9ed8\u8ba4\u9519\u8bef\u5904\u7406\nagent.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"what's 42 x 7?\"}]})\n</code></pre> <p>\u8981\u5728\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u4e2d\u7981\u7528\u6216\u81ea\u5b9a\u4e49\u9519\u8bef\u5904\u7406\uff0c\u8bf7\u663e\u5f0f\u4f20\u9012\u914d\u7f6e\u597d\u7684 <code>ToolNode</code>\uff1a</p> <pre><code>custom_tool_node = ToolNode(\n    [multiply],\n    handle_tool_errors=\"Cannot use 42 as a first operand!\"\n)\n\nagent_custom = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=custom_tool_node\n)\n\nagent_custom.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"what's 42 x 7?\"}]})\n</code></pre> JavaScript <p>\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\uff08<code>createReactAgent</code>\uff09\u4e2d\u7684\u9519\u8bef\u5904\u7406\u5229\u7528 <code>ToolNode</code>\uff1a</p> <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst agent = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: [multiply],\n});\n\n// \u9ed8\u8ba4\u9519\u8bef\u5904\u7406\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"what's 42 x 7?\" }],\n});\n</code></pre> <p>\u8981\u5728\u9884\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u4e2d\u7981\u7528\u6216\u81ea\u5b9a\u4e49\u9519\u8bef\u5904\u7406\uff0c\u8bf7\u663e\u5f0f\u4f20\u9012\u914d\u7f6e\u597d\u7684 <code>ToolNode</code>\uff1a</p> <pre><code>const customToolNode = new ToolNode([multiply], {\n  handleToolErrors: \"Cannot use 42 as a first operand!\",\n});\n\nconst agentCustom = createReactAgent({\n  llm: new ChatAnthropic({ model: \"claude-3-5-sonnet-20240620\" }),\n  tools: customToolNode,\n});\n\nawait agentCustom.invoke({\n  messages: [{ role: \"user\", content: \"what's 42 x 7?\" }],\n});\n</code></pre>"},{"location":"how-tos/tool-calling/#_23","title":"\u5904\u7406\u5927\u91cf\u5de5\u5177","text":"<p>\u968f\u7740\u53ef\u7528\u5de5\u5177\u6570\u91cf\u7684\u589e\u957f\uff0c\u4f60\u53ef\u80fd\u5e0c\u671b\u9650\u5236 LLM \u9009\u62e9\u7684\u8303\u56f4\uff0c\u4ee5\u51cf\u5c11 token \u6d88\u8017\u5e76\u5e2e\u52a9\u7ba1\u7406 LLM \u63a8\u7406\u4e2d\u7684\u9519\u8bef\u6765\u6e90\u3002</p> <p>\u4e3a\u6b64\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u8fd0\u884c\u65f6\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u68c0\u7d22\u76f8\u5173\u5de5\u5177\u6765\u52a8\u6001\u8c03\u6574\u6a21\u578b\u53ef\u7528\u7684\u5de5\u5177\u3002</p> <p>\u8bf7\u53c2\u9605 <code>langgraph-bigtool</code> \u9884\u6784\u5efa\u5e93\u4ee5\u83b7\u53d6\u5373\u7528\u578b\u5b9e\u73b0\u3002</p>"},{"location":"how-tos/tool-calling/#_24","title":"\u9884\u6784\u5efa\u5de5\u5177","text":""},{"location":"how-tos/tool-calling/#llm","title":"LLM \u63d0\u4f9b\u5546\u5de5\u5177","text":"Python <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u5e26\u6709\u5de5\u5177\u89c4\u8303\u7684\u5b57\u5178\u4f20\u9012\u7ed9 <code>create_react_agent</code> \u7684 <code>tools</code> \u53c2\u6570\u6765\u4f7f\u7528\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u9884\u6784\u5efa\u5de5\u5177\u3002\u4f8b\u5982\uff0c\u8981\u4f7f\u7528 OpenAI \u7684 <code>web_search_preview</code> \u5de5\u5177\uff1a</p> <pre><code>from langgraph.prebuilt import create_react_agent\n\nagent = create_react_agent(\n    model=\"openai:gpt-4o-mini\",\n    tools=[{\"type\": \"web_search_preview\"}]\n)\nresponse = agent.invoke(\n    {\"messages\": [\"What was a positive news story from today?\"]}\n)\n</code></pre> <p>\u8bf7\u67e5\u9605\u4f60\u4f7f\u7528\u7684\u7279\u5b9a\u6a21\u578b\u7684\u6587\u6863\uff0c\u4e86\u89e3\u54ea\u4e9b\u5de5\u5177\u53ef\u7528\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\u3002</p> JavaScript <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u5e26\u6709\u5de5\u5177\u89c4\u8303\u7684\u5b57\u5178\u4f20\u9012\u7ed9 <code>createReactAgent</code> \u7684 <code>tools</code> \u53c2\u6570\u6765\u4f7f\u7528\u6a21\u578b\u63d0\u4f9b\u5546\u7684\u9884\u6784\u5efa\u5de5\u5177\u3002\u4f8b\u5982\uff0c\u8981\u4f7f\u7528 OpenAI \u7684 <code>web_search_preview</code> \u5de5\u5177\uff1a</p> <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { ChatOpenAI } from \"@langchain/openai\";\n\nconst agent = createReactAgent({\n  llm: new ChatOpenAI({ model: \"gpt-4o-mini\" }),\n  tools: [{ type: \"web_search_preview\" }],\n});\n\nconst response = await agent.invoke({\n  messages: [\n    { role: \"user\", content: \"What was a positive news story from today?\" },\n  ],\n});\n</code></pre> <p>\u8bf7\u67e5\u9605\u4f60\u4f7f\u7528\u7684\u7279\u5b9a\u6a21\u578b\u7684\u6587\u6863\uff0c\u4e86\u89e3\u54ea\u4e9b\u5de5\u5177\u53ef\u7528\u4ee5\u53ca\u5982\u4f55\u4f7f\u7528\u5b83\u4eec\u3002</p>"},{"location":"how-tos/tool-calling/#langchain","title":"LangChain \u5de5\u5177","text":"<p>\u6b64\u5916\uff0cLangChain \u652f\u6301\u5e7f\u6cdb\u7684\u9884\u6784\u5efa\u5de5\u5177\u96c6\u6210\uff0c\u7528\u4e8e\u4e0e API\u3001\u6570\u636e\u5e93\u3001\u6587\u4ef6\u7cfb\u7edf\u3001\u7f51\u7edc\u6570\u636e\u7b49\u4ea4\u4e92\u3002\u8fd9\u4e9b\u5de5\u5177\u6269\u5c55\u4e86\u667a\u80fd\u4ee3\u7406\u7684\u529f\u80fd\u5e76\u5b9e\u73b0\u5feb\u901f\u5f00\u53d1\u3002</p> Python <p>\u4f60\u53ef\u4ee5\u5728 LangChain \u96c6\u6210\u76ee\u5f55 \u4e2d\u6d4f\u89c8\u53ef\u7528\u96c6\u6210\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <p>\u4e00\u4e9b\u5e38\u7528\u7684\u5de5\u5177\u7c7b\u522b\u5305\u62ec\uff1a</p> <ul> <li>\u641c\u7d22\uff1aBing\u3001SerpAPI\u3001Tavily</li> <li>\u4ee3\u7801\u89e3\u91ca\u5668\uff1aPython REPL\u3001Node.js REPL</li> <li>\u6570\u636e\u5e93\uff1aSQL\u3001MongoDB\u3001Redis</li> <li>\u7f51\u7edc\u6570\u636e\uff1a\u7f51\u9875\u6293\u53d6\u548c\u6d4f\u89c8</li> <li>API\uff1aOpenWeatherMap\u3001NewsAPI \u7b49</li> </ul> <p>\u8fd9\u4e9b\u96c6\u6210\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u793a\u4f8b\u4e2d\u663e\u793a\u7684\u76f8\u540c <code>tools</code> \u53c2\u6570\u8fdb\u884c\u914d\u7f6e\u5e76\u6dfb\u52a0\u5230\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u4e2d\u3002</p> JavaScript <p>\u4f60\u53ef\u4ee5\u5728 LangChain \u96c6\u6210\u76ee\u5f55 \u4e2d\u6d4f\u89c8\u53ef\u7528\u96c6\u6210\u7684\u5b8c\u6574\u5217\u8868\u3002</p> <p>\u4e00\u4e9b\u5e38\u7528\u7684\u5de5\u5177\u7c7b\u522b\u5305\u62ec\uff1a</p> <ul> <li>\u641c\u7d22\uff1aTavily\u3001SerpAPI</li> <li>\u4ee3\u7801\u89e3\u91ca\u5668\uff1a\u7f51\u7edc\u6d4f\u89c8\u5668\u3001\u8ba1\u7b97\u5668</li> <li>\u6570\u636e\u5e93\uff1aSQL\u3001\u5411\u91cf\u6570\u636e\u5e93</li> <li>\u7f51\u7edc\u6570\u636e\uff1a\u7f51\u9875\u6293\u53d6\u548c\u6d4f\u89c8</li> <li>API\uff1a\u5404\u79cd API \u96c6\u6210</li> </ul> <p>\u8fd9\u4e9b\u96c6\u6210\u53ef\u4ee5\u4f7f\u7528\u4e0a\u8ff0\u793a\u4f8b\u4e2d\u663e\u793a\u7684\u76f8\u540c <code>tools</code> \u53c2\u6570\u8fdb\u884c\u914d\u7f6e\u5e76\u6dfb\u52a0\u5230\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u4e2d\u3002</p>"},{"location":"how-tos/use-functional-api/","title":"\u4f7f\u7528\u51fd\u6570\u5f0f API","text":"<p>\u51fd\u6570\u5f0f API \u5141\u8bb8\u4f60\u4ee5\u6700\u5c0f\u7684\u4ee3\u7801\u4fee\u6539\u5c06 LangGraph \u7684\u6838\u5fc3\u529f\u80fd\u2014\u2014\u6301\u4e45\u5316\u3001\u8bb0\u5fc6\u3001\u4eba\u673a\u534f\u540c \u548c \u6d41\u5f0f\u4f20\u8f93\u2014\u2014\u6dfb\u52a0\u5230\u4f60\u7684\u5e94\u7528\u4e2d\u3002</p> <p>Tip</p> <p>\u6709\u5173\u51fd\u6570\u5f0f API \u7684\u6982\u5ff5\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u51fd\u6570\u5f0f API\u3002</p>"},{"location":"how-tos/use-functional-api/#_1","title":"\u521b\u5efa\u7b80\u5355\u5de5\u4f5c\u6d41","text":"<p>\u5b9a\u4e49 <code>entrypoint</code> \u65f6\uff0c\u8f93\u5165\u4ec5\u9650\u4e8e\u51fd\u6570\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u3002\u8981\u4f20\u9012\u591a\u4e2a\u8f93\u5165\uff0c\u53ef\u4ee5\u4f7f\u7528\u5b57\u5178\u3002</p> Python <pre><code>@entrypoint(checkpointer=checkpointer)\ndef my_workflow(inputs: dict) -&gt; int:\n    value = inputs[\"value\"]\n    another_value = inputs[\"another_value\"]\n    ...\n\nmy_workflow.invoke({\"value\": 1, \"another_value\": 2})\n</code></pre> JavaScript <pre><code>const checkpointer = new MemorySaver();\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"myWorkflow\" },\n  async (inputs: { value: number; anotherValue: number }) =&gt; {\n    const value = inputs.value;\n    const anotherValue = inputs.anotherValue;\n    // ...\n  }\n);\n\nawait myWorkflow.invoke({ value: 1, anotherValue: 2 });\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u7b80\u5355\u5de5\u4f5c\u6d41 Python <pre><code>import uuid\nfrom langgraph.func import entrypoint, task\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n# \u68c0\u67e5\u6570\u5b57\u662f\u5426\u4e3a\u5076\u6570\u7684\u4efb\u52a1\n@task\ndef is_even(number: int) -&gt; bool:\n    return number % 2 == 0\n\n# \u683c\u5f0f\u5316\u6d88\u606f\u7684\u4efb\u52a1\n@task\ndef format_message(is_even: bool) -&gt; str:\n    return \"The number is even.\" if is_even else \"The number is odd.\"\n\n# \u521b\u5efa\u7528\u4e8e\u6301\u4e45\u5316\u7684\u68c0\u67e5\u70b9\u5668\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef workflow(inputs: dict) -&gt; str:\n    \"\"\"\u7b80\u5355\u7684\u6570\u5b57\u5206\u7c7b\u5de5\u4f5c\u6d41\u3002\"\"\"\n    even = is_even(inputs[\"number\"]).result()\n    return format_message(even).result()\n\n# \u4f7f\u7528\u552f\u4e00\u7684\u7ebf\u7a0b ID \u8fd0\u884c\u5de5\u4f5c\u6d41\nconfig = {\"configurable\": {\"thread_id\": str(uuid.uuid4())}}\nresult = workflow.invoke({\"number\": 7}, config=config)\nprint(result)\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { entrypoint, task, MemorySaver } from \"@langchain/langgraph\";\n\n// \u68c0\u67e5\u6570\u5b57\u662f\u5426\u4e3a\u5076\u6570\u7684\u4efb\u52a1\nconst isEven = task(\"isEven\", async (number: number) =&gt; {\n  return number % 2 === 0;\n});\n\n// \u683c\u5f0f\u5316\u6d88\u606f\u7684\u4efb\u52a1\nconst formatMessage = task(\"formatMessage\", async (isEven: boolean) =&gt; {\n  return isEven ? \"The number is even.\" : \"The number is odd.\";\n});\n\n// \u521b\u5efa\u7528\u4e8e\u6301\u4e45\u5316\u7684\u68c0\u67e5\u70b9\u5668\nconst checkpointer = new MemorySaver();\n\nconst workflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (inputs: { number: number }) =&gt; {\n    // \u7b80\u5355\u7684\u6570\u5b57\u5206\u7c7b\u5de5\u4f5c\u6d41\n    const even = await isEven(inputs.number);\n    return await formatMessage(even);\n  }\n);\n\n// \u4f7f\u7528\u552f\u4e00\u7684\u7ebf\u7a0b ID \u8fd0\u884c\u5de5\u4f5c\u6d41\nconst config = { configurable: { thread_id: uuidv4() } };\nconst result = await workflow.invoke({ number: 7 }, config);\nconsole.log(result);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u4f7f\u7528 LLM \u64b0\u5199\u6587\u7ae0 <p>\u6b64\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u5728\u8bed\u6cd5\u4e0a\u4f7f\u7528 <code>@task</code> \u548c <code>@entrypoint</code> \u88c5\u9970\u5668\u3002\u7531\u4e8e\u63d0\u4f9b\u4e86\u68c0\u67e5\u70b9\u5668\uff0c\u5de5\u4f5c\u6d41\u7ed3\u679c\u5c06\u88ab\u6301\u4e45\u5316\u5230\u68c0\u67e5\u70b9\u5668\u4e2d\u3002</p> Python <pre><code>import uuid\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.func import entrypoint, task\nfrom langgraph.checkpoint.memory import InMemorySaver\n\nllm = init_chat_model('openai:gpt-3.5-turbo')\n\n# \u4efb\u52a1\uff1a\u4f7f\u7528 LLM \u751f\u6210\u6587\u7ae0\n@task\ndef compose_essay(topic: str) -&gt; str:\n    \"\"\"\u751f\u6210\u5173\u4e8e\u7ed9\u5b9a\u4e3b\u9898\u7684\u6587\u7ae0\u3002\"\"\"\n    return llm.invoke([\n        {\"role\": \"system\", \"content\": \"You are a helpful assistant that writes essays.\"},\n        {\"role\": \"user\", \"content\": f\"Write an essay about {topic}.\"}\n    ]).content\n\n# \u521b\u5efa\u7528\u4e8e\u6301\u4e45\u5316\u7684\u68c0\u67e5\u70b9\u5668\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef workflow(topic: str) -&gt; str:\n    \"\"\"\u4f7f\u7528 LLM \u751f\u6210\u6587\u7ae0\u7684\u7b80\u5355\u5de5\u4f5c\u6d41\u3002\"\"\"\n    return compose_essay(topic).result()\n\n# \u6267\u884c\u5de5\u4f5c\u6d41\nconfig = {\"configurable\": {\"thread_id\": str(uuid.uuid4())}}\nresult = workflow.invoke(\"the history of flight\", config=config)\nprint(result)\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { entrypoint, task, MemorySaver } from \"@langchain/langgraph\";\n\nconst llm = new ChatOpenAI({ model: \"gpt-3.5-turbo\" });\n\n// \u4efb\u52a1\uff1a\u4f7f\u7528 LLM \u751f\u6210\u6587\u7ae0\nconst composeEssay = task(\"composeEssay\", async (topic: string) =&gt; {\n  // \u751f\u6210\u5173\u4e8e\u7ed9\u5b9a\u4e3b\u9898\u7684\u6587\u7ae0\n  const response = await llm.invoke([\n    { role: \"system\", content: \"You are a helpful assistant that writes essays.\" },\n    { role: \"user\", content: `Write an essay about ${topic}.` }\n  ]);\n  return response.content as string;\n});\n\n// \u521b\u5efa\u7528\u4e8e\u6301\u4e45\u5316\u7684\u68c0\u67e5\u70b9\u5668\nconst checkpointer = new MemorySaver();\n\nconst workflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (topic: string) =&gt; {\n    // \u4f7f\u7528 LLM \u751f\u6210\u6587\u7ae0\u7684\u7b80\u5355\u5de5\u4f5c\u6d41\n    return await composeEssay(topic);\n  }\n);\n\n// \u6267\u884c\u5de5\u4f5c\u6d41\nconst config = { configurable: { thread_id: uuidv4() } };\nconst result = await workflow.invoke(\"the history of flight\", config);\nconsole.log(result);\n</code></pre>"},{"location":"how-tos/use-functional-api/#_2","title":"\u5e76\u884c\u6267\u884c","text":"<p>\u901a\u8fc7\u5e76\u53d1\u8c03\u7528\u4efb\u52a1\u5e76\u7b49\u5f85\u7ed3\u679c\uff0c\u53ef\u4ee5\u5b9e\u73b0\u4efb\u52a1\u7684\u5e76\u884c\u6267\u884c\u3002\u8fd9\u5bf9\u4e8e\u63d0\u9ad8 IO \u5bc6\u96c6\u578b\u4efb\u52a1\uff08\u4f8b\u5982\u8c03\u7528 LLM \u7684 API\uff09\u7684\u6027\u80fd\u975e\u5e38\u6709\u7528\u3002</p> Python <pre><code>@task\ndef add_one(number: int) -&gt; int:\n    return number + 1\n\n@entrypoint(checkpointer=checkpointer)\ndef graph(numbers: list[int]) -&gt; list[str]:\n    futures = [add_one(i) for i in numbers]\n    return [f.result() for f in futures]\n</code></pre> JavaScript <pre><code>const addOne = task(\"addOne\", async (number: number) =&gt; {\n  return number + 1;\n});\n\nconst graph = entrypoint(\n  { checkpointer, name: \"graph\" },\n  async (numbers: number[]) =&gt; {\n    return await Promise.all(numbers.map(addOne));\n  }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u5e76\u884c LLM \u8c03\u7528 <p>\u6b64\u793a\u4f8b\u6f14\u793a\u5982\u4f55\u4f7f\u7528 <code>@task</code> \u5e76\u884c\u8fd0\u884c\u591a\u4e2a LLM \u8c03\u7528\u3002\u6bcf\u4e2a\u8c03\u7528\u751f\u6210\u4e00\u4e2a\u5173\u4e8e\u4e0d\u540c\u4e3b\u9898\u7684\u6bb5\u843d\uff0c\u7ed3\u679c\u5408\u5e76\u4e3a\u5355\u4e2a\u6587\u672c\u8f93\u51fa\u3002</p> Python <pre><code>import uuid\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.func import entrypoint, task\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n# \u521d\u59cb\u5316 LLM \u6a21\u578b\nllm = init_chat_model(\"openai:gpt-3.5-turbo\")\n\n# \u751f\u6210\u5173\u4e8e\u7ed9\u5b9a\u4e3b\u9898\u6bb5\u843d\u7684\u4efb\u52a1\n@task\ndef generate_paragraph(topic: str) -&gt; str:\n    response = llm.invoke([\n        {\"role\": \"system\", \"content\": \"You are a helpful assistant that writes educational paragraphs.\"},\n        {\"role\": \"user\", \"content\": f\"Write a paragraph about {topic}.\"}\n    ])\n    return response.content\n\n# \u521b\u5efa\u7528\u4e8e\u6301\u4e45\u5316\u7684\u68c0\u67e5\u70b9\u5668\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef workflow(topics: list[str]) -&gt; str:\n    \"\"\"\u5e76\u884c\u751f\u6210\u591a\u4e2a\u6bb5\u843d\u5e76\u5408\u5e76\u5b83\u4eec\u3002\"\"\"\n    futures = [generate_paragraph(topic) for topic in topics]\n    paragraphs = [f.result() for f in futures]\n    return \"\\n\\n\".join(paragraphs)\n\n# \u8fd0\u884c\u5de5\u4f5c\u6d41\nconfig = {\"configurable\": {\"thread_id\": str(uuid.uuid4())}}\nresult = workflow.invoke([\"quantum computing\", \"climate change\", \"history of aviation\"], config=config)\nprint(result)\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { entrypoint, task, MemorySaver } from \"@langchain/langgraph\";\n\n// \u521d\u59cb\u5316 LLM \u6a21\u578b\nconst llm = new ChatOpenAI({ model: \"gpt-3.5-turbo\" });\n\n// \u751f\u6210\u5173\u4e8e\u7ed9\u5b9a\u4e3b\u9898\u6bb5\u843d\u7684\u4efb\u52a1\nconst generateParagraph = task(\"generateParagraph\", async (topic: string) =&gt; {\n  const response = await llm.invoke([\n    { role: \"system\", content: \"You are a helpful assistant that writes educational paragraphs.\" },\n    { role: \"user\", content: `Write a paragraph about ${topic}.` }\n  ]);\n  return response.content as string;\n});\n\n// \u521b\u5efa\u7528\u4e8e\u6301\u4e45\u5316\u7684\u68c0\u67e5\u70b9\u5668\nconst checkpointer = new MemorySaver();\n\nconst workflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (topics: string[]) =&gt; {\n    // \u5e76\u884c\u751f\u6210\u591a\u4e2a\u6bb5\u843d\u5e76\u5408\u5e76\u5b83\u4eec\n    const paragraphs = await Promise.all(topics.map(generateParagraph));\n    return paragraphs.join(\"\\n\\n\");\n  }\n);\n\n// \u8fd0\u884c\u5de5\u4f5c\u6d41\nconst config = { configurable: { thread_id: uuidv4() } };\nconst result = await workflow.invoke([\"quantum computing\", \"climate change\", \"history of aviation\"], config);\nconsole.log(result);\n</code></pre> <p>\u6b64\u793a\u4f8b\u4f7f\u7528 LangGraph \u7684\u5e76\u53d1\u6a21\u578b\u6765\u6539\u5584\u6267\u884c\u65f6\u95f4\uff0c\u7279\u522b\u662f\u5f53\u4efb\u52a1\u6d89\u53ca LLM \u8c03\u7528\u7b49 I/O \u64cd\u4f5c\u65f6\u3002</p>"},{"location":"how-tos/use-functional-api/#_3","title":"\u8c03\u7528\u56fe","text":"<p>\u51fd\u6570\u5f0f API \u548c \u56fe API \u53ef\u4ee5\u5728\u540c\u4e00\u4e2a\u5e94\u7528\u4e2d\u4e00\u8d77\u4f7f\u7528\uff0c\u56e0\u4e3a\u5b83\u4eec\u5171\u4eab\u76f8\u540c\u7684\u5e95\u5c42\u8fd0\u884c\u65f6\u3002</p> Python <pre><code>from langgraph.func import entrypoint\nfrom langgraph.graph import StateGraph\n\nbuilder = StateGraph()\n...\nsome_graph = builder.compile()\n\n@entrypoint()\ndef some_workflow(some_input: dict) -&gt; int:\n    # \u8c03\u7528\u4f7f\u7528\u56fe API \u5b9a\u4e49\u7684\u56fe\n    result_1 = some_graph.invoke(...)\n    # \u8c03\u7528\u53e6\u4e00\u4e2a\u4f7f\u7528\u56fe API \u5b9a\u4e49\u7684\u56fe\n    result_2 = another_graph.invoke(...)\n    return {\n        \"result_1\": result_1,\n        \"result_2\": result_2\n    }\n</code></pre> JavaScript <pre><code>import { entrypoint } from \"@langchain/langgraph\";\nimport { StateGraph } from \"@langchain/langgraph\";\n\nconst builder = new StateGraph(/* ... */);\n// ...\nconst someGraph = builder.compile();\n\nconst someWorkflow = entrypoint(\n  { name: \"someWorkflow\" },\n  async (someInput: Record&lt;string, any&gt;) =&gt; {\n    // \u8c03\u7528\u4f7f\u7528\u56fe API \u5b9a\u4e49\u7684\u56fe\n    const result1 = await someGraph.invoke(/* ... */);\n    // \u8c03\u7528\u53e6\u4e00\u4e2a\u4f7f\u7528\u56fe API \u5b9a\u4e49\u7684\u56fe\n    const result2 = await anotherGraph.invoke(/* ... */);\n    return {\n      result1,\n      result2,\n    };\n  }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u4ece\u51fd\u6570\u5f0f API \u8c03\u7528\u7b80\u5355\u56fe Python <pre><code>import uuid\nfrom typing import TypedDict\nfrom langgraph.func import entrypoint\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph\n\n# \u5b9a\u4e49\u5171\u4eab\u72b6\u6001\u7c7b\u578b\nclass State(TypedDict):\n    foo: int\n\n# \u5b9a\u4e49\u7b80\u5355\u7684\u8f6c\u6362\u8282\u70b9\ndef double(state: State) -&gt; State:\n    return {\"foo\": state[\"foo\"] * 2}\n\n# \u4f7f\u7528\u56fe API \u6784\u5efa\u56fe\nbuilder = StateGraph(State)\nbuilder.add_node(\"double\", double)\nbuilder.set_entry_point(\"double\")\ngraph = builder.compile()\n\n# \u5b9a\u4e49\u51fd\u6570\u5f0f API \u5de5\u4f5c\u6d41\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef workflow(x: int) -&gt; dict:\n    result = graph.invoke({\"foo\": x})\n    return {\"bar\": result[\"foo\"]}\n\n# \u6267\u884c\u5de5\u4f5c\u6d41\nconfig = {\"configurable\": {\"thread_id\": str(uuid.uuid4())}}\nprint(workflow.invoke(5, config=config))  # \u8f93\u51fa: {'bar': 10}\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { entrypoint, MemorySaver } from \"@langchain/langgraph\";\nimport { StateGraph } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// \u5b9a\u4e49\u5171\u4eab\u72b6\u6001\u7c7b\u578b\nconst State = z.object({\n  foo: z.number(),\n});\n\n// \u4f7f\u7528\u56fe API \u6784\u5efa\u56fe\nconst builder = new StateGraph(State)\n  .addNode(\"double\", (state) =&gt; {\n    return { foo: state.foo * 2 };\n  })\n  .addEdge(\"__start__\", \"double\");\nconst graph = builder.compile();\n\n// \u5b9a\u4e49\u51fd\u6570\u5f0f API \u5de5\u4f5c\u6d41\nconst checkpointer = new MemorySaver();\n\nconst workflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (x: number) =&gt; {\n    const result = await graph.invoke({ foo: x });\n    return { bar: result.foo };\n  }\n);\n\n// \u6267\u884c\u5de5\u4f5c\u6d41\nconst config = { configurable: { thread_id: uuidv4() } };\nconsole.log(await workflow.invoke(5, config)); // \u8f93\u51fa: { bar: 10 }\n</code></pre>"},{"location":"how-tos/use-functional-api/#_4","title":"\u8c03\u7528\u5176\u4ed6\u5165\u53e3\u70b9","text":"<p>\u4f60\u53ef\u4ee5\u5728 entrypoint \u6216 task \u4e2d\u8c03\u7528\u5176\u4ed6 entrypoint\u3002</p> Python <pre><code>@entrypoint() # \u5c06\u81ea\u52a8\u4f7f\u7528\u7236\u5165\u53e3\u70b9\u7684\u68c0\u67e5\u70b9\u5668\ndef some_other_workflow(inputs: dict) -&gt; int:\n    return inputs[\"value\"]\n\n@entrypoint(checkpointer=checkpointer)\ndef my_workflow(inputs: dict) -&gt; int:\n    value = some_other_workflow.invoke({\"value\": 1})\n    return value\n</code></pre> JavaScript <pre><code>// \u5c06\u81ea\u52a8\u4f7f\u7528\u7236\u5165\u53e3\u70b9\u7684\u68c0\u67e5\u70b9\u5668\nconst someOtherWorkflow = entrypoint(\n  { name: \"someOtherWorkflow\" },\n  async (inputs: { value: number }) =&gt; {\n    return inputs.value;\n  }\n);\n\nconst myWorkflow = entrypoint(\n  { checkpointer, name: \"myWorkflow\" },\n  async (inputs: { value: number }) =&gt; {\n    const value = await someOtherWorkflow.invoke({ value: 1 });\n    return value;\n  }\n);\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u8c03\u7528\u53e6\u4e00\u4e2a\u5165\u53e3\u70b9 Python <pre><code>import uuid\nfrom langgraph.func import entrypoint\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n# \u521d\u59cb\u5316\u68c0\u67e5\u70b9\u5668\ncheckpointer = InMemorySaver()\n\n# \u53ef\u590d\u7528\u7684\u5b50\u5de5\u4f5c\u6d41\uff0c\u7528\u4e8e\u4e58\u6cd5\u8fd0\u7b97\n@entrypoint()\ndef multiply(inputs: dict) -&gt; int:\n    return inputs[\"a\"] * inputs[\"b\"]\n\n# \u8c03\u7528\u5b50\u5de5\u4f5c\u6d41\u7684\u4e3b\u5de5\u4f5c\u6d41\n@entrypoint(checkpointer=checkpointer)\ndef main(inputs: dict) -&gt; dict:\n    result = multiply.invoke({\"a\": inputs[\"x\"], \"b\": inputs[\"y\"]})\n    return {\"product\": result}\n\n# \u6267\u884c\u4e3b\u5de5\u4f5c\u6d41\nconfig = {\"configurable\": {\"thread_id\": str(uuid.uuid4())}}\nprint(main.invoke({\"x\": 6, \"y\": 7}, config=config))  # \u8f93\u51fa: {'product': 42}\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { entrypoint, MemorySaver } from \"@langchain/langgraph\";\n\n// \u521d\u59cb\u5316\u68c0\u67e5\u70b9\u5668\nconst checkpointer = new MemorySaver();\n\n// \u53ef\u590d\u7528\u7684\u5b50\u5de5\u4f5c\u6d41\uff0c\u7528\u4e8e\u4e58\u6cd5\u8fd0\u7b97\nconst multiply = entrypoint(\n  { name: \"multiply\" },\n  async (inputs: { a: number; b: number }) =&gt; {\n    return inputs.a * inputs.b;\n  }\n);\n\n// \u8c03\u7528\u5b50\u5de5\u4f5c\u6d41\u7684\u4e3b\u5de5\u4f5c\u6d41\nconst main = entrypoint(\n  { checkpointer, name: \"main\" },\n  async (inputs: { x: number; y: number }) =&gt; {\n    const result = await multiply.invoke({ a: inputs.x, b: inputs.y });\n    return { product: result };\n  }\n);\n\n// \u6267\u884c\u4e3b\u5de5\u4f5c\u6d41\nconst config = { configurable: { thread_id: uuidv4() } };\nconsole.log(await main.invoke({ x: 6, y: 7 }, config)); // \u8f93\u51fa: { product: 42 }\n</code></pre>"},{"location":"how-tos/use-functional-api/#_5","title":"\u6d41\u5f0f\u4f20\u8f93","text":"<p>\u51fd\u6570\u5f0f API \u4f7f\u7528\u4e0e \u56fe API \u76f8\u540c\u7684\u6d41\u5f0f\u4f20\u8f93\u673a\u5236\u3002\u8bf7\u9605\u8bfb \u6d41\u5f0f\u4f20\u8f93\u6307\u5357 \u90e8\u5206\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</p> <p>\u4ee5\u4e0b\u662f\u4f7f\u7528\u6d41\u5f0f\u4f20\u8f93 API \u540c\u65f6\u6d41\u5f0f\u4f20\u8f93\u66f4\u65b0\u548c\u81ea\u5b9a\u4e49\u6570\u636e\u7684\u793a\u4f8b\u3002</p> Python <pre><code>from langgraph.func import entrypoint\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.config import get_stream_writer # (1)!\n\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef main(inputs: dict) -&gt; int:\n    writer = get_stream_writer() # (2)!\n    writer(\"Started processing\") # (3)!\n    result = inputs[\"x\"] * 2\n    writer(f\"Result is {result}\") # (4)!\n    return result\n\nconfig = {\"configurable\": {\"thread_id\": \"abc\"}}\n\n# highlight-next-line\nfor mode, chunk in main.stream( # (5)!\n    {\"x\": 5},\n    stream_mode=[\"custom\", \"updates\"], # (6)!\n    config=config\n):\n    print(f\"{mode}: {chunk}\")\n</code></pre> <ol> <li>\u4ece <code>langgraph.config</code> \u5bfc\u5165 <code>get_stream_writer</code>\u3002</li> <li>\u5728\u5165\u53e3\u70b9\u4e2d\u83b7\u53d6\u6d41\u5199\u5165\u5668\u5b9e\u4f8b\u3002</li> <li>\u5728\u8ba1\u7b97\u5f00\u59cb\u524d\u53d1\u51fa\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u5728\u8ba1\u7b97\u7ed3\u679c\u540e\u53d1\u51fa\u53e6\u4e00\u6761\u81ea\u5b9a\u4e49\u6d88\u606f\u3002</li> <li>\u4f7f\u7528 <code>.stream()</code> \u5904\u7406\u6d41\u5f0f\u8f93\u51fa\u3002</li> <li>\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u3002</li> </ol> <pre><code>('updates', {'add_one': 2})\n('updates', {'add_two': 3})\n('custom', 'hello')\n('custom', 'world')\n('updates', {'main': 5})\n</code></pre> <p>Python &lt; 3.11 \u7684\u5f02\u6b65\u4f7f\u7528</p> <p>\u5982\u679c\u4f7f\u7528 Python &lt; 3.11 \u5e76\u7f16\u5199\u5f02\u6b65\u4ee3\u7801\uff0c\u4f7f\u7528 <code>get_stream_writer()</code> \u5c06\u65e0\u6cd5\u6b63\u5e38\u5de5\u4f5c\u3002\u8bf7\u76f4\u63a5\u4f7f\u7528 <code>StreamWriter</code> \u7c7b\u3002\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u9605 Python &lt; 3.11 \u7684\u5f02\u6b65\u4f7f\u7528\u3002</p> <pre><code>from langgraph.types import StreamWriter\n\n@entrypoint(checkpointer=checkpointer)\n# highlight-next-line\nasync def main(inputs: dict, writer: StreamWriter) -&gt; int:\n    ...\n</code></pre> JavaScript <pre><code>import {\n  entrypoint,\n  MemorySaver,\n  LangGraphRunnableConfig,\n} from \"@langchain/langgraph\";\n\nconst checkpointer = new MemorySaver();\n\nconst main = entrypoint(\n  { checkpointer, name: \"main\" },\n  async (\n    inputs: { x: number },\n    config: LangGraphRunnableConfig\n  ): Promise&lt;number&gt; =&gt; {\n    config.writer?.(\"Started processing\"); // (1)!\n    const result = inputs.x * 2;\n    config.writer?.(`Result is ${result}`); // (2)!\n    return result;\n  }\n);\n\nconst config = { configurable: { thread_id: \"abc\" } };\n\n// (3)!\nfor await (const [mode, chunk] of await main.stream(\n  { x: 5 },\n  { streamMode: [\"custom\", \"updates\"], ...config } // (4)!\n)) {\n  console.log(`${mode}: ${JSON.stringify(chunk)}`);\n}\n</code></pre> <ol> <li>\u5728\u8ba1\u7b97\u5f00\u59cb\u524d\u53d1\u51fa\u81ea\u5b9a\u4e49\u6570\u636e\u3002</li> <li>\u5728\u8ba1\u7b97\u7ed3\u679c\u540e\u53d1\u51fa\u53e6\u4e00\u6761\u81ea\u5b9a\u4e49\u6d88\u606f\u3002</li> <li>\u4f7f\u7528 <code>.stream()</code> \u5904\u7406\u6d41\u5f0f\u8f93\u51fa\u3002</li> <li>\u6307\u5b9a\u8981\u4f7f\u7528\u7684\u6d41\u5f0f\u4f20\u8f93\u6a21\u5f0f\u3002</li> </ol> <pre><code>updates: {\"addOne\": 2}\nupdates: {\"addTwo\": 3}\ncustom: \"hello\"\ncustom: \"world\"\nupdates: {\"main\": 5}\n</code></pre>"},{"location":"how-tos/use-functional-api/#_6","title":"\u91cd\u8bd5\u7b56\u7565","text":"Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.func import entrypoint, task\nfrom langgraph.types import RetryPolicy\n\n# \u6b64\u53d8\u91cf\u4ec5\u7528\u4e8e\u6f14\u793a\u76ee\u7684\uff0c\u6a21\u62df\u7f51\u7edc\u6545\u969c\u3002\n# \u8fd9\u4e0d\u662f\u4f60\u5728\u5b9e\u9645\u4ee3\u7801\u4e2d\u4f1a\u6709\u7684\u5185\u5bb9\u3002\nattempts = 0\n\n# \u8ba9\u6211\u4eec\u914d\u7f6e RetryPolicy \u4ee5\u5728 ValueError \u65f6\u91cd\u8bd5\u3002\n# \u9ed8\u8ba4\u7684 RetryPolicy \u9488\u5bf9\u7279\u5b9a\u7f51\u7edc\u9519\u8bef\u8fdb\u884c\u4e86\u4f18\u5316\u3002\nretry_policy = RetryPolicy(retry_on=ValueError)\n\n@task(retry_policy=retry_policy)\ndef get_info():\n    global attempts\n    attempts += 1\n\n    if attempts &lt; 2:\n        raise ValueError('Failure')\n    return \"OK\"\n\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef main(inputs, writer):\n    return get_info().result()\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"1\"\n    }\n}\n\nmain.invoke({'any_input': 'foobar'}, config=config)\n</code></pre> <pre><code>'OK'\n</code></pre> JavaScript <pre><code>import {\n  MemorySaver,\n  entrypoint,\n  task,\n  RetryPolicy,\n} from \"@langchain/langgraph\";\n\n// \u6b64\u53d8\u91cf\u4ec5\u7528\u4e8e\u6f14\u793a\u76ee\u7684\uff0c\u6a21\u62df\u7f51\u7edc\u6545\u969c\u3002\n// \u8fd9\u4e0d\u662f\u4f60\u5728\u5b9e\u9645\u4ee3\u7801\u4e2d\u4f1a\u6709\u7684\u5185\u5bb9\u3002\nlet attempts = 0;\n\n// \u8ba9\u6211\u4eec\u914d\u7f6e RetryPolicy \u4ee5\u5728 ValueError \u65f6\u91cd\u8bd5\u3002\n// \u9ed8\u8ba4\u7684 RetryPolicy \u9488\u5bf9\u7279\u5b9a\u7f51\u7edc\u9519\u8bef\u8fdb\u884c\u4e86\u4f18\u5316\u3002\nconst retryPolicy: RetryPolicy = { retryOn: (error) =&gt; error instanceof Error };\n\nconst getInfo = task(\n  {\n    name: \"getInfo\",\n    retry: retryPolicy,\n  },\n  () =&gt; {\n    attempts += 1;\n\n    if (attempts &lt; 2) {\n      throw new Error(\"Failure\");\n    }\n    return \"OK\";\n  }\n);\n\nconst checkpointer = new MemorySaver();\n\nconst main = entrypoint(\n  { checkpointer, name: \"main\" },\n  async (inputs: Record&lt;string, any&gt;) =&gt; {\n    return await getInfo();\n  }\n);\n\nconst config = {\n  configurable: {\n    thread_id: \"1\",\n  },\n};\n\nawait main.invoke({ any_input: \"foobar\" }, config);\n</code></pre> <pre><code>'OK'\n</code></pre>"},{"location":"how-tos/use-functional-api/#_7","title":"\u7f13\u5b58\u4efb\u52a1","text":"Python <pre><code>import time\nfrom langgraph.cache.memory import InMemoryCache\nfrom langgraph.func import entrypoint, task\nfrom langgraph.types import CachePolicy\n\n\n@task(cache_policy=CachePolicy(ttl=120))  # (1)!\ndef slow_add(x: int) -&gt; int:\n    time.sleep(1)\n    return x * 2\n\n\n@entrypoint(cache=InMemoryCache())\ndef main(inputs: dict) -&gt; dict[str, int]:\n    result1 = slow_add(inputs[\"x\"]).result()\n    result2 = slow_add(inputs[\"x\"]).result()\n    return {\"result1\": result1, \"result2\": result2}\n\n\nfor chunk in main.stream({\"x\": 5}, stream_mode=\"updates\"):\n    print(chunk)\n\n#&gt; {'slow_add': 10}\n#&gt; {'slow_add': 10, '__metadata__': {'cached': True}}\n#&gt; {'main': {'result1': 10, 'result2': 10}}\n</code></pre> <ol> <li><code>ttl</code> \u4ee5\u79d2\u4e3a\u5355\u4f4d\u6307\u5b9a\u3002\u7f13\u5b58\u5c06\u5728\u6b64\u65f6\u95f4\u540e\u5931\u6548\u3002</li> </ol> JavaScript <pre><code>import {\n  InMemoryCache,\n  entrypoint,\n  task,\n  CachePolicy,\n} from \"@langchain/langgraph\";\n\nconst slowAdd = task(\n  {\n    name: \"slowAdd\",\n    cache: { ttl: 120 }, // (1)!\n  },\n  async (x: number) =&gt; {\n    await new Promise((resolve) =&gt; setTimeout(resolve, 1000));\n    return x * 2;\n  }\n);\n\nconst main = entrypoint(\n  { cache: new InMemoryCache(), name: \"main\" },\n  async (inputs: { x: number }) =&gt; {\n    const result1 = await slowAdd(inputs.x);\n    const result2 = await slowAdd(inputs.x);\n    return { result1, result2 };\n  }\n);\n\nfor await (const chunk of await main.stream(\n  { x: 5 },\n  { streamMode: \"updates\" }\n)) {\n  console.log(chunk);\n}\n\n//&gt; { slowAdd: 10 }\n//&gt; { slowAdd: 10, '__metadata__': { cached: true } }\n//&gt; { main: { result1: 10, result2: 10 } }\n</code></pre> <ol> <li><code>ttl</code> \u4ee5\u79d2\u4e3a\u5355\u4f4d\u6307\u5b9a\u3002\u7f13\u5b58\u5c06\u5728\u6b64\u65f6\u95f4\u540e\u5931\u6548\u3002</li> </ol>"},{"location":"how-tos/use-functional-api/#_8","title":"\u9519\u8bef\u540e\u6062\u590d","text":"Python <pre><code>import time\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.func import entrypoint, task\nfrom langgraph.types import StreamWriter\n\n# \u6b64\u53d8\u91cf\u4ec5\u7528\u4e8e\u6f14\u793a\u76ee\u7684\uff0c\u6a21\u62df\u7f51\u7edc\u6545\u969c\u3002\n# \u8fd9\u4e0d\u662f\u4f60\u5728\u5b9e\u9645\u4ee3\u7801\u4e2d\u4f1a\u6709\u7684\u5185\u5bb9\u3002\nattempts = 0\n\n@task()\ndef get_info():\n    \"\"\"\n    \u6a21\u62df\u4e00\u4e2a\u5728\u6210\u529f\u4e4b\u524d\u5931\u8d25\u4e00\u6b21\u7684\u4efb\u52a1\u3002\n    \u5728\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\u629b\u51fa\u5f02\u5e38\uff0c\u7136\u540e\u5728\u540e\u7eed\u5c1d\u8bd5\u4e2d\u8fd4\u56de \"OK\"\u3002\n    \"\"\"\n    global attempts\n    attempts += 1\n\n    if attempts &lt; 2:\n        raise ValueError(\"Failure\")  # \u6a21\u62df\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u5931\u8d25\n    return \"OK\"\n\n# \u521d\u59cb\u5316\u7528\u4e8e\u6301\u4e45\u5316\u7684\u5185\u5b58\u68c0\u67e5\u70b9\u5668\ncheckpointer = InMemorySaver()\n\n@task\ndef slow_task():\n    \"\"\"\n    \u901a\u8fc7\u5f15\u5165 1 \u79d2\u5ef6\u8fdf\u6765\u6a21\u62df\u6162\u901f\u4efb\u52a1\u3002\n    \"\"\"\n    time.sleep(1)\n    return \"Ran slow task.\"\n\n@entrypoint(checkpointer=checkpointer)\ndef main(inputs, writer: StreamWriter):\n    \"\"\"\n    \u6309\u987a\u5e8f\u8fd0\u884c slow_task \u548c get_info \u4efb\u52a1\u7684\u4e3b\u5de5\u4f5c\u6d41\u51fd\u6570\u3002\n\n    \u53c2\u6570:\n    - inputs: \u5305\u542b\u5de5\u4f5c\u6d41\u8f93\u5165\u503c\u7684\u5b57\u5178\u3002\n    - writer: \u7528\u4e8e\u6d41\u5f0f\u4f20\u8f93\u81ea\u5b9a\u4e49\u6570\u636e\u7684 StreamWriter\u3002\n\n    \u5de5\u4f5c\u6d41\u9996\u5148\u6267\u884c `slow_task`\uff0c\u7136\u540e\u5c1d\u8bd5\u6267\u884c `get_info`\uff0c\n    \u540e\u8005\u5c06\u5728\u7b2c\u4e00\u6b21\u8c03\u7528\u65f6\u5931\u8d25\u3002\n    \"\"\"\n    slow_task_result = slow_task().result()  # \u963b\u585e\u8c03\u7528 slow_task\n    get_info().result()  # \u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\u5c06\u5728\u6b64\u5904\u629b\u51fa\u5f02\u5e38\n    return slow_task_result\n\n# \u5e26\u6709\u552f\u4e00\u7ebf\u7a0b\u6807\u8bc6\u7b26\u7684\u5de5\u4f5c\u6d41\u6267\u884c\u914d\u7f6e\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"1\"  # \u7528\u4e8e\u8ddf\u8e2a\u5de5\u4f5c\u6d41\u6267\u884c\u7684\u552f\u4e00\u6807\u8bc6\u7b26\n    }\n}\n\n# \u7531\u4e8e slow_task \u6267\u884c\uff0c\u6b64\u8c03\u7528\u5c06\u82b1\u8d39\u7ea6 1 \u79d2\ntry:\n    # \u7b2c\u4e00\u6b21\u8c03\u7528\u5c06\u56e0 `get_info` \u4efb\u52a1\u5931\u8d25\u800c\u629b\u51fa\u5f02\u5e38\n    main.invoke({'any_input': 'foobar'}, config=config)\nexcept ValueError:\n    pass  # \u4f18\u96c5\u5730\u5904\u7406\u5931\u8d25\n</code></pre> <p>\u5f53\u6211\u4eec\u6062\u590d\u6267\u884c\u65f6\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u8fd0\u884c <code>slow_task</code>\uff0c\u56e0\u4e3a\u5176\u7ed3\u679c\u5df2\u4fdd\u5b58\u5728\u68c0\u67e5\u70b9\u4e2d\u3002</p> <pre><code>main.invoke(None, config=config)\n</code></pre> <pre><code>'Ran slow task.'\n</code></pre> JavaScript <pre><code>import { entrypoint, task, MemorySaver } from \"@langchain/langgraph\";\n\n// \u6b64\u53d8\u91cf\u4ec5\u7528\u4e8e\u6f14\u793a\u76ee\u7684\uff0c\u6a21\u62df\u7f51\u7edc\u6545\u969c\u3002\n// \u8fd9\u4e0d\u662f\u4f60\u5728\u5b9e\u9645\u4ee3\u7801\u4e2d\u4f1a\u6709\u7684\u5185\u5bb9\u3002\nlet attempts = 0;\n\nconst getInfo = task(\"getInfo\", async () =&gt; {\n  /**\n   * \u6a21\u62df\u4e00\u4e2a\u5728\u6210\u529f\u4e4b\u524d\u5931\u8d25\u4e00\u6b21\u7684\u4efb\u52a1\u3002\n   * \u5728\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\u629b\u51fa\u5f02\u5e38\uff0c\u7136\u540e\u5728\u540e\u7eed\u5c1d\u8bd5\u4e2d\u8fd4\u56de \"OK\"\u3002\n   */\n  attempts += 1;\n\n  if (attempts &lt; 2) {\n    throw new Error(\"Failure\"); // \u6a21\u62df\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u5931\u8d25\n  }\n  return \"OK\";\n});\n\n// \u521d\u59cb\u5316\u7528\u4e8e\u6301\u4e45\u5316\u7684\u5185\u5b58\u68c0\u67e5\u70b9\u5668\nconst checkpointer = new MemorySaver();\n\nconst slowTask = task(\"slowTask\", async () =&gt; {\n  /**\n   * \u901a\u8fc7\u5f15\u5165 1 \u79d2\u5ef6\u8fdf\u6765\u6a21\u62df\u6162\u901f\u4efb\u52a1\u3002\n   */\n  await new Promise((resolve) =&gt; setTimeout(resolve, 1000));\n  return \"Ran slow task.\";\n});\n\nconst main = entrypoint(\n  { checkpointer, name: \"main\" },\n  async (inputs: Record&lt;string, any&gt;) =&gt; {\n    /**\n     * \u6309\u987a\u5e8f\u8fd0\u884c slowTask \u548c getInfo \u4efb\u52a1\u7684\u4e3b\u5de5\u4f5c\u6d41\u51fd\u6570\u3002\n     *\n     * \u53c2\u6570:\n     * - inputs: Record&lt;string, any&gt; \u5305\u542b\u5de5\u4f5c\u6d41\u8f93\u5165\u503c\u3002\n     *\n     * \u5de5\u4f5c\u6d41\u9996\u5148\u6267\u884c `slowTask`\uff0c\u7136\u540e\u5c1d\u8bd5\u6267\u884c `getInfo`\uff0c\n     * \u540e\u8005\u5c06\u5728\u7b2c\u4e00\u6b21\u8c03\u7528\u65f6\u5931\u8d25\u3002\n     */\n    const slowTaskResult = await slowTask(); // \u963b\u585e\u8c03\u7528 slowTask\n    await getInfo(); // \u7b2c\u4e00\u6b21\u5c1d\u8bd5\u65f6\u5c06\u5728\u6b64\u5904\u629b\u51fa\u5f02\u5e38\n    return slowTaskResult;\n  }\n);\n\n// \u5e26\u6709\u552f\u4e00\u7ebf\u7a0b\u6807\u8bc6\u7b26\u7684\u5de5\u4f5c\u6d41\u6267\u884c\u914d\u7f6e\nconst config = {\n  configurable: {\n    thread_id: \"1\", // \u7528\u4e8e\u8ddf\u8e2a\u5de5\u4f5c\u6d41\u6267\u884c\u7684\u552f\u4e00\u6807\u8bc6\u7b26\n  },\n};\n\n// \u7531\u4e8e slowTask \u6267\u884c\uff0c\u6b64\u8c03\u7528\u5c06\u82b1\u8d39\u7ea6 1 \u79d2\ntry {\n  // \u7b2c\u4e00\u6b21\u8c03\u7528\u5c06\u56e0 `getInfo` \u4efb\u52a1\u5931\u8d25\u800c\u629b\u51fa\u5f02\u5e38\n  await main.invoke({ any_input: \"foobar\" }, config);\n} catch (err) {\n  // \u4f18\u96c5\u5730\u5904\u7406\u5931\u8d25\n}\n</code></pre> <p>\u5f53\u6211\u4eec\u6062\u590d\u6267\u884c\u65f6\uff0c\u4e0d\u9700\u8981\u91cd\u65b0\u8fd0\u884c <code>slowTask</code>\uff0c\u56e0\u4e3a\u5176\u7ed3\u679c\u5df2\u4fdd\u5b58\u5728\u68c0\u67e5\u70b9\u4e2d\u3002</p> <pre><code>await main.invoke(null, config);\n</code></pre> <pre><code>'Ran slow task.'\n</code></pre>"},{"location":"how-tos/use-functional-api/#_9","title":"\u4eba\u673a\u534f\u540c","text":"<p>\u51fd\u6570\u5f0f API \u4f7f\u7528 <code>interrupt</code> \u51fd\u6570\u548c <code>Command</code> \u539f\u8bed\u652f\u6301 \u4eba\u673a\u534f\u540c \u5de5\u4f5c\u6d41\u3002</p>"},{"location":"how-tos/use-functional-api/#_10","title":"\u57fa\u672c\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41","text":"<p>\u6211\u4eec\u5c06\u521b\u5efa\u4e09\u4e2a \u4efb\u52a1\uff1a</p> <ol> <li>\u8ffd\u52a0 <code>\"bar\"</code>\u3002</li> <li>\u6682\u505c\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002\u6062\u590d\u65f6\uff0c\u8ffd\u52a0\u4eba\u5de5\u8f93\u5165\u3002</li> <li>\u8ffd\u52a0 <code>\"qux\"</code>\u3002</li> </ol> Python <pre><code>from langgraph.func import entrypoint, task\nfrom langgraph.types import Command, interrupt\n\n\n@task\ndef step_1(input_query):\n    \"\"\"\u8ffd\u52a0 bar\u3002\"\"\"\n    return f\"{input_query} bar\"\n\n\n@task\ndef human_feedback(input_query):\n    \"\"\"\u8ffd\u52a0\u7528\u6237\u8f93\u5165\u3002\"\"\"\n    feedback = interrupt(f\"Please provide feedback: {input_query}\")\n    return f\"{input_query} {feedback}\"\n\n\n@task\ndef step_3(input_query):\n    \"\"\"\u8ffd\u52a0 qux\u3002\"\"\"\n    return f\"{input_query} qux\"\n</code></pre> JavaScript <pre><code>import { entrypoint, task, interrupt, Command } from \"@langchain/langgraph\";\n\nconst step1 = task(\"step1\", async (inputQuery: string) =&gt; {\n  // \u8ffd\u52a0 bar\n  return `${inputQuery} bar`;\n});\n\nconst humanFeedback = task(\"humanFeedback\", async (inputQuery: string) =&gt; {\n  // \u8ffd\u52a0\u7528\u6237\u8f93\u5165\n  const feedback = interrupt(`Please provide feedback: ${inputQuery}`);\n  return `${inputQuery} ${feedback}`;\n});\n\nconst step3 = task(\"step3\", async (inputQuery: string) =&gt; {\n  // \u8ffd\u52a0 qux\n  return `${inputQuery} qux`;\n});\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5728 \u5165\u53e3\u70b9 \u4e2d\u7ec4\u5408\u8fd9\u4e9b\u4efb\u52a1\uff1a</p> Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\n\ncheckpointer = InMemorySaver()\n\n\n@entrypoint(checkpointer=checkpointer)\ndef graph(input_query):\n    result_1 = step_1(input_query).result()\n    result_2 = human_feedback(result_1).result()\n    result_3 = step_3(result_2).result()\n\n    return result_3\n</code></pre> JavaScript <pre><code>import { MemorySaver } from \"@langchain/langgraph\";\n\nconst checkpointer = new MemorySaver();\n\nconst graph = entrypoint(\n  { checkpointer, name: \"graph\" },\n  async (inputQuery: string) =&gt; {\n    const result1 = await step1(inputQuery);\n    const result2 = await humanFeedback(result1);\n    const result3 = await step3(result2);\n\n    return result3;\n  }\n);\n</code></pre> <p>interrupt() \u5728\u4efb\u52a1\u4e2d\u88ab\u8c03\u7528\uff0c\u4f7f\u4eba\u5de5\u80fd\u591f\u5ba1\u67e5\u548c\u7f16\u8f91\u524d\u4e00\u4e2a\u4efb\u52a1\u7684\u8f93\u51fa\u3002\u5148\u524d\u4efb\u52a1\u7684\u7ed3\u679c\u2014\u2014\u5728\u672c\u4f8b\u4e2d\u662f <code>step_1</code>\u2014\u2014\u4f1a\u88ab\u6301\u4e45\u5316\uff0c\u56e0\u6b64\u5728 <code>interrupt</code> \u4e4b\u540e\u4e0d\u4f1a\u518d\u6b21\u8fd0\u884c\u3002</p> <p>\u8ba9\u6211\u4eec\u53d1\u9001\u4e00\u4e2a\u67e5\u8be2\u5b57\u7b26\u4e32\uff1a</p> Python <pre><code>config = {\"configurable\": {\"thread_id\": \"1\"}}\n\nfor event in graph.stream(\"foo\", config):\n    print(event)\n    print(\"\\n\")\n</code></pre> JavaScript <pre><code>const config = { configurable: { thread_id: \"1\" } };\n\nfor await (const event of await graph.stream(\"foo\", config)) {\n  console.log(event);\n  console.log(\"\\n\");\n}\n</code></pre> <p>\u6ce8\u610f\u6211\u4eec\u5728 <code>step_1</code> \u4e4b\u540e\u901a\u8fc7 <code>interrupt</code> \u6682\u505c\u4e86\u3002\u4e2d\u65ad\u63d0\u4f9b\u4e86\u6062\u590d\u8fd0\u884c\u7684\u8bf4\u660e\u3002\u8981\u6062\u590d\uff0c\u6211\u4eec\u53d1\u51fa\u4e00\u4e2a\u5305\u542b <code>human_feedback</code> \u4efb\u52a1\u6240\u671f\u671b\u6570\u636e\u7684 Command\u3002</p> Python <pre><code># \u7ee7\u7eed\u6267\u884c\nfor event in graph.stream(Command(resume=\"baz\"), config):\n    print(event)\n    print(\"\\n\")\n</code></pre> JavaScript <pre><code>// \u7ee7\u7eed\u6267\u884c\nfor await (const event of await graph.stream(\n  new Command({ resume: \"baz\" }),\n  config\n)) {\n  console.log(event);\n  console.log(\"\\n\");\n}\n</code></pre> <p>\u6062\u590d\u540e\uff0c\u8fd0\u884c\u5c06\u7ee7\u7eed\u6267\u884c\u5269\u4f59\u6b65\u9aa4\u5e76\u6309\u9884\u671f\u7ec8\u6b62\u3002</p>"},{"location":"how-tos/use-functional-api/#_11","title":"\u5ba1\u67e5\u5de5\u5177\u8c03\u7528","text":"<p>\u8981\u5728\u6267\u884c\u524d\u5ba1\u67e5\u5de5\u5177\u8c03\u7528\uff0c\u6211\u4eec\u6dfb\u52a0\u4e00\u4e2a\u8c03\u7528 <code>interrupt</code> \u7684 <code>review_tool_call</code> \u51fd\u6570\u3002\u5f53\u8c03\u7528\u6b64\u51fd\u6570\u65f6\uff0c\u6267\u884c\u5c06\u6682\u505c\uff0c\u76f4\u5230\u6211\u4eec\u53d1\u51fa\u6062\u590d\u547d\u4ee4\u3002</p> <p>\u7ed9\u5b9a\u4e00\u4e2a\u5de5\u5177\u8c03\u7528\uff0c\u6211\u4eec\u7684\u51fd\u6570\u5c06 <code>interrupt</code> \u4ee5\u4f9b\u4eba\u5de5\u5ba1\u67e5\u3002\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\uff1a</p> <ul> <li>\u63a5\u53d7\u5de5\u5177\u8c03\u7528</li> <li>\u4fee\u6539\u5de5\u5177\u8c03\u7528\u5e76\u7ee7\u7eed</li> <li>\u751f\u6210\u81ea\u5b9a\u4e49\u5de5\u5177\u6d88\u606f\uff08\u4f8b\u5982\uff0c\u6307\u793a\u6a21\u578b\u91cd\u65b0\u683c\u5f0f\u5316\u5176\u5de5\u5177\u8c03\u7528\uff09</li> </ul> Python <pre><code>from typing import Union\n\ndef review_tool_call(tool_call: ToolCall) -&gt; Union[ToolCall, ToolMessage]:\n    \"\"\"\u5ba1\u67e5\u5de5\u5177\u8c03\u7528\uff0c\u8fd4\u56de\u9a8c\u8bc1\u540e\u7684\u7248\u672c\u3002\"\"\"\n    human_review = interrupt(\n        {\n            \"question\": \"Is this correct?\",\n            \"tool_call\": tool_call,\n        }\n    )\n    review_action = human_review[\"action\"]\n    review_data = human_review.get(\"data\")\n    if review_action == \"continue\":\n        return tool_call\n    elif review_action == \"update\":\n        updated_tool_call = {**tool_call, **{\"args\": review_data}}\n        return updated_tool_call\n    elif review_action == \"feedback\":\n        return ToolMessage(\n            content=review_data, name=tool_call[\"name\"], tool_call_id=tool_call[\"id\"]\n        )\n</code></pre> JavaScript <pre><code>import { ToolCall } from \"@langchain/core/messages/tool\";\nimport { ToolMessage } from \"@langchain/core/messages\";\n\nfunction reviewToolCall(toolCall: ToolCall): ToolCall | ToolMessage {\n  // \u5ba1\u67e5\u5de5\u5177\u8c03\u7528\uff0c\u8fd4\u56de\u9a8c\u8bc1\u540e\u7684\u7248\u672c\n  const humanReview = interrupt({\n    question: \"Is this correct?\",\n    tool_call: toolCall,\n  });\n\n  const reviewAction = humanReview.action;\n  const reviewData = humanReview.data;\n\n  if (reviewAction === \"continue\") {\n    return toolCall;\n  } else if (reviewAction === \"update\") {\n    const updatedToolCall = { ...toolCall, args: reviewData };\n    return updatedToolCall;\n  } else if (reviewAction === \"feedback\") {\n    return new ToolMessage({\n      content: reviewData,\n      name: toolCall.name,\n      tool_call_id: toolCall.id,\n    });\n  }\n\n  throw new Error(`Unknown review action: ${reviewAction}`);\n}\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u66f4\u65b0\u6211\u4eec\u7684 \u5165\u53e3\u70b9 \u6765\u5ba1\u67e5\u751f\u6210\u7684\u5de5\u5177\u8c03\u7528\u3002\u5982\u679c\u5de5\u5177\u8c03\u7528\u88ab\u63a5\u53d7\u6216\u4fee\u6539\uff0c\u6211\u4eec\u50cf\u4ee5\u524d\u4e00\u6837\u6267\u884c\u3002\u5426\u5219\uff0c\u6211\u4eec\u53ea\u662f\u8ffd\u52a0\u4eba\u5de5\u63d0\u4f9b\u7684 <code>ToolMessage</code>\u3002\u5148\u524d\u4efb\u52a1\u7684\u7ed3\u679c\u2014\u2014\u5728\u672c\u4f8b\u4e2d\u662f\u521d\u59cb\u6a21\u578b\u8c03\u7528\u2014\u2014\u4f1a\u88ab\u6301\u4e45\u5316\uff0c\u56e0\u6b64\u5728 <code>interrupt</code> \u4e4b\u540e\u4e0d\u4f1a\u518d\u6b21\u8fd0\u884c\u3002</p> Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph.message import add_messages\nfrom langgraph.types import Command, interrupt\n\n\ncheckpointer = InMemorySaver()\n\n\n@entrypoint(checkpointer=checkpointer)\ndef agent(messages, previous):\n    if previous is not None:\n        messages = add_messages(previous, messages)\n\n    llm_response = call_model(messages).result()\n    while True:\n        if not llm_response.tool_calls:\n            break\n\n        # \u5ba1\u67e5\u5de5\u5177\u8c03\u7528\n        tool_results = []\n        tool_calls = []\n        for i, tool_call in enumerate(llm_response.tool_calls):\n            review = review_tool_call(tool_call)\n            if isinstance(review, ToolMessage):\n                tool_results.append(review)\n            else:  # \u662f\u9a8c\u8bc1\u540e\u7684\u5de5\u5177\u8c03\u7528\n                tool_calls.append(review)\n                if review != tool_call:\n                    llm_response.tool_calls[i] = review  # \u66f4\u65b0\u6d88\u606f\n\n        # \u6267\u884c\u5269\u4f59\u7684\u5de5\u5177\u8c03\u7528\n        tool_result_futures = [call_tool(tool_call) for tool_call in tool_calls]\n        remaining_tool_results = [fut.result() for fut in tool_result_futures]\n\n        # \u8ffd\u52a0\u5230\u6d88\u606f\u5217\u8868\n        messages = add_messages(\n            messages,\n            [llm_response, *tool_results, *remaining_tool_results],\n        )\n\n        # \u518d\u6b21\u8c03\u7528\u6a21\u578b\n        llm_response = call_model(messages).result()\n\n    # \u751f\u6210\u6700\u7ec8\u54cd\u5e94\n    messages = add_messages(messages, llm_response)\n    return entrypoint.final(value=llm_response, save=messages)\n</code></pre> JavaScript <pre><code>import {\n  MemorySaver,\n  entrypoint,\n  interrupt,\n  Command,\n  addMessages,\n} from \"@langchain/langgraph\";\nimport { ToolMessage, AIMessage, BaseMessage } from \"@langchain/core/messages\";\n\nconst checkpointer = new MemorySaver();\n\nconst agent = entrypoint(\n  { checkpointer, name: \"agent\" },\n  async (\n    messages: BaseMessage[],\n    previous?: BaseMessage[]\n  ): Promise&lt;BaseMessage&gt; =&gt; {\n    if (previous !== undefined) {\n      messages = addMessages(previous, messages);\n    }\n\n    let llmResponse = await callModel(messages);\n    while (true) {\n      if (!llmResponse.tool_calls?.length) {\n        break;\n      }\n\n      // \u5ba1\u67e5\u5de5\u5177\u8c03\u7528\n      const toolResults: ToolMessage[] = [];\n      const toolCalls: ToolCall[] = [];\n\n      for (let i = 0; i &lt; llmResponse.tool_calls.length; i++) {\n        const review = reviewToolCall(llmResponse.tool_calls[i]);\n        if (review instanceof ToolMessage) {\n          toolResults.push(review);\n        } else {\n          // \u662f\u9a8c\u8bc1\u540e\u7684\u5de5\u5177\u8c03\u7528\n          toolCalls.push(review);\n          if (review !== llmResponse.tool_calls[i]) {\n            llmResponse.tool_calls[i] = review; // \u66f4\u65b0\u6d88\u606f\n          }\n        }\n      }\n\n      // \u6267\u884c\u5269\u4f59\u7684\u5de5\u5177\u8c03\u7528\n      const remainingToolResults = await Promise.all(\n        toolCalls.map((toolCall) =&gt; callTool(toolCall))\n      );\n\n      // \u8ffd\u52a0\u5230\u6d88\u606f\u5217\u8868\n      messages = addMessages(messages, [\n        llmResponse,\n        ...toolResults,\n        ...remainingToolResults,\n      ]);\n\n      // \u518d\u6b21\u8c03\u7528\u6a21\u578b\n      llmResponse = await callModel(messages);\n    }\n\n    // \u751f\u6210\u6700\u7ec8\u54cd\u5e94\n    messages = addMessages(messages, llmResponse);\n    return entrypoint.final({ value: llmResponse, save: messages });\n  }\n);\n</code></pre>"},{"location":"how-tos/use-functional-api/#_12","title":"\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u77ed\u671f\u8bb0\u5fc6\u5141\u8bb8\u5728\u540c\u4e00 \u7ebf\u7a0b ID \u7684\u4e0d\u540c \u8c03\u7528 \u4e4b\u95f4\u5b58\u50a8\u4fe1\u606f\u3002\u66f4\u591a\u8be6\u60c5\u8bf7\u53c2\u9605 \u77ed\u671f\u8bb0\u5fc6\u3002</p>"},{"location":"how-tos/use-functional-api/#_13","title":"\u7ba1\u7406\u68c0\u67e5\u70b9","text":"<p>\u4f60\u53ef\u4ee5\u67e5\u770b\u548c\u5220\u9664\u68c0\u67e5\u70b9\u5668\u5b58\u50a8\u7684\u4fe1\u606f\u3002</p>"},{"location":"how-tos/use-functional-api/#_14","title":"\u67e5\u770b\u7ebf\u7a0b\u72b6\u6001\uff08\u68c0\u67e5\u70b9\uff09","text":"Python <pre><code>config = {\n    \"configurable\": {\n        # highlight-next-line\n        \"thread_id\": \"1\",\n        # \u53ef\u9009\u5730\u63d0\u4f9b\u7279\u5b9a\u68c0\u67e5\u70b9\u7684 ID\uff0c\n        # \u5426\u5219\u663e\u793a\u6700\u65b0\u7684\u68c0\u67e5\u70b9\n        # highlight-next-line\n        # \"checkpoint_id\": \"1f029ca3-1f5b-6704-8004-820c16b69a5a\"\n\n    }\n}\n# highlight-next-line\ngraph.get_state(config)\n</code></pre> <pre><code>StateSnapshot(\n    values={'messages': [HumanMessage(content=\"hi! I'm bob\"), AIMessage(content='Hi Bob! How are you doing today?), HumanMessage(content=\"what's my name?\"), AIMessage(content='Your name is Bob.')]}, next=(),\n    config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f029ca3-1f5b-6704-8004-820c16b69a5a'}},\n    metadata={\n        'source': 'loop',\n        'writes': {'call_model': {'messages': AIMessage(content='Your name is Bob.')}},\n        'step': 4,\n        'parents': {},\n        'thread_id': '1'\n    },\n    created_at='2025-05-05T16:01:24.680462+00:00',\n    parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f029ca3-1790-6b0a-8003-baf965b6a38f'}},\n    tasks=(),\n    interrupts=()\n)\n</code></pre> JavaScript <pre><code>const config = {\n  configurable: {\n    // highlight-next-line\n    thread_id: \"1\",\n    // \u53ef\u9009\u5730\u63d0\u4f9b\u7279\u5b9a\u68c0\u67e5\u70b9\u7684 ID\uff0c\n    // \u5426\u5219\u663e\u793a\u6700\u65b0\u7684\u68c0\u67e5\u70b9\n    // highlight-next-line\n    // checkpoint_id: \"1f029ca3-1f5b-6704-8004-820c16b69a5a\"\n  },\n};\n// highlight-next-line\nawait graph.getState(config);\n</code></pre> <pre><code>StateSnapshot {\n  values: {\n    messages: [\n      HumanMessage { content: \"hi! I'm bob\" },\n      AIMessage { content: \"Hi Bob! How are you doing today?\" },\n      HumanMessage { content: \"what's my name?\" },\n      AIMessage { content: \"Your name is Bob.\" }\n    ]\n  },\n  next: [],\n  config: { configurable: { thread_id: '1', checkpoint_ns: '', checkpoint_id: '1f029ca3-1f5b-6704-8004-820c16b69a5a' } },\n  metadata: {\n    source: 'loop',\n    writes: { call_model: { messages: AIMessage { content: \"Your name is Bob.\" } } },\n    step: 4,\n    parents: {},\n    thread_id: '1'\n  },\n  createdAt: '2025-05-05T16:01:24.680462+00:00',\n  parentConfig: { configurable: { thread_id: '1', checkpoint_ns: '', checkpoint_id: '1f029ca3-1790-6b0a-8003-baf965b6a38f' } },\n  tasks: [],\n  interrupts: []\n}\n</code></pre>"},{"location":"how-tos/use-functional-api/#_15","title":"\u67e5\u770b\u7ebf\u7a0b\u5386\u53f2\uff08\u68c0\u67e5\u70b9\uff09","text":"Python <pre><code>config = {\n    \"configurable\": {\n        # highlight-next-line\n        \"thread_id\": \"1\"\n    }\n}\n# highlight-next-line\nlist(graph.get_state_history(config))\n</code></pre> <pre><code>[\n    StateSnapshot(\n        values={'messages': [HumanMessage(content=\"hi! I'm bob\"), AIMessage(content='Hi Bob! How are you doing today? Is there anything I can help you with?'), HumanMessage(content=\"what's my name?\"), AIMessage(content='Your name is Bob.')]},\n        next=(),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f029ca3-1f5b-6704-8004-820c16b69a5a'}},\n        metadata={'source': 'loop', 'writes': {'call_model': {'messages': AIMessage(content='Your name is Bob.')}}, 'step': 4, 'parents': {}, 'thread_id': '1'},\n        created_at='2025-05-05T16:01:24.680462+00:00',\n        parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f029ca3-1790-6b0a-8003-baf965b6a38f'}},\n        tasks=(),\n        interrupts=()\n    ),\n    StateSnapshot(\n        values={'messages': [HumanMessage(content=\"hi! I'm bob\"), AIMessage(content='Hi Bob! How are you doing today? Is there anything I can help you with?'), HumanMessage(content=\"what's my name?\")]},\n        next=('call_model',),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f029ca3-1790-6b0a-8003-baf965b6a38f'}},\n        metadata={'source': 'loop', 'writes': None, 'step': 3, 'parents': {}, 'thread_id': '1'},\n        created_at='2025-05-05T16:01:23.863421+00:00',\n        parent_config={...}\n        tasks=(PregelTask(id='8ab4155e-6b15-b885-9ce5-bed69a2c305c', name='call_model', path=('__pregel_pull', 'call_model'), error=None, interrupts=(), state=None, result={'messages': AIMessage(content='Your name is Bob.')}),),\n        interrupts=()\n    ),\n    StateSnapshot(\n        values={'messages': [HumanMessage(content=\"hi! I'm bob\"), AIMessage(content='Hi Bob! How are you doing today? Is there anything I can help you with?')]},\n        next=('__start__',),\n        config={...},\n        metadata={'source': 'input', 'writes': {'__start__': {'messages': [{'role': 'user', 'content': \"what's my name?\"}]}}, 'step': 2, 'parents': {}, 'thread_id': '1'},\n        created_at='2025-05-05T16:01:23.863173+00:00',\n        parent_config={...}\n        tasks=(PregelTask(id='24ba39d6-6db1-4c9b-f4c5-682aeaf38dcd', name='__start__', path=('__pregel_pull', '__start__'), error=None, interrupts=(), state=None, result={'messages': [{'role': 'user', 'content': \"what's my name?\"}]}),),\n        interrupts=()\n    ),\n    StateSnapshot(\n        values={'messages': [HumanMessage(content=\"hi! I'm bob\"), AIMessage(content='Hi Bob! How are you doing today? Is there anything I can help you with?')]},\n        next=(),\n        config={...},\n        metadata={'source': 'loop', 'writes': {'call_model': {'messages': AIMessage(content='Hi Bob! How are you doing today? Is there anything I can help you with?')}}, 'step': 1, 'parents': {}, 'thread_id': '1'},\n        created_at='2025-05-05T16:01:23.862295+00:00',\n        parent_config={...}\n        tasks=(),\n        interrupts=()\n    ),\n    StateSnapshot(\n        values={'messages': [HumanMessage(content=\"hi! I'm bob\")]},\n        next=('call_model',),\n        config={...},\n        metadata={'source': 'loop', 'writes': None, 'step': 0, 'parents': {}, 'thread_id': '1'},\n        created_at='2025-05-05T16:01:22.278960+00:00',\n        parent_config={...}\n        tasks=(PregelTask(id='8cbd75e0-3720-b056-04f7-71ac805140a0', name='call_model', path=('__pregel_pull', 'call_model'), error=None, interrupts=(), state=None, result={'messages': AIMessage(content='Hi Bob! How are you doing today? Is there anything I can help you with?')}),),\n        interrupts=()\n    ),\n    StateSnapshot(\n        values={'messages': []},\n        next=('__start__',),\n        config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1f029ca3-0870-6ce2-bfff-1f3f14c3e565'}},\n        metadata={'source': 'input', 'writes': {'__start__': {'messages': [{'role': 'user', 'content': \"hi! I'm bob\"}]}}, 'step': -1, 'parents': {}, 'thread_id': '1'},\n        created_at='2025-05-05T16:01:22.277497+00:00',\n        parent_config=None,\n        tasks=(PregelTask(id='d458367b-8265-812c-18e2-33001d199ce6', name='__start__', path=('__pregel_pull', '__start__'), error=None, interrupts=(), state=None, result={'messages': [{'role': 'user', 'content': \"hi! I'm bob\"}]}),),\n        interrupts=()\n    )\n]\n</code></pre> JavaScript <pre><code>const config = {\n  configurable: {\n    // highlight-next-line\n    thread_id: \"1\",\n  },\n};\n// highlight-next-line\nconst history = [];\nfor await (const state of graph.getStateHistory(config)) {\n  history.push(state);\n}\n</code></pre> <pre><code>[\n  StateSnapshot {\n    values: {\n      messages: [\n        HumanMessage { content: \"hi! I'm bob\" },\n        AIMessage { content: \"Hi Bob! How are you doing today? Is there anything I can help you with?\" },\n        HumanMessage { content: \"what's my name?\" },\n        AIMessage { content: \"Your name is Bob.\" }\n      ]\n    },\n    next: [],\n    config: { configurable: { thread_id: '1', checkpoint_ns: '', checkpoint_id: '1f029ca3-1f5b-6704-8004-820c16b69a5a' } },\n    metadata: { source: 'loop', writes: { call_model: { messages: AIMessage { content: \"Your name is Bob.\" } } }, step: 4, parents: {}, thread_id: '1' },\n    createdAt: '2025-05-05T16:01:24.680462+00:00',\n    parentConfig: { configurable: { thread_id: '1', checkpoint_ns: '', checkpoint_id: '1f029ca3-1790-6b0a-8003-baf965b6a38f' } },\n    tasks: [],\n    interrupts: []\n  },\n  // ... \u66f4\u591a\u72b6\u6001\u5feb\u7167\n]\n</code></pre>"},{"location":"how-tos/use-functional-api/#_16","title":"\u89e3\u8026\u8fd4\u56de\u503c\u4e0e\u4fdd\u5b58\u503c","text":"<p>\u4f7f\u7528 <code>entrypoint.final</code> \u53ef\u4ee5\u5c06\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\u7684\u5185\u5bb9\u4e0e\u6301\u4e45\u5316\u5230\u68c0\u67e5\u70b9\u7684\u5185\u5bb9\u89e3\u8026\u3002\u8fd9\u5728\u4ee5\u4e0b\u60c5\u51b5\u4e0b\u5f88\u6709\u7528\uff1a</p> <ul> <li>\u4f60\u60f3\u8fd4\u56de\u4e00\u4e2a\u8ba1\u7b97\u7ed3\u679c\uff08\u4f8b\u5982\u6458\u8981\u6216\u72b6\u6001\uff09\uff0c\u4f46\u4fdd\u5b58\u4e0d\u540c\u7684\u5185\u90e8\u503c\u4f9b\u4e0b\u6b21\u8c03\u7528\u4f7f\u7528\u3002</li> <li>\u4f60\u9700\u8981\u63a7\u5236\u4e0b\u6b21\u8fd0\u884c\u65f6\u4f20\u9012\u7ed9 previous \u53c2\u6570\u7684\u5185\u5bb9\u3002</li> </ul> Python <pre><code>from typing import Optional\nfrom langgraph.func import entrypoint\nfrom langgraph.checkpoint.memory import InMemorySaver\n\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef accumulate(n: int, *, previous: Optional[int]) -&gt; entrypoint.final[int, int]:\n    previous = previous or 0\n    total = previous + n\n    # \u5c06 *\u524d\u4e00\u4e2a* \u503c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\uff0c\u4f46\u5c06 *\u65b0\u7684* \u603b\u8ba1\u4fdd\u5b58\u5230\u68c0\u67e5\u70b9\u3002\n    return entrypoint.final(value=previous, save=total)\n\nconfig = {\"configurable\": {\"thread_id\": \"my-thread\"}}\n\nprint(accumulate.invoke(1, config=config))  # 0\nprint(accumulate.invoke(2, config=config))  # 1\nprint(accumulate.invoke(3, config=config))  # 3\n</code></pre> JavaScript <pre><code>import { entrypoint, MemorySaver } from \"@langchain/langgraph\";\n\nconst checkpointer = new MemorySaver();\n\nconst accumulate = entrypoint(\n  { checkpointer, name: \"accumulate\" },\n  async (n: number, previous?: number) =&gt; {\n    const prev = previous || 0;\n    const total = prev + n;\n    // \u5c06 *\u524d\u4e00\u4e2a* \u503c\u8fd4\u56de\u7ed9\u8c03\u7528\u8005\uff0c\u4f46\u5c06 *\u65b0\u7684* \u603b\u8ba1\u4fdd\u5b58\u5230\u68c0\u67e5\u70b9\u3002\n    return entrypoint.final({ value: prev, save: total });\n  }\n);\n\nconst config = { configurable: { thread_id: \"my-thread\" } };\n\nconsole.log(await accumulate.invoke(1, config)); // 0\nconsole.log(await accumulate.invoke(2, config)); // 1\nconsole.log(await accumulate.invoke(3, config)); // 3\n</code></pre>"},{"location":"how-tos/use-functional-api/#_17","title":"\u804a\u5929\u673a\u5668\u4eba\u793a\u4f8b","text":"<p>\u4f7f\u7528\u51fd\u6570\u5f0f API \u548c <code>InMemorySaver</code> \u68c0\u67e5\u70b9\u5668\u7684\u7b80\u5355\u804a\u5929\u673a\u5668\u4eba\u793a\u4f8b\u3002\u8be5\u673a\u5668\u4eba\u80fd\u591f\u8bb0\u4f4f\u4e4b\u524d\u7684\u5bf9\u8bdd\u5e76\u4ece\u4e2d\u65ad\u5904\u7ee7\u7eed\u3002</p> Python <pre><code>from langchain_core.messages import BaseMessage\nfrom langgraph.graph import add_messages\nfrom langgraph.func import entrypoint, task\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langchain_anthropic import ChatAnthropic\n\nmodel = ChatAnthropic(model=\"claude-3-5-sonnet-latest\")\n\n@task\ndef call_model(messages: list[BaseMessage]):\n    response = model.invoke(messages)\n    return response\n\ncheckpointer = InMemorySaver()\n\n@entrypoint(checkpointer=checkpointer)\ndef workflow(inputs: list[BaseMessage], *, previous: list[BaseMessage]):\n    if previous:\n        inputs = add_messages(previous, inputs)\n\n    response = call_model(inputs).result()\n    return entrypoint.final(value=response, save=add_messages(inputs, response))\n\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\ninput_message = {\"role\": \"user\", \"content\": \"hi! I'm bob\"}\nfor chunk in workflow.stream([input_message], config, stream_mode=\"values\"):\n    chunk.pretty_print()\n\ninput_message = {\"role\": \"user\", \"content\": \"what's my name?\"}\nfor chunk in workflow.stream([input_message], config, stream_mode=\"values\"):\n    chunk.pretty_print()\n</code></pre> JavaScript <pre><code>import { BaseMessage } from \"@langchain/core/messages\";\nimport {\n  addMessages,\n  entrypoint,\n  task,\n  MemorySaver,\n} from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst model = new ChatAnthropic({ model: \"claude-3-5-sonnet-latest\" });\n\nconst callModel = task(\n  \"callModel\",\n  async (messages: BaseMessage[]): Promise&lt;BaseMessage&gt; =&gt; {\n    const response = await model.invoke(messages);\n    return response;\n  }\n);\n\nconst checkpointer = new MemorySaver();\n\nconst workflow = entrypoint(\n  { checkpointer, name: \"workflow\" },\n  async (\n    inputs: BaseMessage[],\n    previous?: BaseMessage[]\n  ): Promise&lt;BaseMessage&gt; =&gt; {\n    let messages = inputs;\n    if (previous) {\n      messages = addMessages(previous, inputs);\n    }\n\n    const response = await callModel(messages);\n    return entrypoint.final({\n      value: response,\n      save: addMessages(messages, response),\n    });\n  }\n);\n\nconst config = { configurable: { thread_id: \"1\" } };\nconst inputMessage = { role: \"user\", content: \"hi! I'm bob\" };\n\nfor await (const chunk of await workflow.stream([inputMessage], {\n  ...config,\n  streamMode: \"values\",\n})) {\n  console.log(chunk.content);\n}\n\nconst inputMessage2 = { role: \"user\", content: \"what's my name?\" };\nfor await (const chunk of await workflow.stream([inputMessage2], {\n  ...config,\n  streamMode: \"values\",\n})) {\n  console.log(chunk.content);\n}\n</code></pre> \u6269\u5c55\u793a\u4f8b\uff1a\u6784\u5efa\u7b80\u5355\u804a\u5929\u673a\u5668\u4eba <p>\u5982\u4f55\u6dfb\u52a0\u7ebf\u7a0b\u7ea7\u6301\u4e45\u5316\uff08\u51fd\u6570\u5f0f API\uff09\uff1a\u5c55\u793a\u5982\u4f55\u5411\u51fd\u6570\u5f0f API \u5de5\u4f5c\u6d41\u6dfb\u52a0\u7ebf\u7a0b\u7ea7\u6301\u4e45\u5316\u5e76\u5b9e\u73b0\u7b80\u5355\u7684\u804a\u5929\u673a\u5668\u4eba\u3002</p>"},{"location":"how-tos/use-functional-api/#_18","title":"\u957f\u671f\u8bb0\u5fc6","text":"<p>\u957f\u671f\u8bb0\u5fc6 \u5141\u8bb8\u5728\u4e0d\u540c\u7684 \u7ebf\u7a0b ID \u4e4b\u95f4\u5b58\u50a8\u4fe1\u606f\u3002\u8fd9\u5bf9\u4e8e\u5728\u4e00\u6b21\u5bf9\u8bdd\u4e2d\u4e86\u89e3\u7ed9\u5b9a\u7528\u6237\u7684\u4fe1\u606f\u5e76\u5728\u53e6\u4e00\u6b21\u5bf9\u8bdd\u4e2d\u4f7f\u7528\u5b83\u975e\u5e38\u6709\u7528\u3002</p> \u6269\u5c55\u793a\u4f8b\uff1a\u6dfb\u52a0\u957f\u671f\u8bb0\u5fc6 <p>\u5982\u4f55\u6dfb\u52a0\u8de8\u7ebf\u7a0b\u6301\u4e45\u5316\uff08\u51fd\u6570\u5f0f API\uff09\uff1a\u5c55\u793a\u5982\u4f55\u5411\u51fd\u6570\u5f0f API \u5de5\u4f5c\u6d41\u6dfb\u52a0\u8de8\u7ebf\u7a0b\u6301\u4e45\u5316\u5e76\u5b9e\u73b0\u7b80\u5355\u7684\u804a\u5929\u673a\u5668\u4eba\u3002</p>"},{"location":"how-tos/use-functional-api/#_19","title":"\u5de5\u4f5c\u6d41","text":"<ul> <li>\u5de5\u4f5c\u6d41\u548c\u667a\u80fd\u4ee3\u7406 \u6307\u5357\u63d0\u4f9b\u4e86\u66f4\u591a\u4f7f\u7528\u51fd\u6570\u5f0f API \u6784\u5efa\u5de5\u4f5c\u6d41\u7684\u793a\u4f8b\u3002</li> </ul>"},{"location":"how-tos/use-functional-api/#_20","title":"\u667a\u80fd\u4ee3\u7406","text":"<ul> <li>\u5982\u4f55\u4ece\u5934\u521b\u5efa\u667a\u80fd\u4ee3\u7406\uff08\u51fd\u6570\u5f0f API\uff09\uff1a\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u51fd\u6570\u5f0f API \u4ece\u5934\u521b\u5efa\u7b80\u5355\u7684\u667a\u80fd\u4ee3\u7406\u3002</li> <li>\u5982\u4f55\u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7f51\u7edc\uff1a\u5c55\u793a\u5982\u4f55\u4f7f\u7528\u51fd\u6570\u5f0f API \u6784\u5efa\u591a\u667a\u80fd\u4ee3\u7406\u7f51\u7edc\u3002</li> <li>\u5982\u4f55\u5728\u591a\u667a\u80fd\u4ee3\u7406\u5e94\u7528\u4e2d\u6dfb\u52a0\u591a\u8f6e\u5bf9\u8bdd\uff08\u51fd\u6570\u5f0f API\uff09\uff1a\u5141\u8bb8\u6700\u7ec8\u7528\u6237\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2a\u667a\u80fd\u4ee3\u7406\u8fdb\u884c\u591a\u8f6e\u5bf9\u8bdd\u3002</li> </ul>"},{"location":"how-tos/use-functional-api/#_21","title":"\u4e0e\u5176\u4ed6\u5e93\u96c6\u6210","text":"<ul> <li>\u4f7f\u7528\u51fd\u6570\u5f0f API \u4e3a\u5176\u4ed6\u6846\u67b6\u6dfb\u52a0 LangGraph \u529f\u80fd\uff1a\u4e3a\u90a3\u4e9b\u4e0d\u63d0\u4f9b\u5f00\u7bb1\u5373\u7528\u529f\u80fd\u7684\u5176\u4ed6\u667a\u80fd\u4ee3\u7406\u6846\u67b6\u6dfb\u52a0 LangGraph \u7684\u6301\u4e45\u5316\u3001\u8bb0\u5fc6\u548c\u6d41\u5f0f\u4f20\u8f93\u7b49\u529f\u80fd\u3002</li> </ul>"},{"location":"how-tos/use-remote-graph/","title":"\u5982\u4f55\u4f7f\u7528 RemoteGraph \u4e0e\u90e8\u7f72\u4ea4\u4e92","text":"<p>\u524d\u7f6e\u6761\u4ef6</p> <ul> <li>LangGraph Platform</li> <li>LangGraph Server</li> </ul> <p><code>RemoteGraph</code> \u662f\u4e00\u4e2a\u63a5\u53e3\uff0c\u5141\u8bb8\u4f60\u4e0e LangGraph Platform \u90e8\u7f72\u4ea4\u4e92\uff0c\u5c31\u50cf\u5b83\u662f\u4e00\u4e2a\u5e38\u89c4\u7684\u3001\u672c\u5730\u5b9a\u4e49\u7684 LangGraph \u56fe\uff08\u4f8b\u5982 <code>CompiledGraph</code>\uff09\u4e00\u6837\u3002\u672c\u6307\u5357\u5411\u4f60\u5c55\u793a\u5982\u4f55\u521d\u59cb\u5316 <code>RemoteGraph</code> \u5e76\u4e0e\u4e4b\u4ea4\u4e92\u3002</p>"},{"location":"how-tos/use-remote-graph/#_1","title":"\u521d\u59cb\u5316\u56fe","text":"Python <p>\u521d\u59cb\u5316 <code>RemoteGraph</code> \u65f6\uff0c\u4f60\u5fc5\u987b\u59cb\u7ec8\u6307\u5b9a\uff1a</p> <ul> <li><code>name</code>\uff1a\u4f60\u60f3\u8981\u4ea4\u4e92\u7684\u56fe\u7684\u540d\u79f0\u3002\u8fd9\u4e0e\u4f60\u5728\u90e8\u7f72\u7684 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u56fe\u540d\u79f0\u76f8\u540c\u3002</li> <li><code>api_key</code>\uff1a\u6709\u6548\u7684 LangSmith API \u5bc6\u94a5\u3002\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf\uff08<code>LANGSMITH_API_KEY</code>\uff09\u6216\u901a\u8fc7 <code>api_key</code> \u53c2\u6570\u76f4\u63a5\u4f20\u9012\u3002\u5982\u679c <code>LangGraphClient</code> / <code>SyncLangGraphClient</code> \u4f7f\u7528 <code>api_key</code> \u53c2\u6570\u521d\u59cb\u5316\uff0cAPI \u5bc6\u94a5\u4e5f\u53ef\u4ee5\u901a\u8fc7 <code>client</code> / <code>sync_client</code> \u53c2\u6570\u63d0\u4f9b\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u4f60\u5fc5\u987b\u63d0\u4f9b\u4ee5\u4e0b\u4e4b\u4e00\uff1a</p> <ul> <li><code>url</code>\uff1a\u4f60\u60f3\u8981\u4ea4\u4e92\u7684\u90e8\u7f72\u7684 URL\u3002\u5982\u679c\u4f20\u9012 <code>url</code> \u53c2\u6570\uff0c\u540c\u6b65\u548c\u5f02\u6b65\u5ba2\u6237\u7aef\u90fd\u5c06\u4f7f\u7528\u63d0\u4f9b\u7684 URL\u3001headers\uff08\u5982\u679c\u63d0\u4f9b\uff09\u548c\u9ed8\u8ba4\u914d\u7f6e\u503c\uff08\u4f8b\u5982 timeout \u7b49\uff09\u521b\u5efa\u3002</li> <li><code>client</code>\uff1a\u7528\u4e8e\u5f02\u6b65\u4e0e\u90e8\u7f72\u4ea4\u4e92\u7684 <code>LangGraphClient</code> \u5b9e\u4f8b\uff08\u4f8b\u5982\u4f7f\u7528 <code>.astream()</code>\u3001<code>.ainvoke()</code>\u3001<code>.aget_state()</code>\u3001<code>.aupdate_state()</code> \u7b49\uff09</li> <li><code>sync_client</code>\uff1a\u7528\u4e8e\u540c\u6b65\u4e0e\u90e8\u7f72\u4ea4\u4e92\u7684 <code>SyncLangGraphClient</code> \u5b9e\u4f8b\uff08\u4f8b\u5982\u4f7f\u7528 <code>.stream()</code>\u3001<code>.invoke()</code>\u3001<code>.get_state()</code>\u3001<code>.update_state()</code> \u7b49\uff09</li> </ul> <p>Note</p> <p>\u5982\u679c\u540c\u65f6\u4f20\u9012 <code>client</code> \u6216 <code>sync_client</code> \u4ee5\u53ca <code>url</code> \u53c2\u6570\uff0c\u5b83\u4eec\u5c06\u4f18\u5148\u4e8e <code>url</code> \u53c2\u6570\u3002\u5982\u679c\u6ca1\u6709\u63d0\u4f9b <code>client</code> / <code>sync_client</code> / <code>url</code> \u53c2\u6570\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\uff0c<code>RemoteGraph</code> \u5c06\u5728\u8fd0\u884c\u65f6\u5f15\u53d1 <code>ValueError</code>\u3002</p> JavaScript <p>\u521d\u59cb\u5316 <code>RemoteGraph</code> \u65f6\uff0c\u4f60\u5fc5\u987b\u59cb\u7ec8\u6307\u5b9a\uff1a</p> <ul> <li><code>name</code>\uff1a\u4f60\u60f3\u8981\u4ea4\u4e92\u7684\u56fe\u7684\u540d\u79f0\u3002\u8fd9\u4e0e\u4f60\u5728\u90e8\u7f72\u7684 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u4f7f\u7528\u7684\u56fe\u540d\u79f0\u76f8\u540c\u3002</li> <li><code>apiKey</code>\uff1a\u6709\u6548\u7684 LangSmith API \u5bc6\u94a5\u3002\u53ef\u4ee5\u8bbe\u7f6e\u4e3a\u73af\u5883\u53d8\u91cf\uff08<code>LANGSMITH_API_KEY</code>\uff09\u6216\u901a\u8fc7 <code>apiKey</code> \u53c2\u6570\u76f4\u63a5\u4f20\u9012\u3002\u5982\u679c <code>LangGraphClient</code> \u4f7f\u7528 <code>apiKey</code> \u53c2\u6570\u521d\u59cb\u5316\uff0cAPI \u5bc6\u94a5\u4e5f\u53ef\u4ee5\u901a\u8fc7 <code>client</code> \u63d0\u4f9b\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u4f60\u5fc5\u987b\u63d0\u4f9b\u4ee5\u4e0b\u4e4b\u4e00\uff1a</p> <ul> <li><code>url</code>\uff1a\u4f60\u60f3\u8981\u4ea4\u4e92\u7684\u90e8\u7f72\u7684 URL\u3002\u5982\u679c\u4f20\u9012 <code>url</code> \u53c2\u6570\uff0c\u540c\u6b65\u548c\u5f02\u6b65\u5ba2\u6237\u7aef\u90fd\u5c06\u4f7f\u7528\u63d0\u4f9b\u7684 URL\u3001headers\uff08\u5982\u679c\u63d0\u4f9b\uff09\u548c\u9ed8\u8ba4\u914d\u7f6e\u503c\uff08\u4f8b\u5982 timeout \u7b49\uff09\u521b\u5efa\u3002</li> <li><code>client</code>\uff1a\u7528\u4e8e\u5f02\u6b65\u4e0e\u90e8\u7f72\u4ea4\u4e92\u7684 <code>LangGraphClient</code> \u5b9e\u4f8b</li> </ul>"},{"location":"how-tos/use-remote-graph/#url","title":"\u4f7f\u7528 URL","text":"Python <pre><code>from langgraph.pregel.remote import RemoteGraph\n\nurl = &lt;DEPLOYMENT_URL&gt;\ngraph_name = \"agent\"\nremote_graph = RemoteGraph(graph_name, url=url)\n</code></pre> JavaScript <pre><code>import { RemoteGraph } from \"@langchain/langgraph/remote\";\n\nconst url = `&lt;DEPLOYMENT_URL&gt;`;\nconst graphName = \"agent\";\nconst remoteGraph = new RemoteGraph({ graphId: graphName, url });\n</code></pre>"},{"location":"how-tos/use-remote-graph/#_2","title":"\u4f7f\u7528\u5ba2\u6237\u7aef","text":"Python <pre><code>from langgraph_sdk import get_client, get_sync_client\nfrom langgraph.pregel.remote import RemoteGraph\n\nurl = &lt;DEPLOYMENT_URL&gt;\ngraph_name = \"agent\"\nclient = get_client(url=url)\nsync_client = get_sync_client(url=url)\nremote_graph = RemoteGraph(graph_name, client=client, sync_client=sync_client)\n</code></pre> JavaScript <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nimport { RemoteGraph } from \"@langchain/langgraph/remote\";\n\nconst client = new Client({ apiUrl: `&lt;DEPLOYMENT_URL&gt;` });\nconst graphName = \"agent\";\nconst remoteGraph = new RemoteGraph({ graphId: graphName, client });\n</code></pre>"},{"location":"how-tos/use-remote-graph/#_3","title":"\u8c03\u7528\u56fe","text":"Python <p>\u7531\u4e8e <code>RemoteGraph</code> \u662f\u4e00\u4e2a\u5b9e\u73b0\u4e86\u4e0e <code>CompiledGraph</code> \u76f8\u540c\u65b9\u6cd5\u7684 <code>Runnable</code>\uff0c\u4f60\u53ef\u4ee5\u50cf\u4e0e\u5e38\u89c4\u7f16\u8bd1\u56fe\u4ea4\u4e92\u4e00\u6837\u4e0e\u5b83\u4ea4\u4e92\uff0c\u5373\u901a\u8fc7\u8c03\u7528 <code>.invoke()</code>\u3001<code>.stream()</code>\u3001<code>.get_state()</code>\u3001<code>.update_state()</code> \u7b49\uff08\u4ee5\u53ca\u5b83\u4eec\u7684\u5f02\u6b65\u5bf9\u5e94\u65b9\u6cd5\uff09\u3002</p>"},{"location":"how-tos/use-remote-graph/#_4","title":"\u5f02\u6b65","text":"<p>Note</p> <p>\u8981\u5f02\u6b65\u4f7f\u7528\u56fe\uff0c\u521d\u59cb\u5316 <code>RemoteGraph</code> \u65f6\u5fc5\u987b\u63d0\u4f9b <code>url</code> \u6216 <code>client</code>\u3002</p> <pre><code># \u8c03\u7528\u56fe\nresult = await remote_graph.ainvoke({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]\n})\n\n# \u4ece\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\nasync for chunk in remote_graph.astream({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in la\"}]\n}):\n    print(chunk)\n</code></pre>"},{"location":"how-tos/use-remote-graph/#_5","title":"\u540c\u6b65","text":"<p>Note</p> <p>\u8981\u540c\u6b65\u4f7f\u7528\u56fe\uff0c\u521d\u59cb\u5316 <code>RemoteGraph</code> \u65f6\u5fc5\u987b\u63d0\u4f9b <code>url</code> \u6216 <code>sync_client</code>\u3002</p> <pre><code># \u8c03\u7528\u56fe\nresult = remote_graph.invoke({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]\n})\n\n# \u4ece\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\nfor chunk in remote_graph.stream({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in la\"}]\n}):\n    print(chunk)\n</code></pre> JavaScript <p>\u7531\u4e8e <code>RemoteGraph</code> \u662f\u4e00\u4e2a\u5b9e\u73b0\u4e86\u4e0e <code>CompiledGraph</code> \u76f8\u540c\u65b9\u6cd5\u7684 <code>Runnable</code>\uff0c\u4f60\u53ef\u4ee5\u50cf\u4e0e\u5e38\u89c4\u7f16\u8bd1\u56fe\u4ea4\u4e92\u4e00\u6837\u4e0e\u5b83\u4ea4\u4e92\uff0c\u5373\u901a\u8fc7\u8c03\u7528 <code>.invoke()</code>\u3001<code>.stream()</code>\u3001<code>.getState()</code>\u3001<code>.updateState()</code> \u7b49\u3002</p> <pre><code>// \u8c03\u7528\u56fe\nconst result = await remoteGraph.invoke({\n    messages: [{role: \"user\", content: \"what's the weather in sf\"}]\n})\n\n// \u4ece\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\nfor await (const chunk of await remoteGraph.stream({\n    messages: [{role: \"user\", content: \"what's the weather in la\"}]\n})):\n    console.log(chunk)\n</code></pre>"},{"location":"how-tos/use-remote-graph/#_6","title":"\u7ebf\u7a0b\u7ea7\u6301\u4e45\u5316","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u56fe\u8fd0\u884c\uff08\u5373 <code>.invoke()</code> \u6216 <code>.stream()</code> \u8c03\u7528\uff09\u662f\u65e0\u72b6\u6001\u7684 - \u68c0\u67e5\u70b9\u548c\u56fe\u7684\u6700\u7ec8\u72b6\u6001\u4e0d\u4f1a\u88ab\u6301\u4e45\u5316\u3002\u5982\u679c\u4f60\u60f3\u6301\u4e45\u5316\u56fe\u8fd0\u884c\u7684\u8f93\u51fa\uff08\u4f8b\u5982\uff0c\u542f\u7528\u4eba\u673a\u534f\u540c\u529f\u80fd\uff09\uff0c\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u901a\u8fc7 <code>config</code> \u53c2\u6570\u63d0\u4f9b\u7ebf\u7a0b ID\uff0c\u5c31\u50cf\u5bf9\u5e38\u89c4\u7f16\u8bd1\u56fe\u4e00\u6837\uff1a</p> Python <pre><code>from langgraph_sdk import get_sync_client\nurl = &lt;DEPLOYMENT_URL&gt;\ngraph_name = \"agent\"\nsync_client = get_sync_client(url=url)\nremote_graph = RemoteGraph(graph_name, url=url)\n\n# \u521b\u5efa\u7ebf\u7a0b\uff08\u6216\u4f7f\u7528\u73b0\u6709\u7ebf\u7a0b\uff09\nthread = sync_client.threads.create()\n\n# \u4f7f\u7528\u7ebf\u7a0b\u914d\u7f6e\u8c03\u7528\u56fe\nconfig = {\"configurable\": {\"thread_id\": thread[\"thread_id\"]}}\nresult = remote_graph.invoke({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]\n}, config=config)\n\n# \u9a8c\u8bc1\u72b6\u6001\u5df2\u6301\u4e45\u5316\u5230\u7ebf\u7a0b\nthread_state = remote_graph.get_state(config)\nprint(thread_state)\n</code></pre> JavaScript <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\nimport { RemoteGraph } from \"@langchain/langgraph/remote\";\n\nconst url = `&lt;DEPLOYMENT_URL&gt;`;\nconst graphName = \"agent\";\nconst client = new Client({ apiUrl: url });\nconst remoteGraph = new RemoteGraph({ graphId: graphName, url });\n\n// \u521b\u5efa\u7ebf\u7a0b\uff08\u6216\u4f7f\u7528\u73b0\u6709\u7ebf\u7a0b\uff09\nconst thread = await client.threads.create();\n\n// \u4f7f\u7528\u7ebf\u7a0b\u914d\u7f6e\u8c03\u7528\u56fe\nconst config = { configurable: { thread_id: thread.thread_id } };\nconst result = await remoteGraph.invoke(\n  {\n    messages: [{ role: \"user\", content: \"what's the weather in sf\" }],\n  },\n  config\n);\n\n// \u9a8c\u8bc1\u72b6\u6001\u5df2\u6301\u4e45\u5316\u5230\u7ebf\u7a0b\nconst threadState = await remoteGraph.getState(config);\nconsole.log(threadState);\n</code></pre>"},{"location":"how-tos/use-remote-graph/#_7","title":"\u7528\u4f5c\u5b50\u56fe","text":"<p>Note</p> <p>\u5982\u679c\u4f60\u9700\u8981\u5728\u5177\u6709 <code>RemoteGraph</code> \u5b50\u56fe\u8282\u70b9\u7684\u56fe\u4e2d\u4f7f\u7528 <code>checkpointer</code>\uff0c\u8bf7\u786e\u4fdd\u4f7f\u7528 UUID \u4f5c\u4e3a\u7ebf\u7a0b ID\u3002</p> <p>\u7531\u4e8e <code>RemoteGraph</code> \u7684\u884c\u4e3a\u4e0e\u5e38\u89c4 <code>CompiledGraph</code> \u76f8\u540c\uff0c\u5b83\u4e5f\u53ef\u4ee5\u7528\u4f5c\u53e6\u4e00\u4e2a\u56fe\u4e2d\u7684\u5b50\u56fe\u3002\u4f8b\u5982\uff1a</p> Python <pre><code>from langgraph_sdk import get_sync_client\nfrom langgraph.graph import StateGraph, MessagesState, START\nfrom typing import TypedDict\n\nurl = &lt;DEPLOYMENT_URL&gt;\ngraph_name = \"agent\"\nremote_graph = RemoteGraph(graph_name, url=url)\n\n# \u5b9a\u4e49\u7236\u56fe\nbuilder = StateGraph(MessagesState)\n# \u76f4\u63a5\u5c06\u8fdc\u7a0b\u56fe\u6dfb\u52a0\u4e3a\u8282\u70b9\nbuilder.add_node(\"child\", remote_graph)\nbuilder.add_edge(START, \"child\")\ngraph = builder.compile()\n\n# \u8c03\u7528\u7236\u56fe\nresult = graph.invoke({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]\n})\nprint(result)\n\n# \u4ece\u7236\u56fe\u548c\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\nfor chunk in graph.stream({\n    \"messages\": [{\"role\": \"user\", \"content\": \"what's the weather in sf\"}]\n}, subgraphs=True):\n    print(chunk)\n</code></pre> JavaScript <pre><code>import { MessagesAnnotation, StateGraph, START } from \"@langchain/langgraph\";\nimport { RemoteGraph } from \"@langchain/langgraph/remote\";\n\nconst url = `&lt;DEPLOYMENT_URL&gt;`;\nconst graphName = \"agent\";\nconst remoteGraph = new RemoteGraph({ graphId: graphName, url });\n\n// \u5b9a\u4e49\u7236\u56fe\u5e76\u76f4\u63a5\u5c06\u8fdc\u7a0b\u56fe\u6dfb\u52a0\u4e3a\u8282\u70b9\nconst graph = new StateGraph(MessagesAnnotation)\n  .addNode(\"child\", remoteGraph)\n  .addEdge(START, \"child\")\n  .compile();\n\n// \u8c03\u7528\u7236\u56fe\nconst result = await graph.invoke({\n  messages: [{ role: \"user\", content: \"what's the weather in sf\" }],\n});\nconsole.log(result);\n\n// \u4ece\u7236\u56fe\u548c\u5b50\u56fe\u6d41\u5f0f\u4f20\u8f93\u8f93\u51fa\nfor await (const chunk of await graph.stream(\n  {\n    messages: [{ role: \"user\", content: \"what's the weather in la\" }],\n  },\n  { subgraphs: true }\n)) {\n  console.log(chunk);\n}\n</code></pre>"},{"location":"how-tos/auth/custom_auth/","title":"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1","text":"<p>\u524d\u63d0\u6761\u4ef6</p> <p>\u672c\u6307\u5357\u5047\u8bbe\u4f60\u719f\u6089\u4ee5\u4e0b\u6982\u5ff5\uff1a</p> <ul> <li>\u8ba4\u8bc1\u4e0e\u8bbf\u95ee\u63a7\u5236</li> <li>LangGraph Platform</li> </ul> <p>\u5982\u9700\u66f4\u8be6\u7ec6\u7684\u6559\u7a0b\uff0c\u8bf7\u53c2\u9605 \u8bbe\u7f6e\u81ea\u5b9a\u4e49\u8ba4\u8bc1 \u6559\u7a0b\u3002</p> \u90e8\u7f72\u7c7b\u578b\u652f\u6301 <p>\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u652f\u6301 \u6258\u7ba1 LangGraph Platform \u4e2d\u7684\u6240\u6709\u90e8\u7f72\uff0c\u4ee5\u53ca \u4f01\u4e1a\u7248 \u81ea\u6258\u7ba1\u8ba1\u5212\u3002</p> <p>\u672c\u6307\u5357\u5c55\u793a\u5982\u4f55\u5411 LangGraph Platform \u5e94\u7528\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u3002\u672c\u6307\u5357\u9002\u7528\u4e8e LangGraph Platform \u548c\u81ea\u6258\u7ba1\u90e8\u7f72\u3002\u4e0d\u9002\u7528\u4e8e\u5728\u4f60\u81ea\u5df1\u7684\u81ea\u5b9a\u4e49\u670d\u52a1\u5668\u4e2d\u5355\u72ec\u4f7f\u7528 LangGraph \u5f00\u6e90\u5e93\u7684\u60c5\u51b5\u3002</p> <p>Note</p> <p>\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u652f\u6301\u6240\u6709 \u6258\u7ba1 LangGraph Platform \u90e8\u7f72\uff0c\u4ee5\u53ca \u4f01\u4e1a\u7248 \u81ea\u6258\u7ba1\u8ba1\u5212\u3002</p>"},{"location":"how-tos/auth/custom_auth/#_2","title":"\u5411\u90e8\u7f72\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1","text":"<p>\u8981\u5229\u7528\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u5e76\u5728\u90e8\u7f72\u4e2d\u8bbf\u95ee\u7528\u6237\u7ea7\u5143\u6570\u636e\uff0c\u8bf7\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u5904\u7406\u5668\u81ea\u52a8\u586b\u5145 <code>config[\"configurable\"][\"langgraph_auth_user\"]</code> \u5bf9\u8c61\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u5728\u56fe\u4e2d\u4f7f\u7528 <code>langgraph_auth_user</code> \u952e\u8bbf\u95ee\u6b64\u5bf9\u8c61\uff0c\u4ee5 \u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u4ee3\u8868\u7528\u6237\u6267\u884c\u8ba4\u8bc1\u64cd\u4f5c\u3002</p> Python <ol> <li> <p>\u5b9e\u73b0\u8ba4\u8bc1\uff1a</p> <p>Note</p> <p>\u6ca1\u6709\u81ea\u5b9a\u4e49 <code>@auth.authenticate</code> \u5904\u7406\u5668\uff0cLangGraph \u53ea\u80fd\u770b\u5230 API \u5bc6\u94a5\u6240\u6709\u8005\uff08\u901a\u5e38\u662f\u5f00\u53d1\u8005\uff09\uff0c\u56e0\u6b64\u8bf7\u6c42\u4e0d\u4f1a\u9650\u5b9a\u5230\u5355\u4e2a\u6700\u7ec8\u7528\u6237\u3002\u8981\u4f20\u64ad\u81ea\u5b9a\u4e49\u4ee4\u724c\uff0c\u4f60\u5fc5\u987b\u5b9e\u73b0\u81ea\u5df1\u7684\u5904\u7406\u5668\u3002</p> <pre><code>from langgraph_sdk import Auth\nimport requests\n\nauth = Auth()\n\ndef is_valid_key(api_key: str) -&gt; bool:\n    is_valid = # \u4f60\u7684 API \u5bc6\u94a5\u9a8c\u8bc1\u903b\u8f91\n    return is_valid\n\n@auth.authenticate # (1)!\nasync def authenticate(headers: dict) -&gt; Auth.types.MinimalUserDict:\n    api_key = headers.get(\"x-api-key\")\n    if not api_key or not is_valid_key(api_key):\n        raise Auth.exceptions.HTTPException(status_code=401, detail=\"Invalid API key\")\n\n    # \u4ece\u4f60\u7684\u5bc6\u94a5\u5b58\u50a8\u83b7\u53d6\u7528\u6237\u7279\u5b9a\u7684\u4ee4\u724c\n    user_tokens = await fetch_user_tokens(api_key)\n\n    return { # (2)!\n        \"identity\": api_key,  # \u4ece LangSmith \u83b7\u53d6\u7528\u6237 ID\n        \"github_token\" : user_tokens.github_token\n        \"jira_token\" : user_tokens.jira_token\n        # ... \u5728\u6b64\u6dfb\u52a0\u81ea\u5b9a\u4e49\u5b57\u6bb5/\u5bc6\u94a5\n    }\n</code></pre> <ol> <li>\u6b64\u5904\u7406\u5668\u63a5\u6536\u8bf7\u6c42\uff08\u5934\u90e8\u7b49\uff09\uff0c\u9a8c\u8bc1\u7528\u6237\uff0c\u5e76\u8fd4\u56de\u81f3\u5c11\u5305\u542b identity \u5b57\u6bb5\u7684\u5b57\u5178\u3002</li> <li>\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4efb\u4f55\u4f60\u60f3\u8981\u7684\u81ea\u5b9a\u4e49\u5b57\u6bb5\uff08\u4f8b\u5982 OAuth \u4ee4\u724c\u3001\u89d2\u8272\u3001\u7ec4\u7ec7 ID \u7b49\uff09\u3002</li> </ol> </li> <li> <p>\u5728\u4f60\u7684 <code>langgraph.json</code> \u4e2d\uff0c\u6dfb\u52a0\u8ba4\u8bc1\u6587\u4ef6\u7684\u8def\u5f84\uff1a</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.py:graph\"\n  },\n  \"env\": \".env\",\n  \"auth\": {\n    \"path\": \"./auth.py:my_auth\"\n  }\n}\n</code></pre> </li> <li> <p>\u5728\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u8ba4\u8bc1\u540e\uff0c\u8bf7\u6c42\u5fc5\u987b\u5305\u542b\u57fa\u4e8e\u4f60\u9009\u62e9\u7684\u65b9\u6848\u6240\u9700\u7684\u6388\u6743\u4fe1\u606f\u3002\u5047\u8bbe\u4f60\u4f7f\u7528 JWT \u4ee4\u724c\u8ba4\u8bc1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00\u65b9\u6cd5\u8bbf\u95ee\u4f60\u7684\u90e8\u7f72\uff1a</p> Python ClientPython RemoteGraphCURL <pre><code>from langgraph_sdk import get_client\n\nmy_token = \"your-token\" # \u5b9e\u9645\u4e2d\uff0c\u4f60\u4f1a\u7528\u8ba4\u8bc1\u63d0\u4f9b\u5546\u751f\u6210\u7b7e\u540d\u4ee4\u724c\nclient = get_client(\n    url=\"http://localhost:2024\",\n    headers={\"Authorization\": f\"Bearer {my_token}\"}\n)\nthreads = await client.threads.search()\n</code></pre> <p><pre><code>from langgraph.pregel.remote import RemoteGraph\n\nmy_token = \"your-token\" # \u5b9e\u9645\u4e2d\uff0c\u4f60\u4f1a\u7528\u8ba4\u8bc1\u63d0\u4f9b\u5546\u751f\u6210\u7b7e\u540d\u4ee4\u724c\nremote_graph = RemoteGraph(\n    \"agent\",\n    url=\"http://localhost:2024\",\n    headers={\"Authorization\": f\"Bearer {my_token}\"}\n)\nthreads = await remote_graph.ainvoke(...)\n</code></pre> <pre><code>from langgraph.pregel.remote import RemoteGraph\n\nmy_token = \"your-token\" # \u5b9e\u9645\u4e2d\uff0c\u4f60\u4f1a\u7528\u8ba4\u8bc1\u63d0\u4f9b\u5546\u751f\u6210\u7b7e\u540d\u4ee4\u724c\nremote_graph = RemoteGraph(\n    \"agent\",\n    url=\"http://localhost:2024\",\n    headers={\"Authorization\": f\"Bearer {my_token}\"}\n)\nthreads = await remote_graph.ainvoke(...)\n</code></pre></p> <pre><code>curl -H \"Authorization: Bearer ${your-token}\" http://localhost:2024/threads\n</code></pre> </li> </ol>"},{"location":"how-tos/auth/custom_auth/#_3","title":"\u542f\u7528\u667a\u80fd\u4ee3\u7406\u8ba4\u8bc1","text":"<p>\u8ba4\u8bc1 \u540e\uff0c\u5e73\u53f0\u4f1a\u521b\u5efa\u4e00\u4e2a\u7279\u6b8a\u7684\u914d\u7f6e\u5bf9\u8c61\uff08<code>config</code>\uff09\uff0c\u8be5\u5bf9\u8c61\u4f1a\u4f20\u9012\u7ed9 LangGraph Platform \u90e8\u7f72\u3002\u6b64\u5bf9\u8c61\u5305\u542b\u6709\u5173\u5f53\u524d\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u4f60\u4ece <code>@auth.authenticate</code> \u5904\u7406\u5668\u8fd4\u56de\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u5b57\u6bb5\u3002</p> <p>\u8981\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u4ee3\u8868\u7528\u6237\u6267\u884c\u8ba4\u8bc1\u64cd\u4f5c\uff0c\u8bf7\u5728\u56fe\u4e2d\u4f7f\u7528 <code>langgraph_auth_user</code> \u952e\u8bbf\u95ee\u6b64\u5bf9\u8c61\uff1a</p> <pre><code>def my_node(state, config):\n    user_config = config[\"configurable\"].get(\"langgraph_auth_user\")\n    # \u4ee4\u724c\u5728 @auth.authenticate \u51fd\u6570\u671f\u95f4\u89e3\u6790\n    token = user_config.get(\"github_token\",\"\")\n    ...\n</code></pre> <p>Note</p> <p>\u4ece\u5b89\u5168\u7684\u5bc6\u94a5\u5b58\u50a8\u83b7\u53d6\u7528\u6237\u51ed\u8bc1\u3002\u4e0d\u5efa\u8bae\u5c06\u5bc6\u94a5\u5b58\u50a8\u5728\u56fe\u72b6\u6001\u4e2d\u3002</p>"},{"location":"how-tos/auth/custom_auth/#studio","title":"\u6388\u6743 Studio \u7528\u6237","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u4f60\u5728\u8d44\u6e90\u4e0a\u6dfb\u52a0\u4e86\u81ea\u5b9a\u4e49\u6388\u6743\uff0c\u8fd9\u4e5f\u5c06\u9002\u7528\u4e8e\u4ece Studio \u8fdb\u884c\u7684\u4ea4\u4e92\u3002\u5982\u679c\u4f60\u60f3\u5bf9\u5df2\u767b\u5f55\u7684 Studio \u7528\u6237\u8fdb\u884c\u4e0d\u540c\u5904\u7406\uff0c\u53ef\u4ee5\u68c0\u67e5 is_studio_user()\u3002</p> <p>Note</p> <p><code>is_studio_user</code> \u662f\u5728 langgraph-sdk 0.1.73 \u7248\u672c\u4e2d\u6dfb\u52a0\u7684\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u65e7\u7248\u672c\uff0c\u4ecd\u7136\u53ef\u4ee5\u68c0\u67e5 <code>isinstance(ctx.user, StudioUser)</code>\u3002</p> <pre><code>from langgraph_sdk.auth import is_studio_user, Auth\nauth = Auth()\n\n# ... \u8bbe\u7f6e authenticate \u7b49\u3002\n\n@auth.on\nasync def add_owner(\n    ctx: Auth.types.AuthContext,\n    value: dict  # \u53d1\u9001\u5230\u6b64\u8bbf\u95ee\u65b9\u6cd5\u7684\u8f7d\u8377\n) -&gt; dict:  # \u8fd4\u56de\u9650\u5236\u8d44\u6e90\u8bbf\u95ee\u7684\u8fc7\u6ee4\u5668\u5b57\u5178\n    if is_studio_user(ctx.user):\n        return {}\n\n    filters = {\"owner\": ctx.user.identity}\n    metadata = value.setdefault(\"metadata\", {})\n    metadata.update(filters)\n    return filters\n</code></pre> <p>\u53ea\u6709\u5f53\u4f60\u60f3\u5141\u8bb8\u5f00\u53d1\u8005\u8bbf\u95ee\u90e8\u7f72\u5728\u6258\u7ba1 LangGraph Platform SaaS \u4e0a\u7684\u56fe\u65f6\u624d\u4f7f\u7528\u6b64\u529f\u80fd\u3002</p> JavaScript <ol> <li> <p>\u5b9e\u73b0\u8ba4\u8bc1\uff1a</p> <p>Note</p> <p>\u6ca1\u6709\u81ea\u5b9a\u4e49 <code>authenticate</code> \u5904\u7406\u5668\uff0cLangGraph \u53ea\u80fd\u770b\u5230 API \u5bc6\u94a5\u6240\u6709\u8005\uff08\u901a\u5e38\u662f\u5f00\u53d1\u8005\uff09\uff0c\u56e0\u6b64\u8bf7\u6c42\u4e0d\u4f1a\u9650\u5b9a\u5230\u5355\u4e2a\u6700\u7ec8\u7528\u6237\u3002\u8981\u4f20\u64ad\u81ea\u5b9a\u4e49\u4ee4\u724c\uff0c\u4f60\u5fc5\u987b\u5b9e\u73b0\u81ea\u5df1\u7684\u5904\u7406\u5668\u3002</p> <pre><code>import { Auth, HTTPException } from \"@langchain/langgraph-sdk/auth\";\n\nconst auth = new Auth()\n  .authenticate(async (request) =&gt; {\n    const authorization = request.headers.get(\"Authorization\");\n    const token = authorization?.split(\" \")[1]; // \"Bearer &lt;token&gt;\"\n    if (!token) {\n      throw new HTTPException(401, \"No token provided\");\n    }\n    try {\n      const user = await verifyToken(token);\n      return user;\n    } catch (error) {\n      throw new HTTPException(401, \"Invalid token\");\n    }\n  })\n  // \u6dfb\u52a0\u6388\u6743\u89c4\u5219\u4ee5\u5b9e\u9645\u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee\n  .on(\"*\", async ({ user, value }) =&gt; {\n    const filters = { owner: user.identity };\n    const metadata = value.metadata ?? {};\n    metadata.update(filters);\n    return filters;\n  })\n  // \u5047\u8bbe\u4f60\u5728\u5b58\u50a8\u4e2d\u6309 (user_id, resource_type, resource_id) \u7ec4\u7ec7\u4fe1\u606f\n  .on(\"store\", async ({ user, value }) =&gt; {\n    const namespace = value.namespace;\n    if (namespace[0] !== user.identity) {\n      throw new HTTPException(403, \"Not authorized\");\n    }\n  });\n</code></pre> <ol> <li>\u6b64\u5904\u7406\u5668\u63a5\u6536\u8bf7\u6c42\uff08\u5934\u90e8\u7b49\uff09\uff0c\u9a8c\u8bc1\u7528\u6237\uff0c\u5e76\u8fd4\u56de\u81f3\u5c11\u5305\u542b identity \u5b57\u6bb5\u7684\u5bf9\u8c61\u3002</li> <li>\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4efb\u4f55\u4f60\u60f3\u8981\u7684\u81ea\u5b9a\u4e49\u5b57\u6bb5\uff08\u4f8b\u5982 OAuth \u4ee4\u724c\u3001\u89d2\u8272\u3001\u7ec4\u7ec7 ID \u7b49\uff09\u3002</li> </ol> </li> <li> <p>\u5728\u4f60\u7684 <code>langgraph.json</code> \u4e2d\uff0c\u6dfb\u52a0\u8ba4\u8bc1\u6587\u4ef6\u7684\u8def\u5f84\uff1a</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.ts:graph\"\n  },\n  \"env\": \".env\",\n  \"auth\": {\n    \"path\": \"./auth.ts:my_auth\"\n  }\n}\n</code></pre> </li> <li> <p>\u5728\u670d\u52a1\u5668\u4e2d\u8bbe\u7f6e\u8ba4\u8bc1\u540e\uff0c\u8bf7\u6c42\u5fc5\u987b\u5305\u542b\u57fa\u4e8e\u4f60\u9009\u62e9\u7684\u65b9\u6848\u6240\u9700\u7684\u6388\u6743\u4fe1\u606f\u3002\u5047\u8bbe\u4f60\u4f7f\u7528 JWT \u4ee4\u724c\u8ba4\u8bc1\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u4ee5\u4e0b\u4efb\u4e00\u65b9\u6cd5\u8bbf\u95ee\u4f60\u7684\u90e8\u7f72\uff1a</p> SDK ClientRemoteGraphCURL <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nconst my_token = \"your-token\"; // \u5b9e\u9645\u4e2d\uff0c\u4f60\u4f1a\u7528\u8ba4\u8bc1\u63d0\u4f9b\u5546\u751f\u6210\u7b7e\u540d\u4ee4\u724c\nconst client = new Client({\n  apiUrl: \"http://localhost:2024\",\n  defaultHeaders: { Authorization: `Bearer ${my_token}` },\n});\nconst threads = await client.threads.search();\n</code></pre> <pre><code>import { RemoteGraph } from \"@langchain/langgraph/remote\";\n\nconst my_token = \"your-token\"; // \u5b9e\u9645\u4e2d\uff0c\u4f60\u4f1a\u7528\u8ba4\u8bc1\u63d0\u4f9b\u5546\u751f\u6210\u7b7e\u540d\u4ee4\u724c\nconst remoteGraph = new RemoteGraph({\ngraphId: \"agent\",\n  url: \"http://localhost:2024\",\n  headers: { Authorization: `Bearer ${my_token}` },\n});\nconst threads = await remoteGraph.invoke(...);\n</code></pre> <pre><code>curl -H \"Authorization: Bearer ${your-token}\" http://localhost:2024/threads\n</code></pre> </li> </ol>"},{"location":"how-tos/auth/custom_auth/#_4","title":"\u542f\u7528\u667a\u80fd\u4ee3\u7406\u8ba4\u8bc1","text":"<p>\u8ba4\u8bc1 \u540e\uff0c\u5e73\u53f0\u4f1a\u521b\u5efa\u4e00\u4e2a\u7279\u6b8a\u7684\u914d\u7f6e\u5bf9\u8c61\uff08<code>config</code>\uff09\uff0c\u8be5\u5bf9\u8c61\u4f1a\u4f20\u9012\u7ed9 LangGraph Platform \u90e8\u7f72\u3002\u6b64\u5bf9\u8c61\u5305\u542b\u6709\u5173\u5f53\u524d\u7528\u6237\u7684\u4fe1\u606f\uff0c\u5305\u62ec\u4f60\u4ece <code>authenticate</code> \u5904\u7406\u5668\u8fd4\u56de\u7684\u4efb\u4f55\u81ea\u5b9a\u4e49\u5b57\u6bb5\u3002</p> <p>\u8981\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u4ee3\u8868\u7528\u6237\u6267\u884c\u8ba4\u8bc1\u64cd\u4f5c\uff0c\u8bf7\u5728\u56fe\u4e2d\u4f7f\u7528 <code>langgraph_auth_user</code> \u952e\u8bbf\u95ee\u6b64\u5bf9\u8c61\uff1a</p> <pre><code>async function myNode(state, config) {\n  const userConfig = config[\"configurable\"][\"langgraph_auth_user\"];\n  // \u4ee4\u724c\u5728 authenticate \u51fd\u6570\u671f\u95f4\u89e3\u6790\n  const token = userConfig[\"github_token\"];\n  ...\n}\n</code></pre> <p>Note</p> <p>\u4ece\u5b89\u5168\u7684\u5bc6\u94a5\u5b58\u50a8\u83b7\u53d6\u7528\u6237\u51ed\u8bc1\u3002\u4e0d\u5efa\u8bae\u5c06\u5bc6\u94a5\u5b58\u50a8\u5728\u56fe\u72b6\u6001\u4e2d\u3002</p>"},{"location":"how-tos/auth/custom_auth/#_5","title":"\u4e86\u89e3\u66f4\u591a","text":"<ul> <li>\u8ba4\u8bc1\u4e0e\u8bbf\u95ee\u63a7\u5236</li> <li>LangGraph Platform</li> <li>\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u6559\u7a0b</li> </ul>"},{"location":"how-tos/auth/openapi_security/","title":"\u5728 OpenAPI \u4e2d\u8bb0\u5f55 API \u8ba4\u8bc1","text":"<p>\u672c\u6307\u5357\u5c55\u793a\u5982\u4f55\u4e3a LangGraph Platform API \u6587\u6863\u81ea\u5b9a\u4e49 OpenAPI \u5b89\u5168\u6a21\u5f0f\u3002\u826f\u597d\u7684\u5b89\u5168\u6a21\u5f0f\u6587\u6863\u53ef\u4ee5\u5e2e\u52a9 API \u6d88\u8d39\u8005\u4e86\u89e3\u5982\u4f55\u4e0e\u4f60\u7684 API \u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1\uff0c\u751a\u81f3\u53ef\u4ee5\u542f\u7528\u81ea\u52a8\u5ba2\u6237\u7aef\u751f\u6210\u3002\u6709\u5173 LangGraph \u8ba4\u8bc1\u7cfb\u7edf\u7684\u66f4\u591a\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u8ba4\u8bc1\u4e0e\u8bbf\u95ee\u63a7\u5236\u6982\u5ff5\u6307\u5357\u3002</p> <p>\u5b9e\u73b0 vs \u6587\u6863</p> <p>\u672c\u6307\u5357\u4ec5\u6db5\u76d6\u5982\u4f55\u5728 OpenAPI \u4e2d\u8bb0\u5f55\u4f60\u7684\u5b89\u5168\u8981\u6c42\u3002\u8981\u5b9e\u73b0\u5b9e\u9645\u7684\u8ba4\u8bc1\u903b\u8f91\uff0c\u8bf7\u53c2\u9605 \u5982\u4f55\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u3002</p> <p>\u672c\u6307\u5357\u9002\u7528\u4e8e\u6240\u6709 LangGraph Platform \u90e8\u7f72\uff08\u4e91\u6258\u7ba1\u548c\u81ea\u6258\u7ba1\uff09\u3002\u5982\u679c\u4f60\u6ca1\u6709\u4f7f\u7528 LangGraph Platform\uff0c\u5219\u4e0d\u9002\u7528\u4e8e LangGraph \u5f00\u6e90\u5e93\u7684\u4f7f\u7528\u3002</p>"},{"location":"how-tos/auth/openapi_security/#_1","title":"\u9ed8\u8ba4\u6a21\u5f0f","text":"<p>\u9ed8\u8ba4\u5b89\u5168\u6a21\u5f0f\u56e0\u90e8\u7f72\u7c7b\u578b\u800c\u5f02\uff1a</p> LangGraph Platform <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLangGraph Platform \u9700\u8981\u5728 <code>x-api-key</code> \u5934\u90e8\u4e2d\u63d0\u4f9b LangSmith API \u5bc6\u94a5\uff1a</p> <pre><code>components:\n  securitySchemes:\n    apiKeyAuth:\n      type: apiKey\n      in: header\n      name: x-api-key\nsecurity:\n  - apiKeyAuth: []\n</code></pre> <p>\u4f7f\u7528 LangGraph SDK \u65f6\uff0c\u8fd9\u53ef\u4ee5\u4ece\u73af\u5883\u53d8\u91cf\u63a8\u65ad\u3002</p> \u81ea\u6258\u7ba1 <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u81ea\u6258\u7ba1\u90e8\u7f72\u6ca1\u6709\u5b89\u5168\u6a21\u5f0f\u3002\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u53ea\u80fd\u90e8\u7f72\u5728\u5b89\u5168\u7f51\u7edc\u4e0a\u6216\u5e26\u6709\u8ba4\u8bc1\u3002\u8981\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1\uff0c\u8bf7\u53c2\u9605 \u5982\u4f55\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u3002</p>"},{"location":"how-tos/auth/openapi_security/#_2","title":"\u81ea\u5b9a\u4e49\u5b89\u5168\u6a21\u5f0f","text":"<p>\u8981\u5728 OpenAPI \u6587\u6863\u4e2d\u81ea\u5b9a\u4e49\u5b89\u5168\u6a21\u5f0f\uff0c\u8bf7\u5728 <code>langgraph.json</code> \u7684 <code>auth</code> \u914d\u7f6e\u4e2d\u6dfb\u52a0 <code>openapi</code> \u5b57\u6bb5\u3002\u8bf7\u8bb0\u4f4f\uff0c\u8fd9\u53ea\u4f1a\u66f4\u65b0 API \u6587\u6863 - \u4f60\u8fd8\u5fc5\u987b\u5b9e\u73b0\u76f8\u5e94\u7684\u8ba4\u8bc1\u903b\u8f91\uff0c\u5982 \u5982\u4f55\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8ba4\u8bc1 \u4e2d\u6240\u793a\u3002</p> <p>\u8bf7\u6ce8\u610f\uff0cLangGraph Platform \u4e0d\u63d0\u4f9b\u8ba4\u8bc1\u7aef\u70b9 - \u4f60\u9700\u8981\u5728\u5ba2\u6237\u7aef\u5e94\u7528\u4e2d\u5904\u7406\u7528\u6237\u8ba4\u8bc1\uff0c\u5e76\u5c06\u751f\u6210\u7684\u51ed\u8bc1\u4f20\u9012\u7ed9 LangGraph API\u3002</p> PythonOAuth2 Bearer TokenAPI KeyJavaScriptOAuth2 Bearer TokenAPI Key <pre><code>{\n  \"auth\": {\n    \"path\": \"./auth.py:my_auth\",  // \u5728\u6b64\u5b9e\u73b0\u8ba4\u8bc1\u903b\u8f91\n    \"openapi\": {\n      \"securitySchemes\": {\n        \"OAuth2\": {\n          \"type\": \"oauth2\",\n          \"flows\": {\n            \"implicit\": {\n              \"authorizationUrl\": \"https://your-auth-server.com/oauth/authorize\",\n              \"scopes\": {\n                \"me\": \"Read information about the current user\",\n                \"threads\": \"Access to create and manage threads\"\n              }\n            }\n          }\n        }\n      },\n      \"security\": [\n        {\"OAuth2\": [\"me\", \"threads\"]}\n      ]\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"auth\": {\n    \"path\": \"./auth.py:my_auth\",  // \u5728\u6b64\u5b9e\u73b0\u8ba4\u8bc1\u903b\u8f91\n    \"openapi\": {\n      \"securitySchemes\": {\n        \"apiKeyAuth\": {\n          \"type\": \"apiKey\",\n          \"in\": \"header\",\n          \"name\": \"X-API-Key\"\n        }\n      },\n      \"security\": [\n        {\"apiKeyAuth\": []}\n      ]\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"auth\": {\n    \"path\": \"./auth.ts:my_auth\",  // \u5728\u6b64\u5b9e\u73b0\u8ba4\u8bc1\u903b\u8f91\n    \"openapi\": {\n      \"securitySchemes\": {\n        \"OAuth2\": {\n          \"type\": \"oauth2\",\n          \"flows\": {\n            \"implicit\": {\n              \"authorizationUrl\": \"https://your-auth-server.com/oauth/authorize\",\n              \"scopes\": {\n                \"me\": \"Read information about the current user\",\n                \"threads\": \"Access to create and manage threads\"\n              }\n            }\n          }\n        }\n      },\n      \"security\": [\n        {\"OAuth2\": [\"me\", \"threads\"]}\n      ]\n    }\n  }\n}\n</code></pre> <pre><code>{\n  \"auth\": {\n    \"path\": \"./auth.ts:my_auth\",  // \u5728\u6b64\u5b9e\u73b0\u8ba4\u8bc1\u903b\u8f91\n    \"openapi\": {\n      \"securitySchemes\": {\n        \"apiKeyAuth\": {\n          \"type\": \"apiKey\",\n          \"in\": \"header\",\n          \"name\": \"X-API-Key\"\n        }\n      },\n      \"security\": [\n        {\"apiKeyAuth\": []}\n      ]\n    }\n  }\n}\n</code></pre>"},{"location":"how-tos/auth/openapi_security/#_3","title":"\u6d4b\u8bd5","text":"<p>\u66f4\u65b0\u914d\u7f6e\u540e\uff1a</p> <ol> <li>\u90e8\u7f72\u4f60\u7684\u5e94\u7528</li> <li>\u8bbf\u95ee <code>/docs</code> \u67e5\u770b\u66f4\u65b0\u540e\u7684 OpenAPI \u6587\u6863</li> <li>\u4f7f\u7528\u6765\u81ea\u8ba4\u8bc1\u670d\u52a1\u5668\u7684\u51ed\u8bc1\u5c1d\u8bd5\u7aef\u70b9\uff08\u786e\u4fdd\u4f60\u5df2\u5148\u5b9e\u73b0\u8ba4\u8bc1\u903b\u8f91\uff09</li> </ol>"},{"location":"how-tos/http/custom_lifespan/","title":"\u5982\u4f55\u6dfb\u52a0\u81ea\u5b9a\u4e49\u751f\u547d\u5468\u671f\u4e8b\u4ef6","text":"<p>\u5c06\u667a\u80fd\u4ee3\u7406\u90e8\u7f72\u5230 LangGraph Platform \u65f6\uff0c\u4f60\u7ecf\u5e38\u9700\u8981\u5728\u670d\u52a1\u5668\u542f\u52a8\u65f6\u521d\u59cb\u5316\u8d44\u6e90\uff08\u5982\u6570\u636e\u5e93\u8fde\u63a5\uff09\uff0c\u5e76\u786e\u4fdd\u5b83\u4eec\u5728\u5173\u95ed\u65f6\u6b63\u786e\u5173\u95ed\u3002\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u8ba9\u4f60\u53ef\u4ee5\u6302\u63a5\u5230\u670d\u52a1\u5668\u7684\u542f\u52a8\u548c\u5173\u95ed\u5e8f\u5217\u6765\u5904\u7406\u8fd9\u4e9b\u5173\u952e\u7684\u8bbe\u7f6e\u548c\u6e05\u7406\u4efb\u52a1\u3002</p> <p>\u8fd9\u4e0e \u6dfb\u52a0\u81ea\u5b9a\u4e49\u8def\u7531 \u7684\u5de5\u4f5c\u65b9\u5f0f\u76f8\u540c\u3002\u4f60\u53ea\u9700\u8981\u63d0\u4f9b\u81ea\u5df1\u7684 <code>Starlette</code> \u5e94\u7528\uff08\u5305\u62ec <code>FastAPI</code>\u3001<code>FastHTML</code> \u548c\u5176\u4ed6\u517c\u5bb9\u5e94\u7528\uff09\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 FastAPI \u7684\u793a\u4f8b\u3002</p> \u4ec5\u9650 Python <p>\u6211\u4eec\u76ee\u524d\u4ec5\u5728 <code>langgraph-api&gt;=0.0.26</code> \u7684 Python \u90e8\u7f72\u4e2d\u652f\u6301\u81ea\u5b9a\u4e49\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u3002</p>"},{"location":"how-tos/http/custom_lifespan/#_2","title":"\u521b\u5efa\u5e94\u7528","text":"<p>\u4ece \u73b0\u6709\u7684 LangGraph Platform \u5e94\u7528\u5f00\u59cb\uff0c\u5c06\u4ee5\u4e0b\u751f\u547d\u5468\u671f\u4ee3\u7801\u6dfb\u52a0\u5230\u4f60\u7684 <code>webapp.py</code> \u6587\u4ef6\u4e2d\u3002\u5982\u679c\u4f60\u4ece\u96f6\u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 CLI \u4ece\u6a21\u677f\u521b\u5efa\u65b0\u5e94\u7528\u3002</p> <pre><code>langgraph new --template=new-langgraph-project-python my_new_project\n</code></pre> <p>\u4e00\u65e6\u4f60\u6709\u4e86 LangGraph \u9879\u76ee\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5e94\u7528\u4ee3\u7801\uff1a</p> <pre><code># ./src/agent/webapp.py\nfrom contextlib import asynccontextmanager\nfrom fastapi import FastAPI\nfrom sqlalchemy.ext.asyncio import create_async_engine, AsyncSession\nfrom sqlalchemy.orm import sessionmaker\n\n@asynccontextmanager\nasync def lifespan(app: FastAPI):\n    # \u4f8b\u5982...\n    engine = create_async_engine(\"postgresql+asyncpg://user:pass@localhost/db\")\n    # \u521b\u5efa\u53ef\u590d\u7528\u7684\u4f1a\u8bdd\u5de5\u5382\n    async_session = sessionmaker(engine, class_=AsyncSession)\n    # \u5b58\u50a8\u5728\u5e94\u7528\u72b6\u6001\u4e2d\n    app.state.db_session = async_session\n    yield\n    # \u6e05\u7406\u8fde\u63a5\n    await engine.dispose()\n\n# highlight-next-line\napp = FastAPI(lifespan=lifespan)\n\n# ... \u5982\u679c\u9700\u8981\u53ef\u4ee5\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8def\u7531\u3002\n</code></pre>"},{"location":"how-tos/http/custom_lifespan/#langgraphjson","title":"\u914d\u7f6e <code>langgraph.json</code>","text":"<p>\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230\u4f60\u7684 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u786e\u4fdd\u8def\u5f84\u6307\u5411\u4f60\u4e0a\u9762\u521b\u5efa\u7684 <code>webapp.py</code> \u6587\u4ef6\u3002</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent/graph.py:graph\"\n  },\n  \"env\": \".env\",\n  \"http\": {\n    \"app\": \"./src/agent/webapp.py:app\"\n  }\n  // \u5176\u4ed6\u914d\u7f6e\u9009\u9879\u5982 auth\u3001store \u7b49\n}\n</code></pre>"},{"location":"how-tos/http/custom_lifespan/#_3","title":"\u542f\u52a8\u670d\u52a1\u5668","text":"<p>\u5728\u672c\u5730\u6d4b\u8bd5\u670d\u52a1\u5668\uff1a</p> <pre><code>langgraph dev --no-browser\n</code></pre> <p>\u5f53\u670d\u52a1\u5668\u542f\u52a8\u65f6\u4f60\u5e94\u8be5\u4f1a\u770b\u5230\u542f\u52a8\u6d88\u606f\uff0c\u5f53\u4f60\u7528 <code>Ctrl+C</code> \u505c\u6b62\u5b83\u65f6\u4f1a\u770b\u5230\u6e05\u7406\u6d88\u606f\u3002</p>"},{"location":"how-tos/http/custom_lifespan/#_4","title":"\u90e8\u7f72","text":"<p>\u4f60\u53ef\u4ee5\u5c06\u5e94\u7528\u539f\u6837\u90e8\u7f72\u5230 LangGraph Platform \u6216\u4f60\u7684\u81ea\u6258\u7ba1\u5e73\u53f0\u3002</p>"},{"location":"how-tos/http/custom_lifespan/#_5","title":"\u540e\u7eed\u6b65\u9aa4","text":"<p>\u73b0\u5728\u4f60\u5df2\u7ecf\u5411\u90e8\u7f72\u6dfb\u52a0\u4e86\u751f\u547d\u5468\u671f\u4e8b\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\u7684\u6280\u672f\u6dfb\u52a0 \u81ea\u5b9a\u4e49\u8def\u7531 \u6216 \u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6 \u6765\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u670d\u52a1\u5668\u7684\u884c\u4e3a\u3002</p>"},{"location":"how-tos/http/custom_middleware/","title":"\u5982\u4f55\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6","text":"<p>\u5c06\u667a\u80fd\u4ee3\u7406\u90e8\u7f72\u5230 LangGraph Platform \u65f6\uff0c\u4f60\u53ef\u4ee5\u5411\u670d\u52a1\u5668\u6dfb\u52a0\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\u6765\u5904\u7406\u65e5\u5fd7\u8bb0\u5f55\u8bf7\u6c42\u6307\u6807\u3001\u6ce8\u5165\u6216\u68c0\u67e5\u5934\u90e8\u4ee5\u53ca\u6267\u884c\u5b89\u5168\u7b56\u7565\u7b49\u95ee\u9898\uff0c\u800c\u65e0\u9700\u4fee\u6539\u6838\u5fc3\u670d\u52a1\u5668\u903b\u8f91\u3002\u8fd9\u4e0e \u6dfb\u52a0\u81ea\u5b9a\u4e49\u8def\u7531 \u7684\u5de5\u4f5c\u65b9\u5f0f\u76f8\u540c\u3002\u4f60\u53ea\u9700\u8981\u63d0\u4f9b\u81ea\u5df1\u7684 <code>Starlette</code> \u5e94\u7528\uff08\u5305\u62ec <code>FastAPI</code>\u3001<code>FastHTML</code> \u548c\u5176\u4ed6\u517c\u5bb9\u5e94\u7528\uff09\u3002</p> <p>\u6dfb\u52a0\u4e2d\u95f4\u4ef6\u8ba9\u4f60\u53ef\u4ee5\u5728\u6574\u4e2a\u90e8\u7f72\u4e2d\u5168\u5c40\u62e6\u622a\u548c\u4fee\u6539\u8bf7\u6c42\u548c\u54cd\u5e94\uff0c\u65e0\u8bba\u5b83\u4eec\u662f\u8bbf\u95ee\u4f60\u7684\u81ea\u5b9a\u4e49\u7aef\u70b9\u8fd8\u662f\u5185\u7f6e\u7684 LangGraph Platform API\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 FastAPI \u7684\u793a\u4f8b\u3002</p> \u4ec5\u9650 Python <p>\u6211\u4eec\u76ee\u524d\u4ec5\u5728 <code>langgraph-api&gt;=0.0.26</code> \u7684 Python \u90e8\u7f72\u4e2d\u652f\u6301\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\u3002</p>"},{"location":"how-tos/http/custom_middleware/#_2","title":"\u521b\u5efa\u5e94\u7528","text":"<p>\u4ece \u73b0\u6709\u7684 LangGraph Platform \u5e94\u7528\u5f00\u59cb\uff0c\u5c06\u4ee5\u4e0b\u4e2d\u95f4\u4ef6\u4ee3\u7801\u6dfb\u52a0\u5230\u4f60\u7684 webapp \u6587\u4ef6\u4e2d\u3002\u5982\u679c\u4f60\u4ece\u96f6\u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 CLI \u4ece\u6a21\u677f\u521b\u5efa\u65b0\u5e94\u7528\u3002</p> <pre><code>langgraph new --template=new-langgraph-project-python my_new_project\n</code></pre> <p>\u4e00\u65e6\u4f60\u6709\u4e86 LangGraph \u9879\u76ee\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5e94\u7528\u4ee3\u7801\uff1a</p> <pre><code># ./src/agent/webapp.py\nfrom fastapi import FastAPI, Request\nfrom starlette.middleware.base import BaseHTTPMiddleware\n\n# highlight-next-line\napp = FastAPI()\n\nclass CustomHeaderMiddleware(BaseHTTPMiddleware):\n    async def dispatch(self, request: Request, call_next):\n        response = await call_next(request)\n        response.headers['X-Custom-Header'] = 'Hello from middleware!'\n        return response\n\n# \u5c06\u4e2d\u95f4\u4ef6\u6dfb\u52a0\u5230\u5e94\u7528\napp.add_middleware(CustomHeaderMiddleware)\n</code></pre>"},{"location":"how-tos/http/custom_middleware/#langgraphjson","title":"\u914d\u7f6e <code>langgraph.json</code>","text":"<p>\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230\u4f60\u7684 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u786e\u4fdd\u8def\u5f84\u6307\u5411\u4f60\u4e0a\u9762\u521b\u5efa\u7684 <code>webapp.py</code> \u6587\u4ef6\u3002</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent/graph.py:graph\"\n  },\n  \"env\": \".env\",\n  \"http\": {\n    \"app\": \"./src/agent/webapp.py:app\"\n  }\n  // \u5176\u4ed6\u914d\u7f6e\u9009\u9879\u5982 auth\u3001store \u7b49\n}\n</code></pre>"},{"location":"how-tos/http/custom_middleware/#_3","title":"\u542f\u52a8\u670d\u52a1\u5668","text":"<p>\u5728\u672c\u5730\u6d4b\u8bd5\u670d\u52a1\u5668\uff1a</p> <pre><code>langgraph dev --no-browser\n</code></pre> <p>\u73b0\u5728\u4efb\u4f55\u5bf9\u670d\u52a1\u5668\u7684\u8bf7\u6c42\u90fd\u5c06\u5728\u5176\u54cd\u5e94\u4e2d\u5305\u542b\u81ea\u5b9a\u4e49\u5934\u90e8 <code>X-Custom-Header</code>\u3002</p>"},{"location":"how-tos/http/custom_middleware/#_4","title":"\u90e8\u7f72","text":"<p>\u4f60\u53ef\u4ee5\u5c06\u6b64\u5e94\u7528\u539f\u6837\u90e8\u7f72\u5230 LangGraph Platform \u6216\u4f60\u7684\u81ea\u6258\u7ba1\u5e73\u53f0\u3002</p>"},{"location":"how-tos/http/custom_middleware/#_5","title":"\u540e\u7eed\u6b65\u9aa4","text":"<p>\u73b0\u5728\u4f60\u5df2\u7ecf\u5411\u90e8\u7f72\u6dfb\u52a0\u4e86\u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7c7b\u4f3c\u7684\u6280\u672f\u6dfb\u52a0 \u81ea\u5b9a\u4e49\u8def\u7531 \u6216\u5b9a\u4e49 \u81ea\u5b9a\u4e49\u751f\u547d\u5468\u671f\u4e8b\u4ef6 \u6765\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u670d\u52a1\u5668\u7684\u884c\u4e3a\u3002</p>"},{"location":"how-tos/http/custom_routes/","title":"\u5982\u4f55\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8def\u7531","text":"<p>\u5c06\u667a\u80fd\u4ee3\u7406\u90e8\u7f72\u5230 LangGraph Platform \u65f6\uff0c\u4f60\u7684\u670d\u52a1\u5668\u4f1a\u81ea\u52a8\u66b4\u9732\u7528\u4e8e\u521b\u5efa\u8fd0\u884c\u548c\u7ebf\u7a0b\u3001\u4e0e\u957f\u671f\u8bb0\u5fc6\u5b58\u50a8\u4ea4\u4e92\u3001\u7ba1\u7406\u53ef\u914d\u7f6e\u52a9\u624b\u4ee5\u53ca\u5176\u4ed6\u6838\u5fc3\u529f\u80fd\u7684\u8def\u7531\uff08\u67e5\u770b\u6240\u6709\u9ed8\u8ba4 API \u7aef\u70b9\uff09\u3002</p> <p>\u4f60\u53ef\u4ee5\u901a\u8fc7\u63d0\u4f9b\u81ea\u5df1\u7684 <code>Starlette</code> \u5e94\u7528\uff08\u5305\u62ec <code>FastAPI</code>\u3001<code>FastHTML</code> \u548c\u5176\u4ed6\u517c\u5bb9\u5e94\u7528\uff09\u6765\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8def\u7531\u3002\u4f60\u9700\u8981\u5728 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u63d0\u4f9b\u5e94\u7528\u7684\u8def\u5f84\u6765\u8ba9 LangGraph Platform \u611f\u77e5\u5b83\u3002</p> <p>\u5b9a\u4e49\u81ea\u5b9a\u4e49\u5e94\u7528\u5bf9\u8c61\u8ba9\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4efb\u4f55\u4f60\u60f3\u8981\u7684\u8def\u7531\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u4ece\u6dfb\u52a0 <code>/login</code> \u7aef\u70b9\u5230\u7f16\u5199\u5b8c\u6574\u7684\u5168\u6808 Web \u5e94\u7528\uff0c\u6240\u6709\u8fd9\u4e9b\u90fd\u90e8\u7f72\u5728\u5355\u4e2a LangGraph Server \u4e2d\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u4f7f\u7528 FastAPI \u7684\u793a\u4f8b\u3002</p>"},{"location":"how-tos/http/custom_routes/#_2","title":"\u521b\u5efa\u5e94\u7528","text":"<p>\u4ece \u73b0\u6709\u7684 LangGraph Platform \u5e94\u7528\u5f00\u59cb\uff0c\u5c06\u4ee5\u4e0b\u81ea\u5b9a\u4e49\u8def\u7531\u4ee3\u7801\u6dfb\u52a0\u5230\u4f60\u7684 webapp \u6587\u4ef6\u4e2d\u3002\u5982\u679c\u4f60\u4ece\u96f6\u5f00\u59cb\uff0c\u53ef\u4ee5\u4f7f\u7528 CLI \u4ece\u6a21\u677f\u521b\u5efa\u65b0\u5e94\u7528\u3002</p> <pre><code>langgraph new --template=new-langgraph-project-python my_new_project\n</code></pre> <p>\u4e00\u65e6\u4f60\u6709\u4e86 LangGraph \u9879\u76ee\uff0c\u6dfb\u52a0\u4ee5\u4e0b\u5e94\u7528\u4ee3\u7801\uff1a</p> <pre><code># ./src/agent/webapp.py\nfrom fastapi import FastAPI\n\n# highlight-next-line\napp = FastAPI()\n\n\n@app.get(\"/hello\")\ndef read_root():\n    return {\"Hello\": \"World\"}\n</code></pre>"},{"location":"how-tos/http/custom_routes/#langgraphjson","title":"\u914d\u7f6e <code>langgraph.json</code>","text":"<p>\u5c06\u4ee5\u4e0b\u5185\u5bb9\u6dfb\u52a0\u5230\u4f60\u7684 <code>langgraph.json</code> \u914d\u7f6e\u6587\u4ef6\u4e2d\u3002\u786e\u4fdd\u8def\u5f84\u6307\u5411\u4f60\u4e0a\u9762\u521b\u5efa\u7684 <code>webapp.py</code> \u6587\u4ef6\u4e2d\u7684 FastAPI \u5e94\u7528\u5b9e\u4f8b <code>app</code>\u3002</p> <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent/graph.py:graph\"\n  },\n  \"env\": \".env\",\n  \"http\": {\n    \"app\": \"./src/agent/webapp.py:app\"\n  }\n  // \u5176\u4ed6\u914d\u7f6e\u9009\u9879\u5982 auth\u3001store \u7b49\n}\n</code></pre>"},{"location":"how-tos/http/custom_routes/#_3","title":"\u542f\u52a8\u670d\u52a1\u5668","text":"<p>\u5728\u672c\u5730\u6d4b\u8bd5\u670d\u52a1\u5668\uff1a</p> <pre><code>langgraph dev --no-browser\n</code></pre> <p>\u5982\u679c\u4f60\u5728\u6d4f\u89c8\u5668\u4e2d\u5bfc\u822a\u5230 <code>localhost:2024/hello</code>\uff08<code>2024</code> \u662f\u9ed8\u8ba4\u5f00\u53d1\u7aef\u53e3\uff09\uff0c\u4f60\u5e94\u8be5\u4f1a\u770b\u5230 <code>/hello</code> \u7aef\u70b9\u8fd4\u56de <code>{\"Hello\": \"World\"}</code>\u3002</p> <p>\u8986\u76d6\u9ed8\u8ba4\u7aef\u70b9</p> <p>\u4f60\u5728\u5e94\u7528\u4e2d\u521b\u5efa\u7684\u8def\u7531\u4f18\u5148\u4e8e\u7cfb\u7edf\u9ed8\u8ba4\u503c\uff0c\u8fd9\u610f\u5473\u7740\u4f60\u53ef\u4ee5\u8986\u76d6\u548c\u91cd\u65b0\u5b9a\u4e49\u4efb\u4f55\u9ed8\u8ba4\u7aef\u70b9\u7684\u884c\u4e3a\u3002</p>"},{"location":"how-tos/http/custom_routes/#_4","title":"\u90e8\u7f72","text":"<p>\u4f60\u53ef\u4ee5\u5c06\u6b64\u5e94\u7528\u539f\u6837\u90e8\u7f72\u5230 LangGraph Platform \u6216\u4f60\u7684\u81ea\u6258\u7ba1\u5e73\u53f0\u3002</p>"},{"location":"how-tos/http/custom_routes/#_5","title":"\u540e\u7eed\u6b65\u9aa4","text":"<p>\u73b0\u5728\u4f60\u5df2\u7ecf\u5411\u90e8\u7f72\u6dfb\u52a0\u4e86\u81ea\u5b9a\u4e49\u8def\u7531\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f8\u540c\u7684\u6280\u672f\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u670d\u52a1\u5668\u7684\u884c\u4e3a\uff0c\u4f8b\u5982\u5b9a\u4e49 \u81ea\u5b9a\u4e49\u4e2d\u95f4\u4ef6 \u548c \u81ea\u5b9a\u4e49\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u3002</p>"},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/","title":"\u542f\u7528\u4eba\u5de5\u5e72\u9884","text":"<p>\u8981\u5728\u667a\u80fd\u4ee3\u7406\u6216\u5de5\u4f5c\u6d41\u4e2d\u5ba1\u67e5\u3001\u7f16\u8f91\u548c\u6279\u51c6\u5de5\u5177\u8c03\u7528\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e2d\u65ad\u6765\u6682\u505c\u56fe\u5e76\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002\u4e2d\u65ad\u4f7f\u7528 LangGraph \u7684 \u6301\u4e45\u5316 \u5c42\uff08\u4fdd\u5b58\u56fe\u72b6\u6001\uff09\uff0c\u53ef\u4ee5\u65e0\u9650\u671f\u6682\u505c\u56fe\u6267\u884c\u76f4\u5230\u4f60\u6062\u590d\u3002</p> <p>Info</p> <p>\u6709\u5173\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4eba\u673a\u534f\u540c \u6982\u5ff5\u6307\u5357\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#interrupt","title":"\u4f7f\u7528 <code>interrupt</code> \u6682\u505c","text":"Python <p>\u52a8\u6001\u4e2d\u65ad\uff08\u4e5f\u79f0\u4e3a\u52a8\u6001\u65ad\u70b9\uff09\u6839\u636e\u56fe\u7684\u5f53\u524d\u72b6\u6001\u89e6\u53d1\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u8c03\u7528 @<code>interrupt</code> \u51fd\u6570 \u6765\u8bbe\u7f6e\u52a8\u6001\u4e2d\u65ad\u3002\u56fe\u5c06\u6682\u505c\uff0c\u5141\u8bb8\u4eba\u5de5\u5e72\u9884\uff0c\u7136\u540e\u4f7f\u7528\u4ed6\u4eec\u7684\u8f93\u5165\u6062\u590d\u56fe\u3002\u8fd9\u5bf9\u4e8e\u6279\u51c6\u3001\u7f16\u8f91\u6216\u6536\u96c6\u989d\u5916\u4e0a\u4e0b\u6587\u7b49\u4efb\u52a1\u5f88\u6709\u7528\u3002</p> <p>Note</p> <p>\u4ece v1.0 \u5f00\u59cb\uff0c<code>interrupt</code> \u662f\u6682\u505c\u56fe\u7684\u63a8\u8350\u65b9\u5f0f\u3002<code>NodeInterrupt</code> \u5df2\u5f03\u7528\uff0c\u5c06\u5728 v2.0 \u4e2d\u79fb\u9664\u3002</p> JavaScript <p>\u52a8\u6001\u4e2d\u65ad\uff08\u4e5f\u79f0\u4e3a\u52a8\u6001\u65ad\u70b9\uff09\u6839\u636e\u56fe\u7684\u5f53\u524d\u72b6\u6001\u89e6\u53d1\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u8c03\u7528 @<code>interrupt</code> \u51fd\u6570 \u6765\u8bbe\u7f6e\u52a8\u6001\u4e2d\u65ad\u3002\u56fe\u5c06\u6682\u505c\uff0c\u5141\u8bb8\u4eba\u5de5\u5e72\u9884\uff0c\u7136\u540e\u4f7f\u7528\u4ed6\u4eec\u7684\u8f93\u5165\u6062\u590d\u56fe\u3002\u8fd9\u5bf9\u4e8e\u6279\u51c6\u3001\u7f16\u8f91\u6216\u6536\u96c6\u989d\u5916\u4e0a\u4e0b\u6587\u7b49\u4efb\u52a1\u5f88\u6709\u7528\u3002</p> <p>\u8981\u5728\u56fe\u4e2d\u4f7f\u7528 <code>interrupt</code>\uff0c\u4f60\u9700\u8981\uff1a</p> <ol> <li>\u6307\u5b9a\u68c0\u67e5\u70b9\u5668 \u4ee5\u5728\u6bcf\u4e00\u6b65\u540e\u4fdd\u5b58\u56fe\u72b6\u6001\u3002</li> <li>\u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u8c03\u7528 <code>interrupt()</code>\u3002\u6709\u5173\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605 \u5e38\u89c1\u6a21\u5f0f \u90e8\u5206\u3002</li> <li>\u4f7f\u7528 \u7ebf\u7a0b ID \u8fd0\u884c\u56fe \u76f4\u5230\u547d\u4e2d <code>interrupt</code>\u3002</li> <li>\u4f7f\u7528 <code>invoke</code>/<code>stream</code> \u6062\u590d\u6267\u884c\uff08\u53c2\u89c1 <code>Command</code> \u539f\u8bed\uff09\u3002</li> </ol> Python <pre><code># highlight-next-line\nfrom langgraph.types import interrupt, Command\n\ndef human_node(state: State):\n    # highlight-next-line\n    value = interrupt( # (1)!\n        {\n            \"text_to_revise\": state[\"some_text\"] # (2)!\n        }\n    )\n    return {\n        \"some_text\": value # (3)!\n    }\n\n\ngraph = graph_builder.compile(checkpointer=checkpointer) # (4)!\n\n# \u8fd0\u884c\u56fe\u76f4\u5230\u547d\u4e2d\u4e2d\u65ad\u3002\nconfig = {\"configurable\": {\"thread_id\": \"some_id\"}}\nresult = graph.invoke({\"some_text\": \"original text\"}, config=config) # (5)!\nprint(result['__interrupt__']) # (6)!\n# &gt; [\n# &gt;    Interrupt(\n# &gt;       value={'text_to_revise': 'original text'},\n# &gt;       resumable=True,\n# &gt;       ns=['human_node:6ce9e64f-edef-fe5d-f7dc-511fa9526960']\n# &gt;    )\n# &gt; ]\n\n# highlight-next-line\nprint(graph.invoke(Command(resume=\"Edited text\"), config=config)) # (7)!\n# &gt; {'some_text': 'Edited text'}\n</code></pre> <ol> <li><code>interrupt(...)</code> \u5728 <code>human_node</code> \u6682\u505c\u6267\u884c\uff0c\u5c06\u7ed9\u5b9a\u7684\u8f7d\u8377\u5448\u73b0\u7ed9\u4eba\u7c7b\u3002</li> <li>\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u90fd\u53ef\u4ee5\u4f20\u9012\u7ed9 <code>interrupt</code> \u51fd\u6570\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u5305\u542b\u8981\u4fee\u6539\u6587\u672c\u7684\u5b57\u5178\u3002</li> <li>\u6062\u590d\u540e\uff0c<code>interrupt(...)</code> \u7684\u8fd4\u56de\u503c\u662f\u4eba\u7c7b\u63d0\u4f9b\u7684\u8f93\u5165\uff0c\u7528\u4e8e\u66f4\u65b0\u72b6\u6001\u3002</li> <li>\u9700\u8981\u68c0\u67e5\u70b9\u5668\u6765\u6301\u4e45\u5316\u56fe\u72b6\u6001\u3002\u5728\u751f\u4ea7\u4e2d\uff0c\u8fd9\u5e94\u8be5\u662f\u6301\u4e45\u7684\uff08\u4f8b\u5982\u7531\u6570\u636e\u5e93\u652f\u6301\uff09\u3002</li> <li>\u56fe\u4f7f\u7528\u4e00\u4e9b\u521d\u59cb\u72b6\u6001\u8c03\u7528\u3002</li> <li>\u5f53\u56fe\u547d\u4e2d\u4e2d\u65ad\u65f6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709\u8f7d\u8377\u548c\u5143\u6570\u636e\u7684 <code>Interrupt</code> \u5bf9\u8c61\u3002</li> <li>\u56fe\u4f7f\u7528 <code>Command(resume=...)</code> \u6062\u590d\uff0c\u6ce8\u5165\u4eba\u7c7b\u7684\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> JavaScript <pre><code>// highlight-next-line\nimport { interrupt, Command } from \"@langchain/langgraph\";\n\nconst graph = graphBuilder\n  .addNode(\"humanNode\", (state) =&gt; {\n    // highlight-next-line\n    const value = interrupt(\n      // (1)!\n      {\n        textToRevise: state.someText, // (2)!\n      }\n    );\n    return {\n      someText: value, // (3)!\n    };\n  })\n  .addEdge(START, \"humanNode\")\n  .compile({ checkpointer }); // (4)!\n\n// \u8fd0\u884c\u56fe\u76f4\u5230\u547d\u4e2d\u4e2d\u65ad\u3002\nconst config = { configurable: { thread_id: \"some_id\" } };\nconst result = await graph.invoke({ someText: \"original text\" }, config); // (5)!\nconsole.log(result.__interrupt__); // (6)!\n// &gt; [\n// &gt;   {\n// &gt;     value: { textToRevise: 'original text' },\n// &gt;     resumable: true,\n// &gt;     ns: ['humanNode:6ce9e64f-edef-fe5d-f7dc-511fa9526960'],\n// &gt;     when: 'during'\n// &gt;   }\n// &gt; ]\n\n// highlight-next-line\nconsole.log(await graph.invoke(new Command({ resume: \"Edited text\" }), config)); // (7)!\n// &gt; { someText: 'Edited text' }\n</code></pre> <ol> <li><code>interrupt(...)</code> \u5728 <code>humanNode</code> \u6682\u505c\u6267\u884c\uff0c\u5c06\u7ed9\u5b9a\u7684\u8f7d\u8377\u5448\u73b0\u7ed9\u4eba\u7c7b\u3002</li> <li>\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u90fd\u53ef\u4ee5\u4f20\u9012\u7ed9 <code>interrupt</code> \u51fd\u6570\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u5305\u542b\u8981\u4fee\u6539\u6587\u672c\u7684\u5bf9\u8c61\u3002</li> <li>\u6062\u590d\u540e\uff0c<code>interrupt(...)</code> \u7684\u8fd4\u56de\u503c\u662f\u4eba\u7c7b\u63d0\u4f9b\u7684\u8f93\u5165\uff0c\u7528\u4e8e\u66f4\u65b0\u72b6\u6001\u3002</li> <li>\u9700\u8981\u68c0\u67e5\u70b9\u5668\u6765\u6301\u4e45\u5316\u56fe\u72b6\u6001\u3002\u5728\u751f\u4ea7\u4e2d\uff0c\u8fd9\u5e94\u8be5\u662f\u6301\u4e45\u7684\uff08\u4f8b\u5982\u7531\u6570\u636e\u5e93\u652f\u6301\uff09\u3002</li> <li>\u56fe\u4f7f\u7528\u4e00\u4e9b\u521d\u59cb\u72b6\u6001\u8c03\u7528\u3002</li> <li>\u5f53\u56fe\u547d\u4e2d\u4e2d\u65ad\u65f6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u5305\u542b <code>__interrupt__</code> \u7684\u5bf9\u8c61\uff0c\u5176\u4e2d\u6709\u8f7d\u8377\u548c\u5143\u6570\u636e\u3002</li> <li>\u56fe\u4f7f\u7528 <code>Command({ resume: ... })</code> \u6062\u590d\uff0c\u6ce8\u5165\u4eba\u7c7b\u7684\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> \u6269\u5c55\u793a\u4f8b\uff1a\u4f7f\u7528 <code>interrupt</code> Python <pre><code>from typing import TypedDict\nimport uuid\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.constants import START\nfrom langgraph.graph import StateGraph\n\n# highlight-next-line\nfrom langgraph.types import interrupt, Command\n\n\nclass State(TypedDict):\n    some_text: str\n\n\ndef human_node(state: State):\n    # highlight-next-line\n    value = interrupt(  # (1)!\n        {\n            \"text_to_revise\": state[\"some_text\"]  # (2)!\n        }\n    )\n    return {\n        \"some_text\": value  # (3)!\n    }\n\n\n# \u6784\u5efa\u56fe\ngraph_builder = StateGraph(State)\ngraph_builder.add_node(\"human_node\", human_node)\ngraph_builder.add_edge(START, \"human_node\")\ncheckpointer = InMemorySaver()  # (4)!\ngraph = graph_builder.compile(checkpointer=checkpointer)\n# \u4f20\u9012\u7ebf\u7a0b ID \u7ed9\u56fe\u6765\u8fd0\u884c\u5b83\u3002\nconfig = {\"configurable\": {\"thread_id\": uuid.uuid4()}}\n# \u8fd0\u884c\u56fe\u76f4\u5230\u547d\u4e2d\u4e2d\u65ad\u3002\nresult = graph.invoke({\"some_text\": \"original text\"}, config=config)  # (5)!\n\nprint(result['__interrupt__']) # (6)!\n# &gt; [\n# &gt;    Interrupt(\n# &gt;       value={'text_to_revise': 'original text'},\n# &gt;       resumable=True,\n# &gt;       ns=['human_node:6ce9e64f-edef-fe5d-f7dc-511fa9526960']\n# &gt;    )\n# &gt; ]\nprint(result[\"__interrupt__\"])  # (6)!\n# &gt; [Interrupt(value={'text_to_revise': 'original text'}, id='6d7c4048049254c83195429a3659661d')]\n\n# highlight-next-line\nprint(graph.invoke(Command(resume=\"Edited text\"), config=config)) # (7)!\n# &gt; {'some_text': 'Edited text'}\n</code></pre> <ol> <li><code>interrupt(...)</code> \u5728 <code>human_node</code> \u6682\u505c\u6267\u884c\uff0c\u5c06\u7ed9\u5b9a\u7684\u8f7d\u8377\u5448\u73b0\u7ed9\u4eba\u7c7b\u3002</li> <li>\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u90fd\u53ef\u4ee5\u4f20\u9012\u7ed9 <code>interrupt</code> \u51fd\u6570\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u5305\u542b\u8981\u4fee\u6539\u6587\u672c\u7684\u5b57\u5178\u3002</li> <li>\u6062\u590d\u540e\uff0c<code>interrupt(...)</code> \u7684\u8fd4\u56de\u503c\u662f\u4eba\u7c7b\u63d0\u4f9b\u7684\u8f93\u5165\uff0c\u7528\u4e8e\u66f4\u65b0\u72b6\u6001\u3002</li> <li>\u9700\u8981\u68c0\u67e5\u70b9\u5668\u6765\u6301\u4e45\u5316\u56fe\u72b6\u6001\u3002\u5728\u751f\u4ea7\u4e2d\uff0c\u8fd9\u5e94\u8be5\u662f\u6301\u4e45\u7684\uff08\u4f8b\u5982\u7531\u6570\u636e\u5e93\u652f\u6301\uff09\u3002</li> <li>\u56fe\u4f7f\u7528\u4e00\u4e9b\u521d\u59cb\u72b6\u6001\u8c03\u7528\u3002</li> <li>\u5f53\u56fe\u547d\u4e2d\u4e2d\u65ad\u65f6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709\u8f7d\u8377\u548c\u5143\u6570\u636e\u7684 <code>Interrupt</code> \u5bf9\u8c61\u3002</li> <li>\u56fe\u4f7f\u7528 <code>Command(resume=...)</code> \u6062\u590d\uff0c\u6ce8\u5165\u4eba\u7c7b\u7684\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> JavaScript <pre><code>import { z } from \"zod\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { MemorySaver, StateGraph, START, interrupt, Command } from \"@langchain/langgraph\";\n\nconst StateAnnotation = z.object({\n  someText: z.string(),\n});\n\n// \u6784\u5efa\u56fe\nconst graphBuilder = new StateGraph(StateAnnotation)\n  .addNode(\"humanNode\", (state) =&gt; {\n    // highlight-next-line\n    const value = interrupt( // (1)!\n      {\n        textToRevise: state.someText // (2)!\n      }\n    );\n    return {\n      someText: value // (3)!\n    };\n  })\n  .addEdge(START, \"humanNode\");\n\nconst checkpointer = new MemorySaver(); // (4)!\n\nconst graph = graphBuilder.compile({ checkpointer });\n\n// \u4f20\u9012\u7ebf\u7a0b ID \u7ed9\u56fe\u6765\u8fd0\u884c\u5b83\u3002\nconst config = { configurable: { thread_id: uuidv4() } };\n\n// \u8fd0\u884c\u56fe\u76f4\u5230\u547d\u4e2d\u4e2d\u65ad\u3002\nconst result = await graph.invoke({ someText: \"original text\" }, config); // (5)!\n\nconsole.log(result.__interrupt__); // (6)!\n// &gt; [\n// &gt;   {\n// &gt;     value: { textToRevise: 'original text' },\n// &gt;     resumable: true,\n// &gt;     ns: ['humanNode:6ce9e64f-edef-fe5d-f7dc-511fa9526960'],\n// &gt;     when: 'during'\n// &gt;   }\n// &gt; ]\n\n// highlight-next-line\nconsole.log(await graph.invoke(new Command({ resume: \"Edited text\" }), config)); // (7)!\n// &gt; { someText: 'Edited text' }\n</code></pre> <ol> <li><code>interrupt(...)</code> \u5728 <code>humanNode</code> \u6682\u505c\u6267\u884c\uff0c\u5c06\u7ed9\u5b9a\u7684\u8f7d\u8377\u5448\u73b0\u7ed9\u4eba\u7c7b\u3002</li> <li>\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u90fd\u53ef\u4ee5\u4f20\u9012\u7ed9 <code>interrupt</code> \u51fd\u6570\u3002\u8fd9\u91cc\u662f\u4e00\u4e2a\u5305\u542b\u8981\u4fee\u6539\u6587\u672c\u7684\u5bf9\u8c61\u3002</li> <li>\u6062\u590d\u540e\uff0c<code>interrupt(...)</code> \u7684\u8fd4\u56de\u503c\u662f\u4eba\u7c7b\u63d0\u4f9b\u7684\u8f93\u5165\uff0c\u7528\u4e8e\u66f4\u65b0\u72b6\u6001\u3002</li> <li>\u9700\u8981\u68c0\u67e5\u70b9\u5668\u6765\u6301\u4e45\u5316\u56fe\u72b6\u6001\u3002\u5728\u751f\u4ea7\u4e2d\uff0c\u8fd9\u5e94\u8be5\u662f\u6301\u4e45\u7684\uff08\u4f8b\u5982\u7531\u6570\u636e\u5e93\u652f\u6301\uff09\u3002</li> <li>\u56fe\u4f7f\u7528\u4e00\u4e9b\u521d\u59cb\u72b6\u6001\u8c03\u7528\u3002</li> <li>\u5f53\u56fe\u547d\u4e2d\u4e2d\u65ad\u65f6\uff0c\u5b83\u8fd4\u56de\u4e00\u4e2a\u5305\u542b <code>__interrupt__</code> \u7684\u5bf9\u8c61\uff0c\u5176\u4e2d\u6709\u8f7d\u8377\u548c\u5143\u6570\u636e\u3002</li> <li>\u56fe\u4f7f\u7528 <code>Command({ resume: ... })</code> \u6062\u590d\uff0c\u6ce8\u5165\u4eba\u7c7b\u7684\u8f93\u5165\u5e76\u7ee7\u7eed\u6267\u884c\u3002</li> </ol> <p>0.4.0 \u65b0\u589e</p> Python <p><code>__interrupt__</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u952e\uff0c\u5f53\u56fe\u88ab\u4e2d\u65ad\u65f6\u8fd0\u884c\u56fe\u4f1a\u8fd4\u56de\u5b83\u3002\u5728 0.4.0 \u7248\u672c\u4e2d\u6dfb\u52a0\u4e86\u5bf9 <code>invoke</code> \u548c <code>ainvoke</code> \u4e2d <code>__interrupt__</code> \u7684\u652f\u6301\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u65e7\u7248\u672c\uff0c\u53ea\u6709\u5728\u4f7f\u7528 <code>stream</code> \u6216 <code>astream</code> \u65f6\u624d\u80fd\u5728\u7ed3\u679c\u4e2d\u770b\u5230 <code>__interrupt__</code>\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>graph.get_state(thread_id)</code> \u6765\u83b7\u53d6\u4e2d\u65ad\u503c\u3002</p> JavaScript <p><code>__interrupt__</code> \u662f\u4e00\u4e2a\u7279\u6b8a\u7684\u952e\uff0c\u5f53\u56fe\u88ab\u4e2d\u65ad\u65f6\u8fd0\u884c\u56fe\u4f1a\u8fd4\u56de\u5b83\u3002\u5728 0.4.0 \u7248\u672c\u4e2d\u6dfb\u52a0\u4e86\u5bf9 <code>invoke</code> \u4e2d <code>__interrupt__</code> \u7684\u652f\u6301\u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662f\u65e7\u7248\u672c\uff0c\u53ea\u6709\u5728\u4f7f\u7528 <code>stream</code> \u65f6\u624d\u80fd\u5728\u7ed3\u679c\u4e2d\u770b\u5230 <code>__interrupt__</code>\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>graph.getState(config)</code> \u6765\u83b7\u53d6\u4e2d\u65ad\u503c\u3002</p> <p>Warning</p> Python <p>\u4e2d\u65ad\u5728\u5f00\u53d1\u8005\u4f53\u9a8c\u65b9\u9762\u7c7b\u4f3c\u4e8e Python \u7684 <code>input()</code> \u51fd\u6570\uff0c\u4f46\u5b83\u4eec\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e2d\u65ad\u70b9\u6062\u590d\u6267\u884c\u3002\u76f8\u53cd\uff0c\u5b83\u4eec\u4f1a\u91cd\u65b0\u8fd0\u884c\u4f7f\u7528\u4e2d\u65ad\u7684\u6574\u4e2a\u8282\u70b9\u3002\u56e0\u6b64\uff0c\u4e2d\u65ad\u901a\u5e38\u6700\u597d\u653e\u5728\u8282\u70b9\u7684\u5f00\u5934\u6216\u4e13\u95e8\u7684\u8282\u70b9\u4e2d\u3002</p> JavaScript <p>\u4e2d\u65ad\u529f\u80fd\u5f3a\u5927\u4e14\u7b26\u5408\u4eba\u4f53\u5de5\u7a0b\u5b66\uff0c\u4f46\u91cd\u8981\u7684\u662f\u8981\u6ce8\u610f\u5b83\u4eec\u4e0d\u4f1a\u81ea\u52a8\u4ece\u4e2d\u65ad\u70b9\u6062\u590d\u6267\u884c\u3002\u76f8\u53cd\uff0c\u5b83\u4eec\u4f1a\u91cd\u65b0\u8fd0\u884c\u4f7f\u7528\u4e2d\u65ad\u7684\u6574\u4e2a\u8282\u70b9\u3002\u56e0\u6b64\uff0c\u4e2d\u65ad\u901a\u5e38\u6700\u597d\u653e\u5728\u8282\u70b9\u7684\u5f00\u5934\u6216\u4e13\u95e8\u7684\u8282\u70b9\u4e2d\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#command","title":"\u4f7f\u7528 <code>Command</code> \u539f\u8bed\u6062\u590d","text":"Python <p>Warning</p> <p>\u4ece <code>interrupt</code> \u6062\u590d\u4e0e Python \u7684 <code>input()</code> \u51fd\u6570\u4e0d\u540c\uff0c\u540e\u8005\u4ece\u8c03\u7528 <code>input()</code> \u51fd\u6570\u7684\u786e\u5207\u4f4d\u7f6e\u6062\u590d\u6267\u884c\u3002</p> <p>\u5f53\u5728\u56fe\u4e2d\u4f7f\u7528 <code>interrupt</code> \u51fd\u6570\u65f6\uff0c\u6267\u884c\u5728\u8be5\u70b9\u6682\u505c\u5e76\u7b49\u5f85\u7528\u6237\u8f93\u5165\u3002</p> Python <p>\u8981\u6062\u590d\u6267\u884c\uff0c\u4f7f\u7528 @[<code>Command</code>][] \u539f\u8bed\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>invoke</code> \u6216 <code>stream</code> \u65b9\u6cd5\u63d0\u4f9b\u3002\u56fe\u4ece\u6700\u521d\u8c03\u7528 <code>interrupt(...)</code> \u7684\u8282\u70b9\u5f00\u5934\u6062\u590d\u6267\u884c\u3002\u8fd9\u6b21\uff0c<code>interrupt</code> \u51fd\u6570\u5c06\u8fd4\u56de <code>Command(resume=value)</code> \u4e2d\u63d0\u4f9b\u7684\u503c\uff0c\u800c\u4e0d\u662f\u518d\u6b21\u6682\u505c\u3002\u4ece\u8282\u70b9\u5f00\u5934\u5230 <code>interrupt</code> \u7684\u6240\u6709\u4ee3\u7801\u90fd\u5c06\u91cd\u65b0\u6267\u884c\u3002</p> <pre><code># \u901a\u8fc7\u63d0\u4f9b\u7528\u6237\u8f93\u5165\u6765\u6062\u590d\u56fe\u6267\u884c\u3002\ngraph.invoke(Command(resume={\"age\": \"25\"}), thread_config)\n</code></pre> JavaScript <p>\u8981\u6062\u590d\u6267\u884c\uff0c\u4f7f\u7528 @[<code>Command</code>][] \u539f\u8bed\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>invoke</code> \u6216 <code>stream</code> \u65b9\u6cd5\u63d0\u4f9b\u3002\u56fe\u4ece\u6700\u521d\u8c03\u7528 <code>interrupt(...)</code> \u7684\u8282\u70b9\u5f00\u5934\u6062\u590d\u6267\u884c\u3002\u8fd9\u6b21\uff0c<code>interrupt</code> \u51fd\u6570\u5c06\u8fd4\u56de <code>Command(resume=value)</code> \u4e2d\u63d0\u4f9b\u7684\u503c\uff0c\u800c\u4e0d\u662f\u518d\u6b21\u6682\u505c\u3002\u4ece\u8282\u70b9\u5f00\u5934\u5230 <code>interrupt</code> \u7684\u6240\u6709\u4ee3\u7801\u90fd\u5c06\u91cd\u65b0\u6267\u884c\u3002</p> <pre><code>// \u901a\u8fc7\u63d0\u4f9b\u7528\u6237\u8f93\u5165\u6765\u6062\u590d\u56fe\u6267\u884c\u3002\nawait graph.invoke(new Command({ resume: { age: \"25\" } }), threadConfig);\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_2","title":"\u7528\u4e00\u6b21\u8c03\u7528\u6062\u590d\u591a\u4e2a\u4e2d\u65ad","text":"<p>\u5f53\u5e26\u6709\u4e2d\u65ad\u6761\u4ef6\u7684\u8282\u70b9\u5e76\u884c\u8fd0\u884c\u65f6\uff0c\u4efb\u52a1\u961f\u5217\u4e2d\u53ef\u80fd\u6709\u591a\u4e2a\u4e2d\u65ad\u3002 \u4f8b\u5982\uff0c\u4ee5\u4e0b\u56fe\u6709\u4e24\u4e2a\u5e76\u884c\u8fd0\u884c\u7684\u8282\u70b9\u9700\u8981\u4eba\u5de5\u8f93\u5165\uff1a</p> <p></p> Python <p>\u4e00\u65e6\u56fe\u88ab\u4e2d\u65ad\u5e76\u505c\u6ede\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>Command.resume</code> \u4e00\u6b21\u6062\u590d\u6240\u6709\u4e2d\u65ad\uff0c\u4f20\u9012\u4e2d\u65ad ID \u5230\u6062\u590d\u503c\u7684\u5b57\u5178\u6620\u5c04\u3002</p> <pre><code>from typing import TypedDict\nimport uuid\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.constants import START\nfrom langgraph.graph import StateGraph\nfrom langgraph.types import interrupt, Command\n\n\nclass State(TypedDict):\n    text_1: str\n    text_2: str\n\n\ndef human_node_1(state: State):\n    value = interrupt({\"text_to_revise\": state[\"text_1\"]})\n    return {\"text_1\": value}\n\n\ndef human_node_2(state: State):\n    value = interrupt({\"text_to_revise\": state[\"text_2\"]})\n    return {\"text_2\": value}\n\n\ngraph_builder = StateGraph(State)\ngraph_builder.add_node(\"human_node_1\", human_node_1)\ngraph_builder.add_node(\"human_node_2\", human_node_2)\n\n# \u4ece START \u5e76\u884c\u6dfb\u52a0\u4e24\u4e2a\u8282\u70b9\ngraph_builder.add_edge(START, \"human_node_1\")\ngraph_builder.add_edge(START, \"human_node_2\")\n\ncheckpointer = InMemorySaver()\ngraph = graph_builder.compile(checkpointer=checkpointer)\n\nthread_id = str(uuid.uuid4())\nconfig: RunnableConfig = {\"configurable\": {\"thread_id\": thread_id}}\nresult = graph.invoke(\n    {\"text_1\": \"original text 1\", \"text_2\": \"original text 2\"}, config=config\n)\n\n# \u4f7f\u7528\u4e2d\u65ad ID \u5230\u503c\u7684\u6620\u5c04\u6062\u590d\nresume_map = {\n    i.id: f\"edited text for {i.value['text_to_revise']}\"\n    for i in graph.get_state(config).interrupts\n}\nprint(graph.invoke(Command(resume=resume_map), config=config))\n# &gt; {'text_1': 'edited text for original text 1', 'text_2': 'edited text for original text 2'}\n</code></pre> JavaScript <pre><code>const state = await parentGraph.getState(threadConfig);\nconst resumeMap = Object.fromEntries(\n  state.interrupts.map((i) =&gt; [\n    i.interruptId,\n    `human input for prompt ${i.value}`,\n  ])\n);\n\nawait parentGraph.invoke(new Command({ resume: resumeMap }), threadConfig);\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_3","title":"\u5e38\u89c1\u6a21\u5f0f","text":"<p>\u4e0b\u9762\u6211\u4eec\u5c55\u793a\u53ef\u4ee5\u4f7f\u7528 <code>interrupt</code> \u548c <code>Command</code> \u5b9e\u73b0\u7684\u4e0d\u540c\u8bbe\u8ba1\u6a21\u5f0f\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_4","title":"\u6279\u51c6\u6216\u62d2\u7edd","text":"\u6839\u636e\u4eba\u7c7b\u7684\u6279\u51c6\u6216\u62d2\u7edd\uff0c\u56fe\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u64cd\u4f5c\u6216\u91c7\u53d6\u66ff\u4ee3\u8def\u5f84\u3002 <p>\u5728\u5173\u952e\u6b65\u9aa4\uff08\u5982 API \u8c03\u7528\uff09\u4e4b\u524d\u6682\u505c\u56fe\uff0c\u4ee5\u5ba1\u67e5\u548c\u6279\u51c6\u64cd\u4f5c\u3002\u5982\u679c\u64cd\u4f5c\u88ab\u62d2\u7edd\uff0c\u4f60\u53ef\u4ee5\u963b\u6b62\u56fe\u6267\u884c\u8be5\u6b65\u9aa4\uff0c\u5e76\u53ef\u80fd\u91c7\u53d6\u66ff\u4ee3\u64cd\u4f5c\u3002</p> Python <pre><code>from typing import Literal\nfrom langgraph.types import interrupt, Command\n\ndef human_approval(state: State) -&gt; Command[Literal[\"some_node\", \"another_node\"]]:\n    is_approved = interrupt(\n        {\n            \"question\": \"Is this correct?\",\n            # \u5448\u73b0\u5e94\u8be5\u7531\u4eba\u7c7b\u5ba1\u67e5\u548c\u6279\u51c6\u7684\u8f93\u51fa\u3002\n            \"llm_output\": state[\"llm_output\"]\n        }\n    )\n\n    if is_approved:\n        return Command(goto=\"some_node\")\n    else:\n        return Command(goto=\"another_node\")\n\n# \u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\n# \u5e76\u5c06\u5176\u8fde\u63a5\u5230\u76f8\u5173\u8282\u70b9\u3002\ngraph_builder.add_node(\"human_approval\", human_approval)\ngraph = graph_builder.compile(checkpointer=checkpointer)\n\n# \u8fd0\u884c\u56fe\u5e76\u547d\u4e2d\u4e2d\u65ad\u540e\uff0c\u56fe\u5c06\u6682\u505c\u3002\n# \u4f7f\u7528\u6279\u51c6\u6216\u62d2\u7edd\u6765\u6062\u590d\u5b83\u3002\nthread_config = {\"configurable\": {\"thread_id\": \"some_id\"}}\ngraph.invoke(Command(resume=True), config=thread_config)\n</code></pre> JavaScript <pre><code>import { interrupt, Command } from \"@langchain/langgraph\";\n\n// \u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\n// \u5e76\u5c06\u5176\u8fde\u63a5\u5230\u76f8\u5173\u8282\u70b9\u3002\ngraphBuilder.addNode(\"humanApproval\", (state) =&gt; {\n  const isApproved = interrupt({\n    question: \"Is this correct?\",\n    // \u5448\u73b0\u5e94\u8be5\u7531\u4eba\u7c7b\u5ba1\u67e5\u548c\u6279\u51c6\u7684\u8f93\u51fa\u3002\n    llmOutput: state.llmOutput,\n  });\n\n  if (isApproved) {\n    return new Command({ goto: \"someNode\" });\n  } else {\n    return new Command({ goto: \"anotherNode\" });\n  }\n});\nconst graph = graphBuilder.compile({ checkpointer });\n\n// \u8fd0\u884c\u56fe\u5e76\u547d\u4e2d\u4e2d\u65ad\u540e\uff0c\u56fe\u5c06\u6682\u505c\u3002\n// \u4f7f\u7528\u6279\u51c6\u6216\u62d2\u7edd\u6765\u6062\u590d\u5b83\u3002\nconst threadConfig = { configurable: { thread_id: \"some_id\" } };\nawait graph.invoke(new Command({ resume: true }), threadConfig);\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_5","title":"\u5ba1\u67e5\u548c\u7f16\u8f91\u72b6\u6001","text":"\u4eba\u7c7b\u53ef\u4ee5\u5ba1\u67e5\u548c\u7f16\u8f91\u56fe\u7684\u72b6\u6001\u3002\u8fd9\u5bf9\u4e8e\u7ea0\u6b63\u9519\u8bef\u6216\u4f7f\u7528\u989d\u5916\u4fe1\u606f\u66f4\u65b0\u72b6\u6001\u5f88\u6709\u7528\u3002  Python <pre><code>from langgraph.types import interrupt\n\ndef human_editing(state: State):\n    ...\n    result = interrupt(\n        # \u8981\u5448\u73b0\u7ed9\u5ba2\u6237\u7aef\u7684\u4e2d\u65ad\u4fe1\u606f\u3002\n        # \u53ef\u4ee5\u662f\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u3002\n        {\n            \"task\": \"Review the output from the LLM and make any necessary edits.\",\n            \"llm_generated_summary\": state[\"llm_generated_summary\"]\n        }\n    )\n\n    # \u4f7f\u7528\u7f16\u8f91\u540e\u7684\u6587\u672c\u66f4\u65b0\u72b6\u6001\n    return {\n        \"llm_generated_summary\": result[\"edited_text\"]\n    }\n\n# \u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\n# \u5e76\u5c06\u5176\u8fde\u63a5\u5230\u76f8\u5173\u8282\u70b9\u3002\ngraph_builder.add_node(\"human_editing\", human_editing)\ngraph = graph_builder.compile(checkpointer=checkpointer)\n\n...\n\n# \u8fd0\u884c\u56fe\u5e76\u547d\u4e2d\u4e2d\u65ad\u540e\uff0c\u56fe\u5c06\u6682\u505c\u3002\n# \u4f7f\u7528\u7f16\u8f91\u540e\u7684\u6587\u672c\u6062\u590d\u5b83\u3002\nthread_config = {\"configurable\": {\"thread_id\": \"some_id\"}}\ngraph.invoke(\n    Command(resume={\"edited_text\": \"The edited text\"}),\n    config=thread_config\n)\n</code></pre> JavaScript <pre><code>import { interrupt } from \"@langchain/langgraph\";\n\nfunction humanEditing(state: z.infer&lt;typeof StateAnnotation&gt;) {\n  const result = interrupt({\n    // \u8981\u5448\u73b0\u7ed9\u5ba2\u6237\u7aef\u7684\u4e2d\u65ad\u4fe1\u606f\u3002\n    // \u53ef\u4ee5\u662f\u4efb\u4f55 JSON \u53ef\u5e8f\u5217\u5316\u7684\u503c\u3002\n    task: \"Review the output from the LLM and make any necessary edits.\",\n    llmGeneratedSummary: state.llmGeneratedSummary,\n  });\n\n  // \u4f7f\u7528\u7f16\u8f91\u540e\u7684\u6587\u672c\u66f4\u65b0\u72b6\u6001\n  return {\n    llmGeneratedSummary: result.editedText,\n  };\n}\n\n// \u5728\u9002\u5f53\u7684\u4f4d\u7f6e\u5c06\u8282\u70b9\u6dfb\u52a0\u5230\u56fe\u4e2d\n// \u5e76\u5c06\u5176\u8fde\u63a5\u5230\u76f8\u5173\u8282\u70b9\u3002\ngraphBuilder.addNode(\"humanEditing\", humanEditing);\nconst graph = graphBuilder.compile({ checkpointer });\n\n// \u8fd0\u884c\u56fe\u5e76\u547d\u4e2d\u4e2d\u65ad\u540e\uff0c\u56fe\u5c06\u6682\u505c\u3002\n// \u4f7f\u7528\u7f16\u8f91\u540e\u7684\u6587\u672c\u6062\u590d\u5b83\u3002\nconst threadConfig = { configurable: { thread_id: \"some_id\" } };\nawait graph.invoke(\n  new Command({ resume: { editedText: \"The edited text\" } }),\n  threadConfig\n);\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_6","title":"\u5ba1\u67e5\u5de5\u5177\u8c03\u7528","text":"\u4eba\u7c7b\u53ef\u4ee5\u5728\u7ee7\u7eed\u4e4b\u524d\u5ba1\u67e5\u548c\u7f16\u8f91 LLM \u7684\u8f93\u51fa\u3002\u8fd9\u5728 LLM \u8bf7\u6c42\u7684\u5de5\u5177\u8c03\u7528\u53ef\u80fd\u654f\u611f\u6216\u9700\u8981\u4eba\u5de5\u76d1\u7763\u7684\u5e94\u7528\u4e2d\u7279\u522b\u91cd\u8981\u3002  <p>\u8981\u5411\u5de5\u5177\u6dfb\u52a0\u4eba\u5de5\u6279\u51c6\u6b65\u9aa4\uff1a</p> <ol> <li>\u5728\u5de5\u5177\u4e2d\u4f7f\u7528 <code>interrupt()</code> \u6682\u505c\u6267\u884c\u3002</li> <li>\u4f7f\u7528 <code>Command</code> \u6062\u590d\u4ee5\u6839\u636e\u4eba\u5de5\u8f93\u5165\u7ee7\u7eed\u3002</li> </ol> Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.types import interrupt\nfrom langgraph.prebuilt import create_react_agent\n\n# \u9700\u8981\u4eba\u5de5\u5ba1\u67e5/\u6279\u51c6\u7684\u654f\u611f\u5de5\u5177\u793a\u4f8b\ndef book_hotel(hotel_name: str):\n    \"\"\"\u9884\u8ba2\u9152\u5e97\"\"\"\n    # highlight-next-line\n    response = interrupt(  # (1)!\n        f\"Trying to call `book_hotel` with args {{'hotel_name': {hotel_name}}}. \"\n        \"Please approve or suggest edits.\"\n    )\n    if response[\"type\"] == \"accept\":\n        pass\n    elif response[\"type\"] == \"edit\":\n        hotel_name = response[\"args\"][\"hotel_name\"]\n    else:\n        raise ValueError(f\"Unknown response type: {response['type']}\")\n    return f\"Successfully booked a stay at {hotel_name}.\"\n\n# highlight-next-line\ncheckpointer = InMemorySaver() # (2)!\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    tools=[book_hotel],\n    # highlight-next-line\n    checkpointer=checkpointer, # (3)!\n)\n</code></pre> <ol> <li>@<code>interrupt</code> \u51fd\u6570 \u5728\u7279\u5b9a\u8282\u70b9\u6682\u505c\u667a\u80fd\u4ee3\u7406\u56fe\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5728\u5de5\u5177\u51fd\u6570\u5f00\u5934\u8c03\u7528 <code>interrupt()</code>\uff0c\u8fd9\u4f1a\u5728\u6267\u884c\u5de5\u5177\u7684\u8282\u70b9\u6682\u505c\u56fe\u3002<code>interrupt()</code> \u4e2d\u7684\u4fe1\u606f\uff08\u4f8b\u5982\u5de5\u5177\u8c03\u7528\uff09\u53ef\u4ee5\u5448\u73b0\u7ed9\u4eba\u7c7b\uff0c\u56fe\u53ef\u4ee5\u4f7f\u7528\u7528\u6237\u8f93\u5165\uff08\u5de5\u5177\u8c03\u7528\u6279\u51c6\u3001\u7f16\u8f91\u6216\u53cd\u9988\uff09\u6062\u590d\u3002</li> <li><code>InMemorySaver</code> \u7528\u4e8e\u5728\u5de5\u5177\u8c03\u7528\u5faa\u73af\u7684\u6bcf\u4e00\u6b65\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3002\u8fd9\u542f\u7528\u4e86 \u77ed\u671f\u8bb0\u5fc6 \u548c \u4eba\u673a\u534f\u540c \u529f\u80fd\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>InMemorySaver</code> \u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3002\u5728\u751f\u4ea7\u5e94\u7528\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u5c06\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002</li> <li>\u4f7f\u7528 <code>checkpointer</code> \u521d\u59cb\u5316\u667a\u80fd\u4ee3\u7406\u3002</li> </ol> JavaScript <pre><code>import { MemorySaver } from \"@langchain/langgraph\";\nimport { interrupt } from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// \u9700\u8981\u4eba\u5de5\u5ba1\u67e5/\u6279\u51c6\u7684\u654f\u611f\u5de5\u5177\u793a\u4f8b\nconst bookHotel = tool(\n  async ({ hotelName }) =&gt; {\n    // highlight-next-line\n    const response = interrupt(\n      // (1)!\n      `Trying to call \\`bookHotel\\` with args {\"hotelName\": \"${hotelName}\"}. ` +\n        \"Please approve or suggest edits.\"\n    );\n    if (response.type === \"accept\") {\n      // \u7ee7\u7eed\u4f7f\u7528\u539f\u59cb\u53c2\u6570\n    } else if (response.type === \"edit\") {\n      hotelName = response.args.hotelName;\n    } else {\n      throw new Error(`Unknown response type: ${response.type}`);\n    }\n    return `Successfully booked a stay at ${hotelName}.`;\n  },\n  {\n    name: \"bookHotel\",\n    description: \"Book a hotel\",\n    schema: z.object({\n      hotelName: z.string(),\n    }),\n  }\n);\n\n// highlight-next-line\nconst checkpointer = new MemorySaver(); // (2)!\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [bookHotel],\n  // highlight-next-line\n  checkpointSaver: checkpointer, // (3)!\n});\n</code></pre> <ol> <li>@<code>interrupt</code> \u51fd\u6570 \u5728\u7279\u5b9a\u8282\u70b9\u6682\u505c\u667a\u80fd\u4ee3\u7406\u56fe\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5728\u5de5\u5177\u51fd\u6570\u5f00\u5934\u8c03\u7528 <code>interrupt()</code>\uff0c\u8fd9\u4f1a\u5728\u6267\u884c\u5de5\u5177\u7684\u8282\u70b9\u6682\u505c\u56fe\u3002<code>interrupt()</code> \u4e2d\u7684\u4fe1\u606f\uff08\u4f8b\u5982\u5de5\u5177\u8c03\u7528\uff09\u53ef\u4ee5\u5448\u73b0\u7ed9\u4eba\u7c7b\uff0c\u56fe\u53ef\u4ee5\u4f7f\u7528\u7528\u6237\u8f93\u5165\uff08\u5de5\u5177\u8c03\u7528\u6279\u51c6\u3001\u7f16\u8f91\u6216\u53cd\u9988\uff09\u6062\u590d\u3002</li> <li><code>MemorySaver</code> \u7528\u4e8e\u5728\u5de5\u5177\u8c03\u7528\u5faa\u73af\u7684\u6bcf\u4e00\u6b65\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3002\u8fd9\u542f\u7528\u4e86 \u77ed\u671f\u8bb0\u5fc6 \u548c \u4eba\u673a\u534f\u540c \u529f\u80fd\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>MemorySaver</code> \u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u3002\u5728\u751f\u4ea7\u5e94\u7528\u4e2d\uff0c\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u5c06\u5b58\u50a8\u5728\u6570\u636e\u5e93\u4e2d\u3002</li> <li>\u4f7f\u7528 <code>checkpointSaver</code> \u521d\u59cb\u5316\u667a\u80fd\u4ee3\u7406\u3002</li> </ol> <p>\u4f7f\u7528 <code>stream()</code> \u65b9\u6cd5\u8fd0\u884c\u667a\u80fd\u4ee3\u7406\uff0c\u4f20\u9012 <code>config</code> \u5bf9\u8c61\u4ee5\u6307\u5b9a\u7ebf\u7a0b ID\u3002\u8fd9\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5728\u5c06\u6765\u7684\u8c03\u7528\u4e2d\u6062\u590d\u540c\u4e00\u5bf9\u8bdd\u3002</p> Python <pre><code>config = {\n   \"configurable\": {\n      # highlight-next-line\n      \"thread_id\": \"1\"\n   }\n}\n\nfor chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"book a stay at McKittrick hotel\"}]},\n    # highlight-next-line\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> JavaScript <pre><code>const config = {\n  configurable: {\n    // highlight-next-line\n    thread_id: \"1\",\n  },\n};\n\nconst stream = await agent.stream(\n  { messages: [{ role: \"user\", content: \"book a stay at McKittrick hotel\" }] },\n  // highlight-next-line\n  config\n);\n\nfor await (const chunk of stream) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre> <p>\u4f60\u5e94\u8be5\u770b\u5230\u667a\u80fd\u4ee3\u7406\u8fd0\u884c\u76f4\u5230\u5230\u8fbe <code>interrupt()</code> \u8c03\u7528\uff0c\u6b64\u65f6\u5b83\u6682\u505c\u5e76\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002</p> <p>\u4f7f\u7528 <code>Command</code> \u6062\u590d\u667a\u80fd\u4ee3\u7406\u4ee5\u6839\u636e\u4eba\u5de5\u8f93\u5165\u7ee7\u7eed\u3002</p> Python <pre><code>from langgraph.types import Command\n\nfor chunk in agent.stream(\n    # highlight-next-line\n    Command(resume={\"type\": \"accept\"}),  # (1)!\n    # Command(resume={\"type\": \"edit\", \"args\": {\"hotel_name\": \"McKittrick Hotel\"}}),\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <ol> <li>@<code>interrupt</code> \u51fd\u6570 \u4e0e @[<code>Command</code>][] \u5bf9\u8c61\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u4f7f\u7528\u4eba\u7c7b\u63d0\u4f9b\u7684\u503c\u6062\u590d\u56fe\u3002</li> </ol> JavaScript <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst resumeStream = await agent.stream(\n  // highlight-next-line\n  new Command({ resume: { type: \"accept\" } }), // (1)!\n  // new Command({ resume: { type: \"edit\", args: { hotelName: \"McKittrick Hotel\" } } }),\n  config\n);\n\nfor await (const chunk of resumeStream) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre> <ol> <li>@<code>interrupt</code> \u51fd\u6570 \u4e0e @[<code>Command</code>][] \u5bf9\u8c61\u4e00\u8d77\u4f7f\u7528\uff0c\u4ee5\u4f7f\u7528\u4eba\u7c7b\u63d0\u4f9b\u7684\u503c\u6062\u590d\u56fe\u3002</li> </ol>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_7","title":"\u5411\u4efb\u4f55\u5de5\u5177\u6dfb\u52a0\u4e2d\u65ad","text":"<p>\u4f60\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u5305\u88c5\u5668\u6765\u5411 \u4efb\u4f55 \u5de5\u5177\u6dfb\u52a0\u4e2d\u65ad\u3002\u4ee5\u4e0b\u793a\u4f8b\u63d0\u4f9b\u4e86\u4e0e Agent Inbox UI \u548c Agent Chat UI \u517c\u5bb9\u7684\u53c2\u8003\u5b9e\u73b0\u3002</p> Python \u5411\u4efb\u4f55\u5de5\u5177\u6dfb\u52a0\u4eba\u673a\u534f\u540c\u7684\u5305\u88c5\u5668<pre><code>from typing import Callable\nfrom langchain_core.tools import BaseTool, tool as create_tool\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.types import interrupt\nfrom langgraph.prebuilt.interrupt import HumanInterruptConfig, HumanInterrupt\n\ndef add_human_in_the_loop(\n    tool: Callable | BaseTool,\n    *,\n    interrupt_config: HumanInterruptConfig = None,\n) -&gt; BaseTool:\n    \"\"\"\u5305\u88c5\u5de5\u5177\u4ee5\u652f\u6301\u4eba\u673a\u534f\u540c\u5ba1\u67e5\u3002\"\"\"\n    if not isinstance(tool, BaseTool):\n        tool = create_tool(tool)\n\n    if interrupt_config is None:\n        interrupt_config = {\n            \"allow_accept\": True,\n            \"allow_edit\": True,\n            \"allow_respond\": True,\n        }\n\n    @create_tool(  # (1)!\n        tool.name,\n        description=tool.description,\n        args_schema=tool.args_schema\n    )\n    def call_tool_with_interrupt(config: RunnableConfig, **tool_input):\n        request: HumanInterrupt = {\n            \"action_request\": {\n                \"action\": tool.name,\n                \"args\": tool_input\n            },\n            \"config\": interrupt_config,\n            \"description\": \"Please review the tool call\"\n        }\n        # highlight-next-line\n        response = interrupt([request])[0]  # (2)!\n        # \u6279\u51c6\u5de5\u5177\u8c03\u7528\n        if response[\"type\"] == \"accept\":\n            tool_response = tool.invoke(tool_input, config)\n        # \u66f4\u65b0\u5de5\u5177\u8c03\u7528\u53c2\u6570\n        elif response[\"type\"] == \"edit\":\n            tool_input = response[\"args\"][\"args\"]\n            tool_response = tool.invoke(tool_input, config)\n        # \u7528\u7528\u6237\u53cd\u9988\u56de\u590d LLM\n        elif response[\"type\"] == \"response\":\n            user_feedback = response[\"args\"]\n            tool_response = user_feedback\n        else:\n            raise ValueError(f\"Unsupported interrupt response type: {response['type']}\")\n\n        return tool_response\n\n    return call_tool_with_interrupt\n</code></pre> <ol> <li>\u6b64\u5305\u88c5\u5668\u521b\u5efa\u4e00\u4e2a\u65b0\u5de5\u5177\uff0c\u5728\u6267\u884c\u88ab\u5305\u88c5\u7684\u5de5\u5177 \u4e4b\u524d \u8c03\u7528 <code>interrupt()</code>\u3002</li> <li><code>interrupt()</code> \u4f7f\u7528 Agent Inbox UI \u671f\u671b\u7684\u7279\u6b8a\u8f93\u5165\u548c\u8f93\u51fa\u683c\u5f0f\uff1a- @[<code>HumanInterrupt</code>][] \u5bf9\u8c61\u5217\u8868\u53d1\u9001\u7ed9 <code>AgentInbox</code> \u4ee5\u5411\u6700\u7ec8\u7528\u6237\u5448\u73b0\u4e2d\u65ad\u4fe1\u606f - \u6062\u590d\u503c\u7531 <code>AgentInbox</code> \u4f5c\u4e3a\u5217\u8868\u63d0\u4f9b\uff08\u5373 <code>Command(resume=[...])</code>\uff09</li> </ol> JavaScript \u5411\u4efb\u4f55\u5de5\u5177\u6dfb\u52a0\u4eba\u673a\u534f\u540c\u7684\u5305\u88c5\u5668<pre><code>import { StructuredTool, tool } from \"@langchain/core/tools\";\nimport { RunnableConfig } from \"@langchain/core/runnables\";\nimport { interrupt } from \"@langchain/langgraph\";\n\ninterface HumanInterruptConfig {\n  allowAccept?: boolean;\n  allowEdit?: boolean;\n  allowRespond?: boolean;\n}\n\ninterface HumanInterrupt {\n  actionRequest: {\n    action: string;\n    args: Record&lt;string, any&gt;;\n  };\n  config: HumanInterruptConfig;\n  description: string;\n}\n\nfunction addHumanInTheLoop(\n  originalTool: StructuredTool,\n  interruptConfig: HumanInterruptConfig = {\n    allowAccept: true,\n    allowEdit: true,\n    allowRespond: true,\n  }\n): StructuredTool {\n  // \u5305\u88c5\u539f\u59cb\u5de5\u5177\u4ee5\u652f\u6301\u4eba\u673a\u534f\u540c\u5ba1\u67e5\n  return tool(\n    // (1)!\n    async (toolInput: Record&lt;string, any&gt;, config?: RunnableConfig) =&gt; {\n      const request: HumanInterrupt = {\n        actionRequest: {\n          action: originalTool.name,\n          args: toolInput,\n        },\n        config: interruptConfig,\n        description: \"Please review the tool call\",\n      };\n\n      // highlight-next-line\n      const response = interrupt([request])[0]; // (2)!\n\n      // \u6279\u51c6\u5de5\u5177\u8c03\u7528\n      if (response.type === \"accept\") {\n        return await originalTool.invoke(toolInput, config);\n      }\n      // \u66f4\u65b0\u5de5\u5177\u8c03\u7528\u53c2\u6570\n      else if (response.type === \"edit\") {\n        const updatedArgs = response.args.args;\n        return await originalTool.invoke(updatedArgs, config);\n      }\n      // \u7528\u7528\u6237\u53cd\u9988\u56de\u590d LLM\n      else if (response.type === \"response\") {\n        return response.args;\n      } else {\n        throw new Error(\n          `Unsupported interrupt response type: ${response.type}`\n        );\n      }\n    },\n    {\n      name: originalTool.name,\n      description: originalTool.description,\n      schema: originalTool.schema,\n    }\n  );\n}\n</code></pre> <ol> <li>\u6b64\u5305\u88c5\u5668\u521b\u5efa\u4e00\u4e2a\u65b0\u5de5\u5177\uff0c\u5728\u6267\u884c\u88ab\u5305\u88c5\u7684\u5de5\u5177 \u4e4b\u524d \u8c03\u7528 <code>interrupt()</code>\u3002</li> <li><code>interrupt()</code> \u4f7f\u7528 Agent Inbox UI \u671f\u671b\u7684\u7279\u6b8a\u8f93\u5165\u548c\u8f93\u51fa\u683c\u5f0f\uff1a- [<code>HumanInterrupt</code>] \u5bf9\u8c61\u5217\u8868\u53d1\u9001\u7ed9 <code>AgentInbox</code> \u4ee5\u5411\u6700\u7ec8\u7528\u6237\u5448\u73b0\u4e2d\u65ad\u4fe1\u606f - \u6062\u590d\u503c\u7531 <code>AgentInbox</code> \u4f5c\u4e3a\u5217\u8868\u63d0\u4f9b\uff08\u5373 <code>Command({ resume: [...] })</code>\uff09</li> </ol> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u5305\u88c5\u5668\u5411\u4efb\u4f55\u5de5\u5177\u6dfb\u52a0 <code>interrupt()</code>\uff0c\u800c\u65e0\u9700\u5728\u5de5\u5177 \u5185\u90e8 \u6dfb\u52a0\u5b83\uff1a</p> Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.prebuilt import create_react_agent\n\n# highlight-next-line\ncheckpointer = InMemorySaver()\n\ndef book_hotel(hotel_name: str):\n   \"\"\"\u9884\u8ba2\u9152\u5e97\"\"\"\n   return f\"Successfully booked a stay at {hotel_name}.\"\n\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    tools=[\n        # highlight-next-line\n        add_human_in_the_loop(book_hotel), # (1)!\n    ],\n    # highlight-next-line\n    checkpointer=checkpointer,\n)\n\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nfor chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"book a stay at McKittrick hotel\"}]},\n    # highlight-next-line\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <ol> <li><code>add_human_in_the_loop</code> \u5305\u88c5\u5668\u7528\u4e8e\u5411\u5de5\u5177\u6dfb\u52a0 <code>interrupt()</code>\u3002\u8fd9\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u6682\u505c\u6267\u884c\u5e76\u5728\u7ee7\u7eed\u5de5\u5177\u8c03\u7528\u4e4b\u524d\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002</li> </ol> JavaScript <pre><code>import { MemorySaver } from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\n// highlight-next-line\nconst checkpointer = new MemorySaver();\n\nconst bookHotel = tool(\n  async ({ hotelName }) =&gt; {\n    return `Successfully booked a stay at ${hotelName}.`;\n  },\n  {\n    name: \"bookHotel\",\n    description: \"Book a hotel\",\n    schema: z.object({\n      hotelName: z.string(),\n    }),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [\n    // highlight-next-line\n    addHumanInTheLoop(bookHotel), // (1)!\n  ],\n  // highlight-next-line\n  checkpointSaver: checkpointer,\n});\n\nconst config = { configurable: { thread_id: \"1\" } };\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nconst stream = await agent.stream(\n  { messages: [{ role: \"user\", content: \"book a stay at McKittrick hotel\" }] },\n  // highlight-next-line\n  config\n);\n\nfor await (const chunk of stream) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre> <ol> <li><code>addHumanInTheLoop</code> \u5305\u88c5\u5668\u7528\u4e8e\u5411\u5de5\u5177\u6dfb\u52a0 <code>interrupt()</code>\u3002\u8fd9\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u6682\u505c\u6267\u884c\u5e76\u5728\u7ee7\u7eed\u5de5\u5177\u8c03\u7528\u4e4b\u524d\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002</li> </ol> <p>\u4f60\u5e94\u8be5\u770b\u5230\u667a\u80fd\u4ee3\u7406\u8fd0\u884c\u76f4\u5230\u5230\u8fbe <code>interrupt()</code> \u8c03\u7528\uff0c \u6b64\u65f6\u5b83\u6682\u505c\u5e76\u7b49\u5f85\u4eba\u5de5\u8f93\u5165\u3002</p> <p>\u4f7f\u7528 <code>Command</code> \u6062\u590d\u667a\u80fd\u4ee3\u7406\u4ee5\u6839\u636e\u4eba\u5de5\u8f93\u5165\u7ee7\u7eed\u3002</p> Python <pre><code>from langgraph.types import Command\n\nfor chunk in agent.stream(\n    # highlight-next-line\n    Command(resume=[{\"type\": \"accept\"}]),\n    # Command(resume=[{\"type\": \"edit\", \"args\": {\"args\": {\"hotel_name\": \"McKittrick Hotel\"}}}]),\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> JavaScript <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst resumeStream = await agent.stream(\n  // highlight-next-line\n  new Command({ resume: [{ type: \"accept\" }] }),\n  // new Command({ resume: [{ type: \"edit\", args: { args: { hotelName: \"McKittrick Hotel\" } } }] }),\n  config\n);\n\nfor await (const chunk of resumeStream) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_8","title":"\u9a8c\u8bc1\u4eba\u5de5\u8f93\u5165","text":"<p>\u5982\u679c\u4f60\u9700\u8981\u5728\u56fe\u672c\u8eab\uff08\u800c\u4e0d\u662f\u5ba2\u6237\u7aef\uff09\u5185\u9a8c\u8bc1\u4eba\u7c7b\u63d0\u4f9b\u7684\u8f93\u5165\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728\u5355\u4e2a\u8282\u70b9\u4e2d\u4f7f\u7528\u591a\u4e2a\u4e2d\u65ad\u8c03\u7528\u6765\u5b9e\u73b0\u3002</p> Python <pre><code>from langgraph.types import interrupt\n\ndef human_node(state: State):\n    \"\"\"\u5e26\u9a8c\u8bc1\u7684\u4eba\u5de5\u8282\u70b9\u3002\"\"\"\n    question = \"What is your age?\"\n\n    while True:\n        answer = interrupt(question)\n\n        # \u9a8c\u8bc1\u7b54\u6848\uff0c\u5982\u679c\u7b54\u6848\u65e0\u6548\u5219\u518d\u6b21\u8bf7\u6c42\u8f93\u5165\u3002\n        if not isinstance(answer, int) or answer &lt; 0:\n            question = f\"'{answer} is not a valid age. What is your age?\"\n            answer = None\n            continue\n        else:\n            # \u5982\u679c\u7b54\u6848\u6709\u6548\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u3002\n            break\n\n    print(f\"The human in the loop is {answer} years old.\")\n    return {\n        \"age\": answer\n    }\n</code></pre> JavaScript <pre><code>import { interrupt } from \"@langchain/langgraph\";\n\ngraphBuilder.addNode(\"humanNode\", (state) =&gt; {\n  // \u5e26\u9a8c\u8bc1\u7684\u4eba\u5de5\u8282\u70b9\u3002\n  let question = \"What is your age?\";\n\n  while (true) {\n    const answer = interrupt(question);\n\n    // \u9a8c\u8bc1\u7b54\u6848\uff0c\u5982\u679c\u7b54\u6848\u65e0\u6548\u5219\u518d\u6b21\u8bf7\u6c42\u8f93\u5165\u3002\n    if (typeof answer !== \"number\" || answer &lt; 0) {\n      question = `'${answer}' is not a valid age. What is your age?`;\n      continue;\n    } else {\n      // \u5982\u679c\u7b54\u6848\u6709\u6548\uff0c\u6211\u4eec\u53ef\u4ee5\u7ee7\u7eed\u3002\n      break;\n    }\n  }\n\n  console.log(`The human in the loop is ${answer} years old.`);\n  return {\n    age: answer,\n  };\n});\n</code></pre> Python","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_9","title":"\u4f7f\u7528\u4e2d\u65ad\u8c03\u8bd5","text":"<p>\u8981\u8c03\u8bd5\u548c\u6d4b\u8bd5\u56fe\uff0c\u4f7f\u7528 \u9759\u6001\u4e2d\u65ad\uff08\u4e5f\u79f0\u4e3a\u9759\u6001\u65ad\u70b9\uff09\u9010\u8282\u70b9\u6267\u884c\u56fe\u6216\u5728\u7279\u5b9a\u8282\u70b9\u6682\u505c\u56fe\u6267\u884c\u3002\u9759\u6001\u4e2d\u65ad\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u6216\u4e4b\u540e\u7684\u5b9a\u4e49\u70b9\u89e6\u53d1\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u7f16\u8bd1\u65f6\u6216\u8fd0\u884c\u65f6\u6307\u5b9a <code>interrupt_before</code> \u548c <code>interrupt_after</code> \u6765\u8bbe\u7f6e\u9759\u6001\u4e2d\u65ad\u3002</p> <p>Warning</p> <p>\u9759\u6001\u4e2d\u65ad \u4e0d \u63a8\u8350\u7528\u4e8e\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u3002\u8bf7\u6539\u7528 \u52a8\u6001\u4e2d\u65ad\u3002</p> \u7f16\u8bd1\u65f6\u8fd0\u884c\u65f6 <pre><code># highlight-next-line\ngraph = graph_builder.compile( # (1)!\n    # highlight-next-line\n    interrupt_before=[\"node_a\"], # (2)!\n    # highlight-next-line\n    interrupt_after=[\"node_b\", \"node_c\"], # (3)!\n    checkpointer=checkpointer, # (4)!\n)\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread\"\n    }\n}\n\n# \u8fd0\u884c\u56fe\u76f4\u5230\u65ad\u70b9\ngraph.invoke(inputs, config=thread_config) # (5)!\n\n# \u6062\u590d\u56fe\ngraph.invoke(None, config=thread_config) # (6)!\n</code></pre> <ol> <li>\u65ad\u70b9\u5728 <code>compile</code> \u65f6\u8bbe\u7f6e\u3002</li> <li><code>interrupt_before</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li><code>interrupt_after</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u540e\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li>\u9700\u8981\u68c0\u67e5\u70b9\u5668\u6765\u542f\u7528\u65ad\u70b9\u3002</li> <li>\u56fe\u8fd0\u884c\u76f4\u5230\u547d\u4e2d\u7b2c\u4e00\u4e2a\u65ad\u70b9\u3002</li> <li>\u901a\u8fc7\u4e3a\u8f93\u5165\u4f20\u5165 <code>None</code> \u6765\u6062\u590d\u56fe\u3002\u8fd9\u5c06\u8fd0\u884c\u56fe\u76f4\u5230\u547d\u4e2d\u4e0b\u4e00\u4e2a\u65ad\u70b9\u3002</li> </ol> <pre><code># highlight-next-line\ngraph.invoke( # (1)!\n    inputs,\n    # highlight-next-line\n    interrupt_before=[\"node_a\"], # (2)!\n    # highlight-next-line\n    interrupt_after=[\"node_b\", \"node_c\"] # (3)!\n    config={\n        \"configurable\": {\"thread_id\": \"some_thread\"}\n    },\n)\n\nconfig = {\n    \"configurable\": {\n        \"thread_id\": \"some_thread\"\n    }\n}\n\n# \u8fd0\u884c\u56fe\u76f4\u5230\u65ad\u70b9\ngraph.invoke(inputs, config=config) # (4)!\n\n# \u6062\u590d\u56fe\ngraph.invoke(None, config=config) # (5)!\n</code></pre> <ol> <li><code>graph.invoke</code> \u4f7f\u7528 <code>interrupt_before</code> \u548c <code>interrupt_after</code> \u53c2\u6570\u8c03\u7528\u3002\u8fd9\u662f\u8fd0\u884c\u65f6\u914d\u7f6e\uff0c\u53ef\u4ee5\u4e3a\u6bcf\u6b21\u8c03\u7528\u66f4\u6539\u3002</li> <li><code>interrupt_before</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u524d\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li><code>interrupt_after</code> \u6307\u5b9a\u5728\u8282\u70b9\u6267\u884c\u4e4b\u540e\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u3002</li> <li>\u56fe\u8fd0\u884c\u76f4\u5230\u547d\u4e2d\u7b2c\u4e00\u4e2a\u65ad\u70b9\u3002</li> <li>\u901a\u8fc7\u4e3a\u8f93\u5165\u4f20\u5165 <code>None</code> \u6765\u6062\u590d\u56fe\u3002\u8fd9\u5c06\u8fd0\u884c\u56fe\u76f4\u5230\u547d\u4e2d\u4e0b\u4e00\u4e2a\u65ad\u70b9\u3002</li> </ol> <p>Note</p> <p>\u4f60\u4e0d\u80fd\u5728\u8fd0\u884c\u65f6\u4e3a \u5b50\u56fe \u8bbe\u7f6e\u9759\u6001\u65ad\u70b9\u3002 \u5982\u679c\u4f60\u6709\u5b50\u56fe\uff0c\u5fc5\u987b\u5728\u7f16\u8bd1\u65f6\u8bbe\u7f6e\u65ad\u70b9\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#langgraph-studio","title":"\u5728 LangGraph Studio \u4e2d\u4f7f\u7528\u9759\u6001\u4e2d\u65ad","text":"<p>\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph Studio \u8c03\u8bd5\u4f60\u7684\u56fe\u3002\u4f60\u53ef\u4ee5\u5728 UI \u4e2d\u8bbe\u7f6e\u9759\u6001\u65ad\u70b9\uff0c\u7136\u540e\u8fd0\u884c\u56fe\u3002\u4f60\u8fd8\u53ef\u4ee5\u4f7f\u7528 UI \u5728\u6267\u884c\u7684\u4efb\u4f55\u65f6\u523b\u68c0\u67e5\u56fe\u72b6\u6001\u3002</p> <p></p> <p>LangGraph Studio \u5bf9\u4f7f\u7528 <code>langgraph dev</code> \u672c\u5730\u90e8\u7f72\u7684\u5e94\u7528 \u514d\u8d39\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_10","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>\u4f7f\u7528\u4eba\u673a\u534f\u540c\u65f6\uff0c\u6709\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\u9700\u8981\u7262\u8bb0\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_11","title":"\u4e0e\u6709\u526f\u4f5c\u7528\u7684\u4ee3\u7801\u4e00\u8d77\u4f7f\u7528","text":"<p>\u5c06\u6709\u526f\u4f5c\u7528\u7684\u4ee3\u7801\uff08\u5982 API \u8c03\u7528\uff09\u653e\u5728 <code>interrupt</code> \u4e4b\u540e\u6216\u5355\u72ec\u7684\u8282\u70b9\u4e2d\u4ee5\u907f\u514d\u91cd\u590d\uff0c\u56e0\u4e3a\u6bcf\u6b21\u6062\u590d\u8282\u70b9\u65f6\u90fd\u4f1a\u91cd\u65b0\u89e6\u53d1\u8fd9\u4e9b\u4ee3\u7801\u3002</p> \u4e2d\u65ad\u540e\u7684\u526f\u4f5c\u7528\u5355\u72ec\u8282\u70b9\u4e2d\u7684\u526f\u4f5c\u7528 Python <pre><code>from langgraph.types import interrupt\n\ndef human_node(state: State):\n    \"\"\"\u5e26\u9a8c\u8bc1\u7684\u4eba\u5de5\u8282\u70b9\u3002\"\"\"\n\n    answer = interrupt(question)\n\n    api_call(answer) # \u6ca1\u95ee\u9898\uff0c\u56e0\u4e3a\u5728\u4e2d\u65ad\u4e4b\u540e\n</code></pre> JavaScript <pre><code>import { interrupt } from \"@langchain/langgraph\";\n\nfunction humanNode(state: z.infer&lt;typeof StateAnnotation&gt;) {\n  // \u5e26\u9a8c\u8bc1\u7684\u4eba\u5de5\u8282\u70b9\u3002\n\n  const answer = interrupt(question);\n\n  apiCall(answer); // \u6ca1\u95ee\u9898\uff0c\u56e0\u4e3a\u5728\u4e2d\u65ad\u4e4b\u540e\n}\n</code></pre> Python <pre><code>from langgraph.types import interrupt\n\ndef human_node(state: State):\n    \"\"\"\u5e26\u9a8c\u8bc1\u7684\u4eba\u5de5\u8282\u70b9\u3002\"\"\"\n\n    answer = interrupt(question)\n\n    return {\n        \"answer\": answer\n    }\n\ndef api_call_node(state: State):\n    api_call(...) # \u6ca1\u95ee\u9898\uff0c\u56e0\u4e3a\u5728\u5355\u72ec\u7684\u8282\u70b9\u4e2d\n</code></pre> JavaScript <pre><code>import { interrupt } from \"@langchain/langgraph\";\n\nfunction humanNode(state: z.infer&lt;typeof StateAnnotation&gt;) {\n  // \u5e26\u9a8c\u8bc1\u7684\u4eba\u5de5\u8282\u70b9\u3002\n\n  const answer = interrupt(question);\n\n  return {\n    answer\n  };\n}\n\nfunction apiCallNode(state: z.infer&lt;typeof StateAnnotation&gt;) {\n  apiCall(state.answer); // \u6ca1\u95ee\u9898\uff0c\u56e0\u4e3a\u5728\u5355\u72ec\u7684\u8282\u70b9\u4e2d\n}\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_12","title":"\u4e0e\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u7684\u5b50\u56fe\u4e00\u8d77\u4f7f\u7528","text":"<p>\u5f53\u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u5b50\u56fe\u65f6\uff0c\u7236\u56fe\u5c06\u4ece\u89e6\u53d1 <code>interrupt</code> \u7684\u5b50\u56fe\u8c03\u7528\u6240\u5728\u8282\u70b9\u7684 \u5f00\u5934 \u6062\u590d\u6267\u884c\u3002\u540c\u6837\uff0c\u5b50\u56fe \u5c06\u4ece\u8c03\u7528 <code>interrupt()</code> \u51fd\u6570\u7684\u8282\u70b9\u7684 \u5f00\u5934 \u6062\u590d\u3002</p> Python <pre><code>def node_in_parent_graph(state: State):\n    some_code()  # &lt;-- \u5f53\u5b50\u56fe\u6062\u590d\u65f6\u8fd9\u5c06\u91cd\u65b0\u6267\u884c\u3002\n    # \u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u5b50\u56fe\u3002\n    # \u5b50\u56fe\u5305\u542b `interrupt` \u8c03\u7528\u3002\n    subgraph_result = subgraph.invoke(some_input)\n    ...\n</code></pre> JavaScript <pre><code>async function nodeInParentGraph(state: z.infer&lt;typeof StateAnnotation&gt;) {\n  someCode(); // &lt;-- \u5f53\u5b50\u56fe\u6062\u590d\u65f6\u8fd9\u5c06\u91cd\u65b0\u6267\u884c\u3002\n  // \u4f5c\u4e3a\u51fd\u6570\u8c03\u7528\u5b50\u56fe\u3002\n  // \u5b50\u56fe\u5305\u542b `interrupt` \u8c03\u7528\u3002\n  const subgraphResult = await subgraph.invoke(someInput);\n  // ...\n}\n</code></pre>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/add-human-in-the-loop/#_13","title":"\u5728\u5355\u4e2a\u8282\u70b9\u4e2d\u4f7f\u7528\u591a\u4e2a\u4e2d\u65ad","text":"<p>\u5728 \u5355\u4e2a \u8282\u70b9\u4e2d\u4f7f\u7528\u591a\u4e2a\u4e2d\u65ad\u5bf9\u4e8e\u50cf \u9a8c\u8bc1\u4eba\u5de5\u8f93\u5165 \u8fd9\u6837\u7684\u6a21\u5f0f\u5f88\u6709\u5e2e\u52a9\u3002\u4f46\u662f\uff0c\u5982\u679c\u5904\u7406\u4e0d\u5f53\uff0c\u5728\u540c\u4e00\u8282\u70b9\u4e2d\u4f7f\u7528\u591a\u4e2a\u4e2d\u65ad\u53ef\u80fd\u5bfc\u81f4\u610f\u5916\u884c\u4e3a\u3002</p> <p>\u5f53\u8282\u70b9\u5305\u542b\u591a\u4e2a\u4e2d\u65ad\u8c03\u7528\u65f6\uff0cLangGraph \u4f1a\u4fdd\u7559\u4e00\u4e2a\u7279\u5b9a\u4e8e\u6267\u884c\u8282\u70b9\u7684\u4efb\u52a1\u7684\u6062\u590d\u503c\u5217\u8868\u3002\u6bcf\u5f53\u6062\u590d\u6267\u884c\u65f6\uff0c\u5b83\u90fd\u4ece\u8282\u70b9\u5f00\u5934\u5f00\u59cb\u3002\u5bf9\u4e8e\u9047\u5230\u7684\u6bcf\u4e2a\u4e2d\u65ad\uff0cLangGraph \u68c0\u67e5\u4efb\u52a1\u7684\u6062\u590d\u5217\u8868\u4e2d\u662f\u5426\u5b58\u5728\u5339\u914d\u503c\u3002\u5339\u914d \u4e25\u683c\u57fa\u4e8e\u7d22\u5f15\uff0c\u56e0\u6b64\u8282\u70b9\u5185\u4e2d\u65ad\u8c03\u7528\u7684\u987a\u5e8f\u81f3\u5173\u91cd\u8981\u3002</p> <p>\u4e3a\u907f\u514d\u95ee\u9898\uff0c\u8bf7\u907f\u514d\u5728\u6267\u884c\u4e4b\u95f4\u52a8\u6001\u66f4\u6539\u8282\u70b9\u7684\u7ed3\u6784\u3002\u8fd9\u5305\u62ec\u6dfb\u52a0\u3001\u5220\u9664\u6216\u91cd\u65b0\u6392\u5e8f\u4e2d\u65ad\u8c03\u7528\uff0c\u56e0\u4e3a\u8fd9\u4e9b\u66f4\u6539\u53ef\u80fd\u5bfc\u81f4\u7d22\u5f15\u4e0d\u5339\u914d\u3002\u8fd9\u4e9b\u95ee\u9898\u901a\u5e38\u6765\u81ea\u975e\u5e38\u89c4\u6a21\u5f0f\uff0c\u4f8b\u5982\u901a\u8fc7 <code>Command(resume=..., update=SOME_STATE_MUTATION)</code> \u53d8\u66f4\u72b6\u6001\u6216\u4f9d\u8d56\u5168\u5c40\u53d8\u91cf\u52a8\u6001\u4fee\u6539\u8282\u70b9\u7684\u7ed3\u6784\u3002</p>","tags":["human-in-the-loop","hil","interrupt"],"boost":2},{"location":"how-tos/human_in_the_loop/time-travel/","title":"\u4f7f\u7528\u65f6\u95f4\u65c5\u884c","text":"<p>\u8981\u5728 LangGraph \u4e2d\u4f7f\u7528 \u65f6\u95f4\u65c5\u884c\uff1a</p> Python <ol> <li>\u4f7f\u7528 @[<code>invoke</code>][CompiledStateGraph.invoke] \u6216 @[<code>stream</code>][CompiledStateGraph.stream] \u65b9\u6cd5 \u8fd0\u884c\u56fe \u5e76\u4f20\u5165\u521d\u59cb\u8f93\u5165\u3002</li> <li>\u5728\u73b0\u6709\u7ebf\u7a0b\u4e2d\u8bc6\u522b\u68c0\u67e5\u70b9\uff1a\u4f7f\u7528 @[<code>get_state_history()</code>][get_state_history] \u65b9\u6cd5\u68c0\u7d22\u7279\u5b9a <code>thread_id</code> \u7684\u6267\u884c\u5386\u53f2\uff0c\u5e76\u5b9a\u4f4d\u6240\u9700\u7684 <code>checkpoint_id</code>\u3002    \u6216\u8005\uff0c\u5728\u4f60\u60f3\u8981\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u4e4b\u524d\u8bbe\u7f6e \u4e2d\u65ad\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u627e\u5230\u5728\u8be5\u4e2d\u65ad\u4e4b\u524d\u8bb0\u5f55\u7684\u6700\u8fd1\u68c0\u67e5\u70b9\u3002</li> <li>\u66f4\u65b0\u56fe\u72b6\u6001\uff08\u53ef\u9009\uff09\uff1a\u4f7f\u7528 @[<code>update_state</code>][] \u65b9\u6cd5\u5728\u68c0\u67e5\u70b9\u5904\u4fee\u6539\u56fe\u7684\u72b6\u6001\uff0c\u5e76\u4ece\u66ff\u4ee3\u72b6\u6001\u6062\u590d\u6267\u884c\u3002</li> <li>\u4ece\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c\uff1a\u4f7f\u7528 <code>invoke</code> \u6216 <code>stream</code> \u65b9\u6cd5\uff0c\u8f93\u5165\u4e3a <code>None</code>\uff0c\u914d\u7f6e\u4e2d\u5305\u542b\u9002\u5f53\u7684 <code>thread_id</code> \u548c <code>checkpoint_id</code>\u3002</li> </ol> JavaScript <ol> <li>\u4f7f\u7528 @[<code>invoke</code>][CompiledStateGraph.invoke] \u6216 @[<code>stream</code>][CompiledStateGraph.stream] \u65b9\u6cd5 \u8fd0\u884c\u56fe \u5e76\u4f20\u5165\u521d\u59cb\u8f93\u5165\u3002</li> <li>\u5728\u73b0\u6709\u7ebf\u7a0b\u4e2d\u8bc6\u522b\u68c0\u67e5\u70b9\uff1a\u4f7f\u7528 @[<code>getStateHistory()</code>][get_state_history] \u65b9\u6cd5\u68c0\u7d22\u7279\u5b9a <code>thread_id</code> \u7684\u6267\u884c\u5386\u53f2\uff0c\u5e76\u5b9a\u4f4d\u6240\u9700\u7684 <code>checkpoint_id</code>\u3002    \u6216\u8005\uff0c\u5728\u4f60\u60f3\u8981\u6682\u505c\u6267\u884c\u7684\u8282\u70b9\u4e4b\u524d\u8bbe\u7f6e \u65ad\u70b9\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u627e\u5230\u5728\u8be5\u65ad\u70b9\u4e4b\u524d\u8bb0\u5f55\u7684\u6700\u8fd1\u68c0\u67e5\u70b9\u3002</li> <li>\u66f4\u65b0\u56fe\u72b6\u6001\uff08\u53ef\u9009\uff09\uff1a\u4f7f\u7528 @[<code>updateState</code>][update_state] \u65b9\u6cd5\u5728\u68c0\u67e5\u70b9\u5904\u4fee\u6539\u56fe\u7684\u72b6\u6001\uff0c\u5e76\u4ece\u66ff\u4ee3\u72b6\u6001\u6062\u590d\u6267\u884c\u3002</li> <li>\u4ece\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c\uff1a\u4f7f\u7528 <code>invoke</code> \u6216 <code>stream</code> \u65b9\u6cd5\uff0c\u8f93\u5165\u4e3a <code>null</code>\uff0c\u914d\u7f6e\u4e2d\u5305\u542b\u9002\u5f53\u7684 <code>thread_id</code> \u548c <code>checkpoint_id</code>\u3002</li> </ol> <p>Tip</p> <p>\u6709\u5173\u65f6\u95f4\u65c5\u884c\u7684\u6982\u5ff5\u6982\u8ff0\uff0c\u8bf7\u53c2\u9605 \u65f6\u95f4\u65c5\u884c\u3002</p>"},{"location":"how-tos/human_in_the_loop/time-travel/#_2","title":"\u5728\u5de5\u4f5c\u6d41\u4e2d","text":"<p>\u672c\u793a\u4f8b\u6784\u5efa\u4e86\u4e00\u4e2a\u7b80\u5355\u7684 LangGraph \u5de5\u4f5c\u6d41\uff0c\u5b83\u751f\u6210\u4e00\u4e2a\u7b11\u8bdd\u4e3b\u9898\u5e76\u4f7f\u7528 LLM \u7f16\u5199\u7b11\u8bdd\u3002\u5b83\u6f14\u793a\u4e86\u5982\u4f55\u8fd0\u884c\u56fe\u3001\u68c0\u7d22\u8fc7\u53bb\u7684\u6267\u884c\u68c0\u67e5\u70b9\u3001\u53ef\u9009\u5730\u4fee\u6539\u72b6\u6001\uff0c\u4ee5\u53ca\u4ece\u9009\u5b9a\u7684\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c\u4ee5\u63a2\u7d22\u4e0d\u540c\u7684\u7ed3\u679c\u3002</p>"},{"location":"how-tos/human_in_the_loop/time-travel/#_3","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148\u6211\u4eec\u9700\u8981\u5b89\u88c5\u6240\u9700\u7684\u5305</p> Python <pre><code>%%capture --no-stderr\n%pip install --quiet -U langgraph langchain_anthropic\n</code></pre> JavaScript <pre><code>npm install @langchain/langgraph @langchain/anthropic\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u7f6e Anthropic\uff08\u6211\u4eec\u5c06\u4f7f\u7528\u7684 LLM\uff09\u7684 API \u5bc6\u94a5</p> Python <pre><code>import getpass\nimport os\n\n\ndef _set_env(var: str):\n    if not os.environ.get(var):\n        os.environ[var] = getpass.getpass(f\"{var}: \")\n\n\n_set_env(\"ANTHROPIC_API_KEY\")\n</code></pre> JavaScript <pre><code>process.env.ANTHROPIC_API_KEY = \"YOUR_API_KEY\";\n</code></pre> <p>\u4e3a LangGraph \u5f00\u53d1\u8bbe\u7f6e LangSmith</p> <p>         \u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u9ad8 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u8ba9\u4f60\u53ef\u4ee5\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528 \u2014 \u5728 \u8fd9\u91cc \u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u5982\u4f55\u5f00\u59cb\u7684\u4fe1\u606f\u3002     </p> Python <pre><code>import uuid\n\nfrom typing_extensions import TypedDict, NotRequired\nfrom langgraph.graph import StateGraph, START, END\nfrom langchain.chat_models import init_chat_model\nfrom langgraph.checkpoint.memory import InMemorySaver\n\n\nclass State(TypedDict):\n    topic: NotRequired[str]\n    joke: NotRequired[str]\n\n\nllm = init_chat_model(\n    \"anthropic:claude-3-7-sonnet-latest\",\n    temperature=0,\n)\n\n\ndef generate_topic(state: State):\n    \"\"\"LLM \u8c03\u7528\u4ee5\u751f\u6210\u7b11\u8bdd\u4e3b\u9898\"\"\"\n    msg = llm.invoke(\"Give me a funny topic for a joke\")\n    return {\"topic\": msg.content}\n\n\ndef write_joke(state: State):\n    \"\"\"LLM \u8c03\u7528\u4ee5\u6839\u636e\u4e3b\u9898\u7f16\u5199\u7b11\u8bdd\"\"\"\n    msg = llm.invoke(f\"Write a short joke about {state['topic']}\")\n    return {\"joke\": msg.content}\n\n\n# \u6784\u5efa\u5de5\u4f5c\u6d41\nworkflow = StateGraph(State)\n\n# \u6dfb\u52a0\u8282\u70b9\nworkflow.add_node(\"generate_topic\", generate_topic)\nworkflow.add_node(\"write_joke\", write_joke)\n\n# \u6dfb\u52a0\u8fb9\u4ee5\u8fde\u63a5\u8282\u70b9\nworkflow.add_edge(START, \"generate_topic\")\nworkflow.add_edge(\"generate_topic\", \"write_joke\")\nworkflow.add_edge(\"write_joke\", END)\n\n# \u7f16\u8bd1\ncheckpointer = InMemorySaver()\ngraph = workflow.compile(checkpointer=checkpointer)\ngraph\n</code></pre> JavaScript <pre><code>import { v4 as uuidv4 } from \"uuid\";\nimport { z } from \"zod\";\nimport { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { MemorySaver } from \"@langchain/langgraph\";\n\nconst State = z.object({\n  topic: z.string().optional(),\n  joke: z.string().optional(),\n});\n\nconst llm = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n  temperature: 0,\n});\n\n// \u6784\u5efa\u5de5\u4f5c\u6d41\nconst workflow = new StateGraph(State)\n  // \u6dfb\u52a0\u8282\u70b9\n  .addNode(\"generateTopic\", async (state) =&gt; {\n    // LLM \u8c03\u7528\u4ee5\u751f\u6210\u7b11\u8bdd\u4e3b\u9898\n    const msg = await llm.invoke(\"Give me a funny topic for a joke\");\n    return { topic: msg.content };\n  })\n  .addNode(\"writeJoke\", async (state) =&gt; {\n    // LLM \u8c03\u7528\u4ee5\u6839\u636e\u4e3b\u9898\u7f16\u5199\u7b11\u8bdd\n    const msg = await llm.invoke(`Write a short joke about ${state.topic}`);\n    return { joke: msg.content };\n  })\n  // \u6dfb\u52a0\u8fb9\u4ee5\u8fde\u63a5\u8282\u70b9\n  .addEdge(START, \"generateTopic\")\n  .addEdge(\"generateTopic\", \"writeJoke\")\n  .addEdge(\"writeJoke\", END);\n\n// \u7f16\u8bd1\nconst checkpointer = new MemorySaver();\nconst graph = workflow.compile({ checkpointer });\n</code></pre>"},{"location":"how-tos/human_in_the_loop/time-travel/#1","title":"1. \u8fd0\u884c\u56fe","text":"Python <pre><code>config = {\n    \"configurable\": {\n        \"thread_id\": uuid.uuid4(),\n    }\n}\nstate = graph.invoke({}, config)\n\nprint(state[\"topic\"])\nprint()\nprint(state[\"joke\"])\n</code></pre> JavaScript <pre><code>const config = {\n  configurable: {\n    thread_id: uuidv4(),\n  },\n};\n\nconst state = await graph.invoke({}, config);\n\nconsole.log(state.topic);\nconsole.log();\nconsole.log(state.joke);\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>How about \"The Secret Life of Socks in the Dryer\"? You know, exploring the mysterious phenomenon of how socks go into the laundry as pairs but come out as singles. Where do they go? Are they starting new lives elsewhere? Is there a sock paradise we don't know about? There's a lot of comedic potential in the everyday mystery that unites us all!\n\n# The Secret Life of Socks in the Dryer\n\nI finally discovered where all my missing socks go after the dryer. Turns out they're not missing at all\u2014they've just eloped with someone else's socks from the laundromat to start new lives together.\n\nMy blue argyle is now living in Bermuda with a red polka dot, posting vacation photos on Sockstagram and sending me lint as alimony.\n</code></pre>"},{"location":"how-tos/human_in_the_loop/time-travel/#2","title":"2. \u8bc6\u522b\u68c0\u67e5\u70b9","text":"Python <pre><code># \u72b6\u6001\u6309\u65f6\u95f4\u5012\u5e8f\u8fd4\u56de\u3002\nstates = list(graph.get_state_history(config))\n\nfor state in states:\n    print(state.next)\n    print(state.config[\"configurable\"][\"checkpoint_id\"])\n    print()\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>()\n1f02ac4a-ec9f-6524-8002-8f7b0bbeed0e\n\n('write_joke',)\n1f02ac4a-ce2a-6494-8001-cb2e2d651227\n\n('generate_topic',)\n1f02ac4a-a4e0-630d-8000-b73c254ba748\n\n('__start__',)\n1f02ac4a-a4dd-665e-bfff-e6c8c44315d9\n</code></pre> JavaScript <pre><code>// \u72b6\u6001\u6309\u65f6\u95f4\u5012\u5e8f\u8fd4\u56de\u3002\nconst states = [];\nfor await (const state of graph.getStateHistory(config)) {\n  states.push(state);\n}\n\nfor (const state of states) {\n  console.log(state.next);\n  console.log(state.config.configurable?.checkpoint_id);\n  console.log();\n}\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>[]\n1f02ac4a-ec9f-6524-8002-8f7b0bbeed0e\n\n['writeJoke']\n1f02ac4a-ce2a-6494-8001-cb2e2d651227\n\n['generateTopic']\n1f02ac4a-a4e0-630d-8000-b73c254ba748\n\n['__start__']\n1f02ac4a-a4dd-665e-bfff-e6c8c44315d9\n</code></pre> Python <pre><code># \u8fd9\u662f\u5012\u6570\u7b2c\u4e8c\u4e2a\u72b6\u6001\uff08\u72b6\u6001\u6309\u65f6\u95f4\u987a\u5e8f\u5217\u51fa\uff09\nselected_state = states[1]\nprint(selected_state.next)\nprint(selected_state.values)\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>('write_joke',)\n{'topic': 'How about \"The Secret Life of Socks in the Dryer\"? You know, exploring the mysterious phenomenon of how socks go into the laundry as pairs but come out as singles. Where do they go? Are they starting new lives elsewhere? Is there a sock paradise we don\\'t know about? There\\'s a lot of comedic potential in the everyday mystery that unites us all!'}\n</code></pre> JavaScript <pre><code>// \u8fd9\u662f\u5012\u6570\u7b2c\u4e8c\u4e2a\u72b6\u6001\uff08\u72b6\u6001\u6309\u65f6\u95f4\u987a\u5e8f\u5217\u51fa\uff09\nconst selectedState = states[1];\nconsole.log(selectedState.next);\nconsole.log(selectedState.values);\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>['writeJoke']\n{'topic': 'How about \"The Secret Life of Socks in the Dryer\"? You know, exploring the mysterious phenomenon of how socks go into the laundry as pairs but come out as singles. Where do they go? Are they starting new lives elsewhere? Is there a sock paradise we don\\'t know about? There\\'s a lot of comedic potential in the everyday mystery that unites us all!'}\n</code></pre>"},{"location":"how-tos/human_in_the_loop/time-travel/#3","title":"3. \u66f4\u65b0\u72b6\u6001\uff08\u53ef\u9009\uff09","text":"Python <p><code>update_state</code> \u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9\u3002\u65b0\u68c0\u67e5\u70b9\u5c06\u4e0e\u540c\u4e00\u4e2a\u7ebf\u7a0b\u5173\u8054\uff0c\u4f46\u6709\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9 ID\u3002</p> <pre><code>new_config = graph.update_state(selected_state.config, values={\"topic\": \"chickens\"})\nprint(new_config)\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>{'configurable': {'thread_id': 'c62e2e03-c27b-4cb6-8cea-ea9bfedae006', 'checkpoint_ns': '', 'checkpoint_id': '1f02ac4a-ecee-600b-8002-a1d21df32e4c'}}\n</code></pre> JavaScript <p><code>updateState</code> \u4f1a\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9\u3002\u65b0\u68c0\u67e5\u70b9\u5c06\u4e0e\u540c\u4e00\u4e2a\u7ebf\u7a0b\u5173\u8054\uff0c\u4f46\u6709\u4e00\u4e2a\u65b0\u7684\u68c0\u67e5\u70b9 ID\u3002</p> <pre><code>const newConfig = await graph.updateState(selectedState.config, {\n  topic: \"chickens\",\n});\nconsole.log(newConfig);\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>{'configurable': {'thread_id': 'c62e2e03-c27b-4cb6-8cea-ea9bfedae006', 'checkpoint_ns': '', 'checkpoint_id': '1f02ac4a-ecee-600b-8002-a1d21df32e4c'}}\n</code></pre>"},{"location":"how-tos/human_in_the_loop/time-travel/#4","title":"4. \u4ece\u68c0\u67e5\u70b9\u6062\u590d\u6267\u884c","text":"Python <pre><code>graph.invoke(None, new_config)\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>{'topic': 'chickens',\n 'joke': 'Why did the chicken join a band?\\n\\nBecause it had excellent drumsticks!'}\n</code></pre> JavaScript <pre><code>await graph.invoke(null, newConfig);\n</code></pre> <p>\u8f93\u51fa\uff1a</p> <pre><code>{\n  'topic': 'chickens',\n  'joke': 'Why did the chicken join a band?\\n\\nBecause it had excellent drumsticks!'\n}\n</code></pre>"},{"location":"how-tos/memory/add-memory/","title":"\u6dfb\u52a0\u548c\u7ba1\u7406\u8bb0\u5fc6","text":"<p>AI \u5e94\u7528\u9700\u8981 \u8bb0\u5fc6 \u6765\u5728\u591a\u6b21\u4ea4\u4e92\u4e2d\u5171\u4eab\u4e0a\u4e0b\u6587\u3002\u5728 LangGraph \u4e2d\uff0c\u4f60\u53ef\u4ee5\u6dfb\u52a0\u4e24\u79cd\u7c7b\u578b\u7684\u8bb0\u5fc6\uff1a</p> <ul> <li>\u6dfb\u52a0\u77ed\u671f\u8bb0\u5fc6 \u4f5c\u4e3a\u667a\u80fd\u4ee3\u7406 \u72b6\u6001 \u7684\u4e00\u90e8\u5206\uff0c\u4ee5\u542f\u7528\u591a\u8f6e\u5bf9\u8bdd\u3002</li> <li>\u6dfb\u52a0\u957f\u671f\u8bb0\u5fc6 \u6765\u5b58\u50a8\u8de8\u4f1a\u8bdd\u7684\u7528\u6237\u7279\u5b9a\u6216\u5e94\u7528\u7ea7\u6570\u636e\u3002</li> </ul>"},{"location":"how-tos/memory/add-memory/#_2","title":"\u6dfb\u52a0\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u77ed\u671f \u8bb0\u5fc6\uff08\u7ebf\u7a0b\u7ea7 \u6301\u4e45\u5316\uff09\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u8ddf\u8e2a\u591a\u8f6e\u5bf9\u8bdd\u3002\u8981\u6dfb\u52a0\u77ed\u671f\u8bb0\u5fc6\uff1a</p> Python <pre><code># highlight-next-line\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph\n\n# highlight-next-line\ncheckpointer = InMemorySaver()\n\nbuilder = StateGraph(...)\n# highlight-next-line\ngraph = builder.compile(checkpointer=checkpointer)\n\ngraph.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"hi! i am Bob\"}]},\n    # highlight-next-line\n    {\"configurable\": {\"thread_id\": \"1\"}},\n)\n</code></pre> JavaScript <pre><code>import { MemorySaver, StateGraph } from \"@langchain/langgraph\";\n\nconst checkpointer = new MemorySaver();\n\nconst builder = new StateGraph(...);\nconst graph = builder.compile({ checkpointer });\n\nawait graph.invoke(\n  { messages: [{ role: \"user\", content: \"hi! i am Bob\" }] },\n  { configurable: { thread_id: \"1\" } }\n);\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_3","title":"\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528","text":"<p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f7f\u7528\u6570\u636e\u5e93\u652f\u6301\u7684\u68c0\u67e5\u70b9\u5668\uff1a</p> Python <pre><code>from langgraph.checkpoint.postgres import PostgresSaver\n\nDB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\"\n# highlight-next-line\nwith PostgresSaver.from_conn_string(DB_URI) as checkpointer:\n    builder = StateGraph(...)\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n</code></pre> JavaScript <pre><code>import { PostgresSaver } from \"@langchain/langgraph-checkpoint-postgres\";\n\nconst DB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\";\nconst checkpointer = PostgresSaver.fromConnString(DB_URI);\n\nconst builder = new StateGraph(...);\nconst graph = builder.compile({ checkpointer });\n</code></pre> \u793a\u4f8b\uff1a\u4f7f\u7528 Postgres \u68c0\u67e5\u70b9\u5668 Python <pre><code>pip install -U \"psycopg[binary,pool]\" langgraph langgraph-checkpoint-postgres\n</code></pre> <p>Setup</p> <p>\u9996\u6b21\u4f7f\u7528 Postgres \u68c0\u67e5\u70b9\u5668\u65f6\uff0c\u9700\u8981\u8c03\u7528 <code>checkpointer.setup()</code></p> \u540c\u6b65\u5f02\u6b65JavaScript <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START\n# highlight-next-line\nfrom langgraph.checkpoint.postgres import PostgresSaver\n\nmodel = init_chat_model(model=\"anthropic:claude-3-5-haiku-latest\")\n\nDB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\"\n# highlight-next-line\nwith PostgresSaver.from_conn_string(DB_URI) as checkpointer:\n    # checkpointer.setup()\n\n    def call_model(state: MessagesState):\n        response = model.invoke(state[\"messages\"])\n        return {\"messages\": response}\n\n    builder = StateGraph(MessagesState)\n    builder.add_node(call_model)\n    builder.add_edge(START, \"call_model\")\n\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            # highlight-next-line\n            \"thread_id\": \"1\"\n        }\n    }\n\n    for chunk in graph.stream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"hi! I'm bob\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n\n    for chunk in graph.stream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's my name?\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START\n# highlight-next-line\nfrom langgraph.checkpoint.postgres.aio import AsyncPostgresSaver\n\nmodel = init_chat_model(model=\"anthropic:claude-3-5-haiku-latest\")\n\nDB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\"\n# highlight-next-line\nasync with AsyncPostgresSaver.from_conn_string(DB_URI) as checkpointer:\n    # await checkpointer.setup()\n\n    async def call_model(state: MessagesState):\n        response = await model.ainvoke(state[\"messages\"])\n        return {\"messages\": response}\n\n    builder = StateGraph(MessagesState)\n    builder.add_node(call_model)\n    builder.add_edge(START, \"call_model\")\n\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            # highlight-next-line\n            \"thread_id\": \"1\"\n        }\n    }\n\n    async for chunk in graph.astream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"hi! I'm bob\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n\n    async for chunk in graph.astream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's my name?\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>npm install @langchain/langgraph-checkpoint-postgres\n</code></pre> <p>Setup</p> <p>\u9996\u6b21\u4f7f\u7528 Postgres \u68c0\u67e5\u70b9\u5668\u65f6\uff0c\u9700\u8981\u8c03\u7528 <code>checkpointer.setup()</code></p> <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\nimport { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { PostgresSaver } from \"@langchain/langgraph-checkpoint-postgres\";\n\nconst model = new ChatAnthropic({ model: \"claude-3-5-haiku-20241022\" });\n\nconst DB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\";\nconst checkpointer = PostgresSaver.fromConnString(DB_URI);\n// await checkpointer.setup();\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"call_model\", async (state) =&gt; {\n    const response = await model.invoke(state.messages);\n    return { messages: [response] };\n  })\n  .addEdge(START, \"call_model\");\n\nconst graph = builder.compile({ checkpointer });\n\nconst config = {\n  configurable: {\n    thread_id: \"1\"\n  }\n};\n\nfor await (const chunk of await graph.stream(\n  { messages: [{ role: \"user\", content: \"hi! I'm bob\" }] },\n  { ...config, streamMode: \"values\" }\n)) {\n  console.log(chunk.messages.at(-1)?.content);\n}\n\nfor await (const chunk of await graph.stream(\n  { messages: [{ role: \"user\", content: \"what's my name?\" }] },\n  { ...config, streamMode: \"values\" }\n)) {\n  console.log(chunk.messages.at(-1)?.content);\n}\n</code></pre> Python \u793a\u4f8b\uff1a\u4f7f\u7528 MongoDB \u68c0\u67e5\u70b9\u5668 <pre><code>pip install -U pymongo langgraph langgraph-checkpoint-mongodb\n</code></pre> <p>\u8bbe\u7f6e</p> <p>\u8981\u4f7f\u7528 MongoDB \u68c0\u67e5\u70b9\u5668\uff0c\u4f60\u9700\u8981\u4e00\u4e2a MongoDB \u96c6\u7fa4\u3002\u5982\u679c\u8fd8\u6ca1\u6709\uff0c\u8bf7\u6309\u7167\u6b64\u6307\u5357\u521b\u5efa\u96c6\u7fa4\u3002</p> \u540c\u6b65\u5f02\u6b65 <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START\n# highlight-next-line\nfrom langgraph.checkpoint.mongodb import MongoDBSaver\n\nmodel = init_chat_model(model=\"anthropic:claude-3-5-haiku-latest\")\n\nDB_URI = \"localhost:27017\"\n# highlight-next-line\nwith MongoDBSaver.from_conn_string(DB_URI) as checkpointer:\n\n    def call_model(state: MessagesState):\n        response = model.invoke(state[\"messages\"])\n        return {\"messages\": response}\n\n    builder = StateGraph(MessagesState)\n    builder.add_node(call_model)\n    builder.add_edge(START, \"call_model\")\n\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            # highlight-next-line\n            \"thread_id\": \"1\"\n        }\n    }\n\n    for chunk in graph.stream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"hi! I'm bob\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n\n    for chunk in graph.stream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's my name?\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START\n# highlight-next-line\nfrom langgraph.checkpoint.mongodb.aio import AsyncMongoDBSaver\n\nmodel = init_chat_model(model=\"anthropic:claude-3-5-haiku-latest\")\n\nDB_URI = \"localhost:27017\"\n# highlight-next-line\nasync with AsyncMongoDBSaver.from_conn_string(DB_URI) as checkpointer:\n\n    async def call_model(state: MessagesState):\n        response = await model.ainvoke(state[\"messages\"])\n        return {\"messages\": response}\n\n    builder = StateGraph(MessagesState)\n    builder.add_node(call_model)\n    builder.add_edge(START, \"call_model\")\n\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            # highlight-next-line\n            \"thread_id\": \"1\"\n        }\n    }\n\n    async for chunk in graph.astream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"hi! I'm bob\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n\n    async for chunk in graph.astream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's my name?\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n</code></pre> \u793a\u4f8b\uff1a\u4f7f\u7528 Redis \u68c0\u67e5\u70b9\u5668 <pre><code>pip install -U langgraph langgraph-checkpoint-redis\n</code></pre> <p>Setup</p> <p>\u9996\u6b21\u4f7f\u7528 Redis \u68c0\u67e5\u70b9\u5668\u65f6\uff0c\u9700\u8981\u8c03\u7528 <code>checkpointer.setup()</code></p> \u540c\u6b65\u5f02\u6b65 <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START\n# highlight-next-line\nfrom langgraph.checkpoint.redis import RedisSaver\n\nmodel = init_chat_model(model=\"anthropic:claude-3-5-haiku-latest\")\n\nDB_URI = \"redis://localhost:6379\"\n# highlight-next-line\nwith RedisSaver.from_conn_string(DB_URI) as checkpointer:\n    # checkpointer.setup()\n\n    def call_model(state: MessagesState):\n        response = model.invoke(state[\"messages\"])\n        return {\"messages\": response}\n\n    builder = StateGraph(MessagesState)\n    builder.add_node(call_model)\n    builder.add_edge(START, \"call_model\")\n\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            # highlight-next-line\n            \"thread_id\": \"1\"\n        }\n    }\n\n    for chunk in graph.stream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"hi! I'm bob\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n\n    for chunk in graph.stream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's my name?\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>from langchain.chat_models import init_chat_model\nfrom langgraph.graph import StateGraph, MessagesState, START\n# highlight-next-line\nfrom langgraph.checkpoint.redis.aio import AsyncRedisSaver\n\nmodel = init_chat_model(model=\"anthropic:claude-3-5-haiku-latest\")\n\nDB_URI = \"redis://localhost:6379\"\n# highlight-next-line\nasync with AsyncRedisSaver.from_conn_string(DB_URI) as checkpointer:\n    # await checkpointer.asetup()\n\n    async def call_model(state: MessagesState):\n        response = await model.ainvoke(state[\"messages\"])\n        return {\"messages\": response}\n\n    builder = StateGraph(MessagesState)\n    builder.add_node(call_model)\n    builder.add_edge(START, \"call_model\")\n\n    # highlight-next-line\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            # highlight-next-line\n            \"thread_id\": \"1\"\n        }\n    }\n\n    async for chunk in graph.astream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"hi! I'm bob\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n\n    async for chunk in graph.astream(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"what's my name?\"}]},\n        # highlight-next-line\n        config,\n        stream_mode=\"values\"\n    ):\n        chunk[\"messages\"][-1].pretty_print()\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_4","title":"\u5728\u5b50\u56fe\u4e2d\u4f7f\u7528","text":"<p>\u5982\u679c\u4f60\u7684\u56fe\u5305\u542b \u5b50\u56fe\uff0c\u4f60\u53ea\u9700\u8981\u5728\u7f16\u8bd1\u7236\u56fe\u65f6\u63d0\u4f9b\u68c0\u67e5\u70b9\u5668\u3002LangGraph \u4f1a\u81ea\u52a8\u5c06\u68c0\u67e5\u70b9\u5668\u4f20\u64ad\u5230\u5b50\u56fe\u3002</p> Python <pre><code>from langgraph.graph import START, StateGraph\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom typing import TypedDict\n\nclass State(TypedDict):\n    foo: str\n\n# \u5b50\u56fe\n\ndef subgraph_node_1(state: State):\n    return {\"foo\": state[\"foo\"] + \"bar\"}\n\nsubgraph_builder = StateGraph(State)\nsubgraph_builder.add_node(subgraph_node_1)\nsubgraph_builder.add_edge(START, \"subgraph_node_1\")\n# highlight-next-line\nsubgraph = subgraph_builder.compile()\n\n# \u7236\u56fe\n\nbuilder = StateGraph(State)\n# highlight-next-line\nbuilder.add_node(\"node_1\", subgraph)\nbuilder.add_edge(START, \"node_1\")\n\ncheckpointer = InMemorySaver()\n# highlight-next-line\ngraph = builder.compile(checkpointer=checkpointer)\n</code></pre> JavaScript <pre><code>import { StateGraph, START, MemorySaver } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ foo: z.string() });\n\nconst subgraphBuilder = new StateGraph(State)\n  .addNode(\"subgraph_node_1\", (state) =&gt; {\n    return { foo: state.foo + \"bar\" };\n  })\n  .addEdge(START, \"subgraph_node_1\");\nconst subgraph = subgraphBuilder.compile();\n\nconst builder = new StateGraph(State)\n  .addNode(\"node_1\", subgraph)\n  .addEdge(START, \"node_1\");\n\nconst checkpointer = new MemorySaver();\nconst graph = builder.compile({ checkpointer });\n</code></pre> <p>\u5982\u679c\u4f60\u5e0c\u671b\u5b50\u56fe\u62e5\u6709\u81ea\u5df1\u7684\u8bb0\u5fc6\uff0c\u53ef\u4ee5\u4f7f\u7528\u9002\u5f53\u7684\u68c0\u67e5\u70b9\u5668\u9009\u9879\u7f16\u8bd1\u5b83\u3002\u8fd9\u5728 \u591a\u667a\u80fd\u4ee3\u7406 \u7cfb\u7edf\u4e2d\u5f88\u6709\u7528\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u667a\u80fd\u4ee3\u7406\u8ddf\u8e2a\u5b83\u4eec\u7684\u5185\u90e8\u6d88\u606f\u5386\u53f2\u3002</p> Python <pre><code>subgraph_builder = StateGraph(...)\n# highlight-next-line\nsubgraph = subgraph_builder.compile(checkpointer=True)\n</code></pre> JavaScript <pre><code>const subgraphBuilder = new StateGraph(...);\n// highlight-next-line\nconst subgraph = subgraphBuilder.compile({ checkpointer: true });\n</code></pre>"},{"location":"how-tos/memory/add-memory/#read-short-term","title":"\u5728\u5de5\u5177\u4e2d\u8bfb\u53d6\u77ed\u671f\u8bb0\u5fc6","text":"<p>LangGraph \u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u5728\u5de5\u5177\u5185\u90e8\u8bbf\u95ee\u5176\u77ed\u671f\u8bb0\u5fc6\uff08\u72b6\u6001\uff09\u3002</p> Python <pre><code>from typing import Annotated\nfrom langgraph.prebuilt import InjectedState, create_react_agent\n\nclass CustomState(AgentState):\n    # highlight-next-line\n    user_id: str\n\ndef get_user_info(\n    # highlight-next-line\n    state: Annotated[CustomState, InjectedState]\n) -&gt; str:\n    \"\"\"Look up user info.\"\"\"\n    # highlight-next-line\n    user_id = state[\"user_id\"]\n    return \"User is John Smith\" if user_id == \"user_123\" else \"Unknown user\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_user_info],\n    # highlight-next-line\n    state_schema=CustomState,\n)\n\nagent.invoke({\n    \"messages\": \"look up user information\",\n    # highlight-next-line\n    \"user_id\": \"user_123\"\n})\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport {\n  MessagesZodState,\n  LangGraphRunnableConfig,\n} from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst CustomState = z.object({\n  messages: MessagesZodState.shape.messages,\n  userId: z.string(),\n});\n\nconst getUserInfo = tool(\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    const userId = config.configurable?.userId;\n    return userId === \"user_123\" ? \"User is John Smith\" : \"Unknown user\";\n  },\n  {\n    name: \"get_user_info\",\n    description: \"Look up user info.\",\n    schema: z.object({}),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [getUserInfo],\n  stateSchema: CustomState,\n});\n\nawait agent.invoke({\n  messages: [{ role: \"user\", content: \"look up user information\" }],\n  userId: \"user_123\",\n});\n</code></pre> <p>\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u4e0a\u4e0b\u6587 \u6307\u5357\u3002</p>"},{"location":"how-tos/memory/add-memory/#write-short-term","title":"\u4ece\u5de5\u5177\u5199\u5165\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u8981\u5728\u6267\u884c\u671f\u95f4\u4fee\u6539\u667a\u80fd\u4ee3\u7406\u7684\u77ed\u671f\u8bb0\u5fc6\uff08\u72b6\u6001\uff09\uff0c\u4f60\u53ef\u4ee5\u76f4\u63a5\u4ece\u5de5\u5177\u8fd4\u56de\u72b6\u6001\u66f4\u65b0\u3002\u8fd9\u5bf9\u4e8e\u6301\u4e45\u5316\u4e2d\u95f4\u7ed3\u679c\u6216\u4f7f\u4fe1\u606f\u53ef\u4f9b\u540e\u7eed\u5de5\u5177\u6216\u63d0\u793a\u8bcd\u8bbf\u95ee\u975e\u5e38\u6709\u7528\u3002</p> Python <pre><code>from typing import Annotated\nfrom langchain_core.tools import InjectedToolCallId\nfrom langchain_core.runnables import RunnableConfig\nfrom langchain_core.messages import ToolMessage\nfrom langgraph.prebuilt import InjectedState, create_react_agent\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\nfrom langgraph.types import Command\n\nclass CustomState(AgentState):\n    # highlight-next-line\n    user_name: str\n\ndef update_user_info(\n    tool_call_id: Annotated[str, InjectedToolCallId],\n    config: RunnableConfig\n) -&gt; Command:\n    \"\"\"Look up and update user info.\"\"\"\n    user_id = config[\"configurable\"].get(\"user_id\")\n    name = \"John Smith\" if user_id == \"user_123\" else \"Unknown user\"\n    # highlight-next-line\n    return Command(update={\n        # highlight-next-line\n        \"user_name\": name,\n        # \u66f4\u65b0\u6d88\u606f\u5386\u53f2\n        \"messages\": [\n            ToolMessage(\n                \"Successfully looked up user information\",\n                tool_call_id=tool_call_id\n            )\n        ]\n    })\n\ndef greet(\n    # highlight-next-line\n    state: Annotated[CustomState, InjectedState]\n) -&gt; str:\n    \"\"\"Use this to greet the user once you found their info.\"\"\"\n    user_name = state[\"user_name\"]\n    return f\"Hello {user_name}!\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[update_user_info, greet],\n    # highlight-next-line\n    state_schema=CustomState\n)\n\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"greet the user\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}}\n)\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport {\n  MessagesZodState,\n  LangGraphRunnableConfig,\n  Command,\n} from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst CustomState = z.object({\n  messages: MessagesZodState.shape.messages,\n  userName: z.string().optional(),\n});\n\nconst updateUserInfo = tool(\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    const userId = config.configurable?.userId;\n    const name = userId === \"user_123\" ? \"John Smith\" : \"Unknown user\";\n    return new Command({\n      update: {\n        userName: name,\n        // \u66f4\u65b0\u6d88\u606f\u5386\u53f2\n        messages: [\n          {\n            role: \"tool\",\n            content: \"Successfully looked up user information\",\n            tool_call_id: config.toolCall?.id,\n          },\n        ],\n      },\n    });\n  },\n  {\n    name: \"update_user_info\",\n    description: \"Look up and update user info.\",\n    schema: z.object({}),\n  }\n);\n\nconst greet = tool(\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    const userName = config.configurable?.userName;\n    return `Hello ${userName}!`;\n  },\n  {\n    name: \"greet\",\n    description: \"Use this to greet the user once you found their info.\",\n    schema: z.object({}),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [updateUserInfo, greet],\n  stateSchema: CustomState,\n});\n\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"greet the user\" }] },\n  { configurable: { userId: \"user_123\" } }\n);\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_5","title":"\u6dfb\u52a0\u957f\u671f\u8bb0\u5fc6","text":"<p>\u4f7f\u7528\u957f\u671f\u8bb0\u5fc6\u6765\u5b58\u50a8\u8de8\u5bf9\u8bdd\u7684\u7528\u6237\u7279\u5b9a\u6216\u5e94\u7528\u7279\u5b9a\u6570\u636e\u3002</p> Python <pre><code># highlight-next-line\nfrom langgraph.store.memory import InMemoryStore\nfrom langgraph.graph import StateGraph\n\n# highlight-next-line\nstore = InMemoryStore()\n\nbuilder = StateGraph(...)\n# highlight-next-line\ngraph = builder.compile(store=store)\n</code></pre> JavaScript <pre><code>import { InMemoryStore, StateGraph } from \"@langchain/langgraph\";\n\nconst store = new InMemoryStore();\n\nconst builder = new StateGraph(...);\nconst graph = builder.compile({ store });\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_6","title":"\u5728\u751f\u4ea7\u73af\u5883\u4e2d\u4f7f\u7528","text":"<p>\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f7f\u7528\u6570\u636e\u5e93\u652f\u6301\u7684\u5b58\u50a8\uff1a</p> Python <pre><code>from langgraph.store.postgres import PostgresStore\n\nDB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\"\n# highlight-next-line\nwith PostgresStore.from_conn_string(DB_URI) as store:\n    builder = StateGraph(...)\n    # highlight-next-line\n    graph = builder.compile(store=store)\n</code></pre> JavaScript <pre><code>import { PostgresStore } from \"@langchain/langgraph-checkpoint-postgres\";\n\nconst DB_URI = \"postgresql://postgres:postgres@localhost:5442/postgres?sslmode=disable\";\nconst store = PostgresStore.fromConnString(DB_URI);\n\nconst builder = new StateGraph(...);\nconst graph = builder.compile({ store });\n</code></pre>"},{"location":"how-tos/memory/add-memory/#read-long-term","title":"\u5728\u5de5\u5177\u4e2d\u8bfb\u53d6\u957f\u671f\u8bb0\u5fc6","text":"Python \u667a\u80fd\u4ee3\u7406\u53ef\u7528\u4e8e\u67e5\u627e\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177<pre><code>from langchain_core.runnables import RunnableConfig\nfrom langgraph.config import get_store\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.store.memory import InMemoryStore\n\n# highlight-next-line\nstore = InMemoryStore() # (1)!\n\n# highlight-next-line\nstore.put(  # (2)!\n    (\"users\",),  # (3)!\n    \"user_123\",  # (4)!\n    {\n        \"name\": \"John Smith\",\n        \"language\": \"English\",\n    } # (5)!\n)\n\ndef get_user_info(config: RunnableConfig) -&gt; str:\n    \"\"\"Look up user info.\"\"\"\n    # \u4e0e\u63d0\u4f9b\u7ed9 `create_react_agent` \u7684\u76f8\u540c\n    # highlight-next-line\n    store = get_store() # (6)!\n    user_id = config[\"configurable\"].get(\"user_id\")\n    # highlight-next-line\n    user_info = store.get((\"users\",), user_id) # (7)!\n    return str(user_info.value) if user_info else \"Unknown user\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[get_user_info],\n    # highlight-next-line\n    store=store # (8)!\n)\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"look up user information\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}}\n)\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>put</code> \u65b9\u6cd5\u5411\u5b58\u50a8\u5199\u5165\u4e00\u4e9b\u793a\u4f8b\u6570\u636e\u3002\u8bf7\u53c2\u9605 @[BaseStore.put] API \u53c2\u8003\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</li> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\u3002\u7528\u4e8e\u5c06\u76f8\u5173\u6570\u636e\u5206\u7ec4\u5728\u4e00\u8d77\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>users</code> \u547d\u540d\u7a7a\u95f4\u6765\u5206\u7ec4\u7528\u6237\u6570\u636e\u3002</li> <li>\u547d\u540d\u7a7a\u95f4\u5185\u7684\u952e\u3002\u6b64\u793a\u4f8b\u4f7f\u7528\u7528\u6237 ID \u4f5c\u4e3a\u952e\u3002</li> <li>\u6211\u4eec\u8981\u4e3a\u7ed9\u5b9a\u7528\u6237\u5b58\u50a8\u7684\u6570\u636e\u3002</li> <li><code>get_store</code> \u51fd\u6570\u7528\u4e8e\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u53ef\u4ee5\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8c03\u7528\u5b83\uff0c\u5305\u62ec\u5de5\u5177\u548c\u63d0\u793a\u8bcd\u3002\u6b64\u51fd\u6570\u8fd4\u56de\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u4f20\u9012\u7684\u5b58\u50a8\u3002</li> <li><code>get</code> \u65b9\u6cd5\u7528\u4e8e\u4ece\u5b58\u50a8\u68c0\u7d22\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a <code>StoreValue</code> \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u503c\u548c\u5173\u4e8e\u503c\u7684\u5143\u6570\u636e\u3002</li> <li><code>store</code> \u88ab\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u5728\u8fd0\u884c\u5de5\u5177\u65f6\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>get_store</code> \u51fd\u6570\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8bbf\u95ee\u5b58\u50a8\u3002</li> </ol> JavaScript \u667a\u80fd\u4ee3\u7406\u53ef\u7528\u4e8e\u67e5\u627e\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177<pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { LangGraphRunnableConfig, InMemoryStore } from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst store = new InMemoryStore(); // (1)!\n\nawait store.put(\n  // (2)!\n  [\"users\"], // (3)!\n  \"user_123\", // (4)!\n  {\n    name: \"John Smith\",\n    language: \"English\",\n  } // (5)!\n);\n\nconst getUserInfo = tool(\n  async (_, config: LangGraphRunnableConfig) =&gt; {\n    /**Look up user info.*/\n    // \u4e0e\u63d0\u4f9b\u7ed9 `createReactAgent` \u7684\u76f8\u540c\n    const store = config.store; // (6)!\n    const userId = config.configurable?.userId;\n    const userInfo = await store?.get([\"users\"], userId); // (7)!\n    return userInfo?.value ? JSON.stringify(userInfo.value) : \"Unknown user\";\n  },\n  {\n    name: \"get_user_info\",\n    description: \"Look up user info.\",\n    schema: z.object({}),\n  }\n);\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [getUserInfo],\n  store, // (8)!\n});\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"look up user information\" }] },\n  { configurable: { userId: \"user_123\" } }\n);\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li>\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>put</code> \u65b9\u6cd5\u5411\u5b58\u50a8\u5199\u5165\u4e00\u4e9b\u793a\u4f8b\u6570\u636e\u3002\u8bf7\u53c2\u9605 @[BaseStore.put] API \u53c2\u8003\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</li> <li>\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\u3002\u7528\u4e8e\u5c06\u76f8\u5173\u6570\u636e\u5206\u7ec4\u5728\u4e00\u8d77\u3002\u5728\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528 <code>users</code> \u547d\u540d\u7a7a\u95f4\u6765\u5206\u7ec4\u7528\u6237\u6570\u636e\u3002</li> <li>\u547d\u540d\u7a7a\u95f4\u5185\u7684\u952e\u3002\u6b64\u793a\u4f8b\u4f7f\u7528\u7528\u6237 ID \u4f5c\u4e3a\u952e\u3002</li> <li>\u6211\u4eec\u8981\u4e3a\u7ed9\u5b9a\u7528\u6237\u5b58\u50a8\u7684\u6570\u636e\u3002</li> <li>\u5b58\u50a8\u53ef\u4ece\u4f20\u9012\u7ed9\u5de5\u5177\u7684 config \u5bf9\u8c61\u8bbf\u95ee\u3002\u4f60\u53ef\u4ee5\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8c03\u7528\u5b83\uff0c\u5305\u62ec\u5de5\u5177\u548c\u63d0\u793a\u8bcd\u3002\u6b64\u51fd\u6570\u8fd4\u56de\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u4f20\u9012\u7684\u5b58\u50a8\u3002</li> <li><code>get</code> \u65b9\u6cd5\u7528\u4e8e\u4ece\u5b58\u50a8\u68c0\u7d22\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u8fd4\u56de\u4e00\u4e2a <code>StoreValue</code> \u5bf9\u8c61\uff0c\u5176\u4e2d\u5305\u542b\u503c\u548c\u5173\u4e8e\u503c\u7684\u5143\u6570\u636e\u3002</li> <li><code>store</code> \u88ab\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u5728\u8fd0\u884c\u5de5\u5177\u65f6\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 config \u4e2d\u7684 store \u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8bbf\u95ee\u5b83\u3002</li> </ol>"},{"location":"how-tos/memory/add-memory/#write-long-term","title":"\u4ece\u5de5\u5177\u5199\u5165\u957f\u671f\u8bb0\u5fc6","text":"Python \u66f4\u65b0\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177\u793a\u4f8b<pre><code>from typing_extensions import TypedDict\n\nfrom langgraph.config import get_store\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.store.memory import InMemoryStore\n\nstore = InMemoryStore() # (1)!\n\nclass UserInfo(TypedDict): # (2)!\n    name: str\n\ndef save_user_info(user_info: UserInfo, config: RunnableConfig) -&gt; str: # (3)!\n    \"\"\"Save user info.\"\"\"\n    # \u4e0e\u63d0\u4f9b\u7ed9 `create_react_agent` \u7684\u76f8\u540c\n    # highlight-next-line\n    store = get_store() # (4)!\n    user_id = config[\"configurable\"].get(\"user_id\")\n    # highlight-next-line\n    store.put((\"users\",), user_id, user_info) # (5)!\n    return \"Successfully saved user info.\"\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-7-sonnet-latest\",\n    tools=[save_user_info],\n    # highlight-next-line\n    store=store\n)\n\n# \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nagent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"My name is John Smith\"}]},\n    # highlight-next-line\n    config={\"configurable\": {\"user_id\": \"user_123\"}} # (6)!\n)\n\n# \u4f60\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5b58\u50a8\u6765\u83b7\u53d6\u503c\nstore.get((\"users\",), \"user_123\").value\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li><code>UserInfo</code> \u7c7b\u662f\u4e00\u4e2a\u5b9a\u4e49\u7528\u6237\u4fe1\u606f\u7ed3\u6784\u7684 <code>TypedDict</code>\u3002LLM \u5c06\u4f7f\u7528\u5b83\u6839\u636e\u6a21\u5f0f\u683c\u5f0f\u5316\u54cd\u5e94\u3002</li> <li><code>save_user_info</code> \u51fd\u6570\u662f\u4e00\u4e2a\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u66f4\u65b0\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177\u3002\u8fd9\u5bf9\u4e8e\u7528\u6237\u60f3\u8981\u66f4\u65b0\u5176\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u7684\u804a\u5929\u5e94\u7528\u53ef\u80fd\u5f88\u6709\u7528\u3002</li> <li><code>get_store</code> \u51fd\u6570\u7528\u4e8e\u8bbf\u95ee\u5b58\u50a8\u3002\u4f60\u53ef\u4ee5\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8c03\u7528\u5b83\uff0c\u5305\u62ec\u5de5\u5177\u548c\u63d0\u793a\u8bcd\u3002\u6b64\u51fd\u6570\u8fd4\u56de\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u4f20\u9012\u7684\u5b58\u50a8\u3002</li> <li><code>put</code> \u65b9\u6cd5\u7528\u4e8e\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u3002</li> <li><code>user_id</code> \u5728 config \u4e2d\u4f20\u9012\u3002\u7528\u4e8e\u6807\u8bc6\u6b63\u5728\u66f4\u65b0\u4fe1\u606f\u7684\u7528\u6237\u3002</li> </ol> JavaScript \u66f4\u65b0\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177\u793a\u4f8b<pre><code>import { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\nimport { LangGraphRunnableConfig, InMemoryStore } from \"@langchain/langgraph\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\nconst store = new InMemoryStore(); // (1)!\n\nconst UserInfo = z.object({\n  // (2)!\n  name: z.string(),\n});\n\nconst saveUserInfo = tool(\n  async (\n    userInfo: z.infer&lt;typeof UserInfo&gt;,\n    config: LangGraphRunnableConfig\n  ) =&gt; {\n    // (3)!\n    /**Save user info.*/\n    // \u4e0e\u63d0\u4f9b\u7ed9 `createReactAgent` \u7684\u76f8\u540c\n    const store = config.store; // (4)!\n    const userId = config.configurable?.userId;\n    await store?.put([\"users\"], userId, userInfo); // (5)!\n    return \"Successfully saved user info.\";\n  },\n  {\n    name: \"save_user_info\",\n    description: \"Save user info.\",\n    schema: UserInfo,\n  }\n);\n\nconst agent = createReactAgent({\n  llm: model,\n  tools: [saveUserInfo],\n  store,\n});\n\n// \u8fd0\u884c\u667a\u80fd\u4ee3\u7406\nawait agent.invoke(\n  { messages: [{ role: \"user\", content: \"My name is John Smith\" }] },\n  { configurable: { userId: \"user_123\" } } // (6)!\n);\n\n// \u4f60\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95ee\u5b58\u50a8\u6765\u83b7\u53d6\u503c\nconst result = await store.get([\"users\"], \"user_123\");\nconsole.log(result?.value);\n</code></pre> <ol> <li><code>InMemoryStore</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u6570\u636e\u7684\u5b58\u50a8\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u5b58\u50a8\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u5b58\u50a8\u3002</li> <li><code>UserInfo</code> \u6a21\u5f0f\u5b9a\u4e49\u4e86\u7528\u6237\u4fe1\u606f\u7684\u7ed3\u6784\u3002LLM \u5c06\u4f7f\u7528\u5b83\u6839\u636e\u6a21\u5f0f\u683c\u5f0f\u5316\u54cd\u5e94\u3002</li> <li><code>saveUserInfo</code> \u51fd\u6570\u662f\u4e00\u4e2a\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u66f4\u65b0\u7528\u6237\u4fe1\u606f\u7684\u5de5\u5177\u3002\u8fd9\u5bf9\u4e8e\u7528\u6237\u60f3\u8981\u66f4\u65b0\u5176\u4e2a\u4eba\u8d44\u6599\u4fe1\u606f\u7684\u804a\u5929\u5e94\u7528\u53ef\u80fd\u5f88\u6709\u7528\u3002</li> <li>\u5b58\u50a8\u53ef\u4ece\u4f20\u9012\u7ed9\u5de5\u5177\u7684 config \u5bf9\u8c61\u8bbf\u95ee\u3002\u4f60\u53ef\u4ee5\u4ece\u4ee3\u7801\u7684\u4efb\u4f55\u4f4d\u7f6e\u8c03\u7528\u5b83\uff0c\u5305\u62ec\u5de5\u5177\u548c\u63d0\u793a\u8bcd\u3002\u6b64\u51fd\u6570\u8fd4\u56de\u521b\u5efa\u667a\u80fd\u4ee3\u7406\u65f6\u4f20\u9012\u7684\u5b58\u50a8\u3002</li> <li><code>put</code> \u65b9\u6cd5\u7528\u4e8e\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u6570\u636e\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u547d\u540d\u7a7a\u95f4\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u952e\u3002\u8fd9\u5c06\u5728\u5b58\u50a8\u4e2d\u5b58\u50a8\u7528\u6237\u4fe1\u606f\u3002</li> <li><code>userId</code> \u5728 config \u4e2d\u4f20\u9012\u3002\u7528\u4e8e\u6807\u8bc6\u6b63\u5728\u66f4\u65b0\u4fe1\u606f\u7684\u7528\u6237\u3002</li> </ol>"},{"location":"how-tos/memory/add-memory/#_7","title":"\u4f7f\u7528\u8bed\u4e49\u641c\u7d22","text":"<p>\u5728\u56fe\u7684\u8bb0\u5fc6\u5b58\u50a8\u4e2d\u542f\u7528\u8bed\u4e49\u641c\u7d22\uff0c\u8ba9\u56fe\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u901a\u8fc7\u8bed\u4e49\u76f8\u4f3c\u6027\u641c\u7d22\u5b58\u50a8\u4e2d\u7684\u9879\u76ee\u3002</p> Python <pre><code>from langchain.embeddings import init_embeddings\nfrom langgraph.store.memory import InMemoryStore\n\n# \u521b\u5efa\u542f\u7528\u8bed\u4e49\u641c\u7d22\u7684\u5b58\u50a8\nembeddings = init_embeddings(\"openai:text-embedding-3-small\")\nstore = InMemoryStore(\n    index={\n        \"embed\": embeddings,\n        \"dims\": 1536,\n    }\n)\n\nstore.put((\"user_123\", \"memories\"), \"1\", {\"text\": \"I love pizza\"})\nstore.put((\"user_123\", \"memories\"), \"2\", {\"text\": \"I am a plumber\"})\n\nitems = store.search(\n    (\"user_123\", \"memories\"), query=\"I'm hungry\", limit=1\n)\n</code></pre> JavaScript <pre><code>import { OpenAIEmbeddings } from \"@langchain/openai\";\nimport { InMemoryStore } from \"@langchain/langgraph\";\n\n// \u521b\u5efa\u542f\u7528\u8bed\u4e49\u641c\u7d22\u7684\u5b58\u50a8\nconst embeddings = new OpenAIEmbeddings({ model: \"text-embedding-3-small\" });\nconst store = new InMemoryStore({\n  index: {\n    embeddings,\n    dims: 1536,\n  },\n});\n\nawait store.put([\"user_123\", \"memories\"], \"1\", { text: \"I love pizza\" });\nawait store.put([\"user_123\", \"memories\"], \"2\", { text: \"I am a plumber\" });\n\nconst items = await store.search([\"user_123\", \"memories\"], {\n  query: \"I'm hungry\",\n  limit: 1,\n});\n</code></pre> <p>\u6709\u5173\u5982\u4f55\u5728 LangGraph \u8bb0\u5fc6\u5b58\u50a8\u4e2d\u4f7f\u7528\u8bed\u4e49\u641c\u7d22\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 \u6b64\u6307\u5357\u3002</p>"},{"location":"how-tos/memory/add-memory/#_8","title":"\u7ba1\u7406\u77ed\u671f\u8bb0\u5fc6","text":"<p>\u542f\u7528 \u77ed\u671f\u8bb0\u5fc6 \u540e\uff0c\u957f\u5bf9\u8bdd\u53ef\u80fd\u4f1a\u8d85\u51fa LLM \u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\u3002\u5e38\u89c1\u89e3\u51b3\u65b9\u6848\u5305\u62ec\uff1a</p> <ul> <li>\u88c1\u526a\u6d88\u606f\uff1a\u5220\u9664\u6700\u65e9\u6216\u6700\u65b0\u7684 N \u6761\u6d88\u606f\uff08\u5728\u8c03\u7528 LLM \u4e4b\u524d\uff09</li> <li>\u5220\u9664\u6d88\u606f\uff1a\u4ece LangGraph \u72b6\u6001\u6c38\u4e45\u5220\u9664</li> <li>\u6458\u8981\u6d88\u606f\uff1a\u6458\u8981\u5386\u53f2\u4e2d\u8f83\u65e9\u7684\u6d88\u606f\u5e76\u7528\u6458\u8981\u66ff\u6362\u5b83\u4eec</li> <li>\u7ba1\u7406\u68c0\u67e5\u70b9\uff1a\u5b58\u50a8\u548c\u68c0\u7d22\u6d88\u606f\u5386\u53f2</li> <li>\u81ea\u5b9a\u4e49\u7b56\u7565\uff08\u4f8b\u5982\uff0c\u6d88\u606f\u8fc7\u6ee4\u7b49\uff09</li> </ul> <p>\u8fd9\u5141\u8bb8\u667a\u80fd\u4ee3\u7406\u8ddf\u8e2a\u5bf9\u8bdd\uff0c\u540c\u65f6\u4e0d\u8d85\u51fa LLM \u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\u3002</p>"},{"location":"how-tos/memory/add-memory/#_9","title":"\u88c1\u526a\u6d88\u606f","text":"<p>\u5927\u591a\u6570 LLM \u90fd\u6709\u6700\u5927\u652f\u6301\u7684\u4e0a\u4e0b\u6587\u7a97\u53e3\uff08\u4ee5 token \u8ba1\uff09\u3002\u51b3\u5b9a\u4f55\u65f6\u622a\u65ad\u6d88\u606f\u7684\u4e00\u79cd\u65b9\u6cd5\u662f\u8ba1\u7b97\u6d88\u606f\u5386\u53f2\u4e2d\u7684 token \u6570\u91cf\uff0c\u5e76\u5728\u63a5\u8fd1\u9650\u5236\u65f6\u622a\u65ad\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangChain\uff0c\u53ef\u4ee5\u4f7f\u7528 trim messages \u5b9e\u7528\u7a0b\u5e8f\u5e76\u6307\u5b9a\u8981\u4ece\u5217\u8868\u4e2d\u4fdd\u7559\u7684 token \u6570\u91cf\uff0c\u4ee5\u53ca\u7528\u4e8e\u5904\u7406\u8fb9\u754c\u7684 <code>strategy</code>\uff08\u4f8b\u5982\uff0c\u4fdd\u7559\u6700\u540e <code>maxTokens</code>\uff09\u3002</p> \u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u5728\u5de5\u4f5c\u6d41\u4e2d Python <p>\u8981\u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u88c1\u526a\u6d88\u606f\u5386\u53f2\uff0c\u4f7f\u7528 @[<code>pre_model_hook</code>][create_react_agent] \u914d\u5408 <code>trim_messages</code> \u51fd\u6570\uff1a</p> <pre><code># highlight-next-line\nfrom langchain_core.messages.utils import (\n    # highlight-next-line\n    trim_messages,\n    # highlight-next-line\n    count_tokens_approximately\n# highlight-next-line\n)\nfrom langgraph.prebuilt import create_react_agent\n\n# \u6b64\u51fd\u6570\u5c06\u5728\u6bcf\u6b21\u8c03\u7528 LLM \u7684\u8282\u70b9\u4e4b\u524d\u8c03\u7528\ndef pre_model_hook(state):\n    trimmed_messages = trim_messages(\n        state[\"messages\"],\n        strategy=\"last\",\n        token_counter=count_tokens_approximately,\n        max_tokens=384,\n        start_on=\"human\",\n        end_on=(\"human\", \"tool\"),\n    )\n    # highlight-next-line\n    return {\"llm_input_messages\": trimmed_messages}\n\ncheckpointer = InMemorySaver()\nagent = create_react_agent(\n    model,\n    tools,\n    # highlight-next-line\n    pre_model_hook=pre_model_hook,\n    checkpointer=checkpointer,\n)\n</code></pre> JavaScript <p>\u8981\u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u88c1\u526a\u6d88\u606f\u5386\u53f2\uff0c\u4f7f\u7528 <code>stateModifier</code> \u914d\u5408 <code>trimMessages</code> \u51fd\u6570\uff1a</p> <pre><code>import { trimMessages } from \"@langchain/core/messages\";\nimport { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\n// \u6b64\u51fd\u6570\u5c06\u5728\u6bcf\u6b21\u8c03\u7528 LLM \u7684\u8282\u70b9\u4e4b\u524d\u8c03\u7528\nconst stateModifier = async (state) =&gt; {\n  return trimMessages(state.messages, {\n    strategy: \"last\",\n    maxTokens: 384,\n    startOn: \"human\",\n    endOn: [\"human\", \"tool\"],\n  });\n};\n\nconst checkpointer = new MemorySaver();\nconst agent = createReactAgent({\n  llm: model,\n  tools,\n  stateModifier,\n  checkpointer,\n});\n</code></pre> Python <p>\u8981\u88c1\u526a\u6d88\u606f\u5386\u53f2\uff0c\u4f7f\u7528 <code>trim_messages</code> \u51fd\u6570\uff1a</p> <pre><code># highlight-next-line\nfrom langchain_core.messages.utils import (\n    # highlight-next-line\n    trim_messages,\n    # highlight-next-line\n    count_tokens_approximately\n# highlight-next-line\n)\n\ndef call_model(state: MessagesState):\n    # highlight-next-line\n    messages = trim_messages(\n        state[\"messages\"],\n        strategy=\"last\",\n        token_counter=count_tokens_approximately,\n        max_tokens=128,\n        start_on=\"human\",\n        end_on=(\"human\", \"tool\"),\n    )\n    response = model.invoke(messages)\n    return {\"messages\": [response]}\n\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(call_model)\n...\n</code></pre> JavaScript <p>\u8981\u88c1\u526a\u6d88\u606f\u5386\u53f2\uff0c\u4f7f\u7528 <code>trimMessages</code> \u51fd\u6570\uff1a</p> <pre><code>import { trimMessages } from \"@langchain/core/messages\";\n\nconst callModel = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const messages = trimMessages(state.messages, {\n    strategy: \"last\",\n    maxTokens: 128,\n    startOn: \"human\",\n    endOn: [\"human\", \"tool\"],\n  });\n  const response = await model.invoke(messages);\n  return { messages: [response] };\n};\n\nconst builder = new StateGraph(MessagesZodState)\n  .addNode(\"call_model\", callModel);\n// ...\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_10","title":"\u5220\u9664\u6d88\u606f","text":"<p>\u4f60\u53ef\u4ee5\u4ece\u56fe\u72b6\u6001\u4e2d\u5220\u9664\u6d88\u606f\u6765\u7ba1\u7406\u6d88\u606f\u5386\u53f2\u3002\u5f53\u4f60\u60f3\u5220\u9664\u7279\u5b9a\u6d88\u606f\u6216\u6e05\u9664\u6574\u4e2a\u6d88\u606f\u5386\u53f2\u65f6\uff0c\u8fd9\u5f88\u6709\u7528\u3002</p> Python <p>\u8981\u4ece\u56fe\u72b6\u6001\u4e2d\u5220\u9664\u6d88\u606f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>RemoveMessage</code>\u3002\u8981\u4f7f <code>RemoveMessage</code> \u5de5\u4f5c\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u5e26\u6709 @[<code>add_messages</code>][] \u5f52\u7ea6\u5668 \u7684\u72b6\u6001\u952e\uff0c\u5982 <code>MessagesState</code>\u3002</p> <p>\u8981\u5220\u9664\u7279\u5b9a\u6d88\u606f\uff1a</p> <pre><code># highlight-next-line\nfrom langchain_core.messages import RemoveMessage\n\ndef delete_messages(state):\n    messages = state[\"messages\"]\n    if len(messages) &gt; 2:\n        # \u5220\u9664\u6700\u65e9\u7684\u4e24\u6761\u6d88\u606f\n        # highlight-next-line\n        return {\"messages\": [RemoveMessage(id=m.id) for m in messages[:2]]}\n</code></pre> <p>\u8981\u5220\u9664 \u6240\u6709 \u6d88\u606f\uff1a</p> <pre><code># highlight-next-line\nfrom langgraph.graph.message import REMOVE_ALL_MESSAGES\n\ndef delete_messages(state):\n    # highlight-next-line\n    return {\"messages\": [RemoveMessage(id=REMOVE_ALL_MESSAGES)]}\n</code></pre> JavaScript <p>\u8981\u4ece\u56fe\u72b6\u6001\u4e2d\u5220\u9664\u6d88\u606f\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>RemoveMessage</code>\u3002\u8981\u4f7f <code>RemoveMessage</code> \u5de5\u4f5c\uff0c\u4f60\u9700\u8981\u4f7f\u7528\u5e26\u6709 @[<code>messagesStateReducer</code>][] \u5f52\u7ea6\u5668 \u7684\u72b6\u6001\u952e\uff0c\u5982 <code>MessagesZodState</code>\u3002</p> <p>\u8981\u5220\u9664\u7279\u5b9a\u6d88\u606f\uff1a</p> <pre><code>import { RemoveMessage } from \"@langchain/core/messages\";\n\nconst deleteMessages = (state) =&gt; {\n  const messages = state.messages;\n  if (messages.length &gt; 2) {\n    // \u5220\u9664\u6700\u65e9\u7684\u4e24\u6761\u6d88\u606f\n    return {\n      messages: messages\n        .slice(0, 2)\n        .map((m) =&gt; new RemoveMessage({ id: m.id })),\n    };\n  }\n};\n</code></pre> <p>Warning</p> <p>\u5220\u9664\u6d88\u606f\u65f6\uff0c\u786e\u4fdd \u751f\u6210\u7684\u6d88\u606f\u5386\u53f2\u662f\u6709\u6548\u7684\u3002\u68c0\u67e5\u4f60\u4f7f\u7528\u7684 LLM \u63d0\u4f9b\u5546\u7684\u9650\u5236\u3002\u4f8b\u5982\uff1a</p> <ul> <li>\u4e00\u4e9b\u63d0\u4f9b\u5546\u8981\u6c42\u6d88\u606f\u5386\u53f2\u4ee5 <code>user</code> \u6d88\u606f\u5f00\u59cb</li> <li>\u5927\u591a\u6570\u63d0\u4f9b\u5546\u8981\u6c42\u5e26\u6709\u5de5\u5177\u8c03\u7528\u7684 <code>assistant</code> \u6d88\u606f\u540e\u9762\u8ddf\u7740\u76f8\u5e94\u7684 <code>tool</code> \u7ed3\u679c\u6d88\u606f\u3002</li> </ul>"},{"location":"how-tos/memory/add-memory/#_11","title":"\u6458\u8981\u6d88\u606f","text":"<p>\u5982\u4e0a\u6240\u793a\uff0c\u88c1\u526a\u6216\u5220\u9664\u6d88\u606f\u7684\u95ee\u9898\u662f\u4f60\u53ef\u80fd\u4f1a\u56e0\u4e3a\u5254\u9664\u6d88\u606f\u961f\u5217\u800c\u4e22\u5931\u4fe1\u606f\u3002\u56e0\u6b64\uff0c\u4e00\u4e9b\u5e94\u7528\u53d7\u76ca\u4e8e\u4f7f\u7528\u804a\u5929\u6a21\u578b\u6458\u8981\u6d88\u606f\u5386\u53f2\u7684\u66f4\u590d\u6742\u65b9\u6cd5\u3002</p> <p></p> \u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u5728\u5de5\u4f5c\u6d41\u4e2d Python <p>\u8981\u5728\u667a\u80fd\u4ee3\u7406\u4e2d\u6458\u8981\u6d88\u606f\u5386\u53f2\uff0c\u4f7f\u7528 @[<code>pre_model_hook</code>][create_react_agent] \u914d\u5408\u9884\u6784\u5efa\u7684 <code>SummarizationNode</code> \u62bd\u8c61\uff1a</p> <pre><code>from langchain_anthropic import ChatAnthropic\nfrom langmem.short_term import SummarizationNode, RunningSummary\nfrom langchain_core.messages.utils import count_tokens_approximately\nfrom langgraph.prebuilt import create_react_agent\nfrom langgraph.prebuilt.chat_agent_executor import AgentState\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom typing import Any\n\nmodel = ChatAnthropic(model=\"claude-3-7-sonnet-latest\")\n\nsummarization_node = SummarizationNode( # (1)!\n    token_counter=count_tokens_approximately,\n    model=model,\n    max_tokens=384,\n    max_summary_tokens=128,\n    output_messages_key=\"llm_input_messages\",\n)\n\nclass State(AgentState):\n    # \u6ce8\u610f\uff1a\u6211\u4eec\u6dfb\u52a0\u6b64\u952e\u6765\u8ddf\u8e2a\u4e4b\u524d\u7684\u6458\u8981\u4fe1\u606f\n    # \u4ee5\u786e\u4fdd\u6211\u4eec\u4e0d\u4f1a\u5728\u6bcf\u6b21 LLM \u8c03\u7528\u65f6\u90fd\u8fdb\u884c\u6458\u8981\n    # highlight-next-line\n    context: dict[str, RunningSummary]  # (2)!\n\n\ncheckpointer = InMemorySaver() # (3)!\n\nagent = create_react_agent(\n    model=model,\n    tools=tools,\n    # highlight-next-line\n    pre_model_hook=summarization_node, # (4)!\n    # highlight-next-line\n    state_schema=State, # (5)!\n    checkpointer=checkpointer,\n)\n</code></pre> <ol> <li><code>InMemorySaver</code> \u662f\u4e00\u4e2a\u5728\u5185\u5b58\u4e2d\u5b58\u50a8\u667a\u80fd\u4ee3\u7406\u72b6\u6001\u7684\u68c0\u67e5\u70b9\u5668\u3002\u5728\u751f\u4ea7\u73af\u5883\u4e2d\uff0c\u4f60\u901a\u5e38\u4f1a\u4f7f\u7528\u6570\u636e\u5e93\u6216\u5176\u4ed6\u6301\u4e45\u5316\u5b58\u50a8\u3002\u8bf7\u67e5\u770b \u68c0\u67e5\u70b9\u5668\u6587\u6863 \u4e86\u89e3\u66f4\u591a\u9009\u9879\u3002\u5982\u679c\u4f60\u4f7f\u7528 LangGraph Platform \u90e8\u7f72\uff0c\u5e73\u53f0\u5c06\u4e3a\u4f60\u63d0\u4f9b\u751f\u4ea7\u5c31\u7eea\u7684\u68c0\u67e5\u70b9\u5668\u3002</li> <li><code>context</code> \u952e\u88ab\u6dfb\u52a0\u5230\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u4e2d\u3002\u8be5\u952e\u5305\u542b\u6458\u8981\u8282\u70b9\u7684\u7c3f\u8bb0\u4fe1\u606f\u3002\u5b83\u7528\u4e8e\u8ddf\u8e2a\u6700\u540e\u7684\u6458\u8981\u4fe1\u606f\uff0c\u786e\u4fdd\u667a\u80fd\u4ee3\u7406\u4e0d\u4f1a\u5728\u6bcf\u6b21 LLM \u8c03\u7528\u65f6\u90fd\u8fdb\u884c\u6458\u8981\uff0c\u8fd9\u53ef\u80fd\u6548\u7387\u4f4e\u4e0b\u3002</li> <li><code>checkpointer</code> \u88ab\u4f20\u9012\u7ed9\u667a\u80fd\u4ee3\u7406\u3002\u8fd9\u4f7f\u667a\u80fd\u4ee3\u7406\u80fd\u591f\u8de8\u8c03\u7528\u6301\u4e45\u5316\u5176\u72b6\u6001\u3002</li> <li><code>pre_model_hook</code> \u8bbe\u7f6e\u4e3a <code>SummarizationNode</code>\u3002\u6b64\u8282\u70b9\u5c06\u5728\u53d1\u9001\u5230 LLM \u4e4b\u524d\u6458\u8981\u6d88\u606f\u5386\u53f2\u3002\u6458\u8981\u8282\u70b9\u5c06\u81ea\u52a8\u5904\u7406\u6458\u8981\u8fc7\u7a0b\u5e76\u7528\u65b0\u6458\u8981\u66f4\u65b0\u667a\u80fd\u4ee3\u7406\u7684\u72b6\u6001\u3002\u5982\u679c\u4f60\u613f\u610f\uff0c\u53ef\u4ee5\u7528\u81ea\u5b9a\u4e49\u5b9e\u73b0\u66ff\u6362\u5b83\u3002\u8bf7\u53c2\u9605 @[create_react_agent][] API \u53c2\u8003\u4e86\u89e3\u66f4\u591a\u8be6\u60c5\u3002</li> <li><code>state_schema</code> \u8bbe\u7f6e\u4e3a <code>State</code> \u7c7b\uff0c\u8fd9\u662f\u5305\u542b\u989d\u5916 <code>context</code> \u952e\u7684\u81ea\u5b9a\u4e49\u72b6\u6001\u3002</li> </ol> Python <p>\u53ef\u4ee5\u4f7f\u7528\u63d0\u793a\u548c\u7f16\u6392\u903b\u8f91\u6765\u6458\u8981\u6d88\u606f\u5386\u53f2\u3002\u4f8b\u5982\uff0c\u5728 LangGraph \u4e2d\uff0c\u4f60\u53ef\u4ee5\u6269\u5c55 <code>MessagesState</code> \u4ee5\u5305\u542b <code>summary</code> \u952e\uff1a</p> <pre><code>from langgraph.graph import MessagesState\nclass State(MessagesState):\n    summary: str\n</code></pre> <p>\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u751f\u6210\u804a\u5929\u5386\u53f2\u7684\u6458\u8981\uff0c\u4f7f\u7528\u4efb\u4f55\u73b0\u6709\u6458\u8981\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u6458\u8981\u7684\u4e0a\u4e0b\u6587\u3002\u8fd9\u4e2a <code>summarize_conversation</code> \u8282\u70b9\u53ef\u4ee5\u5728 <code>messages</code> \u72b6\u6001\u952e\u4e2d\u7d2f\u79ef\u4e86\u4e00\u5b9a\u6570\u91cf\u7684\u6d88\u606f\u540e\u8c03\u7528\u3002</p> <pre><code>def summarize_conversation(state: State):\n\n    # \u9996\u5148\uff0c\u6211\u4eec\u83b7\u53d6\u4efb\u4f55\u73b0\u6709\u7684\u6458\u8981\n    summary = state.get(\"summary\", \"\")\n\n    # \u521b\u5efa\u6211\u4eec\u7684\u6458\u8981\u63d0\u793a\n    if summary:\n\n        # \u6458\u8981\u5df2\u5b58\u5728\n        summary_message = (\n            f\"This is a summary of the conversation to date: {summary}\\n\\n\"\n            \"Extend the summary by taking into account the new messages above:\"\n        )\n\n    else:\n        summary_message = \"Create a summary of the conversation above:\"\n\n    # \u5c06\u63d0\u793a\u6dfb\u52a0\u5230\u6211\u4eec\u7684\u5386\u53f2\u4e2d\n    messages = state[\"messages\"] + [HumanMessage(content=summary_message)]\n    response = model.invoke(messages)\n\n    # \u5220\u9664\u9664\u6700\u8fd1 2 \u6761\u6d88\u606f\u4e4b\u5916\u7684\u6240\u6709\u6d88\u606f\n    delete_messages = [RemoveMessage(id=m.id) for m in state[\"messages\"][:-2]]\n    return {\"summary\": response.content, \"messages\": delete_messages}\n</code></pre> JavaScript <p>\u53ef\u4ee5\u4f7f\u7528\u63d0\u793a\u548c\u7f16\u6392\u903b\u8f91\u6765\u6458\u8981\u6d88\u606f\u5386\u53f2\u3002\u4f8b\u5982\uff0c\u5728 LangGraph \u4e2d\uff0c\u4f60\u53ef\u4ee5\u6269\u5c55 <code>MessagesZodState</code> \u4ee5\u5305\u542b <code>summary</code> \u952e\uff1a</p> <pre><code>import { MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = MessagesZodState.merge(z.object({\n  summary: z.string().optional(),\n}));\n</code></pre> <p>\u7136\u540e\uff0c\u4f60\u53ef\u4ee5\u751f\u6210\u804a\u5929\u5386\u53f2\u7684\u6458\u8981\uff0c\u4f7f\u7528\u4efb\u4f55\u73b0\u6709\u6458\u8981\u4f5c\u4e3a\u4e0b\u4e00\u4e2a\u6458\u8981\u7684\u4e0a\u4e0b\u6587\u3002\u8fd9\u4e2a <code>summarizeConversation</code> \u8282\u70b9\u53ef\u4ee5\u5728 <code>messages</code> \u72b6\u6001\u952e\u4e2d\u7d2f\u79ef\u4e86\u4e00\u5b9a\u6570\u91cf\u7684\u6d88\u606f\u540e\u8c03\u7528\u3002</p> <pre><code>import { RemoveMessage, HumanMessage } from \"@langchain/core/messages\";\n\nconst summarizeConversation = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // \u9996\u5148\uff0c\u6211\u4eec\u83b7\u53d6\u4efb\u4f55\u73b0\u6709\u7684\u6458\u8981\n  const summary = state.summary || \"\";\n\n  // \u521b\u5efa\u6211\u4eec\u7684\u6458\u8981\u63d0\u793a\n  let summaryMessage: string;\n  if (summary) {\n    // \u6458\u8981\u5df2\u5b58\u5728\n    summaryMessage =\n      `This is a summary of the conversation to date: ${summary}\\n\\n` +\n      \"Extend the summary by taking into account the new messages above:\";\n  } else {\n    summaryMessage = \"Create a summary of the conversation above:\";\n  }\n\n  // \u5c06\u63d0\u793a\u6dfb\u52a0\u5230\u6211\u4eec\u7684\u5386\u53f2\u4e2d\n  const messages = [\n    ...state.messages,\n    new HumanMessage({ content: summaryMessage })\n  ];\n  const response = await model.invoke(messages);\n\n  // \u5220\u9664\u9664\u6700\u8fd1 2 \u6761\u6d88\u606f\u4e4b\u5916\u7684\u6240\u6709\u6d88\u606f\n  const deleteMessages = state.messages\n    .slice(0, -2)\n    .map(m =&gt; new RemoveMessage({ id: m.id }));\n\n  return {\n    summary: response.content,\n    messages: deleteMessages\n  };\n};\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_12","title":"\u7ba1\u7406\u68c0\u67e5\u70b9","text":"<p>\u4f60\u53ef\u4ee5\u67e5\u770b\u548c\u5220\u9664\u68c0\u67e5\u70b9\u5668\u5b58\u50a8\u7684\u4fe1\u606f\u3002</p>"},{"location":"how-tos/memory/add-memory/#_13","title":"\u67e5\u770b\u7ebf\u7a0b\u72b6\u6001\uff08\u68c0\u67e5\u70b9\uff09","text":"Python\u56fe/\u51fd\u6570\u5f0f API\u68c0\u67e5\u70b9\u5668 APIJavaScript <pre><code>config = {\n    \"configurable\": {\n        # highlight-next-line\n        \"thread_id\": \"1\",\n        # \u53ef\u9009\u5730\u63d0\u4f9b\u7279\u5b9a\u68c0\u67e5\u70b9\u7684 ID\uff0c\n        # \u5426\u5219\u663e\u793a\u6700\u65b0\u7684\u68c0\u67e5\u70b9\n        # highlight-next-line\n        # \"checkpoint_id\": \"1f029ca3-1f5b-6704-8004-820c16b69a5a\"\n\n    }\n}\n# highlight-next-line\ngraph.get_state(config)\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        # highlight-next-line\n        \"thread_id\": \"1\",\n        # \u53ef\u9009\u5730\u63d0\u4f9b\u7279\u5b9a\u68c0\u67e5\u70b9\u7684 ID\uff0c\n        # \u5426\u5219\u663e\u793a\u6700\u65b0\u7684\u68c0\u67e5\u70b9\n        # highlight-next-line\n        # \"checkpoint_id\": \"1f029ca3-1f5b-6704-8004-820c16b69a5a\"\n\n    }\n}\n# highlight-next-line\ncheckpointer.get_tuple(config)\n</code></pre> <pre><code>const config = {\n  configurable: {\n    thread_id: \"1\",\n    // \u53ef\u9009\u5730\u63d0\u4f9b\u7279\u5b9a\u68c0\u67e5\u70b9\u7684 ID\uff0c\n    // \u5426\u5219\u663e\u793a\u6700\u65b0\u7684\u68c0\u67e5\u70b9\n    // checkpoint_id: \"1f029ca3-1f5b-6704-8004-820c16b69a5a\"\n  },\n};\nawait graph.getState(config);\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_14","title":"\u67e5\u770b\u7ebf\u7a0b\u5386\u53f2\uff08\u68c0\u67e5\u70b9\uff09","text":"Python\u56fe/\u51fd\u6570\u5f0f API\u68c0\u67e5\u70b9\u5668 APIJavaScript <pre><code>config = {\n    \"configurable\": {\n        # highlight-next-line\n        \"thread_id\": \"1\"\n    }\n}\n# highlight-next-line\nlist(graph.get_state_history(config))\n</code></pre> <pre><code>config = {\n    \"configurable\": {\n        # highlight-next-line\n        \"thread_id\": \"1\"\n    }\n}\n# highlight-next-line\nlist(checkpointer.list(config))\n</code></pre> <pre><code>const config = {\n  configurable: {\n    thread_id: \"1\",\n  },\n};\n\nconst history = [];\nfor await (const state of graph.getStateHistory(config)) {\n  history.push(state);\n}\n</code></pre>"},{"location":"how-tos/memory/add-memory/#_15","title":"\u5220\u9664\u7ebf\u7a0b\u7684\u6240\u6709\u68c0\u67e5\u70b9","text":"Python <pre><code>thread_id = \"1\"\ncheckpointer.delete_thread(thread_id)\n</code></pre> JavaScript <pre><code>const threadId = \"1\";\nawait checkpointer.deleteThread(threadId);\n</code></pre> Python"},{"location":"how-tos/memory/add-memory/#_16","title":"\u9884\u6784\u5efa\u8bb0\u5fc6\u5de5\u5177","text":"<p>LangMem \u662f\u4e00\u4e2a\u7531 LangChain \u7ef4\u62a4\u7684\u5e93\uff0c\u63d0\u4f9b\u7528\u4e8e\u7ba1\u7406\u667a\u80fd\u4ee3\u7406\u4e2d\u957f\u671f\u8bb0\u5fc6\u7684\u5de5\u5177\u3002\u6709\u5173\u4f7f\u7528\u793a\u4f8b\uff0c\u8bf7\u53c2\u9605 LangMem \u6587\u6863\u3002</p>"},{"location":"how-tos/ttl/configure_ttl/","title":"\u5982\u4f55\u4e3a LangGraph \u5e94\u7528\u6dfb\u52a0 TTL","text":"<p>\u524d\u7f6e\u77e5\u8bc6</p> <p>\u672c\u6307\u5357\u5047\u8bbe\u4f60\u719f\u6089 LangGraph Platform\u3001\u6301\u4e45\u5316 \u548c \u8de8\u7ebf\u7a0b\u6301\u4e45\u5316 \u6982\u5ff5\u3002</p> \u4ec5\u9650 LangGraph \u5e73\u53f0 <p>TTL \u4ec5\u652f\u6301 LangGraph \u5e73\u53f0\u90e8\u7f72\u3002\u672c\u6307\u5357\u4e0d\u9002\u7528\u4e8e LangGraph \u5f00\u6e90\u7248\u672c\u3002</p> <p>LangGraph Platform \u4f1a\u6301\u4e45\u5316\u68c0\u67e5\u70b9\uff08\u7ebf\u7a0b\u72b6\u6001\uff09\u548c\u8de8\u7ebf\u7a0b\u8bb0\u5fc6\uff08\u5b58\u50a8\u9879\uff09\u3002\u5728 <code>langgraph.json</code> \u4e2d\u914d\u7f6e\u751f\u5b58\u65f6\u95f4\uff08TTL\uff09\u7b56\u7565\uff0c\u4ee5\u81ea\u52a8\u7ba1\u7406\u8fd9\u4e9b\u6570\u636e\u7684\u751f\u547d\u5468\u671f\uff0c\u9632\u6b62\u65e0\u9650\u79ef\u7d2f\u3002</p>"},{"location":"how-tos/ttl/configure_ttl/#ttl","title":"\u914d\u7f6e\u68c0\u67e5\u70b9 TTL","text":"<p>\u68c0\u67e5\u70b9\u6355\u83b7\u5bf9\u8bdd\u7ebf\u7a0b\u7684\u72b6\u6001\u3002\u8bbe\u7f6e TTL \u53ef\u786e\u4fdd\u65e7\u68c0\u67e5\u70b9\u548c\u7ebf\u7a0b\u88ab\u81ea\u52a8\u5220\u9664\u3002</p> <p>\u5728\u4f60\u7684 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0 <code>checkpointer.ttl</code> \u914d\u7f6e\uff1a</p> Python <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.py:graph\"\n  },\n  \"checkpointer\": {\n    \"ttl\": {\n      \"strategy\": \"delete\",\n      \"sweep_interval_minutes\": 60,\n      \"default_ttl\": 43200\n    }\n  }\n}\n</code></pre> JavaScript <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.ts:graph\"\n  },\n  \"checkpointer\": {\n    \"ttl\": {\n      \"strategy\": \"delete\",\n      \"sweep_interval_minutes\": 60,\n      \"default_ttl\": 43200\n    }\n  }\n}\n</code></pre> <ul> <li><code>strategy</code>: \u6307\u5b9a\u8fc7\u671f\u65f6\u91c7\u53d6\u7684\u64cd\u4f5c\u3002\u76ee\u524d\u4ec5\u652f\u6301 <code>\"delete\"</code>\uff0c\u8be5\u7b56\u7565\u5728\u8fc7\u671f\u65f6\u5220\u9664\u7ebf\u7a0b\u4e2d\u7684\u6240\u6709\u68c0\u67e5\u70b9\u3002</li> <li><code>sweep_interval_minutes</code>: \u5b9a\u4e49\u7cfb\u7edf\u68c0\u67e5\u8fc7\u671f\u68c0\u67e5\u70b9\u7684\u9891\u7387\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\u3002</li> <li><code>default_ttl</code>: \u8bbe\u7f6e\u68c0\u67e5\u70b9\u7684\u9ed8\u8ba4\u751f\u547d\u5468\u671f\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff0c\u4f8b\u5982 43200 \u5206\u949f = 30 \u5929\uff09\u3002</li> </ul>"},{"location":"how-tos/ttl/configure_ttl/#ttl_1","title":"\u914d\u7f6e\u5b58\u50a8\u9879 TTL","text":"<p>\u5b58\u50a8\u9879\u5141\u8bb8\u8de8\u7ebf\u7a0b\u6570\u636e\u6301\u4e45\u5316\u3002\u4e3a\u5b58\u50a8\u9879\u914d\u7f6e TTL \u6709\u52a9\u4e8e\u901a\u8fc7\u5220\u9664\u8fc7\u671f\u6570\u636e\u6765\u7ba1\u7406\u5185\u5b58\u3002</p> <p>\u5728\u4f60\u7684 <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u6dfb\u52a0 <code>store.ttl</code> \u914d\u7f6e\uff1a</p> Python <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.py:graph\"\n  },\n  \"store\": {\n    \"ttl\": {\n      \"refresh_on_read\": true,\n      \"sweep_interval_minutes\": 120,\n      \"default_ttl\": 10080\n    }\n  }\n}\n</code></pre> JavaScript <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.ts:graph\"\n  },\n  \"store\": {\n    \"ttl\": {\n      \"refresh_on_read\": true,\n      \"sweep_interval_minutes\": 120,\n      \"default_ttl\": 10080\n    }\n  }\n}\n</code></pre> <ul> <li><code>refresh_on_read</code>:\uff08\u53ef\u9009\uff0c\u9ed8\u8ba4\u4e3a <code>true</code>\uff09\u5982\u679c\u4e3a <code>true</code>\uff0c\u901a\u8fc7 <code>get</code> \u6216 <code>search</code> \u8bbf\u95ee\u9879\u76ee\u4f1a\u91cd\u7f6e\u5176\u8fc7\u671f\u8ba1\u65f6\u5668\u3002\u5982\u679c\u4e3a <code>false</code>\uff0cTTL \u4ec5\u5728 <code>put</code> \u65f6\u5237\u65b0\u3002</li> <li><code>sweep_interval_minutes</code>:\uff08\u53ef\u9009\uff09\u5b9a\u4e49\u7cfb\u7edf\u68c0\u67e5\u8fc7\u671f\u9879\u76ee\u7684\u9891\u7387\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u7701\u7565\uff0c\u5219\u4e0d\u6267\u884c\u6e05\u7406\u3002</li> <li><code>default_ttl</code>:\uff08\u53ef\u9009\uff09\u8bbe\u7f6e\u5b58\u50a8\u9879\u7684\u9ed8\u8ba4\u751f\u547d\u5468\u671f\uff08\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\uff0c\u4f8b\u5982 10080 \u5206\u949f = 7 \u5929\uff09\u3002\u5982\u679c\u7701\u7565\uff0c\u9879\u76ee\u9ed8\u8ba4\u4e0d\u4f1a\u8fc7\u671f\u3002</li> </ul>"},{"location":"how-tos/ttl/configure_ttl/#ttl_2","title":"\u7ec4\u5408 TTL \u914d\u7f6e","text":"<p>\u4f60\u53ef\u4ee5\u5728\u540c\u4e00\u4e2a <code>langgraph.json</code> \u6587\u4ef6\u4e2d\u4e3a\u68c0\u67e5\u70b9\u548c\u5b58\u50a8\u9879\u914d\u7f6e TTL\uff0c\u4ee5\u4fbf\u4e3a\u6bcf\u79cd\u6570\u636e\u7c7b\u578b\u8bbe\u7f6e\u4e0d\u540c\u7684\u7b56\u7565\u3002\u4ee5\u4e0b\u662f\u793a\u4f8b\uff1a</p> Python <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.py:graph\"\n  },\n  \"checkpointer\": {\n    \"ttl\": {\n      \"strategy\": \"delete\",\n      \"sweep_interval_minutes\": 60,\n      \"default_ttl\": 43200\n    }\n  },\n  \"store\": {\n    \"ttl\": {\n      \"refresh_on_read\": true,\n      \"sweep_interval_minutes\": 120,\n      \"default_ttl\": 10080\n    }\n  }\n}\n</code></pre> JavaScript <pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./agent.ts:graph\"\n  },\n  \"checkpointer\": {\n    \"ttl\": {\n      \"strategy\": \"delete\",\n      \"sweep_interval_minutes\": 60,\n      \"default_ttl\": 43200\n    }\n  },\n  \"store\": {\n    \"ttl\": {\n      \"refresh_on_read\": true,\n      \"sweep_interval_minutes\": 120,\n      \"default_ttl\": 10080\n    }\n  }\n}\n</code></pre>"},{"location":"how-tos/ttl/configure_ttl/#_1","title":"\u8fd0\u884c\u65f6\u8986\u76d6","text":"<p><code>langgraph.json</code> \u4e2d\u7684\u9ed8\u8ba4 <code>store.ttl</code> \u8bbe\u7f6e\u53ef\u4ee5\u5728\u8fd0\u884c\u65f6\u901a\u8fc7\u5728 SDK \u65b9\u6cd5\u8c03\u7528\uff08\u5982 <code>get</code>\u3001<code>put</code> \u548c <code>search</code>\uff09\u4e2d\u63d0\u4f9b\u7279\u5b9a\u7684 TTL \u503c\u6765\u8986\u76d6\u3002</p>"},{"location":"how-tos/ttl/configure_ttl/#_2","title":"\u90e8\u7f72\u6d41\u7a0b","text":"<p>\u5728 <code>langgraph.json</code> \u4e2d\u914d\u7f6e TTL \u540e\uff0c\u90e8\u7f72\u6216\u91cd\u542f\u4f60\u7684 LangGraph \u5e94\u7528\u4ee5\u4f7f\u66f4\u6539\u751f\u6548\u3002\u4f7f\u7528 <code>langgraph dev</code> \u8fdb\u884c\u672c\u5730\u5f00\u53d1\uff0c\u6216\u4f7f\u7528 <code>langgraph up</code> \u8fdb\u884c Docker \u90e8\u7f72\u3002</p> <p>\u6709\u5173\u5176\u4ed6\u53ef\u914d\u7f6e\u9009\u9879\u7684\u66f4\u591a\u8be6\u60c5\uff0c\u8bf7\u53c2\u9605 @langgraph.json CLI \u53c2\u8003\u3002</p>"},{"location":"reference/","title":"Reference","text":"","boost":0.5},{"location":"reference/#_1","title":"\u53c2\u8003","text":"<p>\u6b22\u8fce\u6765\u5230 LangGraph \u53c2\u8003\u6587\u6863\uff01\u8fd9\u4e9b\u9875\u9762\u8be6\u7ec6\u4ecb\u7ecd\u4e86\u4f7f\u7528 LangGraph \u6784\u5efa\u65f6\u5c06\u4f7f\u7528\u7684\u6838\u5fc3\u63a5\u53e3\u3002\u6bcf\u4e2a\u90e8\u5206\u6db5\u76d6\u751f\u6001\u7cfb\u7edf\u7684\u4e0d\u540c\u90e8\u5206\u3002</p> <p>Tip</p> <p>\u5982\u679c\u4f60\u521a\u5f00\u59cb\u4f7f\u7528\uff0c\u8bf7\u53c2\u9605 LangGraph \u57fa\u7840\u77e5\u8bc6\u4ee5\u4e86\u89e3\u4e3b\u8981\u6982\u5ff5\u548c\u4f7f\u7528\u6a21\u5f0f\u3002</p>","boost":0.5},{"location":"reference/#langgraph","title":"LangGraph","text":"<p>LangGraph \u5f00\u6e90\u5e93\u7684\u6838\u5fc3 API\u3002</p> <ul> <li>Graphs: \u4e3b\u8981\u7684\u56fe\u62bd\u8c61\u548c\u7528\u6cd5\u3002</li> <li>Functional API: \u56fe\u7684\u51fd\u6570\u5f0f\u7f16\u7a0b\u63a5\u53e3\u3002</li> <li>Pregel: \u53d7 Pregel \u542f\u53d1\u7684\u8ba1\u7b97\u6a21\u578b\u3002</li> <li>Checkpointing: \u4fdd\u5b58\u548c\u6062\u590d\u56fe\u72b6\u6001\u3002</li> <li>Storage: \u5b58\u50a8\u540e\u7aef\u548c\u9009\u9879\u3002</li> <li>Caching: \u6027\u80fd\u7f13\u5b58\u673a\u5236\u3002</li> <li>Types: \u56fe\u7ec4\u4ef6\u7684\u7c7b\u578b\u5b9a\u4e49\u3002</li> <li>Config: \u914d\u7f6e\u9009\u9879\u3002</li> <li>Errors: \u9519\u8bef\u7c7b\u578b\u548c\u5904\u7406\u3002</li> <li>Constants: \u5168\u5c40\u5e38\u91cf\u3002</li> <li>Channels: \u6d88\u606f\u4f20\u9012\u548c\u901a\u9053\u3002</li> </ul>","boost":0.5},{"location":"reference/#_2","title":"\u9884\u6784\u5efa\u7ec4\u4ef6","text":"<p>\u7528\u4e8e\u5e38\u89c1\u5de5\u4f5c\u6d41\u3001\u667a\u80fd\u4f53\u548c\u5176\u4ed6\u6a21\u5f0f\u7684\u66f4\u9ad8\u7ea7\u522b\u62bd\u8c61\u3002</p> <ul> <li>Agents: \u5185\u7f6e\u667a\u80fd\u4f53\u6a21\u5f0f\u3002</li> <li>Supervisor: \u7f16\u6392\u548c\u59d4\u6d3e\u3002</li> <li>Swarm: \u591a\u667a\u80fd\u4f53\u534f\u4f5c\u3002</li> <li>MCP Adapters: \u4e0e\u5916\u90e8\u7cfb\u7edf\u7684\u96c6\u6210\u3002</li> </ul>","boost":0.5},{"location":"reference/#langgraph_1","title":"LangGraph \u5e73\u53f0","text":"<p>\u7528\u4e8e\u90e8\u7f72\u548c\u8fde\u63a5\u5230 LangGraph \u5e73\u53f0\u7684\u5de5\u5177\u3002</p> <ul> <li>SDK (Python): \u7528\u4e8e\u4e0e LangGraph Server \u5b9e\u4f8b\u4ea4\u4e92\u7684 Python SDK\u3002</li> <li>SDK (JS/TS): \u7528\u4e8e\u4e0e LangGraph Server \u5b9e\u4f8b\u4ea4\u4e92\u7684 JavaScript/TypeScript SDK\u3002</li> <li>RemoteGraph: \u7528\u4e8e\u8fde\u63a5\u5230 LangGraph Server \u5b9e\u4f8b\u7684 <code>Pregel</code> \u62bd\u8c61\u3002</li> </ul> <p>\u67e5\u770b LangGraph \u5e73\u53f0\u53c2\u8003\u4ee5\u83b7\u53d6\u66f4\u591a\u53c2\u8003\u6587\u6863\u3002</p>","boost":0.5},{"location":"reference/agents/","title":"\u667a\u80fd\u4f53","text":"<p>::: langgraph.prebuilt.chat_agent_executor     options:       members:         - AgentState         - create_react_agent</p> <p>::: langgraph.prebuilt.tool_node.ToolNode     options:       show_if_no_docstring: true       show_root_heading: true       show_root_full_path: false       inherited_members: false       members:         - inject_tool_args</p> <p>::: langgraph.prebuilt.tool_node     options:       members:         - InjectedState         - InjectedStore         - tools_condition</p> <p>::: langgraph.prebuilt.tool_validator.ValidationNode     options:       show_if_no_docstring: true       show_root_heading: true       show_root_full_path: false       inherited_members: false       members: false</p> <p>::: langgraph.prebuilt.interrupt     options:       members:         - HumanInterruptConfig         - ActionRequest         - HumanInterrupt         - HumanResponse</p>"},{"location":"reference/cache/","title":"Cache","text":""},{"location":"reference/cache/#_1","title":"\u7f13\u5b58","text":"<p>::: langgraph.cache.base ::: langgraph.cache.memory ::: langgraph.cache.sqlite</p>"},{"location":"reference/channels/","title":"\u901a\u9053","text":"<p>::: langgraph.channels.base     options:       members:         - BaseChannel</p> <p>::: langgraph.channels     options:       members:         - Topic         - LastValue         - EphemeralValue         - BinaryOperatorAggregate         - AnyValue</p>"},{"location":"reference/checkpoints/","title":"\u68c0\u67e5\u70b9\u4fdd\u5b58\u5668","text":"<p>::: langgraph.checkpoint.base     options:       members:         - CheckpointMetadata         - Checkpoint         - BaseCheckpointSaver         - create_checkpoint</p> <p>::: langgraph.checkpoint.serde.base     options:       members:         - SerializerProtocol         - CipherProtocol</p> <p>::: langgraph.checkpoint.serde.jsonplus     options:       members:         - JsonPlusSerializer</p> <p>::: langgraph.checkpoint.serde.encrypted     options:       members:         - EncryptedSerializer</p> <p>::: langgraph.checkpoint.memory</p> <p>::: langgraph.checkpoint.sqlite</p> <p>::: langgraph.checkpoint.sqlite.aio</p> <p>::: langgraph.checkpoint.postgres     options:       members:         - PostgresSaver</p> <p>::: langgraph.checkpoint.postgres.aio     options:       members:         - AsyncPostgresSaver</p>"},{"location":"reference/config/","title":"Config","text":"<p>::: langgraph.config     options:       members:         - get_store         - get_stream_writer</p>"},{"location":"reference/constants/","title":"Constants","text":"<p>::: langgraph.constants     options:       members:         - TAG_HIDDEN         - TAG_NOSTREAM         - START         - END</p>"},{"location":"reference/errors/","title":"\u9519\u8bef","text":"<p>::: langgraph.errors</p>"},{"location":"reference/func/","title":"Func","text":"<p>::: langgraph.func     options:       members:         - task         - entrypoint</p>"},{"location":"reference/graphs/","title":"\u56fe\u5b9a\u4e49","text":"<p>::: langgraph.graph.state.StateGraph     options:       show_if_no_docstring: true       show_root_heading: true       show_root_full_path: false       members:         - add_node         - add_edge         - add_conditional_edges         - add_sequence         - compile</p> <p>::: langgraph.graph.state.CompiledStateGraph     options:       show_if_no_docstring: true       show_root_heading: true       show_root_full_path: false       members:         - stream         - astream         - invoke         - ainvoke         - get_state         - aget_state         - get_state_history         - aget_state_history         - update_state         - aupdate_state         - bulk_update_state         - abulk_update_state         - get_graph         - aget_graph         - get_subgraphs         - aget_subgraphs         - with_config</p> <p>::: langgraph.graph.message     options:       members:         - add_messages</p>"},{"location":"reference/mcp/","title":"LangChain \u6a21\u578b\u4e0a\u4e0b\u6587\u534f\u8bae (MCP) \u9002\u914d\u5668","text":"<p>::: langchain_mcp_adapters.client     options:       members:         - MultiServerMCPClient</p> <p>::: langchain_mcp_adapters.tools     options:       members:         - load_mcp_tools</p> <p>::: langchain_mcp_adapters.prompts     options:       members:         - load_mcp_prompt</p> <p>::: langchain_mcp_adapters.resources     options:       members:         - load_mcp_resources</p>"},{"location":"reference/pregel/","title":"Pregel","text":"<p>::: langgraph.pregel.NodeBuilder     options:       show_if_no_docstring: true       show_root_heading: true       show_root_full_path: false       members:         - subscribe_only         - subscribe_to         - read_from         - do         - write_to         - meta         - retry         - cache         - build</p> <p>::: langgraph.pregel.Pregel     options:       show_if_no_docstring: true       show_root_heading: true       show_root_full_path: false       members:         - stream         - astream         - invoke         - ainvoke         - get_state         - aget_state         - get_state_history         - aget_state_history         - update_state         - aupdate_state         - bulk_update_state         - abulk_update_state         - get_graph         - aget_graph         - get_subgraphs         - aget_subgraphs         - with_config</p>"},{"location":"reference/remote_graph/","title":"RemoteGraph","text":"<p>::: langgraph.pregel.remote     options:       members:         - RemoteGraph</p>"},{"location":"reference/runtime/","title":"\u8fd0\u884c\u65f6","text":"<p>::: langgraph.runtime.Runtime     options:       show_root_heading: true       show_root_full_path: false       members:         - context         - store         - stream_writer         - previous</p> <p>::: langgraph.runtime     options:       members:         - get_runtime</p>"},{"location":"reference/store/","title":"\u5b58\u50a8","text":"<p>::: langgraph.store.base</p> <p>::: langgraph.store.postgres</p>"},{"location":"reference/supervisor/","title":"LangGraph \u76d1\u7763\u7cfb\u7edf","text":"<p>::: langgraph_supervisor.supervisor     options:       members:         - create_supervisor</p> <p>::: langgraph_supervisor.handoff     options:       members:         - create_handoff_tool         - create_forward_message_tool</p>"},{"location":"reference/swarm/","title":"LangGraph \u7fa4\u4f53\u534f\u4f5c","text":"<p>::: langgraph_swarm.swarm     options:       members:         - SwarmState         - create_swarm         - add_active_agent_router</p> <p>::: langgraph_swarm.handoff     options:       members:         - create_handoff_tool</p>"},{"location":"reference/types/","title":"\u7c7b\u578b","text":"<p>::: langgraph.types     options:       members:         - All         - StreamMode         - StreamWriter         - RetryPolicy         - CachePolicy         - Interrupt         - PregelTask         - StateSnapshot         - Send         - Command         - interrupt</p>"},{"location":"snippets/chat_model_tabs/","title":"Chat model tabs","text":"OpenAIAnthropicAzureGoogle GeminiAWS Bedrock <p><pre><code>pip install -U \"langchain[openai]\"\n</code></pre> <pre><code>import os\nfrom langchain.chat_models import init_chat_model\n\nos.environ[\"OPENAI_API_KEY\"] = \"sk-...\"\n\nllm = init_chat_model(\"openai:gpt-4.1\")\n</code></pre></p> <p>\ud83d\udc49 \u9605\u8bfb OpenAI \u96c6\u6210\u6587\u6863</p> <p><pre><code>pip install -U \"langchain[anthropic]\"\n</code></pre> <pre><code>import os\nfrom langchain.chat_models import init_chat_model\n\nos.environ[\"ANTHROPIC_API_KEY\"] = \"sk-...\"\n\nllm = init_chat_model(\"anthropic:claude-3-5-sonnet-latest\")\n</code></pre></p> <p>\ud83d\udc49 \u9605\u8bfb Anthropic \u96c6\u6210\u6587\u6863</p> <p><pre><code>pip install -U \"langchain[openai]\"\n</code></pre> <pre><code>import os\nfrom langchain.chat_models import init_chat_model\n\nos.environ[\"AZURE_OPENAI_API_KEY\"] = \"...\"\nos.environ[\"AZURE_OPENAI_ENDPOINT\"] = \"...\"\nos.environ[\"OPENAI_API_VERSION\"] = \"2025-03-01-preview\"\n\nllm = init_chat_model(\n    \"azure_openai:gpt-4.1\",\n    azure_deployment=os.environ[\"AZURE_OPENAI_DEPLOYMENT_NAME\"],\n)\n</code></pre></p> <p>\ud83d\udc49 \u9605\u8bfb Azure \u96c6\u6210\u6587\u6863</p> <p><pre><code>pip install -U \"langchain[google-genai]\"\n</code></pre> <pre><code>import os\nfrom langchain.chat_models import init_chat_model\n\nos.environ[\"GOOGLE_API_KEY\"] = \"...\"\n\nllm = init_chat_model(\"google_genai:gemini-2.0-flash\")\n</code></pre></p> <p>\ud83d\udc49 \u9605\u8bfb Google GenAI \u96c6\u6210\u6587\u6863</p> <p><pre><code>pip install -U \"langchain[aws]\"\n</code></pre> <pre><code>from langchain.chat_models import init_chat_model\n\n# \u6309\u7167\u6b64\u5904\u7684\u6b65\u9aa4\u914d\u7f6e\u4f60\u7684\u51ed\u8bc1:\n# https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html\n\nllm = init_chat_model(\n    \"anthropic.claude-3-5-sonnet-20240620-v1:0\",\n    model_provider=\"bedrock_converse\",\n)\n</code></pre></p> <p>\ud83d\udc49 \u9605\u8bfb AWS Bedrock \u96c6\u6210\u6587\u6863</p>"},{"location":"troubleshooting/studio/","title":"LangGraph Studio \u95ee\u9898\u6392\u67e5","text":""},{"location":"troubleshooting/studio/#safari","title":"Safari \u8fde\u63a5\u95ee\u9898","text":"<p>Safari \u4f1a\u963b\u6b62 localhost \u4e0a\u7684\u666e\u901a HTTP \u6d41\u91cf\u3002\u4f7f\u7528 <code>langgraph dev</code> \u8fd0\u884c Studio \u65f6,\u4f60\u53ef\u80fd\u4f1a\u770b\u5230\"Failed to load assistants\"(\u52a0\u8f7d\u52a9\u624b\u5931\u8d25)\u9519\u8bef\u3002</p>"},{"location":"troubleshooting/studio/#1-cloudflare-tunnel","title":"\u89e3\u51b3\u65b9\u6848 1: \u4f7f\u7528 Cloudflare Tunnel","text":"Python <pre><code>pip install -U langgraph-cli&gt;=0.2.6\nlanggraph dev --tunnel\n</code></pre> JavaScript <pre><code>npx @langchain/langgraph-cli dev\n</code></pre> <p>\u547d\u4ee4\u4f1a\u8f93\u51fa\u8fd9\u79cd\u683c\u5f0f\u7684 URL:</p> <pre><code>https://smith.langchain.com/studio/?baseUrl=https://hamilton-praise-heart-costumes.trycloudflare.com\n</code></pre> <p>\u5728 Safari \u4e2d\u4f7f\u7528\u6b64 URL \u52a0\u8f7d Studio\u3002\u8fd9\u91cc,<code>baseUrl</code> \u53c2\u6570\u6307\u5b9a\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u670d\u52a1\u5668\u7aef\u70b9\u3002</p>"},{"location":"troubleshooting/studio/#2-chromium","title":"\u89e3\u51b3\u65b9\u6848 2: \u4f7f\u7528 Chromium \u6d4f\u89c8\u5668","text":"<p>Chrome \u548c\u5176\u4ed6 Chromium \u6d4f\u89c8\u5668\u5141\u8bb8\u5728 localhost \u4e0a\u4f7f\u7528 HTTP\u3002\u4f7f\u7528 <code>langgraph dev</code> \u65e0\u9700\u989d\u5916\u914d\u7f6e\u3002</p>"},{"location":"troubleshooting/studio/#brave","title":"Brave \u8fde\u63a5\u95ee\u9898","text":"<p>\u5f53\u542f\u7528 Brave Shields \u65f6,Brave \u4f1a\u963b\u6b62 localhost \u4e0a\u7684\u666e\u901a HTTP \u6d41\u91cf\u3002\u4f7f\u7528 <code>langgraph dev</code> \u8fd0\u884c Studio \u65f6,\u4f60\u53ef\u80fd\u4f1a\u770b\u5230\"Failed to load assistants\"(\u52a0\u8f7d\u52a9\u624b\u5931\u8d25)\u9519\u8bef\u3002</p>"},{"location":"troubleshooting/studio/#1-brave-shields","title":"\u89e3\u51b3\u65b9\u6848 1: \u7981\u7528 Brave Shields","text":"<p>\u4f7f\u7528 URL \u680f\u4e2d\u7684 Brave \u56fe\u6807\u4e3a LangSmith \u7981\u7528 Brave Shields\u3002</p> <p></p>"},{"location":"troubleshooting/studio/#2-cloudflare-tunnel","title":"\u89e3\u51b3\u65b9\u6848 2: \u4f7f\u7528 Cloudflare Tunnel","text":"Python <pre><code>pip install -U langgraph-cli&gt;=0.2.6\nlanggraph dev --tunnel\n</code></pre> JavaScript <pre><code>npx @langchain/langgraph-cli dev\n</code></pre> <p>\u547d\u4ee4\u4f1a\u8f93\u51fa\u8fd9\u79cd\u683c\u5f0f\u7684 URL:</p> <pre><code>https://smith.langchain.com/studio/?baseUrl=https://hamilton-praise-heart-costumes.trycloudflare.com\n</code></pre> <p>\u5728 Brave \u4e2d\u4f7f\u7528\u6b64 URL \u52a0\u8f7d Studio\u3002\u8fd9\u91cc,<code>baseUrl</code> \u53c2\u6570\u6307\u5b9a\u4f60\u7684\u667a\u80fd\u4ee3\u7406\u670d\u52a1\u5668\u7aef\u70b9\u3002</p>"},{"location":"troubleshooting/studio/#_1","title":"\u56fe\u8fb9\u95ee\u9898","text":"Python <p>\u672a\u5b9a\u4e49\u7684\u6761\u4ef6\u8fb9\u53ef\u80fd\u4f1a\u5728\u4f60\u7684\u56fe\u4e2d\u663e\u793a\u610f\u5916\u7684\u8fde\u63a5\u3002\u8fd9\u662f \u56e0\u4e3a\u5982\u679c\u6ca1\u6709\u6b63\u786e\u5b9a\u4e49,LangGraph Studio \u4f1a\u5047\u8bbe\u6761\u4ef6\u8fb9\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u5176\u4ed6\u8282\u70b9\u3002\u8981\u89e3\u51b3\u6b64\u95ee\u9898,\u4f7f\u7528\u4ee5\u4e0b\u65b9\u6cd5\u4e4b\u4e00\u663e\u5f0f\u5b9a\u4e49\u8def\u7531\u8def\u5f84:</p>"},{"location":"troubleshooting/studio/#1","title":"\u89e3\u51b3\u65b9\u6848 1: \u8def\u5f84\u6620\u5c04","text":"<p>\u5b9a\u4e49\u8def\u7531\u5668\u8f93\u51fa\u4e0e\u76ee\u6807\u8282\u70b9\u4e4b\u95f4\u7684\u6620\u5c04:</p> <pre><code>graph.add_conditional_edges(\"node_a\", routing_function, {True: \"node_b\", False: \"node_c\"})\n</code></pre>"},{"location":"troubleshooting/studio/#2-python","title":"\u89e3\u51b3\u65b9\u6848 2: \u8def\u7531\u5668\u7c7b\u578b\u5b9a\u4e49 (Python)","text":"<p>\u4f7f\u7528 Python \u7684 <code>Literal</code> \u7c7b\u578b\u6307\u5b9a\u53ef\u80fd\u7684\u8def\u7531\u76ee\u6807:</p> <pre><code>def routing_function(state: GraphState) -&gt; Literal[\"node_b\",\"node_c\"]:\n    if state['some_condition'] == True:\n        return \"node_b\"\n    else:\n        return \"node_c\"\n</code></pre> JavaScript <p>\u672a\u5b9a\u4e49\u7684\u6761\u4ef6\u8fb9\u53ef\u80fd\u4f1a\u5728\u4f60\u7684\u56fe\u4e2d\u663e\u793a\u610f\u5916\u7684\u8fde\u63a5\u3002\u8fd9\u662f\u56e0\u4e3a\u5982\u679c\u6ca1\u6709\u6b63\u786e\u5b9a\u4e49,LangGraph Studio \u4f1a\u5047\u8bbe\u6761\u4ef6\u8fb9\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u5176\u4ed6\u8282\u70b9\u3002 \u8981\u89e3\u51b3\u6b64\u95ee\u9898,\u663e\u5f0f\u5b9a\u4e49\u8def\u7531\u5668\u8f93\u51fa\u4e0e\u76ee\u6807\u8282\u70b9\u4e4b\u95f4\u7684\u6620\u5c04:</p> <pre><code>graph.addConditionalEdges(\"node_a\", routingFunction, {\n  true: \"node_b\",\n  false: \"node_c\",\n});\n</code></pre>"},{"location":"troubleshooting/errors/","title":"\u9519\u8bef\u53c2\u8003","text":"<p>\u672c\u9875\u9762\u5305\u542b\u5728\u4f7f\u7528 LangGraph \u6784\u5efa\u5e94\u7528\u65f6\u53ef\u80fd\u9047\u5230\u7684\u5e38\u89c1\u9519\u8bef\u7684\u89e3\u51b3\u6307\u5357\u3002 \u4e0b\u9762\u5f15\u7528\u7684\u9519\u8bef\u5728\u4ee3\u7801\u4e2d\u629b\u51fa\u65f6\u4f1a\u6709\u4e00\u4e2a <code>lc_error_code</code> \u5c5e\u6027,\u5bf9\u5e94\u4e0b\u9762\u7684\u9519\u8bef\u4ee3\u7801\u4e4b\u4e00\u3002</p> <ul> <li>GRAPH_RECURSION_LIMIT</li> <li>INVALID_CONCURRENT_GRAPH_UPDATE</li> <li>INVALID_GRAPH_NODE_RETURN_VALUE</li> <li>MULTIPLE_SUBGRAPHS</li> <li>INVALID_CHAT_HISTORY</li> </ul>","boost":0.5},{"location":"troubleshooting/errors/GRAPH_RECURSION_LIMIT/","title":"GRAPH_RECURSION_LIMIT","text":"<p>\u4f60\u7684 LangGraph <code>StateGraph</code> \u5728\u89e6\u53d1\u505c\u6b62\u6761\u4ef6\u4e4b\u524d\u8fbe\u5230\u4e86\u6700\u5927\u6b65\u6570\u3002 \u8fd9\u901a\u5e38\u662f\u7531\u7c7b\u4f3c\u4e0b\u9762\u793a\u4f8b\u7684\u4ee3\u7801\u5bfc\u81f4\u7684\u65e0\u9650\u5faa\u73af\u5f15\u8d77\u7684:</p> Python <pre><code>class State(TypedDict):\n    some_key: str\n\nbuilder = StateGraph(State)\nbuilder.add_node(\"a\", ...)\nbuilder.add_node(\"b\", ...)\nbuilder.add_edge(\"a\", \"b\")\nbuilder.add_edge(\"b\", \"a\")\n...\n\ngraph = builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  someKey: z.string(),\n});\n\nconst builder = new StateGraph(State)\n  .addNode(\"a\", ...)\n  .addNode(\"b\", ...)\n  .addEdge(\"a\", \"b\")\n  .addEdge(\"b\", \"a\")\n  ...\n\nconst graph = builder.compile();\n</code></pre> <p>\u7136\u800c,\u590d\u6742\u7684\u56fe\u53ef\u80fd\u4f1a\u81ea\u7136\u5730\u8fbe\u5230\u9ed8\u8ba4\u9650\u5236\u3002</p>"},{"location":"troubleshooting/errors/GRAPH_RECURSION_LIMIT/#_1","title":"\u95ee\u9898\u6392\u67e5","text":"<ul> <li>\u5982\u679c\u4f60\u4e0d\u5e0c\u671b\u56fe\u7ecf\u8fc7\u591a\u6b21\u8fed\u4ee3,\u4f60\u53ef\u80fd\u6709\u4e00\u4e2a\u5faa\u73af\u3002\u68c0\u67e5\u4f60\u7684\u903b\u8f91\u4e2d\u662f\u5426\u5b58\u5728\u65e0\u9650\u5faa\u73af\u3002</li> </ul> Python <ul> <li>\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u590d\u6742\u7684\u56fe,\u53ef\u4ee5\u5728\u8c03\u7528\u56fe\u65f6\u5411 <code>config</code> \u5bf9\u8c61\u4f20\u5165\u66f4\u9ad8\u7684 <code>recursion_limit</code> \u503c,\u5982\u4e0b\u6240\u793a:</li> </ul> <pre><code>graph.invoke({...}, {\"recursion_limit\": 100})\n</code></pre> JavaScript <ul> <li>\u5982\u679c\u4f60\u6709\u4e00\u4e2a\u590d\u6742\u7684\u56fe,\u53ef\u4ee5\u5728\u8c03\u7528\u56fe\u65f6\u5411 <code>config</code> \u5bf9\u8c61\u4f20\u5165\u66f4\u9ad8\u7684 <code>recursionLimit</code> \u503c,\u5982\u4e0b\u6240\u793a:</li> </ul> <pre><code>await graph.invoke({...}, { recursionLimit: 100 });\n</code></pre>"},{"location":"troubleshooting/errors/INVALID_CHAT_HISTORY/","title":"INVALID_CHAT_HISTORY","text":"Python <p>\u5f53 <code>call_model</code> \u56fe\u8282\u70b9\u6536\u5230\u683c\u5f0f\u9519\u8bef\u7684\u6d88\u606f\u5217\u8868\u65f6,\u9884\u6784\u5efa\u7684 @[create_react_agent][] \u4f1a\u629b\u51fa\u6b64\u9519\u8bef\u3002\u5177\u4f53\u6765\u8bf4,\u5f53\u5b58\u5728\u5e26\u6709 <code>tool_calls</code>(LLM \u8bf7\u6c42\u8c03\u7528\u5de5\u5177)\u7684 <code>AIMessages</code> \u4f46\u6ca1\u6709\u76f8\u5e94\u7684 <code>ToolMessage</code>(\u5de5\u5177\u8c03\u7528\u7684\u7ed3\u679c\u8fd4\u56de\u7ed9 LLM)\u65f6,\u6d88\u606f\u5217\u8868\u5c31\u662f\u683c\u5f0f\u9519\u8bef\u7684\u3002</p> JavaScript <p>\u5f53 <code>callModel</code> \u56fe\u8282\u70b9\u6536\u5230\u683c\u5f0f\u9519\u8bef\u7684\u6d88\u606f\u5217\u8868\u65f6,\u9884\u6784\u5efa\u7684 @[createReactAgent][create_react_agent] \u4f1a\u629b\u51fa\u6b64\u9519\u8bef\u3002\u5177\u4f53\u6765\u8bf4,\u5f53\u5b58\u5728\u5e26\u6709 <code>tool_calls</code>(LLM \u8bf7\u6c42\u8c03\u7528\u5de5\u5177)\u7684 <code>AIMessage</code> \u4f46\u6ca1\u6709\u76f8\u5e94\u7684 <code>ToolMessage</code>(\u5de5\u5177\u8c03\u7528\u7684\u7ed3\u679c\u8fd4\u56de\u7ed9 LLM)\u65f6,\u6d88\u606f\u5217\u8868\u5c31\u662f\u683c\u5f0f\u9519\u8bef\u7684\u3002</p> <p>\u4f60\u770b\u5230\u6b64\u9519\u8bef\u53ef\u80fd\u6709\u4ee5\u4e0b\u51e0\u4e2a\u539f\u56e0:</p> Python <ol> <li>\u4f60\u5728\u8c03\u7528\u56fe\u65f6\u624b\u52a8\u4f20\u5165\u4e86\u683c\u5f0f\u9519\u8bef\u7684\u6d88\u606f\u5217\u8868,\u4f8b\u5982 <code>graph.invoke({'messages': [AIMessage(..., tool_calls=[...])]})</code></li> <li>\u56fe\u5728\u63a5\u6536\u6765\u81ea <code>tools</code> \u8282\u70b9\u7684\u66f4\u65b0(\u5373 ToolMessages \u5217\u8868)\u4e4b\u524d\u88ab\u4e2d\u65ad\u4e86,    \u800c\u4f60\u4f7f\u7528\u975e None \u6216\u975e ToolMessage \u7684\u8f93\u5165\u8c03\u7528\u4e86\u5b83,    \u4f8b\u5982 <code>graph.invoke({'messages': [HumanMessage(...)]}, config)</code>\u3002</li> </ol> <p>\u6b64\u4e2d\u65ad\u53ef\u80fd\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\u89e6\u53d1:</p> <ul> <li>\u4f60\u5728 <code>create_react_agent</code> \u4e2d\u624b\u52a8\u8bbe\u7f6e\u4e86 <code>interrupt_before = ['tools']</code></li> <li>\u5176\u4e2d\u4e00\u4e2a\u5de5\u5177\u629b\u51fa\u4e86\u672a\u88ab @[ToolNode][] (<code>\"tools\"</code>) \u5904\u7406\u7684\u9519\u8bef</li> </ul> JavaScript <ol> <li>\u4f60\u5728\u8c03\u7528\u56fe\u65f6\u624b\u52a8\u4f20\u5165\u4e86\u683c\u5f0f\u9519\u8bef\u7684\u6d88\u606f\u5217\u8868,\u4f8b\u5982 <code>graph.invoke({messages: [new AIMessage({..., tool_calls: [...]})]})</code></li> <li>\u56fe\u5728\u63a5\u6536\u6765\u81ea <code>tools</code> \u8282\u70b9\u7684\u66f4\u65b0(\u5373 ToolMessages \u5217\u8868)\u4e4b\u524d\u88ab\u4e2d\u65ad\u4e86,    \u800c\u4f60\u4f7f\u7528\u975e null \u6216\u975e ToolMessage \u7684\u8f93\u5165\u8c03\u7528\u4e86\u5b83,    \u4f8b\u5982 <code>graph.invoke({messages: [new HumanMessage(...)]}, config)</code>\u3002</li> </ol> <p>\u6b64\u4e2d\u65ad\u53ef\u80fd\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u4e4b\u4e00\u89e6\u53d1:</p> <ul> <li>\u4f60\u5728 <code>createReactAgent</code> \u4e2d\u624b\u52a8\u8bbe\u7f6e\u4e86 <code>interruptBefore: ['tools']</code></li> <li>\u5176\u4e2d\u4e00\u4e2a\u5de5\u5177\u629b\u51fa\u4e86\u672a\u88ab @[ToolNode][] (<code>\"tools\"</code>) \u5904\u7406\u7684\u9519\u8bef</li> </ul>"},{"location":"troubleshooting/errors/INVALID_CHAT_HISTORY/#_1","title":"\u95ee\u9898\u6392\u67e5","text":"<p>\u8981\u89e3\u51b3\u6b64\u95ee\u9898,\u4f60\u53ef\u4ee5\u6267\u884c\u4ee5\u4e0b\u64cd\u4f5c\u4e4b\u4e00:</p> <ol> <li>\u4e0d\u8981\u4f7f\u7528\u683c\u5f0f\u9519\u8bef\u7684\u6d88\u606f\u5217\u8868\u8c03\u7528\u56fe</li> <li>\u5728\u4e2d\u65ad(\u624b\u52a8\u6216\u7531\u4e8e\u9519\u8bef)\u7684\u60c5\u51b5\u4e0b,\u4f60\u53ef\u4ee5:</li> </ol> Python <ul> <li> <p>\u63d0\u4f9b\u4e0e\u73b0\u6709\u5de5\u5177\u8c03\u7528\u5339\u914d\u7684 ToolMessages \u5e76\u8c03\u7528 <code>graph.invoke({'messages': [ToolMessage(...)]})</code>.   \u6ce8\u610f: \u8fd9\u5c06\u628a\u6d88\u606f\u8ffd\u52a0\u5230\u5386\u53f2\u8bb0\u5f55\u4e2d,\u5e76\u4ece START \u8282\u70b9\u8fd0\u884c\u56fe\u3002</p> </li> <li> <p>\u624b\u52a8\u66f4\u65b0\u72b6\u6001\u5e76\u4ece\u4e2d\u65ad\u5904\u6062\u590d\u56fe:</p> <pre><code>  1. \u4f7f\u7528 `graph.get_state(config)` \u4ece\u56fe\u72b6\u6001\u83b7\u53d6\u6700\u8fd1\u7684\u6d88\u606f\u5217\u8868\n  2. \u4fee\u6539\u6d88\u606f\u5217\u8868,\u8981\u4e48\u4ece AIMessages \u4e2d\u5220\u9664\u672a\u7b54\u590d\u7684\u5de5\u5177\u8c03\u7528\n</code></pre> </li> </ul> <p>\u6216\u6dfb\u52a0 tool_call_ids \u4e0e\u672a\u7b54\u590d\u7684\u5de5\u5177\u8c03\u7528\u5339\u914d\u7684 ToolMessages 3. \u4f7f\u7528\u4fee\u6539\u540e\u7684\u6d88\u606f\u5217\u8868\u8c03\u7528 <code>graph.update_state(config, {'messages': ...})</code> 4. \u6062\u590d\u56fe,\u4f8b\u5982\u8c03\u7528 <code>graph.invoke(None, config)</code></p> JavaScript <ul> <li> <p>\u63d0\u4f9b\u4e0e\u73b0\u6709\u5de5\u5177\u8c03\u7528\u5339\u914d\u7684 ToolMessages \u5e76\u8c03\u7528 <code>graph.invoke({messages: [new ToolMessage(...)]})</code>.   \u6ce8\u610f: \u8fd9\u5c06\u628a\u6d88\u606f\u8ffd\u52a0\u5230\u5386\u53f2\u8bb0\u5f55\u4e2d,\u5e76\u4ece START \u8282\u70b9\u8fd0\u884c\u56fe\u3002</p> </li> <li> <p>\u624b\u52a8\u66f4\u65b0\u72b6\u6001\u5e76\u4ece\u4e2d\u65ad\u5904\u6062\u590d\u56fe:</p> <pre><code>  1. \u4f7f\u7528 `graph.getState(config)` \u4ece\u56fe\u72b6\u6001\u83b7\u53d6\u6700\u8fd1\u7684\u6d88\u606f\u5217\u8868\n  2. \u4fee\u6539\u6d88\u606f\u5217\u8868,\u8981\u4e48\u4ece AIMessages \u4e2d\u5220\u9664\u672a\u7b54\u590d\u7684\u5de5\u5177\u8c03\u7528\n</code></pre> </li> </ul> <p>\u6216\u6dfb\u52a0 <code>toolCallId</code> \u4e0e\u672a\u7b54\u590d\u7684\u5de5\u5177\u8c03\u7528\u5339\u914d\u7684 ToolMessages 3. \u4f7f\u7528\u4fee\u6539\u540e\u7684\u6d88\u606f\u5217\u8868\u8c03\u7528 <code>graph.updateState(config, {messages: ...})</code> 4. \u6062\u590d\u56fe,\u4f8b\u5982\u8c03\u7528 <code>graph.invoke(null, config)</code></p>"},{"location":"troubleshooting/errors/INVALID_CONCURRENT_GRAPH_UPDATE/","title":"INVALID_CONCURRENT_GRAPH_UPDATE","text":"<p>LangGraph <code>StateGraph</code> \u4ece\u591a\u4e2a\u8282\u70b9\u63a5\u6536\u5230\u5bf9\u5176\u72b6\u6001\u7684\u5e76\u53d1\u66f4\u65b0,\u800c\u76f8\u5e94\u7684\u72b6\u6001\u5c5e\u6027\u4e0d\u652f\u6301\u6b64\u64cd\u4f5c\u3002</p> <p>\u5982\u679c\u4f60\u5728\u56fe\u4e2d\u4f7f\u7528\u6247\u51fa\u6216\u5176\u4ed6\u5e76\u884c\u6267\u884c,\u5e76\u4e14\u5b9a\u4e49\u4e86\u5982\u4e0b\u56fe,\u5c31\u53ef\u80fd\u4f1a\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5:</p> Python <pre><code>class State(TypedDict):\n    some_key: str\n\ndef node(state: State):\n    return {\"some_key\": \"some_string_value\"}\n\ndef other_node(state: State):\n    return {\"some_key\": \"some_string_value\"}\n\n\nbuilder = StateGraph(State)\nbuilder.add_node(node)\nbuilder.add_node(other_node)\nbuilder.add_edge(START, \"node\")\nbuilder.add_edge(START, \"other_node\")\ngraph = builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph, Annotation, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  someKey: z.string(),\n});\n\nconst builder = new StateGraph(State)\n  .addNode(\"node\", (state) =&gt; {\n    return { someKey: \"some_string_value\" };\n  })\n  .addNode(\"otherNode\", (state) =&gt; {\n    return { someKey: \"some_string_value\" };\n  })\n  .addEdge(START, \"node\")\n  .addEdge(START, \"otherNode\");\n\nconst graph = builder.compile();\n</code></pre> Python <p>\u5982\u679c\u4e0a\u9762\u56fe\u4e2d\u7684\u8282\u70b9\u8fd4\u56de <code>{ \"some_key\": \"some_string_value\" }</code>,\u8fd9\u5c06\u7528 <code>\"some_string_value\"</code> \u8986\u76d6 <code>\"some_key\"</code> \u7684\u72b6\u6001\u503c\u3002 \u4f46\u662f,\u5982\u679c\u5355\u4e2a\u6b65\u9aa4\u4e2d\u7684\u591a\u4e2a\u8282\u70b9(\u4f8b\u5982\u6247\u51fa\u4e2d\u7684\u8282\u70b9)\u8fd4\u56de <code>\"some_key\"</code> \u7684\u503c,\u56fe\u5c06\u629b\u51fa\u6b64\u9519\u8bef,\u56e0\u4e3a \u5982\u4f55\u66f4\u65b0\u5185\u90e8\u72b6\u6001\u5b58\u5728\u4e0d\u786e\u5b9a\u6027\u3002</p> JavaScript <p>\u5982\u679c\u4e0a\u9762\u56fe\u4e2d\u7684\u8282\u70b9\u8fd4\u56de <code>{ someKey: \"some_string_value\" }</code>,\u8fd9\u5c06\u7528 <code>\"some_string_value\"</code> \u8986\u76d6 <code>someKey</code> \u7684\u72b6\u6001\u503c\u3002 \u4f46\u662f,\u5982\u679c\u5355\u4e2a\u6b65\u9aa4\u4e2d\u7684\u591a\u4e2a\u8282\u70b9(\u4f8b\u5982\u6247\u51fa\u4e2d\u7684\u8282\u70b9)\u8fd4\u56de <code>someKey</code> \u7684\u503c,\u56fe\u5c06\u629b\u51fa\u6b64\u9519\u8bef,\u56e0\u4e3a \u5982\u4f55\u66f4\u65b0\u5185\u90e8\u72b6\u6001\u5b58\u5728\u4e0d\u786e\u5b9a\u6027\u3002</p> <p>\u8981\u89e3\u51b3\u6b64\u95ee\u9898,\u4f60\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u7ec4\u5408\u591a\u4e2a\u503c\u7684\u5f52\u7ea6\u5668:</p> Python <pre><code>import operator\nfrom typing import Annotated\n\nclass State(TypedDict):\n    # The operator.add reducer fn makes this append-only\n    some_key: Annotated[list, operator.add]\n</code></pre> JavaScript <pre><code>import { withLangGraph } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  someKey: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (existing, update) =&gt; existing.concat(update),\n    },\n    default: () =&gt; [],\n  }),\n});\n</code></pre> <p>\u8fd9\u5c06\u5141\u8bb8\u4f60\u5b9a\u4e49\u903b\u8f91\u6765\u5904\u7406\u4ece\u5e76\u884c\u6267\u884c\u7684\u591a\u4e2a\u8282\u70b9\u8fd4\u56de\u7684\u76f8\u540c\u952e\u3002</p>"},{"location":"troubleshooting/errors/INVALID_CONCURRENT_GRAPH_UPDATE/#_1","title":"\u95ee\u9898\u6392\u67e5","text":"<p>\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u51b3\u6b64\u9519\u8bef:</p> <ul> <li>\u5982\u679c\u4f60\u7684\u56fe\u5e76\u884c\u6267\u884c\u8282\u70b9,\u8bf7\u786e\u4fdd\u4f60\u5df2\u7ecf\u4f7f\u7528\u5f52\u7ea6\u5668\u5b9a\u4e49\u4e86\u76f8\u5173\u7684\u72b6\u6001\u952e\u3002</li> </ul>"},{"location":"troubleshooting/errors/INVALID_GRAPH_NODE_RETURN_VALUE/","title":"INVALID_GRAPH_NODE_RETURN_VALUE","text":"Python <p>LangGraph <code>StateGraph</code> \u4ece\u8282\u70b9\u63a5\u6536\u5230\u4e86\u975e\u5b57\u5178\u8fd4\u56de\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b:</p> <pre><code>class State(TypedDict):\n    some_key: str\n\ndef bad_node(state: State):\n    # \u5e94\u8be5\u8fd4\u56de\u4e00\u4e2a\u5305\u542b \"some_key\" \u503c\u7684\u5b57\u5178,\u800c\u4e0d\u662f\u5217\u8868\n    return [\"whoops\"]\n\nbuilder = StateGraph(State)\nbuilder.add_node(bad_node)\n...\n\ngraph = builder.compile()\n</code></pre> <p>\u8c03\u7528\u4e0a\u8ff0\u56fe\u5c06\u5bfc\u81f4\u5982\u4e0b\u9519\u8bef:</p> <pre><code>graph.invoke({ \"some_key\": \"someval\" });\n</code></pre> <pre><code>InvalidUpdateError: Expected dict, got ['whoops']\nFor troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/INVALID_GRAPH_NODE_RETURN_VALUE\n</code></pre> <p>\u56fe\u4e2d\u7684\u8282\u70b9\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u72b6\u6001\u4e2d\u5b9a\u4e49\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u952e\u7684\u5b57\u5178\u3002</p> JavaScript <p>LangGraph <code>StateGraph</code> \u4ece\u8282\u70b9\u63a5\u6536\u5230\u4e86\u975e\u5bf9\u8c61\u8fd4\u56de\u7c7b\u578b\u3002\u4ee5\u4e0b\u662f\u4e00\u4e2a\u793a\u4f8b:</p> <pre><code>import { z } from \"zod\";\nimport { StateGraph } from \"@langchain/langgraph\";\n\nconst State = z.object({\n  someKey: z.string(),\n});\n\nconst badNode = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // \u5e94\u8be5\u8fd4\u56de\u4e00\u4e2a\u5305\u542b \"someKey\" \u503c\u7684\u5bf9\u8c61,\u800c\u4e0d\u662f\u6570\u7ec4\n  return [\"whoops\"];\n};\n\nconst builder = new StateGraph(State).addNode(\"badNode\", badNode);\n// ...\n\nconst graph = builder.compile();\n</code></pre> <p>\u8c03\u7528\u4e0a\u8ff0\u56fe\u5c06\u5bfc\u81f4\u5982\u4e0b\u9519\u8bef:</p> <pre><code>await graph.invoke({ someKey: \"someval\" });\n</code></pre> <pre><code>InvalidUpdateError: Expected object, got ['whoops']\nFor troubleshooting, visit: https://langchain-ai.github.io/langgraphjs/troubleshooting/errors/INVALID_GRAPH_NODE_RETURN_VALUE\n</code></pre> <p>\u56fe\u4e2d\u7684\u8282\u70b9\u5fc5\u987b\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u72b6\u6001\u4e2d\u5b9a\u4e49\u7684\u4e00\u4e2a\u6216\u591a\u4e2a\u952e\u7684\u5bf9\u8c61\u3002</p>"},{"location":"troubleshooting/errors/INVALID_GRAPH_NODE_RETURN_VALUE/#_1","title":"\u95ee\u9898\u6392\u67e5","text":"<p>\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u51b3\u6b64\u9519\u8bef:</p> Python <ul> <li>\u5982\u679c\u4f60\u7684\u8282\u70b9\u4e2d\u6709\u590d\u6742\u7684\u903b\u8f91,\u8bf7\u786e\u4fdd\u6240\u6709\u4ee3\u7801\u8def\u5f84\u90fd\u4e3a\u4f60\u5b9a\u4e49\u7684\u72b6\u6001\u8fd4\u56de\u9002\u5f53\u7684\u5b57\u5178\u3002</li> </ul> JavaScript <ul> <li>\u5982\u679c\u4f60\u7684\u8282\u70b9\u4e2d\u6709\u590d\u6742\u7684\u903b\u8f91,\u8bf7\u786e\u4fdd\u6240\u6709\u4ee3\u7801\u8def\u5f84\u90fd\u4e3a\u4f60\u5b9a\u4e49\u7684\u72b6\u6001\u8fd4\u56de\u9002\u5f53\u7684\u5bf9\u8c61\u3002</li> </ul>"},{"location":"troubleshooting/errors/INVALID_LICENSE/","title":"INVALID_LICENSE","text":"<p>\u5728\u5c1d\u8bd5\u542f\u52a8\u81ea\u6258\u7ba1\u7684 LangGraph Platform \u670d\u52a1\u5668\u65f6,\u5982\u679c\u8bb8\u53ef\u8bc1\u9a8c\u8bc1\u5931\u8d25,\u5c31\u4f1a\u629b\u51fa\u6b64\u9519\u8bef\u3002\u6b64\u9519\u8bef\u7279\u5b9a\u4e8e LangGraph Platform,\u4e0e\u5f00\u6e90\u5e93\u65e0\u5173\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#_1","title":"\u53d1\u751f\u65f6\u673a","text":"<p>\u5728\u6ca1\u6709\u6709\u6548\u7684\u4f01\u4e1a\u8bb8\u53ef\u8bc1\u6216 API \u5bc6\u94a5\u7684\u60c5\u51b5\u4e0b\u8fd0\u884c LangGraph Platform \u7684\u81ea\u6258\u7ba1\u90e8\u7f72\u65f6,\u4f1a\u51fa\u73b0\u6b64\u9519\u8bef\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#_2","title":"\u95ee\u9898\u6392\u67e5","text":""},{"location":"troubleshooting/errors/INVALID_LICENSE/#_3","title":"\u786e\u8ba4\u90e8\u7f72\u7c7b\u578b","text":"<p>\u9996\u5148,\u786e\u8ba4\u6240\u9700\u7684\u90e8\u7f72\u6a21\u5f0f\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#_4","title":"\u7528\u4e8e\u672c\u5730\u5f00\u53d1","text":"<p>\u5982\u679c\u4f60\u53ea\u662f\u5728\u672c\u5730\u5f00\u53d1,\u53ef\u4ee5\u901a\u8fc7\u8fd0\u884c <code>langgraph dev</code> \u4f7f\u7528\u8f7b\u91cf\u7ea7\u7684\u5185\u5b58\u670d\u52a1\u5668\u3002 \u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u672c\u5730\u670d\u52a1\u5668\u6587\u6863\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#langgraph-platform","title":"\u7528\u4e8e\u6258\u7ba1\u7684 LangGraph Platform","text":"<p>\u5982\u679c\u4f60\u60f3\u8981\u5feb\u901f\u7684\u6258\u7ba1\u73af\u5883,\u8bf7\u8003\u8651\u4e91 SaaS\u90e8\u7f72\u9009\u9879\u3002\u8fd9\u4e0d\u9700\u8981\u989d\u5916\u7684\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#_5","title":"\u7528\u4e8e\u72ec\u7acb\u5bb9\u5668","text":"<p>\u5bf9\u4e8e\u81ea\u6258\u7ba1,\u8bf7\u8bbe\u7f6e <code>LANGGRAPH_CLOUD_LICENSE_KEY</code> \u73af\u5883\u53d8\u91cf\u3002\u5982\u679c\u4f60\u5bf9\u4f01\u4e1a\u8bb8\u53ef\u8bc1\u5bc6\u94a5\u611f\u5174\u8da3,\u8bf7\u8054\u7cfb LangChain \u652f\u6301\u56e2\u961f\u3002</p> <p>\u6709\u5173\u90e8\u7f72\u9009\u9879\u53ca\u5176\u529f\u80fd\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u90e8\u7f72\u9009\u9879\u6587\u6863\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#_6","title":"\u786e\u8ba4\u51ed\u8bc1","text":"<p>\u5982\u679c\u4f60\u5df2\u786e\u8ba4\u8981\u81ea\u6258\u7ba1 LangGraph Platform,\u8bf7\u9a8c\u8bc1\u4f60\u7684\u51ed\u8bc1\u3002</p>"},{"location":"troubleshooting/errors/INVALID_LICENSE/#_7","title":"\u7528\u4e8e\u72ec\u7acb\u5bb9\u5668","text":"<ol> <li>\u786e\u8ba4\u4f60\u5df2\u5728\u90e8\u7f72\u73af\u5883\u6216 <code>.env</code> \u6587\u4ef6\u4e2d\u63d0\u4f9b\u4e86\u6709\u6548\u7684 <code>LANGGRAPH_CLOUD_LICENSE_KEY</code> \u73af\u5883\u53d8\u91cf</li> <li>\u786e\u8ba4\u5bc6\u94a5\u4ecd\u7136\u6709\u6548\u4e14\u5c1a\u672a\u8d85\u8fc7\u5176\u5230\u671f\u65e5\u671f</li> </ol>"},{"location":"troubleshooting/errors/MULTIPLE_SUBGRAPHS/","title":"MULTIPLE_SUBGRAPHS","text":"<p>\u4f60\u5728\u5355\u4e2a LangGraph \u8282\u70b9\u4e2d\u591a\u6b21\u8c03\u7528\u5b50\u56fe,\u5e76\u4e14\u6bcf\u4e2a\u5b50\u56fe\u90fd\u542f\u7528\u4e86\u68c0\u67e5\u70b9\u3002</p> <p>\u7531\u4e8e\u5b50\u56fe\u68c0\u67e5\u70b9\u547d\u540d\u7a7a\u95f4\u5de5\u4f5c\u65b9\u5f0f\u7684\u5185\u90e8\u9650\u5236,\u76ee\u524d\u4e0d\u5141\u8bb8\u8fd9\u6837\u505a\u3002</p>"},{"location":"troubleshooting/errors/MULTIPLE_SUBGRAPHS/#_1","title":"\u95ee\u9898\u6392\u67e5","text":"<p>\u4ee5\u4e0b\u65b9\u6cd5\u53ef\u80fd\u6709\u52a9\u4e8e\u89e3\u51b3\u6b64\u9519\u8bef:</p> Python <ul> <li>\u5982\u679c\u4f60\u4e0d\u9700\u8981\u4ece\u5b50\u56fe\u4e2d\u65ad/\u6062\u590d,\u5728\u7f16\u8bd1\u65f6\u4f20\u9012 <code>checkpointer=False</code>,\u5982\u4e0b\u6240\u793a: <code>.compile(checkpointer=False)</code></li> </ul> JavaScript <ul> <li> <p>\u5982\u679c\u4f60\u4e0d\u9700\u8981\u4ece\u5b50\u56fe\u4e2d\u65ad/\u6062\u590d,\u5728\u7f16\u8bd1\u65f6\u4f20\u9012 <code>checkpointer: false</code>,\u5982\u4e0b\u6240\u793a: <code>.compile({ checkpointer: false })</code></p> </li> <li> <p>\u4e0d\u8981\u5728\u540c\u4e00\u4e2a\u8282\u70b9\u4e2d\u547d\u4ee4\u5f0f\u5730\u591a\u6b21\u8c03\u7528\u56fe,\u800c\u662f\u4f7f\u7528 <code>Send</code> API\u3002</p> </li> </ul>"},{"location":"tutorials/","title":"\u6559\u7a0b","text":"<p>\u672c\u8282\u63d0\u4f9b\u5faa\u5e8f\u6e10\u8fdb\u7684\u6559\u7a0b\uff0c\u5e2e\u52a9\u4f60\u5b66\u4e60 LangGraph \u7684\u6838\u5fc3\u529f\u80fd\u3002</p>"},{"location":"tutorials/#_2","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u901a\u8fc7\u8fd9\u4e2a\u516d\u90e8\u5206\u7cfb\u5217\u6559\u7a0b\uff0c\u5b66\u4e60 LangGraph \u7684\u57fa\u7840\u77e5\u8bc6\uff1a</p> <ol> <li>\u6784\u5efa\u57fa\u7840\u804a\u5929\u673a\u5668\u4eba\uff1a\u521b\u5efa\u4e00\u4e2a\u7b80\u5355\u7684\u804a\u5929\u673a\u5668\u4eba</li> <li>\u6dfb\u52a0\u5de5\u5177\uff1a\u8ba9\u804a\u5929\u673a\u5668\u4eba\u80fd\u591f\u8c03\u7528\u5916\u90e8\u5de5\u5177</li> <li>\u6dfb\u52a0\u8bb0\u5fc6\uff1a\u8ba9\u804a\u5929\u673a\u5668\u4eba\u8bb0\u4f4f\u5bf9\u8bdd\u5386\u53f2</li> <li>\u4eba\u673a\u534f\u540c\uff1a\u6dfb\u52a0\u4eba\u5de5\u5ba1\u6838\u548c\u5e72\u9884</li> <li>\u81ea\u5b9a\u4e49\u72b6\u6001\uff1a\u81ea\u5b9a\u4e49\u56fe\u7684\u72b6\u6001\u7ed3\u6784</li> <li>\u65f6\u95f4\u65c5\u884c\uff1a\u56de\u6eaf\u548c\u4fee\u6539\u6267\u884c\u5386\u53f2</li> </ol>"},{"location":"tutorials/#_3","title":"\u591a\u667a\u80fd\u4f53\u7cfb\u7edf","text":"<ul> <li>\u667a\u80fd\u4ee3\u7406\u76d1\u7763\u8005\uff1a\u6784\u5efa\u667a\u80fd\u4ee3\u7406\u56e2\u961f\u548c\u76d1\u7763\u8005</li> </ul>"},{"location":"tutorials/#rag","title":"RAG\uff08\u68c0\u7d22\u589e\u5f3a\u751f\u6210\uff09","text":"<ul> <li>\u667a\u80fd\u4ee3\u7406 RAG\uff1a\u6784\u5efa\u5177\u6709\u68c0\u7d22\u80fd\u529b\u7684\u667a\u80fd\u4ee3\u7406</li> </ul>"},{"location":"tutorials/#sql","title":"SQL \u667a\u80fd\u4ee3\u7406","text":"<ul> <li>SQL \u667a\u80fd\u4ee3\u7406\uff1a\u6784\u5efa\u80fd\u591f\u67e5\u8be2\u6570\u636e\u5e93\u7684\u667a\u80fd\u4ee3\u7406</li> </ul>"},{"location":"tutorials/#_4","title":"\u8ba4\u8bc1","text":"<ul> <li>\u8ba4\u8bc1\u5165\u95e8\uff1a\u5b9e\u73b0\u57fa\u672c\u7684\u8eab\u4efd\u9a8c\u8bc1</li> <li>\u8d44\u6e90\u6388\u6743\uff1a\u914d\u7f6e\u8d44\u6e90\u7ea7\u522b\u7684\u8bbf\u95ee\u63a7\u5236</li> <li>\u6dfb\u52a0\u8ba4\u8bc1\u670d\u52a1\u5668\uff1a\u96c6\u6210\u81ea\u5b9a\u4e49\u8ba4\u8bc1\u670d\u52a1\u5668</li> </ul>"},{"location":"tutorials/#langgraph","title":"LangGraph \u5e73\u53f0","text":"<ul> <li>\u672c\u5730\u670d\u52a1\u5668\uff1a\u5728\u672c\u5730\u8fd0\u884c LangGraph \u670d\u52a1\u5668</li> </ul>"},{"location":"tutorials/#_5","title":"\u5de5\u4f5c\u6d41\u6a21\u5f0f","text":"<ul> <li>\u5de5\u4f5c\u6d41\u6a21\u5f0f\uff1a\u5e38\u89c1\u7684\u5de5\u4f5c\u6d41\u8bbe\u8ba1\u6a21\u5f0f</li> </ul>"},{"location":"tutorials/workflows/","title":"\u5de5\u4f5c\u6d41\u548c\u667a\u80fd\u4f53","text":"<p>\u672c\u6307\u5357\u56de\u987e\u4e86\u667a\u80fd\u4f53\u7cfb\u7edf\u7684\u5e38\u89c1\u6a21\u5f0f\u3002\u5728\u63cf\u8ff0\u8fd9\u4e9b\u7cfb\u7edf\u65f6,\u533a\u5206\"\u5de5\u4f5c\u6d41\"\u548c\"\u667a\u80fd\u4f53\"\u662f\u5f88\u6709\u7528\u7684\u3002Anthropic \u7684 <code>Building Effective Agents</code> \u535a\u5ba2\u6587\u7ae0\u5f88\u597d\u5730\u89e3\u91ca\u4e86\u8fd9\u79cd\u533a\u522b:</p> <p>\u5de5\u4f5c\u6d41\u662f\u901a\u8fc7\u9884\u5b9a\u4e49\u4ee3\u7801\u8def\u5f84\u7f16\u6392 LLM \u548c\u5de5\u5177\u7684\u7cfb\u7edf\u3002 \u53e6\u4e00\u65b9\u9762,\u667a\u80fd\u4f53\u662f LLM \u52a8\u6001\u6307\u5bfc\u81ea\u5df1\u7684\u8fc7\u7a0b\u548c\u5de5\u5177\u4f7f\u7528\u7684\u7cfb\u7edf,\u4fdd\u6301\u5bf9\u5982\u4f55\u5b8c\u6210\u4efb\u52a1\u7684\u63a7\u5236\u3002</p> <p>\u4ee5\u4e0b\u662f\u53ef\u89c6\u5316\u8fd9\u4e9b\u5dee\u5f02\u7684\u7b80\u5355\u65b9\u6cd5:</p> <p></p> <p>\u5728\u6784\u5efa\u667a\u80fd\u4f53\u548c\u5de5\u4f5c\u6d41\u65f6,LangGraph \u63d0\u4f9b\u4e86\u8bb8\u591a\u597d\u5904,\u5305\u62ec\u6301\u4e45\u5316\u3001\u6d41\u5f0f\u5904\u7406\u4ee5\u53ca\u5bf9\u8c03\u8bd5\u548c\u90e8\u7f72\u7684\u652f\u6301\u3002</p>","boost":2},{"location":"tutorials/workflows/#_2","title":"\u8bbe\u7f6e","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u804a\u5929\u6a21\u578b,\u53ea\u8981\u5b83\u652f\u6301\u7ed3\u6784\u5316\u8f93\u51fa\u548c\u5de5\u5177\u8c03\u7528\u3002\u4e0b\u9762\u5c55\u793a\u4e86\u5b89\u88c5\u5305\u3001\u8bbe\u7f6e API \u5bc6\u94a5\u4ee5\u53ca\u6d4b\u8bd5 Anthropic \u7684\u7ed3\u6784\u5316\u8f93\u51fa/\u5de5\u5177\u8c03\u7528\u7684\u8fc7\u7a0b\u3002</p> \u5b89\u88c5\u4f9d\u8d56\u9879 <pre><code>pip install langchain_core langchain-anthropic langgraph\n</code></pre> <p>\u521d\u59cb\u5316\u4e00\u4e2a LLM</p> <pre><code>import os\nimport getpass\n\nfrom langchain_anthropic import ChatAnthropic\n\ndef _set_env(var: str):\n    if not os.environ.get(var):\n        os.environ[var] = getpass.getpass(f\"{var}: \")\n\n\n_set_env(\"ANTHROPIC_API_KEY\")\n\nllm = ChatAnthropic(model=\"claude-3-5-sonnet-latest\")\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u804a\u5929\u6a21\u578b,\u53ea\u8981\u5b83\u652f\u6301\u7ed3\u6784\u5316\u8f93\u51fa\u548c\u5de5\u5177\u8c03\u7528\u3002\u4e0b\u9762\u5c55\u793a\u4e86\u5b89\u88c5\u5305\u3001\u8bbe\u7f6e API \u5bc6\u94a5\u4ee5\u53ca\u6d4b\u8bd5 Anthropic \u7684\u7ed3\u6784\u5316\u8f93\u51fa/\u5de5\u5177\u8c03\u7528\u7684\u8fc7\u7a0b\u3002</p> \u5b89\u88c5\u4f9d\u8d56\u9879 <pre><code>npm install @langchain/core @langchain/anthropic @langchain/langgraph\n</code></pre> <p>\u521d\u59cb\u5316\u4e00\u4e2a LLM</p> <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\n\nprocess.env.ANTHROPIC_API_KEY = \"YOUR_API_KEY\";\n\nconst llm = new ChatAnthropic({ model: \"claude-3-5-sonnet-latest\" });\n</code></pre>","boost":2},{"location":"tutorials/workflows/#llm","title":"\u6784\u5efa\u5757:\u589e\u5f3a\u7684 LLM","text":"<p>LLM \u5177\u6709\u652f\u6301\u6784\u5efa\u5de5\u4f5c\u6d41\u548c\u667a\u80fd\u4f53\u7684\u589e\u5f3a\u529f\u80fd\u3002\u8fd9\u4e9b\u529f\u80fd\u5305\u62ec\u7ed3\u6784\u5316\u8f93\u51fa\u548c\u5de5\u5177\u8c03\u7528,\u5982 Anthropic \u5173\u4e8e <code>Building Effective Agents</code> \u7684\u535a\u5ba2\u4e2d\u7684\u8fd9\u5f20\u56fe\u6240\u793a:</p> <p></p> Python <pre><code># \u7ed3\u6784\u5316\u8f93\u51fa\u7684 Schema\nfrom pydantic import BaseModel, Field\n\nclass SearchQuery(BaseModel):\n    search_query: str = Field(None, description=\"Query that is optimized web search.\")\n    justification: str = Field(\n        None, description=\"Why this query is relevant to the user's request.\"\n    )\n\n\n# \u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u51fa\u7684 schema \u589e\u5f3a LLM\nstructured_llm = llm.with_structured_output(SearchQuery)\n\n# \u8c03\u7528\u589e\u5f3a\u7684 LLM\noutput = structured_llm.invoke(\"How does Calcium CT score relate to high cholesterol?\")\n\n# \u5b9a\u4e49\u5de5\u5177\ndef multiply(a: int, b: int) -&gt; int:\n    return a * b\n\n# \u4f7f\u7528\u5de5\u5177\u589e\u5f3a LLM\nllm_with_tools = llm.bind_tools([multiply])\n\n# \u4f7f\u7528\u89e6\u53d1\u5de5\u5177\u8c03\u7528\u7684\u8f93\u5165\u8c03\u7528 LLM\nmsg = llm_with_tools.invoke(\"What is 2 times 3?\")\n\n# \u83b7\u53d6\u5de5\u5177\u8c03\u7528\nmsg.tool_calls\n</code></pre> JavaScript <pre><code>import { z } from \"zod\";\nimport { tool } from \"@langchain/core/tools\";\n\n// \u7ed3\u6784\u5316\u8f93\u51fa\u7684 Schema\nconst SearchQuery = z.object({\n  search_query: z.string().describe(\"Query that is optimized web search.\"),\n  justification: z\n    .string()\n    .describe(\"Why this query is relevant to the user's request.\"),\n});\n\n// \u4f7f\u7528\u7ed3\u6784\u5316\u8f93\u51fa\u7684 schema \u589e\u5f3a LLM\nconst structuredLlm = llm.withStructuredOutput(SearchQuery);\n\n// \u8c03\u7528\u589e\u5f3a\u7684 LLM\nconst output = await structuredLlm.invoke(\n  \"How does Calcium CT score relate to high cholesterol?\"\n);\n\n// \u5b9a\u4e49\u5de5\u5177\nconst multiply = tool(\n  async ({ a, b }: { a: number; b: number }) =&gt; {\n    return a * b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply two numbers\",\n    schema: z.object({\n      a: z.number(),\n      b: z.number(),\n    }),\n  }\n);\n\n// \u4f7f\u7528\u5de5\u5177\u589e\u5f3a LLM\nconst llmWithTools = llm.bindTools([multiply]);\n\n// \u4f7f\u7528\u89e6\u53d1\u5de5\u5177\u8c03\u7528\u7684\u8f93\u5165\u8c03\u7528 LLM\nconst msg = await llmWithTools.invoke(\"What is 2 times 3?\");\n\n// \u83b7\u53d6\u5de5\u5177\u8c03\u7528\nconsole.log(msg.tool_calls);\n</code></pre>","boost":2},{"location":"tutorials/workflows/#_3","title":"\u63d0\u793a\u8bcd\u94fe\u5f0f\u8c03\u7528","text":"<p>\u5728\u63d0\u793a\u8bcd\u94fe\u5f0f\u8c03\u7528\u4e2d,\u6bcf\u4e2a LLM \u8c03\u7528\u90fd\u5904\u7406\u524d\u4e00\u4e2a\u8c03\u7528\u7684\u8f93\u51fa\u3002</p> <p>\u5982 Anthropic \u5173\u4e8e <code>Building Effective Agents</code> \u7684\u535a\u5ba2\u4e2d\u6240\u8ff0:</p> <p>\u63d0\u793a\u8bcd\u94fe\u5f0f\u8c03\u7528\u5c06\u4efb\u52a1\u5206\u89e3\u4e3a\u4e00\u7cfb\u5217\u6b65\u9aa4,\u5176\u4e2d\u6bcf\u4e2a LLM \u8c03\u7528\u5904\u7406\u524d\u4e00\u4e2a\u8c03\u7528\u7684\u8f93\u51fa\u3002\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u4e2d\u95f4\u6b65\u9aa4\u6dfb\u52a0\u7a0b\u5e8f\u6027\u68c0\u67e5(\u89c1\u4e0b\u56fe\u4e2d\u7684\"gate\"),\u4ee5\u786e\u4fdd\u8fc7\u7a0b\u4ecd\u5728\u6b63\u8f68\u4e0a\u3002</p> <p>\u4f55\u65f6\u4f7f\u7528\u6b64\u5de5\u4f5c\u6d41:\u6b64\u5de5\u4f5c\u6d41\u975e\u5e38\u9002\u5408\u4efb\u52a1\u53ef\u4ee5\u8f7b\u677e\u4e14\u6e05\u6670\u5730\u5206\u89e3\u4e3a\u56fa\u5b9a\u5b50\u4efb\u52a1\u7684\u60c5\u51b5\u3002\u4e3b\u8981\u76ee\u6807\u662f\u901a\u8fc7\u4f7f\u6bcf\u4e2a LLM \u8c03\u7528\u6210\u4e3a\u66f4\u7b80\u5355\u7684\u4efb\u52a1\u6765\u6743\u8861\u5ef6\u8fdf\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7684\u51c6\u786e\u6027\u3002</p> <p></p> Graph APIFunctional API Python <pre><code>from typing_extensions import TypedDict\nfrom langgraph.graph import StateGraph, START, END\nfrom IPython.display import Image, display\n\n\n# Graph state\nclass State(TypedDict):\n    topic: str\n    joke: str\n    improved_joke: str\n    final_joke: str\n\n\n# Nodes\ndef generate_joke(state: State):\n    \"\"\"First LLM call to generate initial joke\"\"\"\n\n    msg = llm.invoke(f\"Write a short joke about {state['topic']}\")\n    return {\"joke\": msg.content}\n\n\ndef check_punchline(state: State):\n    \"\"\"Gate function to check if the joke has a punchline\"\"\"\n\n    # Simple check - does the joke contain \"?\" or \"!\"\n    if \"?\" in state[\"joke\"] or \"!\" in state[\"joke\"]:\n        return \"Pass\"\n    return \"Fail\"\n\n\ndef improve_joke(state: State):\n    \"\"\"Second LLM call to improve the joke\"\"\"\n\n    msg = llm.invoke(f\"Make this joke funnier by adding wordplay: {state['joke']}\")\n    return {\"improved_joke\": msg.content}\n\n\ndef polish_joke(state: State):\n    \"\"\"Third LLM call for final polish\"\"\"\n\n    msg = llm.invoke(f\"Add a surprising twist to this joke: {state['improved_joke']}\")\n    return {\"final_joke\": msg.content}\n\n\n# Build workflow\nworkflow = StateGraph(State)\n\n# Add nodes\nworkflow.add_node(\"generate_joke\", generate_joke)\nworkflow.add_node(\"improve_joke\", improve_joke)\nworkflow.add_node(\"polish_joke\", polish_joke)\n\n# Add edges to connect nodes\nworkflow.add_edge(START, \"generate_joke\")\nworkflow.add_conditional_edges(\n    \"generate_joke\", check_punchline, {\"Fail\": \"improve_joke\", \"Pass\": END}\n)\nworkflow.add_edge(\"improve_joke\", \"polish_joke\")\nworkflow.add_edge(\"polish_joke\", END)\n\n# Compile\nchain = workflow.compile()\n\n# Show workflow\ndisplay(Image(chain.get_graph().draw_mermaid_png()))\n\n# Invoke\nstate = chain.invoke({\"topic\": \"cats\"})\nprint(\"Initial joke:\")\nprint(state[\"joke\"])\nprint(\"\\n--- --- ---\\n\")\nif \"improved_joke\" in state:\n    print(\"Improved joke:\")\n    print(state[\"improved_joke\"])\n    print(\"\\n--- --- ---\\n\")\n\n    print(\"Final joke:\")\n    print(state[\"final_joke\"])\nelse:\n    print(\"Joke failed quality gate - no punchline detected!\")\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/a0281fca-3a71-46de-beee-791468607b75/r</p> <p>\u8d44\u6e90:</p> <p>LangChain Academy</p> <p>\u8bf7\u53c2\u9605\u6211\u4eec\u5173\u4e8e\u63d0\u793a\u8bcd\u94fe\u5f0f\u8c03\u7528\u7684\u8bfe\u7a0b\u6b64\u5904\u3002</p> JavaScript <pre><code>import { StateGraph, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\n// Graph state\nconst State = z.object({\n  topic: z.string(),\n  joke: z.string().optional(),\n  improved_joke: z.string().optional(),\n  final_joke: z.string().optional(),\n});\n\n// Nodes\nconst generateJoke = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // First LLM call to generate initial joke\n  const msg = await llm.invoke(`Write a short joke about ${state.topic}`);\n  return { joke: msg.content };\n};\n\nconst checkPunchline = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Gate function to check if the joke has a punchline\n  // Simple check - does the joke contain \"?\" or \"!\"\n  if (state.joke &amp;&amp; (state.joke.includes(\"?\") || state.joke.includes(\"!\"))) {\n    return \"Pass\";\n  }\n  return \"Fail\";\n};\n\nconst improveJoke = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Second LLM call to improve the joke\n  const msg = await llm.invoke(`Make this joke funnier by adding wordplay: ${state.joke}`);\n  return { improved_joke: msg.content };\n};\n\nconst polishJoke = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Third LLM call for final polish\n  const msg = await llm.invoke(`Add a surprising twist to this joke: ${state.improved_joke}`);\n  return { final_joke: msg.content };\n};\n\n// Build workflow\nconst workflow = new StateGraph(State)\n  .addNode(\"generate_joke\", generateJoke)\n  .addNode(\"improve_joke\", improveJoke)\n  .addNode(\"polish_joke\", polishJoke)\n  .addEdge(START, \"generate_joke\")\n  .addConditionalEdges(\n    \"generate_joke\",\n    checkPunchline,\n    { \"Fail\": \"improve_joke\", \"Pass\": END }\n  )\n  .addEdge(\"improve_joke\", \"polish_joke\")\n  .addEdge(\"polish_joke\", END);\n\n// Compile\nconst chain = workflow.compile();\n\n// Show workflow\nimport * as fs from \"node:fs/promises\";\nconst drawableGraph = await chain.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\nawait fs.writeFile(\"workflow.png\", imageBuffer);\n\n// Invoke\nconst state = await chain.invoke({ topic: \"cats\" });\nconsole.log(\"Initial joke:\");\nconsole.log(state.joke);\nconsole.log(\"\\n--- --- ---\\n\");\nif (state.improved_joke) {\n  console.log(\"Improved joke:\");\n  console.log(state.improved_joke);\n  console.log(\"\\n--- --- ---\\n\");\n\n  console.log(\"Final joke:\");\n  console.log(state.final_joke);\n} else {\n  console.log(\"Joke failed quality gate - no punchline detected!\");\n}\n</code></pre> Python <pre><code>from langgraph.func import entrypoint, task\n\n\n# Tasks\n@task\ndef generate_joke(topic: str):\n    \"\"\"First LLM call to generate initial joke\"\"\"\n    msg = llm.invoke(f\"Write a short joke about {topic}\")\n    return msg.content\n\n\ndef check_punchline(joke: str):\n    \"\"\"Gate function to check if the joke has a punchline\"\"\"\n    # Simple check - does the joke contain \"?\" or \"!\"\n    if \"?\" in joke or \"!\" in joke:\n        return \"Fail\"\n\n    return \"Pass\"\n\n\n@task\ndef improve_joke(joke: str):\n    \"\"\"Second LLM call to improve the joke\"\"\"\n    msg = llm.invoke(f\"Make this joke funnier by adding wordplay: {joke}\")\n    return msg.content\n\n\n@task\ndef polish_joke(joke: str):\n    \"\"\"Third LLM call for final polish\"\"\"\n    msg = llm.invoke(f\"Add a surprising twist to this joke: {joke}\")\n    return msg.content\n\n\n@entrypoint()\ndef prompt_chaining_workflow(topic: str):\n    original_joke = generate_joke(topic).result()\n    if check_punchline(original_joke) == \"Pass\":\n        return original_joke\n\n    improved_joke = improve_joke(original_joke).result()\n    return polish_joke(improved_joke).result()\n\n# Invoke\nfor step in prompt_chaining_workflow.stream(\"cats\", stream_mode=\"updates\"):\n    print(step)\n    print(\"\\n\")\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/332fa4fc-b6ca-416e-baa3-161625e69163/r</p> JavaScript <pre><code>import { entrypoint, task } from \"@langchain/langgraph\";\n\n// Tasks\nconst generateJoke = task(\"generate_joke\", async (topic: string) =&gt; {\n  // First LLM call to generate initial joke\n  const msg = await llm.invoke(`Write a short joke about ${topic}`);\n  return msg.content;\n});\n\nconst checkPunchline = (joke: string) =&gt; {\n  // Gate function to check if the joke has a punchline\n  // Simple check - does the joke contain \"?\" or \"!\"\n  if (joke.includes(\"?\") || joke.includes(\"!\")) {\n    return \"Pass\";\n  }\n  return \"Fail\";\n};\n\nconst improveJoke = task(\"improve_joke\", async (joke: string) =&gt; {\n  // Second LLM call to improve the joke\n  const msg = await llm.invoke(`Make this joke funnier by adding wordplay: ${joke}`);\n  return msg.content;\n});\n\nconst polishJoke = task(\"polish_joke\", async (joke: string) =&gt; {\n  // Third LLM call for final polish\n  const msg = await llm.invoke(`Add a surprising twist to this joke: ${joke}`);\n  return msg.content;\n});\n\nconst promptChainingWorkflow = entrypoint(\"promptChainingWorkflow\", async (topic: string) =&gt; {\n  const originalJoke = await generateJoke(topic);\n  if (checkPunchline(originalJoke) === \"Pass\") {\n    return originalJoke;\n  }\n\n  const improvedJoke = await improveJoke(originalJoke);\n  return await polishJoke(improvedJoke);\n});\n\n// Invoke\nconst stream = await promptChainingWorkflow.stream(\"cats\", { streamMode: \"updates\" });\nfor await (const step of stream) {\n  console.log(step);\n  console.log(\"\\n\");\n}\n</code></pre>","boost":2},{"location":"tutorials/workflows/#_4","title":"\u5e76\u884c\u5316","text":"<p>\u4f7f\u7528\u5e76\u884c\u5316\u65f6,LLM \u540c\u65f6\u5904\u7406\u4e00\u4e2a\u4efb\u52a1:</p> <p>LLM \u6709\u65f6\u53ef\u4ee5\u540c\u65f6\u5904\u7406\u4e00\u4e2a\u4efb\u52a1\u5e76\u4ee5\u7f16\u7a0b\u65b9\u5f0f\u805a\u5408\u5b83\u4eec\u7684\u8f93\u51fa\u3002\u8fd9\u4e2a\u5de5\u4f5c\u6d41,\u5373\u5e76\u884c\u5316,\u8868\u73b0\u4e3a\u4e24\u4e2a\u5173\u952e\u53d8\u4f53:\u5206\u6bb5:\u5c06\u4efb\u52a1\u5206\u89e3\u4e3a\u5e76\u884c\u8fd0\u884c\u7684\u72ec\u7acb\u5b50\u4efb\u52a1\u3002\u6295\u7968:\u591a\u6b21\u8fd0\u884c\u76f8\u540c\u7684\u4efb\u52a1\u4ee5\u83b7\u5f97\u591a\u6837\u5316\u7684\u8f93\u51fa\u3002</p> <p>\u4f55\u65f6\u4f7f\u7528\u6b64\u5de5\u4f5c\u6d41:\u5f53\u5206\u5272\u7684\u5b50\u4efb\u52a1\u53ef\u4ee5\u5e76\u884c\u5316\u4ee5\u63d0\u9ad8\u901f\u5ea6\u65f6,\u6216\u8005\u5f53\u9700\u8981\u591a\u79cd\u89c6\u89d2\u6216\u5c1d\u8bd5\u4ee5\u83b7\u5f97\u66f4\u9ad8\u7f6e\u4fe1\u5ea6\u7ed3\u679c\u65f6,\u5e76\u884c\u5316\u662f\u6709\u6548\u7684\u3002\u5bf9\u4e8e\u5177\u6709\u591a\u79cd\u8003\u8651\u56e0\u7d20\u7684\u590d\u6742\u4efb\u52a1,\u5f53\u6bcf\u4e2a\u8003\u8651\u56e0\u7d20\u7531\u5355\u72ec\u7684 LLM \u8c03\u7528\u5904\u7406\u65f6,LLM \u901a\u5e38\u8868\u73b0\u66f4\u597d,\u5141\u8bb8\u5bf9\u6bcf\u4e2a\u7279\u5b9a\u65b9\u9762\u7684\u91cd\u70b9\u5173\u6ce8\u3002</p> <p></p> Graph APIFunctional API Python <pre><code># Graph state\nclass State(TypedDict):\n    topic: str\n    joke: str\n    story: str\n    poem: str\n    combined_output: str\n\n\n# Nodes\ndef call_llm_1(state: State):\n    \"\"\"First LLM call to generate initial joke\"\"\"\n\n    msg = llm.invoke(f\"Write a joke about {state['topic']}\")\n    return {\"joke\": msg.content}\n\n\ndef call_llm_2(state: State):\n    \"\"\"Second LLM call to generate story\"\"\"\n\n    msg = llm.invoke(f\"Write a story about {state['topic']}\")\n    return {\"story\": msg.content}\n\n\ndef call_llm_3(state: State):\n    \"\"\"Third LLM call to generate poem\"\"\"\n\n    msg = llm.invoke(f\"Write a poem about {state['topic']}\")\n    return {\"poem\": msg.content}\n\n\ndef aggregator(state: State):\n    \"\"\"Combine the joke and story into a single output\"\"\"\n\n    combined = f\"Here's a story, joke, and poem about {state['topic']}!\\n\\n\"\n    combined += f\"STORY:\\n{state['story']}\\n\\n\"\n    combined += f\"JOKE:\\n{state['joke']}\\n\\n\"\n    combined += f\"POEM:\\n{state['poem']}\"\n    return {\"combined_output\": combined}\n\n\n# Build workflow\nparallel_builder = StateGraph(State)\n\n# Add nodes\nparallel_builder.add_node(\"call_llm_1\", call_llm_1)\nparallel_builder.add_node(\"call_llm_2\", call_llm_2)\nparallel_builder.add_node(\"call_llm_3\", call_llm_3)\nparallel_builder.add_node(\"aggregator\", aggregator)\n\n# Add edges to connect nodes\nparallel_builder.add_edge(START, \"call_llm_1\")\nparallel_builder.add_edge(START, \"call_llm_2\")\nparallel_builder.add_edge(START, \"call_llm_3\")\nparallel_builder.add_edge(\"call_llm_1\", \"aggregator\")\nparallel_builder.add_edge(\"call_llm_2\", \"aggregator\")\nparallel_builder.add_edge(\"call_llm_3\", \"aggregator\")\nparallel_builder.add_edge(\"aggregator\", END)\nparallel_workflow = parallel_builder.compile()\n\n# Show workflow\ndisplay(Image(parallel_workflow.get_graph().draw_mermaid_png()))\n\n# Invoke\nstate = parallel_workflow.invoke({\"topic\": \"cats\"})\nprint(state[\"combined_output\"])\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/3be2e53c-ca94-40dd-934f-82ff87fac277/r</p> <p>\u8d44\u6e90:</p> <p>\u6587\u6863</p> <p>\u8bf7\u53c2\u9605\u6211\u4eec\u5173\u4e8e\u5e76\u884c\u5316\u7684\u6587\u6863\u6b64\u5904\u3002</p> <p>LangChain Academy</p> <p>\u8bf7\u53c2\u9605\u6211\u4eec\u5173\u4e8e\u5e76\u884c\u5316\u7684\u8bfe\u7a0b\u6b64\u5904\u3002</p> JavaScript <pre><code>// Graph state\nconst State = z.object({\n  topic: z.string(),\n  joke: z.string().optional(),\n  story: z.string().optional(),\n  poem: z.string().optional(),\n  combined_output: z.string().optional(),\n});\n\n// Nodes\nconst callLlm1 = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // First LLM call to generate initial joke\n  const msg = await llm.invoke(`Write a joke about ${state.topic}`);\n  return { joke: msg.content };\n};\n\nconst callLlm2 = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Second LLM call to generate story\n  const msg = await llm.invoke(`Write a story about ${state.topic}`);\n  return { story: msg.content };\n};\n\nconst callLlm3 = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Third LLM call to generate poem\n  const msg = await llm.invoke(`Write a poem about ${state.topic}`);\n  return { poem: msg.content };\n};\n\nconst aggregator = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Combine the joke and story into a single output\n  let combined = `Here's a story, joke, and poem about ${state.topic}!\\n\\n`;\n  combined += `STORY:\\n${state.story}\\n\\n`;\n  combined += `JOKE:\\n${state.joke}\\n\\n`;\n  combined += `POEM:\\n${state.poem}`;\n  return { combined_output: combined };\n};\n\n// Build workflow\nconst parallelBuilder = new StateGraph(State)\n  .addNode(\"call_llm_1\", callLlm1)\n  .addNode(\"call_llm_2\", callLlm2)\n  .addNode(\"call_llm_3\", callLlm3)\n  .addNode(\"aggregator\", aggregator)\n  .addEdge(START, \"call_llm_1\")\n  .addEdge(START, \"call_llm_2\")\n  .addEdge(START, \"call_llm_3\")\n  .addEdge(\"call_llm_1\", \"aggregator\")\n  .addEdge(\"call_llm_2\", \"aggregator\")\n  .addEdge(\"call_llm_3\", \"aggregator\")\n  .addEdge(\"aggregator\", END);\n\nconst parallelWorkflow = parallelBuilder.compile();\n\n// Invoke\nconst state = await parallelWorkflow.invoke({ topic: \"cats\" });\nconsole.log(state.combined_output);\n</code></pre> Python <pre><code>@task\ndef call_llm_1(topic: str):\n    \"\"\"First LLM call to generate initial joke\"\"\"\n    msg = llm.invoke(f\"Write a joke about {topic}\")\n    return msg.content\n\n\n@task\ndef call_llm_2(topic: str):\n    \"\"\"Second LLM call to generate story\"\"\"\n    msg = llm.invoke(f\"Write a story about {topic}\")\n    return msg.content\n\n\n@task\ndef call_llm_3(topic):\n    \"\"\"Third LLM call to generate poem\"\"\"\n    msg = llm.invoke(f\"Write a poem about {topic}\")\n    return msg.content\n\n\n@task\ndef aggregator(topic, joke, story, poem):\n    \"\"\"Combine the joke and story into a single output\"\"\"\n\n    combined = f\"Here's a story, joke, and poem about {topic}!\\n\\n\"\n    combined += f\"STORY:\\n{story}\\n\\n\"\n    combined += f\"JOKE:\\n{joke}\\n\\n\"\n    combined += f\"POEM:\\n{poem}\"\n    return combined\n\n\n# Build workflow\n@entrypoint()\ndef parallel_workflow(topic: str):\n    joke_fut = call_llm_1(topic)\n    story_fut = call_llm_2(topic)\n    poem_fut = call_llm_3(topic)\n    return aggregator(\n        topic, joke_fut.result(), story_fut.result(), poem_fut.result()\n    ).result()\n\n# Invoke\nfor step in parallel_workflow.stream(\"cats\", stream_mode=\"updates\"):\n    print(step)\n    print(\"\\n\")\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/623d033f-e814-41e9-80b1-75e6abb67801/r</p> JavaScript <pre><code>const callLlm1 = task(\"call_llm_1\", async (topic: string) =&gt; {\n  // First LLM call to generate initial joke\n  const msg = await llm.invoke(`Write a joke about ${topic}`);\n  return msg.content;\n});\n\nconst callLlm2 = task(\"call_llm_2\", async (topic: string) =&gt; {\n  // Second LLM call to generate story\n  const msg = await llm.invoke(`Write a story about ${topic}`);\n  return msg.content;\n});\n\nconst callLlm3 = task(\"call_llm_3\", async (topic: string) =&gt; {\n  // Third LLM call to generate poem\n  const msg = await llm.invoke(`Write a poem about ${topic}`);\n  return msg.content;\n});\n\nconst aggregator = task(\"aggregator\", (topic: string, joke: string, story: string, poem: string) =&gt; {\n  // Combine the joke and story into a single output\n  let combined = `Here's a story, joke, and poem about ${topic}!\\n\\n`;\n  combined += `STORY:\\n${story}\\n\\n`;\n  combined += `JOKE:\\n${joke}\\n\\n`;\n  combined += `POEM:\\n${poem}`;\n  return combined;\n});\n\n// Build workflow\nconst parallelWorkflow = entrypoint(\"parallelWorkflow\", async (topic: string) =&gt; {\n  const jokeFut = callLlm1(topic);\n  const storyFut = callLlm2(topic);\n  const poemFut = callLlm3(topic);\n\n  return await aggregator(\n    topic,\n    await jokeFut,\n    await storyFut,\n    await poemFut\n  );\n});\n\n// Invoke\nconst stream = await parallelWorkflow.stream(\"cats\", { streamMode: \"updates\" });\nfor await (const step of stream) {\n  console.log(step);\n  console.log(\"\\n\");\n}\n</code></pre>","boost":2},{"location":"tutorials/workflows/#_5","title":"\u8def\u7531","text":"<p>\u8def\u7531\u5bf9\u8f93\u5165\u8fdb\u884c\u5206\u7c7b\u5e76\u5c06\u5176\u5b9a\u5411\u5230\u540e\u7eed\u4efb\u52a1\u3002\u5982 Anthropic \u5173\u4e8e <code>Building Effective Agents</code> \u7684\u535a\u5ba2\u4e2d\u6240\u8ff0:</p> <p>\u8def\u7531\u5bf9\u8f93\u5165\u8fdb\u884c\u5206\u7c7b\u5e76\u5c06\u5176\u5b9a\u5411\u5230\u4e13\u95e8\u7684\u540e\u7eed\u4efb\u52a1\u3002\u6b64\u5de5\u4f5c\u6d41\u5141\u8bb8\u5173\u6ce8\u70b9\u5206\u79bb,\u5e76\u6784\u5efa\u66f4\u4e13\u4e1a\u5316\u7684\u63d0\u793a\u8bcd\u3002\u5982\u679c\u6ca1\u6709\u6b64\u5de5\u4f5c\u6d41,\u9488\u5bf9\u4e00\u79cd\u8f93\u5165\u7684\u4f18\u5316\u53ef\u80fd\u4f1a\u635f\u5bb3\u5176\u4ed6\u8f93\u5165\u7684\u6027\u80fd\u3002</p> <p>\u4f55\u65f6\u4f7f\u7528\u6b64\u5de5\u4f5c\u6d41:\u8def\u7531\u9002\u7528\u4e8e\u5177\u6709\u4e0d\u540c\u7c7b\u522b\u7684\u590d\u6742\u4efb\u52a1,\u8fd9\u4e9b\u7c7b\u522b\u6700\u597d\u5206\u522b\u5904\u7406,\u5e76\u4e14\u5206\u7c7b\u53ef\u4ee5\u7531 LLM \u6216\u66f4\u4f20\u7edf\u7684\u5206\u7c7b\u6a21\u578b/\u7b97\u6cd5\u51c6\u786e\u5904\u7406\u3002</p> <p></p> Graph APIFunctional API Python <pre><code>from typing_extensions import Literal\nfrom langchain_core.messages import HumanMessage, SystemMessage\n\n\n# Schema for structured output to use as routing logic\nclass Route(BaseModel):\n    step: Literal[\"poem\", \"story\", \"joke\"] = Field(\n        None, description=\"The next step in the routing process\"\n    )\n\n\n# Augment the LLM with schema for structured output\nrouter = llm.with_structured_output(Route)\n\n\n# State\nclass State(TypedDict):\n    input: str\n    decision: str\n    output: str\n\n\n# Nodes\ndef llm_call_1(state: State):\n    \"\"\"Write a story\"\"\"\n\n    result = llm.invoke(state[\"input\"])\n    return {\"output\": result.content}\n\n\ndef llm_call_2(state: State):\n    \"\"\"Write a joke\"\"\"\n\n    result = llm.invoke(state[\"input\"])\n    return {\"output\": result.content}\n\n\ndef llm_call_3(state: State):\n    \"\"\"Write a poem\"\"\"\n\n    result = llm.invoke(state[\"input\"])\n    return {\"output\": result.content}\n\n\ndef llm_call_router(state: State):\n    \"\"\"Route the input to the appropriate node\"\"\"\n\n    # Run the augmented LLM with structured output to serve as routing logic\n    decision = router.invoke(\n        [\n            SystemMessage(\n                content=\"Route the input to story, joke, or poem based on the user's request.\"\n            ),\n            HumanMessage(content=state[\"input\"]),\n        ]\n    )\n\n    return {\"decision\": decision.step}\n\n\n# Conditional edge function to route to the appropriate node\ndef route_decision(state: State):\n    # Return the node name you want to visit next\n    if state[\"decision\"] == \"story\":\n        return \"llm_call_1\"\n    elif state[\"decision\"] == \"joke\":\n        return \"llm_call_2\"\n    elif state[\"decision\"] == \"poem\":\n        return \"llm_call_3\"\n\n\n# Build workflow\nrouter_builder = StateGraph(State)\n\n# Add nodes\nrouter_builder.add_node(\"llm_call_1\", llm_call_1)\nrouter_builder.add_node(\"llm_call_2\", llm_call_2)\nrouter_builder.add_node(\"llm_call_3\", llm_call_3)\nrouter_builder.add_node(\"llm_call_router\", llm_call_router)\n\n# Add edges to connect nodes\nrouter_builder.add_edge(START, \"llm_call_router\")\nrouter_builder.add_conditional_edges(\n    \"llm_call_router\",\n    route_decision,\n    {  # Name returned by route_decision : Name of next node to visit\n        \"llm_call_1\": \"llm_call_1\",\n        \"llm_call_2\": \"llm_call_2\",\n        \"llm_call_3\": \"llm_call_3\",\n    },\n)\nrouter_builder.add_edge(\"llm_call_1\", END)\nrouter_builder.add_edge(\"llm_call_2\", END)\nrouter_builder.add_edge(\"llm_call_3\", END)\n\n# Compile workflow\nrouter_workflow = router_builder.compile()\n\n# Show the workflow\ndisplay(Image(router_workflow.get_graph().draw_mermaid_png()))\n\n# Invoke\nstate = router_workflow.invoke({\"input\": \"Write me a joke about cats\"})\nprint(state[\"output\"])\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/c4580b74-fe91-47e4-96fe-7fac598d509c/r</p> <p>\u8d44\u6e90:</p> <p>LangChain Academy</p> <p>\u8bf7\u53c2\u9605\u6211\u4eec\u5173\u4e8e\u8def\u7531\u7684\u8bfe\u7a0b\u6b64\u5904\u3002</p> <p>\u793a\u4f8b</p> <p>\u6b64\u5904\u662f\u8def\u7531\u95ee\u9898\u7684 RAG \u5de5\u4f5c\u6d41\u3002\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u89c6\u9891\u6b64\u5904\u3002</p> JavaScript <pre><code>import { SystemMessage, HumanMessage } from \"@langchain/core/messages\";\n\n// Schema for structured output to use as routing logic\nconst Route = z.object({\n  step: z.enum([\"poem\", \"story\", \"joke\"]).describe(\"The next step in the routing process\"),\n});\n\n// Augment the LLM with schema for structured output\nconst router = llm.withStructuredOutput(Route);\n\n// State\nconst State = z.object({\n  input: z.string(),\n  decision: z.string().optional(),\n  output: z.string().optional(),\n});\n\n// Nodes\nconst llmCall1 = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Write a story\n  const result = await llm.invoke(state.input);\n  return { output: result.content };\n};\n\nconst llmCall2 = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Write a joke\n  const result = await llm.invoke(state.input);\n  return { output: result.content };\n};\n\nconst llmCall3 = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Write a poem\n  const result = await llm.invoke(state.input);\n  return { output: result.content };\n};\n\nconst llmCallRouter = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Route the input to the appropriate node\n  const decision = await router.invoke([\n    new SystemMessage(\"Route the input to story, joke, or poem based on the user's request.\"),\n    new HumanMessage(state.input),\n  ]);\n\n  return { decision: decision.step };\n};\n\n// Conditional edge function to route to the appropriate node\nconst routeDecision = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Return the node name you want to visit next\n  if (state.decision === \"story\") {\n    return \"llm_call_1\";\n  } else if (state.decision === \"joke\") {\n    return \"llm_call_2\";\n  } else if (state.decision === \"poem\") {\n    return \"llm_call_3\";\n  }\n};\n\n// Build workflow\nconst routerBuilder = new StateGraph(State)\n  .addNode(\"llm_call_1\", llmCall1)\n  .addNode(\"llm_call_2\", llmCall2)\n  .addNode(\"llm_call_3\", llmCall3)\n  .addNode(\"llm_call_router\", llmCallRouter)\n  .addEdge(START, \"llm_call_router\")\n  .addConditionalEdges(\n    \"llm_call_router\",\n    routeDecision,\n    {\n      \"llm_call_1\": \"llm_call_1\",\n      \"llm_call_2\": \"llm_call_2\",\n      \"llm_call_3\": \"llm_call_3\",\n    }\n  )\n  .addEdge(\"llm_call_1\", END)\n  .addEdge(\"llm_call_2\", END)\n  .addEdge(\"llm_call_3\", END);\n\nconst routerWorkflow = routerBuilder.compile();\n\n// Invoke\nconst state = await routerWorkflow.invoke({ input: \"Write me a joke about cats\" });\nconsole.log(state.output);\n</code></pre> Python <pre><code>from typing_extensions import Literal\nfrom pydantic import BaseModel\nfrom langchain_core.messages import HumanMessage, SystemMessage\n\n\n# Schema for structured output to use as routing logic\nclass Route(BaseModel):\n    step: Literal[\"poem\", \"story\", \"joke\"] = Field(\n        None, description=\"The next step in the routing process\"\n    )\n\n\n# Augment the LLM with schema for structured output\nrouter = llm.with_structured_output(Route)\n\n\n@task\ndef llm_call_1(input_: str):\n    \"\"\"Write a story\"\"\"\n    result = llm.invoke(input_)\n    return result.content\n\n\n@task\ndef llm_call_2(input_: str):\n    \"\"\"Write a joke\"\"\"\n    result = llm.invoke(input_)\n    return result.content\n\n\n@task\ndef llm_call_3(input_: str):\n    \"\"\"Write a poem\"\"\"\n    result = llm.invoke(input_)\n    return result.content\n\n\ndef llm_call_router(input_: str):\n    \"\"\"Route the input to the appropriate node\"\"\"\n    # Run the augmented LLM with structured output to serve as routing logic\n    decision = router.invoke(\n        [\n            SystemMessage(\n                content=\"Route the input to story, joke, or poem based on the user's request.\"\n            ),\n            HumanMessage(content=input_),\n        ]\n    )\n    return decision.step\n\n\n# Create workflow\n@entrypoint()\ndef router_workflow(input_: str):\n    next_step = llm_call_router(input_)\n    if next_step == \"story\":\n        llm_call = llm_call_1\n    elif next_step == \"joke\":\n        llm_call = llm_call_2\n    elif next_step == \"poem\":\n        llm_call = llm_call_3\n\n    return llm_call(input_).result()\n\n# Invoke\nfor step in router_workflow.stream(\"Write me a joke about cats\", stream_mode=\"updates\"):\n    print(step)\n    print(\"\\n\")\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/5e2eb979-82dd-402c-b1a0-a8cceaf2a28a/r</p> JavaScript <pre><code>import { SystemMessage, HumanMessage } from \"@langchain/core/messages\";\n\n// Schema for structured output to use as routing logic\nconst Route = z.object({\n  step: z.enum([\"poem\", \"story\", \"joke\"]).describe(\n    \"The next step in the routing process\"\n  ),\n});\n\n// Augment the LLM with schema for structured output\nconst router = llm.withStructuredOutput(Route);\n\nconst llmCall1 = task(\"llm_call_1\", async (input: string) =&gt; {\n  // Write a story\n  const result = await llm.invoke(input);\n  return result.content;\n});\n\nconst llmCall2 = task(\"llm_call_2\", async (input: string) =&gt; {\n  // Write a joke\n  const result = await llm.invoke(input);\n  return result.content;\n});\n\nconst llmCall3 = task(\"llm_call_3\", async (input: string) =&gt; {\n  // Write a poem\n  const result = await llm.invoke(input);\n  return result.content;\n});\n\nconst llmCallRouter = async (input: string) =&gt; {\n  // Route the input to the appropriate node\n  const decision = await router.invoke([\n    new SystemMessage(\"Route the input to story, joke, or poem based on the user's request.\"),\n    new HumanMessage(input),\n  ]);\n  return decision.step;\n};\n\n// Create workflow\nconst routerWorkflow = entrypoint(\"routerWorkflow\", async (input: string) =&gt; {\n  const nextStep = await llmCallRouter(input);\n\n  let llmCall: typeof llmCall1;\n  if (nextStep === \"story\") {\n    llmCall = llmCall1;\n  } else if (nextStep === \"joke\") {\n    llmCall = llmCall2;\n  } else if (nextStep === \"poem\") {\n    llmCall = llmCall3;\n  }\n\n  return await llmCall(input);\n});\n\n// Invoke\nconst stream = await routerWorkflow.stream(\"Write me a joke about cats\", { streamMode: \"updates\" });\nfor await (const step of stream) {\n  console.log(step);\n  console.log(\"\\n\");\n}\n</code></pre>","boost":2},{"location":"tutorials/workflows/#-","title":"\u7f16\u6392\u5668-\u5de5\u4f5c\u5668","text":"<p>\u4f7f\u7528\u7f16\u6392\u5668-\u5de5\u4f5c\u5668\u65f6,\u7f16\u6392\u5668\u5206\u89e3\u4efb\u52a1\u5e76\u5c06\u6bcf\u4e2a\u5b50\u4efb\u52a1\u59d4\u6258\u7ed9\u5de5\u4f5c\u5668\u3002\u5982 Anthropic \u5173\u4e8e <code>Building Effective Agents</code> \u7684\u535a\u5ba2\u4e2d\u6240\u8ff0:</p> <p>\u5728\u7f16\u6392\u5668-\u5de5\u4f5c\u5668\u5de5\u4f5c\u6d41\u4e2d,\u4e2d\u592e LLM \u52a8\u6001\u5206\u89e3\u4efb\u52a1,\u5c06\u5b83\u4eec\u59d4\u6258\u7ed9\u5de5\u4f5c\u5668 LLM,\u5e76\u7efc\u5408\u5b83\u4eec\u7684\u7ed3\u679c\u3002</p> <p>\u4f55\u65f6\u4f7f\u7528\u6b64\u5de5\u4f5c\u6d41:\u6b64\u5de5\u4f5c\u6d41\u975e\u5e38\u9002\u5408\u65e0\u6cd5\u9884\u6d4b\u6240\u9700\u5b50\u4efb\u52a1\u7684\u590d\u6742\u4efb\u52a1(\u4f8b\u5982\u5728\u7f16\u7801\u4e2d,\u9700\u8981\u66f4\u6539\u7684\u6587\u4ef6\u6570\u91cf\u548c\u6bcf\u4e2a\u6587\u4ef6\u4e2d\u66f4\u6539\u7684\u6027\u8d28\u53ef\u80fd\u53d6\u51b3\u4e8e\u4efb\u52a1)\u3002\u867d\u7136\u5728\u62d3\u6251\u4e0a\u76f8\u4f3c,\u4f46\u4e0e\u5e76\u884c\u5316\u7684\u5173\u952e\u533a\u522b\u5728\u4e8e\u5176\u7075\u6d3b\u6027\u2014\u2014\u5b50\u4efb\u52a1\u4e0d\u662f\u9884\u5b9a\u4e49\u7684,\u800c\u662f\u7531\u7f16\u6392\u5668\u6839\u636e\u7279\u5b9a\u8f93\u5165\u786e\u5b9a\u7684\u3002</p> <p></p> Graph APIFunctional API Python <pre><code>from typing import Annotated, List\nimport operator\n\n\n# Schema for structured output to use in planning\nclass Section(BaseModel):\n    name: str = Field(\n        description=\"Name for this section of the report.\",\n    )\n    description: str = Field(\n        description=\"Brief overview of the main topics and concepts to be covered in this section.\",\n    )\n\n\nclass Sections(BaseModel):\n    sections: List[Section] = Field(\n        description=\"Sections of the report.\",\n    )\n\n\n# Augment the LLM with schema for structured output\nplanner = llm.with_structured_output(Sections)\n</code></pre> <p>\u5728 LangGraph \u4e2d\u521b\u5efa\u5de5\u4f5c\u5668</p> <p>\u56e0\u4e3a\u7f16\u6392\u5668-\u5de5\u4f5c\u5668\u5de5\u4f5c\u6d41\u5f88\u5e38\u89c1,LangGraph \u63d0\u4f9b\u4e86 <code>Send</code> API \u6765\u652f\u6301\u6b64\u529f\u80fd\u3002\u5b83\u5141\u8bb8\u4f60\u52a8\u6001\u521b\u5efa\u5de5\u4f5c\u5668\u8282\u70b9\u5e76\u5411\u6bcf\u4e2a\u8282\u70b9\u53d1\u9001\u7279\u5b9a\u7684\u8f93\u5165\u3002\u6bcf\u4e2a\u5de5\u4f5c\u5668\u90fd\u6709\u81ea\u5df1\u7684\u72b6\u6001,\u6240\u6709\u5de5\u4f5c\u5668\u8f93\u51fa\u90fd\u5199\u5165\u7f16\u6392\u5668\u56fe\u53ef\u8bbf\u95ee\u7684*\u5171\u4eab\u72b6\u6001\u952e*\u3002\u8fd9\u4f7f\u7f16\u6392\u5668\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u5de5\u4f5c\u5668\u8f93\u51fa,\u5e76\u5141\u8bb8\u5b83\u5c06\u5b83\u4eec\u7efc\u5408\u6210\u6700\u7ec8\u8f93\u51fa\u3002\u5982\u4e0b\u6240\u793a,\u6211\u4eec\u904d\u5386\u8282\u5217\u8868\u5e76\u5c06\u6bcf\u4e2a\u8282 <code>Send</code> \u5230\u4e00\u4e2a\u5de5\u4f5c\u5668\u8282\u70b9\u3002\u8bf7\u53c2\u9605\u8fdb\u4e00\u6b65\u7684\u6587\u6863\u6b64\u5904\u548c\u6b64\u5904\u3002</p> <pre><code>from langgraph.types import Send\n\n\n# Graph state\nclass State(TypedDict):\n    topic: str  # Report topic\n    sections: list[Section]  # List of report sections\n    completed_sections: Annotated[\n        list, operator.add\n    ]  # All workers write to this key in parallel\n    final_report: str  # Final report\n\n\n# Worker state\nclass WorkerState(TypedDict):\n    section: Section\n    completed_sections: Annotated[list, operator.add]\n\n\n# Nodes\ndef orchestrator(state: State):\n    \"\"\"Orchestrator that generates a plan for the report\"\"\"\n\n    # Generate queries\n    report_sections = planner.invoke(\n        [\n            SystemMessage(content=\"Generate a plan for the report.\"),\n            HumanMessage(content=f\"Here is the report topic: {state['topic']}\"),\n        ]\n    )\n\n    return {\"sections\": report_sections.sections}\n\n\ndef llm_call(state: WorkerState):\n    \"\"\"Worker writes a section of the report\"\"\"\n\n    # Generate section\n    section = llm.invoke(\n        [\n            SystemMessage(\n                content=\"Write a report section following the provided name and description. Include no preamble for each section. Use markdown formatting.\"\n            ),\n            HumanMessage(\n                content=f\"Here is the section name: {state['section'].name} and description: {state['section'].description}\"\n            ),\n        ]\n    )\n\n    # Write the updated section to completed sections\n    return {\"completed_sections\": [section.content]}\n\n\ndef synthesizer(state: State):\n    \"\"\"Synthesize full report from sections\"\"\"\n\n    # List of completed sections\n    completed_sections = state[\"completed_sections\"]\n\n    # Format completed section to str to use as context for final sections\n    completed_report_sections = \"\\n\\n---\\n\\n\".join(completed_sections)\n\n    return {\"final_report\": completed_report_sections}\n\n\n# Conditional edge function to create llm_call workers that each write a section of the report\ndef assign_workers(state: State):\n    \"\"\"Assign a worker to each section in the plan\"\"\"\n\n    # Kick off section writing in parallel via Send() API\n    return [Send(\"llm_call\", {\"section\": s}) for s in state[\"sections\"]]\n\n\n# Build workflow\norchestrator_worker_builder = StateGraph(State)\n\n# Add the nodes\norchestrator_worker_builder.add_node(\"orchestrator\", orchestrator)\norchestrator_worker_builder.add_node(\"llm_call\", llm_call)\norchestrator_worker_builder.add_node(\"synthesizer\", synthesizer)\n\n# Add edges to connect nodes\norchestrator_worker_builder.add_edge(START, \"orchestrator\")\norchestrator_worker_builder.add_conditional_edges(\n    \"orchestrator\", assign_workers, [\"llm_call\"]\n)\norchestrator_worker_builder.add_edge(\"llm_call\", \"synthesizer\")\norchestrator_worker_builder.add_edge(\"synthesizer\", END)\n\n# Compile the workflow\norchestrator_worker = orchestrator_worker_builder.compile()\n\n# Show the workflow\ndisplay(Image(orchestrator_worker.get_graph().draw_mermaid_png()))\n\n# Invoke\nstate = orchestrator_worker.invoke({\"topic\": \"Create a report on LLM scaling laws\"})\n\nfrom IPython.display import Markdown\nMarkdown(state[\"final_report\"])\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/78cbcfc3-38bf-471d-b62a-b299b144237d/r</p> <p>\u8d44\u6e90:</p> <p>LangChain Academy</p> <p>\u8bf7\u53c2\u9605\u6211\u4eec\u5173\u4e8e\u7f16\u6392\u5668-\u5de5\u4f5c\u5668\u7684\u8bfe\u7a0b\u6b64\u5904\u3002</p> <p>\u793a\u4f8b</p> <p>\u6b64\u5904\u662f\u4e00\u4e2a\u4f7f\u7528\u7f16\u6392\u5668-\u5de5\u4f5c\u5668\u8fdb\u884c\u62a5\u544a\u89c4\u5212\u548c\u7f16\u5199\u7684\u9879\u76ee\u3002\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u89c6\u9891\u6b64\u5904\u3002</p> JavaScript <pre><code>import \"@langchain/langgraph/zod\";\n\n// Schema for structured output to use in planning\nconst Section = z.object({\n  name: z.string().describe(\"Name for this section of the report.\"),\n  description: z.string().describe(\"Brief overview of the main topics and concepts to be covered in this section.\"),\n});\n\nconst Sections = z.object({\n  sections: z.array(Section).describe(\"Sections of the report.\"),\n});\n\n// Augment the LLM with schema for structured output\nconst planner = llm.withStructuredOutput(Sections);\n</code></pre> <p>\u5728 LangGraph \u4e2d\u521b\u5efa\u5de5\u4f5c\u5668</p> <p>\u56e0\u4e3a\u7f16\u6392\u5668-\u5de5\u4f5c\u5668\u5de5\u4f5c\u6d41\u5f88\u5e38\u89c1,LangGraph \u63d0\u4f9b\u4e86 <code>Send</code> API \u6765\u652f\u6301\u6b64\u529f\u80fd\u3002\u5b83\u5141\u8bb8\u4f60\u52a8\u6001\u521b\u5efa\u5de5\u4f5c\u5668\u8282\u70b9\u5e76\u5411\u6bcf\u4e2a\u8282\u70b9\u53d1\u9001\u7279\u5b9a\u7684\u8f93\u5165\u3002\u6bcf\u4e2a\u5de5\u4f5c\u5668\u90fd\u6709\u81ea\u5df1\u7684\u72b6\u6001,\u6240\u6709\u5de5\u4f5c\u5668\u8f93\u51fa\u90fd\u5199\u5165\u7f16\u6392\u5668\u56fe\u53ef\u8bbf\u95ee\u7684*\u5171\u4eab\u72b6\u6001\u952e*\u3002\u8fd9\u4f7f\u7f16\u6392\u5668\u53ef\u4ee5\u8bbf\u95ee\u6240\u6709\u5de5\u4f5c\u5668\u8f93\u51fa,\u5e76\u5141\u8bb8\u5b83\u5c06\u5b83\u4eec\u7efc\u5408\u6210\u6700\u7ec8\u8f93\u51fa\u3002\u5982\u4e0b\u6240\u793a,\u6211\u4eec\u904d\u5386\u8282\u5217\u8868\u5e76\u5c06\u6bcf\u4e2a\u8282 <code>Send</code> \u5230\u4e00\u4e2a\u5de5\u4f5c\u5668\u8282\u70b9\u3002\u8bf7\u53c2\u9605\u8fdb\u4e00\u6b65\u7684\u6587\u6863\u6b64\u5904\u548c\u6b64\u5904\u3002</p> <pre><code>import { withLangGraph } from \"@langchain/langgraph/zod\";\nimport { Send } from \"@langchain/langgraph\";\n\n// Graph state\nconst State = z.object({\n  topic: z.string(), // Report topic\n  sections: z.array(Section).optional(), // List of report sections\n  // All workers write to this key\n  completed_sections: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (x, y) =&gt; x.concat(y),\n    },\n    default: () =&gt; [],\n  }),\n  final_report: z.string().optional(), // Final report\n});\n\n// Worker state\nconst WorkerState = z.object({\n  section: Section,\n  completed_sections: withLangGraph(z.array(z.string()), {\n    reducer: {\n      fn: (x, y) =&gt; x.concat(y),\n    },\n    default: () =&gt; [],\n  }),\n});\n\n// Nodes\nconst orchestrator = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Orchestrator that generates a plan for the report\n  const reportSections = await planner.invoke([\n    new SystemMessage(\"Generate a plan for the report.\"),\n    new HumanMessage(`Here is the report topic: ${state.topic}`),\n  ]);\n\n  return { sections: reportSections.sections };\n};\n\nconst llmCall = async (state: z.infer&lt;typeof WorkerState&gt;) =&gt; {\n  // Worker writes a section of the report\n  const section = await llm.invoke([\n    new SystemMessage(\n      \"Write a report section following the provided name and description. Include no preamble for each section. Use markdown formatting.\"\n    ),\n    new HumanMessage(\n      `Here is the section name: ${state.section.name} and description: ${state.section.description}`\n    ),\n  ]);\n\n  // Write the updated section to completed sections\n  return { completed_sections: [section.content] };\n};\n\nconst synthesizer = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Synthesize full report from sections\n  const completedSections = state.completed_sections;\n  const completedReportSections = completedSections.join(\"\\n\\n---\\n\\n\");\n  return { final_report: completedReportSections };\n};\n\n// Conditional edge function to create llm_call workers\nconst assignWorkers = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Assign a worker to each section in the plan\n  return state.sections!.map((s) =&gt; new Send(\"llm_call\", { section: s }));\n};\n\n// Build workflow\nconst orchestratorWorkerBuilder = new StateGraph(State)\n  .addNode(\"orchestrator\", orchestrator)\n  .addNode(\"llm_call\", llmCall)\n  .addNode(\"synthesizer\", synthesizer)\n  .addEdge(START, \"orchestrator\")\n  .addConditionalEdges(\"orchestrator\", assignWorkers, [\"llm_call\"])\n  .addEdge(\"llm_call\", \"synthesizer\")\n  .addEdge(\"synthesizer\", END);\n\n// Compile the workflow\nconst orchestratorWorker = orchestratorWorkerBuilder.compile();\n\n// Invoke\nconst state = await orchestratorWorker.invoke({ topic: \"Create a report on LLM scaling laws\" });\nconsole.log(state.final_report);\n</code></pre> Python <pre><code>from typing import List\n\n\n# Schema for structured output to use in planning\nclass Section(BaseModel):\n    name: str = Field(\n        description=\"Name for this section of the report.\",\n    )\n    description: str = Field(\n        description=\"Brief overview of the main topics and concepts to be covered in this section.\",\n    )\n\n\nclass Sections(BaseModel):\n    sections: List[Section] = Field(\n        description=\"Sections of the report.\",\n    )\n\n\n# Augment the LLM with schema for structured output\nplanner = llm.with_structured_output(Sections)\n\n\n@task\ndef orchestrator(topic: str):\n    \"\"\"Orchestrator that generates a plan for the report\"\"\"\n    # Generate queries\n    report_sections = planner.invoke(\n        [\n            SystemMessage(content=\"Generate a plan for the report.\"),\n            HumanMessage(content=f\"Here is the report topic: {topic}\"),\n        ]\n    )\n\n    return report_sections.sections\n\n\n@task\ndef llm_call(section: Section):\n    \"\"\"Worker writes a section of the report\"\"\"\n\n    # Generate section\n    result = llm.invoke(\n        [\n            SystemMessage(content=\"Write a report section.\"),\n            HumanMessage(\n                content=f\"Here is the section name: {section.name} and description: {section.description}\"\n            ),\n        ]\n    )\n\n    # Write the updated section to completed sections\n    return result.content\n\n\n@task\ndef synthesizer(completed_sections: list[str]):\n    \"\"\"Synthesize full report from sections\"\"\"\n    final_report = \"\\n\\n---\\n\\n\".join(completed_sections)\n    return final_report\n\n\n@entrypoint()\ndef orchestrator_worker(topic: str):\n    sections = orchestrator(topic).result()\n    section_futures = [llm_call(section) for section in sections]\n    final_report = synthesizer(\n        [section_fut.result() for section_fut in section_futures]\n    ).result()\n    return final_report\n\n# Invoke\nreport = orchestrator_worker.invoke(\"Create a report on LLM scaling laws\")\nfrom IPython.display import Markdown\nMarkdown(report)\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/75a636d0-6179-4a12-9836-e0aa571e87c5/r</p> JavaScript <pre><code>// Schema for structured output to use in planning\nconst Section = z.object({\n  name: z.string().describe(\"Name for this section of the report.\"),\n  description: z.string().describe(\"Brief overview of the main topics and concepts to be covered in this section.\"),\n});\n\nconst Sections = z.object({\n  sections: z.array(Section).describe(\"Sections of the report.\"),\n});\n\n// Augment the LLM with schema for structured output\nconst planner = llm.withStructuredOutput(Sections);\n\nconst orchestrator = task(\"orchestrator\", async (topic: string) =&gt; {\n  // Orchestrator that generates a plan for the report\n  const reportSections = await planner.invoke([\n    new SystemMessage(\"Generate a plan for the report.\"),\n    new HumanMessage(`Here is the report topic: ${topic}`),\n  ]);\n  return reportSections.sections;\n});\n\nconst llmCall = task(\"llm_call\", async (section: z.infer&lt;typeof Section&gt;) =&gt; {\n  // Worker writes a section of the report\n  const result = await llm.invoke([\n    new SystemMessage(\"Write a report section.\"),\n    new HumanMessage(\n      `Here is the section name: ${section.name} and description: ${section.description}`\n    ),\n  ]);\n  return result.content;\n});\n\nconst synthesizer = task(\"synthesizer\", (completedSections: string[]) =&gt; {\n  // Synthesize full report from sections\n  const finalReport = completedSections.join(\"\\n\\n---\\n\\n\");\n  return finalReport;\n});\n\nconst orchestratorWorker = entrypoint(\"orchestratorWorker\", async (topic: string) =&gt; {\n  const sections = await orchestrator(topic);\n  const sectionFutures = sections.map((section) =&gt; llmCall(section));\n  const finalReport = await synthesizer(\n    await Promise.all(sectionFutures)\n  );\n  return finalReport;\n});\n\n// Invoke\nconst report = await orchestratorWorker.invoke(\"Create a report on LLM scaling laws\");\nconsole.log(report);\n</code></pre>","boost":2},{"location":"tutorials/workflows/#-_1","title":"\u8bc4\u4f30\u5668-\u4f18\u5316\u5668","text":"<p>\u5728\u8bc4\u4f30\u5668-\u4f18\u5316\u5668\u5de5\u4f5c\u6d41\u4e2d,\u4e00\u4e2a LLM \u8c03\u7528\u751f\u6210\u54cd\u5e94,\u800c\u53e6\u4e00\u4e2a\u5728\u5faa\u73af\u4e2d\u63d0\u4f9b\u8bc4\u4f30\u548c\u53cd\u9988:</p> <p>\u4f55\u65f6\u4f7f\u7528\u6b64\u5de5\u4f5c\u6d41:\u5f53\u6211\u4eec\u6709\u660e\u786e\u7684\u8bc4\u4f30\u6807\u51c6,\u5e76\u4e14\u8fed\u4ee3\u4f18\u5316\u63d0\u4f9b\u53ef\u8861\u91cf\u7684\u4ef7\u503c\u65f6,\u6b64\u5de5\u4f5c\u6d41\u7279\u522b\u6709\u6548\u3002\u826f\u597d\u62df\u5408\u7684\u4e24\u4e2a\u6807\u5fd7\u662f:\u9996\u5148,\u5f53\u4eba\u7c7b\u9610\u8ff0\u4ed6\u4eec\u7684\u53cd\u9988\u65f6,LLM \u54cd\u5e94\u53ef\u4ee5\u88ab\u660e\u663e\u6539\u5584;\u5176\u6b21,LLM \u53ef\u4ee5\u63d0\u4f9b\u8fd9\u6837\u7684\u53cd\u9988\u3002\u8fd9\u7c7b\u4f3c\u4e8e\u4eba\u7c7b\u4f5c\u5bb6\u5728\u5236\u4f5c\u7cbe\u7f8e\u6587\u6863\u65f6\u53ef\u80fd\u7ecf\u5386\u7684\u8fed\u4ee3\u5199\u4f5c\u8fc7\u7a0b\u3002</p> <p></p> Graph APIFunctional API Python <pre><code># Graph state\nclass State(TypedDict):\n    joke: str\n    topic: str\n    feedback: str\n    funny_or_not: str\n\n\n# Schema for structured output to use in evaluation\nclass Feedback(BaseModel):\n    grade: Literal[\"funny\", \"not funny\"] = Field(\n        description=\"Decide if the joke is funny or not.\",\n    )\n    feedback: str = Field(\n        description=\"If the joke is not funny, provide feedback on how to improve it.\",\n    )\n\n\n# Augment the LLM with schema for structured output\nevaluator = llm.with_structured_output(Feedback)\n\n\n# Nodes\ndef llm_call_generator(state: State):\n    \"\"\"LLM generates a joke\"\"\"\n\n    if state.get(\"feedback\"):\n        msg = llm.invoke(\n            f\"Write a joke about {state['topic']} but take into account the feedback: {state['feedback']}\"\n        )\n    else:\n        msg = llm.invoke(f\"Write a joke about {state['topic']}\")\n    return {\"joke\": msg.content}\n\n\ndef llm_call_evaluator(state: State):\n    \"\"\"LLM evaluates the joke\"\"\"\n\n    grade = evaluator.invoke(f\"Grade the joke {state['joke']}\")\n    return {\"funny_or_not\": grade.grade, \"feedback\": grade.feedback}\n\n\n# Conditional edge function to route back to joke generator or end based upon feedback from the evaluator\ndef route_joke(state: State):\n    \"\"\"Route back to joke generator or end based upon feedback from the evaluator\"\"\"\n\n    if state[\"funny_or_not\"] == \"funny\":\n        return \"Accepted\"\n    elif state[\"funny_or_not\"] == \"not funny\":\n        return \"Rejected + Feedback\"\n\n\n# Build workflow\noptimizer_builder = StateGraph(State)\n\n# Add the nodes\noptimizer_builder.add_node(\"llm_call_generator\", llm_call_generator)\noptimizer_builder.add_node(\"llm_call_evaluator\", llm_call_evaluator)\n\n# Add edges to connect nodes\noptimizer_builder.add_edge(START, \"llm_call_generator\")\noptimizer_builder.add_edge(\"llm_call_generator\", \"llm_call_evaluator\")\noptimizer_builder.add_conditional_edges(\n    \"llm_call_evaluator\",\n    route_joke,\n    {  # Name returned by route_joke : Name of next node to visit\n        \"Accepted\": END,\n        \"Rejected + Feedback\": \"llm_call_generator\",\n    },\n)\n\n# Compile the workflow\noptimizer_workflow = optimizer_builder.compile()\n\n# Show the workflow\ndisplay(Image(optimizer_workflow.get_graph().draw_mermaid_png()))\n\n# Invoke\nstate = optimizer_workflow.invoke({\"topic\": \"Cats\"})\nprint(state[\"joke\"])\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/86ab3e60-2000-4bff-b988-9b89a3269789/r</p> <p>\u8d44\u6e90:</p> <p>\u793a\u4f8b</p> <p>\u6b64\u5904\u662f\u4e00\u4e2a\u4f7f\u7528\u8bc4\u4f30\u5668-\u4f18\u5316\u5668\u6765\u6539\u8fdb\u62a5\u544a\u7684\u52a9\u624b\u3002\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u89c6\u9891\u6b64\u5904\u3002</p> <p>\u6b64\u5904\u662f\u4e00\u4e2a\u5bf9\u7b54\u6848\u8fdb\u884c\u5e7b\u89c9\u6216\u9519\u8bef\u8bc4\u5206\u7684 RAG \u5de5\u4f5c\u6d41\u3002\u8bf7\u53c2\u9605\u6211\u4eec\u7684\u89c6\u9891\u6b64\u5904\u3002</p> JavaScript <pre><code>// Graph state\nconst State = z.object({\n  joke: z.string().optional(),\n  topic: z.string(),\n  feedback: z.string().optional(),\n  funny_or_not: z.string().optional(),\n});\n\n// Schema for structured output to use in evaluation\nconst Feedback = z.object({\n  grade: z.enum([\"funny\", \"not funny\"]).describe(\"Decide if the joke is funny or not.\"),\n  feedback: z.string().describe(\"If the joke is not funny, provide feedback on how to improve it.\"),\n});\n\n// Augment the LLM with schema for structured output\nconst evaluator = llm.withStructuredOutput(Feedback);\n\n// Nodes\nconst llmCallGenerator = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // LLM generates a joke\n  let msg;\n  if (state.feedback) {\n    msg = await llm.invoke(\n      `Write a joke about ${state.topic} but take into account the feedback: ${state.feedback}`\n    );\n  } else {\n    msg = await llm.invoke(`Write a joke about ${state.topic}`);\n  }\n  return { joke: msg.content };\n};\n\nconst llmCallEvaluator = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // LLM evaluates the joke\n  const grade = await evaluator.invoke(`Grade the joke ${state.joke}`);\n  return { funny_or_not: grade.grade, feedback: grade.feedback };\n};\n\n// Conditional edge function to route back to joke generator or end\nconst routeJoke = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // Route back to joke generator or end based upon feedback from the evaluator\n  if (state.funny_or_not === \"funny\") {\n    return \"Accepted\";\n  } else if (state.funny_or_not === \"not funny\") {\n    return \"Rejected + Feedback\";\n  }\n};\n\n// Build workflow\nconst optimizerBuilder = new StateGraph(State)\n  .addNode(\"llm_call_generator\", llmCallGenerator)\n  .addNode(\"llm_call_evaluator\", llmCallEvaluator)\n  .addEdge(START, \"llm_call_generator\")\n  .addEdge(\"llm_call_generator\", \"llm_call_evaluator\")\n  .addConditionalEdges(\n    \"llm_call_evaluator\",\n    routeJoke,\n    {\n      \"Accepted\": END,\n      \"Rejected + Feedback\": \"llm_call_generator\",\n    }\n  );\n\n// Compile the workflow\nconst optimizerWorkflow = optimizerBuilder.compile();\n\n// Invoke\nconst state = await optimizerWorkflow.invoke({ topic: \"Cats\" });\nconsole.log(state.joke);\n</code></pre> Python <pre><code># Schema for structured output to use in evaluation\nclass Feedback(BaseModel):\n    grade: Literal[\"funny\", \"not funny\"] = Field(\n        description=\"Decide if the joke is funny or not.\",\n    )\n    feedback: str = Field(\n        description=\"If the joke is not funny, provide feedback on how to improve it.\",\n    )\n\n\n# Augment the LLM with schema for structured output\nevaluator = llm.with_structured_output(Feedback)\n\n\n# Nodes\n@task\ndef llm_call_generator(topic: str, feedback: Feedback):\n    \"\"\"LLM generates a joke\"\"\"\n    if feedback:\n        msg = llm.invoke(\n            f\"Write a joke about {topic} but take into account the feedback: {feedback}\"\n        )\n    else:\n        msg = llm.invoke(f\"Write a joke about {topic}\")\n    return msg.content\n\n\n@task\ndef llm_call_evaluator(joke: str):\n    \"\"\"LLM evaluates the joke\"\"\"\n    feedback = evaluator.invoke(f\"Grade the joke {joke}\")\n    return feedback\n\n\n@entrypoint()\ndef optimizer_workflow(topic: str):\n    feedback = None\n    while True:\n        joke = llm_call_generator(topic, feedback).result()\n        feedback = llm_call_evaluator(joke).result()\n        if feedback.grade == \"funny\":\n            break\n\n    return joke\n\n# Invoke\nfor step in optimizer_workflow.stream(\"Cats\", stream_mode=\"updates\"):\n    print(step)\n    print(\"\\n\")\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/f66830be-4339-4a6b-8a93-389ce5ae27b4/r</p> JavaScript <pre><code>// Schema for structured output to use in evaluation\nconst Feedback = z.object({\n  grade: z.enum([\"funny\", \"not funny\"]).describe(\"Decide if the joke is funny or not.\"),\n  feedback: z.string().describe(\"If the joke is not funny, provide feedback on how to improve it.\"),\n});\n\n// Augment the LLM with schema for structured output\nconst evaluator = llm.withStructuredOutput(Feedback);\n\n// Nodes\nconst llmCallGenerator = task(\"llm_call_generator\", async (topic: string, feedback?: string) =&gt; {\n  // LLM generates a joke\n  if (feedback) {\n    const msg = await llm.invoke(\n      `Write a joke about ${topic} but take into account the feedback: ${feedback}`\n    );\n    return msg.content;\n  } else {\n    const msg = await llm.invoke(`Write a joke about ${topic}`);\n    return msg.content;\n  }\n});\n\nconst llmCallEvaluator = task(\"llm_call_evaluator\", async (joke: string) =&gt; {\n  // LLM evaluates the joke\n  const feedback = await evaluator.invoke(`Grade the joke ${joke}`);\n  return feedback;\n});\n\nconst optimizerWorkflow = entrypoint(\"optimizerWorkflow\", async (topic: string) =&gt; {\n  let feedback;\n  while (true) {\n    const joke = await llmCallGenerator(topic, feedback?.feedback);\n    feedback = await llmCallEvaluator(joke);\n    if (feedback.grade === \"funny\") {\n      return joke;\n    }\n  }\n});\n\n// Invoke\nconst stream = await optimizerWorkflow.stream(\"Cats\", { streamMode: \"updates\" });\nfor await (const step of stream) {\n  console.log(step);\n  console.log(\"\\n\");\n}\n</code></pre>","boost":2},{"location":"tutorials/workflows/#_6","title":"\u667a\u80fd\u4f53","text":"<p>\u667a\u80fd\u4f53\u901a\u5e38\u5b9e\u73b0\u4e3a\u57fa\u4e8e\u5faa\u73af\u4e2d\u7684\u73af\u5883\u53cd\u9988\u6267\u884c\u64cd\u4f5c(\u901a\u8fc7\u5de5\u5177\u8c03\u7528)\u7684 LLM\u3002\u5982 Anthropic \u5173\u4e8e <code>Building Effective Agents</code> \u7684\u535a\u5ba2\u4e2d\u6240\u8ff0:</p> <p>\u667a\u80fd\u4f53\u53ef\u4ee5\u5904\u7406\u590d\u6742\u7684\u4efb\u52a1,\u4f46\u5b83\u4eec\u7684\u5b9e\u73b0\u901a\u5e38\u5f88\u7b80\u5355\u3002\u5b83\u4eec\u901a\u5e38\u53ea\u662f\u5728\u5faa\u73af\u4e2d\u57fa\u4e8e\u73af\u5883\u53cd\u9988\u4f7f\u7528\u5de5\u5177\u7684 LLM\u3002\u56e0\u6b64,\u6e05\u6670\u5468\u5230\u5730\u8bbe\u8ba1\u5de5\u5177\u96c6\u53ca\u5176\u6587\u6863\u81f3\u5173\u91cd\u8981\u3002</p> <p>\u4f55\u65f6\u4f7f\u7528\u667a\u80fd\u4f53:\u667a\u80fd\u4f53\u53ef\u7528\u4e8e\u96be\u4ee5\u6216\u4e0d\u53ef\u80fd\u9884\u6d4b\u6240\u9700\u6b65\u9aa4\u6570\u7684\u5f00\u653e\u6027\u95ee\u9898,\u4ee5\u53ca\u65e0\u6cd5\u786c\u7f16\u7801\u56fa\u5b9a\u8def\u5f84\u7684\u60c5\u51b5\u3002LLM \u53ef\u80fd\u4f1a\u8fd0\u884c\u8bb8\u591a\u8f6e,\u5e76\u4e14\u4f60\u5fc5\u987b\u5bf9\u5176\u51b3\u7b56\u6709\u4e00\u5b9a\u7a0b\u5ea6\u7684\u4fe1\u4efb\u3002\u667a\u80fd\u4f53\u7684\u81ea\u4e3b\u6027\u4f7f\u5b83\u4eec\u975e\u5e38\u9002\u5408\u5728\u53d7\u4fe1\u4efb\u7684\u73af\u5883\u4e2d\u6269\u5c55\u4efb\u52a1\u3002</p> <p></p> Python <pre><code>from langchain_core.tools import tool\n\n\n# Define tools\n@tool\ndef multiply(a: int, b: int) -&gt; int:\n    \"\"\"Multiply a and b.\n\n    Args:\n        a: first int\n        b: second int\n    \"\"\"\n    return a * b\n\n\n@tool\ndef add(a: int, b: int) -&gt; int:\n    \"\"\"Adds a and b.\n\n    Args:\n        a: first int\n        b: second int\n    \"\"\"\n    return a + b\n\n\n@tool\ndef divide(a: int, b: int) -&gt; float:\n    \"\"\"Divide a and b.\n\n    Args:\n        a: first int\n        b: second int\n    \"\"\"\n    return a / b\n\n\n# Augment the LLM with tools\ntools = [add, multiply, divide]\ntools_by_name = {tool.name: tool for tool in tools}\nllm_with_tools = llm.bind_tools(tools)\n</code></pre> JavaScript <pre><code>import { tool } from \"@langchain/core/tools\";\n\n// Define tools\nconst multiply = tool(\n  async ({ a, b }: { a: number; b: number }) =&gt; {\n    return a * b;\n  },\n  {\n    name: \"multiply\",\n    description: \"Multiply a and b.\",\n    schema: z.object({\n      a: z.number().describe(\"first int\"),\n      b: z.number().describe(\"second int\"),\n    }),\n  }\n);\n\nconst add = tool(\n  async ({ a, b }: { a: number; b: number }) =&gt; {\n    return a + b;\n  },\n  {\n    name: \"add\",\n    description: \"Adds a and b.\",\n    schema: z.object({\n      a: z.number().describe(\"first int\"),\n      b: z.number().describe(\"second int\"),\n    }),\n  }\n);\n\nconst divide = tool(\n  async ({ a, b }: { a: number; b: number }) =&gt; {\n    return a / b;\n  },\n  {\n    name: \"divide\",\n    description: \"Divide a and b.\",\n    schema: z.object({\n      a: z.number().describe(\"first int\"),\n      b: z.number().describe(\"second int\"),\n    }),\n  }\n);\n\n// Augment the LLM with tools\nconst tools = [add, multiply, divide];\nconst toolsByName = Object.fromEntries(tools.map((tool) =&gt; [tool.name, tool]));\nconst llmWithTools = llm.bindTools(tools);\n</code></pre> Graph APIFunctional API Python <pre><code>from langgraph.graph import MessagesState\nfrom langchain_core.messages import SystemMessage, HumanMessage, ToolMessage\n\n\n# Nodes\ndef llm_call(state: MessagesState):\n    \"\"\"LLM decides whether to call a tool or not\"\"\"\n\n    return {\n        \"messages\": [\n            llm_with_tools.invoke(\n                [\n                    SystemMessage(\n                        content=\"You are a helpful assistant tasked with performing arithmetic on a set of inputs.\"\n                    )\n                ]\n                + state[\"messages\"]\n            )\n        ]\n    }\n\n\ndef tool_node(state: dict):\n    \"\"\"Performs the tool call\"\"\"\n\n    result = []\n    for tool_call in state[\"messages\"][-1].tool_calls:\n        tool = tools_by_name[tool_call[\"name\"]]\n        observation = tool.invoke(tool_call[\"args\"])\n        result.append(ToolMessage(content=observation, tool_call_id=tool_call[\"id\"]))\n    return {\"messages\": result}\n\n\n# Conditional edge function to route to the tool node or end based upon whether the LLM made a tool call\ndef should_continue(state: MessagesState) -&gt; Literal[\"Action\", END]:\n    \"\"\"Decide if we should continue the loop or stop based upon whether the LLM made a tool call\"\"\"\n\n    messages = state[\"messages\"]\n    last_message = messages[-1]\n    # If the LLM makes a tool call, then perform an action\n    if last_message.tool_calls:\n        return \"Action\"\n    # Otherwise, we stop (reply to the user)\n    return END\n\n\n# Build workflow\nagent_builder = StateGraph(MessagesState)\n\n# Add nodes\nagent_builder.add_node(\"llm_call\", llm_call)\nagent_builder.add_node(\"environment\", tool_node)\n\n# Add edges to connect nodes\nagent_builder.add_edge(START, \"llm_call\")\nagent_builder.add_conditional_edges(\n    \"llm_call\",\n    should_continue,\n    {\n        # Name returned by should_continue : Name of next node to visit\n        \"Action\": \"environment\",\n        END: END,\n    },\n)\nagent_builder.add_edge(\"environment\", \"llm_call\")\n\n# Compile the agent\nagent = agent_builder.compile()\n\n# Show the agent\ndisplay(Image(agent.get_graph(xray=True).draw_mermaid_png()))\n\n# Invoke\nmessages = [HumanMessage(content=\"Add 3 and 4.\")]\nmessages = agent.invoke({\"messages\": messages})\nfor m in messages[\"messages\"]:\n    m.pretty_print()\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/051f0391-6761-4f8c-a53b-22231b016690/r</p> <p>\u8d44\u6e90:</p> <p>LangChain Academy</p> <p>\u8bf7\u53c2\u9605\u6211\u4eec\u5173\u4e8e\u667a\u80fd\u4f53\u7684\u8bfe\u7a0b\u6b64\u5904\u3002</p> <p>\u793a\u4f8b</p> <p>\u6b64\u5904\u662f\u4e00\u4e2a\u4f7f\u7528\u5de5\u5177\u8c03\u7528\u667a\u80fd\u4f53\u521b\u5efa/\u5b58\u50a8\u957f\u671f\u8bb0\u5fc6\u7684\u9879\u76ee\u3002</p> JavaScript <pre><code>import { MessagesZodState, ToolNode } from \"@langchain/langgraph/prebuilt\";\nimport { SystemMessage, HumanMessage, ToolMessage, isAIMessage } from \"@langchain/core/messages\";\n\n// Nodes\nconst llmCall = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // LLM decides whether to call a tool or not\n  const response = await llmWithTools.invoke([\n    new SystemMessage(\n      \"You are a helpful assistant tasked with performing arithmetic on a set of inputs.\"\n    ),\n    ...state.messages,\n  ]);\n  return { messages: [response] };\n};\n\nconst toolNode = new ToolNode(tools);\n\n// Conditional edge function to route to the tool node or end\nconst shouldContinue = (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  // Decide if we should continue the loop or stop\n  const messages = state.messages;\n  const lastMessage = messages[messages.length - 1];\n  // If the LLM makes a tool call, then perform an action\n  if (isAIMessage(lastMessage) &amp;&amp; lastMessage.tool_calls?.length) {\n    return \"Action\";\n  }\n  // Otherwise, we stop (reply to the user)\n  return END;\n};\n\n// Build workflow\nconst agentBuilder = new StateGraph(MessagesZodState)\n  .addNode(\"llm_call\", llmCall)\n  .addNode(\"environment\", toolNode)\n  .addEdge(START, \"llm_call\")\n  .addConditionalEdges(\n    \"llm_call\",\n    shouldContinue,\n    {\n      \"Action\": \"environment\",\n      [END]: END,\n    }\n  )\n  .addEdge(\"environment\", \"llm_call\");\n\n// Compile the agent\nconst agent = agentBuilder.compile();\n\n// Invoke\nconst messages = [new HumanMessage(\"Add 3 and 4.\")];\nconst result = await agent.invoke({ messages });\nfor (const m of result.messages) {\n  console.log(`${m.getType()}: ${m.content}`);\n}\n</code></pre> Python <pre><code>from langgraph.graph import add_messages\nfrom langchain_core.messages import (\n    SystemMessage,\n    HumanMessage,\n    BaseMessage,\n    ToolCall,\n)\n\n\n@task\ndef call_llm(messages: list[BaseMessage]):\n    \"\"\"LLM decides whether to call a tool or not\"\"\"\n    return llm_with_tools.invoke(\n        [\n            SystemMessage(\n                content=\"You are a helpful assistant tasked with performing arithmetic on a set of inputs.\"\n            )\n        ]\n        + messages\n    )\n\n\n@task\ndef call_tool(tool_call: ToolCall):\n    \"\"\"Performs the tool call\"\"\"\n    tool = tools_by_name[tool_call[\"name\"]]\n    return tool.invoke(tool_call)\n\n\n@entrypoint()\ndef agent(messages: list[BaseMessage]):\n    llm_response = call_llm(messages).result()\n\n    while True:\n        if not llm_response.tool_calls:\n            break\n\n        # Execute tools\n        tool_result_futures = [\n            call_tool(tool_call) for tool_call in llm_response.tool_calls\n        ]\n        tool_results = [fut.result() for fut in tool_result_futures]\n        messages = add_messages(messages, [llm_response, *tool_results])\n        llm_response = call_llm(messages).result()\n\n    messages = add_messages(messages, llm_response)\n    return messages\n\n# Invoke\nmessages = [HumanMessage(content=\"Add 3 and 4.\")]\nfor chunk in agent.stream(messages, stream_mode=\"updates\"):\n    print(chunk)\n    print(\"\\n\")\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/42ae8bf9-3935-4504-a081-8ddbcbfc8b2e/r</p> JavaScript <pre><code>import { addMessages } from \"@langchain/langgraph\";\nimport {\n  SystemMessage,\n  HumanMessage,\n  BaseMessage,\n  ToolCall,\n} from \"@langchain/core/messages\";\n\nconst callLlm = task(\"call_llm\", async (messages: BaseMessage[]) =&gt; {\n  // LLM decides whether to call a tool or not\n  return await llmWithTools.invoke([\n    new SystemMessage(\n      \"You are a helpful assistant tasked with performing arithmetic on a set of inputs.\"\n    ),\n    ...messages,\n  ]);\n});\n\nconst callTool = task(\"call_tool\", async (toolCall: ToolCall) =&gt; {\n  // Performs the tool call\n  const tool = toolsByName[toolCall.name];\n  return await tool.invoke(toolCall);\n});\n\nconst agent = entrypoint(\"agent\", async (messages: BaseMessage[]) =&gt; {\n  let currentMessages = messages;\n  let llmResponse = await callLlm(currentMessages);\n\n  while (true) {\n    if (!llmResponse.tool_calls?.length) {\n      break;\n    }\n\n    // Execute tools\n    const toolResults = await Promise.all(\n      llmResponse.tool_calls.map((toolCall) =&gt; callTool(toolCall))\n    );\n\n    // Append to message list\n    currentMessages = addMessages(currentMessages, [\n      llmResponse,\n      ...toolResults,\n    ]);\n\n    // Call model again\n    llmResponse = await callLlm(currentMessages);\n  }\n\n  return llmResponse;\n});\n\n// Invoke\nconst messages = [new HumanMessage(\"Add 3 and 4.\")];\nconst stream = await agent.stream(messages, { streamMode: \"updates\" });\nfor await (const chunk of stream) {\n  console.log(chunk);\n  console.log(\"\\n\");\n}\n</code></pre>","boost":2},{"location":"tutorials/workflows/#_7","title":"\u9884\u6784\u5efa","text":"Python <p>LangGraph \u8fd8\u63d0\u4f9b\u4e86\u4e00\u79cd**\u9884\u6784\u5efa\u65b9\u6cd5**\u6765\u521b\u5efa\u5982\u4e0a\u6240\u5b9a\u4e49\u7684\u667a\u80fd\u4f53(\u4f7f\u7528 @[<code>create_react_agent</code>][] \u51fd\u6570):</p> <p>https://langchain-ai.github.io/langgraph/how-tos/create-react-agent/</p> <pre><code>from langgraph.prebuilt import create_react_agent\n\n# \u4f20\u5165:\n# (1) \u5e26\u6709\u5de5\u5177\u7684\u589e\u5f3a LLM\n# (2) \u5de5\u5177\u5217\u8868(\u7528\u4e8e\u521b\u5efa\u5de5\u5177\u8282\u70b9)\npre_built_agent = create_react_agent(llm, tools=tools)\n\n# \u663e\u793a\u667a\u80fd\u4f53\ndisplay(Image(pre_built_agent.get_graph().draw_mermaid_png()))\n\n# \u8c03\u7528\nmessages = [HumanMessage(content=\"Add 3 and 4.\")]\nmessages = pre_built_agent.invoke({\"messages\": messages})\nfor m in messages[\"messages\"]:\n    m.pretty_print()\n</code></pre> <p>LangSmith Trace</p> <p>https://smith.langchain.com/public/abab6a44-29f6-4b97-8164-af77413e494d/r</p> JavaScript <p>LangGraph \u8fd8\u63d0\u4f9b\u4e86\u4e00\u79cd**\u9884\u6784\u5efa\u65b9\u6cd5**\u6765\u521b\u5efa\u5982\u4e0a\u6240\u5b9a\u4e49\u7684\u667a\u80fd\u4f53(\u4f7f\u7528 @[<code>createReactAgent</code>][create_react_agent] \u51fd\u6570):</p> <pre><code>import { createReactAgent } from \"@langchain/langgraph/prebuilt\";\n\n// \u4f20\u5165:\n// (1) \u5e26\u6709\u5de5\u5177\u7684\u589e\u5f3a LLM\n// (2) \u5de5\u5177\u5217\u8868(\u7528\u4e8e\u521b\u5efa\u5de5\u5177\u8282\u70b9)\nconst preBuiltAgent = createReactAgent({ llm, tools });\n\n// \u8c03\u7528\nconst messages = [new HumanMessage(\"Add 3 and 4.\")];\nconst result = await preBuiltAgent.invoke({ messages });\nfor (const m of result.messages) {\n  console.log(`${m.getType()}: ${m.content}`);\n}\n</code></pre>","boost":2},{"location":"tutorials/workflows/#langgraph","title":"LangGraph \u63d0\u4f9b\u7684\u529f\u80fd","text":"<p>\u901a\u8fc7\u5728 LangGraph \u4e2d\u6784\u5efa\u4e0a\u8ff0\u6bcf\u4e00\u4e2a,\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e9b\u4e1c\u897f:</p>","boost":2},{"location":"tutorials/workflows/#_8","title":"\u6301\u4e45\u5316:\u4eba\u673a\u534f\u540c","text":"<p>LangGraph \u6301\u4e45\u5316\u5c42\u652f\u6301\u4e2d\u65ad\u548c\u64cd\u4f5c\u6279\u51c6(\u4f8b\u5982,\u4eba\u673a\u534f\u540c)\u3002\u8bf7\u53c2\u9605 LangChain Academy \u7684\u6a21\u5757 3\u3002</p>","boost":2},{"location":"tutorials/workflows/#_9","title":"\u6301\u4e45\u5316:\u8bb0\u5fc6","text":"<p>LangGraph \u6301\u4e45\u5316\u5c42\u652f\u6301\u5bf9\u8bdd(\u77ed\u671f)\u8bb0\u5fc6\u548c\u957f\u671f\u8bb0\u5fc6\u3002\u8bf7\u53c2\u9605 LangChain Academy \u7684\u6a21\u5757 2\u548c\u6a21\u5757 5:</p>","boost":2},{"location":"tutorials/workflows/#_10","title":"\u6d41\u5f0f\u5904\u7406","text":"<p>LangGraph \u63d0\u4f9b\u4e86\u51e0\u79cd\u6d41\u5f0f\u5904\u7406\u5de5\u4f5c\u6d41/\u667a\u80fd\u4f53\u8f93\u51fa\u6216\u4e2d\u95f4\u72b6\u6001\u7684\u65b9\u6cd5\u3002\u8bf7\u53c2\u9605 LangChain Academy \u7684\u6a21\u5757 3\u3002</p>","boost":2},{"location":"tutorials/workflows/#_11","title":"\u90e8\u7f72","text":"<p>LangGraph \u4e3a\u90e8\u7f72\u3001\u53ef\u89c2\u6d4b\u6027\u548c\u8bc4\u4f30\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u5165\u53e3\u3002\u8bf7\u53c2\u9605 LangChain Academy \u7684\u6a21\u5757 6\u3002</p>","boost":2},{"location":"tutorials/auth/add_auth_server/","title":"\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f","text":"<p>\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d,\u4f60\u6dfb\u52a0\u4e86\u8d44\u6e90\u6388\u6743\u4ee5\u8ba9\u7528\u6237\u62e5\u6709\u79c1\u5bc6\u5bf9\u8bdd\u3002\u7136\u800c,\u4f60\u4ecd\u5728\u4f7f\u7528\u786c\u7f16\u7801\u7684\u4ee4\u724c\u8fdb\u884c\u8eab\u4efd\u9a8c\u8bc1,\u8fd9\u5e76\u4e0d\u5b89\u5168\u3002\u73b0\u5728\u4f60\u5c06\u4f7f\u7528 OAuth2 \u5c06\u8fd9\u4e9b\u4ee4\u724c\u66ff\u6362\u4e3a\u771f\u5b9e\u7684\u7528\u6237\u5e10\u6237\u3002</p> Python <p>\u4f60\u5c06\u4fdd\u7559\u76f8\u540c\u7684 <code>Auth</code> \u5bf9\u8c61\u548c\u8d44\u6e90\u7ea7\u8bbf\u95ee\u63a7\u5236,\u4f46\u5c06\u8eab\u4efd\u9a8c\u8bc1\u5347\u7ea7\u4e3a\u4f7f\u7528 Supabase \u4f5c\u4e3a\u4f60\u7684\u8eab\u4efd\u63d0\u4f9b\u8005\u3002\u867d\u7136\u672c\u6559\u7a0b\u4f7f\u7528 Supabase,\u4f46\u8fd9\u4e9b\u6982\u5ff5\u9002\u7528\u4e8e\u4efb\u4f55 OAuth2 \u63d0\u4f9b\u8005\u3002\u4f60\u5c06\u5b66\u4e60\u5982\u4f55:</p> JavaScript <p>\u4f60\u5c06\u4fdd\u7559\u76f8\u540c\u7684 <code>Auth</code> \u5bf9\u8c61\u548c\u8d44\u6e90\u7ea7\u8bbf\u95ee\u63a7\u5236,\u4f46\u5c06\u8eab\u4efd\u9a8c\u8bc1\u5347\u7ea7\u4e3a\u4f7f\u7528 Supabase \u4f5c\u4e3a\u4f60\u7684\u8eab\u4efd\u63d0\u4f9b\u8005\u3002\u867d\u7136\u672c\u6559\u7a0b\u4f7f\u7528 Supabase,\u4f46\u8fd9\u4e9b\u6982\u5ff5\u9002\u7528\u4e8e\u4efb\u4f55 OAuth2 \u63d0\u4f9b\u8005\u3002\u4f60\u5c06\u5b66\u4e60\u5982\u4f55:</p> <ol> <li>\u7528\u771f\u5b9e\u7684 JWT \u4ee4\u724c\u66ff\u6362\u6d4b\u8bd5\u4ee4\u724c</li> <li>\u4e0e OAuth2 \u63d0\u4f9b\u8005\u96c6\u6210\u4ee5\u5b9e\u73b0\u5b89\u5168\u7684\u7528\u6237\u8eab\u4efd\u9a8c\u8bc1</li> <li>\u5728\u7ef4\u62a4\u73b0\u6709\u6388\u6743\u903b\u8f91\u7684\u540c\u65f6\u5904\u7406\u7528\u6237\u4f1a\u8bdd\u548c\u5143\u6570\u636e</li> </ol>"},{"location":"tutorials/auth/add_auth_server/#_2","title":"\u80cc\u666f","text":"<p>OAuth2 \u6d89\u53ca\u4e09\u4e2a\u4e3b\u8981\u89d2\u8272:</p> <ol> <li>\u6388\u6743\u670d\u52a1\u5668:\u5904\u7406\u7528\u6237\u8eab\u4efd\u9a8c\u8bc1\u5e76\u9881\u53d1\u4ee4\u724c\u7684\u8eab\u4efd\u63d0\u4f9b\u8005(\u4f8b\u5982 Supabase\u3001Auth0\u3001Google)</li> <li>\u5e94\u7528\u540e\u7aef:\u4f60\u7684 LangGraph \u5e94\u7528\u3002\u5b83\u9a8c\u8bc1\u4ee4\u724c\u5e76\u63d0\u4f9b\u53d7\u4fdd\u62a4\u7684\u8d44\u6e90(\u5bf9\u8bdd\u6570\u636e)</li> <li>\u5ba2\u6237\u7aef\u5e94\u7528:\u7528\u6237\u4e0e\u4f60\u7684\u670d\u52a1\u4ea4\u4e92\u7684 Web \u6216\u79fb\u52a8\u5e94\u7528</li> </ol> <p>\u6807\u51c6\u7684 OAuth2 \u6d41\u7a0b\u5de5\u4f5c\u65b9\u5f0f\u5982\u4e0b:</p> <pre><code>sequenceDiagram\n    participant User\n    participant Client\n    participant AuthServer\n    participant LangGraph Backend\n\n    User-&gt;&gt;Client: \u53d1\u8d77\u767b\u5f55\n    User-&gt;&gt;AuthServer: \u8f93\u5165\u51ed\u636e\n    AuthServer-&gt;&gt;Client: \u53d1\u9001\u4ee4\u724c\n    Client-&gt;&gt;LangGraph Backend: \u643a\u5e26\u4ee4\u724c\u7684\u8bf7\u6c42\n    LangGraph Backend-&gt;&gt;AuthServer: \u9a8c\u8bc1\u4ee4\u724c\n    AuthServer-&gt;&gt;LangGraph Backend: \u4ee4\u724c\u6709\u6548\n    LangGraph Backend-&gt;&gt;Client: \u63d0\u4f9b\u8bf7\u6c42\u670d\u52a1(\u4f8b\u5982,\u8fd0\u884c\u667a\u80fd\u4f53\u6216\u56fe)</code></pre>"},{"location":"tutorials/auth/add_auth_server/#_3","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u672c\u6559\u7a0b\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u5df2\u7ecf:</p> <ul> <li>\u7b2c\u4e8c\u4e2a\u6559\u7a0b\u4e2d\u7684\u673a\u5668\u4eba\u8fd0\u884c\u6ca1\u6709\u9519\u8bef\u3002</li> <li>\u4e00\u4e2a Supabase \u9879\u76ee\u7528\u4f5c\u4f60\u7684\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1\u5668\u3002</li> </ul>"},{"location":"tutorials/auth/add_auth_server/#1","title":"1. \u5b89\u88c5\u4f9d\u8d56\u9879","text":"<p>\u5b89\u88c5\u6240\u9700\u7684\u4f9d\u8d56\u9879\u3002\u4ece\u4f60\u7684 <code>custom-auth</code> \u76ee\u5f55\u5f00\u59cb,\u786e\u4fdd\u4f60\u5df2\u5b89\u88c5 <code>langgraph-cli</code>:</p> Python <pre><code>cd custom-auth\npip install -U \"langgraph-cli[inmem]\"\n</code></pre> JavaScript <pre><code>cd custom-auth\nnpm install -g @langchain/langgraph-cli\n</code></pre>"},{"location":"tutorials/auth/add_auth_server/#setup-auth-provider","title":"2. \u8bbe\u7f6e\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f","text":"<p>\u63a5\u4e0b\u6765,\u83b7\u53d6\u4f60\u7684\u8ba4\u8bc1\u670d\u52a1\u5668\u7684 URL \u548c\u7528\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u7684\u79c1\u94a5\u3002 \u7531\u4e8e\u4f60\u5728\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528 Supabase,\u4f60\u53ef\u4ee5\u5728 Supabase \u4eea\u8868\u677f\u4e2d\u6267\u884c\u6b64\u64cd\u4f5c:</p> <ol> <li>\u5728\u5de6\u4fa7\u8fb9\u680f\u4e2d,\u70b9\u51fb\"\u2699\ufe0f Project Settings\",\u7136\u540e\u70b9\u51fb\"API\"</li> <li> <p>\u590d\u5236\u4f60\u7684\u9879\u76ee URL \u5e76\u5c06\u5176\u6dfb\u52a0\u5230\u4f60\u7684 <code>.env</code> \u6587\u4ef6</p> <pre><code>echo \"SUPABASE_URL=your-project-url\" &gt;&gt; .env\n</code></pre> </li> <li> <p>\u590d\u5236\u4f60\u7684 service role secret key \u5e76\u5c06\u5176\u6dfb\u52a0\u5230\u4f60\u7684 <code>.env</code> \u6587\u4ef6:</p> <pre><code>echo \"SUPABASE_SERVICE_KEY=your-service-role-key\" &gt;&gt; .env\n</code></pre> </li> <li> <p>\u590d\u5236\u4f60\u7684\"anon public\"\u5bc6\u94a5\u5e76\u8bb0\u5f55\u4e0b\u6765\u3002\u8fd9\u5c06\u5728\u7a0d\u540e\u8bbe\u7f6e\u5ba2\u6237\u7aef\u4ee3\u7801\u65f6\u4f7f\u7528\u3002</p> <pre><code>SUPABASE_URL=your-project-url\nSUPABASE_SERVICE_KEY=your-service-role-key\n</code></pre> </li> </ol>"},{"location":"tutorials/auth/add_auth_server/#3","title":"3. \u5b9e\u73b0\u4ee4\u724c\u9a8c\u8bc1","text":"Python <p>\u5728\u4e4b\u524d\u7684\u6559\u7a0b\u4e2d,\u4f60\u4f7f\u7528 <code>Auth</code> \u5bf9\u8c61\u6765\u9a8c\u8bc1\u786c\u7f16\u7801\u7684\u4ee4\u724c\u5e76\u6dfb\u52a0\u8d44\u6e90\u6240\u6709\u6743\u3002</p> <p>\u73b0\u5728\u4f60\u5c06\u5347\u7ea7\u8eab\u4efd\u9a8c\u8bc1\u4ee5\u9a8c\u8bc1\u6765\u81ea Supabase \u7684\u771f\u5b9e JWT \u4ee4\u724c\u3002\u6240\u6709\u4e3b\u8981\u66f4\u6539\u90fd\u5c06\u5728 <code>@auth.authenticate</code> \u88c5\u9970\u7684\u51fd\u6570\u4e2d:</p> JavaScript <p>\u5728\u4e4b\u524d\u7684\u6559\u7a0b\u4e2d,\u4f60\u4f7f\u7528 <code>Auth</code> \u5bf9\u8c61\u6765\u9a8c\u8bc1\u786c\u7f16\u7801\u7684\u4ee4\u724c\u5e76\u6dfb\u52a0\u8d44\u6e90\u6240\u6709\u6743\u3002</p> <p>\u73b0\u5728\u4f60\u5c06\u5347\u7ea7\u8eab\u4efd\u9a8c\u8bc1\u4ee5\u9a8c\u8bc1\u6765\u81ea Supabase \u7684\u771f\u5b9e JWT \u4ee4\u724c\u3002\u6240\u6709\u4e3b\u8981\u66f4\u6539\u90fd\u5c06\u5728 <code>auth.authenticate</code> \u88c5\u9970\u7684\u51fd\u6570\u4e2d:</p> <ul> <li>\u4f60\u5c06\u53d1\u51fa HTTP \u8bf7\u6c42\u5230 Supabase \u6765\u9a8c\u8bc1\u4ee4\u724c,\u800c\u4e0d\u662f\u6839\u636e\u786c\u7f16\u7801\u7684\u4ee4\u724c\u5217\u8868\u8fdb\u884c\u68c0\u67e5\u3002</li> <li>\u4f60\u5c06\u4ece\u9a8c\u8bc1\u7684\u4ee4\u724c\u4e2d\u63d0\u53d6\u771f\u5b9e\u7684\u7528\u6237\u4fe1\u606f(ID\u3001\u7535\u5b50\u90ae\u4ef6)\u3002</li> <li>\u73b0\u6709\u7684\u8d44\u6e90\u6388\u6743\u903b\u8f91\u4fdd\u6301\u4e0d\u53d8\u3002</li> </ul> Python <p>\u66f4\u65b0 <code>src/security/auth.py</code> \u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9:</p> src/security/auth.py<pre><code>import os\nimport httpx\nfrom langgraph_sdk import Auth\n\nauth = Auth()\n\n# \u8fd9\u662f\u4ece\u4f60\u4e0a\u9762\u521b\u5efa\u7684 `.env` \u6587\u4ef6\u4e2d\u52a0\u8f7d\u7684\nSUPABASE_URL = os.environ[\"SUPABASE_URL\"]\nSUPABASE_SERVICE_KEY = os.environ[\"SUPABASE_SERVICE_KEY\"]\n\n\n@auth.authenticate\nasync def get_current_user(authorization: str | None):\n    \"\"\"\u9a8c\u8bc1 JWT \u4ee4\u724c\u5e76\u63d0\u53d6\u7528\u6237\u4fe1\u606f\u3002\"\"\"\n    assert authorization\n    scheme, token = authorization.split()\n    assert scheme.lower() == \"bearer\"\n\n    try:\n        # \u4f7f\u7528\u8ba4\u8bc1\u63d0\u4f9b\u8005\u9a8c\u8bc1\u4ee4\u724c\n        async with httpx.AsyncClient() as client:\n            response = await client.get(\n                f\"{SUPABASE_URL}/auth/v1/user\",\n                headers={\n                    \"Authorization\": authorization,\n                    \"apiKey\": SUPABASE_SERVICE_KEY,\n                },\n            )\n            assert response.status_code == 200\n            user = response.json()\n            return {\n                \"identity\": user[\"id\"],  # \u552f\u4e00\u7528\u6237\u6807\u8bc6\u7b26\n                \"email\": user[\"email\"],\n                \"is_authenticated\": True,\n            }\n    except Exception as e:\n        raise Auth.exceptions.HTTPException(status_code=401, detail=str(e))\n\n# ... \u5176\u4f59\u90e8\u5206\u4e0e\u4e4b\u524d\u76f8\u540c\n\n# \u4fdd\u7559\u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u8d44\u6e90\u6388\u6743\n@auth.on\nasync def add_owner(ctx, value):\n    \"\"\"\u4f7f\u7528\u8d44\u6e90\u5143\u6570\u636e\u4f7f\u8d44\u6e90\u5bf9\u5176\u521b\u5efa\u8005\u79c1\u5bc6\u3002\"\"\"\n    filters = {\"owner\": ctx.user.identity}\n    metadata = value.setdefault(\"metadata\", {})\n    metadata.update(filters)\n    return filters\n</code></pre> JavaScript <p>\u66f4\u65b0 <code>src/security/auth.ts</code> \u6765\u5b9e\u73b0\u8fd9\u4e00\u70b9:</p> src/security/auth.ts<pre><code>import { Auth } from \"@langchain/langgraph-sdk\";\n\n// \u8fd9\u662f\u4ece\u4f60\u4e0a\u9762\u521b\u5efa\u7684 `.env` \u6587\u4ef6\u4e2d\u52a0\u8f7d\u7684\nconst SUPABASE_URL = process.env.SUPABASE_URL;\nconst SUPABASE_SERVICE_KEY = process.env.SUPABASE_SERVICE_KEY;\n\nconst auth = new Auth()\n  .authenticate(async (request) =&gt; {\n    // \u9a8c\u8bc1 JWT \u4ee4\u724c\u5e76\u63d0\u53d6\u7528\u6237\u4fe1\u606f\u3002\n    const apiKey = request.headers.get(\"x-api-key\");\n    if (!apiKey || !isValidKey(apiKey)) {\n      throw new HTTPException(401, \"Invalid API key\");\n    }\n\n    const [scheme, token] = apiKey.split(\" \");\n    if (scheme.toLowerCase() !== \"bearer\") {\n      throw new Error(\"Invalid authorization scheme\");\n    }\n\n    try {\n      // \u4f7f\u7528\u8ba4\u8bc1\u63d0\u4f9b\u8005\u9a8c\u8bc1\u4ee4\u724c\n      const response = await fetch(`${SUPABASE_URL}/auth/v1/user`, {\n        headers: {\n          Authorization: authorization,\n          apiKey: SUPABASE_SERVICE_KEY!,\n        },\n      });\n\n      if (response.status !== 200) {\n        throw new Error(\"Invalid token\");\n      }\n\n      const user = await response.json();\n      return {\n        identity: user.id, // \u552f\u4e00\u7528\u6237\u6807\u8bc6\u7b26\n        email: user.email,\n        is_authenticated: true,\n      };\n    } catch (e) {\n      throw new Auth.HTTPException(401, String(e));\n    }\n  })\n  .on(async ({ user, value }) =&gt; {\n    // \u4fdd\u7559\u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u8d44\u6e90\u6388\u6743\n    // \u4f7f\u7528\u8d44\u6e90\u5143\u6570\u636e\u4f7f\u8d44\u6e90\u5bf9\u5176\u521b\u5efa\u8005\u79c1\u5bc6\u3002\n    const filters = { owner: user.identity };\n    const metadata = value.metadata || {};\n    Object.assign(metadata, filters);\n    value.metadata = metadata;\n    return filters;\n  });\n\nexport { auth };\n</code></pre> <p>\u6700\u91cd\u8981\u7684\u53d8\u5316\u662f\u6211\u4eec\u73b0\u5728\u4f7f\u7528\u771f\u5b9e\u7684\u8eab\u4efd\u9a8c\u8bc1\u670d\u52a1\u5668\u9a8c\u8bc1\u4ee4\u724c\u3002\u6211\u4eec\u7684\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u7a0b\u5e8f\u62e5\u6709 Supabase \u9879\u76ee\u7684\u79c1\u94a5,\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u9a8c\u8bc1\u7528\u6237\u7684\u4ee4\u724c\u5e76\u63d0\u53d6\u4ed6\u4eec\u7684\u4fe1\u606f\u3002</p>"},{"location":"tutorials/auth/add_auth_server/#4","title":"4. \u6d4b\u8bd5\u8eab\u4efd\u9a8c\u8bc1\u6d41\u7a0b","text":"<p>\u8ba9\u6211\u4eec\u6d4b\u8bd5\u65b0\u7684\u8eab\u4efd\u9a8c\u8bc1\u6d41\u7a0b\u3002\u4f60\u53ef\u4ee5\u5728\u6587\u4ef6\u6216\u7b14\u8bb0\u672c\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u4ee3\u7801\u3002\u4f60\u9700\u8981\u63d0\u4f9b:</p> <ul> <li>\u4e00\u4e2a\u6709\u6548\u7684\u7535\u5b50\u90ae\u4ef6\u5730\u5740</li> <li>Supabase \u9879\u76ee URL(\u6765\u81ea\u4e0a\u9762)</li> <li>Supabase anon \u516c\u94a5(\u4e5f\u6765\u81ea\u4e0a\u9762)</li> </ul> Python <pre><code>import os\nimport httpx\nfrom getpass import getpass\nfrom langgraph_sdk import get_client\n\n\n# \u4ece\u547d\u4ee4\u884c\u83b7\u53d6\u7535\u5b50\u90ae\u4ef6\nemail = getpass(\"Enter your email: \")\nbase_email = email.split(\"@\")\npassword = \"secure-password\"  # \u4fee\u6539\u8fd9\u91cc\nemail1 = f\"{base_email[0]}+1@{base_email[1]}\"\nemail2 = f\"{base_email[0]}+2@{base_email[1]}\"\n\nSUPABASE_URL = os.environ.get(\"SUPABASE_URL\")\nif not SUPABASE_URL:\n    SUPABASE_URL = getpass(\"Enter your Supabase project URL: \")\n\n# \u8fd9\u662f\u4f60\u7684\u516c\u5171 anon \u5bc6\u94a5(\u5728\u5ba2\u6237\u7aef\u4f7f\u7528\u662f\u5b89\u5168\u7684)\n# \u4e0d\u8981\u5c06\u5176\u4e0e\u79d8\u5bc6 service role \u5bc6\u94a5\u6df7\u6dc6\nSUPABASE_ANON_KEY = os.environ.get(\"SUPABASE_ANON_KEY\")\nif not SUPABASE_ANON_KEY:\n    SUPABASE_ANON_KEY = getpass(\"Enter your public Supabase anon  key: \")\n\n\nasync def sign_up(email: str, password: str):\n    \"\"\"\u521b\u5efa\u65b0\u7684\u7528\u6237\u5e10\u6237\u3002\"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.post(\n            f\"{SUPABASE_URL}/auth/v1/signup\",\n            json={\"email\": email, \"password\": password},\n            headers={\"apiKey\": SUPABASE_ANON_KEY},\n        )\n        assert response.status_code == 200\n        return response.json()\n\n# \u521b\u5efa\u4e24\u4e2a\u6d4b\u8bd5\u7528\u6237\nprint(f\"Creating test users: {email1} and {email2}\")\nawait sign_up(email1, password)\nawait sign_up(email2, password)\n</code></pre> JavaScript <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\n// \u4ece\u547d\u4ee4\u884c\u83b7\u53d6\u7535\u5b50\u90ae\u4ef6\nconst email = process.env.TEST_EMAIL || \"your-email@example.com\";\nconst baseEmail = email.split(\"@\");\nconst password = \"secure-password\"; // \u4fee\u6539\u8fd9\u91cc\nconst email1 = `${baseEmail[0]}+1@${baseEmail[1]}`;\nconst email2 = `${baseEmail[0]}+2@${baseEmail[1]}`;\n\nconst SUPABASE_URL = process.env.SUPABASE_URL;\nif (!SUPABASE_URL) {\n  throw new Error(\"SUPABASE_URL environment variable is required\");\n}\n\n// \u8fd9\u662f\u4f60\u7684\u516c\u5171 anon \u5bc6\u94a5\uff08\u5728\u5ba2\u6237\u7aef\u4f7f\u7528\u662f\u5b89\u5168\u7684\uff09\n// \u4e0d\u8981\u5c06\u5176\u4e0e\u79d8\u5bc6 service role \u5bc6\u94a5\u6df7\u6dc6\nconst SUPABASE_ANON_KEY = process.env.SUPABASE_ANON_KEY;\nif (!SUPABASE_ANON_KEY) {\n  throw new Error(\"SUPABASE_ANON_KEY environment variable is required\");\n}\n\nasync function signUp(email: string, password: string) {\n  /**\u521b\u5efa\u65b0\u7684\u7528\u6237\u5e10\u6237\u3002*/\n  const response = await fetch(`${SUPABASE_URL}/auth/v1/signup`, {\n    method: \"POST\",\n    headers: {\n      apiKey: SUPABASE_ANON_KEY,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({ email, password }),\n  });\n\n  if (response.status !== 200) {\n    throw new Error(`Failed to sign up: ${response.statusText}`);\n  }\n\n  return response.json();\n}\n\n// \u521b\u5efa\u4e24\u4e2a\u6d4b\u8bd5\u7528\u6237\nconsole.log(`Creating test users: ${email1} and ${email2}`);\nawait signUp(email1, password);\nawait signUp(email2, password);\n</code></pre> <p>\u26a0\ufe0f \u7ee7\u7eed\u4e4b\u524d\uff1a\u68c0\u67e5\u4f60\u7684\u7535\u5b50\u90ae\u4ef6\u5e76\u70b9\u51fb\u4e24\u4e2a\u786e\u8ba4\u94fe\u63a5\u3002Supabase \u5c06\u62d2\u7edd <code>/login</code> \u8bf7\u6c42\uff0c\u76f4\u5230\u4f60\u786e\u8ba4\u4e86\u7528\u6237\u7684\u7535\u5b50\u90ae\u4ef6\u3002</p> <p>\u73b0\u5728\u6d4b\u8bd5\u7528\u6237\u53ea\u80fd\u770b\u5230\u81ea\u5df1\u7684\u6570\u636e\u3002\u5728\u7ee7\u7eed\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u670d\u52a1\u5668\u6b63\u5728\u8fd0\u884c\uff08\u8fd0\u884c <code>langgraph dev</code>\uff09\u3002\u4ee5\u4e0b\u4ee3\u7801\u7247\u6bb5\u9700\u8981\u4f60\u4e4b\u524d\u5728\u8bbe\u7f6e\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u65f6\u4ece Supabase \u4eea\u8868\u677f\u590d\u5236\u7684\"anon public\"\u5bc6\u94a5\u3002</p> Python <pre><code>async def login(email: str, password: str):\n    \"\"\"Get an access token for an existing user.\"\"\"\n    async with httpx.AsyncClient() as client:\n        response = await client.post(\n            f\"{SUPABASE_URL}/auth/v1/token?grant_type=password\",\n            json={\n                \"email\": email,\n                \"password\": password\n            },\n            headers={\n                \"apikey\": SUPABASE_ANON_KEY,\n                \"Content-Type\": \"application/json\"\n            },\n        )\n        assert response.status_code == 200\n        return response.json()[\"access_token\"]\n\n\n# Log in as user 1\nuser1_token = await login(email1, password)\nuser1_client = get_client(\n    url=\"http://localhost:2024\", headers={\"Authorization\": f\"Bearer {user1_token}\"}\n)\n\n# Create a thread as user 1\nthread = await user1_client.threads.create()\nprint(f\"\u2705 User 1 created thread: {thread['thread_id']}\")\n\n# Try to access without a token\nunauthenticated_client = get_client(url=\"http://localhost:2024\")\ntry:\n    await unauthenticated_client.threads.create()\n    print(\"\u274c Unauthenticated access should fail!\")\nexcept Exception as e:\n    print(\"\u2705 Unauthenticated access blocked:\", e)\n\n# Try to access user 1's thread as user 2\nuser2_token = await login(email2, password)\nuser2_client = get_client(\n    url=\"http://localhost:2024\", headers={\"Authorization\": f\"Bearer {user2_token}\"}\n)\n\ntry:\n    await user2_client.threads.get(thread[\"thread_id\"])\n    print(\"\u274c User 2 shouldn't see User 1's thread!\")\nexcept Exception as e:\n    print(\"\u2705 User 2 blocked from User 1's thread:\", e)\n</code></pre> JavaScript <pre><code>async function login(email: string, password: string): Promise&lt;string&gt; {\n  /**\u83b7\u53d6\u73b0\u6709\u7528\u6237\u7684\u8bbf\u95ee\u4ee4\u724c\u3002*/\n  const response = await fetch(\n    `${SUPABASE_URL}/auth/v1/token?grant_type=password`,\n    {\n      method: \"POST\",\n      headers: {\n        apikey: SUPABASE_ANON_KEY,\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ email, password }),\n    }\n  );\n\n  if (response.status !== 200) {\n    throw new Error(`Failed to login: ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  return data.access_token;\n}\n\n// \u4ee5\u7528\u6237 1 \u7684\u8eab\u4efd\u767b\u5f55\nconst user1Token = await login(email1, password);\nconst user1Client = new Client({\n  apiUrl: \"http://localhost:2024\",\n  headers: { Authorization: `Bearer ${user1Token}` },\n});\n\n// \u4ee5\u7528\u6237 1 \u7684\u8eab\u4efd\u521b\u5efa\u7ebf\u7a0b\nconst thread = await user1Client.threads.create();\nconsole.log(`\u2705 User 1 created thread: ${thread.thread_id}`);\n\n// \u5c1d\u8bd5\u5728\u6ca1\u6709\u4ee4\u724c\u7684\u60c5\u51b5\u4e0b\u8bbf\u95ee\nconst unauthenticatedClient = new Client({ apiUrl: \"http://localhost:2024\" });\ntry {\n  await unauthenticatedClient.threads.create();\n  console.log(\"\u274c Unauthenticated access should fail!\");\n} catch (e) {\n  console.log(\"\u2705 Unauthenticated access blocked:\", e.message);\n}\n\n// \u5c1d\u8bd5\u4ee5\u7528\u6237 2 \u7684\u8eab\u4efd\u8bbf\u95ee\u7528\u6237 1 \u7684\u7ebf\u7a0b\nconst user2Token = await login(email2, password);\nconst user2Client = new Client({\n  apiUrl: \"http://localhost:2024\",\n  headers: { Authorization: `Bearer ${user2Token}` },\n});\n\ntry {\n  await user2Client.threads.get(thread.thread_id);\n  console.log(\"\u274c User 2 shouldn't see User 1's thread!\");\n} catch (e) {\n  console.log(\"\u2705 User 2 blocked from User 1's thread:\", e.message);\n}\n</code></pre> <p>\u8f93\u51fa\u5e94\u8be5\u5982\u4e0b\u6240\u793a:</p> <pre><code>\u2705 User 1 created thread: d6af3754-95df-4176-aa10-dbd8dca40f1a\n\u2705 Unauthenticated access blocked: Client error '403 Forbidden' for url 'http://localhost:2024/threads'\n\u2705 User 2 blocked from User 1's thread: Client error '404 Not Found' for url 'http://localhost:2024/threads/d6af3754-95df-4176-aa10-dbd8dca40f1a'\n</code></pre> <p>\u4f60\u7684\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u6b63\u5728\u534f\u540c\u5de5\u4f5c:</p> <ol> <li>\u7528\u6237\u5fc5\u987b\u767b\u5f55\u624d\u80fd\u8bbf\u95ee\u673a\u5668\u4eba</li> <li>\u6bcf\u4e2a\u7528\u6237\u53ea\u80fd\u770b\u5230\u81ea\u5df1\u7684\u7ebf\u7a0b</li> </ol> <p>\u6240\u6709\u7528\u6237\u90fd\u7531 Supabase \u8ba4\u8bc1\u63d0\u4f9b\u8005\u7ba1\u7406,\u56e0\u6b64\u4f60\u4e0d\u9700\u8981\u5b9e\u73b0\u4efb\u4f55\u989d\u5916\u7684\u7528\u6237\u7ba1\u7406\u903b\u8f91\u3002</p>"},{"location":"tutorials/auth/add_auth_server/#_4","title":"\u4e0b\u4e00\u6b65","text":"<p>\u4f60\u5df2\u6210\u529f\u4e3a LangGraph \u5e94\u7528\u6784\u5efa\u4e86\u751f\u4ea7\u5c31\u7eea\u7684\u8eab\u4efd\u9a8c\u8bc1\u7cfb\u7edf!\u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0b\u4f60\u5b8c\u6210\u7684\u5de5\u4f5c:</p> <ol> <li>\u8bbe\u7f6e\u4e86\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u8005(\u5728\u672c\u4f8b\u4e2d\u4e3a Supabase)</li> <li>\u6dfb\u52a0\u4e86\u5177\u6709\u7535\u5b50\u90ae\u4ef6/\u5bc6\u7801\u8eab\u4efd\u9a8c\u8bc1\u7684\u771f\u5b9e\u7528\u6237\u5e10\u6237</li> <li>\u5c06 JWT \u4ee4\u724c\u9a8c\u8bc1\u96c6\u6210\u5230 LangGraph \u670d\u52a1\u5668\u4e2d</li> <li>\u5b9e\u73b0\u4e86\u9002\u5f53\u7684\u6388\u6743\u4ee5\u786e\u4fdd\u7528\u6237\u53ea\u80fd\u8bbf\u95ee\u81ea\u5df1\u7684\u6570\u636e</li> <li>\u521b\u5efa\u4e86\u51c6\u5907\u597d\u5e94\u5bf9\u4e0b\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u6311\u6218\u7684\u57fa\u7840 \ud83d\ude80</li> </ol> <p>\u65e2\u7136\u4f60\u5df2\u7ecf\u6709\u4e86\u751f\u4ea7\u8eab\u4efd\u9a8c\u8bc1,\u53ef\u4ee5\u8003\u8651:</p> <ol> <li>\u4f7f\u7528\u4f60\u559c\u6b22\u7684\u6846\u67b6\u6784\u5efa Web UI(\u53c2\u89c1 Custom Auth \u6a21\u677f\u793a\u4f8b)</li> <li>\u5728\u8eab\u4efd\u9a8c\u8bc1\u6982\u5ff5\u6307\u5357\u4e2d\u4e86\u89e3\u6709\u5173\u8eab\u4efd\u9a8c\u8bc1\u548c\u6388\u6743\u5176\u4ed6\u65b9\u9762\u7684\u66f4\u591a\u4fe1\u606f\u3002</li> </ol> Python <ol> <li>\u9605\u8bfb\u53c2\u8003\u6587\u6863\u540e\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u4f60\u7684\u5904\u7406\u7a0b\u5e8f\u548c\u8bbe\u7f6e\u3002</li> </ol> JavaScript <ol> <li>\u9605\u8bfb\u53c2\u8003\u6587\u6863\u540e\u8fdb\u4e00\u6b65\u81ea\u5b9a\u4e49\u4f60\u7684\u5904\u7406\u7a0b\u5e8f\u548c\u8bbe\u7f6e\u3002</li> </ol>"},{"location":"tutorials/auth/getting_started/","title":"\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u5728\u672c\u6559\u7a0b\u4e2d,\u6211\u4eec\u5c06\u6784\u5efa\u4e00\u4e2a\u53ea\u5141\u8bb8\u7279\u5b9a\u7528\u6237\u8bbf\u95ee\u7684\u804a\u5929\u673a\u5668\u4eba\u3002\u6211\u4eec\u5c06\u4ece LangGraph \u6a21\u677f\u5f00\u59cb,\u9010\u6b65\u6dfb\u52a0\u57fa\u4e8e\u4ee4\u724c\u7684\u5b89\u5168\u6027\u3002\u5728\u7ed3\u675f\u65f6,\u4f60\u5c06\u62e5\u6709\u4e00\u4e2a\u5728\u5141\u8bb8\u8bbf\u95ee\u4e4b\u524d\u68c0\u67e5\u6709\u6548\u4ee4\u724c\u7684\u5de5\u4f5c\u804a\u5929\u673a\u5668\u4eba\u3002</p> <p>\u8fd9\u662f\u6211\u4eec\u8eab\u4efd\u9a8c\u8bc1\u7cfb\u5217\u7684\u7b2c 1 \u90e8\u5206:</p> <ol> <li>\u8bbe\u7f6e\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1(\u4f60\u5728\u8fd9\u91cc) - \u63a7\u5236\u8c01\u53ef\u4ee5\u8bbf\u95ee\u4f60\u7684\u673a\u5668\u4eba</li> <li>\u4f7f\u5bf9\u8bdd\u79c1\u5bc6\u5316 - \u8ba9\u7528\u6237\u8fdb\u884c\u79c1\u5bc6\u5bf9\u8bdd</li> <li>\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f - \u6dfb\u52a0\u771f\u5b9e\u7528\u6237\u5e10\u6237\u5e76\u4f7f\u7528 OAuth2 \u8fdb\u884c\u751f\u4ea7\u9a8c\u8bc1</li> </ol> <p>\u672c\u6307\u5357\u5047\u8bbe\u4f60\u5bf9\u4ee5\u4e0b\u6982\u5ff5\u6709\u57fa\u672c\u4e86\u89e3:</p> <ul> <li>\u8eab\u4efd\u9a8c\u8bc1\u548c\u8bbf\u95ee\u63a7\u5236</li> <li>LangGraph Platform</li> </ul> <p>Note</p> <p>\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\u4ec5\u9002\u7528\u4e8e LangGraph Platform SaaS \u90e8\u7f72\u6216\u4f01\u4e1a\u81ea\u6258\u7ba1\u90e8\u7f72\u3002</p>"},{"location":"tutorials/auth/getting_started/#1","title":"1. \u521b\u5efa\u4f60\u7684\u5e94\u7528","text":"<p>\u4f7f\u7528 LangGraph \u542f\u52a8\u6a21\u677f\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u804a\u5929\u673a\u5668\u4eba:</p> Python <pre><code>pip install -U \"langgraph-cli[inmem]\"\nlanggraph new --template=new-langgraph-project-python custom-auth\ncd custom-auth\n</code></pre> JavaScript <pre><code>npx @langchain/langgraph-cli new --template=new-langgraph-project-typescript custom-auth\ncd custom-auth\n</code></pre> <p>\u6a21\u677f\u4e3a\u6211\u4eec\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5360\u4f4d\u7b26 LangGraph \u5e94\u7528\u3002\u901a\u8fc7\u5b89\u88c5\u672c\u5730\u4f9d\u8d56\u9879\u5e76\u8fd0\u884c\u5f00\u53d1\u670d\u52a1\u5668\u6765\u8bd5\u7528\u5b83:</p> Python <pre><code>pip install -e .\nlanggraph dev\n</code></pre> JavaScript <pre><code>npm install\nnpm run langgraph dev\n</code></pre> <p>\u670d\u52a1\u5668\u5c06\u542f\u52a8\u5e76\u5728\u4f60\u7684\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00 studio:</p> <pre><code>&gt; - \ud83d\ude80 API: http://127.0.0.1:2024\n&gt; - \ud83c\udfa8 Studio UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024\n&gt; - \ud83d\udcda API Docs: http://127.0.0.1:2024/docs\n&gt;\n&gt; \u6b64\u5185\u5b58\u670d\u52a1\u5668\u4e13\u4e3a\u5f00\u53d1\u548c\u6d4b\u8bd5\u800c\u8bbe\u8ba1\u3002\n&gt; \u5bf9\u4e8e\u751f\u4ea7\u4f7f\u7528\uff0c\u8bf7\u4f7f\u7528 LangSmith \u90e8\u7f72\u3002\n</code></pre> <p>\u5982\u679c\u4f60\u8981\u5728\u516c\u5171\u4e92\u8054\u7f51\u4e0a\u81ea\u6258\u7ba1\u6b64\u5e94\u7528\uff0c\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5b83\uff01</p> <p></p>"},{"location":"tutorials/auth/getting_started/#2","title":"2. \u6dfb\u52a0\u8eab\u4efd\u9a8c\u8bc1","text":"<p>\u73b0\u5728\u4f60\u6709\u4e86\u4e00\u4e2a\u57fa\u7840\u7684 LangGraph \u5e94\u7528\uff0c\u5411\u5176\u6dfb\u52a0\u8eab\u4efd\u9a8c\u8bc1\u3002</p> <p>Note</p> <p>\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u4f60\u5c06\u4ece\u786c\u7f16\u7801\u7684\u4ee4\u724c\u5f00\u59cb\u4f5c\u4e3a\u793a\u4f8b\u3002\u4f60\u5c06\u5728\u7b2c\u4e09\u4e2a\u6559\u7a0b\u4e2d\u83b7\u5f97\"\u751f\u4ea7\u5c31\u7eea\"\u7684\u8eab\u4efd\u9a8c\u8bc1\u65b9\u6848\u3002</p> Python <p><code>Auth</code> \u5bf9\u8c61\u5141\u8bb8\u4f60\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u51fd\u6570\uff0cLangGraph \u5e73\u53f0\u5c06\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e0a\u8fd0\u884c\u8be5\u51fd\u6570\u3002\u6b64\u51fd\u6570\u63a5\u6536\u6bcf\u4e2a\u8bf7\u6c42\u5e76\u51b3\u5b9a\u662f\u63a5\u53d7\u8fd8\u662f\u62d2\u7edd\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u65b0\u6587\u4ef6 <code>src/security/auth.py</code>\u3002\u8fd9\u662f\u4f60\u7684\u4ee3\u7801\u68c0\u67e5\u7528\u6237\u662f\u5426\u88ab\u5141\u8bb8\u8bbf\u95ee\u4f60\u7684\u673a\u5668\u4eba\u7684\u5730\u65b9:</p> src/security/auth.py<pre><code>from langgraph_sdk import Auth\n\n# This is our toy user database. Do not do this in production\nVALID_TOKENS = {\n    \"user1-token\": {\"id\": \"user1\", \"name\": \"Alice\"},\n    \"user2-token\": {\"id\": \"user2\", \"name\": \"Bob\"},\n}\n\n# The \"Auth\" object is a container that LangGraph will use to mark our authentication function\nauth = Auth()\n\n\n# The `authenticate` decorator tells LangGraph to call this function as middleware\n# for every request. This will determine whether the request is allowed or not\n@auth.authenticate\nasync def get_current_user(authorization: str | None) -&gt; Auth.types.MinimalUserDict:\n    \"\"\"Check if the user's token is valid.\"\"\"\n    assert authorization\n    scheme, token = authorization.split()\n    assert scheme.lower() == \"bearer\"\n    # Check if token is valid\n    if token not in VALID_TOKENS:\n        raise Auth.exceptions.HTTPException(status_code=401, detail=\"Invalid token\")\n\n    # Return user info if valid\n    user_data = VALID_TOKENS[token]\n    return {\n        \"identity\": user_data[\"id\"],\n    }\n</code></pre> <p>\u6ce8\u610f\u4f60\u7684\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u7a0b\u5e8f\u505a\u4e86\u4e24\u4ef6\u91cd\u8981\u7684\u4e8b\u60c5:</p> <ol> <li>\u68c0\u67e5\u8bf7\u6c42\u7684 Authorization \u5934\u4e2d\u662f\u5426\u63d0\u4f9b\u4e86\u6709\u6548\u4ee4\u724c</li> <li>\u8fd4\u56de\u7528\u6237\u7684\u8eab\u4efd</li> </ol> JavaScript <p><code>Auth</code> \u5bf9\u8c61\u5141\u8bb8\u4f60\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u51fd\u6570\uff0cLangGraph \u5e73\u53f0\u5c06\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e0a\u8fd0\u884c\u8be5\u51fd\u6570\u3002\u6b64\u51fd\u6570\u63a5\u6536\u6bcf\u4e2a\u8bf7\u6c42\u5e76\u51b3\u5b9a\u662f\u63a5\u53d7\u8fd8\u662f\u62d2\u7edd\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u65b0\u6587\u4ef6 <code>src/security/auth.ts</code>\u3002\u8fd9\u662f\u4f60\u7684\u4ee3\u7801\u68c0\u67e5\u7528\u6237\u662f\u5426\u88ab\u5141\u8bb8\u8bbf\u95ee\u4f60\u7684\u673a\u5668\u4eba\u7684\u5730\u65b9:</p> src/security/auth.ts<pre><code>import { Auth } from \"@langchain/langgraph-sdk\";\n\n// This is our toy user database. Do not do this in production\nconst VALID_TOKENS: Record&lt;string, { id: string; name: string }&gt; = {\n  \"user1-token\": { id: \"user1\", name: \"Alice\" },\n  \"user2-token\": { id: \"user2\", name: \"Bob\" },\n};\n\n// The \"Auth\" object is a container that LangGraph will use to mark our authentication function\nconst auth = new Auth();\n  // The `authenticate` method tells LangGraph to call this function as middleware\n  // for every request. This will determine whether the request is allowed or not\n  .authenticate((request) =&gt; {\n    // Our authentication handler from the previous tutorial.\n    const apiKey = request.headers.get(\"x-api-key\");\n    if (!apiKey || !isValidKey(apiKey)) {\n      throw new HTTPException(401, \"Invalid API key\");\n    }\n\n    const [scheme, token] = apiKey.split(\" \");\n    if (scheme.toLowerCase() !== \"bearer\") {\n      throw new Error(\"Bearer token required\");\n    }\n\n    if (!VALID_TOKENS[token]) {\n      throw new HTTPException(401, \"Invalid token\");\n    }\n\n    const userData = VALID_TOKENS[token];\n    return {\n      identity: userData.id,\n    };\n  });\n\nexport { auth };\n</code></pre> <p>\u6ce8\u610f\u4f60\u7684\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u7a0b\u5e8f\u505a\u4e86\u4e24\u4ef6\u91cd\u8981\u7684\u4e8b\u60c5:</p> <ol> <li>\u68c0\u67e5\u8bf7\u6c42\u7684 Authorization \u5934\u4e2d\u662f\u5426\u63d0\u4f9b\u4e86\u6709\u6548\u4ee4\u724c</li> <li>\u8fd4\u56de\u7528\u6237\u7684\u8eab\u4efd</li> </ol> <p>\u73b0\u5728\u901a\u8fc7\u5411 <code>langgraph.json</code> \u914d\u7f6e\u4e2d\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\u6765\u544a\u8bc9 LangGraph \u4f7f\u7528\u8eab\u4efd\u9a8c\u8bc1:</p> Python langgraph.json<pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent/graph.py:graph\"\n  },\n  \"env\": \".env\",\n  \"auth\": {\n    \"path\": \"src/security/auth.py:auth\"\n  }\n}\n</code></pre> JavaScript langgraph.json<pre><code>{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent/graph.ts:graph\"\n  },\n  \"env\": \".env\",\n  \"auth\": {\n    \"path\": \"src/security/auth.ts:auth\"\n  }\n}\n</code></pre>"},{"location":"tutorials/auth/getting_started/#3","title":"3. \u6d4b\u8bd5\u4f60\u7684\u673a\u5668\u4eba","text":"<p>\u518d\u6b21\u542f\u52a8\u670d\u52a1\u5668\u6765\u6d4b\u8bd5\u4e00\u5207:</p> <pre><code>langgraph dev --no-browser\n</code></pre> <p>\u5982\u679c\u4f60\u6ca1\u6709\u6dfb\u52a0 <code>--no-browser</code>\uff0cstudio UI \u5c06\u5728\u6d4f\u89c8\u5668\u4e2d\u6253\u5f00\u3002\u4f60\u53ef\u80fd\u60f3\u77e5\u9053\uff0cstudio \u5982\u4f55\u4ecd\u7136\u80fd\u591f\u8fde\u63a5\u5230\u6211\u4eec\u7684\u670d\u52a1\u5668\uff1f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5373\u4f7f\u4f7f\u7528\u81ea\u5b9a\u4e49\u8eab\u4efd\u9a8c\u8bc1\uff0c\u6211\u4eec\u4e5f\u5141\u8bb8\u6765\u81ea LangGraph studio \u7684\u8bbf\u95ee\u3002\u8fd9\u4f7f\u5f97\u5728 studio \u4e2d\u5f00\u53d1\u548c\u6d4b\u8bd5\u4f60\u7684\u673a\u5668\u4eba\u66f4\u5bb9\u6613\u3002\u4f60\u53ef\u4ee5\u901a\u8fc7\u5728\u8eab\u4efd\u9a8c\u8bc1\u914d\u7f6e\u4e2d\u8bbe\u7f6e <code>disable_studio_auth: \"true\"</code> \u6765\u5220\u9664\u6b64\u66ff\u4ee3\u8eab\u4efd\u9a8c\u8bc1\u9009\u9879:</p> Python <pre><code>{\n  \"auth\": {\n    \"path\": \"src/security/auth.py:auth\",\n    \"disable_studio_auth\": \"true\"\n  }\n}\n</code></pre> JavaScript <pre><code>{\n  \"auth\": {\n    \"path\": \"src/security/auth.ts:auth\",\n    \"disable_studio_auth\": \"true\"\n  }\n}\n</code></pre>"},{"location":"tutorials/auth/getting_started/#4","title":"4. \u4e0e\u4f60\u7684\u673a\u5668\u4eba\u804a\u5929","text":"<p>\u73b0\u5728\u53ea\u6709\u5f53\u4f60\u5728\u8bf7\u6c42\u5934\u4e2d\u63d0\u4f9b\u6709\u6548\u4ee4\u724c\u65f6\u624d\u80fd\u8bbf\u95ee\u673a\u5668\u4eba\u3002\u7136\u800c\uff0c\u7528\u6237\u4ecd\u7136\u80fd\u591f\u8bbf\u95ee\u5f7c\u6b64\u7684\u8d44\u6e90\uff0c\u76f4\u5230\u4f60\u5728\u6559\u7a0b\u7684\u4e0b\u4e00\u90e8\u5206\u6dfb\u52a0\u8d44\u6e90\u6388\u6743\u5904\u7406\u7a0b\u5e8f\u3002</p> <p></p> Python <p>\u5728\u6587\u4ef6\u6216 notebook \u4e2d\u8fd0\u884c\u4ee5\u4e0b\u4ee3\u7801:</p> <pre><code>from langgraph_sdk import get_client\n\n# Try without a token (should fail)\nclient = get_client(url=\"http://localhost:2024\")\ntry:\n    thread = await client.threads.create()\n    print(\"\u274c Should have failed without token!\")\nexcept Exception as e:\n    print(\"\u2705 Correctly blocked access:\", e)\n\n# Try with a valid token\nclient = get_client(\n    url=\"http://localhost:2024\", headers={\"Authorization\": \"Bearer user1-token\"}\n)\n\n# Create a thread and chat\nthread = await client.threads.create()\nprint(f\"\u2705 Created thread as Alice: {thread['thread_id']}\")\n\nresponse = await client.runs.create(\n    thread_id=thread[\"thread_id\"],\n    assistant_id=\"agent\",\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"Hello!\"}]},\n)\nprint(\"\u2705 Bot responded:\")\nprint(response)\n</code></pre> JavaScript <p>\u5728 TypeScript \u6587\u4ef6\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u4ee3\u7801\uff1a</p> <pre><code>import { Client } from \"@langchain/langgraph-sdk\";\n\nasync function testAuth() {\n  // Try without a token (should fail)\n  const clientWithoutToken = new Client({ apiUrl: \"http://localhost:2024\" });\n  try {\n    const thread = await clientWithoutToken.threads.create();\n    console.log(\"\u274c Should have failed without token!\");\n  } catch (e) {\n    console.log(\"\u2705 Correctly blocked access:\", e);\n  }\n\n  // Try with a valid token\n  const client = new Client({\n    apiUrl: \"http://localhost:2024\",\n    headers: { Authorization: \"Bearer user1-token\" },\n  });\n\n  // Create a thread and chat\n  const thread = await client.threads.create();\n  console.log(`\u2705 Created thread as Alice: ${thread.thread_id}`);\n\n  const response = await client.runs.create(thread.thread_id, \"agent\", {\n    input: { messages: [{ role: \"user\", content: \"Hello!\" }] },\n  });\n  console.log(\"\u2705 Bot responded:\");\n  console.log(response);\n}\n\ntestAuth().catch(console.error);\n</code></pre> <p>\u4f60\u5e94\u8be5\u770b\u5230\uff1a</p> <ol> <li>\u6ca1\u6709\u6709\u6548\u4ee4\u724c\uff0c\u6211\u4eec\u65e0\u6cd5\u8bbf\u95ee\u673a\u5668\u4eba</li> <li>\u6709\u4e86\u6709\u6548\u4ee4\u724c\uff0c\u6211\u4eec\u53ef\u4ee5\u521b\u5efa\u7ebf\u7a0b\u5e76\u804a\u5929</li> </ol> <p>\u606d\u559c\uff01\u4f60\u5df2\u7ecf\u6784\u5efa\u4e86\u4e00\u4e2a\u53ea\u5141\u8bb8\"\u5df2\u8ba4\u8bc1\"\u7528\u6237\u8bbf\u95ee\u7684\u804a\u5929\u673a\u5668\u4eba\u3002\u867d\u7136\u6b64\u7cfb\u7edf\uff08\u76ee\u524d\uff09\u8fd8\u672a\u5b9e\u73b0\u751f\u4ea7\u5c31\u7eea\u7684\u5b89\u5168\u65b9\u6848\uff0c\u4f46\u6211\u4eec\u5df2\u7ecf\u5b66\u4e60\u4e86\u5982\u4f55\u63a7\u5236\u5bf9\u673a\u5668\u4eba\u8bbf\u95ee\u7684\u57fa\u672c\u673a\u5236\u3002\u5728\u4e0b\u4e00\u4e2a\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u5b66\u4e60\u5982\u4f55\u4e3a\u6bcf\u4e2a\u7528\u6237\u63d0\u4f9b\u4ed6\u4eec\u81ea\u5df1\u7684\u79c1\u5bc6\u5bf9\u8bdd\u3002</p>"},{"location":"tutorials/auth/getting_started/#next-steps","title":"Next steps","text":"<p>\u73b0\u5728\u4f60\u53ef\u4ee5\u63a7\u5236\u8c01\u8bbf\u95ee\u4f60\u7684\u673a\u5668\u4eba\uff0c\u4f60\u53ef\u80fd\u60f3\u8981\uff1a</p> <ol> <li>\u7ee7\u7eed\u6559\u7a0b\uff0c\u8f6c\u5230\u4f7f\u5bf9\u8bdd\u79c1\u5bc6\u4ee5\u4e86\u89e3\u8d44\u6e90\u6388\u6743\u3002</li> <li>\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u8eab\u4efd\u9a8c\u8bc1\u6982\u5ff5\u7684\u5185\u5bb9\u3002</li> </ol> Python <ol> <li>\u67e5\u770b API \u53c2\u8003\u4ee5\u4e86\u89e3\u66f4\u591a\u8eab\u4efd\u9a8c\u8bc1\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ol> JavaScript <ol> <li>\u67e5\u770b API \u53c2\u8003\u4ee5\u4e86\u89e3\u66f4\u591a\u8eab\u4efd\u9a8c\u8bc1\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ol>"},{"location":"tutorials/auth/resource_auth/","title":"\u4f7f\u5bf9\u8bdd\u79c1\u5bc6\u5316","text":"<p>\u5728\u672c\u6559\u7a0b\u4e2d,\u4f60\u5c06\u6269\u5c55\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u521b\u5efa\u7684\u804a\u5929\u673a\u5668\u4eba,\u8ba9\u6bcf\u4e2a\u7528\u6237\u62e5\u6709\u81ea\u5df1\u7684\u79c1\u5bc6\u5bf9\u8bdd\u3002\u4f60\u5c06\u6dfb\u52a0\u8d44\u6e90\u7ea7\u8bbf\u95ee\u63a7\u5236,\u4ee5\u4fbf\u7528\u6237\u53ea\u80fd\u770b\u5230\u81ea\u5df1\u7684\u7ebf\u7a0b\u3002</p> <p></p>"},{"location":"tutorials/auth/resource_auth/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u672c\u6559\u7a0b\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u7684\u7b2c\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u673a\u5668\u4eba\u8fd0\u884c\u6ca1\u6709\u9519\u8bef\u3002</p>"},{"location":"tutorials/auth/resource_auth/#1","title":"1. \u6dfb\u52a0\u8d44\u6e90\u6388\u6743","text":"Python <p>\u56de\u987e\u4e00\u4e0b,\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d,<code>Auth</code> \u5bf9\u8c61\u5141\u8bb8\u4f60\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u51fd\u6570,LangGraph \u5e73\u53f0\u4f7f\u7528\u8be5\u51fd\u6570\u6765\u9a8c\u8bc1\u4f20\u5165\u8bf7\u6c42\u4e2d\u7684 bearer \u4ee4\u724c\u3002\u73b0\u5728\u4f60\u5c06\u4f7f\u7528\u5b83\u6765\u6ce8\u518c\u4e00\u4e2a**\u6388\u6743**\u5904\u7406\u7a0b\u5e8f\u3002</p> JavaScript <p>\u56de\u987e\u4e00\u4e0b,\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d,@[<code>Auth</code>][] \u5bf9\u8c61\u5141\u8bb8\u4f60\u6ce8\u518c\u4e00\u4e2a\u8eab\u4efd\u9a8c\u8bc1\u51fd\u6570,LangGraph \u5e73\u53f0\u4f7f\u7528\u8be5\u51fd\u6570\u6765\u9a8c\u8bc1\u4f20\u5165\u8bf7\u6c42\u4e2d\u7684 bearer \u4ee4\u724c\u3002\u73b0\u5728\u4f60\u5c06\u4f7f\u7528\u5b83\u6765\u6ce8\u518c\u4e00\u4e2a**\u6388\u6743**\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u6388\u6743\u5904\u7406\u7a0b\u5e8f\u662f\u5728\u8eab\u4efd\u9a8c\u8bc1\u6210\u529f**\u4e4b\u540e**\u8fd0\u884c\u7684\u51fd\u6570\u3002\u8fd9\u4e9b\u5904\u7406\u7a0b\u5e8f\u53ef\u4ee5\u5411\u8d44\u6e90\u6dfb\u52a0\u5143\u6570\u636e(\u4f8b\u5982\u8c01\u62e5\u6709\u5b83\u4eec)\u5e76\u8fc7\u6ee4\u6bcf\u4e2a\u7528\u6237\u53ef\u4ee5\u770b\u5230\u7684\u5185\u5bb9\u3002</p> Python <p>\u66f4\u65b0\u4f60\u7684 <code>src/security/auth.py</code> \u5e76\u6dfb\u52a0\u4e00\u4e2a\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e0a\u8fd0\u884c\u7684\u6388\u6743\u5904\u7406\u7a0b\u5e8f:</p> src/security/auth.py<pre><code>from langgraph_sdk import Auth\n\n# \u4fdd\u7559\u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u6d4b\u8bd5\u7528\u6237\nVALID_TOKENS = {\n    \"user1-token\": {\"id\": \"user1\", \"name\": \"Alice\"},\n    \"user2-token\": {\"id\": \"user2\", \"name\": \"Bob\"},\n}\n\nauth = Auth()\n\n\n@auth.authenticate\nasync def get_current_user(authorization: str | None) -&gt; Auth.types.MinimalUserDict:\n    \"\"\"\u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u7a0b\u5e8f\u3002\"\"\"\n    assert authorization\n    scheme, token = authorization.split()\n    assert scheme.lower() == \"bearer\"\n\n    if token not in VALID_TOKENS:\n        raise Auth.exceptions.HTTPException(status_code=401, detail=\"Invalid token\")\n\n    user_data = VALID_TOKENS[token]\n    return {\n        \"identity\": user_data[\"id\"],\n    }\n\n\n@auth.on\nasync def add_owner(\n    ctx: Auth.types.AuthContext,  # \u5305\u542b\u6709\u5173\u5f53\u524d\u7528\u6237\u7684\u4fe1\u606f\n    value: dict,  # \u6b63\u5728\u521b\u5efa/\u8bbf\u95ee\u7684\u8d44\u6e90\n):\n    \"\"\"\u4f7f\u8d44\u6e90\u5bf9\u5176\u521b\u5efa\u8005\u79c1\u5bc6\u3002\"\"\"\n    # \u793a\u4f8b:\n    # ctx: AuthContext(\n    #     permissions=[],\n    #     user=ProxyUser(\n    #         identity='user1',\n    #         is_authenticated=True,\n    #         display_name='user1'\n    #     ),\n    #     resource='threads',\n    #     action='create_run'\n    # )\n    # value:\n    # {\n    #     'thread_id': UUID('1e1b2733-303f-4dcd-9620-02d370287d72'),\n    #     'assistant_id': UUID('fe096781-5601-53d2-b2f6-0d3403f7e9ca'),\n    #     'run_id': UUID('1efbe268-1627-66d4-aa8d-b956b0f02a41'),\n    #     'status': 'pending',\n    #     'metadata': {},\n    #     'prevent_insert_if_inflight': True,\n    #     'multitask_strategy': 'reject',\n    #     'if_not_exists': 'reject',\n    #     'after_seconds': 0,\n    #     'kwargs': {\n    #         'input': {'messages': [{'role': 'user', 'content': 'Hello!'}]},\n    #         'command': None,\n    #         'config': {\n    #             'configurable': {\n    #                 'langgraph_auth_user': ... Your user object...\n    #                 'langgraph_auth_user_id': 'user1'\n    #             }\n    #         },\n    #         'stream_mode': ['values'],\n    #         'interrupt_before': None,\n    #         'interrupt_after': None,\n    #         'webhook': None,\n    #         'feedback_keys': None,\n    #         'temporary': False,\n    #         'subgraphs': False\n    #     }\n    # }\n\n    # \u505a\u4e24\u4ef6\u4e8b:\n    # 1. \u5c06\u7528\u6237\u7684 ID \u6dfb\u52a0\u5230\u8d44\u6e90\u7684\u5143\u6570\u636e\u4e2d\u3002\u6bcf\u4e2a LangGraph \u8d44\u6e90\u90fd\u6709\u4e00\u4e2a\u4e0e\u8d44\u6e90\u4e00\u8d77\u6301\u4e45\u5316\u7684 `metadata` \u5b57\u5178\u3002\n    # \u6b64\u5143\u6570\u636e\u5bf9\u4e8e\u8bfb\u53d6\u548c\u66f4\u65b0\u64cd\u4f5c\u4e2d\u7684\u8fc7\u6ee4\u5f88\u6709\u7528\n    # 2. \u8fd4\u56de\u4e00\u4e2a\u8fc7\u6ee4\u5668,\u8ba9\u7528\u6237\u53ea\u80fd\u770b\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u8d44\u6e90\n    filters = {\"owner\": ctx.user.identity}\n    metadata = value.setdefault(\"metadata\", {})\n    metadata.update(filters)\n\n    # \u53ea\u8ba9\u7528\u6237\u770b\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u8d44\u6e90\n    return filters\n</code></pre> JavaScript <p>\u66f4\u65b0\u4f60\u7684 <code>src/security/auth.ts</code> \u5e76\u6dfb\u52a0\u4e00\u4e2a\u5728\u6bcf\u4e2a\u8bf7\u6c42\u4e0a\u8fd0\u884c\u7684\u6388\u6743\u5904\u7406\u7a0b\u5e8f:</p> src/security/auth.ts<pre><code>import { Auth, HTTPException } from \"@langchain/langgraph-sdk\";\n\n// \u4fdd\u7559\u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u6d4b\u8bd5\u7528\u6237\nconst VALID_TOKENS: Record&lt;string, { id: string; name: string }&gt; = {\n  \"user1-token\": { id: \"user1\", name: \"Alice\" },\n  \"user2-token\": { id: \"user2\", name: \"Bob\" },\n};\n\nconst auth = new Auth()\n  .authenticate(async (request) =&gt; {\n    // \u6211\u4eec\u5728\u4e0a\u4e00\u4e2a\u6559\u7a0b\u4e2d\u7684\u8eab\u4efd\u9a8c\u8bc1\u5904\u7406\u7a0b\u5e8f\u3002\n    const apiKey = request.headers.get(\"x-api-key\");\n    if (!apiKey || !isValidKey(apiKey)) {\n      throw new HTTPException(401, \"Invalid API key\");\n    }\n\n    const [scheme, token] = apiKey.split(\" \");\n    if (scheme.toLowerCase() !== \"bearer\") {\n      throw new Error(\"Bearer token required\");\n    }\n\n    if (!VALID_TOKENS[token]) {\n      throw new HTTPException(401, \"Invalid token\");\n    }\n\n    const userData = VALID_TOKENS[token];\n    return {\n      identity: userData.id,\n    };\n  })\n  .on(\"*\", ({ value, user }) =&gt; {\n    // \u6b64\u5904\u7406\u7a0b\u5e8f\u901a\u8fc7\u6267\u884c\u4e24\u4ef6\u4e8b\u6765\u4f7f\u8d44\u6e90\u5bf9\u5176\u521b\u5efa\u8005\u79c1\u5bc6:\n    // 1. \u5c06\u7528\u6237\u7684 ID \u6dfb\u52a0\u5230\u8d44\u6e90\u7684\u5143\u6570\u636e\u4e2d\u3002\u6bcf\u4e2a LangGraph \u8d44\u6e90\u90fd\u6709\u4e00\u4e2a\u4e0e\u8d44\u6e90\u4e00\u8d77\u6301\u4e45\u5316\u7684 `metadata` \u5bf9\u8c61\u3002\n    // \u6b64\u5143\u6570\u636e\u5bf9\u4e8e\u8bfb\u53d6\u548c\u66f4\u65b0\u64cd\u4f5c\u4e2d\u7684\u8fc7\u6ee4\u5f88\u6709\u7528\n    // 2. \u8fd4\u56de\u4e00\u4e2a\u8fc7\u6ee4\u5668,\u8ba9\u7528\u6237\u53ea\u80fd\u770b\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u8d44\u6e90\n    // \u793a\u4f8b:\n    // {\n    //   user: ProxyUser {\n    //     identity: 'user1',\n    //     is_authenticated: true,\n    //     display_name: 'user1'\n    //   },\n    //   value: {\n    //     'thread_id': UUID('1e1b2733-303f-4dcd-9620-02d370287d72'),\n    //     'assistant_id': UUID('fe096781-5601-53d2-b2f6-0d3403f7e9ca'),\n    //     'run_id': UUID('1efbe268-1627-66d4-aa8d-b956b0f02a41'),\n    //     'status': 'pending',\n    //     'metadata': {},\n    //     'prevent_insert_if_inflight': true,\n    //     'multitask_strategy': 'reject',\n    //     'if_not_exists': 'reject',\n    //     'after_seconds': 0,\n    //     'kwargs': {\n    //         'input': {'messages': [{'role': 'user', 'content': 'Hello!'}]},\n    //         'command': null,\n    //         'config': {\n    //             'configurable': {\n    //                 'langgraph_auth_user': ... Your user object...\n    //                 'langgraph_auth_user_id': 'user1'\n    //             }\n    //         },\n    //         'stream_mode': ['values'],\n    //         'interrupt_before': null,\n    //         'interrupt_after': null,\n    //         'webhook': null,\n    //         'feedback_keys': null,\n    //         'temporary': false,\n    //         'subgraphs': false\n    //     }\n    //   }\n    // }\n\n    const filters = { owner: user.identity };\n    const metadata = value.metadata || {};\n    Object.assign(metadata, filters);\n    value.metadata = metadata;\n\n    // \u53ea\u8ba9\u7528\u6237\u770b\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u8d44\u6e90\n    return filters;\n  });\n\nexport { auth };\n</code></pre> Python <p>\u5904\u7406\u7a0b\u5e8f\u63a5\u6536\u4e24\u4e2a\u53c2\u6570:</p> <ol> <li><code>ctx</code> (AuthContext):\u5305\u542b\u6709\u5173\u5f53\u524d <code>user</code> \u7684\u4fe1\u606f\u3001\u7528\u6237\u7684 <code>permissions</code>\u3001<code>resource</code>(\"threads\"\u3001\"crons\"\u3001\"assistants\")\u4ee5\u53ca\u6b63\u5728\u6267\u884c\u7684 <code>action</code>(\"create\"\u3001\"read\"\u3001\"update\"\u3001\"delete\"\u3001\"search\"\u3001\"create_run\")</li> <li><code>value</code> (<code>dict</code>):\u6b63\u5728\u521b\u5efa\u6216\u8bbf\u95ee\u7684\u6570\u636e\u3002\u6b64\u5b57\u5178\u7684\u5185\u5bb9\u53d6\u51b3\u4e8e\u6b63\u5728\u8bbf\u95ee\u7684\u8d44\u6e90\u548c\u64cd\u4f5c\u3002\u6709\u5173\u5982\u4f55\u83b7\u5f97\u66f4\u4e25\u683c\u8303\u56f4\u7684\u8bbf\u95ee\u63a7\u5236\u7684\u4fe1\u606f,\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u6dfb\u52a0\u4f5c\u7528\u57df\u6388\u6743\u5904\u7406\u7a0b\u5e8f\u3002</li> </ol> JavaScript <p>\u5904\u7406\u7a0b\u5e8f\u63a5\u6536\u4e00\u4e2a\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u7684\u5bf9\u8c61:</p> <ol> <li><code>user</code> \u5305\u542b\u6709\u5173\u5f53\u524d <code>user</code> \u7684\u4fe1\u606f\u3001\u7528\u6237\u7684 <code>permissions</code>\u3001<code>resource</code>(\"threads\"\u3001\"crons\"\u3001\"assistants\")</li> <li><code>action</code> \u5305\u542b\u6709\u5173\u6b63\u5728\u6267\u884c\u7684\u64cd\u4f5c\u7684\u4fe1\u606f(\"create\"\u3001\"read\"\u3001\"update\"\u3001\"delete\"\u3001\"search\"\u3001\"create_run\")</li> <li><code>value</code> (<code>Record&lt;string, any&gt;</code>):\u6b63\u5728\u521b\u5efa\u6216\u8bbf\u95ee\u7684\u6570\u636e\u3002\u6b64\u5bf9\u8c61\u7684\u5185\u5bb9\u53d6\u51b3\u4e8e\u6b63\u5728\u8bbf\u95ee\u7684\u8d44\u6e90\u548c\u64cd\u4f5c\u3002\u6709\u5173\u5982\u4f55\u83b7\u5f97\u66f4\u4e25\u683c\u8303\u56f4\u7684\u8bbf\u95ee\u63a7\u5236\u7684\u4fe1\u606f,\u8bf7\u53c2\u89c1\u4e0b\u9762\u7684\u6dfb\u52a0\u4f5c\u7528\u57df\u6388\u6743\u5904\u7406\u7a0b\u5e8f\u3002</li> </ol> <p>\u8bf7\u6ce8\u610f,\u8fd9\u4e2a\u7b80\u5355\u7684\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u4e24\u4ef6\u4e8b:</p> <ol> <li>\u5c06\u7528\u6237\u7684 ID \u6dfb\u52a0\u5230\u8d44\u6e90\u7684\u5143\u6570\u636e\u4e2d\u3002</li> <li>\u8fd4\u56de\u4e00\u4e2a\u5143\u6570\u636e\u8fc7\u6ee4\u5668,\u4ee5\u4fbf\u7528\u6237\u53ea\u770b\u5230\u4ed6\u4eec\u62e5\u6709\u7684\u8d44\u6e90\u3002</li> </ol>"},{"location":"tutorials/auth/resource_auth/#2","title":"2. \u6d4b\u8bd5\u79c1\u5bc6\u5bf9\u8bdd","text":"<p>\u6d4b\u8bd5\u4f60\u7684\u6388\u6743\u3002\u5982\u679c\u4f60\u6b63\u786e\u8bbe\u7f6e\u4e86\u6240\u6709\u5185\u5bb9,\u4f60\u5c06\u770b\u5230\u6240\u6709 \u2705 \u6d88\u606f\u3002\u786e\u4fdd\u4f60\u7684\u5f00\u53d1\u670d\u52a1\u5668\u6b63\u5728\u8fd0\u884c(\u8fd0\u884c <code>langgraph dev</code>):</p> Python <pre><code>from langgraph_sdk import get_client\n\n# \u4e3a\u4e24\u4e2a\u7528\u6237\u521b\u5efa\u5ba2\u6237\u7aef\nalice = get_client(\n    url=\"http://localhost:2024\",\n    headers={\"Authorization\": \"Bearer user1-token\"}\n)\n\nbob = get_client(\n    url=\"http://localhost:2024\",\n    headers={\"Authorization\": \"Bearer user2-token\"}\n)\n\n# Alice \u521b\u5efa\u4e00\u4e2a\u52a9\u624b\nalice_assistant = await alice.assistants.create()\nprint(f\"\u2705 Alice created assistant: {alice_assistant['assistant_id']}\")\n\n# Alice \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u804a\u5929\nalice_thread = await alice.threads.create()\nprint(f\"\u2705 Alice created thread: {alice_thread['thread_id']}\")\n\nawait alice.runs.create(\n    thread_id=alice_thread[\"thread_id\"],\n    assistant_id=\"agent\",\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"Hi, this is Alice's private chat\"}]}\n)\n\n# Bob \u5c1d\u8bd5\u8bbf\u95ee Alice \u7684\u7ebf\u7a0b\ntry:\n    await bob.threads.get(alice_thread[\"thread_id\"])\n    print(\"\u274c Bob shouldn't see Alice's thread!\")\nexcept Exception as e:\n    print(\"\u2705 Bob correctly denied access:\", e)\n\n# Bob \u521b\u5efa\u81ea\u5df1\u7684\u7ebf\u7a0b\nbob_thread = await bob.threads.create()\nawait bob.runs.create(\n    thread_id=bob_thread[\"thread_id\"],\n    assistant_id=\"agent\",\n    input={\"messages\": [{\"role\": \"user\", \"content\": \"Hi, this is Bob's private chat\"}]}\n)\nprint(f\"\u2705 Bob created his own thread: {bob_thread['thread_id']}\")\n\n# \u5217\u51fa\u7ebf\u7a0b - \u6bcf\u4e2a\u7528\u6237\u53ea\u770b\u5230\u81ea\u5df1\u7684\nalice_threads = await alice.threads.search()\nbob_threads = await bob.threads.search()\nprint(f\"\u2705 Alice sees {len(alice_threads)} thread\")\nprint(f\"\u2705 Bob sees {len(bob_threads)} thread\")\n</code></pre> JavaScript <pre><code>import { getClient } from \"@langgraph/sdk\";\n\n// \u4e3a\u4e24\u4e2a\u7528\u6237\u521b\u5efa\u5ba2\u6237\u7aef\nconst alice = getClient({\n  url: \"http://localhost:2024\",\n  headers: { Authorization: \"Bearer user1-token\" },\n});\n\nconst bob = getClient({\n  url: \"http://localhost:2024\",\n  headers: { Authorization: \"Bearer user2-token\" },\n});\n\n// Alice \u521b\u5efa\u4e00\u4e2a\u52a9\u624b\nconst aliceAssistant = await alice.assistants.create();\nconsole.log(`\u2705 Alice created assistant: ${aliceAssistant.assistant_id}`);\n\n// Alice \u521b\u5efa\u4e00\u4e2a\u7ebf\u7a0b\u5e76\u804a\u5929\nconst aliceThread = await alice.threads.create();\nconsole.log(`\u2705 Alice created thread: ${aliceThread.thread_id}`);\n\nawait alice.runs.create(aliceThread.thread_id, \"agent\", {\n  input: {\n    messages: [{ role: \"user\", content: \"Hi, this is Alice's private chat\" }],\n  },\n});\n\n// Bob \u5c1d\u8bd5\u8bbf\u95ee Alice \u7684\u7ebf\u7a0b\ntry {\n  await bob.threads.get(aliceThread.thread_id);\n  console.log(\"\u274c Bob shouldn't see Alice's thread!\");\n} catch (error) {\n  console.log(\"\u2705 Bob correctly denied access:\", error);\n}\n\n// Bob \u521b\u5efa\u81ea\u5df1\u7684\u7ebf\u7a0b\nconst bobThread = await bob.threads.create();\nawait bob.runs.create(bobThread.thread_id, \"agent\", {\n  input: {\n    messages: [{ role: \"user\", content: \"Hi, this is Bob's private chat\" }],\n  },\n});\nconsole.log(`\u2705 Bob created his own thread: ${bobThread.thread_id}`);\n\n// \u5217\u51fa\u7ebf\u7a0b - \u6bcf\u4e2a\u7528\u6237\u53ea\u770b\u5230\u81ea\u5df1\u7684\nconst aliceThreads = await alice.threads.search();\nconst bobThreads = await bob.threads.search();\nconsole.log(`\u2705 Alice sees ${aliceThreads.length} thread`);\nconsole.log(`\u2705 Bob sees ${bobThreads.length} thread`);\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u2705 Alice created assistant: fc50fb08-78da-45a9-93cc-1d3928a3fc37\n\u2705 Alice created thread: 533179b7-05bc-4d48-b47a-a83cbdb5781d\n\u2705 Bob correctly denied access: Client error '404 Not Found' for url 'http://localhost:2024/threads/533179b7-05bc-4d48-b47a-a83cbdb5781d'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\n\u2705 Bob created his own thread: 437c36ed-dd45-4a1e-b484-28ba6eca8819\n\u2705 Alice sees 1 thread\n\u2705 Bob sees 1 thread\n</code></pre> <p>\u8fd9\u610f\u5473\u7740:</p> <ol> <li>\u6bcf\u4e2a\u7528\u6237\u90fd\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u7ebf\u7a0b\u4e2d\u521b\u5efa\u548c\u804a\u5929</li> <li>\u7528\u6237\u770b\u4e0d\u5230\u5f7c\u6b64\u7684\u7ebf\u7a0b</li> <li>\u5217\u51fa\u7ebf\u7a0b\u53ea\u663e\u793a\u4f60\u81ea\u5df1\u7684</li> </ol>"},{"location":"tutorials/auth/resource_auth/#scoped-authorization","title":"3. \u6dfb\u52a0\u4f5c\u7528\u57df\u6388\u6743\u5904\u7406\u7a0b\u5e8f","text":"Python <p>\u5e7f\u6cdb\u7684 <code>@auth.on</code> \u5904\u7406\u7a0b\u5e8f\u5339\u914d\u6240\u6709\u6388\u6743\u4e8b\u4ef6\u3002\u8fd9\u5f88\u7b80\u6d01,\u4f46\u8fd9\u610f\u5473\u7740 <code>value</code> \u5b57\u5178\u7684\u5185\u5bb9\u6ca1\u6709\u5f88\u597d\u7684\u4f5c\u7528\u57df,\u5e76\u4e14\u76f8\u540c\u7684\u7528\u6237\u7ea7\u8bbf\u95ee\u63a7\u5236\u5e94\u7528\u4e8e\u6bcf\u4e2a\u8d44\u6e90\u3002\u5982\u679c\u4f60\u60f3\u66f4\u7ec6\u7c92\u5ea6,\u4f60\u4e5f\u53ef\u4ee5\u63a7\u5236\u8d44\u6e90\u4e0a\u7684\u7279\u5b9a\u64cd\u4f5c\u3002</p> <p>\u66f4\u65b0 <code>src/security/auth.py</code> \u4ee5\u6dfb\u52a0\u7279\u5b9a\u8d44\u6e90\u7c7b\u578b\u7684\u5904\u7406\u7a0b\u5e8f:</p> <pre><code># \u4fdd\u7559\u6211\u4eec\u4e4b\u524d\u7684\u5904\u7406\u7a0b\u5e8f...\n\nfrom langgraph_sdk import Auth\n\n@auth.on.threads.create\nasync def on_thread_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.on.threads.create.value,\n):\n    \"\"\"\u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\u6dfb\u52a0\u6240\u6709\u8005\u3002\n\n    \u6b64\u5904\u7406\u7a0b\u5e8f\u5728\u521b\u5efa\u65b0\u7ebf\u7a0b\u65f6\u8fd0\u884c,\u6267\u884c\u4e24\u4ef6\u4e8b:\n    1. \u5728\u6b63\u5728\u521b\u5efa\u7684\u7ebf\u7a0b\u4e0a\u8bbe\u7f6e\u5143\u6570\u636e\u4ee5\u8ddf\u8e2a\u6240\u6709\u6743\n    2. \u8fd4\u56de\u4e00\u4e2a\u8fc7\u6ee4\u5668,\u786e\u4fdd\u53ea\u6709\u521b\u5efa\u8005\u53ef\u4ee5\u8bbf\u95ee\u5b83\n    \"\"\"\n    # \u793a\u4f8b\u503c:\n    #  {'thread_id': UUID('99b045bc-b90b-41a8-b882-dabc541cf740'), 'metadata': {}, 'if_exists': 'raise'}\n\n    # \u5411\u6b63\u5728\u521b\u5efa\u7684\u7ebf\u7a0b\u6dfb\u52a0\u6240\u6709\u8005\u5143\u6570\u636e\n    # \u6b64\u5143\u6570\u636e\u4e0e\u7ebf\u7a0b\u4e00\u8d77\u5b58\u50a8\u5e76\u6301\u4e45\u5316\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n\n    # \u8fd4\u56de\u8fc7\u6ee4\u5668\u4ee5\u5c06\u8bbf\u95ee\u9650\u5236\u4e3a\u4ec5\u521b\u5efa\u8005\n    return {\"owner\": ctx.user.identity}\n\n@auth.on.threads.read\nasync def on_thread_read(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.on.threads.read.value,\n):\n    \"\"\"\u53ea\u8ba9\u7528\u6237\u8bfb\u53d6\u4ed6\u4eec\u81ea\u5df1\u7684\u7ebf\u7a0b\u3002\n\n    \u6b64\u5904\u7406\u7a0b\u5e8f\u5728\u8bfb\u53d6\u64cd\u4f5c\u4e0a\u8fd0\u884c\u3002\u6211\u4eec\u4e0d\u9700\u8981\u8bbe\u7f6e\n    \u5143\u6570\u636e,\u56e0\u4e3a\u7ebf\u7a0b\u5df2\u7ecf\u5b58\u5728 - \u6211\u4eec\u53ea\u9700\u8981\n    \u8fd4\u56de\u4e00\u4e2a\u8fc7\u6ee4\u5668\u4ee5\u786e\u4fdd\u7528\u6237\u53ea\u80fd\u770b\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u7ebf\u7a0b\u3002\n    \"\"\"\n    return {\"owner\": ctx.user.identity}\n\n@auth.on.assistants\nasync def on_assistants(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.on.assistants.value,\n):\n    # \u51fa\u4e8e\u6f14\u793a\u76ee\u7684,\u6211\u4eec\u5c06\u62d2\u7edd\u6240\u6709\n    # \u89e6\u53ca\u52a9\u624b\u8d44\u6e90\u7684\u8bf7\u6c42\n    # \u793a\u4f8b\u503c:\n    # {\n    #     'assistant_id': UUID('63ba56c3-b074-4212-96e2-cc333bbc4eb4'),\n    #     'graph_id': 'agent',\n    #     'config': {},\n    #     'metadata': {},\n    #     'name': 'Untitled'\n    # }\n    raise Auth.exceptions.HTTPException(\n        status_code=403,\n        detail=\"User lacks the required permissions.\",\n    )\n\n# \u5047\u8bbe\u4f60\u5728\u5b58\u50a8\u4e2d\u7ec4\u7ec7\u4fe1\u606f\u7684\u65b9\u5f0f\u4e3a (user_id, resource_type, resource_id)\n@auth.on.store()\nasync def authorize_store(ctx: Auth.types.AuthContext, value: dict):\n    # \u6bcf\u4e2a\u5b58\u50a8\u9879\u7684\"namespace\"\u5b57\u6bb5\u662f\u4e00\u4e2a\u5143\u7ec4,\u4f60\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a\u9879\u7684\u76ee\u5f55\u3002\n    namespace: tuple = value[\"namespace\"]\n    assert namespace[0] == ctx.user.identity, \"Not authorized\"\n</code></pre> JavaScript <p>\u5e7f\u6cdb\u7684 <code>auth.on(\"*\")</code> \u5904\u7406\u7a0b\u5e8f\u5339\u914d\u6240\u6709\u6388\u6743\u4e8b\u4ef6\u3002\u8fd9\u5f88\u7b80\u6d01,\u4f46\u8fd9\u610f\u5473\u7740 <code>value</code> \u5bf9\u8c61\u7684\u5185\u5bb9\u6ca1\u6709\u5f88\u597d\u7684\u4f5c\u7528\u57df,\u5e76\u4e14\u76f8\u540c\u7684\u7528\u6237\u7ea7\u8bbf\u95ee\u63a7\u5236\u5e94\u7528\u4e8e\u6bcf\u4e2a\u8d44\u6e90\u3002\u5982\u679c\u4f60\u60f3\u66f4\u7ec6\u7c92\u5ea6,\u4f60\u4e5f\u53ef\u4ee5\u63a7\u5236\u8d44\u6e90\u4e0a\u7684\u7279\u5b9a\u64cd\u4f5c\u3002</p> <p>\u66f4\u65b0 <code>src/security/auth.ts</code> \u4ee5\u6dfb\u52a0\u7279\u5b9a\u8d44\u6e90\u7c7b\u578b\u7684\u5904\u7406\u7a0b\u5e8f:</p> <pre><code>// \u4fdd\u7559\u6211\u4eec\u4e4b\u524d\u7684\u5904\u7406\u7a0b\u5e8f...\n\nimport { Auth, HTTPException } from \"@langchain/langgraph-sdk\";\n\nauth.on(\"threads:create\", async ({ user, value }) =&gt; {\n  // \u5728\u521b\u5efa\u7ebf\u7a0b\u65f6\u6dfb\u52a0\u6240\u6709\u8005\u3002\n  // \u6b64\u5904\u7406\u7a0b\u5e8f\u5728\u521b\u5efa\u65b0\u7ebf\u7a0b\u65f6\u8fd0\u884c,\u6267\u884c\u4e24\u4ef6\u4e8b:\n  // 1. \u5728\u6b63\u5728\u521b\u5efa\u7684\u7ebf\u7a0b\u4e0a\u8bbe\u7f6e\u5143\u6570\u636e\u4ee5\u8ddf\u8e2a\u6240\u6709\u6743\n  // 2. \u8fd4\u56de\u4e00\u4e2a\u8fc7\u6ee4\u5668,\u786e\u4fdd\u53ea\u6709\u521b\u5efa\u8005\u53ef\u4ee5\u8bbf\u95ee\u5b83\n\n  // \u793a\u4f8b\u503c:\n  //  {thread_id: UUID('99b045bc-b90b-41a8-b882-dabc541cf740'), metadata: {}, if_exists: 'raise'}\n\n  // \u5411\u6b63\u5728\u521b\u5efa\u7684\u7ebf\u7a0b\u6dfb\u52a0\u6240\u6709\u8005\u5143\u6570\u636e\n  // \u6b64\u5143\u6570\u636e\u4e0e\u7ebf\u7a0b\u4e00\u8d77\u5b58\u50a8\u5e76\u6301\u4e45\u5316\n  const metadata = value.metadata || {};\n  metadata.owner = user.identity;\n  value.metadata = metadata;\n\n  // \u8fd4\u56de\u8fc7\u6ee4\u5668\u4ee5\u5c06\u8bbf\u95ee\u9650\u5236\u4e3a\u4ec5\u521b\u5efa\u8005\n  return { owner: user.identity };\n});\n\nauth.on(\"threads:read\", async ({ user, value }) =&gt; {\n  // \u53ea\u8ba9\u7528\u6237\u8bfb\u53d6\u4ed6\u4eec\u81ea\u5df1\u7684\u7ebf\u7a0b\u3002\n  // \u6b64\u5904\u7406\u7a0b\u5e8f\u5728\u8bfb\u53d6\u64cd\u4f5c\u4e0a\u8fd0\u884c\u3002\u6211\u4eec\u4e0d\u9700\u8981\u8bbe\u7f6e\n  // \u5143\u6570\u636e,\u56e0\u4e3a\u7ebf\u7a0b\u5df2\u7ecf\u5b58\u5728 - \u6211\u4eec\u53ea\u9700\u8981\n  // \u8fd4\u56de\u4e00\u4e2a\u8fc7\u6ee4\u5668\u4ee5\u786e\u4fdd\u7528\u6237\u53ea\u80fd\u770b\u5230\u4ed6\u4eec\u81ea\u5df1\u7684\u7ebf\u7a0b\u3002\n  return { owner: user.identity };\n});\n\nauth.on(\"assistants\", async ({ user, value }) =&gt; {\n  // \u51fa\u4e8e\u6f14\u793a\u76ee\u7684,\u6211\u4eec\u5c06\u62d2\u7edd\u6240\u6709\n  // \u89e6\u53ca\u52a9\u624b\u8d44\u6e90\u7684\u8bf7\u6c42\n  // \u793a\u4f8b\u503c:\n  // {\n  //     'assistant_id': UUID('63ba56c3-b074-4212-96e2-cc333bbc4eb4'),\n  //     'graph_id': 'agent',\n  //     'config': {},\n  //     'metadata': {},\n  //     'name': 'Untitled'\n  // }\n  throw new HTTPException(403, \"User lacks the required permissions.\");\n});\n\nauth.on(\"store\", async ({ user, value }) =&gt; {\n  // \u6bcf\u4e2a\u5b58\u50a8\u9879\u7684\"namespace\"\u5b57\u6bb5\u662f\u4e00\u4e2a\u5143\u7ec4,\u4f60\u53ef\u4ee5\u5c06\u5176\u89c6\u4e3a\u9879\u7684\u76ee\u5f55\u3002\n  const namespace: string[] = value.namespace;\n  if (namespace[0] !== user.identity) {\n    throw new Error(\"Not authorized\");\n  }\n});\n</code></pre> <p>\u8bf7\u6ce8\u610f,\u4f60\u73b0\u5728\u62e5\u6709\u7279\u5b9a\u7684\u5904\u7406\u7a0b\u5e8f,\u800c\u4e0d\u662f\u4e00\u4e2a\u5168\u5c40\u5904\u7406\u7a0b\u5e8f:</p> <ol> <li>\u521b\u5efa\u7ebf\u7a0b</li> <li>\u8bfb\u53d6\u7ebf\u7a0b</li> <li>\u8bbf\u95ee\u52a9\u624b</li> </ol> Python <p>\u8fd9\u4e9b\u4e2d\u7684\u524d\u4e09\u4e2a\u5339\u914d\u6bcf\u4e2a\u8d44\u6e90\u4e0a\u7684\u7279\u5b9a**\u64cd\u4f5c**(\u53c2\u89c1\u8d44\u6e90\u64cd\u4f5c),\u800c\u6700\u540e\u4e00\u4e2a(<code>@auth.on.assistants</code>)\u5339\u914d <code>assistants</code> \u8d44\u6e90\u4e0a\u7684_\u4efb\u4f55_\u64cd\u4f5c\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8bf7\u6c42,LangGraph \u5c06\u8fd0\u884c\u4e0e\u6b63\u5728\u8bbf\u95ee\u7684\u8d44\u6e90\u548c\u64cd\u4f5c\u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u5904\u7406\u7a0b\u5e8f\u3002\u8fd9\u610f\u5473\u7740\u4e0a\u9762\u7684\u56db\u4e2a\u5904\u7406\u7a0b\u5e8f\u5c06\u8fd0\u884c,\u800c\u4e0d\u662f\u5e7f\u6cdb\u4f5c\u7528\u57df\u7684\"<code>@auth.on</code>\"\u5904\u7406\u7a0b\u5e8f\u3002</p> JavaScript <p>\u8fd9\u4e9b\u4e2d\u7684\u524d\u4e09\u4e2a\u5339\u914d\u6bcf\u4e2a\u8d44\u6e90\u4e0a\u7684\u7279\u5b9a**\u64cd\u4f5c**(\u53c2\u89c1\u8d44\u6e90\u64cd\u4f5c),\u800c\u6700\u540e\u4e00\u4e2a(<code>auth.on.assistants</code>)\u5339\u914d <code>assistants</code> \u8d44\u6e90\u4e0a\u7684_\u4efb\u4f55_\u64cd\u4f5c\u3002\u5bf9\u4e8e\u6bcf\u4e2a\u8bf7\u6c42,LangGraph \u5c06\u8fd0\u884c\u4e0e\u6b63\u5728\u8bbf\u95ee\u7684\u8d44\u6e90\u548c\u64cd\u4f5c\u5339\u914d\u7684\u6700\u5177\u4f53\u7684\u5904\u7406\u7a0b\u5e8f\u3002\u8fd9\u610f\u5473\u7740\u4e0a\u9762\u7684\u56db\u4e2a\u5904\u7406\u7a0b\u5e8f\u5c06\u8fd0\u884c,\u800c\u4e0d\u662f\u5e7f\u6cdb\u4f5c\u7528\u57df\u7684\"<code>auth.on</code>\"\u5904\u7406\u7a0b\u5e8f\u3002</p> <p>\u5c1d\u8bd5\u5c06\u4ee5\u4e0b\u6d4b\u8bd5\u4ee3\u7801\u6dfb\u52a0\u5230\u4f60\u7684\u6d4b\u8bd5\u6587\u4ef6\u4e2d:</p> Python <pre><code># ... \u4e0e\u4e4b\u524d\u76f8\u540c\n# \u5c1d\u8bd5\u521b\u5efa\u52a9\u624b\u3002\u8fd9\u5e94\u8be5\u5931\u8d25\ntry:\n    await alice.assistants.create(\"agent\")\n    print(\"\u274c Alice shouldn't be able to create assistants!\")\nexcept Exception as e:\n    print(\"\u2705 Alice correctly denied access:\", e)\n\n# \u5c1d\u8bd5\u641c\u7d22\u52a9\u624b\u3002\u8fd9\u4e5f\u5e94\u8be5\u5931\u8d25\ntry:\n    await alice.assistants.search()\n    print(\"\u274c Alice shouldn't be able to search assistants!\")\nexcept Exception as e:\n    print(\"\u2705 Alice correctly denied access to searching assistants:\", e)\n\n# Alice \u4ecd\u7136\u53ef\u4ee5\u521b\u5efa\u7ebf\u7a0b\nalice_thread = await alice.threads.create()\nprint(f\"\u2705 Alice created thread: {alice_thread['thread_id']}\")\n</code></pre> JavaScript <pre><code>// ... \u4e0e\u4e4b\u524d\u76f8\u540c\n// \u5c1d\u8bd5\u521b\u5efa\u52a9\u624b\u3002\u8fd9\u5e94\u8be5\u5931\u8d25\ntry {\n  await alice.assistants.create(\"agent\");\n  console.log(\"\u274c Alice shouldn't be able to create assistants!\");\n} catch (error) {\n  console.log(\"\u2705 Alice correctly denied access:\", error);\n}\n\n// \u5c1d\u8bd5\u641c\u7d22\u52a9\u624b\u3002\u8fd9\u4e5f\u5e94\u8be5\u5931\u8d25\ntry {\n  await alice.assistants.search();\n  console.log(\"\u274c Alice shouldn't be able to search assistants!\");\n} catch (error) {\n  console.log(\n    \"\u2705 Alice correctly denied access to searching assistants:\",\n    error\n  );\n}\n\n// Alice \u4ecd\u7136\u53ef\u4ee5\u521b\u5efa\u7ebf\u7a0b\nconst aliceThread = await alice.threads.create();\nconsole.log(`\u2705 Alice created thread: ${aliceThread.thread_id}`);\n</code></pre> <p>\u8f93\u51fa:</p> <pre><code>\u2705 Alice created thread: dcea5cd8-eb70-4a01-a4b6-643b14e8f754\n\u2705 Bob correctly denied access: Client error '404 Not Found' for url 'http://localhost:2024/threads/dcea5cd8-eb70-4a01-a4b6-643b14e8f754'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404\n\u2705 Bob created his own thread: 400f8d41-e946-429f-8f93-4fe395bc3eed\n\u2705 Alice sees 1 thread\n\u2705 Bob sees 1 thread\n\u2705 Alice correctly denied access:\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/50j0\n\u2705 Alice correctly denied access to searching assistants:\n</code></pre> <p>\u795d\u8d3a!\u4f60\u5df2\u7ecf\u6784\u5efa\u4e86\u4e00\u4e2a\u804a\u5929\u673a\u5668\u4eba,\u6bcf\u4e2a\u7528\u6237\u90fd\u6709\u81ea\u5df1\u7684\u79c1\u5bc6\u5bf9\u8bdd\u3002\u867d\u7136\u6b64\u7cfb\u7edf\u4f7f\u7528\u7b80\u5355\u7684\u57fa\u4e8e\u4ee4\u724c\u7684\u8eab\u4efd\u9a8c\u8bc1,\u4f46\u8fd9\u4e9b\u6388\u6743\u6a21\u5f0f\u5c06\u9002\u7528\u4e8e\u5b9e\u73b0\u4efb\u4f55\u771f\u5b9e\u7684\u8eab\u4efd\u9a8c\u8bc1\u7cfb\u7edf\u3002\u5728\u4e0b\u4e00\u4e2a\u6559\u7a0b\u4e2d,\u4f60\u5c06\u4f7f\u7528 OAuth2 \u5c06\u6d4b\u8bd5\u7528\u6237\u66ff\u6362\u4e3a\u771f\u5b9e\u7684\u7528\u6237\u5e10\u6237\u3002</p>"},{"location":"tutorials/auth/resource_auth/#_3","title":"\u63a5\u4e0b\u6765\u505a\u4ec0\u4e48?","text":"<p>\u73b0\u5728\u4f60\u53ef\u4ee5\u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bbf\u95ee,\u4f60\u53ef\u80fd\u60f3\u8981:</p> <ol> <li>\u7ee7\u7eed\u5230\u8fde\u63a5\u8eab\u4efd\u9a8c\u8bc1\u63d0\u4f9b\u7a0b\u5e8f\u4ee5\u6dfb\u52a0\u771f\u5b9e\u7684\u7528\u6237\u5e10\u6237\u3002</li> <li>\u9605\u8bfb\u66f4\u591a\u5173\u4e8e\u6388\u6743\u6a21\u5f0f\u7684\u4fe1\u606f\u3002</li> </ol> Python <ol> <li>\u67e5\u770b API \u53c2\u8003\u4ee5\u83b7\u53d6\u6709\u5173\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u63a5\u53e3\u548c\u65b9\u6cd5\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ol> JavaScript <ol> <li>\u67e5\u770b API \u53c2\u8003\u4ee5\u83b7\u53d6\u6709\u5173\u672c\u6559\u7a0b\u4e2d\u4f7f\u7528\u7684\u63a5\u53e3\u548c\u65b9\u6cd5\u7684\u8be6\u7ec6\u4fe1\u606f\u3002</li> </ol>"},{"location":"tutorials/get-started/1-build-basic-chatbot/","title":"\u6784\u5efa\u57fa\u7840\u804a\u5929\u673a\u5668\u4eba","text":"<p>\u7ffb\u8bd1\u8bf4\u660e</p> <p>\u672c\u6587\u6863\u7531\u58a8\u653b\u7f51\u7edc\u5b89\u5168\u5927\u6a21\u578b\u56e2\u961f\u7ffb\u8bd1</p> <p>\u5728\u672c\u6559\u7a0b\u4e2d,\u4f60\u5c06\u6784\u5efa\u4e00\u4e2a\u57fa\u7840\u804a\u5929\u673a\u5668\u4eba\u3002\u8fd9\u4e2a\u804a\u5929\u673a\u5668\u4eba\u662f\u4ee5\u4e0b\u4e00\u7cfb\u5217\u6559\u7a0b\u7684\u57fa\u7840,\u4f60\u5c06\u9010\u6b65\u6dfb\u52a0\u66f4\u590d\u6742\u7684\u529f\u80fd,\u5e76\u5728\u6b64\u8fc7\u7a0b\u4e2d\u4e86\u89e3\u5173\u952e\u7684 LangGraph \u6982\u5ff5\u3002\u8ba9\u6211\u4eec\u5f00\u59cb\u5427! \ud83c\udf1f</p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u672c\u6559\u7a0b\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u80fd\u8bbf\u95ee\u652f\u6301\u5de5\u5177\u8c03\u7528\u529f\u80fd\u7684 LLM,\u4f8b\u5982 OpenAI\u3001Anthropic \u6216 Google Gemini\u3002</p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#1","title":"1. \u5b89\u88c5\u5305","text":"<p>\u5b89\u88c5\u6240\u9700\u7684\u5305:</p> Python <pre><code>pip install -U langgraph langsmith\n</code></pre> JavaScriptnpmyarnpnpmbun <pre><code>npm install @langchain/langgraph @langchain/core zod\n</code></pre> <pre><code>yarn add @langchain/langgraph @langchain/core zod\n</code></pre> <pre><code>pnpm add @langchain/langgraph @langchain/core zod\n</code></pre> <pre><code>bun add @langchain/langgraph @langchain/core zod\n</code></pre> <p>Tip</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u9ad8 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u5141\u8bb8\u4f60\u4f7f\u7528\u8ddf\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528\u3002\u6709\u5173\u5982\u4f55\u5f00\u59cb\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 LangSmith \u6587\u6863\u3002</p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#2-stategraph","title":"2. \u521b\u5efa <code>StateGraph</code>","text":"<p>\u73b0\u5728\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph \u521b\u5efa\u4e00\u4e2a\u57fa\u7840\u804a\u5929\u673a\u5668\u4eba\u3002\u8fd9\u4e2a\u804a\u5929\u673a\u5668\u4eba\u5c06\u76f4\u63a5\u54cd\u5e94\u7528\u6237\u6d88\u606f\u3002</p> <p>\u9996\u5148\u521b\u5efa\u4e00\u4e2a <code>StateGraph</code>\u3002<code>StateGraph</code> \u5bf9\u8c61\u5c06\u6211\u4eec\u7684\u804a\u5929\u673a\u5668\u4eba\u7684\u7ed3\u6784\u5b9a\u4e49\u4e3a\"\u72b6\u6001\u673a\"\u3002\u6211\u4eec\u5c06\u6dfb\u52a0 <code>nodes</code> \u6765\u8868\u793a llm \u548c\u804a\u5929\u673a\u5668\u4eba\u53ef\u4ee5\u8c03\u7528\u7684\u51fd\u6570,\u5e76\u6dfb\u52a0 <code>edges</code> \u6765\u6307\u5b9a\u673a\u5668\u4eba\u5e94\u5982\u4f55\u5728\u8fd9\u4e9b\u51fd\u6570\u4e4b\u95f4\u8f6c\u6362\u3002</p> Python <pre><code>from typing import Annotated\n\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\n\n\nclass State(TypedDict):\n    # Messages \u7684\u7c7b\u578b\u662f \"list\"\u3002\u6ce8\u89e3\u4e2d\u7684 `add_messages` \u51fd\u6570\n    # \u5b9a\u4e49\u4e86\u8fd9\u4e2a\u72b6\u6001\u952e\u5e94\u8be5\u5982\u4f55\u66f4\u65b0\n    # (\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b,\u5b83\u5c06\u6d88\u606f\u8ffd\u52a0\u5230\u5217\u8868\u4e2d,\u800c\u4e0d\u662f\u8986\u76d6\u5b83\u4eec)\n    messages: Annotated[list, add_messages]\n\n\ngraph_builder = StateGraph(State)\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State).compile();\n</code></pre> <p>\u6211\u4eec\u7684\u56fe\u73b0\u5728\u53ef\u4ee5\u5904\u7406\u4e24\u4e2a\u5173\u952e\u4efb\u52a1:</p> <ol> <li>\u6bcf\u4e2a <code>node</code> \u53ef\u4ee5\u63a5\u6536\u5f53\u524d <code>State</code> \u4f5c\u4e3a\u8f93\u5165\u5e76\u8f93\u51fa\u5bf9\u72b6\u6001\u7684\u66f4\u65b0\u3002</li> <li>\u7531\u4e8e\u9884\u6784\u5efa\u7684\u5f52\u7ea6\u5668\u51fd\u6570,\u5bf9 <code>messages</code> \u7684\u66f4\u65b0\u5c06\u8ffd\u52a0\u5230\u73b0\u6709\u5217\u8868\u800c\u4e0d\u662f\u8986\u76d6\u5b83\u3002</li> </ol> <p>\u6982\u5ff5</p> <p>\u5b9a\u4e49\u56fe\u65f6,\u7b2c\u4e00\u6b65\u662f\u5b9a\u4e49\u5176 <code>State</code>\u3002<code>State</code> \u5305\u62ec\u56fe\u7684 schema \u548c\u5904\u7406\u72b6\u6001\u66f4\u65b0\u7684\u5f52\u7ea6\u5668\u51fd\u6570\u3002\u5728\u6211\u4eec\u7684\u793a\u4f8b\u4e2d,<code>State</code> \u662f\u4e00\u4e2a\u6709\u4e00\u4e2a\u952e\u7684 schema:<code>messages</code>\u3002\u5f52\u7ea6\u5668\u51fd\u6570\u7528\u4e8e\u5c06\u65b0\u6d88\u606f\u8ffd\u52a0\u5230\u5217\u8868\u800c\u4e0d\u662f\u8986\u76d6\u5b83\u3002\u6ca1\u6709\u5f52\u7ea6\u5668\u6ce8\u89e3\u7684\u952e\u5c06\u8986\u76d6\u4ee5\u524d\u7684\u503c\u3002</p> <p>\u8981\u4e86\u89e3\u6709\u5173\u72b6\u6001\u3001\u5f52\u7ea6\u5668\u548c\u76f8\u5173\u6982\u5ff5\u7684\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605 LangGraph \u53c2\u8003\u6587\u6863\u3002</p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#3","title":"3. \u6dfb\u52a0\u8282\u70b9","text":"<p>\u63a5\u4e0b\u6765,\u6dfb\u52a0\u4e00\u4e2a \"<code>chatbot</code>\" \u8282\u70b9\u3002**\u8282\u70b9**\u8868\u793a\u5de5\u4f5c\u5355\u5143,\u901a\u5e38\u662f\u5e38\u89c4\u51fd\u6570\u3002</p> <p>\u8ba9\u6211\u4eec\u9996\u5148\u9009\u62e9\u4e00\u4e2a\u804a\u5929\u6a21\u578b:</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> JavaScript <pre><code>import { ChatOpenAI } from \"@langchain/openai\";\n// or import { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst llm = new ChatOpenAI({\n  model: \"gpt-4o\",\n  temperature: 0,\n});\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06\u804a\u5929\u6a21\u578b\u5408\u5e76\u5230\u4e00\u4e2a\u7b80\u5355\u7684\u8282\u70b9\u4e2d:</p> Python <pre><code>def chatbot(state: State):\n    return {\"messages\": [llm.invoke(state[\"messages\"])]}\n\n\n# \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u552f\u4e00\u7684\u8282\u70b9\u540d\u79f0\n# \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6bcf\u6b21\u4f7f\u7528\u8282\u70b9\u65f6\u5c06\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6216\u5bf9\u8c61\ngraph_builder.add_node(\"chatbot\", chatbot)\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state: z.infer&lt;typeof State&gt;) =&gt; {\n    return { messages: [await llm.invoke(state.messages)] };\n  })\n  .compile();\n</code></pre> <p>\u6ce8\u610f <code>chatbot</code> \u8282\u70b9\u51fd\u6570\u5982\u4f55\u5c06\u5f53\u524d <code>State</code> \u4f5c\u4e3a\u8f93\u5165\u5e76\u8fd4\u56de\u4e00\u4e2a\u5305\u542b\u952e \"messages\" \u4e0b\u66f4\u65b0\u7684 <code>messages</code> \u5217\u8868\u7684\u5b57\u5178\u3002\u8fd9\u662f\u6240\u6709 LangGraph \u8282\u70b9\u51fd\u6570\u7684\u57fa\u672c\u6a21\u5f0f\u3002</p> Python <p>\u6211\u4eec <code>State</code> \u4e2d\u7684 <code>add_messages</code> \u51fd\u6570\u5c06\u628a LLM \u7684\u54cd\u5e94\u6d88\u606f\u8ffd\u52a0\u5230\u72b6\u6001\u4e2d\u5df2\u6709\u7684\u4efb\u4f55\u6d88\u606f\u3002</p> JavaScript <p><code>MessagesZodState</code> \u4e2d\u4f7f\u7528\u7684 <code>addMessages</code> \u51fd\u6570\u5c06\u628a LLM \u7684\u54cd\u5e94\u6d88\u606f\u8ffd\u52a0\u5230\u72b6\u6001\u4e2d\u5df2\u6709\u7684\u4efb\u4f55\u6d88\u606f\u3002</p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#4-entry","title":"4. \u6dfb\u52a0 <code>entry</code> \u70b9","text":"<p>\u6dfb\u52a0\u4e00\u4e2a <code>entry</code> \u70b9\u6765\u544a\u8bc9\u56fe**\u6bcf\u6b21\u8fd0\u884c\u65f6\u4ece\u54ea\u91cc\u5f00\u59cb\u5de5\u4f5c**:</p> Python <pre><code>graph_builder.add_edge(START, \"chatbot\")\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state: z.infer&lt;typeof State&gt;) =&gt; {\n    return { messages: [await llm.invoke(state.messages)] };\n  })\n  .addEdge(START, \"chatbot\")\n  .compile();\n</code></pre>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#5-exit","title":"5. \u6dfb\u52a0 <code>exit</code> \u70b9","text":"<p>\u6dfb\u52a0\u4e00\u4e2a <code>exit</code> \u70b9\u6765\u6307\u793a**\u56fe\u5e94\u8be5\u5728\u54ea\u91cc\u5b8c\u6210\u6267\u884c**\u3002\u8fd9\u5bf9\u4e8e\u66f4\u590d\u6742\u7684\u6d41\u7a0b\u5f88\u6709\u5e2e\u52a9,\u4f46\u5373\u4f7f\u5728\u50cf\u8fd9\u6837\u7684\u7b80\u5355\u56fe\u4e2d,\u6dfb\u52a0\u7ed3\u675f\u8282\u70b9\u4e5f\u80fd\u63d0\u9ad8\u6e05\u6670\u5ea6\u3002</p> Python <pre><code>graph_builder.add_edge(\"chatbot\", END)\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state: z.infer&lt;typeof State&gt;) =&gt; {\n    return { messages: [await llm.invoke(state.messages)] };\n  })\n  .addEdge(START, \"chatbot\")\n  .addEdge(\"chatbot\", END)\n  .compile();\n</code></pre> <p>\u8fd9\u544a\u8bc9\u56fe\u5728\u8fd0\u884c chatbot \u8282\u70b9\u540e\u7ec8\u6b62\u3002</p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#6","title":"6. \u7f16\u8bd1\u56fe","text":"<p>\u5728\u8fd0\u884c\u56fe\u4e4b\u524d,\u6211\u4eec\u9700\u8981\u7f16\u8bd1\u5b83\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728\u56fe\u6784\u5efa\u5668\u4e0a\u8c03\u7528 <code>compile()</code> \u6765\u5b9e\u73b0\u3002\u8fd9\u5c06\u521b\u5efa\u4e00\u4e2a <code>CompiledGraph</code>,\u6211\u4eec\u53ef\u4ee5\u5728\u72b6\u6001\u4e0a\u8c03\u7528\u5b83\u3002</p> Python <pre><code>graph = graph_builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState, START, END } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state: z.infer&lt;typeof State&gt;) =&gt; {\n    return { messages: [await llm.invoke(state.messages)] };\n  })\n  .addEdge(START, \"chatbot\")\n  .addEdge(\"chatbot\", END)\n  .compile();\n</code></pre>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#7","title":"7. \u53ef\u89c6\u5316\u56fe(\u53ef\u9009)","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>get_graph</code> \u65b9\u6cd5\u548c\u5176\u4e2d\u4e00\u79cd\"\u7ed8\u5236\"\u65b9\u6cd5(\u5982 <code>draw_ascii</code> \u6216 <code>draw_png</code>)\u6765\u53ef\u89c6\u5316\u56fe\u3002<code>draw</code> \u65b9\u6cd5\u5404\u9700\u8981\u989d\u5916\u7684\u4f9d\u8d56\u9879\u3002</p> <pre><code>from IPython.display import Image, display\n\ntry:\n    display(Image(graph.get_graph().draw_mermaid_png()))\nexcept Exception:\n    # \u8fd9\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u4f9d\u8d56\u9879\u5e76\u4e14\u662f\u53ef\u9009\u7684\n    pass\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>getGraph</code> \u65b9\u6cd5\u53ef\u89c6\u5316\u56fe,\u5e76\u4f7f\u7528 <code>drawMermaidPng</code> \u65b9\u6cd5\u6e32\u67d3\u56fe\u3002</p> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"basic-chatbot.png\", imageBuffer);\n</code></pre> <p></p>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#8","title":"8. \u8fd0\u884c\u804a\u5929\u673a\u5668\u4eba","text":"<p>\u73b0\u5728\u8fd0\u884c\u804a\u5929\u673a\u5668\u4eba!</p> <p>Tip</p> <p>\u4f60\u53ef\u4ee5\u968f\u65f6\u901a\u8fc7\u8f93\u5165 <code>quit</code>\u3001<code>exit</code> \u6216 <code>q</code> \u9000\u51fa\u804a\u5929\u5faa\u73af\u3002</p> Python <pre><code>def stream_graph_updates(user_input: str):\n    for event in graph.stream({\"messages\": [{\"role\": \"user\", \"content\": user_input}]}):\n        for value in event.values():\n            print(\"Assistant:\", value[\"messages\"][-1].content)\n\n\nwhile True:\n    try:\n        user_input = input(\"User: \")\n        if user_input.lower() in [\"quit\", \"exit\", \"q\"]:\n            print(\"Goodbye!\")\n            break\n        stream_graph_updates(user_input)\n    except:\n        # \u5982\u679c input() \u4e0d\u53ef\u7528\u65f6\u7684\u540e\u5907\u65b9\u6848\n        user_input = \"What do you know about LangGraph?\"\n        print(\"User: \" + user_input)\n        stream_graph_updates(user_input)\n        break\n</code></pre> JavaScript <pre><code>import { HumanMessage } from \"@langchain/core/messages\";\n\nasync function streamGraphUpdates(userInput: string) {\n  const stream = await graph.stream({\n    messages: [new HumanMessage(userInput)],\n  });\n\nimport * as readline from \"node:readline/promises\";\nimport { StateGraph, MessagesZodState, START, END } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst llm = new ChatOpenAI({ model: \"gpt-4o-mini\" });\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state: z.infer&lt;typeof State&gt;) =&gt; {\n    return { messages: [await llm.invoke(state.messages)] };\n  })\n  .addEdge(START, \"chatbot\")\n  .addEdge(\"chatbot\", END)\n  .compile();\n\nasync function generateText(content: string) {\n  const stream = await graph.stream(\n    { messages: [{ type: \"human\", content }] },\n    { streamMode: \"values\" }\n  );\n\n  for await (const event of stream) {\n    for (const value of Object.values(event)) {\n      console.log(\n        \"Assistant:\",\n        value.messages[value.messages.length - 1].content\n      );\n    const lastMessage = event.messages.at(-1);\n    if (lastMessage?.getType() === \"ai\") {\n      console.log(`Assistant: ${lastMessage.text}`);\n    }\n  }\n}\n\nconst prompt = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n});\n\nwhile (true) {\n  const human = await prompt.question(\"User: \");\n  if ([\"quit\", \"exit\", \"q\"].includes(human.trim())) break;\n  await generateText(human || \"What do you know about LangGraph?\");\n}\n\nprompt.close();\n</code></pre> <pre><code>Assistant: LangGraph is a library designed to help build stateful multi-agent applications using language models. It provides tools for creating workflows and state machines to coordinate multiple AI agents or language model interactions. LangGraph is built on top of LangChain, leveraging its components while adding graph-based coordination capabilities. It's particularly useful for developing more complex, stateful AI applications that go beyond simple query-response interactions.\n</code></pre> Python <pre><code>Goodbye!\n</code></pre> <p>\u606d\u559c! \u4f60\u5df2\u7ecf\u4f7f\u7528 LangGraph \u6784\u5efa\u4e86\u7b2c\u4e00\u4e2a\u804a\u5929\u673a\u5668\u4eba\u3002\u8fd9\u4e2a\u673a\u5668\u4eba\u53ef\u4ee5\u901a\u8fc7\u63a5\u6536\u7528\u6237\u8f93\u5165\u5e76\u4f7f\u7528 LLM \u751f\u6210\u54cd\u5e94\u6765\u8fdb\u884c\u57fa\u672c\u5bf9\u8bdd\u3002\u4f60\u53ef\u4ee5\u67e5\u770b\u4e0a\u9762\u8c03\u7528\u7684 LangSmith Trace\u3002</p> Python <p>\u4ee5\u4e0b\u662f\u672c\u6559\u7a0b\u7684\u5b8c\u6574\u4ee3\u7801:</p> <pre><code>from typing import Annotated\n\nfrom langchain.chat_models import init_chat_model\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\n\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\n\ngraph_builder = StateGraph(State)\n\n\nllm = init_chat_model(\"anthropic:claude-3-5-sonnet-latest\")\n\n\ndef chatbot(state: State):\n    return {\"messages\": [llm.invoke(state[\"messages\"])]}\n\n\n# \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u552f\u4e00\u7684\u8282\u70b9\u540d\u79f0\n# \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6bcf\u6b21\u4f7f\u7528\u8282\u70b9\u65f6\u5c06\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6216\u5bf9\u8c61\ngraph_builder.add_node(\"chatbot\", chatbot)\ngraph_builder.add_edge(START, \"chatbot\")\ngraph_builder.add_edge(\"chatbot\", END)\ngraph = graph_builder.compile()\n</code></pre> JavaScript <pre><code>import { StateGraph, START, END, MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\nimport { ChatOpenAI } from \"@langchain/openai\";\n\nconst llm = new ChatOpenAI({\n  model: \"gpt-4o\",\n  temperature: 0,\n});\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst graph = new StateGraph(State);\n  // \u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u552f\u4e00\u7684\u8282\u70b9\u540d\u79f0\n  // \u7b2c\u4e8c\u4e2a\u53c2\u6570\u662f\u6bcf\u6b21\u4f7f\u7528\u8282\u70b9\u65f6\u5c06\u88ab\u8c03\u7528\u7684\u51fd\u6570\u6216\u5bf9\u8c61\n  .addNode(\"chatbot\", async (state) =&gt; {\n    return { messages: [await llm.invoke(state.messages)] };\n  });\n  .addEdge(START, \"chatbot\");\n  .addEdge(\"chatbot\", END)\n  .compile();\n</code></pre>"},{"location":"tutorials/get-started/1-build-basic-chatbot/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u4f60\u53ef\u80fd\u5df2\u7ecf\u6ce8\u610f\u5230,\u673a\u5668\u4eba\u7684\u77e5\u8bc6\u4ec5\u9650\u4e8e\u5176\u8bad\u7ec3\u6570\u636e\u4e2d\u7684\u5185\u5bb9\u3002\u5728\u4e0b\u4e00\u90e8\u5206\u4e2d,\u6211\u4eec\u5c06\u6dfb\u52a0\u4e00\u4e2a\u7f51\u7edc\u641c\u7d22\u5de5\u5177\u6765\u6269\u5c55\u673a\u5668\u4eba\u7684\u77e5\u8bc6\u5e76\u4f7f\u5176\u66f4\u5f3a\u5927\u3002</p>"},{"location":"tutorials/get-started/2-add-tools/","title":"\u6dfb\u52a0\u5de5\u5177","text":"<p>\u4e3a\u4e86\u5904\u7406\u804a\u5929\u673a\u5668\u4eba\u65e0\u6cd5\"\u51ed\u8bb0\u5fc6\"\u56de\u7b54\u7684\u67e5\u8be2,\u96c6\u6210\u4e00\u4e2a\u7f51\u7edc\u641c\u7d22\u5de5\u5177\u3002\u804a\u5929\u673a\u5668\u4eba\u53ef\u4ee5\u4f7f\u7528\u6b64\u5de5\u5177\u67e5\u627e\u76f8\u5173\u4fe1\u606f\u5e76\u63d0\u4f9b\u66f4\u597d\u7684\u54cd\u5e94\u3002</p> <p>Note</p> <p>\u672c\u6559\u7a0b\u57fa\u4e8e\u6784\u5efa\u57fa\u7840\u804a\u5929\u673a\u5668\u4eba\u3002</p>"},{"location":"tutorials/get-started/2-add-tools/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u672c\u6559\u7a0b\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u5177\u5907\u4ee5\u4e0b\u6761\u4ef6:</p> Python <ul> <li>Tavily \u641c\u7d22\u5f15\u64ce\u7684 API \u5bc6\u94a5\u3002</li> </ul> JavaScript <ul> <li>Tavily \u641c\u7d22\u5f15\u64ce\u7684 API \u5bc6\u94a5\u3002</li> </ul>"},{"location":"tutorials/get-started/2-add-tools/#1","title":"1. \u5b89\u88c5\u641c\u7d22\u5f15\u64ce","text":"Python <p>\u5b89\u88c5\u4f7f\u7528 Tavily \u641c\u7d22\u5f15\u64ce\u6240\u9700\u7684\u4f9d\u8d56\u9879:</p> <pre><code>pip install -U langchain-tavily\n</code></pre> JavaScript <p>\u5b89\u88c5\u4f7f\u7528 Tavily \u641c\u7d22\u5f15\u64ce\u6240\u9700\u7684\u4f9d\u8d56\u9879:</p> npmyarnpnpmbun <pre><code>npm install @langchain/tavily\n</code></pre> <pre><code>yarn add @langchain/tavily\n</code></pre> <pre><code>pnpm add @langchain/tavily\n</code></pre> <pre><code>bun add @langchain/tavily\n</code></pre>"},{"location":"tutorials/get-started/2-add-tools/#2","title":"2. \u914d\u7f6e\u73af\u5883","text":"<p>\u4f7f\u7528\u641c\u7d22\u5f15\u64ce API \u5bc6\u94a5\u914d\u7f6e\u4f60\u7684\u73af\u5883:</p> Python <pre><code>import os\n\nos.environ[\"TAVILY_API_KEY\"] = \"tvly-...\"\n</code></pre> JavaScript <pre><code>process.env.TAVILY_API_KEY = \"tvly-...\";\n</code></pre>"},{"location":"tutorials/get-started/2-add-tools/#3","title":"3. \u5b9a\u4e49\u5de5\u5177","text":"<p>\u5b9a\u4e49\u7f51\u7edc\u641c\u7d22\u5de5\u5177:</p> Python <pre><code>from langchain_tavily import TavilySearch\n\ntool = TavilySearch(max_results=2)\ntools = [tool]\ntool.invoke(\"What's a 'node' in LangGraph?\")\n</code></pre> JavaScript <pre><code>import { TavilySearch } from \"@langchain/tavily\";\n\nconst tool = new TavilySearch({ maxResults: 2 });\nconst tools = [tool];\n\nawait tool.invoke({ query: \"What's a 'node' in LangGraph?\" });\n</code></pre> <p>\u7ed3\u679c\u662f\u9875\u9762\u6458\u8981,\u6211\u4eec\u7684\u804a\u5929\u673a\u5668\u4eba\u53ef\u4ee5\u4f7f\u7528\u5b83\u6765\u56de\u7b54\u95ee\u9898:</p> Python <pre><code>{'query': \"What's a 'node' in LangGraph?\",\n'follow_up_questions': None,\n'answer': None,\n'images': [],\n'results': [{'title': \"Introduction to LangGraph: A Beginner's Guide - Medium\",\n'url': 'https://medium.com/@cplog/introduction-to-langgraph-a-beginners-guide-14f9be027141',\n'content': 'Stateful Graph: LangGraph revolves around the concept of a stateful graph, where each node in the graph represents a step in your computation, and the graph maintains a state that is passed around and updated as the computation progresses. LangGraph supports conditional edges, allowing you to dynamically determine the next node to execute based on the current state of the graph. We define nodes for classifying the input, handling greetings, and handling search queries. def classify_input_node(state): LangGraph is a versatile tool for building complex, stateful applications with LLMs. By understanding its core concepts and working through simple examples, beginners can start to leverage its power for their projects. Remember to pay attention to state management, conditional edges, and ensuring there are no dead-end nodes in your graph.',\n'score': 0.7065353,\n'raw_content': None},\n{'title': 'LangGraph Tutorial: What Is LangGraph and How to Use It?',\n'url': 'https://www.datacamp.com/tutorial/langgraph-tutorial',\n'content': 'LangGraph is a library within the LangChain ecosystem that provides a framework for defining, coordinating, and executing multiple LLM agents (or chains) in a structured and efficient manner. By managing the flow of data and the sequence of operations, LangGraph allows developers to focus on the high-level logic of their applications rather than the intricacies of agent coordination. Whether you need a chatbot that can handle various types of user requests or a multi-agent system that performs complex tasks, LangGraph provides the tools to build exactly what you need. LangGraph significantly simplifies the development of complex LLM applications by providing a structured framework for managing state and coordinating agent interactions.',\n'score': 0.5008063,\n'raw_content': None}],\n'response_time': 1.38}\n</code></pre> JavaScript <pre><code>{\n  \"query\": \"What's a 'node' in LangGraph?\",\n  \"follow_up_questions\": null,\n  \"answer\": null,\n  \"images\": [],\n  \"results\": [\n    {\n      \"url\": \"https://blog.langchain.dev/langgraph/\",\n      \"title\": \"LangGraph - LangChain Blog\",\n      \"content\": \"TL;DR: LangGraph is module built on top of LangChain to better enable creation of cyclical graphs, often needed for agent runtimes. This state is updated by nodes in the graph, which return operations to attributes of this state (in the form of a key-value store). After adding nodes, you can then add edges to create the graph. An example of this may be in the basic agent runtime, where we always want the model to be called after we call a tool. The state of this graph by default contains concepts that should be familiar to you if you've used LangChain agents: `input`, `chat_history`, `intermediate_steps` (and `agent_outcome` to represent the most recent agent outcome)\",\n      \"score\": 0.7407191,\n      \"raw_content\": null\n    },\n    {\n      \"url\": \"https://medium.com/@cplog/introduction-to-langgraph-a-beginners-guide-14f9be027141\",\n      \"title\": \"Introduction to LangGraph: A Beginner's Guide - Medium\",\n      \"content\": \"*   **Stateful Graph:** LangGraph revolves around the concept of a stateful graph, where each node in the graph represents a step in your computation, and the graph maintains a state that is passed around and updated as the computation progresses. LangGraph supports conditional edges, allowing you to dynamically determine the next node to execute based on the current state of the graph. Image 10: Introduction to AI Agent with LangChain and LangGraph: A Beginner\u2019s Guide Image 18: How to build LLM Agent with LangGraph\u200a\u2014\u200aStateGraph and Reducer Image 20: Simplest Graphs using LangGraph Framework Image 24: Building a ReAct Agent with Langgraph: A Step-by-Step Guide Image 28: Building an Agentic RAG with LangGraph: A Step-by-Step Guide\",\n      \"score\": 0.65279555,\n      \"raw_content\": null\n    }\n  ],\n  \"response_time\": 1.34\n}\n</code></pre>"},{"location":"tutorials/get-started/2-add-tools/#4","title":"4. \u5b9a\u4e49\u56fe","text":"Python <p>\u5bf9\u4e8e\u4f60\u5728\u7b2c\u4e00\u4e2a\u6559\u7a0b\u4e2d\u521b\u5efa\u7684 <code>StateGraph</code>,\u5728 LLM \u4e0a\u6dfb\u52a0 <code>bind_tools</code>\u3002\u8fd9\u8ba9 LLM \u77e5\u9053\u5982\u679c\u5b83\u60f3\u4f7f\u7528\u641c\u7d22\u5f15\u64ce,\u5e94\u8be5\u4f7f\u7528\u6b63\u786e\u7684 JSON \u683c\u5f0f\u3002</p> JavaScript <p>\u5bf9\u4e8e\u4f60\u5728\u7b2c\u4e00\u4e2a\u6559\u7a0b\u4e2d\u521b\u5efa\u7684 <code>StateGraph</code>,\u5728 LLM \u4e0a\u6dfb\u52a0 <code>bindTools</code>\u3002\u8fd9\u8ba9 LLM \u77e5\u9053\u5982\u679c\u5b83\u60f3\u4f7f\u7528\u641c\u7d22\u5f15\u64ce,\u5e94\u8be5\u4f7f\u7528\u6b63\u786e\u7684 JSON \u683c\u5f0f\u3002</p> <p>\u8ba9\u6211\u4eec\u9996\u5148\u9009\u62e9\u6211\u4eec\u7684 LLM:</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> JavaScript <pre><code>import { ChatAnthropic } from \"@langchain/anthropic\";\n\nconst llm = new ChatAnthropic({ model: \"claude-3-5-sonnet-latest\" });\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06\u5b83\u5408\u5e76\u5230 <code>StateGraph</code> \u4e2d:</p> Python <pre><code>from typing import Annotated\n\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\ngraph_builder = StateGraph(State)\n\n# \u4fee\u6539\uff1a\u544a\u8bc9 LLM \u5b83\u53ef\u4ee5\u8c03\u7528\u54ea\u4e9b\u5de5\u5177\n# highlight-next-line\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    return {\"messages\": [llm_with_tools.invoke(state[\"messages\"])]}\n\ngraph_builder.add_node(\"chatbot\", chatbot)\n</code></pre> JavaScript <pre><code>import { StateGraph, MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst chatbot = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  // \u4fee\u6539\uff1a\u544a\u8bc9 LLM \u5b83\u53ef\u4ee5\u8c03\u7528\u54ea\u4e9b\u5de5\u5177\n  const llmWithTools = llm.bindTools(tools);\n\n  return { messages: [await llmWithTools.invoke(state.messages)] };\n};\n</code></pre>"},{"location":"tutorials/get-started/2-add-tools/#5","title":"5. \u521b\u5efa\u8fd0\u884c\u5de5\u5177\u7684\u51fd\u6570","text":"Python <p>\u73b0\u5728,\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\u6765\u8fd0\u884c\u88ab\u8c03\u7528\u7684\u5de5\u5177\u3002\u901a\u8fc7\u5c06\u5de5\u5177\u6dfb\u52a0\u5230\u540d\u4e3a <code>BasicToolNode</code> \u7684\u65b0\u8282\u70b9\u6765\u5b9e\u73b0,\u8be5\u8282\u70b9\u68c0\u67e5\u72b6\u6001\u4e2d\u7684\u6700\u65b0\u6d88\u606f,\u5982\u679c\u6d88\u606f\u5305\u542b <code>tool_calls</code> \u5219\u8c03\u7528\u5de5\u5177\u3002\u5b83\u4f9d\u8d56\u4e8e LLM \u7684 <code>tool_calling</code> \u652f\u6301,\u8fd9\u5728 Anthropic\u3001OpenAI\u3001Google Gemini \u548c\u8bb8\u591a\u5176\u4ed6 LLM \u63d0\u4f9b\u5546\u4e2d\u90fd\u53ef\u7528\u3002</p> <pre><code>import json\n\nfrom langchain_core.messages import ToolMessage\n\n\nclass BasicToolNode:\n    \"\"\"\u8fd0\u884c\u6700\u540e\u4e00\u6761 AI \u6d88\u606f\u4e2d\u8bf7\u6c42\u7684\u5de5\u5177\u7684\u8282\u70b9\u3002\"\"\"\n\n    def __init__(self, tools: list) -&gt; None:\n        self.tools_by_name = {tool.name: tool for tool in tools}\n\n    def __call__(self, inputs: dict):\n        if messages := inputs.get(\"messages\", []):\n            message = messages[-1]\n        else:\n            raise ValueError(\"No message found in input\")\n        outputs = []\n        for tool_call in message.tool_calls:\n            tool_result = self.tools_by_name[tool_call[\"name\"]].invoke(\n                tool_call[\"args\"]\n            )\n            outputs.append(\n                ToolMessage(\n                    content=json.dumps(tool_result),\n                    name=tool_call[\"name\"],\n                    tool_call_id=tool_call[\"id\"],\n                )\n            )\n        return {\"messages\": outputs}\n\n\ntool_node = BasicToolNode(tools=[tool])\ngraph_builder.add_node(\"tools\", tool_node)\n</code></pre> <p>Note</p> <p>\u5982\u679c\u4f60\u5c06\u6765\u4e0d\u60f3\u81ea\u5df1\u6784\u5efa\u8fd9\u4e2a,\u53ef\u4ee5\u4f7f\u7528 LangGraph \u7684\u9884\u6784\u5efa ToolNode\u3002</p> JavaScript <p>\u73b0\u5728,\u521b\u5efa\u4e00\u4e2a\u51fd\u6570\u6765\u8fd0\u884c\u88ab\u8c03\u7528\u7684\u5de5\u5177\u3002\u901a\u8fc7\u5c06\u5de5\u5177\u6dfb\u52a0\u5230\u540d\u4e3a <code>\"tools\"</code> \u7684\u65b0\u8282\u70b9\u6765\u5b9e\u73b0,\u8be5\u8282\u70b9\u68c0\u67e5\u72b6\u6001\u4e2d\u7684\u6700\u65b0\u6d88\u606f,\u5982\u679c\u6d88\u606f\u5305\u542b <code>tool_calls</code> \u5219\u8c03\u7528\u5de5\u5177\u3002\u5b83\u4f9d\u8d56\u4e8e LLM \u7684\u5de5\u5177\u8c03\u7528\u652f\u6301,\u8fd9\u5728 Anthropic\u3001OpenAI\u3001Google Gemini \u548c\u8bb8\u591a\u5176\u4ed6 LLM \u63d0\u4f9b\u5546\u4e2d\u90fd\u53ef\u7528\u3002</p> <pre><code>import type { StructuredToolInterface } from \"@langchain/core/tools\";\nimport { isAIMessage, ToolMessage } from \"@langchain/core/messages\";\n\nfunction createToolNode(tools: StructuredToolInterface[]) {\n  const toolByName: Record&lt;string, StructuredToolInterface&gt; = {};\n  for (const tool of tools) {\n    toolByName[tool.name] = tool;\n  }\n\n  return async (inputs: z.infer&lt;typeof State&gt;) =&gt; {\n    const { messages } = inputs;\n    if (!messages || messages.length === 0) {\n      throw new Error(\"No message found in input\");\n    }\n\n    const message = messages.at(-1);\n    if (!message || !isAIMessage(message) || !message.tool_calls) {\n      throw new Error(\"Last message is not an AI message with tool calls\");\n    }\n\n    const outputs: ToolMessage[] = [];\n    for (const toolCall of message.tool_calls) {\n      if (!toolCall.id) throw new Error(\"Tool call ID is required\");\n\n      const tool = toolByName[toolCall.name];\n      if (!tool) throw new Error(`Tool ${toolCall.name} not found`);\n\n      const result = await tool.invoke(toolCall.args);\n\n      outputs.push(\n        new ToolMessage({\n          content: JSON.stringify(result),\n          name: toolCall.name,\n          tool_call_id: toolCall.id,\n        })\n      );\n    }\n\n    return { messages: outputs };\n  };\n}\n</code></pre> <p>Note</p> <p>\u5982\u679c\u4f60\u5c06\u6765\u4e0d\u60f3\u81ea\u5df1\u6784\u5efa\u8fd9\u4e2a,\u53ef\u4ee5\u4f7f\u7528 LangGraph \u7684\u9884\u6784\u5efa ToolNode\u3002</p>"},{"location":"tutorials/get-started/2-add-tools/#6-conditional_edges","title":"6. \u5b9a\u4e49 <code>conditional_edges</code>","text":"<p>\u6dfb\u52a0\u5de5\u5177\u8282\u70b9\u540e,\u73b0\u5728\u53ef\u4ee5\u5b9a\u4e49 <code>conditional_edges</code>\u3002</p> <p>\u8fb9(Edges) \u5c06\u63a7\u5236\u6d41\u4ece\u4e00\u4e2a\u8282\u70b9\u8def\u7531\u5230\u4e0b\u4e00\u4e2a\u8282\u70b9\u3002\u6761\u4ef6\u8fb9(Conditional edges) \u4ece\u5355\u4e2a\u8282\u70b9\u5f00\u59cb,\u901a\u5e38\u5305\u542b \"if\" \u8bed\u53e5,\u6839\u636e\u5f53\u524d\u56fe\u72b6\u6001\u8def\u7531\u5230\u4e0d\u540c\u7684\u8282\u70b9\u3002\u8fd9\u4e9b\u51fd\u6570\u63a5\u6536\u5f53\u524d\u56fe <code>state</code> \u5e76\u8fd4\u56de\u4e00\u4e2a\u5b57\u7b26\u4e32\u6216\u5b57\u7b26\u4e32\u5217\u8868,\u6307\u793a\u63a5\u4e0b\u6765\u8981\u8c03\u7528\u54ea\u4e2a\u8282\u70b9\u3002</p> Python <p>\u63a5\u4e0b\u6765,\u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a <code>route_tools</code> \u7684\u8def\u7531\u5668\u51fd\u6570,\u68c0\u67e5\u804a\u5929\u673a\u5668\u4eba\u8f93\u51fa\u4e2d\u7684 <code>tool_calls</code>\u3002\u901a\u8fc7\u8c03\u7528 <code>add_conditional_edges</code> \u5c06\u6b64\u51fd\u6570\u63d0\u4f9b\u7ed9\u56fe,\u8fd9\u544a\u8bc9\u56fe\u6bcf\u5f53 <code>chatbot</code> \u8282\u70b9\u5b8c\u6210\u65f6\u68c0\u67e5\u6b64\u51fd\u6570\u4ee5\u786e\u5b9a\u4e0b\u4e00\u6b65\u53bb\u54ea\u91cc\u3002</p> JavaScript <p>\u63a5\u4e0b\u6765,\u5b9a\u4e49\u4e00\u4e2a\u540d\u4e3a <code>routeTools</code> \u7684\u8def\u7531\u5668\u51fd\u6570,\u68c0\u67e5\u804a\u5929\u673a\u5668\u4eba\u8f93\u51fa\u4e2d\u7684 <code>tool_calls</code>\u3002\u901a\u8fc7\u8c03\u7528 <code>addConditionalEdges</code> \u5c06\u6b64\u51fd\u6570\u63d0\u4f9b\u7ed9\u56fe,\u8fd9\u544a\u8bc9\u56fe\u6bcf\u5f53 <code>chatbot</code> \u8282\u70b9\u5b8c\u6210\u65f6\u68c0\u67e5\u6b64\u51fd\u6570\u4ee5\u786e\u5b9a\u4e0b\u4e00\u6b65\u53bb\u54ea\u91cc\u3002</p> <p>\u6761\u4ef6\u5c06\u5728\u5b58\u5728\u5de5\u5177\u8c03\u7528\u65f6\u8def\u7531\u5230 <code>tools</code>,\u5426\u5219\u8def\u7531\u5230 <code>END</code>\u3002\u56e0\u4e3a\u6761\u4ef6\u53ef\u4ee5\u8fd4\u56de <code>END</code>,\u6240\u4ee5\u8fd9\u6b21\u4f60\u4e0d\u9700\u8981\u663e\u5f0f\u8bbe\u7f6e <code>finish_point</code>\u3002</p> Python <pre><code>def route_tools(\n    state: State,\n):\n    \"\"\"\n    \u5728 conditional_edge \u4e2d\u4f7f\u7528,\u5982\u679c\u6700\u540e\u4e00\u6761\u6d88\u606f\n    \u5305\u542b\u5de5\u5177\u8c03\u7528,\u5219\u8def\u7531\u5230 ToolNode\u3002\u5426\u5219,\u8def\u7531\u5230\u7ed3\u675f\u3002\n    \"\"\"\n    if isinstance(state, list):\n        ai_message = state[-1]\n    elif messages := state.get(\"messages\", []):\n        ai_message = messages[-1]\n    else:\n        raise ValueError(f\"No messages found in input state to tool_edge: {state}\")\n    if hasattr(ai_message, \"tool_calls\") and len(ai_message.tool_calls) &gt; 0:\n        return \"tools\"\n    return END\n\n\n# `tools_condition` \u51fd\u6570\u5982\u679c\u804a\u5929\u673a\u5668\u4eba\u8981\u6c42\u4f7f\u7528\u5de5\u5177,\u5219\u8fd4\u56de \"tools\",\u5982\u679c\n# \u5b83\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94,\u5219\u8fd4\u56de \"END\"\u3002\u8fd9\u4e2a\u6761\u4ef6\u8def\u7531\u5b9a\u4e49\u4e86\u4e3b\u667a\u80fd\u4f53\u5faa\u73af\u3002\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    route_tools,\n    # \u4ee5\u4e0b\u5b57\u5178\u8ba9\u4f60\u544a\u8bc9\u56fe\u5c06\u6761\u4ef6\u7684\u8f93\u51fa\u89e3\u91ca\u4e3a\u7279\u5b9a\u8282\u70b9\n    # \u5b83\u9ed8\u8ba4\u4e3a\u6052\u7b49\u51fd\u6570,\u4f46\u5982\u679c\u4f60\n    # \u60f3\u4f7f\u7528\u9664 \"tools\" \u4e4b\u5916\u7684\u5176\u4ed6\u540d\u79f0\u7684\u8282\u70b9,\n    # \u4f60\u53ef\u4ee5\u5c06\u5b57\u5178\u7684\u503c\u66f4\u65b0\u4e3a\u5176\u4ed6\u5185\u5bb9\n    # \u4f8b\u5982,\"tools\": \"my_tools\"\n    {\"tools\": \"tools\", END: END},\n)\n# \u6bcf\u5f53\u8c03\u7528\u5de5\u5177\u65f6,\u6211\u4eec\u8fd4\u56de\u5230\u804a\u5929\u673a\u5668\u4eba\u6765\u51b3\u5b9a\u4e0b\u4e00\u6b65\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.add_edge(START, \"chatbot\")\ngraph = graph_builder.compile()\n</code></pre> <p>Note</p> <p>\u4f60\u53ef\u4ee5\u7528\u9884\u6784\u5efa\u7684 tools_condition \u66ff\u6362\u5b83\u4ee5\u66f4\u7b80\u6d01\u3002</p> JavaScript <pre><code>import { END, START } from \"@langchain/langgraph\";\n\nconst routeTools = (state: z.infer&lt;typeof State&gt;) =&gt; {\n  /**\n   * \u7528\u4f5c\u6761\u4ef6\u8fb9,\u5982\u679c\u6700\u540e\u4e00\u6761\u6d88\u606f\u5305\u542b\u5de5\u5177\u8c03\u7528,\n   * \u5219\u8def\u7531\u5230 ToolNode\u3002\n   */\n  const lastMessage = state.messages.at(-1);\n  if (\n    lastMessage &amp;&amp;\n    isAIMessage(lastMessage) &amp;&amp;\n    lastMessage.tool_calls?.length\n  ) {\n    return \"tools\";\n  }\n\n  /** \u5426\u5219,\u8def\u7531\u5230\u7ed3\u675f\u3002 */\n  return END;\n};\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", chatbot)\n\n  // `routeTools` \u51fd\u6570\u5982\u679c\u804a\u5929\u673a\u5668\u4eba\u8981\u6c42\u4f7f\u7528\u5de5\u5177,\u5219\u8fd4\u56de \"tools\",\u5982\u679c\n  // \u5b83\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94,\u5219\u8fd4\u56de \"END\"\u3002\u8fd9\u4e2a\u6761\u4ef6\u8def\u7531\u5b9a\u4e49\u4e86\u4e3b\u667a\u80fd\u4f53\u5faa\u73af\u3002\n  .addNode(\"tools\", createToolNode(tools))\n\n  // \u4ece\u804a\u5929\u673a\u5668\u4eba\u5f00\u59cb\u56fe\n  .addEdge(START, \"chatbot\")\n\n  // `routeTools` \u51fd\u6570\u5982\u679c\u804a\u5929\u673a\u5668\u4eba\u8981\u6c42\u4f7f\u7528\u5de5\u5177,\u5219\u8fd4\u56de \"tools\",\u5982\u679c\n  // \u5b83\u53ef\u4ee5\u76f4\u63a5\u54cd\u5e94,\u5219\u8fd4\u56de \"END\"\u3002\n  .addConditionalEdges(\"chatbot\", routeTools, [\"tools\", END])\n\n  // \u6bcf\u5f53\u8c03\u7528\u5de5\u5177\u65f6,\u6211\u4eec\u9700\u8981\u8fd4\u56de\u5230\u804a\u5929\u673a\u5668\u4eba\n  .addEdge(\"tools\", \"chatbot\")\n  .compile();\n</code></pre> <p>Note</p> <p>\u4f60\u53ef\u4ee5\u7528\u9884\u6784\u5efa\u7684 toolsCondition \u66ff\u6362\u5b83\u4ee5\u66f4\u7b80\u6d01\u3002</p>"},{"location":"tutorials/get-started/2-add-tools/#7","title":"7. \u53ef\u89c6\u5316\u56fe(\u53ef\u9009)","text":"Python <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>get_graph</code> \u65b9\u6cd5\u548c\u5176\u4e2d\u4e00\u79cd\"\u7ed8\u5236\"\u65b9\u6cd5(\u5982 <code>draw_ascii</code> \u6216 <code>draw_png</code>)\u6765\u53ef\u89c6\u5316\u56fe\u3002<code>draw</code> \u65b9\u6cd5\u5404\u9700\u8981\u989d\u5916\u7684\u4f9d\u8d56\u9879\u3002</p> <pre><code>from IPython.display import Image, display\n\ntry:\n    display(Image(graph.get_graph().draw_mermaid_png()))\nexcept Exception:\n    # \u8fd9\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u4f9d\u8d56\u9879\u5e76\u4e14\u662f\u53ef\u9009\u7684\n    pass\n</code></pre> JavaScript <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>getGraph</code> \u65b9\u6cd5\u53ef\u89c6\u5316\u56fe,\u5e76\u4f7f\u7528 <code>drawMermaidPng</code> \u65b9\u6cd5\u6e32\u67d3\u56fe\u3002</p> <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"chatbot-with-tools.png\", imageBuffer);\n</code></pre> <p></p>"},{"location":"tutorials/get-started/2-add-tools/#8","title":"8. \u5411\u673a\u5668\u4eba\u63d0\u95ee","text":"<p>\u73b0\u5728\u4f60\u53ef\u4ee5\u5411\u804a\u5929\u673a\u5668\u4eba\u63d0\u51fa\u5176\u8bad\u7ec3\u6570\u636e\u4e4b\u5916\u7684\u95ee\u9898:</p> Python <pre><code>def stream_graph_updates(user_input: str):\n    for event in graph.stream({\"messages\": [{\"role\": \"user\", \"content\": user_input}]}):\n        for value in event.values():\n            print(\"Assistant:\", value[\"messages\"][-1].content)\n\nwhile True:\n    try:\n        user_input = input(\"User: \")\n        if user_input.lower() in [\"quit\", \"exit\", \"q\"]:\n            print(\"Goodbye!\")\n            break\n\n        stream_graph_updates(user_input)\n    except:\n        # \u5982\u679c input() \u4e0d\u53ef\u7528\u65f6\u7684\u540e\u5907\u65b9\u6848\n        user_input = \"What do you know about LangGraph?\"\n        print(\"User: \" + user_input)\n        stream_graph_updates(user_input)\n        break\n</code></pre> <pre><code>Assistant: [{'text': \"To provide you with accurate and up-to-date information about LangGraph, I'll need to search for the latest details. Let me do that for you.\", 'type': 'text'}, {'id': 'toolu_01Q588CszHaSvvP2MxRq9zRD', 'input': {'query': 'LangGraph AI tool information'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nAssistant: [{\"url\": \"https://www.langchain.com/langgraph\", \"content\": \"LangGraph sets the foundation for how we can build and scale AI workloads \\u2014 from conversational agents, complex task automation, to custom LLM-backed experiences that 'just work'. The next chapter in building complex production-ready features with LLMs is agentic, and with LangGraph and LangSmith, LangChain delivers an out-of-the-box solution ...\"}, {\"url\": \"https://github.com/langchain-ai/langgraph\", \"content\": \"Overview. LangGraph is a library for building stateful, multi-actor applications with LLMs, used to create agent and multi-agent workflows. Compared to other LLM frameworks, it offers these core benefits: cycles, controllability, and persistence. LangGraph allows you to define flows that involve cycles, essential for most agentic architectures ...\"}]\nAssistant: Based on the search results, I can provide you with information about LangGraph:\n\n1. Purpose:\n   LangGraph is a library designed for building stateful, multi-actor applications with Large Language Models (LLMs). It's particularly useful for creating agent and multi-agent workflows.\n\n2. Developer:\n   LangGraph is developed by LangChain, a company known for its tools and frameworks in the AI and LLM space.\n\n3. Key Features:\n   - Cycles: LangGraph allows the definition of flows that involve cycles, which is essential for most agentic architectures.\n   - Controllability: It offers enhanced control over the application flow.\n   - Persistence: The library provides ways to maintain state and persistence in LLM-based applications.\n\n4. Use Cases:\n   LangGraph can be used for various applications, including:\n   - Conversational agents\n   - Complex task automation\n   - Custom LLM-backed experiences\n\n5. Integration:\n   LangGraph works in conjunction with LangSmith, another tool by LangChain, to provide an out-of-the-box solution for building complex, production-ready features with LLMs.\n\n6. Significance:\n...\n   LangGraph is noted to offer unique benefits compared to other LLM frameworks, particularly in its ability to handle cycles, provide controllability, and maintain persistence.\n\nLangGraph \u5728\u57fa\u4e8e LLM \u7684\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4e0d\u65ad\u53d1\u5c55\u7684\u683c\u5c40\u4e2d\u4f3c\u4e4e\u662f\u4e00\u4e2a\u91cd\u8981\u7684\u5de5\u5177\uff0c\u4e3a\u5f00\u53d1\u8005\u63d0\u4f9b\u4e86\u521b\u5efa\u66f4\u590d\u6742\u3001\u6709\u72b6\u6001\u548c\u4ea4\u4e92\u5f0f AI \u7cfb\u7edf\u7684\u65b0\u65b9\u6cd5\u3002\nGoodbye!\n</code></pre> JavaScript <pre><code>import readline from \"node:readline/promises\";\n\nconst prompt = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n});\n\nasync function generateText(content: string) {\n  const stream = await graph.stream(\n    { messages: [{ type: \"human\", content }] },\n    { streamMode: \"values\" }\n  );\n\n  for await (const event of stream) {\n    const lastMessage = event.messages.at(-1);\n\n    if (lastMessage?.getType() === \"ai\" || lastMessage?.getType() === \"tool\") {\n      console.log(`Assistant: ${lastMessage?.text}`);\n    }\n  }\n}\n\nwhile (true) {\n  const human = await prompt.question(\"User: \");\n  if ([\"quit\", \"exit\", \"q\"].includes(human.trim())) break;\n  await generateText(human || \"What do you know about LangGraph?\");\n}\n\nprompt.close();\n</code></pre> <pre><code>User: What do you know about LangGraph?\nAssistant: I'll search for the latest information about LangGraph for you.\nAssistant: [{\"title\":\"Introduction to LangGraph: A Beginner's Guide - Medium\",\"url\":\"https://medium.com/@cplog/introduction-to-langgraph-a-beginners-guide-14f9be027141\",\"content\":\"...\"}]\nAssistant: \u6839\u636e\u641c\u7d22\u7ed3\u679c\uff0c\u6211\u53ef\u4ee5\u4e3a\u4f60\u63d0\u4f9b\u6709\u5173 LangGraph \u7684\u4fe1\u606f\uff1a\n\nLangGraph \u662f LangChain \u751f\u6001\u7cfb\u7edf\u4e2d\u7684\u4e00\u4e2a\u5e93\uff0c\u4e13\u4e3a\u4f7f\u7528\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff08LLM\uff09\u6784\u5efa\u6709\u72b6\u6001\u3001\u591a\u53c2\u4e0e\u8005\u5e94\u7528\u7a0b\u5e8f\u800c\u8bbe\u8ba1\u3002\u4ee5\u4e0b\u662f\u5173\u952e\u65b9\u9762\uff1a\n\n**\u6838\u5fc3\u76ee\u7684\uff1a**\n- LangGraph \u4e13\u95e8\u8bbe\u8ba1\u7528\u4e8e\u521b\u5efa\u667a\u80fd\u4f53\u548c\u591a\u667a\u80fd\u4f53\u5de5\u4f5c\u6d41\n- \u5b83\u63d0\u4f9b\u4e86\u4e00\u4e2a\u6846\u67b6\uff0c\u7528\u4e8e\u4ee5\u7ed3\u6784\u5316\u7684\u65b9\u5f0f\u5b9a\u4e49\u3001\u534f\u8c03\u548c\u6267\u884c\u591a\u4e2a LLM \u667a\u80fd\u4f53\n\n**\u4e3b\u8981\u7279\u6027\uff1a**\n1. **\u6709\u72b6\u6001\u56fe\u67b6\u6784**\uff1aLangGraph \u56f4\u7ed5\u6709\u72b6\u6001\u56fe\u5c55\u5f00\uff0c\u5176\u4e2d\u6bcf\u4e2a\u8282\u70b9\u4ee3\u8868\u8ba1\u7b97\u4e2d\u7684\u4e00\u4e2a\u6b65\u9aa4\uff0c\u56fe\u7ef4\u62a4\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\u4f20\u9012\u548c\u66f4\u65b0\u7684\u72b6\u6001\n\n2. **\u6761\u4ef6\u8fb9**\uff1a\u5b83\u652f\u6301\u6761\u4ef6\u8fb9\uff0c\u5141\u8bb8\u4f60\u6839\u636e\u56fe\u7684\u5f53\u524d\u72b6\u6001\u52a8\u6001\u786e\u5b9a\u8981\u6267\u884c\u7684\u4e0b\u4e00\u4e2a\u8282\u70b9\n\n3. **\u5faa\u73af**\uff1a\u4e0e\u5176\u4ed6 LLM \u6846\u67b6\u4e0d\u540c\uff0cLangGraph \u5141\u8bb8\u4f60\u5b9a\u4e49\u6d89\u53ca\u5faa\u73af\u7684\u6d41\u7a0b\uff0c\u8fd9\u5bf9\u4e8e\u5927\u591a\u6570\u667a\u80fd\u4f53\u67b6\u6784\u81f3\u5173\u91cd\u8981\n\n4. **\u53ef\u63a7\u6027**\uff1a\u5b83\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7528\u7a0b\u5e8f\u6d41\u7a0b\u7684\u589e\u5f3a\u63a7\u5236\n\n5. **\u6301\u4e45\u6027**\uff1a\u8be5\u5e93\u63d0\u4f9b\u4e86\u5728\u57fa\u4e8e LLM \u7684\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7ef4\u62a4\u72b6\u6001\u548c\u6301\u4e45\u6027\u7684\u65b9\u6cd5\n\n**\u7528\u4f8b\uff1a**\n- \u5bf9\u8bdd\u667a\u80fd\u4f53\n- \u590d\u6742\u4efb\u52a1\u81ea\u52a8\u5316\n- \u81ea\u5b9a\u4e49 LLM \u652f\u6301\u7684\u4f53\u9a8c\n- \u6267\u884c\u590d\u6742\u4efb\u52a1\u7684\u591a\u667a\u80fd\u4f53\u7cfb\u7edf\n\n**Benefits:**\nLangGraph \u5141\u8bb8\u5f00\u53d1\u8005\u4e13\u6ce8\u4e8e\u5e94\u7528\u7a0b\u5e8f\u7684\u9ad8\u7ea7\u903b\u8f91\uff0c\u800c\u4e0d\u662f\u667a\u80fd\u4f53\u534f\u8c03\u7684\u590d\u6742\u7ec6\u8282\uff0c\u4ece\u800c\u66f4\u5bb9\u6613\u4f7f\u7528 LLM \u6784\u5efa\u590d\u6742\u7684\u3001\u751f\u4ea7\u5c31\u7eea\u7684\u529f\u80fd\u3002\n\n\u8fd9\u4f7f\u5f97 LangGraph \u5728\u57fa\u4e8e LLM \u7684\u5e94\u7528\u7a0b\u5e8f\u5f00\u53d1\u4e0d\u65ad\u53d1\u5c55\u7684\u683c\u5c40\u4e2d\u6210\u4e3a\u4e00\u4e2a\u91cd\u8981\u7684\u5de5\u5177\u3002\n</code></pre>"},{"location":"tutorials/get-started/2-add-tools/#9","title":"9. \u4f7f\u7528\u9884\u6784\u5efa\u7ec4\u4ef6","text":"<p>\u4e3a\u4e86\u4fbf\u4e8e\u4f7f\u7528,\u8c03\u6574\u4f60\u7684\u4ee3\u7801\u4ee5\u7528 LangGraph \u9884\u6784\u5efa\u7ec4\u4ef6\u66ff\u6362\u4ee5\u4e0b\u5185\u5bb9\u3002\u8fd9\u4e9b\u5177\u6709\u5185\u7f6e\u529f\u80fd,\u5982\u5e76\u884c API \u6267\u884c\u3002</p> Python <ul> <li><code>BasicToolNode</code> \u7528\u9884\u6784\u5efa\u7684 ToolNode \u66ff\u6362</li> <li><code>route_tools</code> \u7528\u9884\u6784\u5efa\u7684 tools_condition \u66ff\u6362</li> </ul> <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> <pre><code>from typing import Annotated\n\nfrom langchain_tavily import TavilySearch\nfrom langchain_core.messages import BaseMessage\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode, tools_condition\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\ngraph_builder = StateGraph(State)\n\ntool = TavilySearch(max_results=2)\ntools = [tool]\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    return {\"messages\": [llm_with_tools.invoke(state[\"messages\"])]}\n\ngraph_builder.add_node(\"chatbot\", chatbot)\n\ntool_node = ToolNode(tools=[tool])\ngraph_builder.add_node(\"tools\", tool_node)\n\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    tools_condition,\n)\n# \u6bcf\u5f53\u8c03\u7528\u5de5\u5177\u65f6,\u6211\u4eec\u8fd4\u56de\u5230\u804a\u5929\u673a\u5668\u4eba\u6765\u51b3\u5b9a\u4e0b\u4e00\u6b65\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.add_edge(START, \"chatbot\")\ngraph = graph_builder.compile()\n</code></pre> JavaScript <ul> <li><code>createToolNode</code> \u7528\u9884\u6784\u5efa\u7684 ToolNode \u66ff\u6362</li> <li><code>routeTools</code> \u7528\u9884\u6784\u5efa\u7684 toolsCondition \u66ff\u6362</li> </ul> <pre><code>import { TavilySearch } from \"@langchain/tavily\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { StateGraph, START, MessagesZodState, END } from \"@langchain/langgraph\";\nimport { ToolNode, toolsCondition } from \"@langchain/langgraph/prebuilt\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst tools = [new TavilySearch({ maxResults: 2 })];\n\nconst llm = new ChatOpenAI({ model: \"gpt-4o-mini\" }).bindTools(tools);\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state) =&gt; ({\n    messages: [await llm.invoke(state.messages)],\n  }))\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile();\n</code></pre> <p>\u606d\u559c! \u4f60\u5df2\u7ecf\u5728 LangGraph \u4e2d\u521b\u5efa\u4e86\u4e00\u4e2a\u5bf9\u8bdd\u667a\u80fd\u4f53,\u53ef\u4ee5\u5728\u9700\u8981\u65f6\u4f7f\u7528\u641c\u7d22\u5f15\u64ce\u68c0\u7d22\u66f4\u65b0\u7684\u4fe1\u606f\u3002\u73b0\u5728\u5b83\u53ef\u4ee5\u5904\u7406\u66f4\u5e7f\u6cdb\u7684\u7528\u6237\u67e5\u8be2\u3002</p> Python <p>\u8981\u68c0\u67e5\u4f60\u7684\u667a\u80fd\u4f53\u521a\u521a\u6267\u884c\u7684\u6240\u6709\u6b65\u9aa4,\u8bf7\u67e5\u770b\u6b64 LangSmith trace\u3002</p>"},{"location":"tutorials/get-started/2-add-tools/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u804a\u5929\u673a\u5668\u4eba\u81ea\u8eab\u65e0\u6cd5\u8bb0\u4f4f\u8fc7\u53bb\u7684\u4ea4\u4e92,\u8fd9\u9650\u5236\u4e86\u5b83\u8fdb\u884c\u8fde\u8d2f\u7684\u591a\u8f6e\u5bf9\u8bdd\u7684\u80fd\u529b\u3002\u5728\u4e0b\u4e00\u90e8\u5206\u4e2d,\u4f60\u5c06\u6dfb\u52a0**\u8bb0\u5fc6**\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"tutorials/get-started/3-add-memory/","title":"\u6dfb\u52a0\u8bb0\u5fc6","text":"<p>\u804a\u5929\u673a\u5668\u4eba\u73b0\u5728\u53ef\u4ee5\u4f7f\u7528\u5de5\u5177\u56de\u7b54\u7528\u6237\u95ee\u9898,\u4f46\u5b83\u4e0d\u8bb0\u5f97\u5148\u524d\u4ea4\u4e92\u7684\u4e0a\u4e0b\u6587\u3002\u8fd9\u9650\u5236\u4e86\u5b83\u8fdb\u884c\u8fde\u8d2f\u7684\u591a\u8f6e\u5bf9\u8bdd\u7684\u80fd\u529b\u3002</p> <p>LangGraph \u901a\u8fc7**\u6301\u4e45\u5316\u68c0\u67e5\u70b9**\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002\u5982\u679c\u4f60\u5728\u7f16\u8bd1\u56fe\u65f6\u63d0\u4f9b <code>checkpointer</code> \u5e76\u5728\u8c03\u7528\u56fe\u65f6\u63d0\u4f9b <code>thread_id</code>,LangGraph \u4f1a\u5728\u6bcf\u4e00\u6b65\u540e\u81ea\u52a8\u4fdd\u5b58\u72b6\u6001\u3002\u5f53\u4f60\u4f7f\u7528\u76f8\u540c\u7684 <code>thread_id</code> \u518d\u6b21\u8c03\u7528\u56fe\u65f6,\u56fe\u4f1a\u52a0\u8f7d\u5176\u4fdd\u5b58\u7684\u72b6\u6001,\u5141\u8bb8\u804a\u5929\u673a\u5668\u4eba\u4ece\u4e2d\u65ad\u7684\u5730\u65b9\u7ee7\u7eed\u3002</p> <p>\u6211\u4eec\u7a0d\u540e\u4f1a\u770b\u5230,**\u68c0\u67e5\u70b9**\u6bd4\u7b80\u5355\u7684\u804a\u5929\u8bb0\u5fc6_\u5f3a\u5927\u5f97\u591a_ - \u5b83\u5141\u8bb8\u4f60\u968f\u65f6\u4fdd\u5b58\u548c\u6062\u590d\u590d\u6742\u72b6\u6001,\u7528\u4e8e\u9519\u8bef\u6062\u590d\u3001\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u3001\u65f6\u95f4\u65c5\u884c\u4ea4\u4e92\u7b49\u3002\u4f46\u9996\u5148,\u8ba9\u6211\u4eec\u6dfb\u52a0\u68c0\u67e5\u70b9\u6765\u542f\u7528\u591a\u8f6e\u5bf9\u8bdd\u3002</p> <p>Note</p> <p>\u672c\u6559\u7a0b\u57fa\u4e8e\u6dfb\u52a0\u5de5\u5177\u3002</p>"},{"location":"tutorials/get-started/3-add-memory/#1-memorysaver","title":"1. \u521b\u5efa <code>MemorySaver</code> \u68c0\u67e5\u70b9\u5668","text":"<p>\u521b\u5efa\u4e00\u4e2a <code>MemorySaver</code> \u68c0\u67e5\u70b9\u5668:</p> Python <pre><code>from langgraph.checkpoint.memory import InMemorySaver\n\nmemory = InMemorySaver()\n</code></pre> JavaScript <pre><code>import { MemorySaver } from \"@langchain/langgraph\";\n\nconst memory = new MemorySaver();\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u5185\u5b58\u68c0\u67e5\u70b9\u5668,\u5bf9\u4e8e\u6559\u7a0b\u6765\u8bf4\u5f88\u65b9\u4fbf\u3002\u7136\u800c,\u5728\u751f\u4ea7\u5e94\u7528\u4e2d,\u4f60\u53ef\u80fd\u4f1a\u5c06\u5176\u66f4\u6539\u4e3a\u4f7f\u7528 <code>SqliteSaver</code> \u6216 <code>PostgresSaver</code> \u5e76\u8fde\u63a5\u6570\u636e\u5e93\u3002</p>"},{"location":"tutorials/get-started/3-add-memory/#2","title":"2. \u7f16\u8bd1\u56fe","text":"<p>\u4f7f\u7528\u63d0\u4f9b\u7684\u68c0\u67e5\u70b9\u5668\u7f16\u8bd1\u56fe,\u8be5\u68c0\u67e5\u70b9\u5668\u5c06\u5728\u56fe\u5904\u7406\u6bcf\u4e2a\u8282\u70b9\u65f6\u68c0\u67e5\u70b9 <code>State</code>:</p> Python <pre><code>graph = graph_builder.compile(checkpointer=memory)\n</code></pre> JavaScript <pre><code>const graph = new StateGraph(State)\n  .addNode(\"chatbot\", chatbot)\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n</code></pre>"},{"location":"tutorials/get-started/3-add-memory/#3","title":"3. \u4e0e\u804a\u5929\u673a\u5668\u4eba\u4ea4\u4e92","text":"<p>\u73b0\u5728\u4f60\u53ef\u4ee5\u4e0e\u673a\u5668\u4eba\u4ea4\u4e92\u4e86!</p> <ol> <li> <p>\u9009\u62e9\u4e00\u4e2a\u7ebf\u7a0b\u4f5c\u4e3a\u6b64\u5bf9\u8bdd\u7684\u952e\u3002</p> Python <pre><code>config = {\"configurable\": {\"thread_id\": \"1\"}}\n</code></pre> JavaScript <pre><code>const config = { configurable: { thread_id: \"1\" } };\n</code></pre> </li> <li> <p>\u8c03\u7528\u4f60\u7684\u804a\u5929\u673a\u5668\u4eba:</p> Python <pre><code>user_input = \"Hi there! My name is Will.\"\n\n# config \u662f stream() \u6216 invoke() \u7684**\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u53c2\u6570**!\nevents = graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": user_input}]},\n    config,\n    stream_mode=\"values\",\n)\nfor event in events:\n    event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================ Human Message =================================\n\nHi there! My name is Will.\n================================== Ai Message ==================================\n\nHello Will! It's nice to meet you. How can I assist you today? Is there anything specific you'd like to know or discuss?\n</code></pre> <p>Note</p> <p>config \u5728\u8c03\u7528\u6211\u4eec\u7684\u56fe\u65f6\u4f5c\u4e3a**\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u53c2\u6570**\u63d0\u4f9b\u3002\u91cd\u8981\u7684\u662f,\u5b83_\u6ca1\u6709_\u5d4c\u5957\u5728\u56fe\u8f93\u5165(<code>{'messages': []}</code>)\u4e2d\u3002</p> JavaScript <pre><code>const userInput = \"Hi there! My name is Will.\";\n\nconst events = await graph.stream(\n  { messages: [{ type: \"human\", content: userInput }] },\n  { configurable: { thread_id: \"1\" }, streamMode: \"values\" }\n);\n\nfor await (const event of events) {\n  const lastMessage = event.messages.at(-1);\n  console.log(`${lastMessage?.getType()}: ${lastMessage?.text}`);\n}\n</code></pre> <pre><code>human: Hi there! My name is Will.\nai: Hello Will! It's nice to meet you. How can I assist you today? Is there anything specific you'd like to know or discuss?\n</code></pre> <p>Note</p> <p>config \u5728\u8c03\u7528\u6211\u4eec\u7684\u56fe\u65f6\u4f5c\u4e3a**\u7b2c\u4e8c\u4e2a\u53c2\u6570**\u63d0\u4f9b\u3002\u91cd\u8981\u7684\u662f,\u5b83_\u6ca1\u6709_\u5d4c\u5957\u5728\u56fe\u8f93\u5165(<code>{\"messages\": []}</code>)\u4e2d\u3002</p> </li> </ol>"},{"location":"tutorials/get-started/3-add-memory/#4","title":"4. \u63d0\u51fa\u540e\u7eed\u95ee\u9898","text":"<p>\u63d0\u51fa\u540e\u7eed\u95ee\u9898:</p> Python <pre><code>user_input = \"Remember my name?\"\n\n# config \u662f stream() \u6216 invoke() \u7684**\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\u53c2\u6570**!\nevents = graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": user_input}]},\n    config,\n    stream_mode=\"values\",\n)\nfor event in events:\n    event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================ Human Message =================================\n\nRemember my name?\n================================== Ai Message ==================================\n\nOf course, I remember your name, Will. I always try to pay attention to important details that users share with me. Is there anything else you'd like to talk about or any questions you have? I'm here to help with a wide range of topics or tasks.\n</code></pre> JavaScript <pre><code>const userInput2 = \"Remember my name?\";\n\nconst events2 = await graph.stream(\n  { messages: [{ type: \"human\", content: userInput2 }] },\n  { configurable: { thread_id: \"1\" }, streamMode: \"values\" }\n);\n\nfor await (const event of events2) {\n  const lastMessage = event.messages.at(-1);\n  console.log(`${lastMessage?.getType()}: ${lastMessage?.text}`);\n}\n</code></pre> <pre><code>human: Remember my name?\nai: Yes, your name is Will. How can I help you today?\n</code></pre> <p>\u6ce8\u610f,\u6211\u4eec\u6ca1\u6709\u4f7f\u7528\u5916\u90e8\u5217\u8868\u6765\u5b58\u50a8\u8bb0\u5fc6:\u6240\u6709\u8fd9\u4e9b\u90fd\u7531\u68c0\u67e5\u70b9\u5668\u5904\u7406!\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e2a LangSmith trace \u4e2d\u68c0\u67e5\u5b8c\u6574\u7684\u6267\u884c\u8fc7\u7a0b,\u770b\u770b\u53d1\u751f\u4e86\u4ec0\u4e48\u3002</p> <p>\u4e0d\u76f8\u4fe1\u6211?\u4f7f\u7528\u4e0d\u540c\u7684\u914d\u7f6e\u8bd5\u8bd5\u8fd9\u4e2a\u3002</p> Python <pre><code># \u552f\u4e00\u7684\u533a\u522b\u662f\u6211\u4eec\u5728\u8fd9\u91cc\u5c06 `thread_id` \u66f4\u6539\u4e3a \"2\" \u800c\u4e0d\u662f \"1\"\nevents = graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": user_input}]},\n    # highlight-next-line\n    {\"configurable\": {\"thread_id\": \"2\"}},\n    stream_mode=\"values\",\n)\nfor event in events:\n    event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================ Human Message =================================\n\nRemember my name?\n================================== Ai Message ==================================\n\nI apologize, but I don't have any previous context or memory of your name. As an AI assistant, I don't retain information from past conversations. Each interaction starts fresh. Could you please tell me your name so I can address you properly in this conversation?\n</code></pre> JavaScript <pre><code>const events3 = await graph.stream(\n  { messages: [{ type: \"human\", content: userInput2 }] },\n  // \u552f\u4e00\u7684\u533a\u522b\u662f\u6211\u4eec\u5728\u8fd9\u91cc\u5c06 `thread_id` \u66f4\u6539\u4e3a \"2\" \u800c\u4e0d\u662f \"1\"\n  { configurable: { thread_id: \"2\" }, streamMode: \"values\" }\n);\n\nfor await (const event of events3) {\n  const lastMessage = event.messages.at(-1);\n  console.log(`${lastMessage?.getType()}: ${lastMessage?.text}`);\n}\n</code></pre> <pre><code>human: Remember my name?\nai: I don't have the ability to remember personal information about users between interactions. However, I'm here to help you with any questions or topics you want to discuss!\n</code></pre> <p>\u6ce8\u610f,\u6211\u4eec\u505a\u7684**\u552f\u4e00**\u66f4\u6539\u662f\u4fee\u6539\u914d\u7f6e\u4e2d\u7684 <code>thread_id</code>\u3002\u67e5\u770b\u6b64\u8c03\u7528\u7684 LangSmith trace \u8fdb\u884c\u6bd4\u8f83\u3002</p>"},{"location":"tutorials/get-started/3-add-memory/#5","title":"5. \u68c0\u67e5\u72b6\u6001","text":"Python <p>\u5230\u76ee\u524d\u4e3a\u6b62,\u6211\u4eec\u5df2\u7ecf\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e2d\u521b\u5efa\u4e86\u51e0\u4e2a\u68c0\u67e5\u70b9\u3002\u4f46\u68c0\u67e5\u70b9\u4e2d\u5305\u542b\u4ec0\u4e48?\u8981\u5728\u4efb\u4f55\u65f6\u5019\u68c0\u67e5\u7ed9\u5b9a\u914d\u7f6e\u7684\u56fe <code>state</code>,\u8bf7\u8c03\u7528 <code>get_state(config)</code>\u3002</p> <pre><code>snapshot = graph.get_state(config)\nsnapshot\n</code></pre> <pre><code>StateSnapshot(values={'messages': [HumanMessage(content='Hi there! My name is Will.', additional_kwargs={}, response_metadata={}, id='8c1ca919-c553-4ebf-95d4-b59a2d61e078'), AIMessage(content=\"Hello Will! It's nice to meet you. How can I assist you today? Is there anything specific you'd like to know or discuss?\", additional_kwargs={}, response_metadata={'id': 'msg_01WTQebPhNwmMrmmWojJ9KXJ', 'model': 'claude-3-5-sonnet-20240620', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'input_tokens': 405, 'output_tokens': 32}}, id='run-58587b77-8c82-41e6-8a90-d62c444a261d-0', usage_metadata={'input_tokens': 405, 'output_tokens': 32, 'total_tokens': 437}), HumanMessage(content='Remember my name?', additional_kwargs={}, response_metadata={}, id='daba7df6-ad75-4d6b-8057-745881cea1ca'), AIMessage(content=\"Of course, I remember your name, Will. I always try to pay attention to important details that users share with me. Is there anything else you'd like to talk about or any questions you have? I'm here to help with a wide range of topics or tasks.\", additional_kwargs={}, response_metadata={'id': 'msg_01E41KitY74HpENRgXx94vag', 'model': 'claude-3-5-sonnet-20240620', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'input_tokens': 444, 'output_tokens': 58}}, id='run-ffeaae5c-4d2d-4ddb-bd59-5d5cbf2a5af8-0', usage_metadata={'input_tokens': 444, 'output_tokens': 58, 'total_tokens': 502})]}, next=(), config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef7d06e-93e0-6acc-8004-f2ac846575d2'}}, metadata={'source': 'loop', 'writes': {'chatbot': {'messages': [AIMessage(content=\"Of course, I remember your name, Will. I always try to pay attention to important details that users share with me. Is there anything else you'd like to talk about or any questions you have? I'm here to help with a wide range of topics or tasks.\", additional_kwargs={}, response_metadata={'id': 'msg_01E41KitY74HpENRgXx94vag', 'model': 'claude-3-5-sonnet-20240620', 'stop_reason': 'end_turn', 'stop_sequence': None, 'usage': {'input_tokens': 444, 'output_tokens': 58}}, id='run-ffeaae5c-4d2d-4ddb-bd59-5d5cbf2a5af8-0', usage_metadata={'input_tokens': 444, 'output_tokens': 58, 'total_tokens': 502})]}}, 'step': 4, 'parents': {}}, created_at='2024-09-27T19:30:10.820758+00:00', parent_config={'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1ef7d06e-859f-6206-8003-e1bd3c264b8f'}}, tasks=())\n</code></pre> <pre><code>snapshot.next  # (\u56e0\u4e3a\u56fe\u5728\u8fd9\u4e00\u8f6e\u7ed3\u675f\u4e86,`next` \u4e3a\u7a7a\u3002\u5982\u679c\u4f60\u5728\u56fe\u8c03\u7528\u671f\u95f4\u83b7\u53d6\u72b6\u6001,next \u4f1a\u544a\u8bc9\u4f60\u4e0b\u4e00\u4e2a\u5c06\u6267\u884c\u54ea\u4e2a\u8282\u70b9)\n</code></pre> JavaScript <p>\u5230\u76ee\u524d\u4e3a\u6b62,\u6211\u4eec\u5df2\u7ecf\u5728\u4e24\u4e2a\u4e0d\u540c\u7684\u7ebf\u7a0b\u4e2d\u521b\u5efa\u4e86\u51e0\u4e2a\u68c0\u67e5\u70b9\u3002\u4f46\u68c0\u67e5\u70b9\u4e2d\u5305\u542b\u4ec0\u4e48?\u8981\u5728\u4efb\u4f55\u65f6\u5019\u68c0\u67e5\u7ed9\u5b9a\u914d\u7f6e\u7684\u56fe <code>state</code>,\u8bf7\u8c03\u7528 <code>getState(config)</code>\u3002</p> <pre><code>await graph.getState({ configurable: { thread_id: \"1\" } });\n</code></pre> <pre><code>{\n  values: {\n    messages: [\n      HumanMessage {\n        \"id\": \"32fabcef-b3b8-481f-8bcb-fd83399a5f8d\",\n        \"content\": \"Hi there! My name is Will.\",\n        \"additional_kwargs\": {},\n        \"response_metadata\": {}\n      },\n      AIMessage {\n        \"id\": \"chatcmpl-BrPbTsCJbVqBvXWySlYoTJvM75Kv8\",\n        \"content\": \"Hello Will! How can I assist you today?\",\n        \"additional_kwargs\": {},\n        \"response_metadata\": {},\n        \"tool_calls\": [],\n        \"invalid_tool_calls\": []\n      },\n      HumanMessage {\n        \"id\": \"561c3aad-f8fc-4fac-94a6-54269a220856\",\n        \"content\": \"Remember my name?\",\n        \"additional_kwargs\": {},\n        \"response_metadata\": {}\n      },\n      AIMessage {\n        \"id\": \"chatcmpl-BrPbU4BhhsUikGbW37hYuF5vvnnE2\",\n        \"content\": \"Yes, I remember your name, Will! How can I help you today?\",\n        \"additional_kwargs\": {},\n        \"response_metadata\": {},\n        \"tool_calls\": [],\n        \"invalid_tool_calls\": []\n      }\n    ]\n  },\n  next: [],\n  tasks: [],\n  metadata: {\n    source: 'loop',\n    step: 4,\n    parents: {},\n    thread_id: '1'\n  },\n  config: {\n    configurable: {\n      thread_id: '1',\n      checkpoint_id: '1f05cccc-9bb6-6270-8004-1d2108bcec77',\n      checkpoint_ns: ''\n    }\n  },\n  createdAt: '2025-07-09T13:58:27.607Z',\n  parentConfig: {\n    configurable: {\n      thread_id: '1',\n      checkpoint_ns: '',\n      checkpoint_id: '1f05cccc-78fa-68d0-8003-ffb01a76b599'\n    }\n  }\n}\n</code></pre> <pre><code>import * as assert from \"node:assert\";\n\n// \u56e0\u4e3a\u56fe\u5728\u8fd9\u4e00\u8f6e\u7ed3\u675f\u4e86,`next` \u4e3a\u7a7a\u3002\n// \u5982\u679c\u4f60\u5728\u56fe\u8c03\u7528\u671f\u95f4\u83b7\u53d6\u72b6\u6001,next \u4f1a\u544a\u8bc9\u4f60\u4e0b\u4e00\u4e2a\u5c06\u6267\u884c\u54ea\u4e2a\u8282\u70b9)\nassert.deepEqual(snapshot.next, []);\n</code></pre> <p>\u4e0a\u9762\u7684\u5feb\u7167\u5305\u542b\u5f53\u524d\u72b6\u6001\u503c\u3001\u76f8\u5e94\u7684\u914d\u7f6e\u548c\u8981\u5904\u7406\u7684 <code>next</code> \u8282\u70b9\u3002\u5728\u6211\u4eec\u7684\u4f8b\u5b50\u4e2d,\u56fe\u5df2\u7ecf\u5230\u8fbe <code>END</code> \u72b6\u6001,\u6240\u4ee5 <code>next</code> \u4e3a\u7a7a\u3002</p> <p>\u606d\u559c! \u5f97\u76ca\u4e8e LangGraph \u7684\u68c0\u67e5\u70b9\u7cfb\u7edf,\u4f60\u7684\u804a\u5929\u673a\u5668\u4eba\u73b0\u5728\u53ef\u4ee5\u8de8\u4f1a\u8bdd\u7ef4\u62a4\u5bf9\u8bdd\u72b6\u6001\u3002\u8fd9\u4e3a\u66f4\u81ea\u7136\u3001\u66f4\u6709\u4e0a\u4e0b\u6587\u7684\u4ea4\u4e92\u5f00\u8f9f\u4e86\u4ee4\u4eba\u5174\u594b\u7684\u53ef\u80fd\u6027\u3002LangGraph \u7684\u68c0\u67e5\u70b9\u751a\u81f3\u53ef\u4ee5\u5904\u7406**\u4efb\u610f\u590d\u6742\u7684\u56fe\u72b6\u6001**,\u8fd9\u6bd4\u7b80\u5355\u7684\u804a\u5929\u8bb0\u5fc6\u66f4\u5177\u8868\u73b0\u529b\u548c\u5f3a\u5927\u3002</p> <p>\u67e5\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u6bb5\u4ee5\u67e5\u770b\u672c\u6559\u7a0b\u4e2d\u7684\u56fe:</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> <pre><code>from typing import Annotated\n\nfrom langchain.chat_models import init_chat_model\nfrom langchain_tavily import TavilySearch\nfrom langchain_core.messages import BaseMessage\nfrom typing_extensions import TypedDict\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode, tools_condition\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\ngraph_builder = StateGraph(State)\n\ntool = TavilySearch(max_results=2)\ntools = [tool]\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    return {\"messages\": [llm_with_tools.invoke(state[\"messages\"])]}\n\ngraph_builder.add_node(\"chatbot\", chatbot)\n\ntool_node = ToolNode(tools=[tool])\ngraph_builder.add_node(\"tools\", tool_node)\n\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    tools_condition,\n)\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.set_entry_point(\"chatbot\")\nmemory = InMemorySaver()\ngraph = graph_builder.compile(checkpointer=memory)\n</code></pre> JavaScript <pre><code>import { END, MessagesZodState, START } from \"@langchain/langgraph\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { TavilySearch } from \"@langchain/tavily\";\n\nimport { MemorySaver } from \"@langchain/langgraph\";\nimport { StateGraph } from \"@langchain/langgraph\";\nimport { ToolNode, toolsCondition } from \"@langchain/langgraph/prebuilt\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  messages: MessagesZodState.shape.messages,\n});\n\nconst tools = [new TavilySearch({ maxResults: 2 })];\nconst llm = new ChatOpenAI({ model: \"gpt-4o-mini\" }).bindTools(tools);\nconst memory = new MemorySaver();\n\nasync function generateText(content: string) {\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state) =&gt; ({\n    messages: [await llm.invoke(state.messages)],\n  }))\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n</code></pre>"},{"location":"tutorials/get-started/3-add-memory/#_2","title":"\u4e0b\u4e00\u6b65","text":"<p>\u5728\u4e0b\u4e00\u4e2a\u6559\u7a0b\u4e2d,\u4f60\u5c06\u5411\u804a\u5929\u673a\u5668\u4eba\u6dfb\u52a0\u4eba\u673a\u534f\u540c,\u4ee5\u5904\u7406\u5b83\u53ef\u80fd\u9700\u8981\u6307\u5bfc\u6216\u9a8c\u8bc1\u624d\u80fd\u7ee7\u7eed\u7684\u60c5\u51b5\u3002</p>"},{"location":"tutorials/get-started/4-human-in-the-loop/","title":"\u6dfb\u52a0\u4eba\u673a\u534f\u540c\u63a7\u5236","text":"<p>\u667a\u80fd\u4f53\u53ef\u80fd\u4e0d\u53ef\u9760,\u53ef\u80fd\u9700\u8981\u4eba\u5de5\u8f93\u5165\u624d\u80fd\u6210\u529f\u5b8c\u6210\u4efb\u52a1\u3002\u7c7b\u4f3c\u5730,\u5bf9\u4e8e\u67d0\u4e9b\u64cd\u4f5c,\u4f60\u53ef\u80fd\u5e0c\u671b\u5728\u8fd0\u884c\u4e4b\u524d\u9700\u8981\u4eba\u5de5\u6279\u51c6,\u4ee5\u786e\u4fdd\u4e00\u5207\u6309\u9884\u671f\u8fd0\u884c\u3002</p> <p>LangGraph \u7684\u6301\u4e45\u5316\u5c42\u652f\u6301**\u4eba\u673a\u534f\u540c**\u5de5\u4f5c\u6d41,\u5141\u8bb8\u6839\u636e\u7528\u6237\u53cd\u9988\u6682\u505c\u548c\u6062\u590d\u6267\u884c\u3002\u6b64\u529f\u80fd\u7684\u4e3b\u8981\u63a5\u53e3\u662f <code>interrupt</code> \u51fd\u6570\u3002\u5728\u8282\u70b9\u5185\u8c03\u7528 <code>interrupt</code> \u5c06\u6682\u505c\u6267\u884c\u3002\u53ef\u4ee5\u901a\u8fc7\u4f20\u5165 Command \u4ee5\u53ca\u6765\u81ea\u4eba\u7c7b\u7684\u65b0\u8f93\u5165\u6765\u6062\u590d\u6267\u884c\u3002</p> Python <p><code>interrupt</code> \u5728\u4eba\u4f53\u5de5\u7a0b\u5b66\u4e0a\u7c7b\u4f3c\u4e8e Python \u7684\u5185\u7f6e <code>input()</code>,\u4f46\u6709\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\u3002</p> JavaScript <p><code>interrupt</code> \u5728\u4eba\u4f53\u5de5\u7a0b\u5b66\u4e0a\u7c7b\u4f3c\u4e8e Node.js \u7684\u5185\u7f6e <code>readline.question()</code> \u51fd\u6570,\u4f46\u6709\u4e00\u4e9b\u6ce8\u610f\u4e8b\u9879\u3002</p> <p>Note</p> <p>\u672c\u6559\u7a0b\u57fa\u4e8e\u6dfb\u52a0\u8bb0\u5fc6\u3002</p>"},{"location":"tutorials/get-started/4-human-in-the-loop/#1-human_assistance","title":"1. \u6dfb\u52a0 <code>human_assistance</code> \u5de5\u5177","text":"<p>\u4ece\u4e3a\u804a\u5929\u673a\u5668\u4eba\u6dfb\u52a0\u8bb0\u5fc6\u6559\u7a0b\u7684\u73b0\u6709\u4ee3\u7801\u5f00\u59cb,\u5c06 <code>human_assistance</code> \u5de5\u5177\u6dfb\u52a0\u5230\u804a\u5929\u673a\u5668\u4eba\u3002\u6b64\u5de5\u5177\u4f7f\u7528 <code>interrupt</code> \u4ece\u4eba\u7c7b\u63a5\u6536\u4fe1\u606f\u3002</p> <p>\u8ba9\u6211\u4eec\u9996\u5148\u9009\u62e9\u4e00\u4e2a\u804a\u5929\u6a21\u578b:</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> JavaScript <pre><code>// Add your API key here\nprocess.env.ANTHROPIC_API_KEY = \"YOUR_API_KEY\";\n</code></pre> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u5c06\u5176\u4e0e\u989d\u5916\u7684\u5de5\u5177\u5408\u5e76\u5230\u6211\u4eec\u7684 <code>StateGraph</code> \u4e2d:</p> Python <pre><code>from typing import Annotated\n\nfrom langchain_tavily import TavilySearch\nfrom langchain_core.tools import tool\nfrom typing_extensions import TypedDict\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode, tools_condition\n\nfrom langgraph.types import Command, interrupt\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\ngraph_builder = StateGraph(State)\n\n@tool\ndef human_assistance(query: str) -&gt; str:\n    \"\"\"\u5411\u4eba\u7c7b\u8bf7\u6c42\u5e2e\u52a9\u3002\"\"\"\n    human_response = interrupt({\"query\": query})\n    return human_response[\"data\"]\n\ntool = TavilySearch(max_results=2)\ntools = [tool, human_assistance]\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    message = llm_with_tools.invoke(state[\"messages\"])\n    # \u56e0\u4e3a\u6211\u4eec\u5c06\u5728\u5de5\u5177\u6267\u884c\u671f\u95f4\u4e2d\u65ad,\n    # \u6211\u4eec\u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528\u4ee5\u907f\u514d\u5728\u6062\u590d\u65f6\u91cd\u590d\u4efb\u4f55\n    # \u5de5\u5177\u8c03\u7528\u3002\n    assert len(message.tool_calls) &lt;= 1\n    return {\"messages\": [message]}\n\ngraph_builder.add_node(\"chatbot\", chatbot)\n\ntool_node = ToolNode(tools=tools)\ngraph_builder.add_node(\"tools\", tool_node)\n\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    tools_condition,\n)\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.add_edge(START, \"chatbot\")\n</code></pre> JavaScript <pre><code>import { interrupt, MessagesZodState } from \"@langchain/langgraph\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { TavilySearch } from \"@langchain/tavily\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst humanAssistance = tool(\n  async ({ query }) =&gt; {\n    const humanResponse = interrupt({ query });\n    return humanResponse.data;\n  },\n  {\n    name: \"humanAssistance\",\n    description: \"\u5411\u4eba\u7c7b\u8bf7\u6c42\u5e2e\u52a9\u3002\",\n    schema: z.object({\n      query: z.string().describe(\"\u7ed9\u4eba\u7c7b\u7684\u53ef\u8bfb\u95ee\u9898\"),\n    }),\n  }\n);\n\nconst searchTool = new TavilySearch({ maxResults: 2 });\nconst tools = [searchTool, humanAssistance];\n\nconst llmWithTools = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n}).bindTools(tools);\n\nasync function chatbot(state: z.infer&lt;typeof MessagesZodState&gt;) {\n  const message = await llmWithTools.invoke(state.messages);\n\n  // \u56e0\u4e3a\u6211\u4eec\u5c06\u5728\u5de5\u5177\u6267\u884c\u671f\u95f4\u4e2d\u65ad,\n  // \u6211\u4eec\u7981\u7528\u5e76\u884c\u5de5\u5177\u8c03\u7528\u4ee5\u907f\u514d\u5728\u6062\u590d\u65f6\u91cd\u590d\u4efb\u4f55\n  // \u5de5\u5177\u8c03\u7528\u3002\n  if (message.tool_calls &amp;&amp; message.tool_calls.length &gt; 1) {\n    throw new Error(\"Multiple tool calls not supported with interrupts\");\n  }\n\n  return { messages: message };\n}\n</code></pre> <p>Tip</p> <p>\u6709\u5173\u4eba\u673a\u534f\u540c\u5de5\u4f5c\u6d41\u7684\u66f4\u591a\u4fe1\u606f\u548c\u793a\u4f8b,\u8bf7\u53c2\u9605\u4eba\u673a\u534f\u540c\u3002</p>"},{"location":"tutorials/get-started/4-human-in-the-loop/#2","title":"2. \u7f16\u8bd1\u56fe","text":"<p>\u50cf\u4ee5\u524d\u4e00\u6837,\u6211\u4eec\u4f7f\u7528\u68c0\u67e5\u70b9\u5668\u7f16\u8bd1\u56fe:</p> Python <pre><code>memory = InMemorySaver()\n\ngraph = graph_builder.compile(checkpointer=memory)\n</code></pre> JavaScript <pre><code>import { StateGraph, MemorySaver, START, END } from \"@langchain/langgraph\";\n\nconst memory = new MemorySaver();\n\nconst graph = new StateGraph(MessagesZodState)\n  .addNode(\"chatbot\", chatbot)\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n</code></pre>"},{"location":"tutorials/get-started/4-human-in-the-loop/#3","title":"3. \u53ef\u89c6\u5316\u56fe(\u53ef\u9009)","text":"<p>\u53ef\u89c6\u5316\u56fe,\u4f60\u4f1a\u5f97\u5230\u4e0e\u4e4b\u524d\u76f8\u540c\u7684\u5e03\u5c40 - \u53ea\u662f\u6dfb\u52a0\u4e86\u5de5\u5177!</p> Python <pre><code>from IPython.display import Image, display\n\ntry:\n    display(Image(graph.get_graph().draw_mermaid_png()))\nexcept Exception:\n    # \u8fd9\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u4f9d\u8d56\u9879\u5e76\u4e14\u662f\u53ef\u9009\u7684\n    pass\n</code></pre> JavaScript <pre><code>import * as fs from \"node:fs/promises\";\n\nconst drawableGraph = await graph.getGraphAsync();\nconst image = await drawableGraph.drawMermaidPng();\nconst imageBuffer = new Uint8Array(await image.arrayBuffer());\n\nawait fs.writeFile(\"chatbot-with-tools.png\", imageBuffer);\n</code></pre> <p></p>"},{"location":"tutorials/get-started/4-human-in-the-loop/#4","title":"4. \u5411\u804a\u5929\u673a\u5668\u4eba\u63d0\u95ee","text":"<p>\u73b0\u5728,\u7528\u4e00\u4e2a\u95ee\u9898\u63d0\u793a\u804a\u5929\u673a\u5668\u4eba,\u8fd9\u5c06\u89e6\u53d1\u65b0\u7684 <code>human_assistance</code> \u5de5\u5177:</p> Python <pre><code>user_input = \"I need some expert guidance for building an AI agent. Could you request assistance for me?\"\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\n\nevents = graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": user_input}]},\n    config,\n    stream_mode=\"values\",\n)\nfor event in events:\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================ Human Message =================================\n\nI need some expert guidance for building an AI agent. Could you request assistance for me?\n================================== Ai Message ==================================\n\n[{'text': \"Certainly! I'd be happy to request expert assistance for you regarding building an AI agent. To do this, I'll use the human_assistance function to relay your request. Let me do that for you now.\", 'type': 'text'}, {'id': 'toolu_01ABUqneqnuHNuo1vhfDFQCW', 'input': {'query': 'A user is requesting expert guidance for building an AI agent. Could you please provide some expert advice or resources on this topic?'}, 'name': 'human_assistance', 'type': 'tool_use'}]\nTool Calls:\n  human_assistance (toolu_01ABUqneqnuHNuo1vhfDFQCW)\n Call ID: toolu_01ABUqneqnuHNuo1vhfDFQCW\n  Args:\n    query: A user is requesting expert guidance for building an AI agent. Could you please provide some expert advice or resources on this topic?\n</code></pre> JavaScript <pre><code>import { isAIMessage } from \"@langchain/core/messages\";\n\nconst userInput =\n  \"I need some expert guidance for building an AI agent. Could you request assistance for me?\";\n\nconst events = await graph.stream(\n  { messages: [{ role: \"user\", content: userInput }] },\n  { configurable: { thread_id: \"1\" }, streamMode: \"values\" }\n);\n\nfor await (const event of events) {\n  if (\"messages\" in event) {\n    const lastMessage = event.messages.at(-1);\n    console.log(`[${lastMessage?.getType()}]: ${lastMessage?.text}`);\n\n    if (\n      lastMessage &amp;&amp;\n      isAIMessage(lastMessage) &amp;&amp;\n      lastMessage.tool_calls?.length\n    ) {\n      console.log(\"Tool calls:\", lastMessage.tool_calls);\n    }\n  }\n}\n</code></pre> <pre><code>[human]: I need some expert guidance for building an AI agent. Could you request assistance for me?\n[ai]: I'll help you request human assistance for guidance on building an AI agent.\nTool calls: [\n  {\n    name: 'humanAssistance',\n    args: {\n      query: 'I would like expert guidance on building an AI agent. Could you please provide assistance with this topic?'\n    },\n    id: 'toolu_01Bpxc8rFVMhSaRosS6b85Ts',\n    type: 'tool_call'\n  }\n]\n</code></pre> <p>\u804a\u5929\u673a\u5668\u4eba\u751f\u6210\u4e86\u4e00\u4e2a\u5de5\u5177\u8c03\u7528,\u4f46\u968f\u540e\u6267\u884c\u5df2\u88ab\u4e2d\u65ad\u3002\u5982\u679c\u4f60\u68c0\u67e5\u56fe\u72b6\u6001,\u4f60\u4f1a\u770b\u5230\u5b83\u505c\u5728\u4e86 tools \u8282\u70b9:</p> Python <pre><code>snapshot = graph.get_state(config)\nsnapshot.next\n</code></pre> <pre><code>('tools',)\n</code></pre> JavaScript <pre><code>const snapshot = await graph.getState({ configurable: { thread_id: \"1\" } });\nsnapshot.next;\n</code></pre> <pre><code>[\"tools\"]\n</code></pre> <p>Info</p> Python <p>\u4ed4\u7ec6\u770b\u770b <code>human_assistance</code> \u5de5\u5177:</p> <pre><code>@tool\ndef human_assistance(query: str) -&gt; str:\n    \"\"\"\u5411\u4eba\u7c7b\u8bf7\u6c42\u5e2e\u52a9\u3002\"\"\"\n    human_response = interrupt({\"query\": query})\n    return human_response[\"data\"]\n</code></pre> <p>\u7c7b\u4f3c\u4e8e Python \u7684\u5185\u7f6e <code>input()</code> \u51fd\u6570,\u5728\u5de5\u5177\u5185\u8c03\u7528 <code>interrupt</code> \u5c06\u6682\u505c\u6267\u884c\u3002\u8fdb\u5ea6\u57fa\u4e8e\u68c0\u67e5\u70b9\u5668\u6301\u4e45\u5316;\u56e0\u6b64,\u5982\u679c\u4f7f\u7528 Postgres \u6301\u4e45\u5316,\u53ea\u8981\u6570\u636e\u5e93\u5b58\u6d3b,\u5c31\u53ef\u4ee5\u968f\u65f6\u6062\u590d\u3002\u5728\u6b64\u793a\u4f8b\u4e2d,\u5b83\u4f7f\u7528\u5185\u5b58\u68c0\u67e5\u70b9\u5668\u6301\u4e45\u5316,\u53ea\u8981 Python \u5185\u6838\u6b63\u5728\u8fd0\u884c,\u5c31\u53ef\u4ee5\u968f\u65f6\u6062\u590d\u3002</p> JavaScript <p>\u4ed4\u7ec6\u770b\u770b <code>humanAssistance</code> \u5de5\u5177:</p> <pre><code>const humanAssistance = tool(\n  async ({ query }) =&gt; {\n    const humanResponse = interrupt({ query });\n    return humanResponse.data;\n  },\n  {\n    name: \"humanAssistance\",\n    description: \"\u5411\u4eba\u7c7b\u8bf7\u6c42\u5e2e\u52a9\u3002\",\n    schema: z.object({\n      query: z.string().describe(\"\u7ed9\u4eba\u7c7b\u7684\u53ef\u8bfb\u95ee\u9898\"),\n    }),\n  },\n);\n</code></pre> <p>\u5728\u5de5\u5177\u5185\u8c03\u7528 <code>interrupt</code> \u5c06\u6682\u505c\u6267\u884c\u3002\u8fdb\u5ea6\u57fa\u4e8e\u68c0\u67e5\u70b9\u5668\u6301\u4e45\u5316;\u56e0\u6b64,\u5982\u679c\u4f7f\u7528 Postgres \u6301\u4e45\u5316,\u53ea\u8981\u6570\u636e\u5e93\u5b58\u6d3b,\u5c31\u53ef\u4ee5\u968f\u65f6\u6062\u590d\u3002\u5728\u6b64\u793a\u4f8b\u4e2d,\u5b83\u4f7f\u7528\u5185\u5b58\u68c0\u67e5\u70b9\u5668\u6301\u4e45\u5316,\u53ea\u8981 JavaScript \u8fd0\u884c\u65f6\u6b63\u5728\u8fd0\u884c,\u5c31\u53ef\u4ee5\u968f\u65f6\u6062\u590d\u3002</p>"},{"location":"tutorials/get-started/4-human-in-the-loop/#5","title":"5. \u6062\u590d\u6267\u884c","text":"<p>\u8981\u6062\u590d\u6267\u884c,\u8bf7\u4f20\u9012\u4e00\u4e2a\u5305\u542b\u5de5\u5177\u671f\u671b\u7684\u6570\u636e\u7684 <code>Command</code> \u5bf9\u8c61\u3002\u6b64\u6570\u636e\u7684\u683c\u5f0f\u53ef\u4ee5\u6839\u636e\u9700\u8981\u81ea\u5b9a\u4e49\u3002</p> Python <p>\u5728\u6b64\u793a\u4f8b\u4e2d,\u4f7f\u7528\u5e26\u6709\u952e <code>\"data\"</code> \u7684\u5b57\u5178:</p> <pre><code>human_response = (\n    \"We, the experts are here to help! We'd recommend you check out LangGraph to build your agent.\"\n    \" It's much more reliable and extensible than simple autonomous agents.\"\n)\n\nhuman_command = Command(resume={\"data\": human_response})\n\nevents = graph.stream(human_command, config, stream_mode=\"values\")\nfor event in events:\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================== Ai Message ==================================\n\n[{'text': \"Certainly! I'd be happy to request expert assistance for you regarding building an AI agent. To do this, I'll use the human_assistance function to relay your request. Let me do that for you now.\", 'type': 'text'}, {'id': 'toolu_01ABUqneqnuHNuo1vhfDFQCW', 'input': {'query': 'A user is requesting expert guidance for building an AI agent. Could you please provide some expert advice or resources on this topic?'}, 'name': 'human_assistance', 'type': 'tool_use'}]\nTool Calls:\n  human_assistance (toolu_01ABUqneqnuHNuo1vhfDFQCW)\n Call ID: toolu_01ABUqneqnuHNuo1vhfDFQCW\n  Args:\n    query: A user is requesting expert guidance for building an AI agent. Could you please provide some expert advice or resources on this topic?\n================================= Tool Message =================================\nName: human_assistance\n\n\u6211\u4eec\u4e13\u5bb6\u5728\u8fd9\u91cc\u63d0\u4f9b\u5e2e\u52a9\uff01\u6211\u4eec\u5efa\u8bae\u4f60\u67e5\u770b LangGraph \u6765\u6784\u5efa\u4f60\u7684\u667a\u80fd\u4f53\u3002\u5b83\u6bd4\u7b80\u5355\u7684\u81ea\u4e3b\u667a\u80fd\u4f53\u66f4\u53ef\u9760\u548c\u53ef\u6269\u5c55\u3002\n================================== Ai Message ==================================\n\nThank you for your patience. I've received some expert advice regarding your request for guidance on building an AI agent. Here's what the experts have suggested:\n\n\u4e13\u5bb6\u5efa\u8bae\u4f60\u7814\u7a76 LangGraph \u6765\u6784\u5efa\u4f60\u7684 AI \u667a\u80fd\u4f53\u3002\u4ed6\u4eec\u63d0\u5230 LangGraph \u4e0e\u7b80\u5355\u7684\u81ea\u4e3b\u667a\u80fd\u4f53\u76f8\u6bd4\u662f\u4e00\u4e2a\u66f4\u53ef\u9760\u548c\u53ef\u6269\u5c55\u7684\u9009\u62e9\u3002\n\nLangGraph is likely a framework or library designed specifically for creating AI agents with advanced capabilities. Here are a few points to consider based on this recommendation:\n\n1. Reliability: The experts emphasize that LangGraph is more reliable than simpler autonomous agent approaches. This could mean it has better stability, error handling, or consistent performance.\n\n2. Extensibility: LangGraph is described as more extensible, which suggests that it probably offers a flexible architecture that allows you to easily add new features or modify existing ones as your agent's requirements evolve.\n\n3. Advanced capabilities: Given that it's recommended over \"simple autonomous agents,\" LangGraph likely provides more sophisticated tools and techniques for building complex AI agents.\n...\n2. Look for tutorials or guides specifically focused on building AI agents with LangGraph.\n3. Check if there are any community forums or discussion groups where you can ask questions and get support from other developers using LangGraph.\n\n\u5982\u679c\u4f60\u60f3\u4e86\u89e3\u6709\u5173 LangGraph \u7684\u66f4\u5177\u4f53\u4fe1\u606f\u6216\u5bf9\u6b64\u5efa\u8bae\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u8bf7\u968f\u65f6\u8be2\u95ee\uff0c\u6211\u53ef\u4ee5\u5411\u4e13\u5bb6\u8bf7\u6c42\u8fdb\u4e00\u6b65\u7684\u5e2e\u52a9\u3002\nOutput is truncated. View as a scrollable element or open in a text editor. Adjust cell output settings...\n</code></pre> JavaScript <p>\u5728\u6b64\u793a\u4f8b\u4e2d,\u4f7f\u7528\u5e26\u6709\u952e <code>\"data\"</code> \u7684\u5bf9\u8c61:</p> <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst humanResponse =\n  \"We, the experts are here to help! We'd recommend you check out LangGraph to build your agent.\" +\n  \" It's much more reliable and extensible than simple autonomous agents.\";\n\nconst humanCommand = new Command({ resume: { data: humanResponse } });\n\nconst resumeEvents = await graph.stream(humanCommand, {\n  configurable: { thread_id: \"1\" },\n  streamMode: \"values\",\n});\n\nfor await (const event of resumeEvents) {\n  if (\"messages\" in event) {\n    const lastMessage = event.messages.at(-1);\n    console.log(`[${lastMessage?.getType()}]: ${lastMessage?.text}`);\n  }\n}\n</code></pre> <pre><code>[tool]: \u6211\u4eec\u4e13\u5bb6\u5728\u8fd9\u91cc\u63d0\u4f9b\u5e2e\u52a9\uff01\u6211\u4eec\u5efa\u8bae\u4f60\u67e5\u770b LangGraph \u6765\u6784\u5efa\u4f60\u7684\u667a\u80fd\u4f53\u3002\u5b83\u6bd4\u7b80\u5355\u7684\u81ea\u4e3b\u667a\u80fd\u4f53\u66f4\u53ef\u9760\u548c\u53ef\u6269\u5c55\u3002\n[ai]: Thank you for your patience. I've received some expert advice regarding your request for guidance on building an AI agent. Here's what the experts have suggested:\n\n\u4e13\u5bb6\u5efa\u8bae\u4f60\u7814\u7a76 LangGraph \u6765\u6784\u5efa\u4f60\u7684 AI \u667a\u80fd\u4f53\u3002\u4ed6\u4eec\u63d0\u5230 LangGraph \u4e0e\u7b80\u5355\u7684\u81ea\u4e3b\u667a\u80fd\u4f53\u76f8\u6bd4\u662f\u4e00\u4e2a\u66f4\u53ef\u9760\u548c\u53ef\u6269\u5c55\u7684\u9009\u62e9\u3002\n\nLangGraph is likely a framework or library designed specifically for creating AI agents with advanced capabilities. Here are a few points to consider based on this recommendation:\n\n1. Reliability: The experts emphasize that LangGraph is more reliable than simpler autonomous agent approaches. This could mean it has better stability, error handling, or consistent performance.\n\n2. Extensibility: LangGraph is described as more extensible, which suggests that it probably offers a flexible architecture that allows you to easily add new features or modify existing ones as your agent's requirements evolve.\n\n3. Advanced capabilities: Given that it's recommended over \"simple autonomous agents,\" LangGraph likely provides more sophisticated tools and techniques for building complex AI agents.\n\n...\n</code></pre> <p>\u8f93\u5165\u5df2\u88ab\u63a5\u6536\u5e76\u4f5c\u4e3a\u5de5\u5177\u6d88\u606f\u5904\u7406\u3002\u67e5\u770b\u6b64\u8c03\u7528\u7684 LangSmith trace \u4ee5\u67e5\u770b\u4e0a\u8ff0\u8c03\u7528\u4e2d\u5b8c\u6210\u7684\u786e\u5207\u5de5\u4f5c\u3002\u6ce8\u610f,\u72b6\u6001\u5728\u7b2c\u4e00\u6b65\u52a0\u8f7d,\u4ee5\u4fbf\u6211\u4eec\u7684\u804a\u5929\u673a\u5668\u4eba\u53ef\u4ee5\u4ece\u4e2d\u65ad\u7684\u5730\u65b9\u7ee7\u7eed\u3002</p> <p>\u606d\u559c! \u4f60\u5df2\u7ecf\u4f7f\u7528 <code>interrupt</code> \u5411\u804a\u5929\u673a\u5668\u4eba\u6dfb\u52a0\u4e86\u4eba\u673a\u534f\u540c\u6267\u884c,\u5141\u8bb8\u5728\u9700\u8981\u65f6\u8fdb\u884c\u4eba\u5de5\u76d1\u7763\u548c\u5e72\u9884\u3002\u8fd9\u4e3a\u4f60\u53ef\u4ee5\u7528 AI \u7cfb\u7edf\u521b\u5efa\u7684\u6f5c\u5728 UI \u5f00\u8f9f\u4e86\u53ef\u80fd\u6027\u3002\u7531\u4e8e\u4f60\u5df2\u7ecf\u6dfb\u52a0\u4e86**\u68c0\u67e5\u70b9\u5668**,\u53ea\u8981\u5e95\u5c42\u6301\u4e45\u5316\u5c42\u6b63\u5728\u8fd0\u884c,\u56fe\u5c31\u53ef\u4ee5**\u65e0\u9650\u671f**\u6682\u505c,\u5e76\u968f\u65f6\u6062\u590d,\u5c31\u597d\u50cf\u4ec0\u4e48\u90fd\u6ca1\u53d1\u751f\u8fc7\u4e00\u6837\u3002</p> <p>\u67e5\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u6bb5\u4ee5\u67e5\u770b\u672c\u6559\u7a0b\u4e2d\u7684\u56fe:</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> <pre><code>from typing import Annotated\n\nfrom langchain_tavily import TavilySearch\nfrom langchain_core.tools import tool\nfrom typing_extensions import TypedDict\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode, tools_condition\nfrom langgraph.types import Command, interrupt\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\ngraph_builder = StateGraph(State)\n\n@tool\ndef human_assistance(query: str) -&gt; str:\n    \"\"\"Request assistance from a human.\"\"\"\n    human_response = interrupt({\"query\": query})\n    return human_response[\"data\"]\n\ntool = TavilySearch(max_results=2)\ntools = [tool, human_assistance]\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    message = llm_with_tools.invoke(state[\"messages\"])\n    assert(len(message.tool_calls) &lt;= 1)\n    return {\"messages\": [message]}\n\ngraph_builder.add_node(\"chatbot\", chatbot)\n\ntool_node = ToolNode(tools=tools)\ngraph_builder.add_node(\"tools\", tool_node)\n\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    tools_condition,\n)\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.add_edge(START, \"chatbot\")\n\nmemory = InMemorySaver()\ngraph = graph_builder.compile(checkpointer=memory)\n</code></pre> JavaScript <pre><code>import {\n  interrupt,\n  MessagesZodState,\n  StateGraph,\n  MemorySaver,\n  START,\n  END,\n} from \"@langchain/langgraph\";\nimport { ToolNode, toolsCondition } from \"@langchain/langgraph/prebuilt\";\nimport { isAIMessage } from \"@langchain/core/messages\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { TavilySearch } from \"@langchain/tavily\";\nimport {\n  interrupt,\n  MessagesZodState,\n  StateGraph,\n  MemorySaver,\n  START,\n  END,\n} from \"@langchain/langgraph\";\nimport { ToolNode, toolsCondition } from \"@langchain/langgraph/prebuilt\";\nimport { isAIMessage } from \"@langchain/core/messages\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { TavilySearch } from \"@langchain/tavily\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst humanAssistance = tool(\n  async ({ query }) =&gt; {\n    const humanResponse = interrupt({ query });\n    return humanResponse.data;\n  },\n  {\n    name: \"humanAssistance\",\n    description: \"Request assistance from a human.\",\n    schema: z.object({\n      query: z.string().describe(\"Human readable question for the human\"),\n    }),\n  }\n);\nconst humanAssistance = tool(\n  async ({ query }) =&gt; {\n    const humanResponse = interrupt({ query });\n    return humanResponse.data;\n  },\n  {\n    name: \"humanAssistance\",\n    description: \"Request assistance from a human.\",\n    schema: z.object({\n      query: z.string().describe(\"Human readable question for the human\"),\n    }),\n  }\n);\n\nconst searchTool = new TavilySearch({ maxResults: 2 });\nconst searchTool = new TavilySearch({ maxResults: 2 });\nconst tools = [searchTool, humanAssistance];\n\nconst llmWithTools = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n}).bindTools(tools);\nconst llmWithTools = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n}).bindTools(tools);\n\nconst chatbot = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\nconst chatbot = async (state: z.infer&lt;typeof MessagesZodState&gt;) =&gt; {\n  const message = await llmWithTools.invoke(state.messages);\n\n  // Because we will be interrupting during tool execution,\n  // we disable parallel tool calling to avoid repeating any\n  // tool invocations when we resume.\n\n  // Because we will be interrupting during tool execution,\n  // we disable parallel tool calling to avoid repeating any\n  // tool invocations when we resume.\n  if (message.tool_calls &amp;&amp; message.tool_calls.length &gt; 1) {\n    throw new Error(\"Multiple tool calls not supported with interrupts\");\n  }\n\n  return { messages: message };\n\n  return { messages: message };\n};\n\nconst memory = new MemorySaver();\n\nconst graph = new StateGraph(MessagesZodState)\n  .addNode(\"chatbot\", chatbot)\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n\nconst graph = new StateGraph(MessagesZodState)\n  .addNode(\"chatbot\", chatbot)\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n</code></pre>"},{"location":"tutorials/get-started/4-human-in-the-loop/#_2","title":"\u4e0b\u4e00\u6b65","text":"<p>\u5230\u76ee\u524d\u4e3a\u6b62,\u6559\u7a0b\u793a\u4f8b\u4f9d\u8d56\u4e8e\u4e00\u4e2a\u7b80\u5355\u7684\u72b6\u6001,\u53ea\u6709\u4e00\u4e2a\u6761\u76ee:\u6d88\u606f\u5217\u8868\u3002\u4f60\u53ef\u4ee5\u4f7f\u7528\u8fd9\u4e2a\u7b80\u5355\u7684\u72b6\u6001\u8d70\u5f97\u5f88\u8fdc,\u4f46\u5982\u679c\u4f60\u60f3\u5b9a\u4e49\u590d\u6742\u7684\u884c\u4e3a\u800c\u4e0d\u4f9d\u8d56\u4e8e\u6d88\u606f\u5217\u8868,\u4f60\u53ef\u4ee5\u5411\u72b6\u6001\u6dfb\u52a0\u989d\u5916\u7684\u5b57\u6bb5\u3002</p>"},{"location":"tutorials/get-started/5-customize-state/","title":"\u81ea\u5b9a\u4e49\u72b6\u6001","text":"<p>\u5728\u672c\u6559\u7a0b\u4e2d,\u4f60\u5c06\u5411\u72b6\u6001\u6dfb\u52a0\u5176\u4ed6\u5b57\u6bb5,\u4ee5\u5b9a\u4e49\u590d\u6742\u884c\u4e3a\u800c\u4e0d\u4f9d\u8d56\u6d88\u606f\u5217\u8868\u3002\u804a\u5929\u673a\u5668\u4eba\u5c06\u4f7f\u7528\u5176\u641c\u7d22\u5de5\u5177\u67e5\u627e\u7279\u5b9a\u4fe1\u606f\u5e76\u5c06\u5176\u8f6c\u53d1\u7ed9\u4eba\u7c7b\u8fdb\u884c\u5ba1\u67e5\u3002</p> <p>Note</p> <p>\u672c\u6559\u7a0b\u57fa\u4e8e\u6dfb\u52a0\u4eba\u673a\u534f\u540c\u63a7\u5236\u3002</p>"},{"location":"tutorials/get-started/5-customize-state/#1","title":"1. \u5411\u72b6\u6001\u6dfb\u52a0\u952e","text":"<p>\u901a\u8fc7\u5411\u72b6\u6001\u6dfb\u52a0 <code>name</code> \u548c <code>birthday</code> \u952e\u6765\u66f4\u65b0\u804a\u5929\u673a\u5668\u4eba\u4ee5\u7814\u7a76\u5b9e\u4f53\u7684\u751f\u65e5:</p> Python <pre><code>from typing import Annotated\n\nfrom typing_extensions import TypedDict\n\nfrom langgraph.graph.message import add_messages\n\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n    # highlight-next-line\n    name: str\n    # highlight-next-line\n    birthday: str\n</code></pre> JavaScript <pre><code>import { MessagesZodState } from \"@langchain/langgraph\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  messages: MessagesZodState.shape.messages,\n  // highlight-next-line\n  name: z.string(),\n  // highlight-next-line\n  birthday: z.string(),\n});\n</code></pre> <p>\u5c06\u6b64\u4fe1\u606f\u6dfb\u52a0\u5230\u72b6\u6001\u4e2d\uff0c\u4f7f\u5176\u53ef\u4ee5\u8f7b\u677e\u88ab\u5176\u4ed6\u56fe\u8282\u70b9\uff08\u5982\u5b58\u50a8\u6216\u5904\u7406\u4fe1\u606f\u7684\u4e0b\u6e38\u8282\u70b9\uff09\u4ee5\u53ca\u56fe\u7684\u6301\u4e45\u5c42\u8bbf\u95ee\u3002</p>"},{"location":"tutorials/get-started/5-customize-state/#2-update-the-state-inside-the-tool","title":"2. Update the state inside the tool","text":"Python <p>\u73b0\u5728\uff0c\u5728 <code>human_assistance</code> \u5de5\u5177\u5185\u90e8\u586b\u5145\u72b6\u6001\u952e\u3002\u8fd9\u5141\u8bb8\u4eba\u7c7b\u5728\u4fe1\u606f\u5b58\u50a8\u5230\u72b6\u6001\u4e4b\u524d\u8fdb\u884c\u5ba1\u67e5\u3002\u4f7f\u7528 <code>Command</code> \u4ece\u5de5\u5177\u5185\u90e8\u53d1\u51fa\u72b6\u6001\u66f4\u65b0\u3002</p> <pre><code>from langchain_core.messages import ToolMessage\nfrom langchain_core.tools import InjectedToolCallId, tool\n\nfrom langgraph.types import Command, interrupt\n\n@tool\n# Note that because we are generating a ToolMessage for a state update, we\n# generally require the ID of the corresponding tool call. We can use\n# LangChain's InjectedToolCallId to signal that this argument should not\n# be revealed to the model in the tool's schema.\ndef human_assistance(\n    name: str, birthday: str, tool_call_id: Annotated[str, InjectedToolCallId]\n) -&gt; str:\n    \"\"\"Request assistance from a human.\"\"\"\n    human_response = interrupt(\n        {\n            \"question\": \"Is this correct?\",\n            \"name\": name,\n            \"birthday\": birthday,\n        },\n    )\n    # If the information is correct, update the state as-is.\n    if human_response.get(\"correct\", \"\").lower().startswith(\"y\"):\n        verified_name = name\n        verified_birthday = birthday\n        response = \"Correct\"\n    # Otherwise, receive information from the human reviewer.\n    else:\n        verified_name = human_response.get(\"name\", name)\n        verified_birthday = human_response.get(\"birthday\", birthday)\n        response = f\"Made a correction: {human_response}\"\n\n    # This time we explicitly update the state with a ToolMessage inside\n    # the tool.\n    state_update = {\n        \"name\": verified_name,\n        \"birthday\": verified_birthday,\n        \"messages\": [ToolMessage(response, tool_call_id=tool_call_id)],\n    }\n    # We return a Command object in the tool to update our state.\n    return Command(update=state_update)\n</code></pre> JavaScript <p>\u73b0\u5728\uff0c\u5728 <code>humanAssistance</code> \u5de5\u5177\u5185\u90e8\u586b\u5145\u72b6\u6001\u952e\u3002\u8fd9\u5141\u8bb8\u4eba\u7c7b\u5728\u4fe1\u606f\u5b58\u50a8\u5230\u72b6\u6001\u4e4b\u524d\u8fdb\u884c\u5ba1\u67e5\u3002\u4f7f\u7528 <code>Command</code> \u4ece\u5de5\u5177\u5185\u90e8\u53d1\u51fa\u72b6\u6001\u66f4\u65b0\u3002</p> <pre><code>import { tool } from \"@langchain/core/tools\";\nimport { ToolMessage } from \"@langchain/core/messages\";\nimport { Command, interrupt } from \"@langchain/langgraph\";\n\nconst humanAssistance = tool(\n  async (input, config) =&gt; {\n    // Note that because we are generating a ToolMessage for a state update,\n    // we generally require the ID of the corresponding tool call.\n    // This is available in the tool's config.\n    const toolCallId = config?.toolCall?.id as string | undefined;\n    if (!toolCallId) throw new Error(\"Tool call ID is required\");\n\n    const humanResponse = await interrupt({\n      question: \"Is this correct?\",\n      name: input.name,\n      birthday: input.birthday,\n    });\n\n    // We explicitly update the state with a ToolMessage inside the tool.\n    const stateUpdate = (() =&gt; {\n      // If the information is correct, update the state as-is.\n      if (humanResponse.correct?.toLowerCase().startsWith(\"y\")) {\n        return {\n          name: input.name,\n          birthday: input.birthday,\n          messages: [\n            new ToolMessage({ content: \"Correct\", tool_call_id: toolCallId }),\n          ],\n        };\n      }\n\n      // Otherwise, receive information from the human reviewer.\n      return {\n        name: humanResponse.name || input.name,\n        birthday: humanResponse.birthday || input.birthday,\n        messages: [\n          new ToolMessage({\n            content: `Made a correction: ${JSON.stringify(humanResponse)}`,\n            tool_call_id: toolCallId,\n          }),\n        ],\n      };\n    })();\n\n    // We return a Command object in the tool to update our state.\n    return new Command({ update: stateUpdate });\n  },\n  {\n    name: \"humanAssistance\",\n    description: \"Request assistance from a human.\",\n    schema: z.object({\n      name: z.string().describe(\"The name of the entity\"),\n      birthday: z.string().describe(\"The birthday/release date of the entity\"),\n    }),\n  }\n);\n</code></pre> <p>The rest of the graph stays the same.</p>"},{"location":"tutorials/get-started/5-customize-state/#3-prompt-the-chatbot","title":"3. Prompt the chatbot","text":"Python <p>\u63d0\u793a\u804a\u5929\u673a\u5668\u4eba\u67e5\u627e LangGraph \u5e93\u7684\"\u751f\u65e5\"\uff0c\u5e76\u5728\u83b7\u5f97\u6240\u9700\u4fe1\u606f\u540e\u6307\u793a\u804a\u5929\u673a\u5668\u4eba\u8bbf\u95ee <code>human_assistance</code> \u5de5\u5177\u3002\u901a\u8fc7\u5728\u5de5\u5177\u7684\u53c2\u6570\u4e2d\u8bbe\u7f6e <code>name</code> \u548c <code>birthday</code>\uff0c\u4f60\u53ef\u4ee5\u5f3a\u5236\u804a\u5929\u673a\u5668\u4eba\u4e3a\u8fd9\u4e9b\u5b57\u6bb5\u751f\u6210\u5efa\u8bae\u3002</p> <pre><code>user_input = (\n    \"Can you look up when LangGraph was released? \"\n    \"When you have the answer, use the human_assistance tool for review.\"\n)\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\n\nevents = graph.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": user_input}]},\n    config,\n    stream_mode=\"values\",\n)\nfor event in events:\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> JavaScript <p>\u63d0\u793a\u804a\u5929\u673a\u5668\u4eba\u67e5\u627e LangGraph \u5e93\u7684\"\u751f\u65e5\"\uff0c\u5e76\u5728\u83b7\u5f97\u6240\u9700\u4fe1\u606f\u540e\u6307\u793a\u804a\u5929\u673a\u5668\u4eba\u8bbf\u95ee <code>humanAssistance</code> \u5de5\u5177\u3002\u901a\u8fc7\u5728\u5de5\u5177\u7684\u53c2\u6570\u4e2d\u8bbe\u7f6e <code>name</code> \u548c <code>birthday</code>\uff0c\u4f60\u53ef\u4ee5\u5f3a\u5236\u804a\u5929\u673a\u5668\u4eba\u4e3a\u8fd9\u4e9b\u5b57\u6bb5\u751f\u6210\u5efa\u8bae\u3002</p> <pre><code>import { isAIMessage } from \"@langchain/core/messages\";\n\nconst userInput =\n  \"Can you look up when LangGraph was released? \" +\n  \"When you have the answer, use the humanAssistance tool for review.\";\n\nconst events = await graph.stream(\n  { messages: [{ role: \"user\", content: userInput }] },\n  { configurable: { thread_id: \"1\" }, streamMode: \"values\" }\n);\n\nfor await (const event of events) {\n  if (\"messages\" in event) {\n    const lastMessage = event.messages.at(-1);\n\n    console.log(\n      \"=\".repeat(32),\n      `${lastMessage?.getType()} Message`,\n      \"=\".repeat(32)\n    );\n    console.log(lastMessage?.text);\n\n    if (\n      lastMessage &amp;&amp;\n      isAIMessage(lastMessage) &amp;&amp;\n      lastMessage.tool_calls?.length\n    ) {\n      console.log(\"Tool Calls:\");\n      for (const call of lastMessage.tool_calls) {\n        console.log(`  ${call.name} (${call.id})`);\n        console.log(`  Args: ${JSON.stringify(call.args)}`);\n      }\n    }\n  }\n}\n</code></pre> <pre><code>================================ Human Message =================================\n\nCan you look up when LangGraph was released? When you have the answer, use the human_assistance tool for review.\n================================== Ai Message ==================================\n\n[{'text': \"Certainly! I'll start by searching for information about LangGraph's release date using the Tavily search function. Then, I'll use the human_assistance tool for review.\", 'type': 'text'}, {'id': 'toolu_01JoXQPgTVJXiuma8xMVwqAi', 'input': {'query': 'LangGraph release date'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01JoXQPgTVJXiuma8xMVwqAi)\n Call ID: toolu_01JoXQPgTVJXiuma8xMVwqAi\n  Args:\n    query: LangGraph release date\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://blog.langchain.dev/langgraph-cloud/\", \"content\": \"We also have a new stable release of LangGraph. By LangChain 6 min read Jun 27, 2024 (Oct '24) Edit: Since the launch of LangGraph Platform, we now have multiple deployment options alongside LangGraph Studio - which now fall under LangGraph Platform. LangGraph Platform is synonymous with our Cloud SaaS deployment option.\"}, {\"url\": \"https://changelog.langchain.com/announcements/langgraph-cloud-deploy-at-scale-monitor-carefully-iterate-boldly\", \"content\": \"LangChain - Changelog | \u2601 \ud83d\ude80 LangGraph Platform: Deploy at scale, monitor LangChain LangSmith LangGraph LangChain LangSmith LangGraph LangChain LangSmith LangGraph LangChain Changelog Sign up for our newsletter to stay up to date DATE: The LangChain Team LangGraph LangGraph Platform \u2601 \ud83d\ude80 LangGraph Platform: Deploy at scale, monitor carefully, iterate boldly DATE: June 27, 2024 AUTHOR: The LangChain Team LangGraph Platform is now in closed beta, offering scalable, fault-tolerant deployment for LangGraph agents. LangGraph Platform also includes a new playground-like studio for debugging agent failure modes and quick iteration: Join the waitlist today for LangGraph Platform. And to learn more, read our blog post announcement or check out our docs. Subscribe By clicking subscribe, you accept our privacy policy and terms and conditions.\"}]\n================================== Ai Message ==================================\n\n[{'text': \"Based on the search results, it appears that LangGraph was already in existence before June 27, 2024, when LangGraph Platform was announced. However, the search results don't provide a specific release date for the original LangGraph. \\n\\nGiven this information, I'll use the human_assistance tool to review and potentially provide more accurate information about LangGraph's initial release date.\", 'type': 'text'}, {'id': 'toolu_01JDQAV7nPqMkHHhNs3j3XoN', 'input': {'name': 'Assistant', 'birthday': '2023-01-01'}, 'name': 'human_assistance', 'type': 'tool_use'}]\nTool Calls:\n  human_assistance (toolu_01JDQAV7nPqMkHHhNs3j3XoN)\n Call ID: toolu_01JDQAV7nPqMkHHhNs3j3XoN\n  Args:\n    name: Assistant\n    birthday: 2023-01-01\n</code></pre> Python <p>\u6211\u4eec\u518d\u6b21\u89e6\u53d1\u4e86 <code>human_assistance</code> \u5de5\u5177\u4e2d\u7684 <code>interrupt</code>\u3002</p> JavaScript <p>\u6211\u4eec\u518d\u6b21\u89e6\u53d1\u4e86 <code>humanAssistance</code> \u5de5\u5177\u4e2d\u7684 <code>interrupt</code>\u3002</p>"},{"location":"tutorials/get-started/5-customize-state/#4-add-human-assistance","title":"4. Add human assistance","text":"<p>\u804a\u5929\u673a\u5668\u4eba\u672a\u80fd\u8bc6\u522b\u6b63\u786e\u7684\u65e5\u671f\uff0c\u56e0\u6b64\u5411\u5b83\u63d0\u4f9b\u4fe1\u606f\uff1a</p> Python <pre><code>human_command = Command(\n    resume={\n        \"name\": \"LangGraph\",\n        \"birthday\": \"Jan 17, 2024\",\n    },\n)\n\nevents = graph.stream(human_command, config, stream_mode=\"values\")\nfor event in events:\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> JavaScript <pre><code>import { Command } from \"@langchain/langgraph\";\n\nconst humanCommand = new Command({\n  resume: {\n    name: \"LangGraph\",\n    birthday: \"Jan 17, 2024\",\n  },\n});\n\nconst resumeEvents = await graph.stream(humanCommand, {\n  configurable: { thread_id: \"1\" },\n  streamMode: \"values\",\n});\n\nfor await (const event of resumeEvents) {\n  if (\"messages\" in event) {\n    const lastMessage = event.messages.at(-1);\n\n    console.log(\n      \"=\".repeat(32),\n      `${lastMessage?.getType()} Message`,\n      \"=\".repeat(32)\n    );\n    console.log(lastMessage?.text);\n\n    if (\n      lastMessage &amp;&amp;\n      isAIMessage(lastMessage) &amp;&amp;\n      lastMessage.tool_calls?.length\n    ) {\n      console.log(\"Tool Calls:\");\n      for (const call of lastMessage.tool_calls) {\n        console.log(`  ${call.name} (${call.id})`);\n        console.log(`  Args: ${JSON.stringify(call.args)}`);\n      }\n    }\n  }\n}\n</code></pre> <pre><code>================================== Ai Message ==================================\n\n[{'text': \"Based on the search results, it appears that LangGraph was already in existence before June 27, 2024, when LangGraph Platform was announced. However, the search results don't provide a specific release date for the original LangGraph. \\n\\nGiven this information, I'll use the human_assistance tool to review and potentially provide more accurate information about LangGraph's initial release date.\", 'type': 'text'}, {'id': 'toolu_01JDQAV7nPqMkHHhNs3j3XoN', 'input': {'name': 'Assistant', 'birthday': '2023-01-01'}, 'name': 'human_assistance', 'type': 'tool_use'}]\nTool Calls:\n  human_assistance (toolu_01JDQAV7nPqMkHHhNs3j3XoN)\n Call ID: toolu_01JDQAV7nPqMkHHhNs3j3XoN\n  Args:\n    name: Assistant\n    birthday: 2023-01-01\n================================= Tool Message =================================\nName: human_assistance\n\nMade a correction: {'name': 'LangGraph', 'birthday': 'Jan 17, 2024'}\n================================== Ai Message ==================================\n\nThank you for the human assistance. I can now provide you with the correct information about LangGraph's release date.\n\nLangGraph was initially released on January 17, 2024. This information comes from the human assistance correction, which is more accurate than the search results I initially found.\n\nTo summarize:\n1. LangGraph's original release date: January 17, 2024\n2. LangGraph Platform announcement: June 27, 2024\n\nIt's worth noting that LangGraph had been in development and use for some time before the LangGraph Platform announcement, but the official initial release of LangGraph itself was on January 17, 2024.\n</code></pre> <p>\u8bf7\u6ce8\u610f\uff0c\u8fd9\u4e9b\u5b57\u6bb5\u73b0\u5728\u53cd\u6620\u5728\u72b6\u6001\u4e2d\uff1a</p> Python <pre><code>snapshot = graph.get_state(config)\n\n{k: v for k, v in snapshot.values.items() if k in (\"name\", \"birthday\")}\n</code></pre> <pre><code>{'name': 'LangGraph', 'birthday': 'Jan 17, 2024'}\n</code></pre> JavaScript <pre><code>const snapshot = await graph.getState(config);\n\nconst relevantState = Object.fromEntries(\n  Object.entries(snapshot.values).filter(([k]) =&gt;\n    [\"name\", \"birthday\"].includes(k)\n  )\n);\n</code></pre> <pre><code>{ name: 'LangGraph', birthday: 'Jan 17, 2024' }\n</code></pre> <p>\u8fd9\u4f7f\u5f97\u4e0b\u6e38\u8282\u70b9\uff08\u4f8b\u5982\u8fdb\u4e00\u6b65\u5904\u7406\u6216\u5b58\u50a8\u4fe1\u606f\u7684\u8282\u70b9\uff09\u53ef\u4ee5\u8f7b\u677e\u8bbf\u95ee\u5b83\u4eec\u3002</p>"},{"location":"tutorials/get-started/5-customize-state/#5-manually-update-the-state","title":"5. Manually update the state","text":"Python <p>LangGraph \u5bf9\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u63a7\u5236\u3002\u4f8b\u5982\uff0c\u5728\u4efb\u4f55\u65f6\u5019\uff08\u5305\u62ec\u4e2d\u65ad\u65f6\uff09\uff0c\u4f60\u90fd\u53ef\u4ee5\u4f7f\u7528 <code>graph.update_state</code> \u624b\u52a8\u8986\u76d6\u4e00\u4e2a\u952e\uff1a</p> <pre><code>graph.update_state(config, {\"name\": \"LangGraph (library)\"})\n</code></pre> <pre><code>{'configurable': {'thread_id': '1',\n  'checkpoint_ns': '',\n  'checkpoint_id': '1efd4ec5-cf69-6352-8006-9278f1730162'}}\n</code></pre> JavaScript <p>LangGraph \u5bf9\u5e94\u7528\u7a0b\u5e8f\u72b6\u6001\u63d0\u4f9b\u4e86\u9ad8\u5ea6\u63a7\u5236\u3002\u4f8b\u5982\uff0c\u5728\u4efb\u4f55\u65f6\u5019\uff08\u5305\u62ec\u4e2d\u65ad\u65f6\uff09\uff0c\u4f60\u90fd\u53ef\u4ee5\u4f7f\u7528 <code>graph.updateState</code> \u624b\u52a8\u8986\u76d6\u4e00\u4e2a\u952e\uff1a</p> <pre><code>await graph.updateState(\n  { configurable: { thread_id: \"1\" } },\n  { name: \"LangGraph (library)\" }\n);\n</code></pre> <pre><code>{\n  configurable: {\n    thread_id: '1',\n    checkpoint_ns: '',\n    checkpoint_id: '1efd4ec5-cf69-6352-8006-9278f1730162'\n  }\n}\n</code></pre>"},{"location":"tutorials/get-started/5-customize-state/#6-view-the-new-value","title":"6. View the new value","text":"Python <p>\u5982\u679c\u4f60\u8c03\u7528 <code>graph.get_state</code>\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u65b0\u503c\u5df2\u53cd\u6620\uff1a</p> <pre><code>snapshot = graph.get_state(config)\n\n{k: v for k, v in snapshot.values.items() if k in (\"name\", \"birthday\")}\n</code></pre> <pre><code>{'name': 'LangGraph (library)', 'birthday': 'Jan 17, 2024'}\n</code></pre> JavaScript <p>\u5982\u679c\u4f60\u8c03\u7528 <code>graph.getState</code>\uff0c\u4f60\u53ef\u4ee5\u770b\u5230\u65b0\u503c\u5df2\u53cd\u6620\uff1a</p> <pre><code>const updatedSnapshot = await graph.getState(config);\n\nconst updatedRelevantState = Object.fromEntries(\n  Object.entries(updatedSnapshot.values).filter(([k]) =&gt;\n    [\"name\", \"birthday\"].includes(k)\n  )\n);\n</code></pre> <pre><code>{ name: 'LangGraph (library)', birthday: 'Jan 17, 2024' }\n</code></pre> <p>\u624b\u52a8\u72b6\u6001\u66f4\u65b0\u5c06\u5728 LangSmith \u4e2d\u751f\u6210\u8ffd\u8e2a\u3002\u5982\u679c\u9700\u8981\uff0c\u5b83\u4eec\u4e5f\u53ef\u4ee5\u7528\u4e8e\u63a7\u5236\u4eba\u673a\u4ea4\u4e92\u5de5\u4f5c\u6d41\u3002\u901a\u5e38\u5efa\u8bae\u4f7f\u7528 <code>interrupt</code> \u51fd\u6570\uff0c\u56e0\u4e3a\u5b83\u5141\u8bb8\u5728\u4eba\u673a\u4ea4\u4e92\u4e2d\u72ec\u7acb\u4e8e\u72b6\u6001\u66f4\u65b0\u4f20\u8f93\u6570\u636e\u3002</p> <p>\u606d\u559c\uff01 \u4f60\u5df2\u5411\u72b6\u6001\u6dfb\u52a0\u4e86\u81ea\u5b9a\u4e49\u952e\u4ee5\u4fc3\u8fdb\u66f4\u590d\u6742\u7684\u5de5\u4f5c\u6d41\uff0c\u5e76\u5b66\u4f1a\u4e86\u5982\u4f55\u4ece\u5de5\u5177\u5185\u90e8\u751f\u6210\u72b6\u6001\u66f4\u65b0\u3002</p> <p>\u67e5\u770b\u4e0b\u9762\u7684\u4ee3\u7801\u7247\u6bb5\u4ee5\u56de\u987e\u672c\u6559\u7a0b\u4e2d\u7684\u56fe\uff1a</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> <pre><code>from typing import Annotated\n\nfrom langchain_tavily import TavilySearch\nfrom langchain_core.messages import ToolMessage\nfrom langchain_core.tools import InjectedToolCallId, tool\nfrom typing_extensions import TypedDict\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode, tools_condition\nfrom langgraph.types import Command, interrupt\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n    name: str\n    birthday: str\n\n@tool\ndef human_assistance(\n    name: str, birthday: str, tool_call_id: Annotated[str, InjectedToolCallId]\n) -&gt; str:\n    \"\"\"Request assistance from a human.\"\"\"\n    human_response = interrupt(\n        {\n            \"question\": \"Is this correct?\",\n            \"name\": name,\n            \"birthday\": birthday,\n        },\n    )\n    if human_response.get(\"correct\", \"\").lower().startswith(\"y\"):\n        verified_name = name\n        verified_birthday = birthday\n        response = \"Correct\"\n    else:\n        verified_name = human_response.get(\"name\", name)\n        verified_birthday = human_response.get(\"birthday\", birthday)\n        response = f\"Made a correction: {human_response}\"\n\n    state_update = {\n        \"name\": verified_name,\n        \"birthday\": verified_birthday,\n        \"messages\": [ToolMessage(response, tool_call_id=tool_call_id)],\n    }\n    return Command(update=state_update)\n\n\ntool = TavilySearch(max_results=2)\ntools = [tool, human_assistance]\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    message = llm_with_tools.invoke(state[\"messages\"])\n    assert(len(message.tool_calls) &lt;= 1)\n    return {\"messages\": [message]}\n\ngraph_builder = StateGraph(State)\ngraph_builder.add_node(\"chatbot\", chatbot)\n\ntool_node = ToolNode(tools=tools)\ngraph_builder.add_node(\"tools\", tool_node)\n\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    tools_condition,\n)\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.add_edge(START, \"chatbot\")\n\nmemory = InMemorySaver()\ngraph = graph_builder.compile(checkpointer=memory)\n</code></pre> JavaScript <pre><code>import {\n  Command,\n  interrupt,\n  MessagesZodState,\n  MemorySaver,\n  StateGraph,\n  END,\n  START,\n} from \"@langchain/langgraph\";\nimport { ToolNode, toolsCondition } from \"@langchain/langgraph/prebuilt\";\nimport { ChatAnthropic } from \"@langchain/anthropic\";\nimport { TavilySearch } from \"@langchain/tavily\";\nimport { ToolMessage } from \"@langchain/core/messages\";\nimport { tool } from \"@langchain/core/tools\";\nimport { z } from \"zod\";\n\nconst State = z.object({\n  messages: MessagesZodState.shape.messages,\n  name: z.string(),\n  birthday: z.string(),\n});\n\nconst humanAssistance = tool(\n  async (input, config) =&gt; {\n    // Note that because we are generating a ToolMessage for a state update, we\n    // generally require the ID of the corresponding tool call. This is available\n    // in the tool's config.\n    const toolCallId = config?.toolCall?.id as string | undefined;\n    if (!toolCallId) throw new Error(\"Tool call ID is required\");\n\n    const humanResponse = await interrupt({\n      question: \"Is this correct?\",\n      name: input.name,\n      birthday: input.birthday,\n    });\n\n    // We explicitly update the state with a ToolMessage inside the tool.\n    const stateUpdate = (() =&gt; {\n      // If the information is correct, update the state as-is.\n      if (humanResponse.correct?.toLowerCase().startsWith(\"y\")) {\n        return {\n          name: input.name,\n          birthday: input.birthday,\n          messages: [\n            new ToolMessage({ content: \"Correct\", tool_call_id: toolCallId }),\n          ],\n        };\n      }\n\n      // Otherwise, receive information from the human reviewer.\n      return {\n        name: humanResponse.name || input.name,\n        birthday: humanResponse.birthday || input.birthday,\n        messages: [\n          new ToolMessage({\n            content: `Made a correction: ${JSON.stringify(humanResponse)}`,\n            tool_call_id: toolCallId,\n          }),\n        ],\n      };\n    })();\n\n    // We return a Command object in the tool to update our state.\n    return new Command({ update: stateUpdate });\n  },\n  {\n    name: \"humanAssistance\",\n    description: \"Request assistance from a human.\",\n    schema: z.object({\n      name: z.string().describe(\"The name of the entity\"),\n      birthday: z.string().describe(\"The birthday/release date of the entity\"),\n    }),\n  }\n);\n\nconst searchTool = new TavilySearch({ maxResults: 2 });\n\nconst tools = [searchTool, humanAssistance];\nconst llmWithTools = new ChatAnthropic({\n  model: \"claude-3-5-sonnet-latest\",\n}).bindTools(tools);\n\nconst memory = new MemorySaver();\n\nconst chatbot = async (state: z.infer&lt;typeof State&gt;) =&gt; {\n  const message = await llmWithTools.invoke(state.messages);\n  return { messages: message };\n};\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", chatbot)\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n</code></pre>"},{"location":"tutorials/get-started/5-customize-state/#next-steps","title":"Next steps","text":"<p>\u5728\u5b8c\u6210 LangGraph \u57fa\u7840\u6559\u7a0b\u4e4b\u524d\uff0c\u8fd8\u6709\u4e00\u4e2a\u6982\u5ff5\u9700\u8981\u56de\u987e\uff1a\u5c06 <code>checkpointing</code> \u548c <code>state updates</code> \u8fde\u63a5\u5230\u65f6\u95f4\u65c5\u884c\u3002</p>"},{"location":"tutorials/get-started/6-time-travel/","title":"\u65f6\u95f4\u65c5\u884c","text":"<p>\u5728\u5178\u578b\u7684\u804a\u5929\u673a\u5668\u4eba\u5de5\u4f5c\u6d41\u4e2d,\u7528\u6237\u4e0e\u673a\u5668\u4eba\u4ea4\u4e92\u4e00\u6b21\u6216\u591a\u6b21\u4ee5\u5b8c\u6210\u4efb\u52a1\u3002\u8bb0\u5fc6\u548c\u4eba\u673a\u534f\u540c\u53ef\u4ee5\u5728\u56fe\u72b6\u6001\u4e2d\u542f\u7528\u68c0\u67e5\u70b9\u5e76\u63a7\u5236\u672a\u6765\u7684\u54cd\u5e94\u3002</p> <p>\u5982\u679c\u4f60\u5e0c\u671b\u7528\u6237\u80fd\u591f\u4ece\u5148\u524d\u7684\u54cd\u5e94\u5f00\u59cb\u5e76\u63a2\u7d22\u4e0d\u540c\u7684\u7ed3\u679c\u600e\u4e48\u529e?\u6216\u8005,\u5982\u679c\u4f60\u5e0c\u671b\u7528\u6237\u80fd\u591f\u5012\u56de\u804a\u5929\u673a\u5668\u4eba\u7684\u5de5\u4f5c\u4ee5\u4fee\u590d\u9519\u8bef\u6216\u5c1d\u8bd5\u4e0d\u540c\u7684\u7b56\u7565(\u8fd9\u5728\u81ea\u4e3b\u8f6f\u4ef6\u5de5\u7a0b\u5e08\u7b49\u5e94\u7528\u4e2d\u5f88\u5e38\u89c1)\u600e\u4e48\u529e?</p> <p>\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph \u7684\u5185\u7f6e**\u65f6\u95f4\u65c5\u884c**\u529f\u80fd\u521b\u5efa\u8fd9\u4e9b\u7c7b\u578b\u7684\u4f53\u9a8c\u3002</p> <p>Note</p> <p>\u672c\u6559\u7a0b\u57fa\u4e8e\u81ea\u5b9a\u4e49\u72b6\u6001\u3002</p>"},{"location":"tutorials/get-started/6-time-travel/#1","title":"1. \u5012\u56de\u4f60\u7684\u56fe","text":"Python <p>\u901a\u8fc7\u4f7f\u7528\u56fe\u7684 <code>get_state_history</code> \u65b9\u6cd5\u83b7\u53d6\u68c0\u67e5\u70b9\u6765\u5012\u56de\u4f60\u7684\u56fe\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e2a\u5148\u524d\u7684\u65f6\u95f4\u70b9\u6062\u590d\u6267\u884c\u3002</p> JavaScript <p>\u901a\u8fc7\u4f7f\u7528\u56fe\u7684 <code>getStateHistory</code> \u65b9\u6cd5\u83b7\u53d6\u68c0\u67e5\u70b9\u6765\u5012\u56de\u4f60\u7684\u56fe\u3002\u7136\u540e\u4f60\u53ef\u4ee5\u5728\u8fd9\u4e2a\u5148\u524d\u7684\u65f6\u95f4\u70b9\u6062\u590d\u6267\u884c\u3002</p> Python <p>\u804a\u5929\u6a21\u578b\u914d\u7f6e</p> <p>\u67e5\u770b\u652f\u6301\u7684\u804a\u5929\u6a21\u578b\u914d\u7f6e\u65b9\u6cd5\uff1a\u804a\u5929\u6a21\u578b\u9009\u9879\u5361</p> <p>\u652f\u6301\u7684\u6a21\u578b\u5305\u62ec\uff1aOpenAI\u3001Anthropic\u3001Azure\u3001Google Gemini \u548c AWS Bedrock\u3002</p> <pre><code>from typing import Annotated\n\nfrom langchain_tavily import TavilySearch\nfrom langchain_core.messages import BaseMessage\nfrom typing_extensions import TypedDict\n\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.graph import StateGraph, START, END\nfrom langgraph.graph.message import add_messages\nfrom langgraph.prebuilt import ToolNode, tools_condition\n\nclass State(TypedDict):\n    messages: Annotated[list, add_messages]\n\ngraph_builder = StateGraph(State)\n\ntool = TavilySearch(max_results=2)\ntools = [tool]\nllm_with_tools = llm.bind_tools(tools)\n\ndef chatbot(state: State):\n    return {\"messages\": [llm_with_tools.invoke(state[\"messages\"])]}\n\ngraph_builder.add_node(\"chatbot\", chatbot)\n\ntool_node = ToolNode(tools=[tool])\ngraph_builder.add_node(\"tools\", tool_node)\n\ngraph_builder.add_conditional_edges(\n    \"chatbot\",\n    tools_condition,\n)\ngraph_builder.add_edge(\"tools\", \"chatbot\")\ngraph_builder.add_edge(START, \"chatbot\")\n\nmemory = InMemorySaver()\ngraph = graph_builder.compile(checkpointer=memory)\n</code></pre> JavaScript <pre><code>import {\n  StateGraph,\n  START,\n  END,\n  MessagesZodState,\n  MemorySaver,\n} from \"@langchain/langgraph\";\nimport { ToolNode, toolsCondition } from \"@langchain/langgraph/prebuilt\";\nimport { TavilySearch } from \"@langchain/tavily\";\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { z } from \"zod\";\n\nconst State = z.object({ messages: MessagesZodState.shape.messages });\n\nconst tools = [new TavilySearch({ maxResults: 2 })];\nconst llmWithTools = new ChatOpenAI({ model: \"gpt-4o-mini\" }).bindTools(tools);\nconst memory = new MemorySaver();\n\nconst graph = new StateGraph(State)\n  .addNode(\"chatbot\", async (state) =&gt; ({\n    messages: [await llmWithTools.invoke(state.messages)],\n  }))\n  .addNode(\"tools\", new ToolNode(tools))\n  .addConditionalEdges(\"chatbot\", toolsCondition, [\"tools\", END])\n  .addEdge(\"tools\", \"chatbot\")\n  .addEdge(START, \"chatbot\")\n  .compile({ checkpointer: memory });\n</code></pre>"},{"location":"tutorials/get-started/6-time-travel/#2-add-steps","title":"2. Add steps","text":"<p>\u5411\u4f60\u7684\u56fe\u6dfb\u52a0\u6b65\u9aa4\u3002\u6bcf\u4e2a\u6b65\u9aa4\u90fd\u5c06\u5728\u5176\u72b6\u6001\u5386\u53f2\u4e2d\u8bbe\u7f6e\u68c0\u67e5\u70b9\uff1a</p> Python <pre><code>config = {\"configurable\": {\"thread_id\": \"1\"}}\nevents = graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": (\n                    \"I'm learning LangGraph. \"\n                    \"Could you do some research on it for me?\"\n                ),\n            },\n        ],\n    },\n    config,\n    stream_mode=\"values\",\n)\nfor event in events:\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================ Human Message =================================\n\nI'm learning LangGraph. Could you do some research on it for me?\n================================== Ai Message ==================================\n\n[{'text': \"Certainly! I'd be happy to research LangGraph for you. To get the most up-to-date and accurate information, I'll use the Tavily search engine to look this up. Let me do that for you now.\", 'type': 'text'}, {'id': 'toolu_01BscbfJJB9EWJFqGrN6E54e', 'input': {'query': 'LangGraph latest information and features'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01BscbfJJB9EWJFqGrN6E54e)\n Call ID: toolu_01BscbfJJB9EWJFqGrN6E54e\n  Args:\n    query: LangGraph latest information and features\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://blockchain.news/news/langchain-new-features-upcoming-events-update\", \"content\": \"LangChain, a leading platform in the AI development space, has released its latest updates, showcasing new use cases and enhancements across its ecosystem. According to the LangChain Blog, the updates cover advancements in LangGraph Platform, LangSmith's self-improving evaluators, and revamped documentation for LangGraph.\"}, {\"url\": \"https://blog.langchain.dev/langgraph-platform-announce/\", \"content\": \"With these learnings under our belt, we decided to couple some of our latest offerings under LangGraph Platform. LangGraph Platform today includes LangGraph Server, LangGraph Studio, plus the CLI and SDK. ... we added features in LangGraph Server to deliver on a few key value areas. Below, we'll focus on these aspects of LangGraph Platform.\"}]\n================================== Ai Message ==================================\n\nThank you for your patience. I've found some recent information about LangGraph for you. Let me summarize the key points:\n\n1. LangGraph is part of the LangChain ecosystem, which is a leading platform in AI development.\n\n2. Recent updates and features of LangGraph include:\n\n   a. LangGraph Platform: This seems to be a cloud-based version of LangGraph, though specific details weren't provided in the search results.\n...\n3. Keep an eye on LangGraph Platform developments, as cloud-based solutions often provide an easier starting point for learners.\n4. Consider how LangGraph fits into the broader LangChain ecosystem, especially its interaction with tools like LangSmith.\n\nIs there any specific aspect of LangGraph you'd like to know more about? I'd be happy to do a more focused search on particular features or use cases.\nOutput is truncated. View as a scrollable element or open in a text editor. Adjust cell output settings...\n</code></pre> <pre><code>events = graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": (\n                    \"Ya that's helpful. Maybe I'll \"\n                    \"build an autonomous agent with it!\"\n                ),\n            },\n        ],\n    },\n    config,\n    stream_mode=\"values\",\n)\nfor event in events:\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================ Human Message =================================\n\nYa that's helpful. Maybe I'll build an autonomous agent with it!\n================================== Ai Message ==================================\n\n[{'text': \"That's an exciting idea! Building an autonomous agent with LangGraph is indeed a great application of this technology. LangGraph is particularly well-suited for creating complex, multi-step AI workflows, which is perfect for autonomous agents. Let me gather some more specific information about using LangGraph for building autonomous agents.\", 'type': 'text'}, {'id': 'toolu_01QWNHhUaeeWcGXvA4eHT7Zo', 'input': {'query': 'Building autonomous agents with LangGraph examples and tutorials'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01QWNHhUaeeWcGXvA4eHT7Zo)\n Call ID: toolu_01QWNHhUaeeWcGXvA4eHT7Zo\n  Args:\n    query: Building autonomous agents with LangGraph examples and tutorials\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://towardsdatascience.com/building-autonomous-multi-tool-agents-with-gemini-2-0-and-langgraph-ad3d7bd5e79d\", \"content\": \"Building Autonomous Multi-Tool Agents with Gemini 2.0 and LangGraph | by Youness Mansar | Jan, 2025 | Towards Data Science Building Autonomous Multi-Tool Agents with Gemini 2.0 and LangGraph A practical tutorial with full code examples for building and running multi-tool agents Towards Data Science LLMs are remarkable \u2014 they can memorize vast amounts of information, answer general knowledge questions, write code, generate stories, and even fix your grammar. In this tutorial, we are going to build a simple LLM agent that is equipped with four tools that it can use to answer a user's question. This Agent will have the following specifications: Follow Published in Towards Data Science --------------------------------- Your home for data science and AI. Follow Follow Follow\"}, {\"url\": \"https://github.com/anmolaman20/Tools_and_Agents\", \"content\": \"GitHub - anmolaman20/Tools_and_Agents: This repository provides resources for building AI agents using Langchain and Langgraph. This repository provides resources for building AI agents using Langchain and Langgraph. This repository provides resources for building AI agents using Langchain and Langgraph. This repository serves as a comprehensive guide for building AI-powered agents using Langchain and Langgraph. It provides hands-on examples, practical tutorials, and resources for developers and AI enthusiasts to master building intelligent systems and workflows. AI Agent Development: Gain insights into creating intelligent systems that think, reason, and adapt in real time. This repository is ideal for AI practitioners, developers exploring language models, or anyone interested in building intelligent systems. This repository provides resources for building AI agents using Langchain and Langgraph.\"}]\n================================== Ai Message ==================================\n\nGreat idea! Building an autonomous agent with LangGraph is definitely an exciting project. Based on the latest information I've found, here are some insights and tips for building autonomous agents with LangGraph:\n\n1. Multi-Tool Agents: LangGraph is particularly well-suited for creating autonomous agents that can use multiple tools. This allows your agent to have a diverse set of capabilities and choose the right tool for each task.\n\n2. Integration with Large Language Models (LLMs): You can combine LangGraph with powerful LLMs like Gemini 2.0 to create more intelligent and capable agents. The LLM can serve as the \"brain\" of your agent, making decisions and generating responses.\n\n3. Workflow Management: LangGraph excels at managing complex, multi-step AI workflows. This is crucial for autonomous agents that need to break down tasks into smaller steps and execute them in the right order.\n...\n6. Pay attention to how you structure the agent's decision-making process and workflow.\n7. Don't forget to implement proper error handling and safety measures, especially if your agent will be interacting with external systems or making important decisions.\n\nBuilding an autonomous agent is an iterative process, so be prepared to refine and improve your agent over time. Good luck with your project! If you need any more specific information as you progress, feel free to ask.\nOutput is truncated. View as a scrollable element or open in a text editor. Adjust cell output settings...\n</code></pre> JavaScript <pre><code>import { randomUUID } from \"node:crypto\";\nconst threadId = randomUUID();\n\nlet iter = 0;\n\nfor (const userInput of [\n  \"I'm learning LangGraph. Could you do some research on it for me?\",\n  \"Ya that's helpful. Maybe I'll build an autonomous agent with it!\",\n]) {\n  iter += 1;\n\n  console.log(`\\n--- Conversation Turn ${iter} ---\\n`);\n  const events = await graph.stream(\n    { messages: [{ role: \"user\", content: userInput }] },\n    { configurable: { thread_id: threadId }, streamMode: \"values\" }\n  );\n\n  for await (const event of events) {\n    if (\"messages\" in event) {\n      const lastMessage = event.messages.at(-1);\n\n      console.log(\n        \"=\".repeat(32),\n        `${lastMessage?.getType()} Message`,\n        \"=\".repeat(32)\n      );\n      console.log(lastMessage?.text);\n    }\n  }\n}\n</code></pre> <pre><code>--- Conversation Turn 1 ---\n\n================================ human Message ================================\nI'm learning LangGraph.js. Could you do some research on it for me?\n================================ ai Message ================================\nI'll search for information about LangGraph.js for you.\n================================ tool Message ================================\n{\n  \"query\": \"LangGraph.js framework TypeScript langchain what is it tutorial guide\",\n  \"follow_up_questions\": null,\n  \"answer\": null,\n  \"images\": [],\n  \"results\": [\n    {\n      \"url\": \"https://techcommunity.microsoft.com/blog/educatordeveloperblog/an-absolute-beginners-guide-to-langgraph-js/4212496\",\n      \"title\": \"An Absolute Beginner's Guide to LangGraph.js\",\n      \"content\": \"(...)\",\n      \"score\": 0.79369855,\n      \"raw_content\": null\n    },\n    {\n      \"url\": \"https://langchain-ai.github.io/langgraphjs/\",\n      \"title\": \"LangGraph.js\",\n      \"content\": \"(...)\",\n      \"score\": 0.78154784,\n      \"raw_content\": null\n    }\n  ],\n  \"response_time\": 2.37\n}\n================================ ai Message ================================\nLet me provide you with an overview of LangGraph.js based on the search results:\n\nLangGraph.js \u662f LangChain \u751f\u6001\u7cfb\u7edf\u7684\u4e00\u90e8\u5206\uff0c\u662f\u4e00\u4e2a JavaScript/TypeScript \u5e93\uff0c\u4e13\u4e3a\u521b\u5efa\u548c\u7ba1\u7406\u57fa\u4e8e LLM\uff08\u5927\u578b\u8bed\u8a00\u6a21\u578b\uff09\u7684\u590d\u6742\u5de5\u4f5c\u6d41\u800c\u8bbe\u8ba1\u3002\u4ee5\u4e0b\u662f\u5173\u4e8e LangGraph.js \u7684\u5173\u952e\u70b9\uff1a\n\n1. \u76ee\u7684\uff1a\n- \u5b83\u662f\u4e00\u4e2a\u7528\u4e8e\u6784\u5efa\u53ef\u63a7\u667a\u80fd\u4f53\u7684\u4f4e\u7ea7\u7f16\u6392\u6846\u67b6\n- \u7279\u522b\u9002\u7528\u4e8e\u521b\u5efa\u667a\u80fd\u4f53\u5de5\u4f5c\u6d41\uff0c\u5176\u4e2d LLM \u6839\u636e\u5f53\u524d\u72b6\u6001\u51b3\u5b9a\u884c\u52a8\u65b9\u6848\n- \u5e2e\u52a9\u5c06\u5de5\u4f5c\u6d41\u5efa\u6a21\u4e3a\u5e26\u6709\u8282\u70b9\u548c\u8fb9\u7684\u56fe\n\n(...)\n\n--- Conversation Turn 2 ---\n\n================================ human Message ================================\nYa that's helpful. Maybe I'll build an autonomous agent with it!\n================================ ai Message ================================\nLet me search for specific information about building autonomous agents with LangGraph.js.\n================================ tool Message ================================\n{\n  \"query\": \"how to build autonomous agents with LangGraph.js examples tutorial react agent\",\n  \"follow_up_questions\": null,\n  \"answer\": null,\n  \"images\": [],\n  \"results\": [\n    {\n      \"url\": \"https://ai.google.dev/gemini-api/docs/langgraph-example\",\n      \"title\": \"ReAct agent from scratch with Gemini 2.5 and LangGraph\",\n      \"content\": \"(...)\",\n      \"score\": 0.7602419,\n      \"raw_content\": null\n    },\n    {\n      \"url\": \"https://www.youtube.com/watch?v=ZfjaIshGkmk\",\n      \"title\": \"Build Autonomous AI Agents with ReAct and LangGraph Tools\",\n      \"content\": \"(...)\",\n      \"score\": 0.7471924,\n      \"raw_content\": null\n    }\n  ],\n  \"response_time\": 1.98\n}\n================================ ai Message ================================\n\u6839\u636e\u641c\u7d22\u7ed3\u679c\uff0c\u6211\u53ef\u4ee5\u4e3a\u4f60\u63d0\u4f9b\u6709\u5173\u5982\u4f55\u4f7f\u7528 LangGraph.js \u6784\u5efa\u81ea\u4e3b\u667a\u80fd\u4f53\u7684\u5b9e\u7528\u6982\u8ff0\u3002\u4ee5\u4e0b\u662f\u4f60\u9700\u8981\u4e86\u89e3\u7684\u5185\u5bb9\uff1a\n\n1. \u6784\u5efa\u667a\u80fd\u4f53\u7684\u57fa\u672c\u7ed3\u6784\uff1a\n- LangGraph.js \u63d0\u4f9b\u4e86 ReAct\uff08\u63a8\u7406 + \u884c\u52a8\uff09\u6a21\u5f0f\u5b9e\u73b0\n- \u57fa\u672c\u7ec4\u4ef6\u5305\u62ec\uff1a\n  - State management for conversation history\n  - Nodes for different actions\n  - Edges for decision-making flow\n  - Tools for specific functionalities\n\n(...)\n</code></pre>"},{"location":"tutorials/get-started/6-time-travel/#3-replay-the-full-state-history","title":"3. Replay the full state history","text":"<p>\u73b0\u5728\u4f60\u5df2\u7ecf\u5411\u804a\u5929\u673a\u5668\u4eba\u6dfb\u52a0\u4e86\u6b65\u9aa4\uff0c\u4f60\u53ef\u4ee5 <code>replay</code>\uff08\u91cd\u653e\uff09\u5b8c\u6574\u7684\u72b6\u6001\u5386\u53f2\u4ee5\u67e5\u770b\u53d1\u751f\u7684\u6240\u6709\u4e8b\u60c5\u3002</p> Python <pre><code>to_replay = None\nfor state in graph.get_state_history(config):\n    print(\"Num Messages: \", len(state.values[\"messages\"]), \"Next: \", state.next)\n    print(\"-\" * 80)\n    if len(state.values[\"messages\"]) == 6:\n        # We are somewhat arbitrarily selecting a specific state based on the number of chat messages in the state.\n        to_replay = state\n</code></pre> <pre><code>Num Messages:  8 Next:  ()\n--------------------------------------------------------------------------------\nNum Messages:  7 Next:  ('chatbot',)\n--------------------------------------------------------------------------------\nNum Messages:  6 Next:  ('tools',)\n--------------------------------------------------------------------------------\nNum Messages:  5 Next:  ('chatbot',)\n--------------------------------------------------------------------------------\nNum Messages:  4 Next:  ('__start__',)\n--------------------------------------------------------------------------------\nNum Messages:  4 Next:  ()\n--------------------------------------------------------------------------------\nNum Messages:  3 Next:  ('chatbot',)\n--------------------------------------------------------------------------------\nNum Messages:  2 Next:  ('tools',)\n--------------------------------------------------------------------------------\nNum Messages:  1 Next:  ('chatbot',)\n--------------------------------------------------------------------------------\nNum Messages:  0 Next:  ('__start__',)\n--------------------------------------------------------------------------------\n</code></pre> JavaScript <pre><code>import type { StateSnapshot } from \"@langchain/langgraph\";\n\nlet toReplay: StateSnapshot | undefined;\nfor await (const state of graph.getStateHistory({\n  configurable: { thread_id: threadId },\n})) {\n  console.log(\n    `Num Messages: ${state.values.messages.length}, Next: ${JSON.stringify(\n      state.next\n    )}`\n  );\n  console.log(\"-\".repeat(80));\n  if (state.values.messages.length === 6) {\n    // We are somewhat arbitrarily selecting a specific state based on the number of chat messages in the state.\n    toReplay = state;\n  }\n}\n</code></pre> <pre><code>Num Messages: 8 Next:  []\n--------------------------------------------------------------------------------\nNum Messages: 7 Next:  [\"chatbot\"]\n--------------------------------------------------------------------------------\nNum Messages: 6 Next:  [\"tools\"]\n--------------------------------------------------------------------------------\nNum Messages: 7, Next: [\"chatbot\"]\n--------------------------------------------------------------------------------\nNum Messages: 6, Next: [\"tools\"]\n--------------------------------------------------------------------------------\nNum Messages: 5, Next: [\"chatbot\"]\n--------------------------------------------------------------------------------\nNum Messages: 4, Next: [\"__start__\"]\n--------------------------------------------------------------------------------\nNum Messages: 4, Next: []\n--------------------------------------------------------------------------------\nNum Messages: 3, Next: [\"chatbot\"]\n--------------------------------------------------------------------------------\nNum Messages: 2, Next: [\"tools\"]\n--------------------------------------------------------------------------------\nNum Messages: 1, Next: [\"chatbot\"]\n--------------------------------------------------------------------------------\nNum Messages: 0, Next: [\"__start__\"]\n--------------------------------------------------------------------------------\n</code></pre> <p>\u68c0\u67e5\u70b9\u5728\u56fe\u7684\u6bcf\u4e00\u6b65\u90fd\u4f1a\u4fdd\u5b58\u3002\u8fd9**\u8de8\u8d8a\u8c03\u7528**\uff0c\u56e0\u6b64\u4f60\u53ef\u4ee5\u5728\u6574\u4e2a\u7ebf\u7a0b\u7684\u5386\u53f2\u4e2d\u56de\u9000\u3002</p>"},{"location":"tutorials/get-started/6-time-travel/#resume-from-a-checkpoint","title":"Resume from a checkpoint","text":"Python <p>\u4ece <code>to_replay</code> \u72b6\u6001\u6062\u590d\uff0c\u8be5\u72b6\u6001\u5728\u7b2c\u4e8c\u6b21\u56fe\u8c03\u7528\u4e2d\u7684 <code>chatbot</code> \u8282\u70b9\u4e4b\u540e\u3002\u4ece\u8fd9\u4e00\u70b9\u6062\u590d\u5c06\u63a5\u4e0b\u6765\u8c03\u7528 action \u8282\u70b9\u3002</p> JavaScript <p>\u4ece <code>toReplay</code> \u72b6\u6001\u6062\u590d\uff0c\u8be5\u72b6\u6001\u5728\u5176\u4e2d\u4e00\u6b21\u56fe\u8c03\u7528\u4e2d\u7279\u5b9a\u8282\u70b9\u4e4b\u540e\u3002\u4ece\u8fd9\u4e00\u70b9\u6062\u590d\u5c06\u8c03\u7528\u4e0b\u4e00\u4e2a\u8ba1\u5212\u7684\u8282\u70b9\u3002</p> Python <pre><code>print(to_replay.next)\nprint(to_replay.config)\n</code></pre> <pre><code>('tools',)\n{'configurable': {'thread_id': '1', 'checkpoint_ns': '', 'checkpoint_id': '1efd43e3-0c1f-6c4e-8006-891877d65740'}}\n</code></pre> JavaScript <p>Resume from the <code>toReplay</code> state, which is after the <code>chatbot</code> node in one of the graph invocations. Resuming from this point will call the next scheduled node.</p> <pre><code>console.log(toReplay.next);\nconsole.log(toReplay.config);\n</code></pre> <pre><code>[\"tools\"]\n{\n  configurable: {\n    thread_id: \"007708b8-ea9b-4ff7-a7ad-3843364dbf75\",\n    checkpoint_ns: \"\",\n    checkpoint_id: \"1efd43e3-0c1f-6c4e-8006-891877d65740\"\n  }\n}\n</code></pre>"},{"location":"tutorials/get-started/6-time-travel/#4","title":"4. \u4ece\u67d0\u4e2a\u65f6\u95f4\u70b9\u52a0\u8f7d\u72b6\u6001","text":"Python <p>\u68c0\u67e5\u70b9\u7684 <code>to_replay.config</code> \u5305\u542b\u4e00\u4e2a <code>checkpoint_id</code> \u65f6\u95f4\u6233\u3002\u63d0\u4f9b\u8fd9\u4e2a <code>checkpoint_id</code> \u503c\u544a\u8bc9 LangGraph \u7684\u68c0\u67e5\u70b9\u4fdd\u5b58\u5668\u4ece\u90a3\u4e2a\u65f6\u95f4\u70b9**\u52a0\u8f7d**\u72b6\u6001\u3002</p> <pre><code># The `checkpoint_id` in the `to_replay.config` corresponds to a state we've persisted to our checkpointer.\nfor event in graph.stream(None, to_replay.config, stream_mode=\"values\"):\n    if \"messages\" in event:\n        event[\"messages\"][-1].pretty_print()\n</code></pre> <pre><code>================================== Ai Message ==================================\n\n[{'text': \"That's an exciting idea! Building an autonomous agent with LangGraph is indeed a great application of this technology. LangGraph is particularly well-suited for creating complex, multi-step AI workflows, which is perfect for autonomous agents. Let me gather some more specific information about using LangGraph for building autonomous agents.\", 'type': 'text'}, {'id': 'toolu_01QWNHhUaeeWcGXvA4eHT7Zo', 'input': {'query': 'Building autonomous agents with LangGraph examples and tutorials'}, 'name': 'tavily_search_results_json', 'type': 'tool_use'}]\nTool Calls:\n  tavily_search_results_json (toolu_01QWNHhUaeeWcGXvA4eHT7Zo)\n Call ID: toolu_01QWNHhUaeeWcGXvA4eHT7Zo\n  Args:\n    query: Building autonomous agents with LangGraph examples and tutorials\n================================= Tool Message =================================\nName: tavily_search_results_json\n\n[{\"url\": \"https://towardsdatascience.com/building-autonomous-multi-tool-agents-with-gemini-2-0-and-langgraph-ad3d7bd5e79d\", \"content\": \"Building Autonomous Multi-Tool Agents with Gemini 2.0 and LangGraph | by Youness Mansar | Jan, 2025 | Towards Data Science Building Autonomous Multi-Tool Agents with Gemini 2.0 and LangGraph A practical tutorial with full code examples for building and running multi-tool agents Towards Data Science LLMs are remarkable \u2014 they can memorize vast amounts of information, answer general knowledge questions, write code, generate stories, and even fix your grammar. In this tutorial, we are going to build a simple LLM agent that is equipped with four tools that it can use to answer a user's question. This Agent will have the following specifications: Follow Published in Towards Data Science --------------------------------- Your home for data science and AI. Follow Follow Follow\"}, {\"url\": \"https://github.com/anmolaman20/Tools_and_Agents\", \"content\": \"GitHub - anmolaman20/Tools_and_Agents: This repository provides resources for building AI agents using Langchain and Langgraph. This repository provides resources for building AI agents using Langchain and Langgraph. This repository provides resources for building AI agents using Langchain and Langgraph. This repository serves as a comprehensive guide for building AI-powered agents using Langchain and Langgraph. It provides hands-on examples, practical tutorials, and resources for developers and AI enthusiasts to master building intelligent systems and workflows. AI Agent Development: Gain insights into creating intelligent systems that think, reason, and adapt in real time. This repository is ideal for AI practitioners, developers exploring language models, or anyone interested in building intelligent systems. This repository provides resources for building AI agents using Langchain and Langgraph.\"}]\n================================== Ai Message ==================================\n\nGreat idea! Building an autonomous agent with LangGraph is definitely an exciting project. Based on the latest information I've found, here are some insights and tips for building autonomous agents with LangGraph:\n\n1. Multi-Tool Agents: LangGraph is particularly well-suited for creating autonomous agents that can use multiple tools. This allows your agent to have a diverse set of capabilities and choose the right tool for each task.\n\n2. Integration with Large Language Models (LLMs): You can combine LangGraph with powerful LLMs like Gemini 2.0 to create more intelligent and capable agents. The LLM can serve as the \"brain\" of your agent, making decisions and generating responses.\n\n3. Workflow Management: LangGraph excels at managing complex, multi-step AI workflows. This is crucial for autonomous agents that need to break down tasks into smaller steps and execute them in the right order.\n...\n\nRemember, building an autonomous agent is an iterative process. Start simple and gradually increase complexity as you become more comfortable with LangGraph and its capabilities.\n\nWould you like more information on any specific aspect of building your autonomous agent with LangGraph?\nOutput is truncated. View as a scrollable element or open in a text editor. Adjust cell output settings...\n</code></pre> <p>\u56fe\u4ece <code>tools</code> \u8282\u70b9\u6062\u590d\u6267\u884c\u3002\u4f60\u53ef\u4ee5\u770b\u51fa\u8fd9\u4e00\u70b9\uff0c\u56e0\u4e3a\u4e0a\u9762\u6253\u5370\u7684\u7b2c\u4e00\u4e2a\u503c\u662f\u6211\u4eec\u641c\u7d22\u5f15\u64ce\u5de5\u5177\u7684\u54cd\u5e94\u3002</p> JavaScript <p>\u68c0\u67e5\u70b9\u7684 <code>toReplay.config</code> \u5305\u542b\u4e00\u4e2a <code>checkpoint_id</code> \u65f6\u95f4\u6233\u3002\u63d0\u4f9b\u8fd9\u4e2a <code>checkpoint_id</code> \u503c\u544a\u8bc9 LangGraph \u7684\u68c0\u67e5\u70b9\u4fdd\u5b58\u5668\u4ece\u90a3\u4e2a\u65f6\u95f4\u70b9**\u52a0\u8f7d**\u72b6\u6001\u3002</p> <pre><code>// The `checkpoint_id` in the `toReplay.config` corresponds to a state we've persisted to our checkpointer.\nfor await (const event of await graph.stream(null, {\n  ...toReplay?.config,\n  streamMode: \"values\",\n})) {\n  if (\"messages\" in event) {\n    const lastMessage = event.messages.at(-1);\n\n    console.log(\n      \"=\".repeat(32),\n      `${lastMessage?.getType()} Message`,\n      \"=\".repeat(32)\n    );\n    console.log(lastMessage?.text);\n  }\n}\n</code></pre> <pre><code>================================ ai Message ================================\nLet me search for specific information about building autonomous agents with LangGraph.js.\n================================ tool Message ================================\n{\n  \"query\": \"how to build autonomous agents with LangGraph.js examples tutorial\",\n  \"follow_up_questions\": null,\n  \"answer\": null,\n  \"images\": [],\n  \"results\": [\n    {\n      \"url\": \"https://www.mongodb.com/developer/languages/typescript/build-javascript-ai-agent-langgraphjs-mongodb/\",\n      \"title\": \"Build a JavaScript AI Agent With LangGraph.js and MongoDB\",\n      \"content\": \"(...)\",\n      \"score\": 0.7672197,\n      \"raw_content\": null\n    },\n    {\n      \"url\": \"https://medium.com/@lorevanoudenhove/how-to-build-ai-agents-with-langgraph-a-step-by-step-guide-5d84d9c7e832\",\n      \"title\": \"How to Build AI Agents with LangGraph: A Step-by-Step Guide\",\n      \"content\": \"(...)\",\n      \"score\": 0.7407191,\n      \"raw_content\": null\n    }\n  ],\n  \"response_time\": 0.82\n}\n================================ ai Message ================================\n\u6839\u636e\u641c\u7d22\u7ed3\u679c\uff0c\u6211\u53ef\u4ee5\u5206\u4eab\u4e00\u4e9b\u5173\u4e8e\u4f7f\u7528 LangGraph.js \u6784\u5efa\u81ea\u4e3b\u667a\u80fd\u4f53\u7684\u5b9e\u7528\u4fe1\u606f\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5177\u4f53\u7684\u793a\u4f8b\u548c\u65b9\u6cd5\uff1a\n\n1. HR \u52a9\u7406\u667a\u80fd\u4f53\u793a\u4f8b\uff1a\n- \u53ef\u4ee5\u4f7f\u7528\u5458\u5de5\u4fe1\u606f\u5904\u7406\u4e0e HR \u76f8\u5173\u7684\u67e5\u8be2\n- \u529f\u80fd\u5305\u62ec\uff1a\n  - \u542f\u52a8\u548c\u7ee7\u7eed\u5bf9\u8bdd\n  - \u4f7f\u7528\u5411\u91cf\u641c\u7d22\u67e5\u627e\u4fe1\u606f\n  - \u4f7f\u7528\u68c0\u67e5\u70b9\u6301\u4e45\u5316\u5bf9\u8bdd\u72b6\u6001\n  - \u7ba1\u7406\u7ebf\u7a0b\u5bf9\u8bdd\n\n2. \u80fd\u6e90\u8282\u7701\u8ba1\u7b97\u5668\u667a\u80fd\u4f53\uff1a\n- \u4f5c\u4e3a\u592a\u9633\u80fd\u7535\u6c60\u677f\u9500\u552e\u7684\u6f5c\u5728\u5ba2\u6237\u751f\u6210\u5de5\u5177\n- \u80fd\u529b\u5305\u62ec\uff1a\n  - \u8ba1\u7b97\u6f5c\u5728\u7684\u80fd\u6e90\u8282\u7701\n  - \u5904\u7406\u591a\u6b65\u9aa4\u5bf9\u8bdd\n  - \u5904\u7406\u7528\u6237\u8f93\u5165\u4ee5\u83b7\u5f97\u4e2a\u6027\u5316\u4f30\u7b97\n  - \u7ba1\u7406\u5bf9\u8bdd\u72b6\u6001\n\n(...)\n</code></pre> <p>\u56fe\u4ece <code>tools</code> \u8282\u70b9\u6062\u590d\u6267\u884c\u3002\u4f60\u53ef\u4ee5\u770b\u51fa\u8fd9\u4e00\u70b9\uff0c\u56e0\u4e3a\u4e0a\u9762\u6253\u5370\u7684\u7b2c\u4e00\u4e2a\u503c\u662f\u6211\u4eec\u641c\u7d22\u5f15\u64ce\u5de5\u5177\u7684\u54cd\u5e94\u3002</p> <p>\u606d\u559c\uff01 \u4f60\u73b0\u5728\u5df2\u7ecf\u5728 LangGraph \u4e2d\u4f7f\u7528\u4e86\u65f6\u95f4\u65c5\u884c\u68c0\u67e5\u70b9\u904d\u5386\u3002\u80fd\u591f\u56de\u9000\u5e76\u63a2\u7d22\u66ff\u4ee3\u8def\u5f84\u4e3a\u8c03\u8bd5\u3001\u5b9e\u9a8c\u548c\u4ea4\u4e92\u5f0f\u5e94\u7528\u7a0b\u5e8f\u6253\u5f00\u4e86\u65e0\u9650\u53ef\u80fd\u3002</p>"},{"location":"tutorials/get-started/6-time-travel/#learn-more","title":"Learn more","text":"<p>\u901a\u8fc7\u63a2\u7d22\u90e8\u7f72\u548c\u9ad8\u7ea7\u529f\u80fd\uff0c\u8fdb\u4e00\u6b65\u6df1\u5316\u4f60\u7684 LangGraph \u4e4b\u65c5\uff1a</p> <ul> <li>LangGraph Server \u5feb\u901f\u5165\u95e8\uff1a\u5728\u672c\u5730\u542f\u52a8 LangGraph \u670d\u52a1\u5668\uff0c\u5e76\u4f7f\u7528 REST API \u548c LangGraph Studio Web UI \u4e0e\u5176\u4ea4\u4e92\u3002</li> <li>LangGraph \u5e73\u53f0\u5feb\u901f\u5165\u95e8\uff1a\u4f7f\u7528 LangGraph \u5e73\u53f0\u90e8\u7f72\u4f60\u7684 LangGraph \u5e94\u7528\u7a0b\u5e8f\u3002</li> <li>LangGraph \u5e73\u53f0\u6982\u5ff5\uff1a\u4e86\u89e3 LangGraph \u5e73\u53f0\u7684\u57fa\u672c\u6982\u5ff5\u3002</li> </ul>"},{"location":"tutorials/langgraph-platform/local-server/","title":"\u8fd0\u884c\u672c\u5730\u670d\u52a1\u5668","text":"<p>\u672c\u6307\u5357\u5411\u4f60\u5c55\u793a\u5982\u4f55\u5728\u672c\u5730\u8fd0\u884c LangGraph \u5e94\u7528\u3002</p>"},{"location":"tutorials/langgraph-platform/local-server/#_2","title":"\u524d\u63d0\u6761\u4ef6","text":"<p>\u5728\u5f00\u59cb\u4e4b\u524d,\u8bf7\u786e\u4fdd\u4f60\u5177\u5907\u4ee5\u4e0b\u6761\u4ef6:</p> <ul> <li>LangSmith \u7684 API \u5bc6\u94a5 - \u514d\u8d39\u6ce8\u518c</li> </ul>"},{"location":"tutorials/langgraph-platform/local-server/#1-langgraph-cli","title":"1. \u5b89\u88c5 LangGraph CLI","text":"Python <pre><code># \u9700\u8981 Python &gt;= 3.11\u3002\n\npip install --upgrade \"langgraph-cli[inmem]\"\n</code></pre> JavaScript <pre><code>npx @langchain/langgraph-cli\n</code></pre>"},{"location":"tutorials/langgraph-platform/local-server/#2-langgraph","title":"2. \u521b\u5efa LangGraph \u5e94\u7528 \ud83c\udf31","text":"Python <p>\u4ece <code>new-langgraph-project-python</code> \u6a21\u677f\u521b\u5efa\u4e00\u4e2a\u65b0\u5e94\u7528\u3002\u6b64\u6a21\u677f\u6f14\u793a\u4e86\u4e00\u4e2a\u5355\u8282\u70b9\u5e94\u7528,\u4f60\u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u7684\u903b\u8f91\u6269\u5c55\u5b83\u3002</p> <pre><code>langgraph new path/to/your/app --template new-langgraph-project-python\n</code></pre> <p>\u5176\u4ed6\u6a21\u677f</p> <p>\u5982\u679c\u4f60\u5728\u4f7f\u7528 <code>langgraph new</code> \u65f6\u4e0d\u6307\u5b9a\u6a21\u677f,\u5c06\u663e\u793a\u4e00\u4e2a\u4ea4\u4e92\u5f0f\u83dc\u5355,\u5141\u8bb8\u4f60\u4ece\u53ef\u7528\u6a21\u677f\u5217\u8868\u4e2d\u9009\u62e9\u3002</p> JavaScript <p>\u4ece <code>new-langgraph-project-js</code> \u6a21\u677f\u521b\u5efa\u4e00\u4e2a\u65b0\u5e94\u7528\u3002\u6b64\u6a21\u677f\u6f14\u793a\u4e86\u4e00\u4e2a\u5355\u8282\u70b9\u5e94\u7528,\u4f60\u53ef\u4ee5\u4f7f\u7528\u81ea\u5df1\u7684\u903b\u8f91\u6269\u5c55\u5b83\u3002</p> <pre><code>npm create langgraph\n</code></pre>"},{"location":"tutorials/langgraph-platform/local-server/#3","title":"3. \u5b89\u88c5\u4f9d\u8d56","text":"<p>\u5728\u65b0 LangGraph \u5e94\u7528\u7684\u6839\u76ee\u5f55\u4e2d,\u4ee5 <code>edit</code> \u6a21\u5f0f\u5b89\u88c5\u4f9d\u8d56,\u4ee5\u4fbf\u670d\u52a1\u5668\u4f7f\u7528\u4f60\u7684\u672c\u5730\u66f4\u6539:</p> Python <pre><code>cd path/to/your/app\npip install -e .\n</code></pre> JavaScript <pre><code>cd path/to/your/app\nnpm install\n</code></pre>"},{"location":"tutorials/langgraph-platform/local-server/#4-env","title":"4. \u521b\u5efa <code>.env</code> \u6587\u4ef6","text":"<p>\u4f60\u5c06\u5728\u65b0 LangGraph \u5e94\u7528\u7684\u6839\u76ee\u5f55\u4e2d\u627e\u5230 <code>.env.example</code>\u3002\u5728\u65b0 LangGraph \u5e94\u7528\u7684\u6839\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2a <code>.env</code> \u6587\u4ef6,\u5e76\u5c06 <code>.env.example</code> \u6587\u4ef6\u7684\u5185\u5bb9\u590d\u5236\u5230\u5176\u4e2d,\u586b\u5199\u5fc5\u8981\u7684 API \u5bc6\u94a5:</p> <pre><code>LANGSMITH_API_KEY=lsv2...\n</code></pre>"},{"location":"tutorials/langgraph-platform/local-server/#5-langgraph","title":"5. \u542f\u52a8 LangGraph \u670d\u52a1\u5668 \ud83d\ude80","text":"<p>\u5728\u672c\u5730\u542f\u52a8 LangGraph API \u670d\u52a1\u5668:</p> Python <pre><code>langgraph dev\n</code></pre> JavaScript <pre><code>npx @langchain/langgraph-cli dev\n</code></pre> <p>\u793a\u4f8b\u8f93\u51fa:</p> <pre><code>&gt;    Ready!\n&gt;\n&gt;    - API: [http://localhost:2024](http://localhost:2024/)\n&gt;\n&gt;    - Docs: http://localhost:2024/docs\n&gt;\n&gt;    - LangGraph Studio Web UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024\n</code></pre> <p><code>langgraph dev</code> \u547d\u4ee4\u4ee5\u5185\u5b58\u6a21\u5f0f\u542f\u52a8 LangGraph \u670d\u52a1\u5668\u3002\u6b64\u6a21\u5f0f\u9002\u7528\u4e8e\u5f00\u53d1\u548c\u6d4b\u8bd5\u76ee\u7684\u3002\u5bf9\u4e8e\u751f\u4ea7\u7528\u9014,\u8bf7\u90e8\u7f72\u5177\u6709\u6301\u4e45\u5316\u5b58\u50a8\u540e\u7aef\u8bbf\u95ee\u6743\u9650\u7684 LangGraph \u670d\u52a1\u5668\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f,\u8bf7\u53c2\u9605\u90e8\u7f72\u9009\u9879\u3002</p>"},{"location":"tutorials/langgraph-platform/local-server/#6-langgraph-studio","title":"6. \u5728 LangGraph Studio \u4e2d\u6d4b\u8bd5\u4f60\u7684\u5e94\u7528","text":"<p>LangGraph Studio \u662f\u4e00\u4e2a\u4e13\u95e8\u7684 UI,\u4f60\u53ef\u4ee5\u8fde\u63a5\u5230 LangGraph API \u670d\u52a1\u5668\u4ee5\u53ef\u89c6\u5316\u3001\u4ea4\u4e92\u548c\u8c03\u8bd5\u4f60\u7684\u672c\u5730\u5e94\u7528\u3002\u901a\u8fc7\u8bbf\u95ee <code>langgraph dev</code> \u547d\u4ee4\u8f93\u51fa\u4e2d\u63d0\u4f9b\u7684 URL \u5728 LangGraph Studio \u4e2d\u6d4b\u8bd5\u4f60\u7684\u56fe:</p> <pre><code>&gt;    - LangGraph Studio Web UI: https://smith.langchain.com/studio/?baseUrl=http://127.0.0.1:2024\n</code></pre> <p>\u5bf9\u4e8e\u5728\u81ea\u5b9a\u4e49\u4e3b\u673a/\u7aef\u53e3\u4e0a\u8fd0\u884c\u7684 LangGraph \u670d\u52a1\u5668,\u8bf7\u66f4\u65b0 baseURL \u53c2\u6570\u3002</p> Safari \u517c\u5bb9\u6027 <p>\u5728\u4f60\u7684\u547d\u4ee4\u4e2d\u4f7f\u7528 <code>--tunnel</code> \u6807\u5fd7\u521b\u5efa\u5b89\u5168\u96a7\u9053,\u56e0\u4e3a Safari \u5728\u8fde\u63a5\u5230 localhost \u670d\u52a1\u5668\u65f6\u6709\u9650\u5236:</p> <pre><code>langgraph dev --tunnel\n</code></pre>"},{"location":"tutorials/langgraph-platform/local-server/#7-api","title":"7. \u6d4b\u8bd5 API","text":"PythonPython SDK (async)Python SDK (sync)Rest APIJavaScriptJavascript SDKRest API <ol> <li> <p>\u5b89\u88c5 LangGraph Python SDK\uff1a</p> <pre><code>pip install langgraph-sdk\n</code></pre> </li> <li> <p>\u5411\u52a9\u624b\u53d1\u9001\u6d88\u606f\uff08\u65e0\u7ebf\u7a0b\u8fd0\u884c\uff09\uff1a</p> <pre><code>from langgraph_sdk import get_client\nimport asyncio\n\nclient = get_client(url=\"http://localhost:2024\")\n\nasync def main():\n    async for chunk in client.runs.stream(\n        None,  # Threadless run\n        \"agent\", # Name of assistant. Defined in langgraph.json.\n        input={\n        \"messages\": [{\n            \"role\": \"human\",\n            \"content\": \"What is LangGraph?\",\n            }],\n        },\n    ):\n        print(f\"Receiving new event of type: {chunk.event}...\")\n        print(chunk.data)\n        print(\"\\n\\n\")\n\nasyncio.run(main())\n</code></pre> </li> </ol> <ol> <li> <p>\u5b89\u88c5 LangGraph Python SDK\uff1a</p> <pre><code>pip install langgraph-sdk\n</code></pre> </li> <li> <p>\u5411\u52a9\u624b\u53d1\u9001\u6d88\u606f\uff08\u65e0\u7ebf\u7a0b\u8fd0\u884c\uff09\uff1a</p> <pre><code>from langgraph_sdk import get_sync_client\n\nclient = get_sync_client(url=\"http://localhost:2024\")\n\nfor chunk in client.runs.stream(\n    None,  # Threadless run\n    \"agent\", # Name of assistant. Defined in langgraph.json.\n    input={\n        \"messages\": [{\n            \"role\": \"human\",\n            \"content\": \"What is LangGraph?\",\n        }],\n    },\n    stream_mode=\"messages-tuple\",\n):\n    print(f\"Receiving new event of type: {chunk.event}...\")\n    print(chunk.data)\n    print(\"\\n\\n\")\n</code></pre> </li> </ol> <pre><code>curl -s --request POST \\\n    --url \"http://localhost:2024/runs/stream\" \\\n    --header 'Content-Type: application/json' \\\n    --data \"{\n        \\\"assistant_id\\\": \\\"agent\\\",\n        \\\"input\\\": {\n            \\\"messages\\\": [\n                {\n                    \\\"role\\\": \\\"human\\\",\n                    \\\"content\\\": \\\"What is LangGraph?\\\"\n                }\n            ]\n        },\n        \\\"stream_mode\\\": \\\"messages-tuple\\\"\n    }\"\n</code></pre> <ol> <li> <p>\u5b89\u88c5 LangGraph JS SDK\uff1a</p> <pre><code>npm install @langchain/langgraph-sdk\n</code></pre> </li> <li> <p>\u5411\u52a9\u624b\u53d1\u9001\u6d88\u606f\uff08\u65e0\u7ebf\u7a0b\u8fd0\u884c\uff09\uff1a</p> <pre><code>const { Client } = await import(\"@langchain/langgraph-sdk\");\n\n// only set the apiUrl if you changed the default port when calling langgraph dev\nconst client = new Client({ apiUrl: \"http://localhost:2024\"});\n\nconst streamResponse = client.runs.stream(\n    null, // Threadless run\n    \"agent\", // Assistant ID\n    {\n        input: {\n            \"messages\": [\n                { \"role\": \"user\", \"content\": \"What is LangGraph?\"}\n            ]\n        },\n        streamMode: \"messages-tuple\",\n    }\n);\n\nfor await (const chunk of streamResponse) {\n    console.log(`Receiving new event of type: ${chunk.event}...`);\n    console.log(JSON.stringify(chunk.data));\n    console.log(\"\\n\\n\");\n}\n</code></pre> </li> </ol> <pre><code>curl -s --request POST \\\n    --url \"http://localhost:2024/runs/stream\" \\\n    --header 'Content-Type: application/json' \\\n    --data \"{\n        \\\"assistant_id\\\": \\\"agent\\\",\n        \\\"input\\\": {\n            \\\"messages\\\": [\n                {\n                    \\\"role\\\": \\\"human\\\",\n                    \\\"content\\\": \\\"What is LangGraph?\\\"\n                }\n            ]\n        },\n        \\\"stream_mode\\\": \\\"messages-tuple\\\"\n    }\"\n</code></pre>"},{"location":"tutorials/langgraph-platform/local-server/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u73b0\u5728\u4f60\u5df2\u7ecf\u5728\u672c\u5730\u8fd0\u884c\u4e86 LangGraph \u5e94\u7528\uff0c\u53ef\u4ee5\u901a\u8fc7\u63a2\u7d22\u90e8\u7f72\u548c\u9ad8\u7ea7\u529f\u80fd\u6765\u8fdb\u4e00\u6b65\u6df1\u5316\u4f60\u7684\u65c5\u7a0b\uff1a</p> <ul> <li>\u90e8\u7f72\u5feb\u901f\u5165\u95e8\uff1a\u4f7f\u7528 LangGraph \u5e73\u53f0\u90e8\u7f72\u4f60\u7684 LangGraph \u5e94\u7528\u3002</li> <li>LangGraph \u5e73\u53f0\u6982\u8ff0\uff1a\u4e86\u89e3 LangGraph \u5e73\u53f0\u7684\u57fa\u7840\u6982\u5ff5\u3002</li> <li>LangGraph \u670d\u52a1\u5668 API \u53c2\u8003\uff1a\u63a2\u7d22 LangGraph \u670d\u52a1\u5668 API \u6587\u6863\u3002</li> </ul> Python <ul> <li>Python SDK \u53c2\u8003\uff1a\u63a2\u7d22 Python SDK API \u53c2\u8003\u3002</li> </ul> JavaScript <ul> <li>JS/TS SDK \u53c2\u8003\uff1a\u63a2\u7d22 JS/TS SDK API \u53c2\u8003\u3002</li> </ul>"},{"location":"tutorials/multi_agent/agent_supervisor/","title":"\u591a\u667a\u80fd\u4f53\u76d1\u7763\u7cfb\u7edf","text":"<p>\u76d1\u7763\u7cfb\u7edf\u662f\u4e00\u79cd\u591a\u667a\u80fd\u4f53\u67b6\u6784\uff0c\u5176\u4e2d**\u4e13\u95e8\u5316**\u7684\u667a\u80fd\u4f53\u7531\u4e2d\u592e**\u76d1\u7763\u667a\u80fd\u4f53**\u534f\u8c03\u3002\u76d1\u7763\u667a\u80fd\u4f53\u63a7\u5236\u6240\u6709\u901a\u4fe1\u6d41\u7a0b\u548c\u4efb\u52a1\u59d4\u6d3e\uff0c\u6839\u636e\u5f53\u524d\u4e0a\u4e0b\u6587\u548c\u4efb\u52a1\u9700\u6c42\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u667a\u80fd\u4f53\u3002</p> <p>\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u4f60\u5c06\u6784\u5efa\u4e00\u4e2a\u5305\u542b\u4e24\u4e2a\u667a\u80fd\u4f53\u7684\u76d1\u7763\u7cfb\u7edf\u2014\u2014\u7814\u7a76\u667a\u80fd\u4f53\u548c\u6570\u5b66\u4e13\u5bb6\u667a\u80fd\u4f53\u3002\u5728\u6559\u7a0b\u7ed3\u675f\u65f6\uff0c\u4f60\u5c06\uff1a</p> <ol> <li>\u6784\u5efa\u4e13\u95e8\u5316\u7684\u7814\u7a76\u548c\u6570\u5b66\u667a\u80fd\u4f53</li> <li>\u4f7f\u7528\u9884\u6784\u5efa\u7684 <code>langgraph-supervisor</code> \u6784\u5efa\u76d1\u7763\u7cfb\u7edf\u6765\u7f16\u6392\u5b83\u4eec</li> <li>\u4ece\u96f6\u5f00\u59cb\u6784\u5efa\u76d1\u7763\u7cfb\u7edf</li> <li>\u5b9e\u73b0\u9ad8\u7ea7\u4efb\u52a1\u59d4\u6d3e</li> </ol> <p></p>"},{"location":"tutorials/multi_agent/agent_supervisor/#_2","title":"\u8bbe\u7f6e","text":"<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u5b89\u88c5\u6240\u9700\u7684\u5305\u5e76\u8bbe\u7f6e\u6211\u4eec\u7684 API \u5bc6\u94a5</p> <pre><code>%%capture --no-stderr\n%pip install -U langgraph langgraph-supervisor langchain-tavily \"langchain[openai]\"\n</code></pre> <pre><code>import getpass\nimport os\n\n\ndef _set_if_undefined(var: str):\n    if not os.environ.get(var):\n        os.environ[var] = getpass.getpass(f\"Please provide your {var}\")\n\n\n_set_if_undefined(\"OPENAI_API_KEY\")\n_set_if_undefined(\"TAVILY_API_KEY\")\n</code></pre> <p>Tip</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u9ad8 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u8ba9\u4f60\u53ef\u4ee5\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"tutorials/multi_agent/agent_supervisor/#1","title":"1. \u521b\u5efa\u5de5\u4f5c\u667a\u80fd\u4f53","text":"<p>\u9996\u5148\uff0c\u8ba9\u6211\u4eec\u521b\u5efa\u6211\u4eec\u7684\u4e13\u95e8\u5316\u5de5\u4f5c\u667a\u80fd\u4f53\u2014\u2014\u7814\u7a76\u667a\u80fd\u4f53\u548c\u6570\u5b66\u667a\u80fd\u4f53\uff1a</p> <ul> <li>\u7814\u7a76\u667a\u80fd\u4f53\u5c06\u4f7f\u7528 Tavily API \u8bbf\u95ee\u7f51\u9875\u641c\u7d22\u5de5\u5177</li> <li>\u6570\u5b66\u667a\u80fd\u4f53\u5c06\u8bbf\u95ee\u7b80\u5355\u7684\u6570\u5b66\u5de5\u5177\uff08<code>add</code>\u3001<code>multiply</code>\u3001<code>divide</code>\uff09</li> </ul>"},{"location":"tutorials/multi_agent/agent_supervisor/#_3","title":"\u7814\u7a76\u667a\u80fd\u4f53","text":"<p>\u5bf9\u4e8e\u7f51\u9875\u641c\u7d22\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 <code>langchain-tavily</code> \u4e2d\u7684 <code>TavilySearch</code> \u5de5\u5177\uff1a</p> <pre><code>from langchain_tavily import TavilySearch\n\nweb_search = TavilySearch(max_results=3)\nweb_search_results = web_search.invoke(\"who is the mayor of NYC?\")\n\nprint(web_search_results[\"results\"][0][\"content\"])\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Find events, attractions, deals, and more at nyctourism.com Skip Main Navigation Menu The Official Website of the City of New York Text Size Powered by Translate SearchSearch Primary Navigation The official website of NYC Home NYC Resources NYC311 Office of the Mayor Events Connect Jobs Search Office of the Mayor | Mayor's Bio | City of New York Secondary Navigation MayorBiographyNewsOfficials Eric L. Adams 110th Mayor of New York City Mayor Eric Adams has served the people of New York City as an NYPD officer, State Senator, Brooklyn Borough President, and now as the 110th Mayor of the City of New York. Mayor Eric Adams has served the people of New York City as an NYPD officer, State Senator, Brooklyn Borough President, and now as the 110th Mayor of the City of New York. He gave voice to a diverse coalition of working families in all five boroughs and is leading the fight to bring back New York City's economy, reduce inequality, improve public safety, and build a stronger, healthier city that delivers for all New Yorkers. As the representative of one of the nation's largest counties, Eric fought tirelessly to grow the local economy, invest in schools, reduce inequality, improve public safety, and advocate for smart policies and better government that delivers for all New Yorkers.\n</code></pre></p> <p>\u8981\u521b\u5efa\u5355\u72ec\u7684\u5de5\u4f5c\u667a\u80fd\u4f53\uff0c\u6211\u4eec\u5c06\u4f7f\u7528 LangGraph \u7684\u9884\u6784\u5efa agent\u3002</p> <pre><code>from langgraph.prebuilt import create_react_agent\n\nresearch_agent = create_react_agent(\n    model=\"openai:gpt-4.1\",\n    tools=[web_search],\n    prompt=(\n        \"You are a research agent.\\n\\n\"\n        \"INSTRUCTIONS:\\n\"\n        \"- Assist ONLY with research-related tasks, DO NOT do any math\\n\"\n        \"- After you're done with your tasks, respond to the supervisor directly\\n\"\n        \"- Respond ONLY with the results of your work, do NOT include ANY other text.\"\n    ),\n    name=\"research_agent\",\n)\n</code></pre> <p>\u8ba9\u6211\u4eec\u8fd0\u884c\u667a\u80fd\u4f53\u6765\u9a8c\u8bc1\u5b83\u7684\u884c\u4e3a\u7b26\u5408\u9884\u671f\u3002</p> <p>\u6211\u4eec\u5c06\u4f7f\u7528 <code>pretty_print_messages</code> \u8f85\u52a9\u51fd\u6570\u6765\u66f4\u597d\u5730\u6e32\u67d3\u6d41\u5f0f\u8f93\u51fa\u7684\u667a\u80fd\u4f53\u8f93\u51fa</p> <pre><code>from langchain_core.messages import convert_to_messages\n\n\ndef pretty_print_message(message, indent=False):\n    pretty_message = message.pretty_repr(html=True)\n    if not indent:\n        print(pretty_message)\n        return\n\n    indented = \"\\n\".join(\"\\t\" + c for c in pretty_message.split(\"\\n\"))\n    print(indented)\n\n\ndef pretty_print_messages(update, last_message=False):\n    is_subgraph = False\n    if isinstance(update, tuple):\n        ns, update = update\n        # \u5728\u6253\u5370\u8f93\u51fa\u4e2d\u8df3\u8fc7\u7236\u56fe\u66f4\u65b0\n        if len(ns) == 0:\n            return\n\n        graph_id = ns[-1].split(\":\")[0]\n        print(f\"Update from subgraph {graph_id}:\")\n        print(\"\\n\")\n        is_subgraph = True\n\n    for node_name, node_update in update.items():\n        update_label = f\"Update from node {node_name}:\"\n        if is_subgraph:\n            update_label = \"\\t\" + update_label\n\n        print(update_label)\n        print(\"\\n\")\n\n        messages = convert_to_messages(node_update[\"messages\"])\n        if last_message:\n            messages = messages[-1:]\n\n        for m in messages:\n            pretty_print_message(m, indent=is_subgraph)\n        print(\"\\n\")\n</code></pre> <pre><code>for chunk in research_agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"who is the mayor of NYC?\"}]}\n):\n    pretty_print_messages(chunk)\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Update from node agent:\n\n\n================================== Ai Message ==================================\nName: research_agent\nTool Calls:\n  tavily_search (call_U748rQhQXT36sjhbkYLSXQtJ)\n Call ID: call_U748rQhQXT36sjhbkYLSXQtJ\n  Args:\n    query: current mayor of New York City\n    search_depth: basic\n\n\nUpdate from node tools:\n\n\n================================= Tool Message ==================================\nName: tavily_search\n\n{\"query\": \"current mayor of New York City\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"title\": \"List of mayors of New York City - Wikipedia\", \"url\": \"https://en.wikipedia.org/wiki/List_of_mayors_of_New_York_City\", \"content\": \"The mayor of New York City is the chief executive of the Government of New York City, as stipulated by New York City's charter.The current officeholder, the 110th in the sequence of regular mayors, is Eric Adams, a member of the Democratic Party.. During the Dutch colonial period from 1624 to 1664, New Amsterdam was governed by the Director of Netherland.\", \"score\": 0.9039154, \"raw_content\": null}, {\"title\": \"Office of the Mayor | Mayor's Bio | City of New York - NYC.gov\", \"url\": \"https://www.nyc.gov/office-of-the-mayor/bio.page\", \"content\": \"Mayor Eric Adams has served the people of New York City as an NYPD officer, State Senator, Brooklyn Borough President, and now as the 110th Mayor of the City of New York. He gave voice to a diverse coalition of working families in all five boroughs and is leading the fight to bring back New York City's economy, reduce inequality, improve\", \"score\": 0.8405867, \"raw_content\": null}, {\"title\": \"Eric Adams - Wikipedia\", \"url\": \"https://en.wikipedia.org/wiki/Eric_Adams\", \"content\": \"Eric Leroy Adams (born September 1, 1960) is an American politician and former police officer who has served as the 110th mayor of New York City since 2022. Adams was an officer in the New York City Transit Police and then the New York City Police Department (```\n</code></pre></p>"},{"location":"tutorials/multi_agent/agent_supervisor/#_4","title":"\u6570\u5b66\u667a\u80fd\u4f53","text":"<p>\u5bf9\u4e8e\u6570\u5b66\u667a\u80fd\u4f53\u5de5\u5177\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u7eaf Python \u51fd\u6570\uff1a</p> <pre><code>def add(a: float, b: float):\n    \"\"\"Add two numbers.\"\"\"\n    return a + b\n\n\ndef multiply(a: float, b: float):\n    \"\"\"Multiply two numbers.\"\"\"\n    return a * b\n\n\ndef divide(a: float, b: float):\n    \"\"\"Divide two numbers.\"\"\"\n    return a / b\n\n\nmath_agent = create_react_agent(\n    model=\"openai:gpt-4.1\",\n    tools=[add, multiply, divide],\n    prompt=(\n        \"You are a math agent.\\n\\n\"\n        \"INSTRUCTIONS:\\n\"\n        \"- Assist ONLY with math-related tasks\\n\"\n        \"- After you're done with your tasks, respond to the supervisor directly\\n\"\n        \"- Respond ONLY with the results of your work, do NOT include ANY other text.\"\n    ),\n    name=\"math_agent\",\n)\n</code></pre> <p>\u8ba9\u6211\u4eec\u8fd0\u884c\u6570\u5b66\u667a\u80fd\u4f53\uff1a</p> <pre><code>for chunk in math_agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"what's (3 + 5) x 7\"}]}\n):\n    pretty_print_messages(chunk)\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Update from node agent:\n\n\n================================== Ai Message ==================================\nName: math_agent\nTool Calls:\n  add (call_p6OVLDHB4LyCNCxPOZzWR15v)\n Call ID: call_p6OVLDHB4LyCNCxPOZzWR15v\n  Args:\n    a: 3\n    b: 5\n\n\nUpdate from node tools:\n\n\n================================= Tool Message ==================================\nName: add\n\n8.0\n\n\nUpdate from node agent:\n\n\n================================== Ai Message ==================================\nName: math_agent\nTool Calls:\n  multiply (call_EoaWHMLFZAX4AkajQCtZvbli)\n Call ID: call_EoaWHMLFZAX4AkajQCtZvbli\n  Args:\n    a: 8\n    b: 7\n\n\nUpdate from node tools:\n\n\n================================= Tool Message ==================================\nName: multiply\n\n56.0\n\n\nUpdate from node agent:\n\n\n================================== Ai Message ==================================\nName: math_agent\n\n56\n</code></pre></p>"},{"location":"tutorials/multi_agent/agent_supervisor/#2-langgraph-supervisor","title":"2. \u4f7f\u7528 <code>langgraph-supervisor</code> \u521b\u5efa\u76d1\u7763\u7cfb\u7edf","text":"<p>\u8981\u5b9e\u73b0\u6211\u4eec\u7684\u591a\u667a\u80fd\u4f53\u7cfb\u7edf\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u9884\u6784\u5efa\u7684 <code>langgraph-supervisor</code> \u5e93\u4e2d\u7684 @[<code>create_supervisor</code>][]\uff1a</p> <pre><code>from langgraph_supervisor import create_supervisor\nfrom langchain.chat_models import init_chat_model\n\nsupervisor = create_supervisor(\n    model=init_chat_model(\"openai:gpt-4.1\"),\n    agents=[research_agent, math_agent],\n    prompt=(\n        \"You are a supervisor managing two agents:\\n\"\n        \"- a research agent. Assign research-related tasks to this agent\\n\"\n        \"- a math agent. Assign math-related tasks to this agent\\n\"\n        \"Assign work to one agent at a time, do not call agents in parallel.\\n\"\n        \"Do not do any work yourself.\"\n    ),\n    add_handoff_back_messages=True,\n    output_mode=\"full_history\",\n).compile()\n</code></pre> <pre><code>from IPython.display import display, Image\n\ndisplay(Image(supervisor.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <p>\u6ce8\u610f\uff1a \u5f53\u4f60\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\u65f6\uff0c\u5b83\u5c06\u751f\u6210\u5e76\u663e\u793a\u76d1\u7763\u7cfb\u7edf\u56fe\u7684\u53ef\u89c6\u5316\u8868\u793a\uff0c\u5c55\u793a\u76d1\u7763\u8005\u548c\u5de5\u4f5c\u667a\u80fd\u4f53\u4e4b\u95f4\u7684\u6d41\u7a0b\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u7528\u4e00\u4e2a\u9700\u8981\u4e24\u4e2a\u667a\u80fd\u4f53\u7684\u67e5\u8be2\u6765\u8fd0\u884c\u5b83\uff1a</p> <ul> <li>\u7814\u7a76\u667a\u80fd\u4f53\u5c06\u67e5\u627e\u5fc5\u8981\u7684 GDP \u4fe1\u606f</li> <li>\u6570\u5b66\u667a\u80fd\u4f53\u5c06\u6267\u884c\u9664\u6cd5\u4ee5\u627e\u51fa\u7ebd\u7ea6\u5dde GDP \u7684\u767e\u5206\u6bd4\uff0c\u5982\u6240\u8bf7\u6c42\u7684</li> </ul> <pre><code>for chunk in supervisor.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"find US and New York state GDP in 2024. what % of US GDP was New York state?\",\n            }\n        ]\n    },\n):\n    pretty_print_messages(chunk, last_message=True)\n\nfinal_message_history = chunk[\"supervisor\"][\"messages\"]\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Update from node supervisor:\n\n\n================================= Tool Message ==================================\nName: transfer_to_research_agent\n\n\u6210\u529f\u8f6c\u63a5\u5230 research_agent\n\n\nUpdate from node research_agent:\n\n\n================================= Tool Message ==================================\nName: transfer_back_to_supervisor\n\n\u6210\u529f\u8f6c\u56de supervisor\n\n\nUpdate from node supervisor:\n\n\n================================= Tool Message ==================================\nName: transfer_to_math_agent\n\n\u6210\u529f\u8f6c\u63a5\u5230 math_agent\n\n\nUpdate from node math_agent:\n\n\n================================= Tool Message ==================================\nName: transfer_back_to_supervisor\n\n\u6210\u529f\u8f6c\u56de supervisor\n\n\nUpdate from node supervisor:\n\n\n================================== Ai Message ==================================\nName: supervisor\n\nIn 2024, the US GDP was $29.18 trillion and New York State's GDP was $2.297 trillion. New York State accounted for approximately 7.87% of the total US GDP in 2024.\n</code></pre></p>"},{"location":"tutorials/multi_agent/agent_supervisor/#3","title":"3. \u4ece\u96f6\u5f00\u59cb\u521b\u5efa\u76d1\u7763\u7cfb\u7edf","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u4ece\u96f6\u5f00\u59cb\u5b9e\u73b0\u540c\u6837\u7684\u591a\u667a\u80fd\u4f53\u7cfb\u7edf\u3002\u6211\u4eec\u9700\u8981\uff1a</p> <ol> <li>\u8bbe\u7f6e\u76d1\u7763\u8005\u5982\u4f55\u4e0e\u5404\u4e2a\u667a\u80fd\u4f53\u901a\u4fe1</li> <li>\u521b\u5efa\u76d1\u7763\u667a\u80fd\u4f53</li> <li>\u5c06\u76d1\u7763\u8005\u548c\u5de5\u4f5c\u667a\u80fd\u4f53\u7ec4\u5408\u6210\u4e00\u4e2a\u5355\u4e00\u7684\u591a\u667a\u80fd\u4f53\u56fe\u3002</li> </ol>"},{"location":"tutorials/multi_agent/agent_supervisor/#_5","title":"\u8bbe\u7f6e\u667a\u80fd\u4f53\u901a\u4fe1","text":"<p>\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u76d1\u7763\u667a\u80fd\u4f53\u4e0e\u5de5\u4f5c\u667a\u80fd\u4f53\u901a\u4fe1\u7684\u65b9\u5f0f\u3002\u5728\u591a\u667a\u80fd\u4f53\u67b6\u6784\u4e2d\u5b9e\u73b0\u8fd9\u4e00\u70b9\u7684\u5e38\u89c1\u65b9\u5f0f\u662f\u4f7f\u7528**\u4ea4\u63a5\uff08handoffs\uff09**\uff0c\u5176\u4e2d\u4e00\u4e2a\u667a\u80fd\u4f53\u5c06\u63a7\u5236\u6743*\u4ea4\u63a5*\u7ed9\u53e6\u4e00\u4e2a\u667a\u80fd\u4f53\u3002\u4ea4\u63a5\u5141\u8bb8\u4f60\u6307\u5b9a\uff1a</p> <ul> <li>destination\uff08\u76ee\u6807\uff09\uff1a\u8981\u8f6c\u79fb\u5230\u7684\u76ee\u6807\u667a\u80fd\u4f53</li> <li>payload\uff08\u8d1f\u8f7d\uff09\uff1a\u4f20\u9012\u7ed9\u8be5\u667a\u80fd\u4f53\u7684\u4fe1\u606f</li> </ul> <p>\u6211\u4eec\u5c06\u901a\u8fc7**\u4ea4\u63a5\u5de5\u5177**\u5b9e\u73b0\u4ea4\u63a5\uff0c\u5e76\u5c06\u8fd9\u4e9b\u5de5\u5177\u63d0\u4f9b\u7ed9\u76d1\u7763\u667a\u80fd\u4f53\uff1a\u5f53\u76d1\u7763\u8005\u8c03\u7528\u8fd9\u4e9b\u5de5\u5177\u65f6\uff0c\u5b83\u5c06\u628a\u63a7\u5236\u6743\u4ea4\u63a5\u7ed9\u5de5\u4f5c\u667a\u80fd\u4f53\uff0c\u5e76\u5c06\u5b8c\u6574\u7684\u6d88\u606f\u5386\u53f2\u4f20\u9012\u7ed9\u8be5\u667a\u80fd\u4f53\u3002</p> <pre><code>from typing import Annotated\nfrom langchain_core.tools import tool, InjectedToolCallId\nfrom langgraph.prebuilt import InjectedState\nfrom langgraph.graph import StateGraph, START, MessagesState\nfrom langgraph.types import Command\n\n\ndef create_handoff_tool(*, agent_name: str, description: str | None = None):\n    name = f\"transfer_to_{agent_name}\"\n    description = description or f\"Ask {agent_name} for help.\"\n\n    @tool(name, description=description)\n    def handoff_tool(\n        state: Annotated[MessagesState, InjectedState],\n        tool_call_id: Annotated[str, InjectedToolCallId],\n    ) -&gt; Command:\n        tool_message = {\n            \"role\": \"tool\",\n            \"content\": f\"Successfully transferred to {agent_name}\",\n            \"name\": name,\n            \"tool_call_id\": tool_call_id,\n        }\n        # highlight-next-line\n        return Command(\n            # highlight-next-line\n            goto=agent_name,  # (1)!\n            # highlight-next-line\n            update={**state, \"messages\": state[\"messages\"] + [tool_message]},  # (2)!\n            # highlight-next-line\n            graph=Command.PARENT,  # (3)!\n        )\n\n    return handoff_tool\n\n\n# Handoffs\nassign_to_research_agent = create_handoff_tool(\n    agent_name=\"research_agent\",\n    description=\"Assign task to a researcher agent.\",\n)\n\nassign_to_math_agent = create_handoff_tool(\n    agent_name=\"math_agent\",\n    description=\"Assign task to a math agent.\",\n)\n</code></pre> <ol> <li>\u8981\u4ea4\u63a5\u5230\u7684\u667a\u80fd\u4f53\u6216\u8282\u70b9\u7684\u540d\u79f0\u3002</li> <li>\u83b7\u53d6\u667a\u80fd\u4f53\u7684\u6d88\u606f\u5e76\u5c06\u5b83\u4eec\u6dfb\u52a0\u5230\u7236\u7ea7\u72b6\u6001\uff0c\u4f5c\u4e3a\u4ea4\u63a5\u7684\u4e00\u90e8\u5206\u3002\u4e0b\u4e00\u4e2a\u667a\u80fd\u4f53\u5c06\u770b\u5230\u7236\u7ea7\u72b6\u6001\u3002</li> <li>\u5411 LangGraph \u6307\u793a\u6211\u4eec\u9700\u8981\u5bfc\u822a\u5230**\u7236\u7ea7**\u591a\u667a\u80fd\u4f53\u56fe\u4e2d\u7684\u667a\u80fd\u4f53\u8282\u70b9\u3002</li> </ol>"},{"location":"tutorials/multi_agent/agent_supervisor/#_6","title":"\u521b\u5efa\u76d1\u7763\u667a\u80fd\u4f53","text":"<p>\u7136\u540e\uff0c\u8ba9\u6211\u4eec\u4f7f\u7528\u6211\u4eec\u521a\u521a\u5b9a\u4e49\u7684\u4ea4\u63a5\u5de5\u5177\u521b\u5efa\u76d1\u7763\u667a\u80fd\u4f53\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u9884\u6784\u5efa\u7684 @[<code>create_react_agent</code>][]\uff1a</p> <pre><code>supervisor_agent = create_react_agent(\n    model=\"openai:gpt-4.1\",\n    tools=[assign_to_research_agent, assign_to_math_agent],\n    prompt=(\n        \"You are a supervisor managing two agents:\\n\"\n        \"- a research agent. Assign research-related tasks to this agent\\n\"\n        \"- a math agent. Assign math-related tasks to this agent\\n\"\n        \"Assign work to one agent at a time, do not call agents in parallel.\\n\"\n        \"Do not do any work yourself.\"\n    ),\n    name=\"supervisor\",\n)\n</code></pre>"},{"location":"tutorials/multi_agent/agent_supervisor/#_7","title":"\u521b\u5efa\u591a\u667a\u80fd\u4f53\u56fe","text":"<p>\u7efc\u5408\u6240\u6709\u5185\u5bb9\uff0c\u8ba9\u6211\u4eec\u4e3a\u6574\u4e2a\u591a\u667a\u80fd\u4f53\u7cfb\u7edf\u521b\u5efa\u4e00\u4e2a\u56fe\u3002\u6211\u4eec\u5c06\u76d1\u7763\u8005\u548c\u5404\u4e2a\u667a\u80fd\u4f53\u4f5c\u4e3a\u5b50\u56fe\u8282\u70b9\u6dfb\u52a0\u3002</p> <pre><code>from langgraph.graph import END\n\n# \u5b9a\u4e49\u591a\u667a\u80fd\u4f53\u76d1\u7763\u7cfb\u7edf\u56fe\nsupervisor = (\n    StateGraph(MessagesState)\n    # \u6ce8\u610f\uff1a`destinations` \u4ec5\u7528\u4e8e\u53ef\u89c6\u5316\uff0c\u4e0d\u5f71\u54cd\u8fd0\u884c\u65f6\u884c\u4e3a\n    .add_node(supervisor_agent, destinations=(\"research_agent\", \"math_agent\", END))\n    .add_node(research_agent)\n    .add_node(math_agent)\n    .add_edge(START, \"supervisor\")\n    # \u59cb\u7ec8\u8fd4\u56de\u5230\u76d1\u7763\u8005\n    .add_edge(\"research_agent\", \"supervisor\")\n    .add_edge(\"math_agent\", \"supervisor\")\n    .compile()\n)\n</code></pre> <p>\u6ce8\u610f\uff0c\u6211\u4eec\u4ece\u5de5\u4f5c\u667a\u80fd\u4f53\u6dfb\u52a0\u4e86\u663e\u5f0f\u7684\u8fb9\u8fd4\u56de\u5230\u76d1\u7763\u8005\u2014\u2014\u8fd9\u610f\u5473\u7740\u5b83\u4eec\u4fdd\u8bc1\u5c06\u63a7\u5236\u6743\u8fd4\u56de\u7ed9\u76d1\u7763\u8005\u3002\u5982\u679c\u4f60\u5e0c\u671b\u667a\u80fd\u4f53\u76f4\u63a5\u54cd\u5e94\u7528\u6237\uff08\u5373\u5c06\u7cfb\u7edf\u8f6c\u53d8\u4e3a\u8def\u7531\u5668\uff09\uff0c\u4f60\u53ef\u4ee5\u5220\u9664\u8fd9\u4e9b\u8fb9\u3002</p> <pre><code>from IPython.display import display, Image\n\ndisplay(Image(supervisor.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <p>\u6ce8\u610f\uff1a \u5f53\u4f60\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\u65f6\uff0c\u5b83\u5c06\u751f\u6210\u5e76\u663e\u793a\u591a\u667a\u80fd\u4f53\u76d1\u7763\u7cfb\u7edf\u56fe\u7684\u53ef\u89c6\u5316\u8868\u793a\uff0c\u5c55\u793a\u76d1\u7763\u8005\u548c\u5de5\u4f5c\u667a\u80fd\u4f53\u4e4b\u95f4\u7684\u6d41\u7a0b\u3002</p> <p>\u521b\u5efa\u597d\u591a\u667a\u80fd\u4f53\u56fe\u540e\uff0c\u73b0\u5728\u8ba9\u6211\u4eec\u8fd0\u884c\u5b83\uff01</p> <pre><code>for chunk in supervisor.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"find US and New York state GDP in 2024. what % of US GDP was New York state?\",\n            }\n        ]\n    },\n):\n    pretty_print_messages(chunk, last_message=True)\n\nfinal_message_history = chunk[\"supervisor\"][\"messages\"]\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Update from node supervisor:\n\n\n================================= Tool Message ==================================\nName: transfer_to_research_agent\n\n\u6210\u529f\u8f6c\u63a5\u5230 research_agent\n\n\nUpdate from node research_agent:\n\n\n================================== Ai Message ==================================\nName: research_agent\n\n- US GDP in 2024 is projected to be about $28.18 trillion USD (Statista; CBO projection).\n- New York State's nominal GDP for 2024 is estimated at approximately $2.16 trillion USD (various economic reports).\n- New York State's share of US GDP in 2024 is roughly 7.7%.\n\nSources:\n- https://www.statista.com/statistics/216985/forecast-of-us-gross-domestic-product/\n- https://nyassembly.gov/Reports/WAM/2025economic_revenue/2025_report.pdf?v=1740533306\n\n\nUpdate from node supervisor:\n\n\n================================= Tool Message ==================================\nName: transfer_to_math_agent\n\n\u6210\u529f\u8f6c\u63a5\u5230 math_agent\n\n\nUpdate from node math_agent:\n\n\n================================== Ai Message ==================================\nName: math_agent\n\nUS GDP in 2024: $28.18 trillion\nNew York State GDP in 2024: $2.16 trillion\nPercentage of US GDP from New York State: 7.67%\n\n\nUpdate from node supervisor:\n\n\n================================== Ai Message ==================================\nName: supervisor\n\nHere are your results:\n\n- 2024 US GDP (projected): $28.18 trillion USD\n- 2024 New York State GDP (estimated): $2.16 trillion USD\n- New York State's share of US GDP: approximately 7.7%\n\nIf you need the calculation steps or sources, let me know!\n</code></pre></p> <p>\u8ba9\u6211\u4eec\u68c0\u67e5\u5b8c\u6574\u7684\u7ed3\u679c\u6d88\u606f\u5386\u53f2\uff1a</p> <pre><code>for message in final_message_history:\n    message.pretty_print()\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>================================ Human Message ==================================\n\nfind US and New York state GDP in 2024. what % of US GDP was New York state?\n================================== Ai Message ===================================\nName: supervisor\nTool Calls:\n  transfer_to_research_agent (call_KlGgvF5ahlAbjX8d2kHFjsC3)\n Call ID: call_KlGgvF5ahlAbjX8d2kHFjsC3\n  Args:\n================================= Tool Message ==================================\nName: transfer_to_research_agent\n\n\u6210\u529f\u8f6c\u63a5\u5230 research_agent\n================================== Ai Message ===================================\nName: research_agent\nTool Calls:\n  tavily_search (call_ZOaTVUA6DKrOjWQldLhtrsO2)\n Call ID: call_ZOaTVUA6DKrOjWQldLhtrsO2\n  Args:\n    query: US GDP 2024 estimate or actual\n    search_depth: advanced\n  tavily_search (call_QsRAasxW9K03lTlqjuhNLFbZ)\n Call ID: call_QsRAasxW9K03lTlqjuhNLFbZ\n  Args:\n    query: New York state GDP 2024 estimate or actual\n    search_depth: advanced\n================================= Tool Message ==================================\nName: tavily_search\n\n{\"query\": \"US GDP 2024 estimate or actual\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"url\": \"https://www.advisorperspectives.com/dshort/updates/2025/05/29/gdp-gross-domestic-product-q1-2025-second-estimate\", \"title\": \"Q1 GDP Second Estimate: Real GDP at -0.2%, Higher Than Expected\", \"content\": \"&gt; Real gross domestic product (GDP) decreased at an annual rate of 0.2 percent in the first quarter of 2025 (January, February, and March), according to the second estimate released by the U.S. Bureau of Economic Analysis. In the fourth quarter of 2024, real GDP increased 2.4 percent. The decrease in real GDP in the first quarter primarily reflected an increase in imports, which are a subtraction in the calculation of GDP, and a decrease in government spending. These movements were partly [...] by [Harry Mamaysky](https://www.advisor```\n</code></pre></p> <p>Important</p> <p>\u4f60\u53ef\u4ee5\u770b\u5230\uff0c\u76d1\u7763\u7cfb\u7edf\u5c06**\u6240\u6709**\u5404\u4e2a\u667a\u80fd\u4f53\u7684\u6d88\u606f\uff08\u5373\u5b83\u4eec\u5185\u90e8\u7684\u5de5\u5177\u8c03\u7528\u5faa\u73af\uff09\u9644\u52a0\u5230\u5b8c\u6574\u7684\u6d88\u606f\u5386\u53f2\u4e2d\u3002\u8fd9\u610f\u5473\u7740\u5728\u6bcf\u4e00\u8f6e\u76d1\u7763\u8005\u7684\u64cd\u4f5c\u4e2d\uff0c\u76d1\u7763\u667a\u80fd\u4f53\u90fd\u80fd\u770b\u5230\u8fd9\u4e2a\u5b8c\u6574\u7684\u5386\u53f2\u3002\u5982\u679c\u4f60\u60f3\u66f4\u7cbe\u786e\u5730\u63a7\u5236\uff1a</p> <ul> <li>\u5982\u4f55\u5c06\u8f93\u5165\u4f20\u9012\u7ed9\u667a\u80fd\u4f53\uff1a\u4f60\u53ef\u4ee5\u4f7f\u7528 LangGraph @[<code>Send()</code>][Send] \u539f\u8bed\u5728\u4ea4\u63a5\u671f\u95f4\u76f4\u63a5\u53d1\u9001\u6570\u636e\u7ed9\u5de5\u4f5c\u667a\u80fd\u4f53\u3002\u8bf7\u53c2\u9605\u4e0b\u9762\u7684\u4efb\u52a1\u59d4\u6d3e\u793a\u4f8b</li> <li> <p>\u5982\u4f55\u6dfb\u52a0\u667a\u80fd\u4f53\u8f93\u51fa\uff1a\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u667a\u80fd\u4f53\u5305\u88c5\u5728\u5355\u72ec\u7684\u8282\u70b9\u51fd\u6570\u4e2d\u6765\u63a7\u5236\u5c06\u591a\u5c11\u667a\u80fd\u4f53\u7684\u5185\u90e8\u6d88\u606f\u5386\u53f2\u6dfb\u52a0\u5230\u6574\u4f53\u76d1\u7763\u8005\u6d88\u606f\u5386\u53f2\u4e2d\uff1a</p> <pre><code>def call_research_agent(state):\n    # \u8fd4\u56de\u667a\u80fd\u4f53\u7684\u6700\u7ec8\u54cd\u5e94\uff0c\n    # \u6392\u9664\u5185\u90e8\u72ec\u767d\n    response = research_agent.invoke(state)\n    # highlight-next-line\n    return {\"messages\": response[\"messages\"][-1]}\n</code></pre> </li> </ul>"},{"location":"tutorials/multi_agent/agent_supervisor/#4","title":"4. \u521b\u5efa\u59d4\u6d3e\u4efb\u52a1","text":"<p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u5404\u4e2a\u667a\u80fd\u4f53\u4f9d\u8d56\u4e8e**\u89e3\u91ca\u5b8c\u6574\u7684\u6d88\u606f\u5386\u53f2**\u6765\u786e\u5b9a\u5b83\u4eec\u7684\u4efb\u52a1\u3002\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f\u8ba9\u76d1\u7763\u8005**\u660e\u786e\u5236\u5b9a\u4efb\u52a1**\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5411 <code>handoff_tool</code> \u51fd\u6570\u6dfb\u52a0 <code>task_description</code> \u53c2\u6570\u6765\u5b9e\u73b0\u3002</p> <pre><code>from langgraph.types import Send\n\n\ndef create_task_description_handoff_tool(\n    *, agent_name: str, description: str | None = None\n):\n    name = f\"transfer_to_{agent_name}\"\n    description = description or f\"Ask {agent_name} for help.\"\n\n    @tool(name, description=description)\n    def handoff_tool(\n        # \u8fd9\u7531\u76d1\u7763\u8005 LLM \u586b\u5145\n        task_description: Annotated[\n            str,\n            \"Description of what the next agent should do, including all of the relevant context.\",\n        ],\n        # \u8fd9\u4e9b\u53c2\u6570\u88ab LLM \u5ffd\u7565\n        state: Annotated[MessagesState, InjectedState],\n    ) -&gt; Command:\n        task_description_message = {\"role\": \"user\", \"content\": task_description}\n        agent_input = {**state, \"messages\": [task_description_message]}\n        return Command(\n            # highlight-next-line\n            goto=[Send(agent_name, agent_input)],\n            graph=Command.PARENT,\n        )\n\n    return handoff_tool\n\n\nassign_to_research_agent_with_description = create_task_description_handoff_tool(\n    agent_name=\"research_agent\",\n    description=\"Assign task to a researcher agent.\",\n)\n\nassign_to_math_agent_with_description = create_task_description_handoff_tool(\n    agent_name=\"math_agent\",\n    description=\"Assign task to a math agent.\",\n)\n\nsupervisor_agent_with_description = create_react_agent(\n    model=\"openai:gpt-4.1\",\n    tools=[\n        assign_to_research_agent_with_description,\n        assign_to_math_agent_with_description,\n    ],\n    prompt=(\n        \"You are a supervisor managing two agents:\\n\"\n        \"- a research agent. Assign research-related tasks to this assistant\\n\"\n        \"- a math agent. Assign math-related tasks to this assistant\\n\"\n        \"Assign work to one agent at a time, do not call agents in parallel.\\n\"\n        \"Do not do any work yourself.\"\n    ),\n    name=\"supervisor\",\n)\n\nsupervisor_with_description = (\n    StateGraph(MessagesState)\n    .add_node(\n        supervisor_agent_with_description, destinations=(\"research_agent\", \"math_agent\")\n    )\n    .add_node(research_agent)\n    .add_node(math_agent)\n    .add_edge(START, \"supervisor\")\n    .add_edge(\"research_agent\", \"supervisor\")\n    .add_edge(\"math_agent\", \"supervisor\")\n    .compile()\n)\n</code></pre> <p>Note</p> <p>\u6211\u4eec\u5728 <code>handoff_tool</code> \u4e2d\u4f7f\u7528\u4e86 @[<code>Send()</code>][Send] \u539f\u8bed\u3002\u8fd9\u610f\u5473\u7740\u6bcf\u4e2a\u5de5\u4f5c\u667a\u80fd\u4f53\u4e0d\u4f1a\u63a5\u6536\u5b8c\u6574\u7684 <code>supervisor</code> \u56fe\u72b6\u6001\u4f5c\u4e3a\u8f93\u5165\uff0c\u800c\u662f\u53ea\u770b\u5230 <code>Send</code> \u8d1f\u8f7d\u7684\u5185\u5bb9\u3002\u5728\u6b64\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5c06\u4efb\u52a1\u63cf\u8ff0\u4f5c\u4e3a\u5355\u4e2a\"human\"\u6d88\u606f\u53d1\u9001\u3002</p> <p>\u73b0\u5728\u8ba9\u6211\u4eec\u7528\u540c\u6837\u7684\u8f93\u5165\u67e5\u8be2\u8fd0\u884c\u5b83\uff1a</p> <pre><code>for chunk in supervisor_with_description.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"find US and New York state GDP in 2024. what % of US GDP was New York state?\",\n            }\n        ]\n    },\n    subgraphs=True,\n):\n    pretty_print_messages(chunk, last_message=True)\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Update from subgraph supervisor:\n\n\n    Update from node agent:\n\n\n    ================================== Ai Message ==================================\n    Name: supervisor\n    Tool Calls:\n      transfer_to_research_agent (call_tk8q8py8qK6MQz6Kj6mijKua)\n     Call ID: call_tk8q8py8qK6MQz6Kj6mijKua\n      Args:\n        task_description: Find the 2024 GDP (Gross Domestic Product) for both the United States and New York state, using the most up-to-date and reputable sources available. Provide both GDP values and cite the data sources.\n\n\nUpdate from subgraph research_agent:\n\n\n    Update from node agent:\n\n\n    ================================== Ai Message ==================================\n    Name: research_agent\n    Tool Calls:\n      tavily_search (call_KqvhSvOIhAvXNsT6BOwbPlRB)\n     Call ID: call_KqvhSvOIhAvXNsT6BOwbPlRB\n      Args:\n        query: 2024 United States GDP value from a reputable source\n        search_depth: advanced\n      tavily_search (call_kbbAWBc9KwCWKHmM5v04H88t)\n     Call ID: call_kbbAWBc9KwCWKHmM5v04H88t\n      Args:\n        query: 2024 New York state GDP value from a reputable source\n        search_depth: advanced\n\n\nUpdate from subgraph research_agent:\n\n\n    Update from node tools:\n\n\n    ================================= Tool Message ==================================\n    Name: tavily_search\n\n    {\"query\": \"2024 United States GDP value from a reputable source\", \"follow_up_questions\": null, \"answer\": null, \"images\": [], \"results\": [{\"url\": \"https://www.focus-economics.com/countries/united-states/\", \"title\": \"United States Economy Overview - Focus Economics\", \"content\": \"The United States' Macroeconomic Analysis:\\n------------------------------------------\\n\\n**Nominal GDP of USD 29,185 billion in 2024.**\\n\\n**Nominal GDP of USD 29,179 billion in 2024.**\\n\\n**GDP per capita of USD 86,635 compared to the global average of USD 10,589.**\\n\\n**GDP per capita of USD 86,652 compared to the global average of USD 10,589.**\\n\\n**Average real GDP growth of 2.5% over the last decade.**\\n\\n**Average real GDP growth of ```\n</code></pre></p>"},{"location":"tutorials/rag/langgraph_agentic_rag/","title":"\u667a\u80fd\u4f53 RAG","text":"<p>\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u6784\u5efa\u4e00\u4e2a\u68c0\u7d22\u667a\u80fd\u4f53\u3002\u5f53\u4f60\u5e0c\u671b LLM \u51b3\u5b9a\u662f\u4ece\u5411\u91cf\u5b58\u50a8\u4e2d\u68c0\u7d22\u4e0a\u4e0b\u6587\u8fd8\u662f\u76f4\u63a5\u54cd\u5e94\u7528\u6237\u65f6\uff0c\u68c0\u7d22\u667a\u80fd\u4f53\u975e\u5e38\u6709\u7528\u3002</p> <p>\u5728\u672c\u6559\u7a0b\u7ed3\u675f\u65f6\uff0c\u6211\u4eec\u5c06\u5b8c\u6210\u4ee5\u4e0b\u5de5\u4f5c:</p> <ol> <li>\u83b7\u53d6\u548c\u9884\u5904\u7406\u5c06\u7528\u4e8e\u68c0\u7d22\u7684\u6587\u6863\u3002</li> <li>\u4e3a\u8bed\u4e49\u641c\u7d22\u7d22\u5f15\u8fd9\u4e9b\u6587\u6863\u5e76\u4e3a\u667a\u80fd\u4f53\u521b\u5efa\u68c0\u7d22\u5668\u5de5\u5177\u3002</li> <li>\u6784\u5efa\u4e00\u4e2a\u53ef\u4ee5\u51b3\u5b9a\u4f55\u65f6\u4f7f\u7528\u68c0\u7d22\u5668\u5de5\u5177\u7684\u667a\u80fd\u4f53 RAG \u7cfb\u7edf\u3002</li> </ol> <p></p>"},{"location":"tutorials/rag/langgraph_agentic_rag/#_1","title":"\u8bbe\u7f6e","text":"<p>\u8ba9\u6211\u4eec\u4e0b\u8f7d\u6240\u9700\u7684\u5305\u5e76\u8bbe\u7f6e\u6211\u4eec\u7684 API \u5bc6\u94a5:</p> <pre><code>%%capture --no-stderr\n%pip install -U --quiet langgraph \"langchain[openai]\" langchain-community langchain-text-splitters\n</code></pre> <pre><code>import getpass\nimport os\n\n\ndef _set_env(key: str):\n    if key not in os.environ:\n        os.environ[key] = getpass.getpass(f\"{key}:\")\n\n\n_set_env(\"OPENAI_API_KEY\")\n</code></pre> <p>Tip</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u9ad8 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u5141\u8bb8\u4f60\u4f7f\u7528\u8ddf\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u4f7f\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528\u3002</p>"},{"location":"tutorials/rag/langgraph_agentic_rag/#1","title":"1. \u9884\u5904\u7406\u6587\u6863","text":"<ol> <li> <p>\u83b7\u53d6\u8981\u5728\u6211\u4eec\u7684 RAG \u7cfb\u7edf\u4e2d\u4f7f\u7528\u7684\u6587\u6863\u3002\u6211\u4eec\u5c06\u4f7f\u7528 Lilian Weng \u4f18\u79c0\u535a\u5ba2\u4e2d\u6700\u8fd1\u7684\u4e09\u4e2a\u9875\u9762\u3002\u6211\u4eec\u5c06\u9996\u5148\u4f7f\u7528 <code>WebBaseLoader</code> \u5b9e\u7528\u7a0b\u5e8f\u83b7\u53d6\u9875\u9762\u5185\u5bb9:</p> <pre><code>from langchain_community.document_loaders import WebBaseLoader\n\nurls = [\n    \"https://lilianweng.github.io/posts/2024-11-28-reward-hacking/\",\n    \"https://lilianweng.github.io/posts/2024-07-07-hallucination/\",\n    \"https://lilianweng.github.io/posts/2024-04-12-diffusion-video/\",\n]\n\ndocs = [WebBaseLoader(url).load() for url in urls]\n</code></pre> <pre><code>docs[0][0].page_content.strip()[:1000]\n</code></pre> </li> <li> <p>\u5c06\u83b7\u53d6\u7684\u6587\u6863\u62c6\u5206\u4e3a\u8f83\u5c0f\u7684\u5757\u4ee5\u7d22\u5f15\u5230\u6211\u4eec\u7684\u5411\u91cf\u5b58\u50a8\u4e2d:</p> <pre><code>from langchain_text_splitters import RecursiveCharacterTextSplitter\n\ndocs_list = [item for sublist in docs for item in sublist]\n\ntext_splitter = RecursiveCharacterTextSplitter.from_tiktoken_encoder(\n    chunk_size=100, chunk_overlap=50\n)\ndoc_splits = text_splitter.split_documents(docs_list)\n</code></pre> <pre><code>doc_splits[0].page_content.strip()\n</code></pre> </li> </ol>"},{"location":"tutorials/rag/langgraph_agentic_rag/#2","title":"2. \u521b\u5efa\u68c0\u7d22\u5668\u5de5\u5177","text":"<p>\u73b0\u5728\u6211\u4eec\u6709\u4e86\u62c6\u5206\u7684\u6587\u6863\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u4eec\u7d22\u5f15\u5230\u5411\u91cf\u5b58\u50a8\u4e2d\uff0c\u7528\u4e8e\u8bed\u4e49\u641c\u7d22\u3002</p> <ol> <li> <p>\u4f7f\u7528\u5185\u5b58\u5411\u91cf\u5b58\u50a8\u548c OpenAI \u5d4c\u5165:</p> <pre><code>from langchain_core.vectorstores import InMemoryVectorStore\nfrom langchain_openai import OpenAIEmbeddings\n\nvectorstore = InMemoryVectorStore.from_documents(\n    documents=doc_splits, embedding=OpenAIEmbeddings()\n)\nretriever = vectorstore.as_retriever()\n</code></pre> </li> <li> <p>\u4f7f\u7528 LangChain \u7684\u9884\u6784\u5efa <code>create_retriever_tool</code> \u521b\u5efa\u68c0\u7d22\u5668\u5de5\u5177:</p> <pre><code>from langchain.tools.retriever import create_retriever_tool\n\nretriever_tool = create_retriever_tool(\n    retriever,\n    \"retrieve_blog_posts\",\n    \"Search and return information about Lilian Weng blog posts.\",\n)\n</code></pre> </li> <li> <p>\u6d4b\u8bd5\u5de5\u5177:</p> <pre><code>retriever_tool.invoke({\"query\": \"types of reward hacking\"})\n</code></pre> </li> </ol>"},{"location":"tutorials/rag/langgraph_agentic_rag/#3","title":"3. \u751f\u6210\u67e5\u8be2","text":"<p>\u73b0\u5728\u6211\u4eec\u5c06\u5f00\u59cb\u4e3a\u6211\u4eec\u7684\u667a\u80fd\u4f53 RAG \u56fe\u6784\u5efa\u7ec4\u4ef6(\u8282\u70b9\u548c\u8fb9)\u3002</p> Python <p>\u6ce8\u610f\u7ec4\u4ef6\u5c06\u5728 <code>MessagesState</code> \u4e0a\u64cd\u4f5c \u2014\u2014 \u5305\u542b\u5e26\u6709\u804a\u5929\u6d88\u606f\u5217\u8868\u7684 <code>messages</code> \u952e\u7684\u56fe\u72b6\u6001\u3002</p> JavaScript <p>\u6ce8\u610f\u7ec4\u4ef6\u5c06\u5728 <code>MessagesZodState</code> \u4e0a\u64cd\u4f5c \u2014\u2014 \u5305\u542b\u5e26\u6709\u804a\u5929\u6d88\u606f\u5217\u8868\u7684 <code>messages</code> \u952e\u7684\u56fe\u72b6\u6001\u3002</p> <ol> <li> <p>\u6784\u5efa <code>generate_query_or_respond</code> \u8282\u70b9\u3002\u5b83\u5c06\u8c03\u7528 LLM \u6839\u636e\u5f53\u524d\u56fe\u72b6\u6001(\u6d88\u606f\u5217\u8868)\u751f\u6210\u54cd\u5e94\u3002\u7ed9\u5b9a\u8f93\u5165\u6d88\u606f\uff0c\u5b83\u5c06\u51b3\u5b9a\u4f7f\u7528\u68c0\u7d22\u5668\u5de5\u5177\u8fdb\u884c\u68c0\u7d22\uff0c\u6216\u76f4\u63a5\u54cd\u5e94\u7528\u6237\u3002\u6ce8\u610f\u6211\u4eec\u901a\u8fc7 <code>.bind_tools</code> \u7ed9\u804a\u5929\u6a21\u578b\u8bbf\u95ee\u6211\u4eec\u4e4b\u524d\u521b\u5efa\u7684 <code>retriever_tool</code>:</p> <pre><code>from langgraph.graph import MessagesState\nfrom langchain.chat_models import init_chat_model\n\nresponse_model = init_chat_model(\"openai:gpt-4.1\", temperature=0)\n\n\ndef generate_query_or_respond(state: MessagesState):\n    \"\"\"Call the model to generate a response based on the current state. Given\n    the question, it will decide to retrieve using the retriever tool, or simply respond to the user.\n    \"\"\"\n    response = (\n        response_model\n        # highlight-next-line\n        .bind_tools([retriever_tool]).invoke(state[\"messages\"])\n    )\n    return {\"messages\": [response]}\n</code></pre> </li> <li> <p>\u5728\u968f\u673a\u8f93\u5165\u4e0a\u5c1d\u8bd5\u5b83:</p> <pre><code>input = {\"messages\": [{\"role\": \"user\", \"content\": \"hello!\"}]}\ngenerate_query_or_respond(input)[\"messages\"][-1].pretty_print()\n</code></pre> <p>\u8f93\u51fa: <pre><code>================================== Ai Message ==================================\n\nHello! How can I help you today?\n</code></pre></p> </li> <li> <p>\u63d0\u51fa\u4e00\u4e2a\u9700\u8981\u8bed\u4e49\u641c\u7d22\u7684\u95ee\u9898:</p> <pre><code>input = {\n    \"messages\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"What does Lilian Weng say about types of reward hacking?\",\n        }\n    ]\n}\ngenerate_query_or_respond(input)[\"messages\"][-1].pretty_print()\n</code></pre> <p>Output: <pre><code>================================== Ai Message ==================================\nTool Calls:\nretrieve_blog_posts (call_tYQxgfIlnQUDMdtAhdbXNwIM)\nCall ID: call_tYQxgfIlnQUDMdtAhdbXNwIM\nArgs:\n    query: types of reward hacking\n</code></pre></p> </li> </ol>"},{"location":"tutorials/rag/langgraph_agentic_rag/#4","title":"4. \u8bc4\u4f30\u6587\u6863","text":"<ol> <li> <p>\u6dfb\u52a0\u4e00\u4e2a\u6761\u4ef6\u8fb9 \u2014 <code>grade_documents</code> \u2014 \u6765\u786e\u5b9a\u68c0\u7d22\u5230\u7684\u6587\u6863\u662f\u5426\u4e0e\u95ee\u9898\u76f8\u5173\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u5177\u6709\u7ed3\u6784\u5316\u8f93\u51fa schema <code>GradeDocuments</code> \u7684\u6a21\u578b\u8fdb\u884c\u6587\u6863\u8bc4\u5206\u3002<code>grade_documents</code> \u51fd\u6570\u5c06\u6839\u636e\u8bc4\u5206\u51b3\u5b9a\u8fd4\u56de\u8981\u53bb\u7684\u8282\u70b9\u540d\u79f0\uff08<code>generate_answer</code> \u6216 <code>rewrite_question</code>\uff09:</p> <pre><code>from pydantic import BaseModel, Field\nfrom typing import Literal\n\nGRADE_PROMPT = (\n    \"You are a grader assessing relevance of a retrieved document to a user question. \\n \"\n    \"Here is the retrieved document: \\n\\n {context} \\n\\n\"\n    \"Here is the user question: {question} \\n\"\n    \"If the document contains keyword(s) or semantic meaning related to the user question, grade it as relevant. \\n\"\n    \"Give a binary score 'yes' or 'no' score to indicate whether the document is relevant to the question.\"\n)\n\n\n# highlight-next-line\nclass GradeDocuments(BaseModel):\n    \"\"\"Grade documents using a binary score for relevance check.\"\"\"\n\n    binary_score: str = Field(\n        description=\"Relevance score: 'yes' if relevant, or 'no' if not relevant\"\n    )\n\n\ngrader_model = init_chat_model(\"openai:gpt-4.1\", temperature=0)\n\n\ndef grade_documents(\n    state: MessagesState,\n) -&gt; Literal[\"generate_answer\", \"rewrite_question\"]:\n    \"\"\"Determine whether the retrieved documents are relevant to the question.\"\"\"\n    question = state[\"messages\"][0].content\n    context = state[\"messages\"][-1].content\n\n    prompt = GRADE_PROMPT.format(question=question, context=context)\n    response = (\n        grader_model\n        # highlight-next-line\n        .with_structured_output(GradeDocuments).invoke(\n            [{\"role\": \"user\", \"content\": prompt}]\n        )\n    )\n    score = response.binary_score\n\n    if score == \"yes\":\n        return \"generate_answer\"\n    else:\n        return \"rewrite_question\"\n</code></pre> </li> <li> <p>\u4f7f\u7528\u5de5\u5177\u54cd\u5e94\u4e2d\u7684\u4e0d\u76f8\u5173\u6587\u6863\u8fd0\u884c\u6b64\u51fd\u6570:</p> <pre><code>from langchain_core.messages import convert_to_messages\n\ninput = {\n    \"messages\": convert_to_messages(\n        [\n            {\n                \"role\": \"user\",\n                \"content\": \"What does Lilian Weng say about types of reward hacking?\",\n            },\n            {\n                \"role\": \"assistant\",\n                \"content\": \"\",\n                \"tool_calls\": [\n                    {\n                        \"id\": \"1\",\n                        \"name\": \"retrieve_blog_posts\",\n                        \"args\": {\"query\": \"types of reward hacking\"},\n                    }\n                ],\n            },\n            {\"role\": \"tool\", \"content\": \"meow\", \"tool_call_id\": \"1\"},\n        ]\n    )\n}\ngrade_documents(input)\n</code></pre> </li> <li> <p>\u786e\u8ba4\u76f8\u5173\u6587\u6863\u88ab\u6b63\u786e\u5206\u7c7b:</p> <pre><code>input = {\n    \"messages\": convert_to_messages(\n        [\n            {\n                \"role\": \"user\",\n                \"content\": \"What does Lilian Weng say about types of reward hacking?\",\n            },\n            {\n                \"role\": \"assistant\",\n                \"content\": \"\",\n                \"tool_calls\": [\n                    {\n                        \"id\": \"1\",\n                        \"name\": \"retrieve_blog_posts\",\n                        \"args\": {\"query\": \"types of reward hacking\"},\n                    }\n                ],\n            },\n            {\n                \"role\": \"tool\",\n                \"content\": \"reward hacking can be categorized into two types: environment or goal misspecification, and reward tampering\",\n                \"tool_call_id\": \"1\",\n            },\n        ]\n    )\n}\ngrade_documents(input)\n</code></pre> </li> </ol>"},{"location":"tutorials/rag/langgraph_agentic_rag/#5","title":"5. \u91cd\u5199\u95ee\u9898","text":"<ol> <li> <p>\u6784\u5efa <code>rewrite_question</code> \u8282\u70b9\u3002\u68c0\u7d22\u5668\u5de5\u5177\u53ef\u80fd\u8fd4\u56de\u4e0d\u76f8\u5173\u7684\u6587\u6863,\u8fd9\u8868\u660e\u9700\u8981\u6539\u8fdb\u539f\u59cb\u7528\u6237\u95ee\u9898\u3002\u4e3a\u6b64,\u6211\u4eec\u5c06\u8c03\u7528 <code>rewrite_question</code> \u8282\u70b9:</p> <pre><code>REWRITE_PROMPT = (\n    \"Look at the input and try to reason about the underlying semantic intent / meaning.\\n\"\n    \"Here is the initial question:\"\n    \"\\n ------- \\n\"\n    \"{question}\"\n    \"\\n ------- \\n\"\n    \"Formulate an improved question:\"\n)\n\n\ndef rewrite_question(state: MessagesState):\n    \"\"\"Rewrite the original user question.\"\"\"\n    messages = state[\"messages\"]\n    question = messages[0].content\n    prompt = REWRITE_PROMPT.format(question=question)\n    response = response_model.invoke([{\"role\": \"user\", \"content\": prompt}])\n    return {\"messages\": [{\"role\": \"user\", \"content\": response.content}]}\n</code></pre> </li> <li> <p>\u5c1d\u8bd5\u8fd0\u884c:</p> <pre><code>input = {\n    \"messages\": convert_to_messages(\n        [\n            {\n                \"role\": \"user\",\n                \"content\": \"What does Lilian Weng say about types of reward hacking?\",\n            },\n            {\n                \"role\": \"assistant\",\n                \"content\": \"\",\n                \"tool_calls\": [\n                    {\n                        \"id\": \"1\",\n                        \"name\": \"retrieve_blog_posts\",\n                        \"args\": {\"query\": \"types of reward hacking\"},\n                    }\n                ],\n            },\n            {\"role\": \"tool\", \"content\": \"meow\", \"tool_call_id\": \"1\"},\n        ]\n    )\n}\n\nresponse = rewrite_question(input)\nprint(response[\"messages\"][-1][\"content\"])\n</code></pre> <p>\u8f93\u51fa: <pre><code>What are the different types of reward hacking described by Lilian Weng, and how does she explain them?\n</code></pre></p> </li> </ol>"},{"location":"tutorials/rag/langgraph_agentic_rag/#6","title":"6. \u751f\u6210\u7b54\u6848","text":"<ol> <li> <p>\u6784\u5efa <code>generate_answer</code> \u8282\u70b9:\u5982\u679c\u6211\u4eec\u901a\u8fc7\u4e86\u8bc4\u5206\u68c0\u67e5,\u6211\u4eec\u53ef\u4ee5\u57fa\u4e8e\u539f\u59cb\u95ee\u9898\u548c\u68c0\u7d22\u5230\u7684\u4e0a\u4e0b\u6587\u751f\u6210\u6700\u7ec8\u7b54\u6848:</p> <pre><code>GENERATE_PROMPT = (\n    \"You are an assistant for question-answering tasks. \"\n    \"Use the following pieces of retrieved context to answer the question. \"\n    \"If you don't know the answer, just say that you don't know. \"\n    \"Use three sentences maximum and keep the answer concise.\\n\"\n    \"Question: {question} \\n\"\n    \"Context: {context}\"\n)\n\n\ndef generate_answer(state: MessagesState):\n    \"\"\"Generate an answer.\"\"\"\n    question = state[\"messages\"][0].content\n    context = state[\"messages\"][-1].content\n    prompt = GENERATE_PROMPT.format(question=question, context=context)\n    response = response_model.invoke([{\"role\": \"user\", \"content\": prompt}])\n    return {\"messages\": [response]}\n</code></pre> </li> <li> <p>\u5c1d\u8bd5\u8fd0\u884c:</p> <pre><code>input = {\n    \"messages\": convert_to_messages(\n        [\n            {\n                \"role\": \"user\",\n                \"content\": \"What does Lilian Weng say about types of reward hacking?\",\n            },\n            {\n                \"role\": \"assistant\",\n                \"content\": \"\",\n                \"tool_calls\": [\n                    {\n                        \"id\": \"1\",\n                        \"name\": \"retrieve_blog_posts\",\n                        \"args\": {\"query\": \"types of reward hacking\"},\n                    }\n                ],\n            },\n            {\n                \"role\": \"tool\",\n                \"content\": \"reward hacking can be categorized into two types: environment or goal misspecification, and reward tampering\",\n                \"tool_call_id\": \"1\",\n            },\n        ]\n    )\n}\n\nresponse = generate_answer(input)\nresponse[\"messages\"][-1].pretty_print()\n</code></pre> <p>\u8f93\u51fa: <pre><code>================================== Ai Message ==================================\n\nLilian Weng categorizes reward hacking into two types: environment or goal misspecification, and reward tampering. She considers reward hacking as a broad concept that includes both of these categories. Reward hacking occurs when an agent exploits flaws or ambiguities in the reward function to achieve high rewards without performing the intended behaviors.\n</code></pre></p> </li> </ol>"},{"location":"tutorials/rag/langgraph_agentic_rag/#7","title":"7. \u7ec4\u88c5\u56fe","text":"<ul> <li>\u4ece <code>generate_query_or_respond</code> \u5f00\u59cb,\u786e\u5b9a\u6211\u4eec\u662f\u5426\u9700\u8981\u8c03\u7528 <code>retriever_tool</code></li> <li>\u4f7f\u7528 <code>tools_condition</code> \u8def\u7531\u5230\u4e0b\u4e00\u6b65:<ul> <li>\u5982\u679c <code>generate_query_or_respond</code> \u8fd4\u56de\u4e86 <code>tool_calls</code>,\u8c03\u7528 <code>retriever_tool</code> \u68c0\u7d22\u4e0a\u4e0b\u6587</li> <li>\u5426\u5219,\u76f4\u63a5\u54cd\u5e94\u7528\u6237</li> </ul> </li> <li>\u8bc4\u4f30\u68c0\u7d22\u5230\u7684\u6587\u6863\u5185\u5bb9\u4e0e\u95ee\u9898\u7684\u76f8\u5173\u6027(<code>grade_documents</code>)\u5e76\u8def\u7531\u5230\u4e0b\u4e00\u6b65:<ul> <li>\u5982\u679c\u4e0d\u76f8\u5173,\u4f7f\u7528 <code>rewrite_question</code> \u91cd\u5199\u95ee\u9898,\u7136\u540e\u518d\u6b21\u8c03\u7528 <code>generate_query_or_respond</code></li> <li>\u5982\u679c\u76f8\u5173,\u7ee7\u7eed\u6267\u884c <code>generate_answer</code>,\u4f7f\u7528\u5305\u542b\u68c0\u7d22\u5230\u7684\u6587\u6863\u4e0a\u4e0b\u6587\u7684 <code>ToolMessage</code> \u751f\u6210\u6700\u7ec8\u54cd\u5e94</li> </ul> </li> </ul> <pre><code>from langgraph.graph import StateGraph, START, END\nfrom langgraph.prebuilt import ToolNode\nfrom langgraph.prebuilt import tools_condition\n\nworkflow = StateGraph(MessagesState)\n\n# \u5b9a\u4e49\u6211\u4eec\u5c06\u5faa\u73af\u7684\u8282\u70b9\nworkflow.add_node(generate_query_or_respond)\nworkflow.add_node(\"retrieve\", ToolNode([retriever_tool]))\nworkflow.add_node(rewrite_question)\nworkflow.add_node(generate_answer)\n\nworkflow.add_edge(START, \"generate_query_or_respond\")\n\n# \u51b3\u5b9a\u662f\u5426\u68c0\u7d22\nworkflow.add_conditional_edges(\n    \"generate_query_or_respond\",\n    # Assess LLM decision (call `retriever_tool` tool or respond to the user)\n    tools_condition,\n    {\n        # Translate the condition outputs to nodes in our graph\n        \"tools\": \"retrieve\",\n        END: END,\n    },\n)\n\n# \u5728\u8c03\u7528 `action` \u8282\u70b9\u540e\u91c7\u7528\u7684\u8fb9\u3002\nworkflow.add_conditional_edges(\n    \"retrieve\",\n    # Assess agent decision\n    grade_documents,\n)\nworkflow.add_edge(\"generate_answer\", END)\nworkflow.add_edge(\"rewrite_question\", \"generate_query_or_respond\")\n\n# \u7f16\u8bd1\ngraph = workflow.compile()\n</code></pre> <p>\u53ef\u89c6\u5316\u56fe:</p> <pre><code>from IPython.display import Image, display\n\ndisplay(Image(graph.get_graph().draw_mermaid_png()))\n</code></pre> <p></p>"},{"location":"tutorials/rag/langgraph_agentic_rag/#8-rag","title":"8. \u8fd0\u884c\u667a\u80fd\u4f53 RAG","text":"<pre><code>for chunk in graph.stream(\n    {\n        \"messages\": [\n            {\n                \"role\": \"user\",\n                \"content\": \"What does Lilian Weng say about types of reward hacking?\",\n            }\n        ]\n    }\n):\n    for node, update in chunk.items():\n        print(\"Update from node\", node)\n        update[\"messages\"][-1].pretty_print()\n        print(\"\\n\\n\")\n</code></pre> <p>\u8f93\u51fa: <pre><code>\u6765\u81ea\u8282\u70b9 generate_query_or_respond \u7684\u66f4\u65b0\n================================== Ai Message ==================================\nTool Calls:\n  retrieve_blog_posts (call_NYu2vq4km9nNNEFqJwefWKu1)\n Call ID: call_NYu2vq4km9nNNEFqJwefWKu1\n  Args:\n    query: types of reward hacking\n\n\n\n\u6765\u81ea\u8282\u70b9 retrieve \u7684\u66f4\u65b0\n================================= Tool Message ==================================\nName: retrieve_blog_posts\n\n(Note: Some work defines reward tampering as a distinct category of misalignment behavior from reward hacking. But I consider reward hacking as a broader concept here.)\nAt a high level, reward hacking can be categorized into two types: environment or goal misspecification, and reward tampering.\n\nWhy does Reward Hacking Exist?#\n\nPan et al. (2022) investigated reward hacking as a function of agent capabilities, including (1) model size, (2) action space resolution, (3) observation space noise, and (4) training time. They also proposed a taxonomy of three types of misspecified proxy rewards:\n\nLet's Define Reward Hacking#\nReward shaping in RL is challenging. Reward hacking occurs when an RL agent exploits flaws or ambiguities in the reward function to obtain high rewards without genuinely learning the intended behaviors or completing the task as designed. In recent years, several related concepts have been proposed, all referring to some form of reward hacking:\n\n\n\n\u6765\u81ea\u8282\u70b9 generate_answer \u7684\u66f4\u65b0\n================================== Ai Message ==================================\n\nLilian Weng categorizes reward hacking into two types: environment or goal misspecification, and reward tampering. She considers reward hacking as a broad concept that includes both of these categories. Reward hacking occurs when an agent exploits flaws or ambiguities in the reward function to achieve high rewards without performing the intended behaviors.\n</code></pre></p>"},{"location":"tutorials/sql/sql-agent/","title":"\u6784\u5efa SQL \u667a\u80fd\u4f53","text":"<p>\u5728\u672c\u6559\u7a0b\u4e2d\uff0c\u6211\u4eec\u5c06\u6f14\u793a\u5982\u4f55\u6784\u5efa\u4e00\u4e2a\u53ef\u4ee5\u56de\u7b54\u5173\u4e8e SQL \u6570\u636e\u5e93\u95ee\u9898\u7684\u667a\u80fd\u4f53\u3002</p> <p>\u5728\u9ad8\u5c42\u6b21\u4e0a\uff0c\u667a\u80fd\u4f53\u5c06\uff1a</p> <ol> <li>\u4ece\u6570\u636e\u5e93\u83b7\u53d6\u53ef\u7528\u7684\u8868</li> <li>\u51b3\u5b9a\u54ea\u4e9b\u8868\u4e0e\u95ee\u9898\u76f8\u5173</li> <li>\u83b7\u53d6\u76f8\u5173\u8868\u7684\u6a21\u5f0f</li> <li>\u57fa\u4e8e\u95ee\u9898\u548c\u6a21\u5f0f\u4fe1\u606f\u751f\u6210\u67e5\u8be2</li> <li>\u4f7f\u7528 LLM \u68c0\u67e5\u67e5\u8be2\u4e2d\u5e38\u89c1\u7684\u9519\u8bef</li> <li>\u6267\u884c\u67e5\u8be2\u5e76\u8fd4\u56de\u7ed3\u679c</li> <li>\u7ea0\u6b63\u6570\u636e\u5e93\u5f15\u64ce\u53d1\u73b0\u7684\u9519\u8bef\uff0c\u76f4\u5230\u67e5\u8be2\u6210\u529f</li> <li>\u57fa\u4e8e\u7ed3\u679c\u5236\u5b9a\u54cd\u5e94</li> </ol> <p>\u5b89\u5168\u6ce8\u610f\u4e8b\u9879</p> <p>\u6784\u5efa SQL \u6570\u636e\u5e93\u7684\u95ee\u7b54\u7cfb\u7edf\u9700\u8981\u6267\u884c\u6a21\u578b\u751f\u6210\u7684 SQL \u67e5\u8be2\u3002\u8fd9\u6837\u505a\u5b58\u5728\u56fa\u6709\u7684\u98ce\u9669\u3002\u8bf7\u786e\u4fdd\u4f60\u7684\u6570\u636e\u5e93\u8fde\u63a5\u6743\u9650\u59cb\u7ec8\u5c3d\u53ef\u80fd\u7f29\u5c0f\u5230\u667a\u80fd\u4f53\u9700\u8981\u7684\u8303\u56f4\u3002\u8fd9\u5c06\u51cf\u8f7b\uff08\u4f46\u4e0d\u4f1a\u6d88\u9664\uff09\u6784\u5efa\u6a21\u578b\u9a71\u52a8\u7cfb\u7edf\u7684\u98ce\u9669\u3002</p>"},{"location":"tutorials/sql/sql-agent/#1","title":"1. \u8bbe\u7f6e","text":"<p>\u9996\u5148\u8ba9\u6211\u4eec\u5b89\u88c5\u4e00\u4e9b\u4f9d\u8d56\u9879\u3002\u672c\u6559\u7a0b\u4f7f\u7528\u6765\u81ea langchain-community \u7684 SQL \u6570\u636e\u5e93\u548c\u5de5\u5177\u62bd\u8c61\u3002\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a LangChain \u804a\u5929\u6a21\u578b\u3002</p> <pre><code>%%capture --no-stderr\n%pip install -U langgraph langchain_community \"langchain[openai]\"\n</code></pre> <p>Tip</p> <p>\u6ce8\u518c LangSmith \u4ee5\u5feb\u901f\u53d1\u73b0\u95ee\u9898\u5e76\u63d0\u9ad8 LangGraph \u9879\u76ee\u7684\u6027\u80fd\u3002LangSmith \u8ba9\u4f60\u53ef\u4ee5\u4f7f\u7528\u8ffd\u8e2a\u6570\u636e\u6765\u8c03\u8bd5\u3001\u6d4b\u8bd5\u548c\u76d1\u63a7\u7528 LangGraph \u6784\u5efa\u7684 LLM \u5e94\u7528\u7a0b\u5e8f\u3002</p>"},{"location":"tutorials/sql/sql-agent/#llm","title":"\u9009\u62e9 LLM","text":"<p>\u9996\u5148\u6211\u4eec\u521d\u59cb\u5316\u6211\u4eec\u7684 LLM\u3002\u4efb\u4f55\u652f\u6301\u5de5\u5177\u8c03\u7528\u7684\u6a21\u578b\u90fd\u5e94\u8be5\u53ef\u4ee5\u5de5\u4f5c\u3002\u6211\u4eec\u5728\u4e0b\u9762\u4f7f\u7528 OpenAI\u3002</p> <pre><code>from langchain.chat_models import init_chat_model\n\nllm = init_chat_model(\"openai:gpt-4.1\")\n</code></pre>"},{"location":"tutorials/sql/sql-agent/#_1","title":"\u914d\u7f6e\u6570\u636e\u5e93","text":"<p>\u6211\u4eec\u5c06\u4e3a\u672c\u6559\u7a0b\u521b\u5efa\u4e00\u4e2a SQLite \u6570\u636e\u5e93\u3002SQLite \u662f\u4e00\u4e2a\u8f7b\u91cf\u7ea7\u6570\u636e\u5e93\uff0c\u6613\u4e8e\u8bbe\u7f6e\u548c\u4f7f\u7528\u3002\u6211\u4eec\u5c06\u52a0\u8f7d <code>chinook</code> \u6570\u636e\u5e93\uff0c\u8fd9\u662f\u4e00\u4e2a\u4ee3\u8868\u6570\u5b57\u5a92\u4f53\u5546\u5e97\u7684\u793a\u4f8b\u6570\u636e\u5e93\u3002 \u5728\u8fd9\u91cc\u627e\u5230\u66f4\u591a\u5173\u4e8e\u8be5\u6570\u636e\u5e93\u7684\u4fe1\u606f\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u5728\u516c\u5171 GCS \u5b58\u50a8\u6876\u4e0a\u6258\u7ba1\u4e86\u8be5\u6570\u636e\u5e93\uff08<code>Chinook.db</code>\uff09\u3002</p> <pre><code>import requests\n\nurl = \"https://storage.googleapis.com/benchmarks-artifacts/chinook/Chinook.db\"\n\nresponse = requests.get(url)\n\nif response.status_code == 200:\n    # \u4ee5\u4e8c\u8fdb\u5236\u5199\u5165\u6a21\u5f0f\u6253\u5f00\u672c\u5730\u6587\u4ef6\n    with open(\"Chinook.db\", \"wb\") as file:\n        # \u5c06\u54cd\u5e94\u7684\u5185\u5bb9\uff08\u6587\u4ef6\uff09\u5199\u5165\u672c\u5730\u6587\u4ef6\n        file.write(response.content)\n    print(\"File downloaded and saved as Chinook.db\")\nelse:\n    print(f\"Failed to download the file. Status code: {response.status_code}\")\n</code></pre> <p>\u6211\u4eec\u5c06\u4f7f\u7528 <code>langchain_community</code> \u5305\u4e2d\u63d0\u4f9b\u7684\u4fbf\u6377 SQL \u6570\u636e\u5e93\u5305\u88c5\u5668\u6765\u4e0e\u6570\u636e\u5e93\u4ea4\u4e92\u3002\u8be5\u5305\u88c5\u5668\u63d0\u4f9b\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u63a5\u53e3\u6765\u6267\u884c SQL \u67e5\u8be2\u548c\u83b7\u53d6\u7ed3\u679c\uff1a</p> <pre><code>from langchain_community.utilities import SQLDatabase\n\ndb = SQLDatabase.from_uri(\"sqlite:///Chinook.db\")\n\nprint(f\"Dialect: {db.dialect}\")\nprint(f\"Available tables: {db.get_usable_table_names()}\")\nprint(f'Sample output: {db.run(\"SELECT * FROM Artist LIMIT 5;\")}')\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>Dialect: sqlite\nAvailable tables: ['Album', 'Artist', 'Customer', 'Employee', 'Genre', 'Invoice', 'InvoiceLine', 'MediaType', 'Playlist', 'PlaylistTrack', 'Track']\nSample output: [(1, 'AC/DC'), (2, 'Accept'), (3, 'Aerosmith'), (4, 'Alanis Morissette'), (5, 'Alice In Chains')]\n</code></pre></p>"},{"location":"tutorials/sql/sql-agent/#_2","title":"\u6570\u636e\u5e93\u4ea4\u4e92\u5de5\u5177","text":"<p><code>langchain-community</code> \u5b9e\u73b0\u4e86\u4e00\u4e9b\u7528\u4e8e\u4e0e\u6211\u4eec\u7684 <code>SQLDatabase</code> \u4ea4\u4e92\u7684\u5185\u7f6e\u5de5\u5177\uff0c\u5305\u62ec\u7528\u4e8e\u5217\u51fa\u8868\u3001\u8bfb\u53d6\u8868\u6a21\u5f0f\u4ee5\u53ca\u68c0\u67e5\u548c\u8fd0\u884c\u67e5\u8be2\u7684\u5de5\u5177\uff1a</p> <pre><code>from langchain_community.agent_toolkits import SQLDatabaseToolkit\n\ntoolkit = SQLDatabaseToolkit(db=db, llm=llm)\n\ntools = toolkit.get_tools()\n\nfor tool in tools:\n    print(f\"{tool.name}: {tool.description}\\n\")\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>sql_db_query: Input to this tool is a detailed and correct SQL query, output is a result from the database. If the query is not correct, an error message will be returned. If an error is returned, rewrite the query, check the query, and try again. If you encounter an issue with Unknown column 'xxxx' in 'field list', use sql_db_schema to query the correct table fields.\n\nsql_db_schema: Input to this tool is a comma-separated list of tables, output is the schema and sample rows for those tables. Be sure that the tables actually exist by calling sql_db_list_tables first! Example Input: table1, table2, table3\n\nsql_db_list_tables: Input is an empty string, output is a comma-separated list of tables in the database.\n\nsql_db_query_checker: Use this tool to double check if your query is correct before executing it. Always use this tool before executing a query with sql_db_query!\n</code></pre></p>"},{"location":"tutorials/sql/sql-agent/#2","title":"2. \u4f7f\u7528\u9884\u6784\u5efa\u667a\u80fd\u4f53","text":"<p>\u7ed9\u5b9a\u8fd9\u4e9b\u5de5\u5177\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u4e00\u884c\u4e2d\u521d\u59cb\u5316\u4e00\u4e2a\u9884\u6784\u5efa\u7684\u667a\u80fd\u4f53\u3002\u4e3a\u4e86\u81ea\u5b9a\u4e49\u6211\u4eec\u7684\u667a\u80fd\u4f53\u884c\u4e3a\uff0c\u6211\u4eec\u7f16\u5199\u4e00\u4e2a\u63cf\u8ff0\u6027\u7684\u7cfb\u7edf\u63d0\u793a\u3002</p> <pre><code>from langgraph.prebuilt import create_react_agent\n\nsystem_prompt = \"\"\"\n\u4f60\u662f\u4e00\u4e2a\u4e13\u4e3a\u4e0e SQL \u6570\u636e\u5e93\u4ea4\u4e92\u800c\u8bbe\u8ba1\u7684\u667a\u80fd\u4f53\u3002\n\u9488\u5bf9\u8f93\u5165\u7684\u95ee\u9898\uff0c\u521b\u5efa\u4e00\u4e2a\u8bed\u6cd5\u6b63\u786e\u7684 {dialect} \u67e5\u8be2\u6765\u8fd0\u884c\uff0c\n\u7136\u540e\u67e5\u770b\u67e5\u8be2\u7ed3\u679c\u5e76\u8fd4\u56de\u7b54\u6848\u3002\u9664\u975e\u7528\u6237\n\u6307\u5b9a\u4e86\u5e0c\u671b\u83b7\u5f97\u7684\u793a\u4f8b\u6570\u91cf\uff0c\u5426\u5219\u59cb\u7ec8\u5c06\u67e5\u8be2\n\u9650\u5236\u4e3a\u6700\u591a {top_k} \u4e2a\u7ed3\u679c\u3002\n\n\u4f60\u53ef\u4ee5\u6309\u76f8\u5173\u5217\u5bf9\u7ed3\u679c\u8fdb\u884c\u6392\u5e8f\uff0c\u4ee5\u8fd4\u56de\u6570\u636e\u5e93\u4e2d\u6700\u6709\u8da3\u7684\n\u793a\u4f8b\u3002\u6c38\u8fdc\u4e0d\u8981\u67e5\u8be2\u7279\u5b9a\u8868\u7684\u6240\u6709\u5217\uff0c\n\u53ea\u67e5\u8be2\u95ee\u9898\u76f8\u5173\u7684\u5217\u3002\n\n\u4f60\u5fc5\u987b\u5728\u6267\u884c\u67e5\u8be2\u4e4b\u524d\u4ed4\u7ec6\u68c0\u67e5\u67e5\u8be2\u3002\u5982\u679c\u6267\u884c\n\u67e5\u8be2\u65f6\u51fa\u9519\uff0c\u8bf7\u91cd\u5199\u67e5\u8be2\u5e76\u91cd\u8bd5\u3002\n\n\u4e0d\u8981\u5bf9\u6570\u636e\u5e93\u6267\u884c\u4efb\u4f55 DML \u8bed\u53e5\uff08INSERT\u3001UPDATE\u3001DELETE\u3001DROP \u7b49\uff09\u3002\n\n\u9996\u5148\u4f60\u5e94\u8be5\u59cb\u7ec8\u67e5\u770b\u6570\u636e\u5e93\u4e2d\u7684\u8868\uff0c\u4ee5\u4e86\u89e3\u53ef\u4ee5\n\u67e5\u8be2\u4ec0\u4e48\u3002\u4e0d\u8981\u8df3\u8fc7\u6b64\u6b65\u9aa4\u3002\n\n\u7136\u540e\u4f60\u5e94\u8be5\u67e5\u8be2\u6700\u76f8\u5173\u8868\u7684\u6a21\u5f0f\u3002\n\"\"\".format(\n    dialect=db.dialect,\n    top_k=5,\n)\n\nagent = create_react_agent(\n    llm,\n    tools,\n    prompt=system_prompt,\n)\n</code></pre> <p>Note</p> <p>\u6b64\u7cfb\u7edf\u63d0\u793a\u5305\u542b\u8bb8\u591a\u6307\u4ee4\uff0c\u4f8b\u5982\u59cb\u7ec8\u5728\u5176\u4ed6\u5de5\u5177\u4e4b\u524d\u6216\u4e4b\u540e\u8fd0\u884c\u7279\u5b9a\u5de5\u5177\u3002\u5728\u4e0b\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5c06\u901a\u8fc7\u56fe\u7684\u7ed3\u6784\u6765\u5f3a\u5236\u6267\u884c\u8fd9\u4e9b\u884c\u4e3a\uff0c\u4e3a\u6211\u4eec\u63d0\u4f9b\u66f4\u5927\u7a0b\u5ea6\u7684\u63a7\u5236\u5e76\u5141\u8bb8\u6211\u4eec\u7b80\u5316\u63d0\u793a\u3002</p> <p>\u8ba9\u6211\u4eec\u5728\u4e00\u4e2a\u793a\u4f8b\u67e5\u8be2\u4e0a\u8fd0\u884c\u8fd9\u4e2a\u667a\u80fd\u4f53\u5e76\u89c2\u5bdf\u5b83\u7684\u884c\u4e3a\uff1a</p> <pre><code>question = \"Which genre on average has the longest tracks?\"\n\nfor step in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": question}]},\n    stream_mode=\"values\",\n):\n    step[\"messages\"][-1].pretty_print()\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>================================ Human Message =================================\n\nWhich genre on average has the longest tracks?\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_list_tables (call_d8lCgywSroCgpVl558nmXKwA)\n Call ID: call_d8lCgywSroCgpVl558nmXKwA\n  Args:\n================================= Tool Message =================================\nName: sql_db_list_tables\n\nAlbum, Artist, Customer, Employee, Genre, Invoice, InvoiceLine, MediaType, Playlist, PlaylistTrack, Track\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_schema (call_nNf6IIUcwMYLIkE0l6uWkZHe)\n Call ID: call_nNf6IIUcwMYLIkE0l6uWkZHe\n  Args:\n    table_names: Genre, Track\n================================= Tool Message =================================\nName: sql_db_schema\n\n\nCREATE TABLE \"Genre\" (\n    \"GenreId\" INTEGER NOT NULL,\n    \"Name\" NVARCHAR(120),\n    PRIMARY KEY (\"GenreId\")\n)\n\n/*\n3 rows from Genre table:\nGenreId Name\n1   Rock\n2   Jazz\n3   Metal\n*/\n\n\nCREATE TABLE \"Track\" (\n    \"TrackId\" INTEGER NOT NULL,\n    \"Name\" NVARCHAR(200) NOT NULL,\n    \"AlbumId\" INTEGER,\n    \"MediaTypeId\" INTEGER NOT NULL,\n    \"GenreId\" INTEGER,\n    \"Composer\" NVARCHAR(220),\n    \"Milliseconds\" INTEGER NOT NULL,\n    \"Bytes\" INTEGER,\n    \"UnitPrice\" NUMERIC(10, 2) NOT NULL,\n    PRIMARY KEY (\"TrackId\"),\n    FOREIGN KEY(\"MediaTypeId\") REFERENCES \"MediaType\" (\"MediaTypeId\"),\n    FOREIGN KEY(\"GenreId\") REFERENCES \"Genre\" (\"GenreId\"),\n    FOREIGN KEY(\"AlbumId\") REFERENCES \"Album\" (\"AlbumId\")\n)\n\n/*\n3 rows from Track table:\nTrackId Name    AlbumId MediaTypeId GenreId Composer    Milliseconds    Bytes   UnitPrice\n1   For Those About To Rock (We Salute You) 1   1   1   Angus Young, Malcolm Young, Brian Johnson   343719  11170334    0.99\n2   Balls to the Wall   2   2   1   None    342562  5510424 0.99\n3   Fast As a Shark 3   2   1   F. Baltes, S. Kaufman, U. Dirkscneider &amp; W. Hoffman 230619  3990994 0.99\n*/\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_query_checker (call_urTRmtiGtTxkwHtscec7Fd2K)\n Call ID: call_urTRmtiGtTxkwHtscec7Fd2K\n  Args:\n    query: SELECT Genre.Name, AVG(Track.Milliseconds) AS AvgMilliseconds\nFROM Track\nJOIN Genre ON Track.GenreId = Genre.GenreId\nGROUP BY Genre.Name\nORDER BY AvgMilliseconds DESC\nLIMIT 1;\n================================= Tool Message =================================\nName: sql_db_query_checker\n\n\\`\\`\\`sql\nSELECT Genre.Name, AVG(Track.Milliseconds) AS AvgMilliseconds\nFROM Track\nJOIN Genre ON Track.GenreId = Genre.GenreId\nGROUP BY Genre.Name\nORDER BY AvgMilliseconds DESC\nLIMIT 1;\n\\`\\`\\`\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_query (call_RNMqyUEMv0rvy0UxSwrXY2AV)\n Call ID: call_RNMqyUEMv0rvy0UxSwrXY2AV\n  Args:\n    query: SELECT Genre.Name, AVG(Track.Milliseconds) AS AvgMilliseconds\nFROM Track\nJOIN Genre ON Track.GenreId = Genre.GenreId\nGROUP BY Genre.Name\nORDER BY AvgMilliseconds DESC\nLIMIT 1;\n================================= Tool Message =================================\nName: sql_db_query\n\n[('Sci Fi &amp; Fantasy', 2911783.0384615385)]\n================================== Ai Message ==================================\n\nThe genre with the longest average track length is \"Sci Fi &amp; Fantasy,\" with an average duration of about 2,911,783 milliseconds (approximately 48.5 minutes) per track.\n</code></pre></p> <p>\u8fd9\u8fd0\u884c\u5f97\u76f8\u5f53\u597d\uff1a\u667a\u80fd\u4f53\u6b63\u786e\u5730\u5217\u51fa\u4e86\u8868\uff0c\u83b7\u53d6\u4e86\u6a21\u5f0f\uff0c\u7f16\u5199\u4e86\u67e5\u8be2\uff0c\u68c0\u67e5\u4e86\u67e5\u8be2\uff0c\u5e76\u8fd0\u884c\u5b83\u4ee5\u63d0\u4f9b\u6700\u7ec8\u54cd\u5e94\u3002</p> <p>Tip</p> <p>\u4f60\u53ef\u4ee5\u5728 LangSmith \u8ffd\u8e2a\u4e2d\u68c0\u67e5\u4e0a\u8ff0\u8fd0\u884c\u7684\u6240\u6709\u65b9\u9762\uff0c\u5305\u62ec\u91c7\u53d6\u7684\u6b65\u9aa4\u3001\u8c03\u7528\u7684\u5de5\u5177\u3001LLM \u770b\u5230\u7684\u63d0\u793a\u7b49\u3002</p>"},{"location":"tutorials/sql/sql-agent/#3","title":"3. \u81ea\u5b9a\u4e49\u667a\u80fd\u4f53","text":"<p>\u9884\u6784\u5efa\u7684\u667a\u80fd\u4f53\u8ba9\u6211\u4eec\u5feb\u901f\u5f00\u59cb\uff0c\u4f46\u5728\u6bcf\u4e00\u6b65\u667a\u80fd\u4f53\u90fd\u53ef\u4ee5\u8bbf\u95ee\u5b8c\u6574\u7684\u5de5\u5177\u96c6\u3002\u4e0a\u9762\uff0c\u6211\u4eec\u4f9d\u8d56\u7cfb\u7edf\u63d0\u793a\u6765\u7ea6\u675f\u5176\u884c\u4e3a\u2014\u2014\u4f8b\u5982\uff0c\u6211\u4eec\u6307\u793a\u667a\u80fd\u4f53\u59cb\u7ec8\u4ece\"\u5217\u51fa\u8868\"\u5de5\u5177\u5f00\u59cb\uff0c\u5e76\u59cb\u7ec8\u5728\u6267\u884c\u67e5\u8be2\u4e4b\u524d\u8fd0\u884c\u67e5\u8be2\u68c0\u67e5\u5668\u5de5\u5177\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u81ea\u5b9a\u4e49\u667a\u80fd\u4f53\u5728 LangGraph \u4e2d\u5f3a\u5236\u6267\u884c\u66f4\u9ad8\u7a0b\u5ea6\u7684\u63a7\u5236\u3002\u4e0b\u9762\uff0c\u6211\u4eec\u5b9e\u73b0\u4e86\u4e00\u4e2a\u7b80\u5355\u7684 ReAct-\u667a\u80fd\u4f53\u8bbe\u7f6e\uff0c\u5177\u6709\u7528\u4e8e\u7279\u5b9a\u5de5\u5177\u8c03\u7528\u7684\u4e13\u7528\u8282\u70b9\u3002\u6211\u4eec\u5c06\u4f7f\u7528\u4e0e\u9884\u6784\u5efa\u667a\u80fd\u4f53\u76f8\u540c\u7684\u72b6\u6001\u3002</p> <p>\u6211\u4eec\u4e3a\u4ee5\u4e0b\u6b65\u9aa4\u6784\u5efa\u4e13\u7528\u8282\u70b9\uff1a</p> <ul> <li>\u5217\u51fa\u6570\u636e\u5e93\u8868</li> <li>\u8c03\u7528\"\u83b7\u53d6\u6a21\u5f0f\"\u5de5\u5177</li> <li>\u751f\u6210\u67e5\u8be2</li> <li>\u68c0\u67e5\u67e5\u8be2</li> </ul> <p>\u5c06\u8fd9\u4e9b\u6b65\u9aa4\u653e\u5728\u4e13\u7528\u8282\u70b9\u4e2d\u8ba9\u6211\u4eec\uff081\uff09\u5728\u9700\u8981\u65f6\u5f3a\u5236\u5de5\u5177\u8c03\u7528\uff0c\u4ee5\u53ca\uff082\uff09\u81ea\u5b9a\u4e49\u4e0e\u6bcf\u4e2a\u6b65\u9aa4\u5173\u8054\u7684\u63d0\u793a\u3002</p> <pre><code>from typing import Literal\nfrom langchain_core.messages import AIMessage\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.graph import END, START, MessagesState, StateGraph\nfrom langgraph.prebuilt import ToolNode\n\n\nget_schema_tool = next(tool for tool in tools if tool.name == \"sql_db_schema\")\nget_schema_node = ToolNode([get_schema_tool], name=\"get_schema\")\n\nrun_query_tool = next(tool for tool in tools if tool.name == \"sql_db_query\")\nrun_query_node = ToolNode([run_query_tool], name=\"run_query\")\n\n\n# \u793a\u4f8b\uff1a\u521b\u5efa\u9884\u5b9a\u7684\u5de5\u5177\u8c03\u7528\ndef list_tables(state: MessagesState):\n    tool_call = {\n        \"name\": \"sql_db_list_tables\",\n        \"args\": {},\n        \"id\": \"abc123\",\n        \"type\": \"tool_call\",\n    }\n    tool_call_message = AIMessage(content=\"\", tool_calls=[tool_call])\n\n    list_tables_tool = next(tool for tool in tools if tool.name == \"sql_db_list_tables\")\n    tool_message = list_tables_tool.invoke(tool_call)\n    response = AIMessage(f\"Available tables: {tool_message.content}\")\n\n    return {\"messages\": [tool_call_message, tool_message, response]}\n\n\n# \u793a\u4f8b\uff1a\u5f3a\u5236\u6a21\u578b\u521b\u5efa\u5de5\u5177\u8c03\u7528\ndef call_get_schema(state: MessagesState):\n    # \u6ce8\u610f\uff0cLangChain \u5f3a\u5236\u6240\u6709\u6a21\u578b\u63a5\u53d7 `tool_choice=\"any\"`\n    # \u4ee5\u53ca `tool_choice=&lt;\u5de5\u5177\u540d\u79f0\u5b57\u7b26\u4e32&gt;`\u3002\n    llm_with_tools = llm.bind_tools([get_schema_tool], tool_choice=\"any\")\n    response = llm_with_tools.invoke(state[\"messages\"])\n\n    return {\"messages\": [response]}\n\n\ngenerate_query_system_prompt = \"\"\"\nYou are an agent designed to interact with a SQL database.\nGiven an input question, create a syntactically correct {dialect} query to run,\nthen look at the results of the query and return the answer. Unless the user\nspecifies a specific number of examples they wish to obtain, always limit your\nquery to at most {top_k} results.\n\nYou can order the results by a relevant column to return the most interesting\nexamples in the database. Never query for all the columns from a specific table,\nonly ask for the relevant columns given the question.\n\nDO NOT make any DML statements (INSERT, UPDATE, DELETE, DROP etc.) to the database.\n\"\"\".format(\n    dialect=db.dialect,\n    top_k=5,\n)\n\n\ndef generate_query(state: MessagesState):\n    system_message = {\n        \"role\": \"system\",\n        \"content\": generate_query_system_prompt,\n    }\n    # \u6211\u4eec\u4e0d\u4f1a\u5728\u8fd9\u91cc\u5f3a\u5236\u5de5\u5177\u8c03\u7528\uff0c\u4ee5\u5141\u8bb8\u6a21\u578b\u5728\u83b7\u5f97\u89e3\u51b3\u65b9\u6848\u65f6\u81ea\u7136\u5730\u54cd\u5e94\u3002\n    llm_with_tools = llm.bind_tools([run_query_tool])\n    response = llm_with_tools.invoke([system_message] + state[\"messages\"])\n\n    return {\"messages\": [response]}\n\n\ncheck_query_system_prompt = \"\"\"\n\u4f60\u662f\u4e00\u4f4d\u6ce8\u91cd\u7ec6\u8282\u7684 SQL \u4e13\u5bb6\u3002\n\u4ed4\u7ec6\u68c0\u67e5 {dialect} \u67e5\u8be2\u4e2d\u7684\u5e38\u89c1\u9519\u8bef\uff0c\u5305\u62ec\uff1a\n- \u4f7f\u7528 NOT IN \u5904\u7406 NULL \u503c\n- \u5e94\u8be5\u4f7f\u7528 UNION ALL \u65f6\u5374\u4f7f\u7528\u4e86 UNION\n- \u4f7f\u7528 BETWEEN \u5904\u7406\u6392\u4ed6\u6027\u8303\u56f4\n- \u8c13\u8bcd\u4e2d\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u5339\u914d\n- \u6b63\u786e\u5f15\u7528\u6807\u8bc6\u7b26\n- \u4f7f\u7528\u6b63\u786e\u6570\u91cf\u7684\u51fd\u6570\u53c2\u6570\n- \u8f6c\u6362\u4e3a\u6b63\u786e\u7684\u6570\u636e\u7c7b\u578b\n- \u4f7f\u7528\u6b63\u786e\u7684\u8fde\u63a5\u5217\n\n\u5982\u679c\u5b58\u5728\u4e0a\u8ff0\u4efb\u4f55\u9519\u8bef\uff0c\u8bf7\u91cd\u5199\u67e5\u8be2\u3002\u5982\u679c\u6ca1\u6709\u9519\u8bef\uff0c\n\u53ea\u9700\u91cd\u73b0\u539f\u59cb\u67e5\u8be2\u3002\n\n\u8fd0\u884c\u6b64\u68c0\u67e5\u540e\uff0c\u4f60\u5c06\u8c03\u7528\u9002\u5f53\u7684\u5de5\u5177\u6765\u6267\u884c\u67e5\u8be2\u3002\n\"\"\".format(dialect=db.dialect)\n\n\ndef check_query(state: MessagesState):\n    system_message = {\n        \"role\": \"system\",\n        \"content\": check_query_system_prompt,\n    }\n\n    # \u751f\u6210\u4eba\u5de5\u7528\u6237\u6d88\u606f\u4ee5\u68c0\u67e5\n    tool_call = state[\"messages\"][-1].tool_calls[0]\n    user_message = {\"role\": \"user\", \"content\": tool_call[\"args\"][\"query\"]}\n    llm_with_tools = llm.bind_tools([run_query_tool], tool_choice=\"any\")\n    response = llm_with_tools.invoke([system_message, user_message])\n    response.id = state[\"messages\"][-1].id\n\n    return {\"messages\": [response]}\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u4f7f\u7528 Graph API \u5c06\u8fd9\u4e9b\u6b65\u9aa4\u7ec4\u88c5\u6210\u4e00\u4e2a\u5de5\u4f5c\u6d41\u3002\u6211\u4eec\u5728\u67e5\u8be2\u751f\u6210\u6b65\u9aa4\u5b9a\u4e49\u4e00\u4e2a\u6761\u4ef6\u8fb9\uff0c\u5982\u679c\u751f\u6210\u4e86\u67e5\u8be2\uff0c\u5c06\u8def\u7531\u5230\u67e5\u8be2\u68c0\u67e5\u5668\uff1b\u5982\u679c\u6ca1\u6709\u5de5\u5177\u8c03\u7528\uff0c\u5219\u7ed3\u675f\uff0c\u8fd9\u6837 LLM \u5c31\u5df2\u7ecf\u63d0\u4f9b\u4e86\u5bf9\u67e5\u8be2\u7684\u54cd\u5e94\u3002</p> <pre><code>def should_continue(state: MessagesState) -&gt; Literal[END, \"check_query\"]:\n    messages = state[\"messages\"]\n    last_message = messages[-1]\n    if not last_message.tool_calls:\n        return END\n    else:\n        return \"check_query\"\n\n\nbuilder = StateGraph(MessagesState)\nbuilder.add_node(list_tables)\nbuilder.add_node(call_get_schema)\nbuilder.add_node(get_schema_node, \"get_schema\")\nbuilder.add_node(generate_query)\nbuilder.add_node(check_query)\nbuilder.add_node(run_query_node, \"run_query\")\n\nbuilder.add_edge(START, \"list_tables\")\nbuilder.add_edge(\"list_tables\", \"call_get_schema\")\nbuilder.add_edge(\"call_get_schema\", \"get_schema\")\nbuilder.add_edge(\"get_schema\", \"generate_query\")\nbuilder.add_conditional_edges(\n    \"generate_query\",\n    should_continue,\n)\nbuilder.add_edge(\"check_query\", \"run_query\")\nbuilder.add_edge(\"run_query\", \"generate_query\")\n\nagent = builder.compile()\n</code></pre> <p>\u6211\u4eec\u5728\u4e0b\u9762\u53ef\u89c6\u5316\u5e94\u7528\uff1a</p> <pre><code>from IPython.display import Image, display\nfrom langchain_core.runnables.graph import CurveStyle, MermaidDrawMethod, NodeStyles\n\ndisplay(Image(agent.get_graph().draw_mermaid_png()))\n</code></pre> <p></p> <p>\u6ce8\u610f\uff1a \u5f53\u4f60\u8fd0\u884c\u8fd9\u6bb5\u4ee3\u7801\u65f6\uff0c\u5b83\u5c06\u751f\u6210\u5e76\u663e\u793a SQL \u667a\u80fd\u4f53\u56fe\u7684\u53ef\u89c6\u5316\u8868\u793a\uff0c\u5c55\u793a\u4e0d\u540c\u8282\u70b9\u4e4b\u95f4\u7684\u6d41\u7a0b\uff08list_tables \u2192 call_get_schema \u2192 get_schema \u2192 generate_query \u2192 check_query \u2192 run_query\uff09\u3002</p> <p>\u6211\u4eec\u73b0\u5728\u53ef\u4ee5\u50cf\u4ee5\u524d\u4e00\u6837\u8c03\u7528\u56fe\uff1a</p> <pre><code>question = \"Which genre on average has the longest tracks?\"\n\nfor step in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": question}]},\n    stream_mode=\"values\",\n):\n    step[\"messages\"][-1].pretty_print()\n</code></pre> <p>\u8f93\u51fa\uff1a <pre><code>================================ Human Message =================================\n\nWhich genre on average has the longest tracks?\n================================== Ai Message ==================================\n\nAvailable tables: Album, Artist, Customer, Employee, Genre, Invoice, InvoiceLine, MediaType, Playlist, PlaylistTrack, Track\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_schema (call_qxKtYiHgf93AiTDin9ez5wFp)\n Call ID: call_qxKtYiHgf93AiTDin9ez5wFp\n  Args:\n    table_names: Genre,Track\n================================= Tool Message =================================\nName: sql_db_schema\n\n\nCREATE TABLE \"Genre\" (\n    \"GenreId\" INTEGER NOT NULL,\n    \"Name\" NVARCHAR(120),\n    PRIMARY KEY (\"GenreId\")\n)\n\n/*\n3 rows from Genre table:\nGenreId Name\n1   Rock\n2   Jazz\n3   Metal\n*/\n\n\nCREATE TABLE \"Track\" (\n    \"TrackId\" INTEGER NOT NULL,\n    \"Name\" NVARCHAR(200) NOT NULL,\n    \"AlbumId\" INTEGER,\n    \"MediaTypeId\" INTEGER NOT NULL,\n    \"GenreId\" INTEGER,\n    \"Composer\" NVARCHAR(220),\n    \"Milliseconds\" INTEGER NOT NULL,\n    \"Bytes\" INTEGER,\n    \"UnitPrice\" NUMERIC(10, 2) NOT NULL,\n    PRIMARY KEY (\"TrackId\"),\n    FOREIGN KEY(\"MediaTypeId\") REFERENCES \"MediaType\" (\"MediaTypeId\"),\n    FOREIGN KEY(\"GenreId\") REFERENCES \"Genre\" (\"GenreId\"),\n    FOREIGN KEY(\"AlbumId\") REFERENCES \"Album\" (\"AlbumId\")\n)\n\n/*\n3 rows from Track table:\nTrackId Name    AlbumId MediaTypeId GenreId Composer    Milliseconds    Bytes   UnitPrice\n1   For Those About To Rock (We Salute You) 1   1   1   Angus Young, Malcolm Young, Brian Johnson   343719  11170334    0.99\n2   Balls to the Wall   2   2   1   None    342562  5510424 0.99\n3   Fast As a Shark 3   2   1   F. Baltes, S. Kaufman, U. Dirkscneider &amp; W. Hoffman 230619  3990994 0.99\n*/\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_query (call_RPN3GABMfb6DTaFTLlwnZxVN)\n Call ID: call_RPN3GABMfb6DTaFTLlwnZxVN\n  Args:\n    query: SELECT Genre.Name, AVG(Track.Milliseconds) AS AvgTrackLength\nFROM Track\nJOIN Genre ON Track.GenreId = Genre.GenreId\nGROUP BY Genre.GenreId\nORDER BY AvgTrackLength DESC\nLIMIT 1;\n================================== Ai Message ==================================\nTool Calls:\n  sql_db_query (call_PR4s8ymiF3ZQLaoZADXtdqcl)\n Call ID: call_PR4s8ymiF3ZQLaoZADXtdqcl\n  Args:\n    query: SELECT Genre.Name, AVG(Track.Milliseconds) AS AvgTrackLength\nFROM Track\nJOIN Genre ON Track.GenreId = Genre.GenreId\nGROUP BY Genre.GenreId\nORDER BY AvgTrackLength DESC\nLIMIT 1;\n================================= Tool Message =================================\nName: sql_db_query\n\n[('Sci Fi &amp; Fantasy', 2911783.0384615385)]\n================================== Ai Message ==================================\n\nThe genre with the longest tracks on average is \"Sci Fi &amp; Fantasy,\" with an average track length of approximately 2,911,783 milliseconds.\n</code></pre></p> <p>Tip</p> <p>\u67e5\u770b\u4e0a\u8ff0\u8fd0\u884c\u7684 LangSmith \u8ffd\u8e2a\u3002</p>"},{"location":"tutorials/sql/sql-agent/#_3","title":"\u4e0b\u4e00\u6b65","text":"<p>\u67e5\u770b\u6b64\u6307\u5357\u4ee5\u4f7f\u7528 LangSmith \u8bc4\u4f30 LangGraph \u5e94\u7528\u7a0b\u5e8f\uff0c\u5305\u62ec\u50cf\u8fd9\u6837\u7684 SQL \u667a\u80fd\u4f53\u3002 </p>"}]}